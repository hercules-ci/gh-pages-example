<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Documentation - Nix 2.28.1 Reference Manual</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="../highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="../tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../custom.css">


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "../";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Nix 2.28.1 Reference Manual</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/NixOS/nix" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/NixOS/nix/tree/master/doc/manual/source/development/documentation.md" title="Suggest an edit" aria-label="Suggest an edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="contributing-documentation"><a class="header" href="#contributing-documentation">Contributing documentation</a></h1>
<p>Improvements to documentation are very much appreciated, and a good way to start out with contributing to Nix.</p>
<p>This is how you can help:</p>
<ul>
<li>Address <a href="https://github.com/NixOS/nix/issues?q=is%3Aissue+is%3Aopen+label%3Adocumentation">open issues with documentation</a></li>
<li>Review <a href="https://github.com/NixOS/nix/pulls?q=is%3Apr+is%3Aopen+label%3Adocumentation">pull requests concerning documentation</a></li>
</ul>
<p>Incremental refactorings of the documentation build setup to make it faster or easier to understand and maintain are also welcome.</p>
<h2 id="building-the-manual"><a class="header" href="#building-the-manual">Building the manual</a></h2>
<p>Build the manual from scratch:</p>
<pre><code class="language-console">nix-build -E '(import ./.).packages.${builtins.currentSystem}.nix.doc'
</code></pre>
<p>or</p>
<pre><code class="language-console">nix build .#nix-manual
</code></pre>
<p>and open <code>./result/share/doc/nix/manual/index.html</code>.</p>
<p>To build the manual incrementally, <a href="./building.html">enter the development shell</a> and run:</p>
<pre><code class="language-console">make manual-html-open -j $NIX_BUILD_CORES
</code></pre>
<p>In order to reflect changes to the <a href="https://github.com/NixOS/nix/blob/master/doc/manual/local.mk">Makefile for the manual</a>, clear all generated files before re-building:</p>
<pre><code class="language-console">rm $(git ls-files doc/manual/ -o | grep -F '.md') &amp;&amp; rmdir doc/manual/source/command-ref/new-cli &amp;&amp; make manual-html -j $NIX_BUILD_CORES
</code></pre>
<h2 id="style-guide"><a class="header" href="#style-guide">Style guide</a></h2>
<p>The goal of this style guide is to make it such that</p>
<ul>
<li>The manual is easy to search and skim for relevant information</li>
<li>Documentation sources are easy to edit</li>
<li>Changes to documentation are easy to review</li>
</ul>
<p>You will notice that this is not implemented consistently yet.
Please follow the guide when making additions or changes to existing documentation.
Do not make sweeping changes, unless they are programmatic and can be validated easily.</p>
<h3 id="language"><a class="header" href="#language">Language</a></h3>
<p>This manual is <a href="https://diataxis.fr/reference/">reference documentation</a>.
The typical usage pattern is to look up isolated pieces of information.
It should therefore aim to be correct, consistent, complete, and easy to navigate at a glance.</p>
<ul>
<li>
<p>Aim for clarity and brevity.</p>
<p>Please take the time to read the <a href="https://www.plainlanguage.gov/guidelines/">plain language guidelines</a> for details.</p>
</li>
<li>
<p>Describe the subject factually.</p>
<p>In particular, do not make value judgements or recommendations.
Check the code or add tests if in doubt.</p>
</li>
<li>
<p>Provide complete, minimal examples, and explain them.</p>
<p>Readers should be able to try examples verbatim and get the same results as shown in the manual.
Always describe in words what a given example does.</p>
<p>Non-trivial examples may need additional explanation, especially if they use concepts from outside the given context.</p>
</li>
<li>
<p>Always explain code examples in the text.</p>
<p>Use comments in code samples very sparingly, for instance to highlight a particular aspect.
Readers tend to glance over large amounts of code when scanning for information.</p>
<p>Especially beginners will likely find reading more complex-looking code strenuous and may therefore avoid it altogether.</p>
<p>If a code sample appears to require a lot of inline explanation, consider replacing it with a simpler one.
If that's not possible, break the example down into multiple parts, explain them separately, and then show the combined result at the end.
This should be a last resort, as that would amount to writing a <a href="https://diataxis.fr/tutorials/">tutorial</a> on the given subject.</p>
</li>
<li>
<p>Use British English.</p>
<p>This is a somewhat arbitrary choice to force consistency, and accounts for the fact that a majority of Nix users and developers are from Europe.</p>
</li>
</ul>
<h3 id="links-and-anchors"><a class="header" href="#links-and-anchors">Links and anchors</a></h3>
<p>Reference documentation must be readable in arbitrary order.
Readers cannot be expected to have any particular prerequisite knowledge about Nix.
While the table of contents can provide guidance and full-text search can help, they are most likely to find what they need by following sensible cross-references.</p>
<ul>
<li>
<p>Link to technical terms</p>
<p>When mentioning Nix-specific concepts, commands, options, settings, etc., link to appropriate documentation.
Also link to external tools or concepts, especially if their meaning may be ambiguous.
You may also want to link to definitions of less common technical terms.</p>
<p>Then readers won't have to actively search for definitions and are more likely to discover relevant information on their own.</p>
<blockquote>
<p><strong>Note</strong></p>
<p><code>man</code> and <code>--help</code> pages don't display links.
Use appropriate link texts such that readers of terminal output can infer search terms.</p>
</blockquote>
</li>
<li>
<p>Do not break existing URLs between releases.</p>
<p>There are countless links in the wild pointing to old versions of the manual.
We want people to find up-to-date documentation when following popular advice.</p>
<ul>
<li>
<p>When moving files, update <a href="https://github.com/NixOS/nixos-homepage/blob/master/netlify.toml">redirects on nixos.org</a>.</p>
<p>This is especially important when moving information out of the Nix manual to other resources.</p>
</li>
<li>
<p>When changing anchors, update <a href="https://github.com/NixOS/nix/blob/master/doc/manual/redirects.js">client-side redirects</a></p>
</li>
</ul>
<p>The current setup is cumbersome, and help making better automation is appreciated.</p>
</li>
</ul>
<p>The build checks for broken internal links with.
This happens late in the process, so <a href="#building-the-manual">building the whole manual</a> is not suitable for iterating quickly.
<a href="https://github.com/Michael-F-Bryan/mdbook-linkcheck"><code>mdbook-linkcheck</code></a> does not implement checking <a href="https://en.wikipedia.org/wiki/URI_fragment">URI fragments</a> yet.</p>
<h3 id="markdown-conventions"><a class="header" href="#markdown-conventions">Markdown conventions</a></h3>
<p>The manual is written in markdown, and rendered with <a href="https://github.com/rust-lang/mdBook">mdBook</a> for the web and with <a href="https://github.com/kristapsdz/lowdown">lowdown</a> for <code>man</code> pages and <code>--help</code> output.</p>
<p>For supported markdown features, refer to:</p>
<ul>
<li><a href="https://rust-lang.github.io/mdBook/format/markdown.html">mdBook documentation</a></li>
<li><a href="https://kristaps.bsd.lv/lowdown/">lowdown documentation</a></li>
</ul>
<p>Please observe these guidelines to ease reviews:</p>
<ul>
<li>
<p>Write one sentence per line.</p>
<p>This makes long sentences immediately visible, and makes it easier to review changes and make direct suggestions.</p>
</li>
<li>
<p>Use reference links – sparingly – to ease source readability.
Put definitions close to their first use.</p>
<p>Example:</p>
<pre><code>A [store object] contains a [file system object] and [references] to other store objects.

[store object]: ../store/store-object.md
[file system object]: ../architecture/file-system-object.md
[references]: ../glossary.md#gloss-reference
</code></pre>
</li>
<li>
<p>Use admonitions of the following form:</p>
<pre><code>&gt; **Note**
&gt;
&gt; This is a note.
</code></pre>
<p>Highlight examples as such:</p>
<pre><code>&gt; **Example**
&gt;
&gt; ```console
&gt; $ nix --version
&gt; ```
</code></pre>
<p>Highlight syntax definitions as such, using <a href="https://en.wikipedia.org/wiki/Extended_Backus%E2%80%93Naur_form">EBNF</a> notation:</p>
<pre><code>&gt; **Syntax**
&gt;
&gt; *attribute-set* = `{` [ *attribute-name* `=` *expression* `;` ... ] `}`
</code></pre>
</li>
</ul>
<h3 id="the--variable"><a class="header" href="#the--variable">The <code>..</code> variable</a></h3>
<p><code>..</code> provides a base path for links that occur in reusable snippets or other documentation that doesn't have a base path of its own.</p>
<p>If a broken link occurs in a snippet that was inserted into multiple generated files in different directories, use <code>..</code> to reference the <code>doc/manual/source</code> directory.</p>
<p>If the <code>..</code> literal appears in an error message from the <a href="https://github.com/Michael-F-Bryan/mdbook-linkcheck"><code>mdbook-linkcheck</code></a> tool, the <code>..</code> replacement needs to be applied to the generated source file that mentions it.
See existing <code>..</code> logic in the <a href="https://github.com/NixOS/nix/blob/master/doc/manual/local.mk">Makefile for the manual</a>.
Regular markdown files used for the manual have a base path of their own and they can use relative paths instead of <code>..</code>.</p>
<h2 id="api-documentation"><a class="header" href="#api-documentation">API documentation</a></h2>
<p><a href="https://hydra.nixos.org/job/nix/master/internal-api-docs/latest/download-by-type/doc/internal-api-docs">Doxygen API documentation</a> is available online.
You can also build and view it yourself:</p>
<pre><code class="language-console">$ nix build .#hydraJobs.internal-api-docs
$ xdg-open ./result/share/doc/nix/internal-api/html/index.html
</code></pre>
<p>or inside <code>nix-shell</code> or <code>nix develop</code>:</p>
<pre><code class="language-console">$ configurePhase
$ ninja src/internal-api-docs/html
$ xdg-open src/internal-api-docs/html/index.html
</code></pre>
<h2 id="c-api-documentation"><a class="header" href="#c-api-documentation">C API documentation</a></h2>
<p>Note that the C API is not yet stable.
<a href="https://hydra.nixos.org/job/nix/master/external-api-docs/latest/download-by-type/doc/external-api-docs">C API documentation</a> is available online.
You can also build and view it yourself:</p>
<pre><code class="language-console">$ nix build .#hydraJobs.external-api-docs
$ xdg-open ./result/share/doc/nix/external-api/html/index.html
</code></pre>
<p>or inside <code>nix-shell</code> or <code>nix develop</code>:</p>
<pre><code>$ configurePhase
$ ninja src/external-api-docs/html
$ xdg-open src/external-api-docs/html/index.html
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../development/debugging.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../development/cli-guideline.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../development/debugging.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../development/cli-guideline.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->
        <script src="../redirects.js"></script>


    </div>
    </body>
</html>
