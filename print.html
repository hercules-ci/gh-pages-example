<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Nix Reference Manual</title>
        <meta name="robots" content="noindex" />


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="custom.css">

    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = null;
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="introduction.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="quick-start.html"><strong aria-hidden="true">2.</strong> Quick Start</a></li><li class="chapter-item expanded "><a href="installation/installation.html"><strong aria-hidden="true">3.</strong> Installation</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="installation/supported-platforms.html"><strong aria-hidden="true">3.1.</strong> Supported Platforms</a></li><li class="chapter-item expanded "><a href="installation/installing-binary.html"><strong aria-hidden="true">3.2.</strong> Installing a Binary Distribution</a></li><li class="chapter-item expanded "><a href="installation/installing-source.html"><strong aria-hidden="true">3.3.</strong> Installing Nix from Source</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="installation/prerequisites-source.html"><strong aria-hidden="true">3.3.1.</strong> Prerequisites</a></li><li class="chapter-item expanded "><a href="installation/obtaining-source.html"><strong aria-hidden="true">3.3.2.</strong> Obtaining a Source Distribution</a></li><li class="chapter-item expanded "><a href="installation/building-source.html"><strong aria-hidden="true">3.3.3.</strong> Building Nix from Source</a></li></ol></li><li class="chapter-item expanded "><a href="installation/installing-docker.html"><strong aria-hidden="true">3.4.</strong> Using Nix within Docker</a></li><li class="chapter-item expanded "><a href="installation/nix-security.html"><strong aria-hidden="true">3.5.</strong> Security</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="installation/single-user.html"><strong aria-hidden="true">3.5.1.</strong> Single-User Mode</a></li><li class="chapter-item expanded "><a href="installation/multi-user.html"><strong aria-hidden="true">3.5.2.</strong> Multi-User Mode</a></li></ol></li><li class="chapter-item expanded "><a href="installation/env-variables.html"><strong aria-hidden="true">3.6.</strong> Environment Variables</a></li><li class="chapter-item expanded "><a href="installation/upgrading.html"><strong aria-hidden="true">3.7.</strong> Upgrading Nix</a></li></ol></li><li class="chapter-item expanded "><a href="package-management/package-management.html"><strong aria-hidden="true">4.</strong> Package Management</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="package-management/basic-package-mgmt.html"><strong aria-hidden="true">4.1.</strong> Basic Package Management</a></li><li class="chapter-item expanded "><a href="package-management/profiles.html"><strong aria-hidden="true">4.2.</strong> Profiles</a></li><li class="chapter-item expanded "><a href="package-management/garbage-collection.html"><strong aria-hidden="true">4.3.</strong> Garbage Collection</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="package-management/garbage-collector-roots.html"><strong aria-hidden="true">4.3.1.</strong> Garbage Collector Roots</a></li></ol></li><li class="chapter-item expanded "><a href="package-management/channels.html"><strong aria-hidden="true">4.4.</strong> Channels</a></li><li class="chapter-item expanded "><a href="package-management/sharing-packages.html"><strong aria-hidden="true">4.5.</strong> Sharing Packages Between Machines</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="package-management/binary-cache-substituter.html"><strong aria-hidden="true">4.5.1.</strong> Serving a Nix store via HTTP</a></li><li class="chapter-item expanded "><a href="package-management/copy-closure.html"><strong aria-hidden="true">4.5.2.</strong> Copying Closures via SSH</a></li><li class="chapter-item expanded "><a href="package-management/ssh-substituter.html"><strong aria-hidden="true">4.5.3.</strong> Serving a Nix store via SSH</a></li><li class="chapter-item expanded "><a href="package-management/s3-substituter.html"><strong aria-hidden="true">4.5.4.</strong> Serving a Nix store via S3</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="language/index.html"><strong aria-hidden="true">5.</strong> Nix Language</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="language/values.html"><strong aria-hidden="true">5.1.</strong> Data Types</a></li><li class="chapter-item expanded "><a href="language/constructs.html"><strong aria-hidden="true">5.2.</strong> Language Constructs</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="language/string-interpolation.html"><strong aria-hidden="true">5.2.1.</strong> String interpolation</a></li></ol></li><li class="chapter-item expanded "><a href="language/operators.html"><strong aria-hidden="true">5.3.</strong> Operators</a></li><li class="chapter-item expanded "><a href="language/derivations.html"><strong aria-hidden="true">5.4.</strong> Derivations</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="language/advanced-attributes.html"><strong aria-hidden="true">5.4.1.</strong> Advanced Attributes</a></li></ol></li><li class="chapter-item expanded "><a href="language/builtin-constants.html"><strong aria-hidden="true">5.5.</strong> Built-in Constants</a></li><li class="chapter-item expanded "><a href="language/builtins.html"><strong aria-hidden="true">5.6.</strong> Built-in Functions</a></li></ol></li><li class="chapter-item expanded "><a href="advanced-topics/advanced-topics.html"><strong aria-hidden="true">6.</strong> Advanced Topics</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="advanced-topics/distributed-builds.html"><strong aria-hidden="true">6.1.</strong> Remote Builds</a></li><li class="chapter-item expanded "><a href="advanced-topics/cores-vs-jobs.html"><strong aria-hidden="true">6.2.</strong> Tuning Cores and Jobs</a></li><li class="chapter-item expanded "><a href="advanced-topics/diff-hook.html"><strong aria-hidden="true">6.3.</strong> Verifying Build Reproducibility</a></li><li class="chapter-item expanded "><a href="advanced-topics/post-build-hook.html"><strong aria-hidden="true">6.4.</strong> Using the post-build-hook</a></li></ol></li><li class="chapter-item expanded "><a href="command-ref/command-ref.html"><strong aria-hidden="true">7.</strong> Command Reference</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="command-ref/opt-common.html"><strong aria-hidden="true">7.1.</strong> Common Options</a></li><li class="chapter-item expanded "><a href="command-ref/env-common.html"><strong aria-hidden="true">7.2.</strong> Common Environment Variables</a></li><li class="chapter-item expanded "><a href="command-ref/main-commands.html"><strong aria-hidden="true">7.3.</strong> Main Commands</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="command-ref/nix-env.html"><strong aria-hidden="true">7.3.1.</strong> nix-env</a></li><li class="chapter-item expanded "><a href="command-ref/nix-build.html"><strong aria-hidden="true">7.3.2.</strong> nix-build</a></li><li class="chapter-item expanded "><a href="command-ref/nix-shell.html"><strong aria-hidden="true">7.3.3.</strong> nix-shell</a></li><li class="chapter-item expanded "><a href="command-ref/nix-store.html"><strong aria-hidden="true">7.3.4.</strong> nix-store</a></li></ol></li><li class="chapter-item expanded "><a href="command-ref/utilities.html"><strong aria-hidden="true">7.4.</strong> Utilities</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="command-ref/nix-channel.html"><strong aria-hidden="true">7.4.1.</strong> nix-channel</a></li><li class="chapter-item expanded "><a href="command-ref/nix-collect-garbage.html"><strong aria-hidden="true">7.4.2.</strong> nix-collect-garbage</a></li><li class="chapter-item expanded "><a href="command-ref/nix-copy-closure.html"><strong aria-hidden="true">7.4.3.</strong> nix-copy-closure</a></li><li class="chapter-item expanded "><a href="command-ref/nix-daemon.html"><strong aria-hidden="true">7.4.4.</strong> nix-daemon</a></li><li class="chapter-item expanded "><a href="command-ref/nix-hash.html"><strong aria-hidden="true">7.4.5.</strong> nix-hash</a></li><li class="chapter-item expanded "><a href="command-ref/nix-instantiate.html"><strong aria-hidden="true">7.4.6.</strong> nix-instantiate</a></li><li class="chapter-item expanded "><a href="command-ref/nix-prefetch-url.html"><strong aria-hidden="true">7.4.7.</strong> nix-prefetch-url</a></li></ol></li><li class="chapter-item expanded "><a href="command-ref/experimental-commands.html"><strong aria-hidden="true">7.5.</strong> Experimental Commands</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="command-ref/new-cli/nix.html"><strong aria-hidden="true">7.5.1.</strong> nix</a></li><li class="chapter-item expanded "><a href="command-ref/new-cli/nix3-build.html"><strong aria-hidden="true">7.5.2.</strong> nix build</a></li><li class="chapter-item expanded "><a href="command-ref/new-cli/nix3-bundle.html"><strong aria-hidden="true">7.5.3.</strong> nix bundle</a></li><li class="chapter-item expanded "><a href="command-ref/new-cli/nix3-copy.html"><strong aria-hidden="true">7.5.4.</strong> nix copy</a></li><li class="chapter-item expanded "><a href="command-ref/new-cli/nix3-daemon.html"><strong aria-hidden="true">7.5.5.</strong> nix daemon</a></li><li class="chapter-item expanded "><a href="command-ref/new-cli/nix3-describe-stores.html"><strong aria-hidden="true">7.5.6.</strong> nix describe-stores</a></li><li class="chapter-item expanded "><a href="command-ref/new-cli/nix3-develop.html"><strong aria-hidden="true">7.5.7.</strong> nix develop</a></li><li class="chapter-item expanded "><a href="command-ref/new-cli/nix3-doctor.html"><strong aria-hidden="true">7.5.8.</strong> nix doctor</a></li><li class="chapter-item expanded "><a href="command-ref/new-cli/nix3-edit.html"><strong aria-hidden="true">7.5.9.</strong> nix edit</a></li><li class="chapter-item expanded "><a href="command-ref/new-cli/nix3-eval.html"><strong aria-hidden="true">7.5.10.</strong> nix eval</a></li><li class="chapter-item expanded "><a href="command-ref/new-cli/nix3-flake.html"><strong aria-hidden="true">7.5.11.</strong> nix flake</a></li><li class="chapter-item expanded "><a href="command-ref/new-cli/nix3-flake-archive.html"><strong aria-hidden="true">7.5.12.</strong> nix flake archive</a></li><li class="chapter-item expanded "><a href="command-ref/new-cli/nix3-flake-check.html"><strong aria-hidden="true">7.5.13.</strong> nix flake check</a></li><li class="chapter-item expanded "><a href="command-ref/new-cli/nix3-flake-clone.html"><strong aria-hidden="true">7.5.14.</strong> nix flake clone</a></li><li class="chapter-item expanded "><a href="command-ref/new-cli/nix3-flake-info.html"><strong aria-hidden="true">7.5.15.</strong> nix flake info</a></li><li class="chapter-item expanded "><a href="command-ref/new-cli/nix3-flake-init.html"><strong aria-hidden="true">7.5.16.</strong> nix flake init</a></li><li class="chapter-item expanded "><a href="command-ref/new-cli/nix3-flake-lock.html"><strong aria-hidden="true">7.5.17.</strong> nix flake lock</a></li><li class="chapter-item expanded "><a href="command-ref/new-cli/nix3-flake-metadata.html"><strong aria-hidden="true">7.5.18.</strong> nix flake metadata</a></li><li class="chapter-item expanded "><a href="command-ref/new-cli/nix3-flake-new.html"><strong aria-hidden="true">7.5.19.</strong> nix flake new</a></li><li class="chapter-item expanded "><a href="command-ref/new-cli/nix3-flake-prefetch.html"><strong aria-hidden="true">7.5.20.</strong> nix flake prefetch</a></li><li class="chapter-item expanded "><a href="command-ref/new-cli/nix3-flake-show.html"><strong aria-hidden="true">7.5.21.</strong> nix flake show</a></li><li class="chapter-item expanded "><a href="command-ref/new-cli/nix3-flake-update.html"><strong aria-hidden="true">7.5.22.</strong> nix flake update</a></li><li class="chapter-item expanded "><a href="command-ref/new-cli/nix3-fmt.html"><strong aria-hidden="true">7.5.23.</strong> nix fmt</a></li><li class="chapter-item expanded "><a href="command-ref/new-cli/nix3-hash.html"><strong aria-hidden="true">7.5.24.</strong> nix hash</a></li><li class="chapter-item expanded "><a href="command-ref/new-cli/nix3-hash-file.html"><strong aria-hidden="true">7.5.25.</strong> nix hash file</a></li><li class="chapter-item expanded "><a href="command-ref/new-cli/nix3-hash-path.html"><strong aria-hidden="true">7.5.26.</strong> nix hash path</a></li><li class="chapter-item expanded "><a href="command-ref/new-cli/nix3-hash-to-base16.html"><strong aria-hidden="true">7.5.27.</strong> nix hash to-base16</a></li><li class="chapter-item expanded "><a href="command-ref/new-cli/nix3-hash-to-base32.html"><strong aria-hidden="true">7.5.28.</strong> nix hash to-base32</a></li><li class="chapter-item expanded "><a href="command-ref/new-cli/nix3-hash-to-base64.html"><strong aria-hidden="true">7.5.29.</strong> nix hash to-base64</a></li><li class="chapter-item expanded "><a href="command-ref/new-cli/nix3-hash-to-sri.html"><strong aria-hidden="true">7.5.30.</strong> nix hash to-sri</a></li><li class="chapter-item expanded "><a href="command-ref/new-cli/nix3-help.html"><strong aria-hidden="true">7.5.31.</strong> nix help</a></li><li class="chapter-item expanded "><a href="command-ref/new-cli/nix3-key.html"><strong aria-hidden="true">7.5.32.</strong> nix key</a></li><li class="chapter-item expanded "><a href="command-ref/new-cli/nix3-key-convert-secret-to-public.html"><strong aria-hidden="true">7.5.33.</strong> nix key convert-secret-to-public</a></li><li class="chapter-item expanded "><a href="command-ref/new-cli/nix3-key-generate-secret.html"><strong aria-hidden="true">7.5.34.</strong> nix key generate-secret</a></li><li class="chapter-item expanded "><a href="command-ref/new-cli/nix3-log.html"><strong aria-hidden="true">7.5.35.</strong> nix log</a></li><li class="chapter-item expanded "><a href="command-ref/new-cli/nix3-nar.html"><strong aria-hidden="true">7.5.36.</strong> nix nar</a></li><li class="chapter-item expanded "><a href="command-ref/new-cli/nix3-nar-cat.html"><strong aria-hidden="true">7.5.37.</strong> nix nar cat</a></li><li class="chapter-item expanded "><a href="command-ref/new-cli/nix3-nar-dump-path.html"><strong aria-hidden="true">7.5.38.</strong> nix nar dump-path</a></li><li class="chapter-item expanded "><a href="command-ref/new-cli/nix3-nar-ls.html"><strong aria-hidden="true">7.5.39.</strong> nix nar ls</a></li><li class="chapter-item expanded "><a href="command-ref/new-cli/nix3-path-info.html"><strong aria-hidden="true">7.5.40.</strong> nix path-info</a></li><li class="chapter-item expanded "><a href="command-ref/new-cli/nix3-print-dev-env.html"><strong aria-hidden="true">7.5.41.</strong> nix print-dev-env</a></li><li class="chapter-item expanded "><a href="command-ref/new-cli/nix3-profile.html"><strong aria-hidden="true">7.5.42.</strong> nix profile</a></li><li class="chapter-item expanded "><a href="command-ref/new-cli/nix3-profile-diff-closures.html"><strong aria-hidden="true">7.5.43.</strong> nix profile diff-closures</a></li><li class="chapter-item expanded "><a href="command-ref/new-cli/nix3-profile-history.html"><strong aria-hidden="true">7.5.44.</strong> nix profile history</a></li><li class="chapter-item expanded "><a href="command-ref/new-cli/nix3-profile-install.html"><strong aria-hidden="true">7.5.45.</strong> nix profile install</a></li><li class="chapter-item expanded "><a href="command-ref/new-cli/nix3-profile-list.html"><strong aria-hidden="true">7.5.46.</strong> nix profile list</a></li><li class="chapter-item expanded "><a href="command-ref/new-cli/nix3-profile-remove.html"><strong aria-hidden="true">7.5.47.</strong> nix profile remove</a></li><li class="chapter-item expanded "><a href="command-ref/new-cli/nix3-profile-rollback.html"><strong aria-hidden="true">7.5.48.</strong> nix profile rollback</a></li><li class="chapter-item expanded "><a href="command-ref/new-cli/nix3-profile-upgrade.html"><strong aria-hidden="true">7.5.49.</strong> nix profile upgrade</a></li><li class="chapter-item expanded "><a href="command-ref/new-cli/nix3-profile-wipe-history.html"><strong aria-hidden="true">7.5.50.</strong> nix profile wipe-history</a></li><li class="chapter-item expanded "><a href="command-ref/new-cli/nix3-realisation.html"><strong aria-hidden="true">7.5.51.</strong> nix realisation</a></li><li class="chapter-item expanded "><a href="command-ref/new-cli/nix3-realisation-info.html"><strong aria-hidden="true">7.5.52.</strong> nix realisation info</a></li><li class="chapter-item expanded "><a href="command-ref/new-cli/nix3-registry.html"><strong aria-hidden="true">7.5.53.</strong> nix registry</a></li><li class="chapter-item expanded "><a href="command-ref/new-cli/nix3-registry-add.html"><strong aria-hidden="true">7.5.54.</strong> nix registry add</a></li><li class="chapter-item expanded "><a href="command-ref/new-cli/nix3-registry-list.html"><strong aria-hidden="true">7.5.55.</strong> nix registry list</a></li><li class="chapter-item expanded "><a href="command-ref/new-cli/nix3-registry-pin.html"><strong aria-hidden="true">7.5.56.</strong> nix registry pin</a></li><li class="chapter-item expanded "><a href="command-ref/new-cli/nix3-registry-remove.html"><strong aria-hidden="true">7.5.57.</strong> nix registry remove</a></li><li class="chapter-item expanded "><a href="command-ref/new-cli/nix3-repl.html"><strong aria-hidden="true">7.5.58.</strong> nix repl</a></li><li class="chapter-item expanded "><a href="command-ref/new-cli/nix3-run.html"><strong aria-hidden="true">7.5.59.</strong> nix run</a></li><li class="chapter-item expanded "><a href="command-ref/new-cli/nix3-search.html"><strong aria-hidden="true">7.5.60.</strong> nix search</a></li><li class="chapter-item expanded "><a href="command-ref/new-cli/nix3-shell.html"><strong aria-hidden="true">7.5.61.</strong> nix shell</a></li><li class="chapter-item expanded "><a href="command-ref/new-cli/nix3-show-config.html"><strong aria-hidden="true">7.5.62.</strong> nix show-config</a></li><li class="chapter-item expanded "><a href="command-ref/new-cli/nix3-show-derivation.html"><strong aria-hidden="true">7.5.63.</strong> nix show-derivation</a></li><li class="chapter-item expanded "><a href="command-ref/new-cli/nix3-store.html"><strong aria-hidden="true">7.5.64.</strong> nix store</a></li><li class="chapter-item expanded "><a href="command-ref/new-cli/nix3-store-add-file.html"><strong aria-hidden="true">7.5.65.</strong> nix store add-file</a></li><li class="chapter-item expanded "><a href="command-ref/new-cli/nix3-store-add-path.html"><strong aria-hidden="true">7.5.66.</strong> nix store add-path</a></li><li class="chapter-item expanded "><a href="command-ref/new-cli/nix3-store-cat.html"><strong aria-hidden="true">7.5.67.</strong> nix store cat</a></li><li class="chapter-item expanded "><a href="command-ref/new-cli/nix3-store-copy-log.html"><strong aria-hidden="true">7.5.68.</strong> nix store copy-log</a></li><li class="chapter-item expanded "><a href="command-ref/new-cli/nix3-store-copy-sigs.html"><strong aria-hidden="true">7.5.69.</strong> nix store copy-sigs</a></li><li class="chapter-item expanded "><a href="command-ref/new-cli/nix3-store-delete.html"><strong aria-hidden="true">7.5.70.</strong> nix store delete</a></li><li class="chapter-item expanded "><a href="command-ref/new-cli/nix3-store-diff-closures.html"><strong aria-hidden="true">7.5.71.</strong> nix store diff-closures</a></li><li class="chapter-item expanded "><a href="command-ref/new-cli/nix3-store-dump-path.html"><strong aria-hidden="true">7.5.72.</strong> nix store dump-path</a></li><li class="chapter-item expanded "><a href="command-ref/new-cli/nix3-store-gc.html"><strong aria-hidden="true">7.5.73.</strong> nix store gc</a></li><li class="chapter-item expanded "><a href="command-ref/new-cli/nix3-store-ls.html"><strong aria-hidden="true">7.5.74.</strong> nix store ls</a></li><li class="chapter-item expanded "><a href="command-ref/new-cli/nix3-store-make-content-addressed.html"><strong aria-hidden="true">7.5.75.</strong> nix store make-content-addressed</a></li><li class="chapter-item expanded "><a href="command-ref/new-cli/nix3-store-optimise.html"><strong aria-hidden="true">7.5.76.</strong> nix store optimise</a></li><li class="chapter-item expanded "><a href="command-ref/new-cli/nix3-store-path-from-hash-part.html"><strong aria-hidden="true">7.5.77.</strong> nix store path-from-hash-part</a></li><li class="chapter-item expanded "><a href="command-ref/new-cli/nix3-store-ping.html"><strong aria-hidden="true">7.5.78.</strong> nix store ping</a></li><li class="chapter-item expanded "><a href="command-ref/new-cli/nix3-store-prefetch-file.html"><strong aria-hidden="true">7.5.79.</strong> nix store prefetch-file</a></li><li class="chapter-item expanded "><a href="command-ref/new-cli/nix3-store-repair.html"><strong aria-hidden="true">7.5.80.</strong> nix store repair</a></li><li class="chapter-item expanded "><a href="command-ref/new-cli/nix3-store-sign.html"><strong aria-hidden="true">7.5.81.</strong> nix store sign</a></li><li class="chapter-item expanded "><a href="command-ref/new-cli/nix3-store-verify.html"><strong aria-hidden="true">7.5.82.</strong> nix store verify</a></li><li class="chapter-item expanded "><a href="command-ref/new-cli/nix3-upgrade-nix.html"><strong aria-hidden="true">7.5.83.</strong> nix upgrade-nix</a></li><li class="chapter-item expanded "><a href="command-ref/new-cli/nix3-why-depends.html"><strong aria-hidden="true">7.5.84.</strong> nix why-depends</a></li></ol></li><li class="chapter-item expanded "><a href="command-ref/files.html"><strong aria-hidden="true">7.6.</strong> Files</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="command-ref/conf-file.html"><strong aria-hidden="true">7.6.1.</strong> nix.conf</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="architecture/architecture.html"><strong aria-hidden="true">8.</strong> Architecture</a></li><li class="chapter-item expanded "><a href="glossary.html"><strong aria-hidden="true">9.</strong> Glossary</a></li><li class="chapter-item expanded "><a href="contributing/contributing.html"><strong aria-hidden="true">10.</strong> Contributing</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="contributing/hacking.html"><strong aria-hidden="true">10.1.</strong> Hacking</a></li><li class="chapter-item expanded "><a href="contributing/cli-guideline.html"><strong aria-hidden="true">10.2.</strong> CLI guideline</a></li></ol></li><li class="chapter-item expanded "><a href="release-notes/release-notes.html"><strong aria-hidden="true">11.</strong> Release Notes</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="release-notes/rl-2.13.html"><strong aria-hidden="true">11.1.</strong> Release 2.13 (2023-01-17)</a></li><li class="chapter-item expanded "><a href="release-notes/rl-2.12.html"><strong aria-hidden="true">11.2.</strong> Release 2.12 (2022-12-06)</a></li><li class="chapter-item expanded "><a href="release-notes/rl-2.11.html"><strong aria-hidden="true">11.3.</strong> Release 2.11 (2022-08-25)</a></li><li class="chapter-item expanded "><a href="release-notes/rl-2.10.html"><strong aria-hidden="true">11.4.</strong> Release 2.10 (2022-07-11)</a></li><li class="chapter-item expanded "><a href="release-notes/rl-2.9.html"><strong aria-hidden="true">11.5.</strong> Release 2.9 (2022-05-30)</a></li><li class="chapter-item expanded "><a href="release-notes/rl-2.8.html"><strong aria-hidden="true">11.6.</strong> Release 2.8 (2022-04-19)</a></li><li class="chapter-item expanded "><a href="release-notes/rl-2.7.html"><strong aria-hidden="true">11.7.</strong> Release 2.7 (2022-03-07)</a></li><li class="chapter-item expanded "><a href="release-notes/rl-2.6.html"><strong aria-hidden="true">11.8.</strong> Release 2.6 (2022-01-24)</a></li><li class="chapter-item expanded "><a href="release-notes/rl-2.5.html"><strong aria-hidden="true">11.9.</strong> Release 2.5 (2021-12-13)</a></li><li class="chapter-item expanded "><a href="release-notes/rl-2.4.html"><strong aria-hidden="true">11.10.</strong> Release 2.4 (2021-11-01)</a></li><li class="chapter-item expanded "><a href="release-notes/rl-2.3.html"><strong aria-hidden="true">11.11.</strong> Release 2.3 (2019-09-04)</a></li><li class="chapter-item expanded "><a href="release-notes/rl-2.2.html"><strong aria-hidden="true">11.12.</strong> Release 2.2 (2019-01-11)</a></li><li class="chapter-item expanded "><a href="release-notes/rl-2.1.html"><strong aria-hidden="true">11.13.</strong> Release 2.1 (2018-09-02)</a></li><li class="chapter-item expanded "><a href="release-notes/rl-2.0.html"><strong aria-hidden="true">11.14.</strong> Release 2.0 (2018-02-22)</a></li><li class="chapter-item expanded "><a href="release-notes/rl-1.11.10.html"><strong aria-hidden="true">11.15.</strong> Release 1.11.10 (2017-06-12)</a></li><li class="chapter-item expanded "><a href="release-notes/rl-1.11.html"><strong aria-hidden="true">11.16.</strong> Release 1.11 (2016-01-19)</a></li><li class="chapter-item expanded "><a href="release-notes/rl-1.10.html"><strong aria-hidden="true">11.17.</strong> Release 1.10 (2015-09-03)</a></li><li class="chapter-item expanded "><a href="release-notes/rl-1.9.html"><strong aria-hidden="true">11.18.</strong> Release 1.9 (2015-06-12)</a></li><li class="chapter-item expanded "><a href="release-notes/rl-1.8.html"><strong aria-hidden="true">11.19.</strong> Release 1.8 (2014-12-14)</a></li><li class="chapter-item expanded "><a href="release-notes/rl-1.7.html"><strong aria-hidden="true">11.20.</strong> Release 1.7 (2014-04-11)</a></li><li class="chapter-item expanded "><a href="release-notes/rl-1.6.1.html"><strong aria-hidden="true">11.21.</strong> Release 1.6.1 (2013-10-28)</a></li><li class="chapter-item expanded "><a href="release-notes/rl-1.6.html"><strong aria-hidden="true">11.22.</strong> Release 1.6 (2013-09-10)</a></li><li class="chapter-item expanded "><a href="release-notes/rl-1.5.2.html"><strong aria-hidden="true">11.23.</strong> Release 1.5.2 (2013-05-13)</a></li><li class="chapter-item expanded "><a href="release-notes/rl-1.5.html"><strong aria-hidden="true">11.24.</strong> Release 1.5 (2013-02-27)</a></li><li class="chapter-item expanded "><a href="release-notes/rl-1.4.html"><strong aria-hidden="true">11.25.</strong> Release 1.4 (2013-02-26)</a></li><li class="chapter-item expanded "><a href="release-notes/rl-1.3.html"><strong aria-hidden="true">11.26.</strong> Release 1.3 (2013-01-04)</a></li><li class="chapter-item expanded "><a href="release-notes/rl-1.2.html"><strong aria-hidden="true">11.27.</strong> Release 1.2 (2012-12-06)</a></li><li class="chapter-item expanded "><a href="release-notes/rl-1.1.html"><strong aria-hidden="true">11.28.</strong> Release 1.1 (2012-07-18)</a></li><li class="chapter-item expanded "><a href="release-notes/rl-1.0.html"><strong aria-hidden="true">11.29.</strong> Release 1.0 (2012-05-11)</a></li><li class="chapter-item expanded "><a href="release-notes/rl-0.16.html"><strong aria-hidden="true">11.30.</strong> Release 0.16 (2010-08-17)</a></li><li class="chapter-item expanded "><a href="release-notes/rl-0.15.html"><strong aria-hidden="true">11.31.</strong> Release 0.15 (2010-03-17)</a></li><li class="chapter-item expanded "><a href="release-notes/rl-0.14.html"><strong aria-hidden="true">11.32.</strong> Release 0.14 (2010-02-04)</a></li><li class="chapter-item expanded "><a href="release-notes/rl-0.13.html"><strong aria-hidden="true">11.33.</strong> Release 0.13 (2009-11-05)</a></li><li class="chapter-item expanded "><a href="release-notes/rl-0.12.html"><strong aria-hidden="true">11.34.</strong> Release 0.12 (2008-11-20)</a></li><li class="chapter-item expanded "><a href="release-notes/rl-0.11.html"><strong aria-hidden="true">11.35.</strong> Release 0.11 (2007-12-31)</a></li><li class="chapter-item expanded "><a href="release-notes/rl-0.10.1.html"><strong aria-hidden="true">11.36.</strong> Release 0.10.1 (2006-10-11)</a></li><li class="chapter-item expanded "><a href="release-notes/rl-0.10.html"><strong aria-hidden="true">11.37.</strong> Release 0.10 (2006-10-06)</a></li><li class="chapter-item expanded "><a href="release-notes/rl-0.9.2.html"><strong aria-hidden="true">11.38.</strong> Release 0.9.2 (2005-09-21)</a></li><li class="chapter-item expanded "><a href="release-notes/rl-0.9.1.html"><strong aria-hidden="true">11.39.</strong> Release 0.9.1 (2005-09-20)</a></li><li class="chapter-item expanded "><a href="release-notes/rl-0.9.html"><strong aria-hidden="true">11.40.</strong> Release 0.9 (2005-09-16)</a></li><li class="chapter-item expanded "><a href="release-notes/rl-0.8.1.html"><strong aria-hidden="true">11.41.</strong> Release 0.8.1 (2005-04-13)</a></li><li class="chapter-item expanded "><a href="release-notes/rl-0.8.html"><strong aria-hidden="true">11.42.</strong> Release 0.8 (2005-04-11)</a></li><li class="chapter-item expanded "><a href="release-notes/rl-0.7.html"><strong aria-hidden="true">11.43.</strong> Release 0.7 (2005-01-12)</a></li><li class="chapter-item expanded "><a href="release-notes/rl-0.6.html"><strong aria-hidden="true">11.44.</strong> Release 0.6 (2004-11-14)</a></li><li class="chapter-item expanded "><a href="release-notes/rl-0.5.html"><strong aria-hidden="true">11.45.</strong> Release 0.5 and earlier</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Nix Reference Manual</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/NixOS/nix" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="introduction"><a class="header" href="#introduction">Introduction</a></h1>
<p>Nix is a <em>purely functional package manager</em>.  This means that it
treats packages like values in purely functional programming languages
such as Haskell — they are built by functions that don’t have
side-effects, and they never change after they have been built.  Nix
stores packages in the <em>Nix store</em>, usually the directory
<code>/nix/store</code>, where each package has its own unique subdirectory such
as</p>
<pre><code>/nix/store/b6gvzjyb2pg0kjfwrjmg1vfhh54ad73z-firefox-33.1/
</code></pre>
<p>where <code>b6gvzjyb2pg0…</code> is a unique identifier for the package that
captures all its dependencies (it’s a cryptographic hash of the
package’s build dependency graph).  This enables many powerful
features.</p>
<h2 id="multiple-versions"><a class="header" href="#multiple-versions">Multiple versions</a></h2>
<p>You can have multiple versions or variants of a package
installed at the same time.  This is especially important when
different applications have dependencies on different versions of the
same package — it prevents the “DLL hell”.  Because of the hashing
scheme, different versions of a package end up in different paths in
the Nix store, so they don’t interfere with each other.</p>
<p>An important consequence is that operations like upgrading or
uninstalling an application cannot break other applications, since
these operations never “destructively” update or delete files that are
used by other packages.</p>
<h2 id="complete-dependencies"><a class="header" href="#complete-dependencies">Complete dependencies</a></h2>
<p>Nix helps you make sure that package dependency specifications are
complete.  In general, when you’re making a package for a package
management system like RPM, you have to specify for each package what
its dependencies are, but there are no guarantees that this
specification is complete.  If you forget a dependency, then the
package will build and work correctly on <em>your</em> machine if you have
the dependency installed, but not on the end user's machine if it's
not there.</p>
<p>Since Nix on the other hand doesn’t install packages in “global”
locations like <code>/usr/bin</code> but in package-specific directories, the
risk of incomplete dependencies is greatly reduced.  This is because
tools such as compilers don’t search in per-packages directories such
as <code>/nix/store/5lbfaxb722zp…-openssl-0.9.8d/include</code>, so if a package
builds correctly on your system, this is because you specified the
dependency explicitly. This takes care of the build-time dependencies.</p>
<p>Once a package is built, runtime dependencies are found by scanning
binaries for the hash parts of Nix store paths (such as <code>r8vvq9kq…</code>).
This sounds risky, but it works extremely well.</p>
<h2 id="multi-user-support"><a class="header" href="#multi-user-support">Multi-user support</a></h2>
<p>Nix has multi-user support.  This means that non-privileged users can
securely install software.  Each user can have a different <em>profile</em>,
a set of packages in the Nix store that appear in the user’s <code>PATH</code>.
If a user installs a package that another user has already installed
previously, the package won’t be built or downloaded a second time.
At the same time, it is not possible for one user to inject a Trojan
horse into a package that might be used by another user.</p>
<h2 id="atomic-upgrades-and-rollbacks"><a class="header" href="#atomic-upgrades-and-rollbacks">Atomic upgrades and rollbacks</a></h2>
<p>Since package management operations never overwrite packages in the
Nix store but just add new versions in different paths, they are
<em>atomic</em>.  So during a package upgrade, there is no time window in
which the package has some files from the old version and some files
from the new version — which would be bad because a program might well
crash if it’s started during that period.</p>
<p>And since packages aren’t overwritten, the old versions are still
there after an upgrade.  This means that you can <em>roll back</em> to the
old version:</p>
<pre><code class="language-console">$ nix-env --upgrade -A nixpkgs.some-package
$ nix-env --rollback
</code></pre>
<h2 id="garbage-collection"><a class="header" href="#garbage-collection">Garbage collection</a></h2>
<p>When you uninstall a package like this…</p>
<pre><code class="language-console">$ nix-env --uninstall firefox
</code></pre>
<p>the package isn’t deleted from the system right away (after all, you
might want to do a rollback, or it might be in the profiles of other
users).  Instead, unused packages can be deleted safely by running the
<em>garbage collector</em>:</p>
<pre><code class="language-console">$ nix-collect-garbage
</code></pre>
<p>This deletes all packages that aren’t in use by any user profile or by
a currently running program.</p>
<h2 id="functional-package-language"><a class="header" href="#functional-package-language">Functional package language</a></h2>
<p>Packages are built from <em>Nix expressions</em>, which is a simple
functional language.  A Nix expression describes everything that goes
into a package build task (a “derivation”): other packages, sources,
the build script, environment variables for the build script, etc.
Nix tries very hard to ensure that Nix expressions are
<em>deterministic</em>: building a Nix expression twice should yield the same
result.</p>
<p>Because it’s a functional language, it’s easy to support
building variants of a package: turn the Nix expression into a
function and call it any number of times with the appropriate
arguments.  Due to the hashing scheme, variants don’t conflict with
each other in the Nix store.</p>
<h2 id="transparent-sourcebinary-deployment"><a class="header" href="#transparent-sourcebinary-deployment">Transparent source/binary deployment</a></h2>
<p>Nix expressions generally describe how to build a package from
source, so an installation action like</p>
<pre><code class="language-console">$ nix-env --install -A nixpkgs.firefox
</code></pre>
<p><em>could</em> cause quite a bit of build activity, as not only Firefox but
also all its dependencies (all the way up to the C library and the
compiler) would have to be built, at least if they are not already in the
Nix store.  This is a <em>source deployment model</em>.  For most users,
building from source is not very pleasant as it takes far too long.
However, Nix can automatically skip building from source and instead
use a <em>binary cache</em>, a web server that provides pre-built
binaries. For instance, when asked to build
<code>/nix/store/b6gvzjyb2pg0…-firefox-33.1</code> from source, Nix would first
check if the file <code>https://cache.nixos.org/b6gvzjyb2pg0….narinfo</code>
exists, and if so, fetch the pre-built binary referenced from there;
otherwise, it would fall back to building from source.</p>
<h2 id="nix-packages-collection"><a class="header" href="#nix-packages-collection">Nix Packages collection</a></h2>
<p>We provide a large set of Nix expressions containing hundreds of
existing Unix packages, the <em>Nix Packages collection</em> (Nixpkgs).</p>
<h2 id="managing-build-environments"><a class="header" href="#managing-build-environments">Managing build environments</a></h2>
<p>Nix is extremely useful for developers as it makes it easy to
automatically set up the build environment for a package. Given a Nix
expression that describes the dependencies of your package, the
command <code>nix-shell</code> will build or download those dependencies if
they’re not already in your Nix store, and then start a Bash shell in
which all necessary environment variables (such as compiler search
paths) are set.</p>
<p>For example, the following command gets all dependencies of the
Pan newsreader, as described by <a href="https://github.com/NixOS/nixpkgs/blob/master/pkgs/applications/networking/newsreaders/pan/default.nix">its
Nix expression</a>:</p>
<pre><code class="language-console">$ nix-shell '&lt;nixpkgs&gt;' -A pan
</code></pre>
<p>You’re then dropped into a shell where you can edit, build and test
the package:</p>
<pre><code class="language-console">[nix-shell]$ unpackPhase
[nix-shell]$ cd pan-*
[nix-shell]$ configurePhase
[nix-shell]$ buildPhase
[nix-shell]$ ./pan/gui/pan
</code></pre>
<h2 id="portability"><a class="header" href="#portability">Portability</a></h2>
<p>Nix runs on Linux and macOS.</p>
<h2 id="nixos"><a class="header" href="#nixos">NixOS</a></h2>
<p>NixOS is a Linux distribution based on Nix.  It uses Nix not just for
package management but also to manage the system configuration (e.g.,
to build configuration files in <code>/etc</code>).  This means, among other
things, that it is easy to roll back the entire configuration of the
system to an earlier state.  Also, users can install software without
root privileges.  For more information and downloads, see the <a href="https://nixos.org/">NixOS
homepage</a>.</p>
<h2 id="license"><a class="header" href="#license">License</a></h2>
<p>Nix is released under the terms of the <a href="http://www.gnu.org/licenses/old-licenses/lgpl-2.1.html">GNU LGPLv2.1 or (at your
option) any later
version</a>.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="quick-start"><a class="header" href="#quick-start">Quick Start</a></h1>
<p>This chapter is for impatient people who don't like reading
documentation.  For more in-depth information you are kindly referred
to subsequent chapters.</p>
<ol>
<li>
<p>Install single-user Nix by running the following:</p>
<pre><code class="language-console">$ bash &lt;(curl -L https://nixos.org/nix/install)
</code></pre>
<p>This will install Nix in <code>/nix</code>. The install script will create
<code>/nix</code> using <code>sudo</code>, so make sure you have sufficient rights.  (For
other installation methods, see
<a href="installation/installation.html">here</a>.)</p>
</li>
<li>
<p>See what installable packages are currently available in the
channel:</p>
<pre><code class="language-console">$ nix-env -qaP
nixpkgs.docbook_xml_dtd_43                    docbook-xml-4.3
nixpkgs.docbook_xml_dtd_45                    docbook-xml-4.5
nixpkgs.firefox                               firefox-33.0.2
nixpkgs.hello                                 hello-2.9
nixpkgs.libxslt                               libxslt-1.1.28
…
</code></pre>
</li>
<li>
<p>Install some packages from the channel:</p>
<pre><code class="language-console">$ nix-env -iA nixpkgs.hello
</code></pre>
<p>This should download pre-built packages; it should not build them
locally (if it does, something went wrong).</p>
</li>
<li>
<p>Test that they work:</p>
<pre><code class="language-console">$ which hello
/home/eelco/.nix-profile/bin/hello
$ hello
Hello, world!
</code></pre>
</li>
<li>
<p>Uninstall a package:</p>
<pre><code class="language-console">$ nix-env -e hello
</code></pre>
</li>
<li>
<p>You can also test a package without installing it:</p>
<pre><code class="language-console">$ nix-shell -p hello
</code></pre>
<p>This builds or downloads GNU Hello and its dependencies, then drops
you into a Bash shell where the <code>hello</code> command is present, all
without affecting your normal environment:</p>
<pre><code class="language-console">[nix-shell:~]$ hello
Hello, world!

[nix-shell:~]$ exit

$ hello
hello: command not found
</code></pre>
</li>
<li>
<p>To keep up-to-date with the channel, do:</p>
<pre><code class="language-console">$ nix-channel --update nixpkgs
$ nix-env -u '*'
</code></pre>
<p>The latter command will upgrade each installed package for which
there is a “newer” version (as determined by comparing the version
numbers).</p>
</li>
<li>
<p>If you're unhappy with the result of a <code>nix-env</code> action (e.g., an
upgraded package turned out not to work properly), you can go back:</p>
<pre><code class="language-console">$ nix-env --rollback
</code></pre>
</li>
<li>
<p>You should periodically run the Nix garbage collector to get rid of
unused packages, since uninstalls or upgrades don't actually delete
them:</p>
<pre><code class="language-console">$ nix-collect-garbage -d
</code></pre>
</li>
</ol>
<div style="break-before: page; page-break-before: always;"></div><p>This section describes how to install and configure Nix for first-time
use.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="supported-platforms"><a class="header" href="#supported-platforms">Supported Platforms</a></h1>
<p>Nix is currently supported on the following platforms:</p>
<ul>
<li>
<p>Linux (i686, x86_64, aarch64).</p>
</li>
<li>
<p>macOS (x86_64, aarch64).</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="installing-a-binary-distribution"><a class="header" href="#installing-a-binary-distribution">Installing a Binary Distribution</a></h1>
<p>The easiest way to install Nix is to run the following command:</p>
<pre><code class="language-console">$ sh &lt;(curl -L https://nixos.org/nix/install)
</code></pre>
<p>This will run the installer interactively (causing it to explain what
it is doing more explicitly), and perform the default &quot;type&quot; of install
for your platform:</p>
<ul>
<li>
<p>single-user on Linux</p>
</li>
<li>
<p>multi-user on macOS</p>
<blockquote>
<p><strong>Notes on read-only filesystem root in macOS 10.15 Catalina +</strong></p>
<ul>
<li>It took some time to support this cleanly. You may see posts,
examples, and tutorials using obsolete workarounds.</li>
<li>Supporting it cleanly made macOS installs too complex to qualify
as single-user, so this type is no longer supported on macOS.</li>
</ul>
</blockquote>
</li>
</ul>
<p>We recommend the multi-user install if it supports your platform and
you can authenticate with <code>sudo</code>.</p>
<h1 id="single-user-installation"><a class="header" href="#single-user-installation">Single User Installation</a></h1>
<p>To explicitly select a single-user installation on your system:</p>
<pre><code class="language-console">$ sh &lt;(curl -L https://nixos.org/nix/install) --no-daemon
</code></pre>
<p>This will perform a single-user installation of Nix, meaning that <code>/nix</code>
is owned by the invoking user. You can run this under your usual user
account or root. The script will invoke <code>sudo</code> to create <code>/nix</code>
if it doesn’t already exist. If you don’t have <code>sudo</code>, you should
manually create <code>/nix</code> first as root, e.g.:</p>
<pre><code class="language-console">$ mkdir /nix
$ chown alice /nix
</code></pre>
<p>The install script will modify the first writable file from amongst
<code>.bash_profile</code>, <code>.bash_login</code> and <code>.profile</code> to source
<code>~/.nix-profile/etc/profile.d/nix.sh</code>. You can set the
<code>NIX_INSTALLER_NO_MODIFY_PROFILE</code> environment variable before executing
the install script to disable this behaviour.</p>
<p>You can uninstall Nix simply by running:</p>
<pre><code class="language-console">$ rm -rf /nix
</code></pre>
<h1 id="multi-user-installation"><a class="header" href="#multi-user-installation">Multi User Installation</a></h1>
<p>The multi-user Nix installation creates system users, and a system
service for the Nix daemon.</p>
<p><strong>Supported Systems</strong></p>
<ul>
<li>Linux running systemd, with SELinux disabled</li>
<li>macOS</li>
</ul>
<p>You can instruct the installer to perform a multi-user installation on
your system:</p>
<pre><code class="language-console">$ sh &lt;(curl -L https://nixos.org/nix/install) --daemon
</code></pre>
<p>The multi-user installation of Nix will create build users between the
user IDs 30001 and 30032, and a group with the group ID 30000. You
can run this under your usual user account or root. The script
will invoke <code>sudo</code> as needed.</p>
<blockquote>
<p><strong>Note</strong></p>
<p>If you need Nix to use a different group ID or user ID set, you will
have to download the tarball manually and <a href="installation/installing-binary.html#installing-from-a-binary-tarball">edit the install
script</a>.</p>
</blockquote>
<p>The installer will modify <code>/etc/bashrc</code>, and <code>/etc/zshrc</code> if they exist.
The installer will first back up these files with a <code>.backup-before-nix</code>
extension. The installer will also create <code>/etc/profile.d/nix.sh</code>.</p>
<h2 id="uninstalling"><a class="header" href="#uninstalling">Uninstalling</a></h2>
<h3 id="linux"><a class="header" href="#linux">Linux</a></h3>
<p>If you are on Linux with systemd:</p>
<ol>
<li>
<p>Remove the Nix daemon service:</p>
<pre><code class="language-console">sudo systemctl stop nix-daemon.service
sudo systemctl disable nix-daemon.socket nix-daemon.service
sudo systemctl daemon-reload
</code></pre>
</li>
<li>
<p>Remove systemd service files:</p>
<pre><code class="language-console">sudo rm /etc/systemd/system/nix-daemon.service /etc/systemd/system/nix-daemon.socket
</code></pre>
</li>
<li>
<p>The installer script uses systemd-tmpfiles to create the socket directory.
You may also want to remove the configuration for that:</p>
<pre><code class="language-console">sudo rm /etc/tmpfiles.d/nix-daemon.conf
</code></pre>
</li>
</ol>
<p>Remove files created by Nix:</p>
<pre><code class="language-console">sudo rm -rf /nix /etc/nix /etc/profile/nix.sh ~root/.nix-profile ~root/.nix-defexpr ~root/.nix-channels ~/.nix-profile ~/.nix-defexpr ~/.nix-channels
</code></pre>
<p>Remove build users and their group:</p>
<pre><code class="language-console">for i in $(seq 1 32); do
  sudo userdel nixbld$i
done
sudo groupdel nixbld
</code></pre>
<p>There may also be references to Nix in</p>
<ul>
<li><code>/etc/profile</code></li>
<li><code>/etc/bashrc</code></li>
<li><code>/etc/zshrc</code></li>
</ul>
<p>which you may remove.</p>
<h3 id="macos"><a class="header" href="#macos">macOS</a></h3>
<ol>
<li>
<p>Edit <code>/etc/zshrc</code> and <code>/etc/bashrc</code> to remove the lines sourcing
<code>nix-daemon.sh</code>, which should look like this:</p>
<pre><code class="language-bash"># Nix
if [ -e '/nix/var/nix/profiles/default/etc/profile.d/nix-daemon.sh' ]; then
  . '/nix/var/nix/profiles/default/etc/profile.d/nix-daemon.sh'
fi
# End Nix
</code></pre>
<p>If these files haven't been altered since installing Nix you can simply put
the backups back in place:</p>
<pre><code class="language-console">sudo mv /etc/zshrc.backup-before-nix /etc/zshrc
sudo mv /etc/bashrc.backup-before-nix /etc/bashrc
</code></pre>
<p>This will stop shells from sourcing the file and bringing everything you
installed using Nix in scope.</p>
</li>
<li>
<p>Stop and remove the Nix daemon services:</p>
<pre><code class="language-console">sudo launchctl unload /Library/LaunchDaemons/org.nixos.nix-daemon.plist
sudo rm /Library/LaunchDaemons/org.nixos.nix-daemon.plist
sudo launchctl unload /Library/LaunchDaemons/org.nixos.darwin-store.plist
sudo rm /Library/LaunchDaemons/org.nixos.darwin-store.plist
</code></pre>
<p>This stops the Nix daemon and prevents it from being started next time you
boot the system.</p>
</li>
<li>
<p>Remove the <code>nixbld</code> group and the <code>_nixbuildN</code> users:</p>
<pre><code class="language-console">sudo dscl . -delete /Groups/nixbld
for u in $(sudo dscl . -list /Users | grep _nixbld); do sudo dscl . -delete /Users/$u; done
</code></pre>
<p>This will remove all the build users that no longer serve a purpose.</p>
</li>
<li>
<p>Edit fstab using <code>sudo vifs</code> to remove the line mounting the Nix Store
volume on <code>/nix</code>, which looks like
<code>UUID=&lt;uuid&gt; /nix apfs rw,noauto,nobrowse,suid,owners</code> or
<code>LABEL=Nix\040Store /nix apfs rw,nobrowse</code>. This will prevent automatic
mounting of the Nix Store volume.</p>
</li>
<li>
<p>Edit <code>/etc/synthetic.conf</code> to remove the <code>nix</code> line. If this is the only
line in the file you can remove it entirely, <code>sudo rm /etc/synthetic.conf</code>.
This will prevent the creation of the empty <code>/nix</code> directory to provide a
mountpoint for the Nix Store volume.</p>
</li>
<li>
<p>Remove the files Nix added to your system:</p>
<pre><code class="language-console">sudo rm -rf /etc/nix /var/root/.nix-profile /var/root/.nix-defexpr /var/root/.nix-channels ~/.nix-profile ~/.nix-defexpr ~/.nix-channels
</code></pre>
<p>This gets rid of any data Nix may have created except for the store which is
removed next.</p>
</li>
<li>
<p>Remove the Nix Store volume:</p>
<pre><code class="language-console">sudo diskutil apfs deleteVolume /nix
</code></pre>
<p>This will remove the Nix Store volume and everything that was added to the
store.</p>
<p>If the output indicates that the command couldn't remove the volume, you should
make sure you don't have an <em>unmounted</em> Nix Store volume. Look for a
&quot;Nix Store&quot; volume in the output of the following command:</p>
<pre><code class="language-console">diskutil list
</code></pre>
<p>If you <em>do</em> see a &quot;Nix Store&quot; volume, delete it by re-running the diskutil
deleteVolume command, but replace <code>/nix</code> with the store volume's <code>diskXsY</code>
identifier.</p>
</li>
</ol>
<blockquote>
<p><strong>Note</strong></p>
<p>After you complete the steps here, you will still have an empty <code>/nix</code>
directory. This is an expected sign of a successful uninstall. The empty
<code>/nix</code> directory will disappear the next time you reboot.</p>
<p>You do not have to reboot to finish uninstalling Nix. The uninstall is
complete. macOS (Catalina+) directly controls root directories and its
read-only root will prevent you from manually deleting the empty <code>/nix</code>
mountpoint.</p>
</blockquote>
<h1 id="macos-installation"><a class="header" href="#macos-installation">macOS Installation</a></h1>
<p><a name="sect-macos-installation-change-store-prefix"></a><a name="sect-macos-installation-encrypted-volume"></a><a name="sect-macos-installation-symlink"></a><a name="sect-macos-installation-recommended-notes"></a></p>
<!-- Note: anchors above to catch permalinks to old explanations -->
<p>We believe we have ironed out how to cleanly support the read-only root
on modern macOS. New installs will do this automatically.</p>
<p>This section previously detailed the situation, options, and trade-offs,
but it now only outlines what the installer does. You don't need to know
this to run the installer, but it may help if you run into trouble:</p>
<ul>
<li>create a new APFS volume for your Nix store</li>
<li>update <code>/etc/synthetic.conf</code> to direct macOS to create a &quot;synthetic&quot;
empty root directory to mount your volume</li>
<li>specify mount options for the volume in <code>/etc/fstab</code>
<ul>
<li><code>rw</code>: read-write</li>
<li><code>noauto</code>: prevent the system from auto-mounting the volume (so the
LaunchDaemon mentioned below can control mounting it, and to avoid
masking problems with that mounting service).</li>
<li><code>nobrowse</code>: prevent the Nix Store volume from showing up on your
desktop; also keeps Spotlight from spending resources to index
this volume</li>
</ul>
<!-- TODO:
- `suid`: honor setuid? surely not? ...
- `owners`: honor file ownership on the volume

  For now I'll avoid pretending to understand suid/owners more
  than I do. There've been some vague reports of file-ownership
  and permission issues, particularly in cloud/VM/headless setups.
  My pet theory is that this has something to do with these setups
  not having a token that gets delegated to initial/admin accounts
  on macOS. See scripts/create-darwin-volume.sh for a little more.

  In any case, by Dec 4 2021, it _seems_ like some combination of
  suid, owners, and calling diskutil enableOwnership have stopped
  new reports from coming in. But I hesitate to celebrate because we
  haven't really named and catalogued the behavior, understood what
  we're fixing, and validated that all 3 components are essential.
-->
</li>
<li>if you have FileVault enabled
<ul>
<li>generate an encryption password</li>
<li>put it in your system Keychain</li>
<li>use it to encrypt the volume</li>
</ul>
</li>
<li>create a system LaunchDaemon to mount this volume early enough in the
boot process to avoid problems loading or restoring any programs that
need access to your Nix store</li>
</ul>
<h1 id="installing-a-pinned-nix-version-from-a-url"><a class="header" href="#installing-a-pinned-nix-version-from-a-url">Installing a pinned Nix version from a URL</a></h1>
<p>NixOS.org hosts version-specific installation URLs for all Nix versions
since 1.11.16, at <code>https://releases.nixos.org/nix/nix-version/install</code>.</p>
<p>These install scripts can be used the same as the main NixOS.org
installation script:</p>
<pre><code class="language-console">$ sh &lt;(curl -L https://nixos.org/nix/install)
</code></pre>
<p>In the same directory of the install script are sha256 sums, and gpg
signature files.</p>
<h1 id="installing-from-a-binary-tarball"><a class="header" href="#installing-from-a-binary-tarball">Installing from a binary tarball</a></h1>
<p>You can also download a binary tarball that contains Nix and all its
dependencies. (This is what the install script at
<a href="https://nixos.org/nix/install">https://nixos.org/nix/install</a> does automatically.) You should unpack
it somewhere (e.g. in <code>/tmp</code>), and then run the script named <code>install</code>
inside the binary tarball:</p>
<pre><code class="language-console">$ cd /tmp
$ tar xfj nix-1.8-x86_64-darwin.tar.bz2
$ cd nix-1.8-x86_64-darwin
$ ./install
</code></pre>
<p>If you need to edit the multi-user installation script to use different
group ID or a different user ID range, modify the variables set in the
file named <code>install-multi-user</code>.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="installing-nix-from-source"><a class="header" href="#installing-nix-from-source">Installing Nix from Source</a></h1>
<p>If no binary package is available or if you want to hack on Nix, you
can build Nix from its Git repository.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="prerequisites"><a class="header" href="#prerequisites">Prerequisites</a></h1>
<ul>
<li>
<p>GNU Autoconf (<a href="https://www.gnu.org/software/autoconf/">https://www.gnu.org/software/autoconf/</a>) and the
autoconf-archive macro collection
(<a href="https://www.gnu.org/software/autoconf-archive/">https://www.gnu.org/software/autoconf-archive/</a>). These are
needed to run the bootstrap script.</p>
</li>
<li>
<p>GNU Make.</p>
</li>
<li>
<p>Bash Shell. The <code>./configure</code> script relies on bashisms, so Bash is
required.</p>
</li>
<li>
<p>A version of GCC or Clang that supports C++17.</p>
</li>
<li>
<p><code>pkg-config</code> to locate dependencies. If your distribution does not
provide it, you can get it from
<a href="http://www.freedesktop.org/wiki/Software/pkg-config">http://www.freedesktop.org/wiki/Software/pkg-config</a>.</p>
</li>
<li>
<p>The OpenSSL library to calculate cryptographic hashes. If your
distribution does not provide it, you can get it from
<a href="https://www.openssl.org">https://www.openssl.org</a>.</p>
</li>
<li>
<p>The <code>libbrotlienc</code> and <code>libbrotlidec</code> libraries to provide
implementation of the Brotli compression algorithm. They are
available for download from the official repository
<a href="https://github.com/google/brotli">https://github.com/google/brotli</a>.</p>
</li>
<li>
<p>cURL and its library. If your distribution does not provide it, you
can get it from <a href="https://curl.haxx.se/">https://curl.haxx.se/</a>.</p>
</li>
<li>
<p>The SQLite embedded database library, version 3.6.19 or higher. If
your distribution does not provide it, please install it from
<a href="http://www.sqlite.org/">http://www.sqlite.org/</a>.</p>
</li>
<li>
<p>The <a href="http://www.hboehm.info/gc/">Boehm garbage collector</a> to reduce
the evaluator’s memory consumption (optional). To enable it, install
<code>pkgconfig</code> and the Boehm garbage collector, and pass the flag
<code>--enable-gc</code> to <code>configure</code>.</p>
</li>
<li>
<p>The <code>boost</code> library of version 1.66.0 or higher. It can be obtained
from the official web site <a href="https://www.boost.org/">https://www.boost.org/</a>.</p>
</li>
<li>
<p>The <code>editline</code> library of version 1.14.0 or higher. It can be
obtained from the its repository
<a href="https://github.com/troglobit/editline">https://github.com/troglobit/editline</a>.</p>
</li>
<li>
<p>The <code>libsodium</code> library for verifying cryptographic signatures
of contents fetched from binary caches.
It can be obtained from the official web site
<a href="https://libsodium.org">https://libsodium.org</a>.</p>
</li>
<li>
<p>Recent versions of Bison and Flex to build the parser. (This is
because Nix needs GLR support in Bison and reentrancy support in
Flex.) For Bison, you need version 2.6, which can be obtained from
the <a href="ftp://alpha.gnu.org/pub/gnu/bison">GNU FTP server</a>. For Flex,
you need version 2.5.35, which is available on
<a href="http://lex.sourceforge.net/">SourceForge</a>. Slightly older versions
may also work, but ancient versions like the ubiquitous 2.5.4a
won't.</p>
</li>
<li>
<p>The <code>libseccomp</code> is used to provide syscall filtering on Linux. This
is an optional dependency and can be disabled passing a
<code>--disable-seccomp-sandboxing</code> option to the <code>configure</code> script (Not
recommended unless your system doesn't support <code>libseccomp</code>). To get
the library, visit <a href="https://github.com/seccomp/libseccomp">https://github.com/seccomp/libseccomp</a>.</p>
</li>
<li>
<p>On 64-bit x86 machines only, <code>libcpuid</code> library
is used to determine which microarchitecture levels are supported
(e.g., as whether to have <code>x86_64-v2-linux</code> among additional system types).
The library is available from its homepage
<a href="http://libcpuid.sourceforge.net">http://libcpuid.sourceforge.net</a>.
This is an optional dependency and can be disabled
by providing a <code>--disable-cpuid</code> to the <code>configure</code> script.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="obtaining-the-source"><a class="header" href="#obtaining-the-source">Obtaining the Source</a></h1>
<p>The most recent sources of Nix can be obtained from its <a href="https://github.com/NixOS/nix">Git
repository</a>. For example, the following
command will check out the latest revision into a directory called
<code>nix</code>:</p>
<pre><code class="language-console">$ git clone https://github.com/NixOS/nix
</code></pre>
<p>Likewise, specific releases can be obtained from the
<a href="https://github.com/NixOS/nix/tags">tags</a> of the repository.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="building-nix-from-source"><a class="header" href="#building-nix-from-source">Building Nix from Source</a></h1>
<p>After cloning Nix's Git repository, issue the following commands:</p>
<pre><code class="language-console">$ ./bootstrap.sh
$ ./configure options...
$ make
$ make install
</code></pre>
<p>Nix requires GNU Make so you may need to invoke <code>gmake</code> instead.</p>
<p>The installation path can be specified by passing the <code>--prefix=prefix</code>
to <code>configure</code>. The default installation directory is <code>/usr/local</code>. You
can change this to any location you like. You must have write permission
to the <em>prefix</em> path.</p>
<p>Nix keeps its <em>store</em> (the place where packages are stored) in
<code>/nix/store</code> by default. This can be changed using
<code>--with-store-dir=path</code>.</p>
<blockquote>
<p><strong>Warning</strong></p>
<p>It is best <em>not</em> to change the Nix store from its default, since doing
so makes it impossible to use pre-built binaries from the standard
Nixpkgs channels — that is, all packages will need to be built from
source.</p>
</blockquote>
<p>Nix keeps state (such as its database and log files) in <code>/nix/var</code> by
default. This can be changed using <code>--localstatedir=path</code>.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="using-nix-within-docker"><a class="header" href="#using-nix-within-docker">Using Nix within Docker</a></h1>
<p>To run the latest stable release of Nix with Docker run the following command:</p>
<pre><code class="language-console">$ docker run -ti nixos/nix
Unable to find image 'nixos/nix:latest' locally
latest: Pulling from nixos/nix
5843afab3874: Pull complete
b52bf13f109c: Pull complete
1e2415612aa3: Pull complete
Digest: sha256:27f6e7f60227e959ee7ece361f75d4844a40e1cc6878b6868fe30140420031ff
Status: Downloaded newer image for nixos/nix:latest
35ca4ada6e96:/# nix --version
nix (Nix) 2.3.12
35ca4ada6e96:/# exit
</code></pre>
<h1 id="what-is-included-in-nixs-docker-image"><a class="header" href="#what-is-included-in-nixs-docker-image">What is included in Nix's Docker image?</a></h1>
<p>The official Docker image is created using <code>pkgs.dockerTools.buildLayeredImage</code>
(and not with <code>Dockerfile</code> as it is usual with Docker images). You can still
base your custom Docker image on it as you would do with any other Docker
image.</p>
<p>The Docker image is also not based on any other image and includes minimal set
of runtime dependencies that are required to use Nix:</p>
<ul>
<li>pkgs.nix</li>
<li>pkgs.bashInteractive</li>
<li>pkgs.coreutils-full</li>
<li>pkgs.gnutar</li>
<li>pkgs.gzip</li>
<li>pkgs.gnugrep</li>
<li>pkgs.which</li>
<li>pkgs.curl</li>
<li>pkgs.less</li>
<li>pkgs.wget</li>
<li>pkgs.man</li>
<li>pkgs.cacert.out</li>
<li>pkgs.findutils</li>
</ul>
<h1 id="docker-image-with-the-latest-development-version-of-nix"><a class="header" href="#docker-image-with-the-latest-development-version-of-nix">Docker image with the latest development version of Nix</a></h1>
<p>To get the latest image that was built by <a href="https://hydra.nixos.org">Hydra</a> run
the following command:</p>
<pre><code class="language-console">$ curl -L https://hydra.nixos.org/job/nix/master/dockerImage.x86_64-linux/latest/download/1 | docker load
$ docker run -ti nix:2.5pre20211105
</code></pre>
<p>You can also build a Docker image from source yourself:</p>
<pre><code class="language-console">$ nix build ./\#hydraJobs.dockerImage.x86_64-linux
$ docker load -i ./result/image.tar.gz
$ docker run -ti nix:2.5pre20211105
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="security"><a class="header" href="#security">Security</a></h1>
<p>Nix has two basic security models. First, it can be used in “single-user
mode”, which is similar to what most other package management tools do:
there is a single user (typically root) who performs all package
management operations. All other users can then use the installed
packages, but they cannot perform package management operations
themselves.</p>
<p>Alternatively, you can configure Nix in “multi-user mode”. In this
model, all users can perform package management operations — for
instance, every user can install software without requiring root
privileges. Nix ensures that this is secure. For instance, it’s not
possible for one user to overwrite a package used by another user with a
Trojan horse.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="single-user-mode"><a class="header" href="#single-user-mode">Single-User Mode</a></h1>
<p>In single-user mode, all Nix operations that access the database in
<code>prefix/var/nix/db</code> or modify the Nix store in <code>prefix/store</code> must be
performed under the user ID that owns those directories. This is
typically root. (If you install from RPM packages, that’s in fact the
default ownership.) However, on single-user machines, it is often
convenient to <code>chown</code> those directories to your normal user account so
that you don’t have to <code>su</code> to root all the time.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="multi-user-mode"><a class="header" href="#multi-user-mode">Multi-User Mode</a></h1>
<p>To allow a Nix store to be shared safely among multiple users, it is
important that users are not able to run builders that modify the Nix
store or database in arbitrary ways, or that interfere with builds
started by other users. If they could do so, they could install a Trojan
horse in some package and compromise the accounts of other users.</p>
<p>To prevent this, the Nix store and database are owned by some privileged
user (usually <code>root</code>) and builders are executed under special user
accounts (usually named <code>nixbld1</code>, <code>nixbld2</code>, etc.). When a unprivileged
user runs a Nix command, actions that operate on the Nix store (such as
builds) are forwarded to a <em>Nix daemon</em> running under the owner of the
Nix store/database that performs the operation.</p>
<blockquote>
<p><strong>Note</strong></p>
<p>Multi-user mode has one important limitation: only root and a set of
trusted users specified in <code>nix.conf</code> can specify arbitrary binary
caches. So while unprivileged users may install packages from
arbitrary Nix expressions, they may not get pre-built binaries.</p>
</blockquote>
<h2 id="setting-up-the-build-users"><a class="header" href="#setting-up-the-build-users">Setting up the build users</a></h2>
<p>The <em>build users</em> are the special UIDs under which builds are performed.
They should all be members of the <em>build users group</em> <code>nixbld</code>. This
group should have no other members. The build users should not be
members of any other group. On Linux, you can create the group and users
as follows:</p>
<pre><code class="language-console">$ groupadd -r nixbld
$ for n in $(seq 1 10); do useradd -c &quot;Nix build user $n&quot; \
    -d /var/empty -g nixbld -G nixbld -M -N -r -s &quot;$(which nologin)&quot; \
    nixbld$n; done
</code></pre>
<p>This creates 10 build users. There can never be more concurrent builds
than the number of build users, so you may want to increase this if you
expect to do many builds at the same time.</p>
<h2 id="running-the-daemon"><a class="header" href="#running-the-daemon">Running the daemon</a></h2>
<p>The <a href="installation/../command-ref/nix-daemon.html">Nix daemon</a> should be started as
follows (as <code>root</code>):</p>
<pre><code class="language-console">$ nix-daemon
</code></pre>
<p>You’ll want to put that line somewhere in your system’s boot scripts.</p>
<p>To let unprivileged users use the daemon, they should set the
<a href="installation/../command-ref/env-common.html"><code>NIX_REMOTE</code> environment variable</a> to
<code>daemon</code>. So you should put a line like</p>
<pre><code class="language-console">export NIX_REMOTE=daemon
</code></pre>
<p>into the users’ login scripts.</p>
<h2 id="restricting-access"><a class="header" href="#restricting-access">Restricting access</a></h2>
<p>To limit which users can perform Nix operations, you can use the
permissions on the directory <code>/nix/var/nix/daemon-socket</code>. For instance,
if you want to restrict the use of Nix to the members of a group called
<code>nix-users</code>, do</p>
<pre><code class="language-console">$ chgrp nix-users /nix/var/nix/daemon-socket
$ chmod ug=rwx,o= /nix/var/nix/daemon-socket
</code></pre>
<p>This way, users who are not in the <code>nix-users</code> group cannot connect to
the Unix domain socket <code>/nix/var/nix/daemon-socket/socket</code>, so they
cannot perform Nix operations.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="environment-variables"><a class="header" href="#environment-variables">Environment Variables</a></h1>
<p>To use Nix, some environment variables should be set. In particular,
<code>PATH</code> should contain the directories <code>prefix/bin</code> and
<code>~/.nix-profile/bin</code>. The first directory contains the Nix tools
themselves, while <code>~/.nix-profile</code> is a symbolic link to the current
<em>user environment</em> (an automatically generated package consisting of
symlinks to installed packages). The simplest way to set the required
environment variables is to include the file
<code>prefix/etc/profile.d/nix.sh</code> in your <code>~/.profile</code> (or similar), like
this:</p>
<pre><code class="language-bash">source prefix/etc/profile.d/nix.sh
</code></pre>
<h1 id="nix_ssl_cert_file"><a class="header" href="#nix_ssl_cert_file"><code>NIX_SSL_CERT_FILE</code></a></h1>
<p>If you need to specify a custom certificate bundle to account for an
HTTPS-intercepting man in the middle proxy, you must specify the path to
the certificate bundle in the environment variable <code>NIX_SSL_CERT_FILE</code>.</p>
<p>If you don't specify a <code>NIX_SSL_CERT_FILE</code> manually, Nix will install
and use its own certificate bundle.</p>
<p>Set the environment variable and install Nix</p>
<pre><code class="language-console">$ export NIX_SSL_CERT_FILE=/etc/ssl/my-certificate-bundle.crt
$ sh &lt;(curl -L https://nixos.org/nix/install)
</code></pre>
<p>In the shell profile and rc files (for example, <code>/etc/bashrc</code>,
<code>/etc/zshrc</code>), add the following line:</p>
<pre><code class="language-bash">export NIX_SSL_CERT_FILE=/etc/ssl/my-certificate-bundle.crt
</code></pre>
<blockquote>
<p><strong>Note</strong></p>
<p>You must not add the export and then do the install, as the Nix
installer will detect the presence of Nix configuration, and abort.</p>
</blockquote>
<h2 id="nix_ssl_cert_file-with-macos-and-the-nix-daemon"><a class="header" href="#nix_ssl_cert_file-with-macos-and-the-nix-daemon"><code>NIX_SSL_CERT_FILE</code> with macOS and the Nix daemon</a></h2>
<p>On macOS you must specify the environment variable for the Nix daemon
service, then restart it:</p>
<pre><code class="language-console">$ sudo launchctl setenv NIX_SSL_CERT_FILE /etc/ssl/my-certificate-bundle.crt
$ sudo launchctl kickstart -k system/org.nixos.nix-daemon
</code></pre>
<h2 id="proxy-environment-variables"><a class="header" href="#proxy-environment-variables">Proxy Environment Variables</a></h2>
<p>The Nix installer has special handling for these proxy-related
environment variables: <code>http_proxy</code>, <code>https_proxy</code>, <code>ftp_proxy</code>,
<code>no_proxy</code>, <code>HTTP_PROXY</code>, <code>HTTPS_PROXY</code>, <code>FTP_PROXY</code>, <code>NO_PROXY</code>.</p>
<p>If any of these variables are set when running the Nix installer, then
the installer will create an override file at
<code>/etc/systemd/system/nix-daemon.service.d/override.conf</code> so <code>nix-daemon</code>
will use them.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="upgrading-nix"><a class="header" href="#upgrading-nix">Upgrading Nix</a></h1>
<p>Multi-user Nix users on macOS can upgrade Nix by running: <code>sudo -i sh -c 'nix-channel --update &amp;&amp; nix-env -iA nixpkgs.nix &amp;&amp; launchctl remove org.nixos.nix-daemon &amp;&amp; launchctl load /Library/LaunchDaemons/org.nixos.nix-daemon.plist'</code></p>
<p>Single-user installations of Nix should run this: <code>nix-channel --update; nix-env -iA nixpkgs.nix nixpkgs.cacert</code></p>
<p>Multi-user Nix users on Linux should run this with sudo: <code>nix-channel --update; nix-env -iA nixpkgs.nix nixpkgs.cacert; systemctl daemon-reload; systemctl restart nix-daemon</code></p>
<div style="break-before: page; page-break-before: always;"></div><p>This chapter discusses how to do package management with Nix, i.e.,
how to obtain, install, upgrade, and erase packages. This is the
“user’s” perspective of the Nix system — people who want to <em>create</em>
packages should consult the chapter on the <a href="package-management/../language/index.html">Nix language</a>.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="basic-package-management"><a class="header" href="#basic-package-management">Basic Package Management</a></h1>
<p>The main command for package management is
<a href="package-management/../command-ref/nix-env.html"><code>nix-env</code></a>.  You can use it to install,
upgrade, and erase packages, and to query what packages are installed
or are available for installation.</p>
<p>In Nix, different users can have different “views” on the set of
installed applications. That is, there might be lots of applications
present on the system (possibly in many different versions), but users
can have a specific selection of those active — where “active” just
means that it appears in a directory in the user’s <code>PATH</code>. Such a view
on the set of installed applications is called a <em>user environment</em>,
which is just a directory tree consisting of symlinks to the files of
the active applications.</p>
<p>Components are installed from a set of <em>Nix expressions</em> that tell Nix
how to build those packages, including, if necessary, their
dependencies. There is a collection of Nix expressions called the
Nixpkgs package collection that contains packages ranging from basic
development stuff such as GCC and Glibc, to end-user applications like
Mozilla Firefox. (Nix is however not tied to the Nixpkgs package
collection; you could write your own Nix expressions based on Nixpkgs,
or completely new ones.)</p>
<p>You can manually download the latest version of Nixpkgs from
<a href="https://github.com/NixOS/nixpkgs">https://github.com/NixOS/nixpkgs</a>. However, it’s much more
convenient to use the Nixpkgs <a href="package-management/channels.html"><em>channel</em></a>, since it makes
it easy to stay up to date with new versions of Nixpkgs. Nixpkgs is
automatically added to your list of “subscribed” channels when you
install Nix. If this is not the case for some reason, you can add it
as follows:</p>
<pre><code class="language-console">$ nix-channel --add https://nixos.org/channels/nixpkgs-unstable
$ nix-channel --update
</code></pre>
<blockquote>
<p><strong>Note</strong></p>
<p>On NixOS, you’re automatically subscribed to a NixOS channel
corresponding to your NixOS major release (e.g.
<a href="http://nixos.org/channels/nixos-21.11">http://nixos.org/channels/nixos-21.11</a>). A NixOS channel is identical
to the Nixpkgs channel, except that it contains only Linux binaries
and is updated only if a set of regression tests succeed.</p>
</blockquote>
<p>You can view the set of available packages in Nixpkgs:</p>
<pre><code class="language-console">$ nix-env -qaP
nixpkgs.aterm                       aterm-2.2
nixpkgs.bash                        bash-3.0
nixpkgs.binutils                    binutils-2.15
nixpkgs.bison                       bison-1.875d
nixpkgs.blackdown                   blackdown-1.4.2
nixpkgs.bzip2                       bzip2-1.0.2
…
</code></pre>
<p>The flag <code>-q</code> specifies a query operation, <code>-a</code> means that you want
to show the “available” (i.e., installable) packages, as opposed to the
installed packages, and <code>-P</code> prints the attribute paths that can be used
to unambiguously select a package for installation (listed in the first column).
If you downloaded Nixpkgs yourself, or if you checked it out from GitHub,
then you need to pass the path to your Nixpkgs tree using the <code>-f</code> flag:</p>
<pre><code class="language-console">$ nix-env -qaPf /path/to/nixpkgs
aterm                               aterm-2.2
bash                                bash-3.0
…
</code></pre>
<p>where <em>/path/to/nixpkgs</em> is where you’ve unpacked or checked out
Nixpkgs.</p>
<p>You can filter the packages by name:</p>
<pre><code class="language-console">$ nix-env -qaP firefox
nixpkgs.firefox-esr                 firefox-91.3.0esr
nixpkgs.firefox                     firefox-94.0.1
</code></pre>
<p>and using regular expressions:</p>
<pre><code class="language-console">$ nix-env -qaP 'firefox.*'
</code></pre>
<p>It is also possible to see the <em>status</em> of available packages, i.e.,
whether they are installed into the user environment and/or present in
the system:</p>
<pre><code class="language-console">$ nix-env -qaPs
…
-PS  nixpkgs.bash                bash-3.0
--S  nixpkgs.binutils            binutils-2.15
IPS  nixpkgs.bison               bison-1.875d
…
</code></pre>
<p>The first character (<code>I</code>) indicates whether the package is installed in
your current user environment. The second (<code>P</code>) indicates whether it is
present on your system (in which case installing it into your user
environment would be a very quick operation). The last one (<code>S</code>)
indicates whether there is a so-called <em>substitute</em> for the package,
which is Nix’s mechanism for doing binary deployment. It just means that
Nix knows that it can fetch a pre-built package from somewhere
(typically a network server) instead of building it locally.</p>
<p>You can install a package using <code>nix-env -iA</code>. For instance,</p>
<pre><code class="language-console">$ nix-env -iA nixpkgs.subversion
</code></pre>
<p>will install the package called <code>subversion</code> from <code>nixpkgs</code> channel (which is, of course, the
<a href="http://subversion.tigris.org/">Subversion version management system</a>).</p>
<blockquote>
<p><strong>Note</strong></p>
<p>When you ask Nix to install a package, it will first try to get it in
pre-compiled form from a <em>binary cache</em>. By default, Nix will use the
binary cache <a href="https://cache.nixos.org">https://cache.nixos.org</a>; it contains binaries for most
packages in Nixpkgs. Only if no binary is available in the binary
cache, Nix will build the package from source. So if <code>nix-env -iA nixpkgs.subversion</code> results in Nix building stuff from source, then either
the package is not built for your platform by the Nixpkgs build
servers, or your version of Nixpkgs is too old or too new. For
instance, if you have a very recent checkout of Nixpkgs, then the
Nixpkgs build servers may not have had a chance to build everything
and upload the resulting binaries to <a href="https://cache.nixos.org">https://cache.nixos.org</a>. The
Nixpkgs channel is only updated after all binaries have been uploaded
to the cache, so if you stick to the Nixpkgs channel (rather than
using a Git checkout of the Nixpkgs tree), you will get binaries for
most packages.</p>
</blockquote>
<p>Naturally, packages can also be uninstalled. Unlike when installing, you will
need to use the derivation name (though the version part can be omitted),
instead of the attribute path, as <code>nix-env</code> does not record which attribute
was used for installing:</p>
<pre><code class="language-console">$ nix-env -e subversion
</code></pre>
<p>Upgrading to a new version is just as easy. If you have a new release of
Nix Packages, you can do:</p>
<pre><code class="language-console">$ nix-env -uA nixpkgs.subversion
</code></pre>
<p>This will <em>only</em> upgrade Subversion if there is a “newer” version in the
new set of Nix expressions, as defined by some pretty arbitrary rules
regarding ordering of version numbers (which generally do what you’d
expect of them). To just unconditionally replace Subversion with
whatever version is in the Nix expressions, use <code>-i</code> instead of <code>-u</code>;
<code>-i</code> will remove whatever version is already installed.</p>
<p>You can also upgrade all packages for which there are newer versions:</p>
<pre><code class="language-console">$ nix-env -u
</code></pre>
<p>Sometimes it’s useful to be able to ask what <code>nix-env</code> would do, without
actually doing it. For instance, to find out what packages would be
upgraded by <code>nix-env -u</code>, you can do</p>
<pre><code class="language-console">$ nix-env -u --dry-run
(dry run; not doing anything)
upgrading `libxslt-1.1.0' to `libxslt-1.1.10'
upgrading `graphviz-1.10' to `graphviz-1.12'
upgrading `coreutils-5.0' to `coreutils-5.2.1'
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="profiles"><a class="header" href="#profiles">Profiles</a></h1>
<p>Profiles and user environments are Nix’s mechanism for implementing the
ability to allow different users to have different configurations, and
to do atomic upgrades and rollbacks. To understand how they work, it’s
useful to know a bit about how Nix works. In Nix, packages are stored in
unique locations in the <em>Nix store</em> (typically, <code>/nix/store</code>). For
instance, a particular version of the Subversion package might be stored
in a directory
<code>/nix/store/dpmvp969yhdqs7lm2r1a3gng7pyq6vy4-subversion-1.1.3/</code>, while
another version might be stored in
<code>/nix/store/5mq2jcn36ldlmh93yj1n8s9c95pj7c5s-subversion-1.1.2</code>. The long
strings prefixed to the directory names are cryptographic hashes (to be
precise, 160-bit truncations of SHA-256 hashes encoded in a base-32
notation) of <em>all</em> inputs involved in building the package — sources,
dependencies, compiler flags, and so on. So if two packages differ in
any way, they end up in different locations in the file system, so they
don’t interfere with each other. Here is what a part of a typical Nix
store looks like:</p>
<p><img src="package-management/../figures/user-environments.png" alt="" /></p>
<p>Of course, you wouldn’t want to type</p>
<pre><code class="language-console">$ /nix/store/dpmvp969yhdq...-subversion-1.1.3/bin/svn
</code></pre>
<p>every time you want to run Subversion. Of course we could set up the
<code>PATH</code> environment variable to include the <code>bin</code> directory of every
package we want to use, but this is not very convenient since changing
<code>PATH</code> doesn’t take effect for already existing processes. The solution
Nix uses is to create directory trees of symlinks to <em>activated</em>
packages. These are called <em>user environments</em> and they are packages
themselves (though automatically generated by <code>nix-env</code>), so they too
reside in the Nix store. For instance, in the figure above, the user
environment <code>/nix/store/0c1p5z4kda11...-user-env</code> contains a symlink to
just Subversion 1.1.2 (arrows in the figure indicate symlinks). This
would be what we would obtain if we had done</p>
<pre><code class="language-console">$ nix-env -iA nixpkgs.subversion
</code></pre>
<p>on a set of Nix expressions that contained Subversion 1.1.2.</p>
<p>This doesn’t in itself solve the problem, of course; you wouldn’t want
to type <code>/nix/store/0c1p5z4kda11...-user-env/bin/svn</code> either. That’s why
there are symlinks outside of the store that point to the user
environments in the store; for instance, the symlinks <code>default-42-link</code>
and <code>default-43-link</code> in the example. These are called <em>generations</em>
since every time you perform a <code>nix-env</code> operation, a new user
environment is generated based on the current one. For instance,
generation 43 was created from generation 42 when we did</p>
<pre><code class="language-console">$ nix-env -iA nixpkgs.subversion nixpkgs.firefox
</code></pre>
<p>on a set of Nix expressions that contained Firefox and a new version of
Subversion.</p>
<p>Generations are grouped together into <em>profiles</em> so that different users
don’t interfere with each other if they don’t want to. For example:</p>
<pre><code class="language-console">$ ls -l /nix/var/nix/profiles/
...
lrwxrwxrwx  1 eelco ... default-42-link -&gt; /nix/store/0c1p5z4kda11...-user-env
lrwxrwxrwx  1 eelco ... default-43-link -&gt; /nix/store/3aw2pdyx2jfc...-user-env
lrwxrwxrwx  1 eelco ... default -&gt; default-43-link
</code></pre>
<p>This shows a profile called <code>default</code>. The file <code>default</code> itself is
actually a symlink that points to the current generation. When we do a
<code>nix-env</code> operation, a new user environment and generation link are
created based on the current one, and finally the <code>default</code> symlink is
made to point at the new generation. This last step is atomic on Unix,
which explains how we can do atomic upgrades. (Note that the
building/installing of new packages doesn’t interfere in any way with
old packages, since they are stored in different locations in the Nix
store.)</p>
<p>If you find that you want to undo a <code>nix-env</code> operation, you can just do</p>
<pre><code class="language-console">$ nix-env --rollback
</code></pre>
<p>which will just make the current generation link point at the previous
link. E.g., <code>default</code> would be made to point at <code>default-42-link</code>. You
can also switch to a specific generation:</p>
<pre><code class="language-console">$ nix-env --switch-generation 43
</code></pre>
<p>which in this example would roll forward to generation 43 again. You can
also see all available generations:</p>
<pre><code class="language-console">$ nix-env --list-generations
</code></pre>
<p>You generally wouldn’t have <code>/nix/var/nix/profiles/some-profile/bin</code> in
your <code>PATH</code>. Rather, there is a symlink <code>~/.nix-profile</code> that points to
your current profile. This means that you should put
<code>~/.nix-profile/bin</code> in your <code>PATH</code> (and indeed, that’s what the
initialisation script <code>/nix/etc/profile.d/nix.sh</code> does). This makes it
easier to switch to a different profile. You can do that using the
command <code>nix-env --switch-profile</code>:</p>
<pre><code class="language-console">$ nix-env --switch-profile /nix/var/nix/profiles/my-profile

$ nix-env --switch-profile /nix/var/nix/profiles/default
</code></pre>
<p>These commands switch to the <code>my-profile</code> and default profile,
respectively. If the profile doesn’t exist, it will be created
automatically. You should be careful about storing a profile in another
location than the <code>profiles</code> directory, since otherwise it might not be
used as a root of the <a href="package-management/garbage-collection.html">garbage collector</a>.</p>
<p>All <code>nix-env</code> operations work on the profile pointed to by
<code>~/.nix-profile</code>, but you can override this using the <code>--profile</code> option
(abbreviation <code>-p</code>):</p>
<pre><code class="language-console">$ nix-env -p /nix/var/nix/profiles/other-profile -iA nixpkgs.subversion
</code></pre>
<p>This will <em>not</em> change the <code>~/.nix-profile</code> symlink.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="garbage-collection-1"><a class="header" href="#garbage-collection-1">Garbage Collection</a></h1>
<p><code>nix-env</code> operations such as upgrades (<code>-u</code>) and uninstall (<code>-e</code>) never
actually delete packages from the system. All they do (as shown above)
is to create a new user environment that no longer contains symlinks to
the “deleted” packages.</p>
<p>Of course, since disk space is not infinite, unused packages should be
removed at some point. You can do this by running the Nix garbage
collector. It will remove from the Nix store any package not used
(directly or indirectly) by any generation of any profile.</p>
<p>Note however that as long as old generations reference a package, it
will not be deleted. After all, we wouldn’t be able to do a rollback
otherwise. So in order for garbage collection to be effective, you
should also delete (some) old generations. Of course, this should only
be done if you are certain that you will not need to roll back.</p>
<p>To delete all old (non-current) generations of your current profile:</p>
<pre><code class="language-console">$ nix-env --delete-generations old
</code></pre>
<p>Instead of <code>old</code> you can also specify a list of generations, e.g.,</p>
<pre><code class="language-console">$ nix-env --delete-generations 10 11 14
</code></pre>
<p>To delete all generations older than a specified number of days (except
the current generation), use the <code>d</code> suffix. For example,</p>
<pre><code class="language-console">$ nix-env --delete-generations 14d
</code></pre>
<p>deletes all generations older than two weeks.</p>
<p>After removing appropriate old generations you can run the garbage
collector as follows:</p>
<pre><code class="language-console">$ nix-store --gc
</code></pre>
<p>The behaviour of the garbage collector is affected by the
<code>keep-derivations</code> (default: true) and <code>keep-outputs</code> (default: false)
options in the Nix configuration file. The defaults will ensure that all
derivations that are build-time dependencies of garbage collector roots
will be kept and that all output paths that are runtime dependencies
will be kept as well. All other derivations or paths will be collected.
(This is usually what you want, but while you are developing it may make
sense to keep outputs to ensure that rebuild times are quick.) If you
are feeling uncertain, you can also first view what files would be
deleted:</p>
<pre><code class="language-console">$ nix-store --gc --print-dead
</code></pre>
<p>Likewise, the option <code>--print-live</code> will show the paths that <em>won’t</em> be
deleted.</p>
<p>There is also a convenient little utility <code>nix-collect-garbage</code>, which
when invoked with the <code>-d</code> (<code>--delete-old</code>) switch deletes all old
generations of all profiles in <code>/nix/var/nix/profiles</code>. So</p>
<pre><code class="language-console">$ nix-collect-garbage -d
</code></pre>
<p>is a quick and easy way to clean up your system.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="garbage-collector-roots"><a class="header" href="#garbage-collector-roots">Garbage Collector Roots</a></h1>
<p>The roots of the garbage collector are all store paths to which there
are symlinks in the directory <code>prefix/nix/var/nix/gcroots</code>. For
instance, the following command makes the path
<code>/nix/store/d718ef...-foo</code> a root of the collector:</p>
<pre><code class="language-console">$ ln -s /nix/store/d718ef...-foo /nix/var/nix/gcroots/bar
</code></pre>
<p>That is, after this command, the garbage collector will not remove
<code>/nix/store/d718ef...-foo</code> or any of its dependencies.</p>
<p>Subdirectories of <code>prefix/nix/var/nix/gcroots</code> are also searched for
symlinks. Symlinks to non-store paths are followed and searched for
roots, but symlinks to non-store paths <em>inside</em> the paths reached in
that way are not followed to prevent infinite recursion.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="channels"><a class="header" href="#channels">Channels</a></h1>
<p>If you want to stay up to date with a set of packages, it’s not very
convenient to manually download the latest set of Nix expressions for
those packages and upgrade using <code>nix-env</code>. Fortunately, there’s a
better way: <em>Nix channels</em>.</p>
<p>A Nix channel is just a URL that points to a place that contains a set
of Nix expressions and a manifest. Using the command
<a href="package-management/../command-ref/nix-channel.html"><code>nix-channel</code></a> you can automatically
stay up to date with whatever is available at that URL.</p>
<p>To see the list of official NixOS channels, visit
<a href="https://nixos.org/channels">https://nixos.org/channels</a>.</p>
<p>You can “subscribe” to a channel using <code>nix-channel --add</code>, e.g.,</p>
<pre><code class="language-console">$ nix-channel --add https://nixos.org/channels/nixpkgs-unstable
</code></pre>
<p>subscribes you to a channel that always contains that latest version of
the Nix Packages collection. (Subscribing really just means that the URL
is added to the file <code>~/.nix-channels</code>, where it is read by subsequent
calls to <code>nix-channel --update</code>.) You can “unsubscribe” using <code>nix-channel --remove</code>:</p>
<pre><code class="language-console">$ nix-channel --remove nixpkgs
</code></pre>
<p>To obtain the latest Nix expressions available in a channel, do</p>
<pre><code class="language-console">$ nix-channel --update
</code></pre>
<p>This downloads and unpacks the Nix expressions in every channel
(downloaded from <code>url/nixexprs.tar.bz2</code>). It also makes the union of
each channel’s Nix expressions available by default to <code>nix-env</code>
operations (via the symlink <code>~/.nix-defexpr/channels</code>). Consequently,
you can then say</p>
<pre><code class="language-console">$ nix-env -u
</code></pre>
<p>to upgrade all packages in your profile to the latest versions available
in the subscribed channels.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="sharing-packages-between-machines"><a class="header" href="#sharing-packages-between-machines">Sharing Packages Between Machines</a></h1>
<p>Sometimes you want to copy a package from one machine to another. Or,
you want to install some packages and you know that another machine
already has some or all of those packages or their dependencies. In that
case there are mechanisms to quickly copy packages between machines.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="serving-a-nix-store-via-http"><a class="header" href="#serving-a-nix-store-via-http">Serving a Nix store via HTTP</a></h1>
<p>You can easily share the Nix store of a machine via HTTP. This allows
other machines to fetch store paths from that machine to speed up
installations. It uses the same <em>binary cache</em> mechanism that Nix
usually uses to fetch pre-built binaries from <a href="https://cache.nixos.org">https://cache.nixos.org</a>.</p>
<p>The daemon that handles binary cache requests via HTTP, <code>nix-serve</code>, is
not part of the Nix distribution, but you can install it from Nixpkgs:</p>
<pre><code class="language-console">$ nix-env -iA nixpkgs.nix-serve
</code></pre>
<p>You can then start the server, listening for HTTP connections on
whatever port you like:</p>
<pre><code class="language-console">$ nix-serve -p 8080
</code></pre>
<p>To check whether it works, try the following on the client:</p>
<pre><code class="language-console">$ curl http://avalon:8080/nix-cache-info
</code></pre>
<p>which should print something like:</p>
<pre><code>StoreDir: /nix/store
WantMassQuery: 1
Priority: 30
</code></pre>
<p>On the client side, you can tell Nix to use your binary cache using
<code>--option extra-binary-caches</code>, e.g.:</p>
<pre><code class="language-console">$ nix-env -iA nixpkgs.firefox --option extra-binary-caches http://avalon:8080/
</code></pre>
<p>The option <code>extra-binary-caches</code> tells Nix to use this binary cache in
addition to your default caches, such as <a href="https://cache.nixos.org">https://cache.nixos.org</a>.
Thus, for any path in the closure of Firefox, Nix will first check if
the path is available on the server <code>avalon</code> or another binary caches.
If not, it will fall back to building from source.</p>
<p>You can also tell Nix to always use your binary cache by adding a line
to the <code>nix.conf</code> configuration file like this:</p>
<pre><code>binary-caches = http://avalon:8080/ https://cache.nixos.org/
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="copying-closures-via-ssh"><a class="header" href="#copying-closures-via-ssh">Copying Closures via SSH</a></h1>
<p>The command <code>nix-copy-closure</code> copies a Nix store path along with all
its dependencies to or from another machine via the SSH protocol. It
doesn’t copy store paths that are already present on the target machine.
For example, the following command copies Firefox with all its
dependencies:</p>
<pre><code>$ nix-copy-closure --to alice@itchy.example.org $(type -p firefox)
</code></pre>
<p>See the <a href="package-management/../command-ref/nix-copy-closure.html">manpage for <code>nix-copy-closure</code></a> for details.</p>
<p>With <code>nix-store --export</code> and <code>nix-store --import</code> you can write the closure of a store
path (that is, the path and all its dependencies) to a file, and then
unpack that file into another Nix store. For example,</p>
<pre><code>$ nix-store --export $(nix-store -qR $(type -p firefox)) &gt; firefox.closure
</code></pre>
<p>writes the closure of Firefox to a file. You can then copy this file to
another machine and install the closure:</p>
<pre><code>$ nix-store --import &lt; firefox.closure
</code></pre>
<p>Any store paths in the closure that are already present in the target
store are ignored. It is also possible to pipe the export into another
command, e.g. to copy and install a closure directly to/on another
machine:</p>
<pre><code>$ nix-store --export $(nix-store -qR $(type -p firefox)) | bzip2 | \
    ssh alice@itchy.example.org &quot;bunzip2 | nix-store --import&quot;
</code></pre>
<p>However, <code>nix-copy-closure</code> is generally more efficient because it only
copies paths that are not already present in the target Nix store.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="serving-a-nix-store-via-ssh"><a class="header" href="#serving-a-nix-store-via-ssh">Serving a Nix store via SSH</a></h1>
<p>You can tell Nix to automatically fetch needed binaries from a remote
Nix store via SSH. For example, the following installs Firefox,
automatically fetching any store paths in Firefox’s closure if they are
available on the server <code>avalon</code>:</p>
<pre><code class="language-console">$ nix-env -iA nixpkgs.firefox --substituters ssh://alice@avalon
</code></pre>
<p>This works similar to the binary cache substituter that Nix usually
uses, only using SSH instead of HTTP: if a store path <code>P</code> is needed, Nix
will first check if it’s available in the Nix store on <code>avalon</code>. If not,
it will fall back to using the binary cache substituter, and then to
building from source.</p>
<blockquote>
<p><strong>Note</strong></p>
<p>The SSH substituter currently does not allow you to enter an SSH
passphrase interactively. Therefore, you should use <code>ssh-add</code> to load
the decrypted private key into <code>ssh-agent</code>.</p>
</blockquote>
<p>You can also copy the closure of some store path, without installing it
into your profile, e.g.</p>
<pre><code class="language-console">$ nix-store -r /nix/store/m85bxg…-firefox-34.0.5 --substituters
ssh://alice@avalon
</code></pre>
<p>This is essentially equivalent to doing</p>
<pre><code class="language-console">$ nix-copy-closure --from alice@avalon
/nix/store/m85bxg…-firefox-34.0.5
</code></pre>
<p>You can use SSH’s <em>forced command</em> feature to set up a restricted user
account for SSH substituter access, allowing read-only access to the
local Nix store, but nothing more. For example, add the following lines
to <code>sshd_config</code> to restrict the user <code>nix-ssh</code>:</p>
<pre><code>Match User nix-ssh
  AllowAgentForwarding no
  AllowTcpForwarding no
  PermitTTY no
  PermitTunnel no
  X11Forwarding no
  ForceCommand nix-store --serve
Match All
</code></pre>
<p>On NixOS, you can accomplish the same by adding the following to your
<code>configuration.nix</code>:</p>
<pre><code class="language-nix">nix.sshServe.enable = true;
nix.sshServe.keys = [ &quot;ssh-dss AAAAB3NzaC1k... bob@example.org&quot; ];
</code></pre>
<p>where the latter line lists the public keys of users that are allowed to
connect.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="serving-a-nix-store-via-s3"><a class="header" href="#serving-a-nix-store-via-s3">Serving a Nix store via S3</a></h1>
<p>Nix has built-in support for storing and fetching store paths from
Amazon S3 and S3-compatible services. This uses the same <em>binary</em>
cache mechanism that Nix usually uses to fetch prebuilt binaries from
<a href="https://cache.nixos.org/">cache.nixos.org</a>.</p>
<p>The following options can be specified as URL parameters to the S3 URL:</p>
<ul>
<li>
<p><code>profile</code><br />
The name of the AWS configuration profile to use. By default Nix
will use the <code>default</code> profile.</p>
</li>
<li>
<p><code>region</code><br />
The region of the S3 bucket. <code>us–east-1</code> by default.</p>
<p>If your bucket is not in <code>us–east-1</code>, you should always explicitly
specify the region parameter.</p>
</li>
<li>
<p><code>endpoint</code><br />
The URL to your S3-compatible service, for when not using Amazon S3.
Do not specify this value if you're using Amazon S3.</p>
<blockquote>
<p><strong>Note</strong></p>
<p>This endpoint must support HTTPS and will use path-based
addressing instead of virtual host based addressing.</p>
</blockquote>
</li>
<li>
<p><code>scheme</code><br />
The scheme used for S3 requests, <code>https</code> (default) or <code>http</code>. This
option allows you to disable HTTPS for binary caches which don't
support it.</p>
<blockquote>
<p><strong>Note</strong></p>
<p>HTTPS should be used if the cache might contain sensitive
information.</p>
</blockquote>
</li>
</ul>
<p>In this example we will use the bucket named <code>example-nix-cache</code>.</p>
<h2 id="anonymous-reads-to-your-s3-compatible-binary-cache"><a class="header" href="#anonymous-reads-to-your-s3-compatible-binary-cache">Anonymous Reads to your S3-compatible binary cache</a></h2>
<p>If your binary cache is publicly accessible and does not require
authentication, the simplest and easiest way to use Nix with your S3
compatible binary cache is to use the HTTP URL for that cache.</p>
<p>For AWS S3 the binary cache URL for example bucket will be exactly
<a href="https://example-nix-cache.s3.amazonaws.com">https://example-nix-cache.s3.amazonaws.com</a> or
<a href="s3://example-nix-cache">s3://example-nix-cache</a>. For S3 compatible binary caches, consult that
cache's documentation.</p>
<p>Your bucket will need the following bucket policy:</p>
<pre><code class="language-json">{
    &quot;Id&quot;: &quot;DirectReads&quot;,
    &quot;Version&quot;: &quot;2012-10-17&quot;,
    &quot;Statement&quot;: [
        {
            &quot;Sid&quot;: &quot;AllowDirectReads&quot;,
            &quot;Action&quot;: [
                &quot;s3:GetObject&quot;,
                &quot;s3:GetBucketLocation&quot;
            ],
            &quot;Effect&quot;: &quot;Allow&quot;,
            &quot;Resource&quot;: [
                &quot;arn:aws:s3:::example-nix-cache&quot;,
                &quot;arn:aws:s3:::example-nix-cache/*&quot;
            ],
            &quot;Principal&quot;: &quot;*&quot;
        }
    ]
}
</code></pre>
<h2 id="authenticated-reads-to-your-s3-binary-cache"><a class="header" href="#authenticated-reads-to-your-s3-binary-cache">Authenticated Reads to your S3 binary cache</a></h2>
<p>For AWS S3 the binary cache URL for example bucket will be exactly
<a href="s3://example-nix-cache">s3://example-nix-cache</a>.</p>
<p>Nix will use the <a href="https://docs.aws.amazon.com/sdk-for-cpp/v1/developer-guide/credentials.html">default credential provider
chain</a>
for authenticating requests to Amazon S3.</p>
<p>Nix supports authenticated reads from Amazon S3 and S3 compatible binary
caches.</p>
<p>Your bucket will need a bucket policy allowing the desired users to
perform the <code>s3:GetObject</code> and <code>s3:GetBucketLocation</code> action on all
objects in the bucket. The <a href="package-management/s3-substituter.html#anonymous-reads-to-your-s3-compatible-binary-cache">anonymous policy given
above</a> can be
updated to have a restricted <code>Principal</code> to support this.</p>
<h2 id="authenticated-writes-to-your-s3-compatible-binary-cache"><a class="header" href="#authenticated-writes-to-your-s3-compatible-binary-cache">Authenticated Writes to your S3-compatible binary cache</a></h2>
<p>Nix support fully supports writing to Amazon S3 and S3 compatible
buckets. The binary cache URL for our example bucket will be
<a href="s3://example-nix-cache">s3://example-nix-cache</a>.</p>
<p>Nix will use the <a href="https://docs.aws.amazon.com/sdk-for-cpp/v1/developer-guide/credentials.html">default credential provider
chain</a>
for authenticating requests to Amazon S3.</p>
<p>Your account will need the following IAM policy to upload to the cache:</p>
<pre><code class="language-json">{
  &quot;Version&quot;: &quot;2012-10-17&quot;,
  &quot;Statement&quot;: [
    {
      &quot;Sid&quot;: &quot;UploadToCache&quot;,
      &quot;Effect&quot;: &quot;Allow&quot;,
      &quot;Action&quot;: [
        &quot;s3:AbortMultipartUpload&quot;,
        &quot;s3:GetBucketLocation&quot;,
        &quot;s3:GetObject&quot;,
        &quot;s3:ListBucket&quot;,
        &quot;s3:ListBucketMultipartUploads&quot;,
        &quot;s3:ListMultipartUploadParts&quot;,
        &quot;s3:PutObject&quot;
      ],
      &quot;Resource&quot;: [
        &quot;arn:aws:s3:::example-nix-cache&quot;,
        &quot;arn:aws:s3:::example-nix-cache/*&quot;
      ]
    }
  ]
}
</code></pre>
<h2 id="examples"><a class="header" href="#examples">Examples</a></h2>
<p>To upload with a specific credential profile for Amazon S3:</p>
<pre><code class="language-console">$ nix copy nixpkgs.hello \
  --to 's3://example-nix-cache?profile=cache-upload&amp;region=eu-west-2'
</code></pre>
<p>To upload to an S3-compatible binary cache:</p>
<pre><code class="language-console">$ nix copy nixpkgs.hello --to \
  's3://example-nix-cache?profile=cache-upload&amp;scheme=https&amp;endpoint=minio.example.com'
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="nix-language"><a class="header" href="#nix-language">Nix Language</a></h1>
<p>The Nix language is</p>
<ul>
<li>
<p><em>domain-specific</em></p>
<p>It only exists for the Nix package manager:
to describe packages and configurations as well as their variants and compositions.
It is not intended for general purpose use.</p>
</li>
<li>
<p><em>declarative</em></p>
<p>There is no notion of executing sequential steps.
Dependencies between operations are established only through data.</p>
</li>
<li>
<p><em>pure</em></p>
<p>Values cannot change during computation.
Functions always produce the same output if their input does not change.</p>
</li>
<li>
<p><em>functional</em></p>
<p>Functions are like any other value.
Functions can be assigned to names, taken as arguments, or returned by functions.</p>
</li>
<li>
<p><em>lazy</em></p>
<p>Expressions are only evaluated when their value is needed.</p>
</li>
<li>
<p><em>dynamically typed</em></p>
<p>Type errors are only detected when expressions are evaluated.</p>
</li>
</ul>
<h1 id="overview"><a class="header" href="#overview">Overview</a></h1>
<p>This is an incomplete overview of language features, by example.</p>
<table>
 <tr>
  <th>
   Example
  </th>
  <th>
   Description
  </th>
 </tr>
 <tr>
  <td>
<p><em>Basic values</em></p>
</td>
  <td>
</td>
 </tr>
 <tr>
  <td>
<p><code>&quot;hello world&quot;</code></p>
</td>
  <td>
<p>A string</p>
</td>
 </tr>
 <tr>
  <td>
<pre><code>''
  multi
   line
    string
''
</code></pre>
</td>
  <td>
<p>A multi-line string. Strips common prefixed whitespace. Evaluates to <code>&quot;multi\n line\n  string&quot;</code>.</p>
</td>
 </tr>
 <tr>
  <td>
<p><code>&quot;hello ${ { a = &quot;world&quot; }.a }&quot;</code></p>
<p><code>&quot;1 2 ${toString 3}&quot;</code></p>
<p><code>&quot;${pkgs.bash}/bin/sh&quot;</code></p>
</td>
  <td>
<p>String interpolation (expands to <code>&quot;hello world&quot;</code>, <code>&quot;1 2 3&quot;</code>, <code>&quot;/nix/store/&lt;hash&gt;-bash-&lt;version&gt;/bin/sh&quot;</code>)</p>
</td>
 </tr>
 <tr>
  <td>
<p><code>true</code>, <code>false</code></p>
</td>
  <td>
<p>Booleans</p>
</td>
 </tr>
 <tr>
  <td>
<p><code>null</code></p>
</td>
  <td>
<p>Null value</p>
</td>
 </tr>
 <tr>
  <td>
<p><code>123</code></p>
</td>
  <td>
<p>An integer</p>
</td>
 </tr>
 <tr>
  <td>
<p><code>3.141</code></p>
</td>
  <td>
<p>A floating point number</p>
</td>
 </tr>
 <tr>
  <td>
<p><code>/etc</code></p>
</td>
  <td>
<p>An absolute path</p>
</td>
 </tr>
 <tr>
  <td>
<p><code>./foo.png</code></p>
</td>
  <td>
<p>A path relative to the file containing this Nix expression</p>
</td>
 </tr>
 <tr>
  <td>
<p><code>~/.config</code></p>
</td>
  <td>
<p>A home path. Evaluates to the <code>&quot;&lt;user's home directory&gt;/.config&quot;</code>.</p>
</td>
 </tr>
 <tr>
  <td>
<nixpkgs>
</td>
  <td>
<p>Search path. Value determined by <a href="language/../command-ref/env-common.html#env-NIX_PATH"><code>$NIX_PATH</code> environment variable</a>.</p>
</td>
 </tr>
 <tr>
  <td>
<p><em>Compound values</em></p>
</td>
  <td>
</td>
 </tr>
 <tr>
  <td>
<p><code>{ x = 1; y = 2; }</code></p>
</td>
  <td>
<p>A set with attributes named <code>x</code> and <code>y</code></p>
</td>
 </tr>
 <tr>
  <td>
<p><code>{ foo.bar = 1; }</code></p>
</td>
  <td>
<p>A nested set, equivalent to <code>{ foo = { bar = 1; }; }</code></p>
</td>
 </tr>
 <tr>
  <td>
<p><code>rec { x = &quot;foo&quot;; y = x + &quot;bar&quot;; }</code></p>
</td>
  <td>
<p>A recursive set, equivalent to <code>{ x = &quot;foo&quot;; y = &quot;foobar&quot;; }</code></p>
</td>
 </tr>
 <tr>
  <td>
<p><code>[ &quot;foo&quot; &quot;bar&quot; &quot;baz&quot; ]</code></p>
<p><code>[ 1 2 3 ]</code></p>
<p><code>[ (f 1) { a = 1; b = 2; } [ &quot;c&quot; ] ]</code></p>
</td>
  <td>
<p>Lists with three elements.</p>
</td>
 </tr>
 <tr>
  <td>
<p><em>Operators</em></p>
</td>
  <td>
</td>
 </tr>
 <tr>
  <td>
<p><code>&quot;foo&quot; + &quot;bar&quot;</code></p>
</td>
  <td>
<p>String concatenation</p>
</td>
 </tr>
 <tr>
  <td>
<p><code>1 + 2</code></p>
</td>
  <td>
<p>Integer addition</p>
</td>
 </tr>
 <tr>
  <td>
<p><code>&quot;foo&quot; == &quot;f&quot; + &quot;oo&quot;</code></p>
</td>
  <td>
<p>Equality test (evaluates to <code>true</code>)</p>
</td>
 </tr>
 <tr>
  <td>
<p><code>&quot;foo&quot; != &quot;bar&quot;</code></p>
</td>
  <td>
<p>Inequality test (evaluates to <code>true</code>)</p>
</td>
 </tr>
 <tr>
  <td>
<p><code>!true</code></p>
</td>
  <td>
<p>Boolean negation</p>
</td>
 </tr>
 <tr>
  <td>
<p><code>{ x = 1; y = 2; }.x</code></p>
</td>
  <td>
<p>Attribute selection (evaluates to <code>1</code>)</p>
</td>
 </tr>
 <tr>
  <td>
<p><code>{ x = 1; y = 2; }.z or 3</code></p>
</td>
  <td>
<p>Attribute selection with default (evaluates to <code>3</code>)</p>
</td>
 </tr>
 <tr>
  <td>
<p><code>{ x = 1; y = 2; } // { z = 3; }</code></p>
</td>
  <td>
<p>Merge two sets (attributes in the right-hand set taking precedence)</p>
</td>
 </tr>
 <tr>
  <td>
<p><em>Control structures</em></p>
</td>
  <td>
</td>
 </tr>
 <tr>
  <td>
<p><code>if 1 + 1 == 2 then &quot;yes!&quot; else &quot;no!&quot;</code></p>
</td>
  <td>
<p>Conditional expression</p>
</td>
 </tr>
 <tr>
  <td>
<p><code>assert 1 + 1 == 2; &quot;yes!&quot;</code></p>
</td>
  <td>
<p>Assertion check (evaluates to <code>&quot;yes!&quot;</code>).</p>
</td>
 </tr>
 <tr>
  <td>
<p><code>let x = &quot;foo&quot;; y = &quot;bar&quot;; in x + y</code></p>
</td>
  <td>
<p>Variable definition</p>
</td>
 </tr>
 <tr>
  <td>
<p><code>with builtins; head [ 1 2 3 ]</code></p>
</td>
  <td>
<p>Add all attributes from the given set to the scope (evaluates to <code>1</code>)</p>
</td>
 </tr>
 <tr>
  <td>
<p><em>Functions (lambdas)</em></p>
</td>
  <td>
</td>
 </tr>
 <tr>
  <td>
<p><code>x: x + 1</code></p>
</td>
  <td>
<p>A function that expects an integer and returns it increased by 1</p>
</td>
 </tr>
 <tr>
  <td>
<p><code>x: y: x + y</code></p>
</td>
  <td>
<p>Curried function, equivalent to <code>x: (y: x + y)</code>. Can be used like a function that takes two arguments and returns their sum.</p>
</td>
 </tr>
 <tr>
  <td>
<p><code>(x: x + 1) 100</code></p>
</td>
  <td>
<p>A function call (evaluates to 101)</p>
</td>
 </tr>
 <tr>
  <td>
<p><code>let inc = x: x + 1; in inc (inc (inc 100))</code></p>
</td>
  <td>
<p>A function bound to a variable and subsequently called by name (evaluates to 103)</p>
</td>
 </tr>
 <tr>
  <td>
<p><code>{ x, y }: x + y</code></p>
</td>
  <td>
<p>A function that expects a set with required attributes <code>x</code> and <code>y</code> and concatenates them</p>
</td>
 </tr>
 <tr>
  <td>
<p><code>{ x, y ? &quot;bar&quot; }: x + y</code></p>
</td>
  <td>
<p>A function that expects a set with required attribute <code>x</code> and optional <code>y</code>, using <code>&quot;bar&quot;</code> as default value for <code>y</code></p>
</td>
 </tr>
 <tr>
  <td>
<p><code>{ x, y, ... }: x + y</code></p>
</td>
  <td>
<p>A function that expects a set with required attributes <code>x</code> and <code>y</code> and ignores any other attributes</p>
</td>
 </tr>
 <tr>
  <td>
<p><code>{ x, y } @ args: x + y</code></p>
<p><code>args @ { x, y }: x + y</code></p>
</td>
  <td>
<p>A function that expects a set with required attributes <code>x</code> and <code>y</code>, and binds the whole set to <code>args</code></p>
</td>
 </tr>
 <tr>
  <td>
<p><em>Built-in functions</em></p>
</td>
  <td>
</td>
 </tr>
 <tr>
  <td>
<p><code>import ./foo.nix</code></p>
</td>
  <td>
<p>Load and return Nix expression in given file</p>
</td>
 </tr>
 <tr>
  <td>
<p><code>map (x: x + x) [ 1 2 3 ]</code></p>
</td>
  <td>
<p>Apply a function to every element of a list (evaluates to <code>[ 2 4 6 ]</code>)</p>
</td>
 </tr>
</table>
<div style="break-before: page; page-break-before: always;"></div><h1 id="data-types"><a class="header" href="#data-types">Data Types</a></h1>
<h2 id="primitives"><a class="header" href="#primitives">Primitives</a></h2>
<ul>
<li>
<p><a id="type-string" href="language/values.html#type-string">String</a></p>
<p><em>Strings</em> can be written in three ways.</p>
<p>The most common way is to enclose the string between double quotes,
e.g., <code>&quot;foo bar&quot;</code>. Strings can span multiple lines. The special
characters <code>&quot;</code> and <code>\</code> and the character sequence <code>${</code> must be
escaped by prefixing them with a backslash (<code>\</code>). Newlines, carriage
returns and tabs can be written as <code>\n</code>, <code>\r</code> and <code>\t</code>,
respectively.</p>
<p>You can include the results of other expressions into a string by enclosing them in <code>${ }</code>, a feature known as <a href="language/./string-interpolation.html">string interpolation</a>.</p>
<p>The second way to write string literals is as an <em>indented string</em>,
which is enclosed between pairs of <em>double single-quotes</em>, like so:</p>
<pre><code class="language-nix">''
  This is the first line.
  This is the second line.
    This is the third line.
''
</code></pre>
<p>This kind of string literal intelligently strips indentation from
the start of each line. To be precise, it strips from each line a
number of spaces equal to the minimal indentation of the string as a
whole (disregarding the indentation of empty lines). For instance,
the first and second line are indented two spaces, while the third
line is indented four spaces. Thus, two spaces are stripped from
each line, so the resulting string is</p>
<pre><code class="language-nix">&quot;This is the first line.\nThis is the second line.\n  This is the third line.\n&quot;
</code></pre>
<p>Note that the whitespace and newline following the opening <code>''</code> is
ignored if there is no non-whitespace text on the initial line.</p>
<p>Indented strings support <a href="language/./string-interpolation.html">string interpolation</a>.</p>
<p>Since <code>${</code> and <code>''</code> have special meaning in indented strings, you
need a way to quote them. <code>$</code> can be escaped by prefixing it with
<code>''</code> (that is, two single quotes), i.e., <code>''$</code>. <code>''</code> can be escaped
by prefixing it with <code>'</code>, i.e., <code>'''</code>. <code>$</code> removes any special
meaning from the following <code>$</code>. Linefeed, carriage-return and tab
characters can be written as <code>''\n</code>, <code>''\r</code>, <code>''\t</code>, and <code>''\</code>
escapes any other character.</p>
<p>Indented strings are primarily useful in that they allow multi-line
string literals to follow the indentation of the enclosing Nix
expression, and that less escaping is typically necessary for
strings representing languages such as shell scripts and
configuration files because <code>''</code> is much less common than <code>&quot;</code>.
Example:</p>
<pre><code class="language-nix">stdenv.mkDerivation {
  ...
  postInstall =
    ''
      mkdir $out/bin $out/etc
      cp foo $out/bin
      echo &quot;Hello World&quot; &gt; $out/etc/foo.conf
      ${if enableBar then &quot;cp bar $out/bin&quot; else &quot;&quot;}
    '';
  ...
}
</code></pre>
<p>Finally, as a convenience, <em>URIs</em> as defined in appendix B of
<a href="http://www.ietf.org/rfc/rfc2396.txt">RFC 2396</a> can be written <em>as
is</em>, without quotes. For instance, the string
<code>&quot;http://example.org/foo.tar.bz2&quot;</code> can also be written as
<code>http://example.org/foo.tar.bz2</code>.</p>
</li>
<li>
<p><a id="type-number" href="language/values.html#type-number">Number</a></p>
<p>Numbers, which can be <em>integers</em> (like <code>123</code>) or <em>floating point</em>
(like <code>123.43</code> or <code>.27e13</code>).</p>
<p>See <a href="language/./operators.html#arithmetic">arithmetic</a> and <a href="language/./operators.html#comparison">comparison</a> operators for semantics.</p>
</li>
<li>
<p><a id="type-path" href="language/values.html#type-path">Path</a></p>
<p><em>Paths</em>, e.g., <code>/bin/sh</code> or <code>./builder.sh</code>. A path must contain at
least one slash to be recognised as such. For instance, <code>builder.sh</code>
is not a path: it's parsed as an expression that selects the
attribute <code>sh</code> from the variable <code>builder</code>. If the file name is
relative, i.e., if it does not begin with a slash, it is made
absolute at parse time relative to the directory of the Nix
expression that contained it. For instance, if a Nix expression in
<code>/foo/bar/bla.nix</code> refers to <code>../xyzzy/fnord.nix</code>, the absolute path
is <code>/foo/xyzzy/fnord.nix</code>.</p>
<p>If the first component of a path is a <code>~</code>, it is interpreted as if
the rest of the path were relative to the user's home directory.
e.g. <code>~/foo</code> would be equivalent to <code>/home/edolstra/foo</code> for a user
whose home directory is <code>/home/edolstra</code>.</p>
<p>Paths can also be specified between angle brackets, e.g.
<code>&lt;nixpkgs&gt;</code>. This means that the directories listed in the
environment variable <code>NIX_PATH</code> will be searched for the given file
or directory name.</p>
<p>When an <a href="language/./string-interpolation.html">interpolated string</a> evaluates to a path, the path is first copied into the Nix store and the resulting string is the <a href="language/../glossary.html#gloss-store-path">store path</a> of the newly created <a href="language/../glossary.html#gloss-store-object">store object</a>.</p>
<p>For instance, evaluating <code>&quot;${./foo.txt}&quot;</code> will cause <code>foo.txt</code> in the current directory to be copied into the Nix store and result in the string <code>&quot;/nix/store/&lt;hash&gt;-foo.txt&quot;</code>.</p>
<p>Note that the Nix language assumes that all input files will remain <em>unchanged</em> while  evaluating a Nix expression.
For example, assume you used a file path in an interpolated string during a <code>nix repl</code> session.
Later in the same session, after having changed the file contents, evaluating the interpolated string with the file path again might not return a new store path, since Nix might not re-read the file contents.</p>
<p>Paths themselves, except those in angle brackets (<code>&lt; &gt;</code>), support <a href="language/./string-interpolation.html">string interpolation</a>.</p>
<p>At least one slash (<code>/</code>) must appear <em>before</em> any interpolated expression for the result to be recognized as a path.</p>
<p><code>a.${foo}/b.${bar}</code> is a syntactically valid division operation.
<code>./a.${foo}/b.${bar}</code> is a path.</p>
</li>
<li>
<p><a id="type-boolean" href="language/values.html#type-boolean">Boolean</a></p>
<p><em>Booleans</em> with values <code>true</code> and <code>false</code>.</p>
</li>
<li>
<p><a id="type-null" href="language/values.html#type-null">Null</a></p>
<p>The null value, denoted as <code>null</code>.</p>
</li>
</ul>
<h2 id="list"><a class="header" href="#list">List</a></h2>
<p>Lists are formed by enclosing a whitespace-separated list of values
between square brackets. For example,</p>
<pre><code class="language-nix">[ 123 ./foo.nix &quot;abc&quot; (f { x = y; }) ]
</code></pre>
<p>defines a list of four elements, the last being the result of a call to
the function <code>f</code>. Note that function calls have to be enclosed in
parentheses. If they had been omitted, e.g.,</p>
<pre><code class="language-nix">[ 123 ./foo.nix &quot;abc&quot; f { x = y; } ]
</code></pre>
<p>the result would be a list of five elements, the fourth one being a
function and the fifth being a set.</p>
<p>Note that lists are only lazy in values, and they are strict in length.</p>
<h2 id="attribute-set"><a class="header" href="#attribute-set">Attribute Set</a></h2>
<p>An attribute set is a collection of name-value-pairs (called <em>attributes</em>) enclosed in curly brackets (<code>{ }</code>).</p>
<p>Names and values are separated by an equal sign (<code>=</code>).
Each value is an arbitrary expression terminated by a semicolon (<code>;</code>).</p>
<p>Attributes can appear in any order.
An attribute name may only occur once.</p>
<p>Example:</p>
<pre><code class="language-nix">{
  x = 123;
  text = &quot;Hello&quot;;
  y = f { bla = 456; };
}
</code></pre>
<p>This defines a set with attributes named <code>x</code>, <code>text</code>, <code>y</code>.</p>
<p>Attributes can be selected from a set using the <code>.</code> operator. For
instance,</p>
<pre><code class="language-nix">{ a = &quot;Foo&quot;; b = &quot;Bar&quot;; }.a
</code></pre>
<p>evaluates to <code>&quot;Foo&quot;</code>. It is possible to provide a default value in an
attribute selection using the <code>or</code> keyword. For example,</p>
<pre><code class="language-nix">{ a = &quot;Foo&quot;; b = &quot;Bar&quot;; }.c or &quot;Xyzzy&quot;
</code></pre>
<p>will evaluate to <code>&quot;Xyzzy&quot;</code> because there is no <code>c</code> attribute in the set.</p>
<p>You can use arbitrary double-quoted strings as attribute names:</p>
<pre><code class="language-nix">{ &quot;$!@#?&quot; = 123; }.&quot;$!@#?&quot;
</code></pre>
<pre><code class="language-nix">let bar = &quot;bar&quot;;
{ &quot;foo ${bar}&quot; = 123; }.&quot;foo ${bar}&quot;
</code></pre>
<p>Both will evaluate to <code>123</code>.</p>
<p>Attribute names support <a href="language/./string-interpolation.html">string interpolation</a>:</p>
<pre><code class="language-nix">let bar = &quot;foo&quot;; in
{ foo = 123; }.${bar}
</code></pre>
<pre><code class="language-nix">let bar = &quot;foo&quot;; in
{ ${bar} = 123; }.foo
</code></pre>
<p>Both will evaluate to <code>123</code>.</p>
<p>In the special case where an attribute name inside of a set declaration
evaluates to <code>null</code> (which is normally an error, as <code>null</code> cannot be coerced to
a string), that attribute is simply not added to the set:</p>
<pre><code class="language-nix">{ ${if foo then &quot;bar&quot; else null} = true; }
</code></pre>
<p>This will evaluate to <code>{}</code> if <code>foo</code> evaluates to <code>false</code>.</p>
<p>A set that has a <code>__functor</code> attribute whose value is callable (i.e. is
itself a function or a set with a <code>__functor</code> attribute whose value is
callable) can be applied as if it were a function, with the set itself
passed in first , e.g.,</p>
<pre><code class="language-nix">let add = { __functor = self: x: x + self.x; };
    inc = add // { x = 1; };
in inc 1
</code></pre>
<p>evaluates to <code>2</code>. This can be used to attach metadata to a function
without the caller needing to treat it specially, or to implement a form
of object-oriented programming, for example.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="language-constructs"><a class="header" href="#language-constructs">Language Constructs</a></h1>
<h2 id="recursive-sets"><a class="header" href="#recursive-sets">Recursive sets</a></h2>
<p>Recursive sets are just normal sets, but the attributes can refer to
each other. For example,</p>
<pre><code class="language-nix">rec {
  x = y;
  y = 123;
}.x
</code></pre>
<p>evaluates to <code>123</code>. Note that without <code>rec</code> the binding <code>x = y;</code> would
refer to the variable <code>y</code> in the surrounding scope, if one exists, and
would be invalid if no such variable exists. That is, in a normal
(non-recursive) set, attributes are not added to the lexical scope; in a
recursive set, they are.</p>
<p>Recursive sets of course introduce the danger of infinite recursion. For
example, the expression</p>
<pre><code class="language-nix">rec {
  x = y;
  y = x;
}.x
</code></pre>
<p>will crash with an <code>infinite recursion encountered</code> error message.</p>
<h2 id="let-expressions"><a class="header" href="#let-expressions">Let-expressions</a></h2>
<p>A let-expression allows you to define local variables for an expression.
For instance,</p>
<pre><code class="language-nix">let
  x = &quot;foo&quot;;
  y = &quot;bar&quot;;
in x + y
</code></pre>
<p>evaluates to <code>&quot;foobar&quot;</code>.</p>
<h2 id="inheriting-attributes"><a class="header" href="#inheriting-attributes">Inheriting attributes</a></h2>
<p>When defining a set or in a let-expression it is often convenient to
copy variables from the surrounding lexical scope (e.g., when you want
to propagate attributes). This can be shortened using the <code>inherit</code>
keyword. For instance,</p>
<pre><code class="language-nix">let x = 123; in
{ inherit x;
  y = 456;
}
</code></pre>
<p>is equivalent to</p>
<pre><code class="language-nix">let x = 123; in
{ x = x;
  y = 456;
}
</code></pre>
<p>and both evaluate to <code>{ x = 123; y = 456; }</code>. (Note that this works
because <code>x</code> is added to the lexical scope by the <code>let</code> construct.) It is
also possible to inherit attributes from another set. For instance, in
this fragment from <code>all-packages.nix</code>,</p>
<pre><code class="language-nix">graphviz = (import ../tools/graphics/graphviz) {
  inherit fetchurl stdenv libpng libjpeg expat x11 yacc;
  inherit (xlibs) libXaw;
};

xlibs = {
  libX11 = ...;
  libXaw = ...;
  ...
}

libpng = ...;
libjpg = ...;
...
</code></pre>
<p>the set used in the function call to the function defined in
<code>../tools/graphics/graphviz</code> inherits a number of variables from the
surrounding scope (<code>fetchurl</code> ... <code>yacc</code>), but also inherits <code>libXaw</code>
(the X Athena Widgets) from the <code>xlibs</code> (X11 client-side libraries) set.</p>
<p>Summarizing the fragment</p>
<pre><code class="language-nix">...
inherit x y z;
inherit (src-set) a b c;
...
</code></pre>
<p>is equivalent to</p>
<pre><code class="language-nix">...
x = x; y = y; z = z;
a = src-set.a; b = src-set.b; c = src-set.c;
...
</code></pre>
<p>when used while defining local variables in a let-expression or while
defining a set.</p>
<h2 id="functions"><a class="header" href="#functions">Functions</a></h2>
<p>Functions have the following form:</p>
<pre><code class="language-nix">pattern: body
</code></pre>
<p>The pattern specifies what the argument of the function must look like,
and binds variables in the body to (parts of) the argument. There are
three kinds of patterns:</p>
<ul>
<li>
<p>If a pattern is a single identifier, then the function matches any
argument. Example:</p>
<pre><code class="language-nix">let negate = x: !x;
    concat = x: y: x + y;
in if negate true then concat &quot;foo&quot; &quot;bar&quot; else &quot;&quot;
</code></pre>
<p>Note that <code>concat</code> is a function that takes one argument and returns
a function that takes another argument. This allows partial
parameterisation (i.e., only filling some of the arguments of a
function); e.g.,</p>
<pre><code class="language-nix">map (concat &quot;foo&quot;) [ &quot;bar&quot; &quot;bla&quot; &quot;abc&quot; ]
</code></pre>
<p>evaluates to <code>[ &quot;foobar&quot; &quot;foobla&quot; &quot;fooabc&quot; ]</code>.</p>
</li>
<li>
<p>A <em>set pattern</em> of the form <code>{ name1, name2, …, nameN }</code> matches a
set containing the listed attributes, and binds the values of those
attributes to variables in the function body. For example, the
function</p>
<pre><code class="language-nix">{ x, y, z }: z + y + x
</code></pre>
<p>can only be called with a set containing exactly the attributes <code>x</code>,
<code>y</code> and <code>z</code>. No other attributes are allowed. If you want to allow
additional arguments, you can use an ellipsis (<code>...</code>):</p>
<pre><code class="language-nix">{ x, y, z, ... }: z + y + x
</code></pre>
<p>This works on any set that contains at least the three named
attributes.</p>
<p>It is possible to provide <em>default values</em> for attributes, in
which case they are allowed to be missing. A default value is
specified by writing <code>name ?  e</code>, where <em>e</em> is an arbitrary
expression. For example,</p>
<pre><code class="language-nix">{ x, y ? &quot;foo&quot;, z ? &quot;bar&quot; }: z + y + x
</code></pre>
<p>specifies a function that only requires an attribute named <code>x</code>, but
optionally accepts <code>y</code> and <code>z</code>.</p>
</li>
<li>
<p>An <code>@</code>-pattern provides a means of referring to the whole value
being matched:</p>
<pre><code class="language-nix">args@{ x, y, z, ... }: z + y + x + args.a
</code></pre>
<p>but can also be written as:</p>
<pre><code class="language-nix">{ x, y, z, ... } @ args: z + y + x + args.a
</code></pre>
<p>Here <code>args</code> is bound to the entire argument, which is further
matched against the pattern <code>{ x, y, z, ... }</code>. <code>@</code>-pattern makes mainly sense with an ellipsis(<code>...</code>) as
you can access attribute names as <code>a</code>, using <code>args.a</code>, which was
given as an additional attribute to the function.</p>
<blockquote>
<p><strong>Warning</strong></p>
<p>The <code>args@</code> expression is bound to the argument passed to the
function which means that attributes with defaults that aren't
explicitly specified in the function call won't cause an
evaluation error, but won't exist in <code>args</code>.</p>
<p>For instance</p>
<pre><code class="language-nix">let
  function = args@{ a ? 23, ... }: args;
in
  function {}
</code></pre>
<p>will evaluate to an empty attribute set.</p>
</blockquote>
</li>
</ul>
<p>Note that functions do not have names. If you want to give them a name,
you can bind them to an attribute, e.g.,</p>
<pre><code class="language-nix">let concat = { x, y }: x + y;
in concat { x = &quot;foo&quot;; y = &quot;bar&quot;; }
</code></pre>
<h2 id="conditionals"><a class="header" href="#conditionals">Conditionals</a></h2>
<p>Conditionals look like this:</p>
<pre><code class="language-nix">if e1 then e2 else e3
</code></pre>
<p>where <em>e1</em> is an expression that should evaluate to a Boolean value
(<code>true</code> or <code>false</code>).</p>
<h2 id="assertions"><a class="header" href="#assertions">Assertions</a></h2>
<p>Assertions are generally used to check that certain requirements on or
between features and dependencies hold. They look like this:</p>
<pre><code class="language-nix">assert e1; e2
</code></pre>
<p>where <em>e1</em> is an expression that should evaluate to a Boolean value. If
it evaluates to <code>true</code>, <em>e2</em> is returned; otherwise expression
evaluation is aborted and a backtrace is printed.</p>
<p>Here is a Nix expression for the Subversion package that shows how
assertions can be used:.</p>
<pre><code class="language-nix">{ localServer ? false
, httpServer ? false
, sslSupport ? false
, pythonBindings ? false
, javaSwigBindings ? false
, javahlBindings ? false
, stdenv, fetchurl
, openssl ? null, httpd ? null, db4 ? null, expat, swig ? null, j2sdk ? null
}:

assert localServer -&gt; db4 != null; ①
assert httpServer -&gt; httpd != null &amp;&amp; httpd.expat == expat; ②
assert sslSupport -&gt; openssl != null &amp;&amp; (httpServer -&gt; httpd.openssl == openssl); ③
assert pythonBindings -&gt; swig != null &amp;&amp; swig.pythonSupport;
assert javaSwigBindings -&gt; swig != null &amp;&amp; swig.javaSupport;
assert javahlBindings -&gt; j2sdk != null;

stdenv.mkDerivation {
  name = &quot;subversion-1.1.1&quot;;
  ...
  openssl = if sslSupport then openssl else null; ④
  ...
}
</code></pre>
<p>The points of interest are:</p>
<ol>
<li>
<p>This assertion states that if Subversion is to have support for
local repositories, then Berkeley DB is needed. So if the Subversion
function is called with the <code>localServer</code> argument set to <code>true</code> but
the <code>db4</code> argument set to <code>null</code>, then the evaluation fails.</p>
<p>Note that <code>-&gt;</code> is the <a href="https://en.wikipedia.org/wiki/Truth_table#Logical_implication">logical
implication</a>
Boolean operation.</p>
</li>
<li>
<p>This is a more subtle condition: if Subversion is built with Apache
(<code>httpServer</code>) support, then the Expat library (an XML library) used
by Subversion should be same as the one used by Apache. This is
because in this configuration Subversion code ends up being linked
with Apache code, and if the Expat libraries do not match, a build-
or runtime link error or incompatibility might occur.</p>
</li>
<li>
<p>This assertion says that in order for Subversion to have SSL support
(so that it can access <code>https</code> URLs), an OpenSSL library must be
passed. Additionally, it says that <em>if</em> Apache support is enabled,
then Apache's OpenSSL should match Subversion's. (Note that if
Apache support is not enabled, we don't care about Apache's
OpenSSL.)</p>
</li>
<li>
<p>The conditional here is not really related to assertions, but is
worth pointing out: it ensures that if SSL support is disabled, then
the Subversion derivation is not dependent on OpenSSL, even if a
non-<code>null</code> value was passed. This prevents an unnecessary rebuild of
Subversion if OpenSSL changes.</p>
</li>
</ol>
<h2 id="with-expressions"><a class="header" href="#with-expressions">With-expressions</a></h2>
<p>A <em>with-expression</em>,</p>
<pre><code class="language-nix">with e1; e2
</code></pre>
<p>introduces the set <em>e1</em> into the lexical scope of the expression <em>e2</em>.
For instance,</p>
<pre><code class="language-nix">let as = { x = &quot;foo&quot;; y = &quot;bar&quot;; };
in with as; x + y
</code></pre>
<p>evaluates to <code>&quot;foobar&quot;</code> since the <code>with</code> adds the <code>x</code> and <code>y</code> attributes
of <code>as</code> to the lexical scope in the expression <code>x + y</code>. The most common
use of <code>with</code> is in conjunction with the <code>import</code> function. E.g.,</p>
<pre><code class="language-nix">with (import ./definitions.nix); ...
</code></pre>
<p>makes all attributes defined in the file <code>definitions.nix</code> available as
if they were defined locally in a <code>let</code>-expression.</p>
<p>The bindings introduced by <code>with</code> do not shadow bindings introduced by
other means, e.g.</p>
<pre><code class="language-nix">let a = 3; in with { a = 1; }; let a = 4; in with { a = 2; }; ...
</code></pre>
<p>establishes the same scope as</p>
<pre><code class="language-nix">let a = 1; in let a = 2; in let a = 3; in let a = 4; in ...
</code></pre>
<h2 id="comments"><a class="header" href="#comments">Comments</a></h2>
<p>Comments can be single-line, started with a <code>#</code> character, or
inline/multi-line, enclosed within <code>/* ... */</code>.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="string-interpolation"><a class="header" href="#string-interpolation">String interpolation</a></h1>
<p>String interpolation is a language feature where a <a href="language/./values.html#type-string">string</a>, <a href="language/./values.html#type-path">path</a>, or <a href="language/./values.html#attribute-set">attribute name</a> can contain expressions enclosed in <code>${ }</code> (dollar-sign with curly brackets).</p>
<p>Such a string is an <em>interpolated string</em>, and an expression inside is an <em>interpolated expression</em>.</p>
<p>Interpolated expressions must evaluate to one of the following:</p>
<ul>
<li>a <a href="language/./values.html#type-string">string</a></li>
<li>a <a href="language/./values.html#type-path">path</a></li>
<li>a <a href="language/../glossary.html#gloss-derivation">derivation</a></li>
</ul>
<h2 id="examples-1"><a class="header" href="#examples-1">Examples</a></h2>
<h3 id="string"><a class="header" href="#string">String</a></h3>
<p>Rather than writing</p>
<pre><code class="language-nix">&quot;--with-freetype2-library=&quot; + freetype + &quot;/lib&quot;
</code></pre>
<p>(where <code>freetype</code> is a <a href="language/../glossary.html#gloss-derivation">derivation</a>), you can instead write</p>
<pre><code class="language-nix">&quot;--with-freetype2-library=${freetype}/lib&quot;
</code></pre>
<p>The latter is automatically translated to the former.</p>
<p>A more complicated example (from the Nix expression for <a href="http://www.trolltech.com/products/qt">Qt</a>):</p>
<pre><code class="language-nix">configureFlags = &quot;
  -system-zlib -system-libpng -system-libjpeg
  ${if openglSupport then &quot;-dlopen-opengl
    -L${mesa}/lib -I${mesa}/include
    -L${libXmu}/lib -I${libXmu}/include&quot; else &quot;&quot;}
  ${if threadSupport then &quot;-thread&quot; else &quot;-no-thread&quot;}
&quot;;
</code></pre>
<p>Note that Nix expressions and strings can be arbitrarily nested;
in this case the outer string contains various interpolated expressions that themselves contain strings (e.g., <code>&quot;-thread&quot;</code>), some of which in turn contain interpolated expressions (e.g., <code>${mesa}</code>).</p>
<h3 id="path"><a class="header" href="#path">Path</a></h3>
<p>Rather than writing</p>
<pre><code class="language-nix">./. + &quot;/&quot; + foo + &quot;-&quot; + bar + &quot;.nix&quot;
</code></pre>
<p>or</p>
<pre><code class="language-nix">./. + &quot;/${foo}-${bar}.nix&quot;
</code></pre>
<p>you can instead write</p>
<pre><code class="language-nix">./${foo}-${bar}.nix
</code></pre>
<h3 id="attribute-name"><a class="header" href="#attribute-name">Attribute name</a></h3>
<p>Attribute names can be created dynamically with string interpolation:</p>
<pre><code class="language-nix">let name = &quot;foo&quot;; in
{
  ${name} = &quot;bar&quot;;
}
</code></pre>
<pre><code>{ foo = &quot;bar&quot;; }
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="operators"><a class="header" href="#operators">Operators</a></h1>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Syntax</th><th>Associativity</th><th>Precedence</th></tr></thead><tbody>
<tr><td><a href="language/operators.html#attribute-selection">Attribute selection</a></td><td><em>attrset</em> <code>.</code> <em>attrpath</em> [ <code>or</code> <em>expr</em> ]</td><td>none</td><td>1</td></tr>
<tr><td>Function application</td><td><em>func</em> <em>expr</em></td><td>left</td><td>2</td></tr>
<tr><td><a href="language/operators.html#arithmetic">Arithmetic negation</a></td><td><code>-</code> <em>number</em></td><td>none</td><td>3</td></tr>
<tr><td><a href="language/operators.html#has-attribute">Has attribute</a></td><td><em>attrset</em> <code>?</code> <em>attrpath</em></td><td>none</td><td>4</td></tr>
<tr><td>List concatenation</td><td><em>list</em> <code>++</code> <em>list</em></td><td>right</td><td>5</td></tr>
<tr><td><a href="language/operators.html#arithmetic">Multiplication</a></td><td><em>number</em> <code>*</code> <em>number</em></td><td>left</td><td>6</td></tr>
<tr><td><a href="language/operators.html#arithmetic">Division</a></td><td><em>number</em> <code>/</code> <em>number</em></td><td>left</td><td>6</td></tr>
<tr><td><a href="language/operators.html#arithmetic">Subtraction</a></td><td><em>number</em> <code>-</code> <em>number</em></td><td>left</td><td>7</td></tr>
<tr><td><a href="language/operators.html#arithmetic">Addition</a></td><td><em>number</em> <code>+</code> <em>number</em></td><td>left</td><td>7</td></tr>
<tr><td><a href="language/operators.html#string-concatenation">String concatenation</a></td><td><em>string</em> <code>+</code> <em>string</em></td><td>left</td><td>7</td></tr>
<tr><td><a href="language/operators.html#path-concatenation">Path concatenation</a></td><td><em>path</em> <code>+</code> <em>path</em></td><td>left</td><td>7</td></tr>
<tr><td><a href="language/operators.html#path-and-string-concatenation">Path and string concatenation</a></td><td><em>path</em> <code>+</code> <em>string</em></td><td>left</td><td>7</td></tr>
<tr><td>[String and path concatenation]</td><td><em>string</em> <code>+</code> <em>path</em></td><td>left</td><td>7</td></tr>
<tr><td>Logical negation (<code>NOT</code>)</td><td><code>!</code> <em>bool</em></td><td>none</td><td>8</td></tr>
<tr><td><a href="language/operators.html#update">Update</a></td><td><em>attrset</em> <code>//</code> <em>attrset</em></td><td>right</td><td>9</td></tr>
<tr><td><a href="language/operators.html#comparison-operators">Less than</a></td><td><em>expr</em> <code>&lt;</code> <em>expr</em></td><td>none</td><td>10</td></tr>
<tr><td><a href="language/operators.html#comparison-operators">Less than or equal to</a></td><td><em>expr</em> <code>&lt;=</code> <em>expr</em></td><td>none</td><td>10</td></tr>
<tr><td><a href="language/operators.html#comparison-operators">Greater than</a></td><td><em>expr</em> <code>&gt;</code> <em>expr</em></td><td>none</td><td>10</td></tr>
<tr><td><a href="language/operators.html#comparison-operators">Greater than or equal to</a></td><td><em>expr</em> <code>&gt;=</code> <em>expr</em></td><td>none</td><td>10</td></tr>
<tr><td><a href="language/operators.html#equality">Equality</a></td><td><em>expr</em> <code>==</code> <em>expr</em></td><td>none</td><td>11</td></tr>
<tr><td>Inequality</td><td><em>expr</em> <code>!=</code> <em>expr</em></td><td>none</td><td>11</td></tr>
<tr><td>Logical conjunction (<code>AND</code>)</td><td><em>bool</em> <code>&amp;&amp;</code> <em>bool</em></td><td>left</td><td>12</td></tr>
<tr><td>Logical disjunction (<code>OR</code>)</td><td><em>bool</em> `</td><td></td><td>` <em>bool</em></td></tr>
<tr><td><a href="language/operators.html#logical-implication">Logical implication</a></td><td><em>bool</em> <code>-&gt;</code> <em>bool</em></td><td>none</td><td>14</td></tr>
</tbody></table>
</div>
<h2 id="attribute-selection"><a class="header" href="#attribute-selection">Attribute selection</a></h2>
<p>Select the attribute denoted by attribute path <em>attrpath</em> from <a href="language/./values.html#attribute-set">attribute set</a> <em>attrset</em>.
If the attribute doesn’t exist, return <em>value</em> if provided, otherwise abort evaluation.</p>
<!-- FIXME: the following should to into its own language syntax section, but that needs more work to fit in well -->
<p>An attribute path is a dot-separated list of attribute names.
An attribute name can be an identifier or a string.</p>
<blockquote>
<p><em>attrpath</em> = <em>name</em> [ <code>.</code> <em>name</em> ]...
<em>name</em> = <em>identifier</em> | <em>string</em>
<em>identifier</em> ~ <code>[a-zA-Z_][a-zA-Z0-9_'-]*</code></p>
</blockquote>
<h2 id="has-attribute"><a class="header" href="#has-attribute">Has attribute</a></h2>
<blockquote>
<p><em>attrset</em> <code>?</code> <em>attrpath</em></p>
</blockquote>
<p>Test whether <a href="language/./values.html#attribute-set">attribute set</a> <em>attrset</em> contains the attribute denoted by <em>attrpath</em>.
The result is a <a href="language/./values.html#type-boolean">Boolean</a> value.</p>
<h2 id="arithmetic"><a class="header" href="#arithmetic">Arithmetic</a></h2>
<p>Numbers are type-compatible:
Pure integer operations will always return integers, whereas any operation involving at least one floating point number return a floating point number.</p>
<p>See also <a href="language/operators.html#comparison-operators">Comparison</a> and <a href="language/operators.html#equality">Equality</a>.</p>
<p>The <code>+</code> operator is overloaded to also work on strings and paths.</p>
<h2 id="string-concatenation"><a class="header" href="#string-concatenation">String concatenation</a></h2>
<blockquote>
<p><em>string</em> <code>+</code> <em>string</em></p>
</blockquote>
<p>Concatenate two <a href="language/./values.html#type-string">string</a>s and merge their string contexts.</p>
<h2 id="path-concatenation"><a class="header" href="#path-concatenation">Path concatenation</a></h2>
<blockquote>
<p><em>path</em> <code>+</code> <em>path</em></p>
</blockquote>
<p>Concatenate two <a href="language/./values.html#type-path">path</a>s.
The result is a path.</p>
<h2 id="path-and-string-concatenation"><a class="header" href="#path-and-string-concatenation">Path and string concatenation</a></h2>
<blockquote>
<p><em>path</em> + <em>string</em></p>
</blockquote>
<p>Concatenate <em><a href="language/./values.html#type-path">path</a></em> with <em><a href="language/./values.html#type-string">string</a></em>.
The result is a path.</p>
<blockquote>
<p><strong>Note</strong></p>
<p>The string must not have a string context that refers to a <a href="language/../glossary.html#gloss-store-path">store path</a>.</p>
</blockquote>
<h2 id="string-and-path-concatenation"><a class="header" href="#string-and-path-concatenation">String and path concatenation</a></h2>
<blockquote>
<p><em>string</em> + <em>path</em></p>
</blockquote>
<p>Concatenate <em><a href="language/./values.html#type-string">string</a></em> with <em><a href="language/./values.html#type-path">path</a></em>.
The result is a string.</p>
<blockquote>
<p><strong>Important</strong></p>
<p>The file or directory at <em>path</em> must exist and is copied to the <a href="language/../glossary.html#gloss-store">store</a>.
The path appears in the result as the corresponding <a href="language/../glossary.html#gloss-store-path">store path</a>.</p>
</blockquote>
<h2 id="update"><a class="header" href="#update">Update</a></h2>
<blockquote>
<p><em>attrset1</em> + <em>attrset2</em></p>
</blockquote>
<p>Update <a href="language/./values.html#attribute-set">attribute set</a> <em>attrset1</em> with names and values from <em>attrset2</em>.</p>
<p>The returned attribute set will have of all the attributes in <em>e1</em> and <em>e2</em>.
If an attribute name is present in both, the attribute value from the former is taken.</p>
<h2 id="comparison"><a class="header" href="#comparison">Comparison</a></h2>
<p>Comparison is</p>
<ul>
<li><a href="language/operators.html#arithmetic">arithmetic</a> for <a href="language/./values.html#type-number">number</a>s </li>
<li>lexicographic for <a href="language/./values.html#type-string">string</a>s and <a href="language/./values.html#type-path">path</a>s</li>
<li>item-wise lexicographic for <a href="language/./values.html#list">list</a>s:
elements at the same index in both lists are compared according to their type and skipped if they are equal.</li>
</ul>
<p>All comparison operators are implemented in terms of <code>&lt;</code>, and the following equivalencies hold:</p>
<div class="table-wrapper"><table><thead><tr><th>comparison</th><th>implementation</th></tr></thead><tbody>
<tr><td><em>a</em> <code>&lt;=</code> <em>b</em></td><td><code>! (</code> <em>b</em> <code>&lt;</code> <em>a</em> <code>)</code></td></tr>
<tr><td><em>a</em> <code>&gt;</code>  <em>b</em></td><td><em>b</em> <code>&lt;</code> <em>a</em></td></tr>
<tr><td><em>a</em> <code>&gt;=</code> <em>b</em></td><td><code>! (</code> <em>a</em> <code>&lt;</code> <em>b</em> <code>)</code></td></tr>
</tbody></table>
</div>
<h2 id="equality"><a class="header" href="#equality">Equality</a></h2>
<ul>
<li><a href="language/./values.html#attribute-set">Attribute sets</a> and <a href="language/./values.html#list">list</a>s are compared recursively, and therefore are fully evaluated.</li>
<li>Comparison of <a href="language/./constructs.html#functions">function</a>s always returns <code>false</code>.</li>
<li>Numbers are type-compatible, see <a href="language/operators.html#arithmetic">arithmetic</a> operators.</li>
<li>Floating point numbers only differ up to a limited precision.</li>
</ul>
<h2 id="logical-implication"><a class="header" href="#logical-implication">Logical implication</a></h2>
<p>Equivalent to <code>!</code><em>b1</em> <code>||</code> <em>b2</em>.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="derivations"><a class="header" href="#derivations">Derivations</a></h1>
<p>The most important built-in function is <code>derivation</code>, which is used to
describe a single derivation (a build task). It takes as input a set,
the attributes of which specify the inputs of the build.</p>
<ul>
<li>
<p>There must be an attribute named <a href="language/derivations.html#attr-system" id="attr-system"><code>system</code></a> whose value must be a
string specifying a Nix system type, such as <code>&quot;i686-linux&quot;</code> or
<code>&quot;x86_64-darwin&quot;</code>. (To figure out your system type, run <code>nix -vv --version</code>.) The build can only be performed on a machine and
operating system matching the system type. (Nix can automatically
<a href="language/../advanced-topics/distributed-builds.html">forward builds for other
platforms</a> by forwarding
them to other machines.)</p>
</li>
<li>
<p>There must be an attribute named <code>name</code> whose value must be a
string. This is used as a symbolic name for the package by
<code>nix-env</code>, and it is appended to the output paths of the derivation.</p>
</li>
<li>
<p>There must be an attribute named <code>builder</code> that identifies the
program that is executed to perform the build. It can be either a
derivation or a source (a local file reference, e.g.,
<code>./builder.sh</code>).</p>
</li>
<li>
<p>Every attribute is passed as an environment variable to the builder.
Attribute values are translated to environment variables as follows:</p>
<ul>
<li>
<p>Strings and numbers are just passed verbatim.</p>
</li>
<li>
<p>A <em>path</em> (e.g., <code>../foo/sources.tar</code>) causes the referenced file
to be copied to the store; its location in the store is put in
the environment variable. The idea is that all sources should
reside in the Nix store, since all inputs to a derivation should
reside in the Nix store.</p>
</li>
<li>
<p>A <em>derivation</em> causes that derivation to be built prior to the
present derivation; its default output path is put in the
environment variable.</p>
</li>
<li>
<p>Lists of the previous types are also allowed. They are simply
concatenated, separated by spaces.</p>
</li>
<li>
<p><code>true</code> is passed as the string <code>1</code>, <code>false</code> and <code>null</code> are
passed as an empty string.</p>
</li>
</ul>
</li>
<li>
<p>The optional attribute <code>args</code> specifies command-line arguments to be
passed to the builder. It should be a list.</p>
</li>
<li>
<p>The optional attribute <code>outputs</code> specifies a list of symbolic
outputs of the derivation. By default, a derivation produces a
single output path, denoted as <code>out</code>. However, derivations can
produce multiple output paths. This is useful because it allows
outputs to be downloaded or garbage-collected separately. For
instance, imagine a library package that provides a dynamic library,
header files, and documentation. A program that links against the
library doesn’t need the header files and documentation at runtime,
and it doesn’t need the documentation at build time. Thus, the
library package could specify:</p>
<pre><code class="language-nix">outputs = [ &quot;lib&quot; &quot;headers&quot; &quot;doc&quot; ];
</code></pre>
<p>This will cause Nix to pass environment variables <code>lib</code>, <code>headers</code>
and <code>doc</code> to the builder containing the intended store paths of each
output. The builder would typically do something like</p>
<pre><code class="language-bash">./configure \
  --libdir=$lib/lib \
  --includedir=$headers/include \
  --docdir=$doc/share/doc
</code></pre>
<p>for an Autoconf-style package. You can refer to each output of a
derivation by selecting it as an attribute, e.g.</p>
<pre><code class="language-nix">buildInputs = [ pkg.lib pkg.headers ];
</code></pre>
<p>The first element of <code>outputs</code> determines the <em>default output</em>.
Thus, you could also write</p>
<pre><code class="language-nix">buildInputs = [ pkg pkg.headers ];
</code></pre>
<p>since <code>pkg</code> is equivalent to <code>pkg.lib</code>.</p>
</li>
</ul>
<p>The function <code>mkDerivation</code> in the Nixpkgs standard environment is a
wrapper around <code>derivation</code> that adds a default value for <code>system</code> and
always uses Bash as the builder, to which the supplied builder is passed
as a command-line argument. See the Nixpkgs manual for details.</p>
<p>The builder is executed as follows:</p>
<ul>
<li>
<p>A temporary directory is created under the directory specified by
<code>TMPDIR</code> (default <code>/tmp</code>) where the build will take place. The
current directory is changed to this directory.</p>
</li>
<li>
<p>The environment is cleared and set to the derivation attributes, as
specified above.</p>
</li>
<li>
<p>In addition, the following variables are set:</p>
<ul>
<li>
<p><code>NIX_BUILD_TOP</code> contains the path of the temporary directory for
this build.</p>
</li>
<li>
<p>Also, <code>TMPDIR</code>, <code>TEMPDIR</code>, <code>TMP</code>, <code>TEMP</code> are set to point to the
temporary directory. This is to prevent the builder from
accidentally writing temporary files anywhere else. Doing so
might cause interference by other processes.</p>
</li>
<li>
<p><code>PATH</code> is set to <code>/path-not-set</code> to prevent shells from
initialising it to their built-in default value.</p>
</li>
<li>
<p><code>HOME</code> is set to <code>/homeless-shelter</code> to prevent programs from
using <code>/etc/passwd</code> or the like to find the user's home
directory, which could cause impurity. Usually, when <code>HOME</code> is
set, it is used as the location of the home directory, even if
it points to a non-existent path.</p>
</li>
<li>
<p><code>NIX_STORE</code> is set to the path of the top-level Nix store
directory (typically, <code>/nix/store</code>).</p>
</li>
<li>
<p>For each output declared in <code>outputs</code>, the corresponding
environment variable is set to point to the intended path in the
Nix store for that output. Each output path is a concatenation
of the cryptographic hash of all build inputs, the <code>name</code>
attribute and the output name. (The output name is omitted if
it’s <code>out</code>.)</p>
</li>
</ul>
</li>
<li>
<p>If an output path already exists, it is removed. Also, locks are
acquired to prevent multiple Nix instances from performing the same
build at the same time.</p>
</li>
<li>
<p>A log of the combined standard output and error is written to
<code>/nix/var/log/nix</code>.</p>
</li>
<li>
<p>The builder is executed with the arguments specified by the
attribute <code>args</code>. If it exits with exit code 0, it is considered to
have succeeded.</p>
</li>
<li>
<p>The temporary directory is removed (unless the <code>-K</code> option was
specified).</p>
</li>
<li>
<p>If the build was successful, Nix scans each output path for
references to input paths by looking for the hash parts of the input
paths. Since these are potential runtime dependencies, Nix registers
them as dependencies of the output paths.</p>
</li>
<li>
<p>After the build, Nix sets the last-modified timestamp on all files
in the build result to 1 (00:00:01 1/1/1970 UTC), sets the group to
the default group, and sets the mode of the file to 0444 or 0555
(i.e., read-only, with execute permission enabled if the file was
originally executable). Note that possible <code>setuid</code> and <code>setgid</code>
bits are cleared. Setuid and setgid programs are not currently
supported by Nix. This is because the Nix archives used in
deployment have no concept of ownership information, and because it
makes the build result dependent on the user performing the build.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="advanced-attributes"><a class="header" href="#advanced-attributes">Advanced Attributes</a></h1>
<p>Derivations can declare some infrequently used optional attributes.</p>
<ul>
<li>
<p><a href="language/advanced-attributes.html#adv-attr-allowedReferences" id="adv-attr-allowedReferences"><code>allowedReferences</code></a><br />
The optional attribute <code>allowedReferences</code> specifies a list of legal
references (dependencies) of the output of the builder. For example,</p>
<pre><code class="language-nix">allowedReferences = [];
</code></pre>
<p>enforces that the output of a derivation cannot have any runtime
dependencies on its inputs. To allow an output to have a runtime
dependency on itself, use <code>&quot;out&quot;</code> as a list item. This is used in
NixOS to check that generated files such as initial ramdisks for
booting Linux don’t have accidental dependencies on other paths in
the Nix store.</p>
</li>
<li>
<p><a href="language/advanced-attributes.html#adv-attr-allowedRequisites" id="adv-attr-allowedRequisites"><code>allowedRequisites</code></a><br />
This attribute is similar to <code>allowedReferences</code>, but it specifies
the legal requisites of the whole closure, so all the dependencies
recursively. For example,</p>
<pre><code class="language-nix">allowedRequisites = [ foobar ];
</code></pre>
<p>enforces that the output of a derivation cannot have any other
runtime dependency than <code>foobar</code>, and in addition it enforces that
<code>foobar</code> itself doesn't introduce any other dependency itself.</p>
</li>
<li>
<p><a href="language/advanced-attributes.html#adv-attr-disallowedReferences" id="adv-attr-disallowedReferences"><code>disallowedReferences</code></a><br />
The optional attribute <code>disallowedReferences</code> specifies a list of
illegal references (dependencies) of the output of the builder. For
example,</p>
<pre><code class="language-nix">disallowedReferences = [ foo ];
</code></pre>
<p>enforces that the output of a derivation cannot have a direct
runtime dependencies on the derivation <code>foo</code>.</p>
</li>
<li>
<p><a href="language/advanced-attributes.html#adv-attr-disallowedRequisites" id="adv-attr-disallowedRequisites"><code>disallowedRequisites</code></a><br />
This attribute is similar to <code>disallowedReferences</code>, but it
specifies illegal requisites for the whole closure, so all the
dependencies recursively. For example,</p>
<pre><code class="language-nix">disallowedRequisites = [ foobar ];
</code></pre>
<p>enforces that the output of a derivation cannot have any runtime
dependency on <code>foobar</code> or any other derivation depending recursively
on <code>foobar</code>.</p>
</li>
<li>
<p><a href="language/advanced-attributes.html#adv-attr-exportReferencesGraph" id="adv-attr-exportReferencesGraph"><code>exportReferencesGraph</code></a><br />
This attribute allows builders access to the references graph of
their inputs. The attribute is a list of inputs in the Nix store
whose references graph the builder needs to know. The value of
this attribute should be a list of pairs <code>[ name1 path1 name2 path2 ...  ]</code>. The references graph of each <em>pathN</em> will be stored
in a text file <em>nameN</em> in the temporary build directory. The text
files have the format used by <code>nix-store --register-validity</code>
(with the deriver fields left empty). For example, when the
following derivation is built:</p>
<pre><code class="language-nix">derivation {
  ...
  exportReferencesGraph = [ &quot;libfoo-graph&quot; libfoo ];
};
</code></pre>
<p>the references graph of <code>libfoo</code> is placed in the file
<code>libfoo-graph</code> in the temporary build directory.</p>
<p><code>exportReferencesGraph</code> is useful for builders that want to do
something with the closure of a store path. Examples include the
builders in NixOS that generate the initial ramdisk for booting
Linux (a <code>cpio</code> archive containing the closure of the boot script)
and the ISO-9660 image for the installation CD (which is populated
with a Nix store containing the closure of a bootable NixOS
configuration).</p>
</li>
<li>
<p><a href="language/advanced-attributes.html#adv-attr-impureEnvVars" id="adv-attr-impureEnvVars"><code>impureEnvVars</code></a><br />
This attribute allows you to specify a list of environment variables
that should be passed from the environment of the calling user to
the builder. Usually, the environment is cleared completely when the
builder is executed, but with this attribute you can allow specific
environment variables to be passed unmodified. For example,
<code>fetchurl</code> in Nixpkgs has the line</p>
<pre><code class="language-nix">impureEnvVars = [ &quot;http_proxy&quot; &quot;https_proxy&quot; ... ];
</code></pre>
<p>to make it use the proxy server configuration specified by the user
in the environment variables <code>http_proxy</code> and friends.</p>
<p>This attribute is only allowed in <em>fixed-output derivations</em> (see
below), where impurities such as these are okay since (the hash
of) the output is known in advance. It is ignored for all other
derivations.</p>
<blockquote>
<p><strong>Warning</strong></p>
<p><code>impureEnvVars</code> implementation takes environment variables from
the current builder process. When a daemon is building its
environmental variables are used. Without the daemon, the
environmental variables come from the environment of the
<code>nix-build</code>.</p>
</blockquote>
</li>
<li>
<p><a href="language/advanced-attributes.html#adv-attr-outputHash" id="adv-attr-outputHash"><code>outputHash</code></a>; <a href="language/advanced-attributes.html#adv-attr-outputHashAlgo" id="adv-attr-outputHashAlgo"><code>outputHashAlgo</code></a>; <a href="language/advanced-attributes.html#adv-attr-outputHashMode" id="adv-attr-outputHashMode"><code>outputHashMode</code></a><br />
These attributes declare that the derivation is a so-called
<em>fixed-output derivation</em>, which means that a cryptographic hash of
the output is already known in advance. When the build of a
fixed-output derivation finishes, Nix computes the cryptographic
hash of the output and compares it to the hash declared with these
attributes. If there is a mismatch, the build fails.</p>
<p>The rationale for fixed-output derivations is derivations such as
those produced by the <code>fetchurl</code> function. This function downloads a
file from a given URL. To ensure that the downloaded file has not
been modified, the caller must also specify a cryptographic hash of
the file. For example,</p>
<pre><code class="language-nix">fetchurl {
  url = &quot;http://ftp.gnu.org/pub/gnu/hello/hello-2.1.1.tar.gz&quot;;
  sha256 = &quot;1md7jsfd8pa45z73bz1kszpp01yw6x5ljkjk2hx7wl800any6465&quot;;
}
</code></pre>
<p>It sometimes happens that the URL of the file changes, e.g., because
servers are reorganised or no longer available. We then must update
the call to <code>fetchurl</code>, e.g.,</p>
<pre><code class="language-nix">fetchurl {
  url = &quot;ftp://ftp.nluug.nl/pub/gnu/hello/hello-2.1.1.tar.gz&quot;;
  sha256 = &quot;1md7jsfd8pa45z73bz1kszpp01yw6x5ljkjk2hx7wl800any6465&quot;;
}
</code></pre>
<p>If a <code>fetchurl</code> derivation was treated like a normal derivation, the
output paths of the derivation and <em>all derivations depending on it</em>
would change. For instance, if we were to change the URL of the
Glibc source distribution in Nixpkgs (a package on which almost all
other packages depend) massive rebuilds would be needed. This is
unfortunate for a change which we know cannot have a real effect as
it propagates upwards through the dependency graph.</p>
<p>For fixed-output derivations, on the other hand, the name of the
output path only depends on the <code>outputHash*</code> and <code>name</code> attributes,
while all other attributes are ignored for the purpose of computing
the output path. (The <code>name</code> attribute is included because it is
part of the path.)</p>
<p>As an example, here is the (simplified) Nix expression for
<code>fetchurl</code>:</p>
<pre><code class="language-nix">{ stdenv, curl }: # The curl program is used for downloading.

{ url, sha256 }:

stdenv.mkDerivation {
  name = baseNameOf (toString url);
  builder = ./builder.sh;
  buildInputs = [ curl ];

  # This is a fixed-output derivation; the output must be a regular
  # file with SHA256 hash sha256.
  outputHashMode = &quot;flat&quot;;
  outputHashAlgo = &quot;sha256&quot;;
  outputHash = sha256;

  inherit url;
}
</code></pre>
<p>The <code>outputHashAlgo</code> attribute specifies the hash algorithm used to
compute the hash. It can currently be <code>&quot;sha1&quot;</code>, <code>&quot;sha256&quot;</code> or
<code>&quot;sha512&quot;</code>.</p>
<p>The <code>outputHashMode</code> attribute determines how the hash is computed.
It must be one of the following two values:</p>
<ul>
<li>
<p><code>&quot;flat&quot;</code><br />
The output must be a non-executable regular file. If it isn’t,
the build fails. The hash is simply computed over the contents
of that file (so it’s equal to what Unix commands like
<code>sha256sum</code> or <code>sha1sum</code> produce).</p>
<p>This is the default.</p>
</li>
<li>
<p><code>&quot;recursive&quot;</code><br />
The hash is computed over the NAR archive dump of the output
(i.e., the result of <a href="language/../command-ref/nix-store.html#operation---dump"><code>nix-store --dump</code></a>). In
this case, the output can be anything, including a directory
tree.</p>
</li>
</ul>
<p>The <code>outputHash</code> attribute, finally, must be a string containing
the hash in either hexadecimal or base-32 notation. (See the
<a href="language/../command-ref/nix-hash.html"><code>nix-hash</code> command</a> for information
about converting to and from base-32 notation.)</p>
</li>
<li>
<p><a href="language/advanced-attributes.html#adv-attr-__contentAddressed" id="adv-attr-__contentAddressed"><code>__contentAddressed</code></a>
If this <strong>experimental</strong> attribute is set to true, then the derivation
outputs will be stored in a content-addressed location rather than the
traditional input-addressed one.
This only has an effect if the <code>ca-derivation</code> experimental feature is enabled.</p>
<p>Setting this attribute also requires setting <code>outputHashMode</code> and <code>outputHashAlgo</code> like for <em>fixed-output derivations</em> (see above).</p>
</li>
<li>
<p><a href="language/advanced-attributes.html#adv-attr-passAsFile" id="adv-attr-passAsFile"><code>passAsFile</code></a><br />
A list of names of attributes that should be passed via files rather
than environment variables. For example, if you have</p>
<pre><code class="language-nix">passAsFile = [&quot;big&quot;];
big = &quot;a very long string&quot;;
</code></pre>
<p>then when the builder runs, the environment variable <code>bigPath</code>
will contain the absolute path to a temporary file containing <code>a very long string</code>. That is, for any attribute <em>x</em> listed in
<code>passAsFile</code>, Nix will pass an environment variable <code>xPath</code>
holding the path of the file containing the value of attribute
<em>x</em>. This is useful when you need to pass large strings to a
builder, since most operating systems impose a limit on the size
of the environment (typically, a few hundred kilobyte).</p>
</li>
<li>
<p><a href="language/advanced-attributes.html#adv-attr-preferLocalBuild" id="adv-attr-preferLocalBuild"><code>preferLocalBuild</code></a><br />
If this attribute is set to <code>true</code> and <a href="language/../advanced-topics/distributed-builds.html">distributed building is
enabled</a>, then, if
possible, the derivation will be built locally instead of forwarded
to a remote machine. This is appropriate for trivial builders
where the cost of doing a download or remote build would exceed
the cost of building locally.</p>
</li>
<li>
<p><a href="language/advanced-attributes.html#adv-attr-allowSubstitutes" id="adv-attr-allowSubstitutes"><code>allowSubstitutes</code></a><br />
If this attribute is set to <code>false</code>, then Nix will always build this
derivation; it will not try to substitute its outputs. This is
useful for very trivial derivations (such as <code>writeText</code> in Nixpkgs)
that are cheaper to build than to substitute from a binary cache.</p>
<blockquote>
<p><strong>Note</strong></p>
<p>You need to have a builder configured which satisfies the
derivation’s <code>system</code> attribute, since the derivation cannot be
substituted. Thus it is usually a good idea to align <code>system</code> with
<code>builtins.currentSystem</code> when setting <code>allowSubstitutes</code> to
<code>false</code>. For most trivial derivations this should be the case.</p>
</blockquote>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="built-in-constants"><a class="header" href="#built-in-constants">Built-in Constants</a></h1>
<p>Here are the constants built into the Nix expression evaluator:</p>
<ul>
<li>
<p><code>builtins</code><br />
The set <code>builtins</code> contains all the built-in functions and values.
You can use <code>builtins</code> to test for the availability of features in
the Nix installation, e.g.,</p>
<pre><code class="language-nix">if builtins ? getEnv then builtins.getEnv &quot;PATH&quot; else &quot;&quot;
</code></pre>
<p>This allows a Nix expression to fall back gracefully on older Nix
installations that don’t have the desired built-in function.</p>
</li>
<li>
<p><a href="language/builtin-constants.html#builtins-currentSystem" id="builtins-currentSystem"><code>builtins.currentSystem</code></a><br />
The built-in value <code>currentSystem</code> evaluates to the Nix platform
identifier for the Nix installation on which the expression is being
evaluated, such as <code>&quot;i686-linux&quot;</code> or <code>&quot;x86_64-darwin&quot;</code>.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="built-in-functions"><a class="header" href="#built-in-functions">Built-in Functions</a></h1>
<p>This section lists the functions built into the Nix expression
evaluator. (The built-in function <code>derivation</code> is discussed above.)
Some built-ins, such as <code>derivation</code>, are always in scope of every Nix
expression; you can just access them right away. But to prevent
polluting the namespace too much, most built-ins are not in
scope. Instead, you can access them through the <code>builtins</code> built-in
value, which is a set that contains all built-in functions and values.
For instance, <code>derivation</code> is also available as <code>builtins.derivation</code>.</p>
<dl>
  <dt><code>derivation <var>attrs</var></code>;
      <code>builtins.derivation <var>attrs</var></code></dt>
  <dd><p><var>derivation</var> is described in
         <a href="language/derivations.html">its own section</a>.</p></dd>
<dt id="builtins-abort">
  <a href="language/builtins.html#builtins-abort"><code>abort <var>s</var></code></a>
</dt>
<dd>
<p>Abort Nix expression evaluation and print the error message <em>s</em>.</p>
</dd>
<dt id="builtins-add">
  <a href="language/builtins.html#builtins-add"><code>add <var>e1</var> <var>e2</var></code></a>
</dt>
<dd>
<p>Return the sum of the numbers <em>e1</em> and <em>e2</em>.</p>
</dd>
<dt id="builtins-all">
  <a href="language/builtins.html#builtins-all"><code>all <var>pred</var> <var>list</var></code></a>
</dt>
<dd>
<p>Return <code>true</code> if the function <em>pred</em> returns <code>true</code> for all elements
of <em>list</em>, and <code>false</code> otherwise.</p>
</dd>
<dt id="builtins-any">
  <a href="language/builtins.html#builtins-any"><code>any <var>pred</var> <var>list</var></code></a>
</dt>
<dd>
<p>Return <code>true</code> if the function <em>pred</em> returns <code>true</code> for at least one
element of <em>list</em>, and <code>false</code> otherwise.</p>
</dd>
<dt id="builtins-attrNames">
  <a href="language/builtins.html#builtins-attrNames"><code>attrNames <var>set</var></code></a>
</dt>
<dd>
<p>Return the names of the attributes in the set <em>set</em> in an
alphabetically sorted list. For instance, <code>builtins.attrNames { y = 1; x = &quot;foo&quot;; }</code> evaluates to <code>[ &quot;x&quot; &quot;y&quot; ]</code>.</p>
</dd>
<dt id="builtins-attrValues">
  <a href="language/builtins.html#builtins-attrValues"><code>attrValues <var>set</var></code></a>
</dt>
<dd>
<p>Return the values of the attributes in the set <em>set</em> in the order
corresponding to the sorted attribute names.</p>
</dd>
<dt id="builtins-baseNameOf">
  <a href="language/builtins.html#builtins-baseNameOf"><code>baseNameOf <var>s</var></code></a>
</dt>
<dd>
<p>Return the <em>base name</em> of the string <em>s</em>, that is, everything
following the final slash in the string. This is similar to the GNU
<code>basename</code> command.</p>
</dd>
<dt id="builtins-bitAnd">
  <a href="language/builtins.html#builtins-bitAnd"><code>bitAnd <var>e1</var> <var>e2</var></code></a>
</dt>
<dd>
<p>Return the bitwise AND of the integers <em>e1</em> and <em>e2</em>.</p>
</dd>
<dt id="builtins-bitOr">
  <a href="language/builtins.html#builtins-bitOr"><code>bitOr <var>e1</var> <var>e2</var></code></a>
</dt>
<dd>
<p>Return the bitwise OR of the integers <em>e1</em> and <em>e2</em>.</p>
</dd>
<dt id="builtins-bitXor">
  <a href="language/builtins.html#builtins-bitXor"><code>bitXor <var>e1</var> <var>e2</var></code></a>
</dt>
<dd>
<p>Return the bitwise XOR of the integers <em>e1</em> and <em>e2</em>.</p>
</dd>
<dt id="builtins-break">
  <a href="language/builtins.html#builtins-break"><code>break <var>v</var></code></a>
</dt>
<dd>
<p>In debug mode (enabled using <code>--debugger</code>), pause Nix expression evaluation and enter the REPL.
Otherwise, return the argument <code>v</code>.</p>
</dd>
<dt id="builtins-catAttrs">
  <a href="language/builtins.html#builtins-catAttrs"><code>catAttrs <var>attr</var> <var>list</var></code></a>
</dt>
<dd>
<p>Collect each attribute named <em>attr</em> from a list of attribute
sets.  Attrsets that don't contain the named attribute are
ignored. For example,</p>
<pre><code class="language-nix">builtins.catAttrs &quot;a&quot; [{a = 1;} {b = 0;} {a = 2;}]
</code></pre>
<p>evaluates to <code>[1 2]</code>.</p>
</dd>
<dt id="builtins-ceil">
  <a href="language/builtins.html#builtins-ceil"><code>ceil <var>double</var></code></a>
</dt>
<dd>
<p>Converts an IEEE-754 double-precision floating-point number (<em>double</em>) to
the next higher integer.</p>
<p>If the datatype is neither an integer nor a &quot;float&quot;, an evaluation error will be
thrown.</p>
</dd>
<dt id="builtins-compareVersions">
  <a href="language/builtins.html#builtins-compareVersions"><code>compareVersions <var>s1</var> <var>s2</var></code></a>
</dt>
<dd>
<p>Compare two strings representing versions and return <code>-1</code> if
version <em>s1</em> is older than version <em>s2</em>, <code>0</code> if they are the same,
and <code>1</code> if <em>s1</em> is newer than <em>s2</em>. The version comparison
algorithm is the same as the one used by <a href="language/../command-ref/nix-env.html#operation---upgrade"><code>nix-env -u</code></a>.</p>
</dd>
<dt id="builtins-concatLists">
  <a href="language/builtins.html#builtins-concatLists"><code>concatLists <var>lists</var></code></a>
</dt>
<dd>
<p>Concatenate a list of lists into a single list.</p>
</dd>
<dt id="builtins-concatMap">
  <a href="language/builtins.html#builtins-concatMap"><code>concatMap <var>f</var> <var>list</var></code></a>
</dt>
<dd>
<p>This function is equivalent to <code>builtins.concatLists (map f list)</code>
but is more efficient.</p>
</dd>
<dt id="builtins-concatStringsSep">
  <a href="language/builtins.html#builtins-concatStringsSep"><code>concatStringsSep <var>separator</var> <var>list</var></code></a>
</dt>
<dd>
<p>Concatenate a list of strings with a separator between each
element, e.g. <code>concatStringsSep &quot;/&quot; [&quot;usr&quot; &quot;local&quot; &quot;bin&quot;] == &quot;usr/local/bin&quot;</code>.</p>
</dd>
<dt id="builtins-deepSeq">
  <a href="language/builtins.html#builtins-deepSeq"><code>deepSeq <var>e1</var> <var>e2</var></code></a>
</dt>
<dd>
<p>This is like <code>seq e1 e2</code>, except that <em>e1</em> is evaluated <em>deeply</em>:
if it’s a list or set, its elements or attributes are also
evaluated recursively.</p>
</dd>
<dt id="builtins-dirOf">
  <a href="language/builtins.html#builtins-dirOf"><code>dirOf <var>s</var></code></a>
</dt>
<dd>
<p>Return the directory part of the string <em>s</em>, that is, everything
before the final slash in the string. This is similar to the GNU
<code>dirname</code> command.</p>
</dd>
<dt id="builtins-div">
  <a href="language/builtins.html#builtins-div"><code>div <var>e1</var> <var>e2</var></code></a>
</dt>
<dd>
<p>Return the quotient of the numbers <em>e1</em> and <em>e2</em>.</p>
</dd>
<dt id="builtins-elem">
  <a href="language/builtins.html#builtins-elem"><code>elem <var>x</var> <var>xs</var></code></a>
</dt>
<dd>
<p>Return <code>true</code> if a value equal to <em>x</em> occurs in the list <em>xs</em>, and
<code>false</code> otherwise.</p>
</dd>
<dt id="builtins-elemAt">
  <a href="language/builtins.html#builtins-elemAt"><code>elemAt <var>xs</var> <var>n</var></code></a>
</dt>
<dd>
<p>Return element <em>n</em> from the list <em>xs</em>. Elements are counted starting
from 0. A fatal error occurs if the index is out of bounds.</p>
</dd>
<dt id="builtins-fetchClosure">
  <a href="language/builtins.html#builtins-fetchClosure"><code>fetchClosure <var>args</var></code></a>
</dt>
<dd>
<p>Fetch a Nix store closure from a binary cache, rewriting it into
content-addressed form. For example,</p>
<pre><code class="language-nix">builtins.fetchClosure {
  fromStore = &quot;https://cache.nixos.org&quot;;
  fromPath = /nix/store/r2jd6ygnmirm2g803mksqqjm4y39yi6i-git-2.33.1;
  toPath = /nix/store/ldbhlwhh39wha58rm61bkiiwm6j7211j-git-2.33.1;
}
</code></pre>
<p>fetches <code>/nix/store/r2jd...</code> from the specified binary cache,
and rewrites it into the content-addressed store path
<code>/nix/store/ldbh...</code>.</p>
<p>If <code>fromPath</code> is already content-addressed, or if you are
allowing impure evaluation (<code>--impure</code>), then <code>toPath</code> may be
omitted.</p>
<p>To find out the correct value for <code>toPath</code> given a <code>fromPath</code>,
you can use <code>nix store make-content-addressed</code>:</p>
<pre><code class="language-console"># nix store make-content-addressed --from https://cache.nixos.org /nix/store/r2jd6ygnmirm2g803mksqqjm4y39yi6i-git-2.33.1
rewrote '/nix/store/r2jd6ygnmirm2g803mksqqjm4y39yi6i-git-2.33.1' to '/nix/store/ldbhlwhh39wha58rm61bkiiwm6j7211j-git-2.33.1'
</code></pre>
<p>This function is similar to <code>builtins.storePath</code> in that it
allows you to use a previously built store path in a Nix
expression. However, it is more reproducible because it requires
specifying a binary cache from which the path can be fetched.
Also, requiring a content-addressed final store path avoids the
need for users to configure binary cache public keys.</p>
<p>This function is only available if you enable the experimental
feature <code>fetch-closure</code>.</p>
</dd>
<dt id="builtins-fetchGit">
  <a href="language/builtins.html#builtins-fetchGit"><code>fetchGit <var>args</var></code></a>
</dt>
<dd>
<p>Fetch a path from git. <em>args</em> can be a URL, in which case the HEAD
of the repo at that URL is fetched. Otherwise, it can be an
attribute with the following attributes (all except <code>url</code> optional):</p>
<ul>
<li>
<p>url<br />
The URL of the repo.</p>
</li>
<li>
<p>name<br />
The name of the directory the repo should be exported to in the
store. Defaults to the basename of the URL.</p>
</li>
<li>
<p>rev<br />
The git revision to fetch. Defaults to the tip of <code>ref</code>.</p>
</li>
<li>
<p>ref<br />
The git ref to look for the requested revision under. This is
often a branch or tag name. Defaults to <code>HEAD</code>.</p>
<p>By default, the <code>ref</code> value is prefixed with <code>refs/heads/</code>. As
of Nix 2.3.0 Nix will not prefix <code>refs/heads/</code> if <code>ref</code> starts
with <code>refs/</code>.</p>
</li>
<li>
<p>submodules<br />
A Boolean parameter that specifies whether submodules should be
checked out. Defaults to <code>false</code>.</p>
</li>
<li>
<p>shallow<br />
A Boolean parameter that specifies whether fetching a shallow clone
is allowed. Defaults to <code>false</code>.</p>
</li>
<li>
<p>allRefs<br />
Whether to fetch all refs of the repository. With this argument being
true, it's possible to load a <code>rev</code> from <em>any</em> <code>ref</code> (by default only
<code>rev</code>s from the specified <code>ref</code> are supported).</p>
</li>
</ul>
<p>Here are some examples of how to use <code>fetchGit</code>.</p>
<ul>
<li>
<p>To fetch a private repository over SSH:</p>
<pre><code class="language-nix">builtins.fetchGit {
  url = &quot;git@github.com:my-secret/repository.git&quot;;
  ref = &quot;master&quot;;
  rev = &quot;adab8b916a45068c044658c4158d81878f9ed1c3&quot;;
}
</code></pre>
</li>
<li>
<p>To fetch an arbitrary reference:</p>
<pre><code class="language-nix">builtins.fetchGit {
  url = &quot;https://github.com/NixOS/nix.git&quot;;
  ref = &quot;refs/heads/0.5-release&quot;;
}
</code></pre>
</li>
<li>
<p>If the revision you're looking for is in the default branch of
the git repository you don't strictly need to specify the branch
name in the <code>ref</code> attribute.</p>
<p>However, if the revision you're looking for is in a future
branch for the non-default branch you will need to specify the
the <code>ref</code> attribute as well.</p>
<pre><code class="language-nix">builtins.fetchGit {
  url = &quot;https://github.com/nixos/nix.git&quot;;
  rev = &quot;841fcbd04755c7a2865c51c1e2d3b045976b7452&quot;;
  ref = &quot;1.11-maintenance&quot;;
}
</code></pre>
<blockquote>
<p><strong>Note</strong></p>
<p>It is nice to always specify the branch which a revision
belongs to. Without the branch being specified, the fetcher
might fail if the default branch changes. Additionally, it can
be confusing to try a commit from a non-default branch and see
the fetch fail. If the branch is specified the fault is much
more obvious.</p>
</blockquote>
</li>
<li>
<p>If the revision you're looking for is in the default branch of
the git repository you may omit the <code>ref</code> attribute.</p>
<pre><code class="language-nix">builtins.fetchGit {
  url = &quot;https://github.com/nixos/nix.git&quot;;
  rev = &quot;841fcbd04755c7a2865c51c1e2d3b045976b7452&quot;;
}
</code></pre>
</li>
<li>
<p>To fetch a specific tag:</p>
<pre><code class="language-nix">builtins.fetchGit {
  url = &quot;https://github.com/nixos/nix.git&quot;;
  ref = &quot;refs/tags/1.9&quot;;
}
</code></pre>
</li>
<li>
<p>To fetch the latest version of a remote branch:</p>
<pre><code class="language-nix">builtins.fetchGit {
  url = &quot;ssh://git@github.com/nixos/nix.git&quot;;
  ref = &quot;master&quot;;
}
</code></pre>
<blockquote>
<p><strong>Note</strong></p>
<p>Nix will refetch the branch in accordance with
the option <code>tarball-ttl</code>.</p>
</blockquote>
<blockquote>
<p><strong>Note</strong></p>
<p>This behavior is disabled in <em>Pure evaluation mode</em>.</p>
</blockquote>
</li>
</ul>
</dd>
<dt id="builtins-fetchTarball">
  <a href="language/builtins.html#builtins-fetchTarball"><code>fetchTarball <var>args</var></code></a>
</dt>
<dd>
<p>Download the specified URL, unpack it and return the path of the
unpacked tree. The file must be a tape archive (<code>.tar</code>) compressed
with <code>gzip</code>, <code>bzip2</code> or <code>xz</code>. The top-level path component of the
files in the tarball is removed, so it is best if the tarball
contains a single directory at top level. The typical use of the
function is to obtain external Nix expression dependencies, such as
a particular version of Nixpkgs, e.g.</p>
<pre><code class="language-nix">with import (fetchTarball https://github.com/NixOS/nixpkgs/archive/nixos-14.12.tar.gz) {};

stdenv.mkDerivation { … }
</code></pre>
<p>The fetched tarball is cached for a certain amount of time (1
hour by default) in <code>~/.cache/nix/tarballs/</code>. You can change the
cache timeout either on the command line with <code>--tarball-ttl</code>
<em>number-of-seconds</em> or in the Nix configuration file by adding
the line <code>tarball-ttl = </code> <em>number-of-seconds</em>.</p>
<p>Note that when obtaining the hash with <code>nix-prefetch-url</code> the
option <code>--unpack</code> is required.</p>
<p>This function can also verify the contents against a hash. In that
case, the function takes a set instead of a URL. The set requires
the attribute <code>url</code> and the attribute <code>sha256</code>, e.g.</p>
<pre><code class="language-nix">with import (fetchTarball {
  url = &quot;https://github.com/NixOS/nixpkgs/archive/nixos-14.12.tar.gz&quot;;
  sha256 = &quot;1jppksrfvbk5ypiqdz4cddxdl8z6zyzdb2srq8fcffr327ld5jj2&quot;;
}) {};

stdenv.mkDerivation { … }
</code></pre>
<p>This function is not available if <a href="language/../command-ref/conf-file.html">restricted evaluation
mode</a> is enabled.</p>
</dd>
<dt id="builtins-fetchurl">
  <a href="language/builtins.html#builtins-fetchurl"><code>fetchurl <var>url</var></code></a>
</dt>
<dd>
<p>Download the specified URL and return the path of the downloaded
file. This function is not available if <a href="language/../command-ref/conf-file.html">restricted evaluation
mode</a> is enabled.</p>
</dd>
<dt id="builtins-filter">
  <a href="language/builtins.html#builtins-filter"><code>filter <var>f</var> <var>list</var></code></a>
</dt>
<dd>
<p>Return a list consisting of the elements of <em>list</em> for which the
function <em>f</em> returns <code>true</code>.</p>
</dd>
<dt id="builtins-filterSource">
  <a href="language/builtins.html#builtins-filterSource"><code>filterSource <var>e1</var> <var>e2</var></code></a>
</dt>
<dd>
<blockquote>
<p><strong>Warning</strong></p>
<p><code>filterSource</code> should not be used to filter store paths. Since
<code>filterSource</code> uses the name of the input directory while naming
the output directory, doing so will produce a directory name in
the form of <code>&lt;hash2&gt;-&lt;hash&gt;-&lt;name&gt;</code>, where <code>&lt;hash&gt;-&lt;name&gt;</code> is
the name of the input directory. Since <code>&lt;hash&gt;</code> depends on the
unfiltered directory, the name of the output directory will
indirectly depend on files that are filtered out by the
function. This will trigger a rebuild even when a filtered out
file is changed. Use <code>builtins.path</code> instead, which allows
specifying the name of the output directory.</p>
</blockquote>
<p>This function allows you to copy sources into the Nix store while
filtering certain files. For instance, suppose that you want to use
the directory <code>source-dir</code> as an input to a Nix expression, e.g.</p>
<pre><code class="language-nix">stdenv.mkDerivation {
  ...
  src = ./source-dir;
}
</code></pre>
<p>However, if <code>source-dir</code> is a Subversion working copy, then all
those annoying <code>.svn</code> subdirectories will also be copied to the
store. Worse, the contents of those directories may change a lot,
causing lots of spurious rebuilds. With <code>filterSource</code> you can
filter out the <code>.svn</code> directories:</p>
<pre><code class="language-nix">src = builtins.filterSource
  (path: type: type != &quot;directory&quot; || baseNameOf path != &quot;.svn&quot;)
  ./source-dir;
</code></pre>
<p>Thus, the first argument <em>e1</em> must be a predicate function that is
called for each regular file, directory or symlink in the source
tree <em>e2</em>. If the function returns <code>true</code>, the file is copied to the
Nix store, otherwise it is omitted. The function is called with two
arguments. The first is the full path of the file. The second is a
string that identifies the type of the file, which is either
<code>&quot;regular&quot;</code>, <code>&quot;directory&quot;</code>, <code>&quot;symlink&quot;</code> or <code>&quot;unknown&quot;</code> (for other
kinds of files such as device nodes or fifos — but note that those
cannot be copied to the Nix store, so if the predicate returns
<code>true</code> for them, the copy will fail). If you exclude a directory,
the entire corresponding subtree of <em>e2</em> will be excluded.</p>
</dd>
<dt id="builtins-floor">
  <a href="language/builtins.html#builtins-floor"><code>floor <var>double</var></code></a>
</dt>
<dd>
<p>Converts an IEEE-754 double-precision floating-point number (<em>double</em>) to
the next lower integer.</p>
<p>If the datatype is neither an integer nor a &quot;float&quot;, an evaluation error will be
thrown.</p>
</dd>
<dt id="builtins-foldl'">
  <a href="language/builtins.html#builtins-foldl'"><code>foldl' <var>op</var> <var>nul</var> <var>list</var></code></a>
</dt>
<dd>
<p>Reduce a list by applying a binary operator, from left to right,
e.g. <code>foldl' op nul [x0 x1 x2 ...] = op (op (op nul x0) x1) x2) ...</code>. The operator is applied strictly, i.e., its arguments are
evaluated first. For example, <code>foldl' (x: y: x + y) 0 [1 2 3]</code>
evaluates to 6.</p>
</dd>
<dt id="builtins-fromJSON">
  <a href="language/builtins.html#builtins-fromJSON"><code>fromJSON <var>e</var></code></a>
</dt>
<dd>
<p>Convert a JSON string to a Nix value. For example,</p>
<pre><code class="language-nix">builtins.fromJSON ''{&quot;x&quot;: [1, 2, 3], &quot;y&quot;: null}''
</code></pre>
<p>returns the value <code>{ x = [ 1 2 3 ]; y = null; }</code>.</p>
</dd>
<dt id="builtins-functionArgs">
  <a href="language/builtins.html#builtins-functionArgs"><code>functionArgs <var>f</var></code></a>
</dt>
<dd>
<p>Return a set containing the names of the formal arguments expected
by the function <em>f</em>. The value of each attribute is a Boolean
denoting whether the corresponding argument has a default value. For
instance, <code>functionArgs ({ x, y ? 123}: ...) = { x = false; y = true; }</code>.</p>
<p>&quot;Formal argument&quot; here refers to the attributes pattern-matched by
the function. Plain lambdas are not included, e.g. <code>functionArgs (x: ...) = { }</code>.</p>
</dd>
<dt id="builtins-genList">
  <a href="language/builtins.html#builtins-genList"><code>genList <var>generator</var> <var>length</var></code></a>
</dt>
<dd>
<p>Generate list of size <em>length</em>, with each element <em>i</em> equal to the
value returned by <em>generator</em> <code>i</code>. For example,</p>
<pre><code class="language-nix">builtins.genList (x: x * x) 5
</code></pre>
<p>returns the list <code>[ 0 1 4 9 16 ]</code>.</p>
</dd>
<dt id="builtins-genericClosure">
  <a href="language/builtins.html#builtins-genericClosure"><code>genericClosure <var>attrset</var></code></a>
</dt>
<dd>
<p>Take an <em>attrset</em> with values named <code>startSet</code> and <code>operator</code> in order to
return a <em>list of attrsets</em> by starting with the <code>startSet</code>, recursively
applying the <code>operator</code> function to each element. The <em>attrsets</em> in the
<code>startSet</code> and produced by the <code>operator</code> must each contain value named
<code>key</code> which are comparable to each other. The result is produced by
repeatedly calling the operator for each element encountered with a
unique key, terminating when no new elements are produced. For example,</p>
<pre><code>builtins.genericClosure {
  startSet = [ {key = 5;} ];
  operator = item: [{
    key = if (item.key / 2 ) * 2 == item.key
         then item.key / 2
         else 3 * item.key + 1;
  }];
}
</code></pre>
<p>evaluates to</p>
<pre><code>[ { key = 5; } { key = 16; } { key = 8; } { key = 4; } { key = 2; } { key = 1; } ]
</code></pre>
</dd>
<dt id="builtins-getAttr">
  <a href="language/builtins.html#builtins-getAttr"><code>getAttr <var>s</var> <var>set</var></code></a>
</dt>
<dd>
<p><code>getAttr</code> returns the attribute named <em>s</em> from <em>set</em>. Evaluation
aborts if the attribute doesn’t exist. This is a dynamic version of
the <code>.</code> operator, since <em>s</em> is an expression rather than an
identifier.</p>
</dd>
<dt id="builtins-getEnv">
  <a href="language/builtins.html#builtins-getEnv"><code>getEnv <var>s</var></code></a>
</dt>
<dd>
<p><code>getEnv</code> returns the value of the environment variable <em>s</em>, or an
empty string if the variable doesn’t exist. This function should be
used with care, as it can introduce all sorts of nasty environment
dependencies in your Nix expression.</p>
<p><code>getEnv</code> is used in Nix Packages to locate the file
<code>~/.nixpkgs/config.nix</code>, which contains user-local settings for Nix
Packages. (That is, it does a <code>getEnv &quot;HOME&quot;</code> to locate the user’s
home directory.)</p>
</dd>
<dt id="builtins-getFlake">
  <a href="language/builtins.html#builtins-getFlake"><code>getFlake <var>args</var></code></a>
</dt>
<dd>
<p>Fetch a flake from a flake reference, and return its output attributes and some metadata. For example:</p>
<pre><code class="language-nix">(builtins.getFlake &quot;nix/55bc52401966fbffa525c574c14f67b00bc4fb3a&quot;).packages.x86_64-linux.nix
</code></pre>
<p>Unless impure evaluation is allowed (<code>--impure</code>), the flake reference
must be &quot;locked&quot;, e.g. contain a Git revision or content hash. An
example of an unlocked usage is:</p>
<pre><code class="language-nix">(builtins.getFlake &quot;github:edolstra/dwarffs&quot;).rev
</code></pre>
<p>This function is only available if you enable the experimental feature
<code>flakes</code>.</p>
</dd>
<dt id="builtins-groupBy">
  <a href="language/builtins.html#builtins-groupBy"><code>groupBy <var>f</var> <var>list</var></code></a>
</dt>
<dd>
<p>Groups elements of <em>list</em> together by the string returned from the
function <em>f</em> called on each element. It returns an attribute set
where each attribute value contains the elements of <em>list</em> that are
mapped to the same corresponding attribute name returned by <em>f</em>.</p>
<p>For example,</p>
<pre><code class="language-nix">builtins.groupBy (builtins.substring 0 1) [&quot;foo&quot; &quot;bar&quot; &quot;baz&quot;]
</code></pre>
<p>evaluates to</p>
<pre><code class="language-nix">{ b = [ &quot;bar&quot; &quot;baz&quot; ]; f = [ &quot;foo&quot; ]; }
</code></pre>
</dd>
<dt id="builtins-hasAttr">
  <a href="language/builtins.html#builtins-hasAttr"><code>hasAttr <var>s</var> <var>set</var></code></a>
</dt>
<dd>
<p><code>hasAttr</code> returns <code>true</code> if <em>set</em> has an attribute named <em>s</em>, and
<code>false</code> otherwise. This is a dynamic version of the <code>?</code> operator,
since <em>s</em> is an expression rather than an identifier.</p>
</dd>
<dt id="builtins-hashFile">
  <a href="language/builtins.html#builtins-hashFile"><code>hashFile <var>type</var> <var>p</var></code></a>
</dt>
<dd>
<p>Return a base-16 representation of the cryptographic hash of the
file at path <em>p</em>. The hash algorithm specified by <em>type</em> must be one
of <code>&quot;md5&quot;</code>, <code>&quot;sha1&quot;</code>, <code>&quot;sha256&quot;</code> or <code>&quot;sha512&quot;</code>.</p>
</dd>
<dt id="builtins-hashString">
  <a href="language/builtins.html#builtins-hashString"><code>hashString <var>type</var> <var>s</var></code></a>
</dt>
<dd>
<p>Return a base-16 representation of the cryptographic hash of string
<em>s</em>. The hash algorithm specified by <em>type</em> must be one of <code>&quot;md5&quot;</code>,
<code>&quot;sha1&quot;</code>, <code>&quot;sha256&quot;</code> or <code>&quot;sha512&quot;</code>.</p>
</dd>
<dt id="builtins-head">
  <a href="language/builtins.html#builtins-head"><code>head <var>list</var></code></a>
</dt>
<dd>
<p>Return the first element of a list; abort evaluation if the argument
isn’t a list or is an empty list. You can test whether a list is
empty by comparing it with <code>[]</code>.</p>
</dd>
<dt id="builtins-import">
  <a href="language/builtins.html#builtins-import"><code>import <var>path</var></code></a>
</dt>
<dd>
<p>Load, parse and return the Nix expression in the file <em>path</em>. If
<em>path</em> is a directory, the file <code>default.nix</code> in that directory
is loaded. Evaluation aborts if the file doesn’t exist or contains
an incorrect Nix expression. <code>import</code> implements Nix’s module
system: you can put any Nix expression (such as a set or a
function) in a separate file, and use it from Nix expressions in
other files.</p>
<blockquote>
<p><strong>Note</strong></p>
<p>Unlike some languages, <code>import</code> is a regular function in Nix.
Paths using the angle bracket syntax (e.g., <code>import</code> <em>&lt;foo&gt;</em>)
are normal <a href="language/../language/values.html#type-path">path values</a>.</p>
</blockquote>
<p>A Nix expression loaded by <code>import</code> must not contain any <em>free
variables</em> (identifiers that are not defined in the Nix expression
itself and are not built-in). Therefore, it cannot refer to
variables that are in scope at the call site. For instance, if you
have a calling expression</p>
<pre><code class="language-nix">rec {
  x = 123;
  y = import ./foo.nix;
}
</code></pre>
<p>then the following <code>foo.nix</code> will give an error:</p>
<pre><code class="language-nix">x + 456
</code></pre>
<p>since <code>x</code> is not in scope in <code>foo.nix</code>. If you want <code>x</code> to be
available in <code>foo.nix</code>, you should pass it as a function argument:</p>
<pre><code class="language-nix">rec {
  x = 123;
  y = import ./foo.nix x;
}
</code></pre>
<p>and</p>
<pre><code class="language-nix">x: x + 456
</code></pre>
<p>(The function argument doesn’t have to be called <code>x</code> in <code>foo.nix</code>;
any name would work.)</p>
</dd>
<dt id="builtins-intersectAttrs">
  <a href="language/builtins.html#builtins-intersectAttrs"><code>intersectAttrs <var>e1</var> <var>e2</var></code></a>
</dt>
<dd>
<p>Return a set consisting of the attributes in the set <em>e2</em> which have the
same name as some attribute in <em>e1</em>.</p>
<p>Performs in O(<em>n</em> log <em>m</em>) where <em>n</em> is the size of the smaller set and <em>m</em> the larger set's size.</p>
</dd>
<dt id="builtins-isAttrs">
  <a href="language/builtins.html#builtins-isAttrs"><code>isAttrs <var>e</var></code></a>
</dt>
<dd>
<p>Return <code>true</code> if <em>e</em> evaluates to a set, and <code>false</code> otherwise.</p>
</dd>
<dt id="builtins-isBool">
  <a href="language/builtins.html#builtins-isBool"><code>isBool <var>e</var></code></a>
</dt>
<dd>
<p>Return <code>true</code> if <em>e</em> evaluates to a bool, and <code>false</code> otherwise.</p>
</dd>
<dt id="builtins-isFloat">
  <a href="language/builtins.html#builtins-isFloat"><code>isFloat <var>e</var></code></a>
</dt>
<dd>
<p>Return <code>true</code> if <em>e</em> evaluates to a float, and <code>false</code> otherwise.</p>
</dd>
<dt id="builtins-isFunction">
  <a href="language/builtins.html#builtins-isFunction"><code>isFunction <var>e</var></code></a>
</dt>
<dd>
<p>Return <code>true</code> if <em>e</em> evaluates to a function, and <code>false</code> otherwise.</p>
</dd>
<dt id="builtins-isInt">
  <a href="language/builtins.html#builtins-isInt"><code>isInt <var>e</var></code></a>
</dt>
<dd>
<p>Return <code>true</code> if <em>e</em> evaluates to an integer, and <code>false</code> otherwise.</p>
</dd>
<dt id="builtins-isList">
  <a href="language/builtins.html#builtins-isList"><code>isList <var>e</var></code></a>
</dt>
<dd>
<p>Return <code>true</code> if <em>e</em> evaluates to a list, and <code>false</code> otherwise.</p>
</dd>
<dt id="builtins-isNull">
  <a href="language/builtins.html#builtins-isNull"><code>isNull <var>e</var></code></a>
</dt>
<dd>
<p>Return <code>true</code> if <em>e</em> evaluates to <code>null</code>, and <code>false</code> otherwise.</p>
<blockquote>
<p><strong>Warning</strong></p>
<p>This function is <em>deprecated</em>; just write <code>e == null</code> instead.</p>
</blockquote>
</dd>
<dt id="builtins-isPath">
  <a href="language/builtins.html#builtins-isPath"><code>isPath <var>e</var></code></a>
</dt>
<dd>
<p>Return <code>true</code> if <em>e</em> evaluates to a path, and <code>false</code> otherwise.</p>
</dd>
<dt id="builtins-isString">
  <a href="language/builtins.html#builtins-isString"><code>isString <var>e</var></code></a>
</dt>
<dd>
<p>Return <code>true</code> if <em>e</em> evaluates to a string, and <code>false</code> otherwise.</p>
</dd>
<dt id="builtins-length">
  <a href="language/builtins.html#builtins-length"><code>length <var>e</var></code></a>
</dt>
<dd>
<p>Return the length of the list <em>e</em>.</p>
</dd>
<dt id="builtins-lessThan">
  <a href="language/builtins.html#builtins-lessThan"><code>lessThan <var>e1</var> <var>e2</var></code></a>
</dt>
<dd>
<p>Return <code>true</code> if the number <em>e1</em> is less than the number <em>e2</em>, and
<code>false</code> otherwise. Evaluation aborts if either <em>e1</em> or <em>e2</em> does not
evaluate to a number.</p>
</dd>
<dt id="builtins-listToAttrs">
  <a href="language/builtins.html#builtins-listToAttrs"><code>listToAttrs <var>e</var></code></a>
</dt>
<dd>
<p>Construct a set from a list specifying the names and values of each
attribute. Each element of the list should be a set consisting of a
string-valued attribute <code>name</code> specifying the name of the attribute,
and an attribute <code>value</code> specifying its value.</p>
<p>In case of duplicate occurrences of the same name, the first
takes precedence.</p>
<p>Example:</p>
<pre><code class="language-nix">builtins.listToAttrs
  [ { name = &quot;foo&quot;; value = 123; }
    { name = &quot;bar&quot;; value = 456; }
    { name = &quot;bar&quot;; value = 420; }
  ]
</code></pre>
<p>evaluates to</p>
<pre><code class="language-nix">{ foo = 123; bar = 456; }
</code></pre>
</dd>
<dt id="builtins-map">
  <a href="language/builtins.html#builtins-map"><code>map <var>f</var> <var>list</var></code></a>
</dt>
<dd>
<p>Apply the function <em>f</em> to each element in the list <em>list</em>. For
example,</p>
<pre><code class="language-nix">map (x: &quot;foo&quot; + x) [ &quot;bar&quot; &quot;bla&quot; &quot;abc&quot; ]
</code></pre>
<p>evaluates to <code>[ &quot;foobar&quot; &quot;foobla&quot; &quot;fooabc&quot; ]</code>.</p>
</dd>
<dt id="builtins-mapAttrs">
  <a href="language/builtins.html#builtins-mapAttrs"><code>mapAttrs <var>f</var> <var>attrset</var></code></a>
</dt>
<dd>
<p>Apply function <em>f</em> to every element of <em>attrset</em>. For example,</p>
<pre><code class="language-nix">builtins.mapAttrs (name: value: value * 10) { a = 1; b = 2; }
</code></pre>
<p>evaluates to <code>{ a = 10; b = 20; }</code>.</p>
</dd>
<dt id="builtins-match">
  <a href="language/builtins.html#builtins-match"><code>match <var>regex</var> <var>str</var></code></a>
</dt>
<dd>
<p>Returns a list if the <a href="http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap09.html#tag_09_04">extended POSIX regular
expression</a>
<em>regex</em> matches <em>str</em> precisely, otherwise returns <code>null</code>. Each item
in the list is a regex group.</p>
<pre><code class="language-nix">builtins.match &quot;ab&quot; &quot;abc&quot;
</code></pre>
<p>Evaluates to <code>null</code>.</p>
<pre><code class="language-nix">builtins.match &quot;abc&quot; &quot;abc&quot;
</code></pre>
<p>Evaluates to <code>[ ]</code>.</p>
<pre><code class="language-nix">builtins.match &quot;a(b)(c)&quot; &quot;abc&quot;
</code></pre>
<p>Evaluates to <code>[ &quot;b&quot; &quot;c&quot; ]</code>.</p>
<pre><code class="language-nix">builtins.match &quot;[[:space:]]+([[:upper:]]+)[[:space:]]+&quot; &quot;  FOO   &quot;
</code></pre>
<p>Evaluates to <code>[ &quot;FOO&quot; ]</code>.</p>
</dd>
<dt id="builtins-mul">
  <a href="language/builtins.html#builtins-mul"><code>mul <var>e1</var> <var>e2</var></code></a>
</dt>
<dd>
<p>Return the product of the numbers <em>e1</em> and <em>e2</em>.</p>
</dd>
<dt id="builtins-parseDrvName">
  <a href="language/builtins.html#builtins-parseDrvName"><code>parseDrvName <var>s</var></code></a>
</dt>
<dd>
<p>Split the string <em>s</em> into a package name and version. The package
name is everything up to but not including the first dash not followed
by a letter, and the version is everything following that dash. The
result is returned in a set <code>{ name, version }</code>. Thus,
<code>builtins.parseDrvName &quot;nix-0.12pre12876&quot;</code> returns <code>{ name = &quot;nix&quot;; version = &quot;0.12pre12876&quot;; }</code>.</p>
</dd>
<dt id="builtins-partition">
  <a href="language/builtins.html#builtins-partition"><code>partition <var>pred</var> <var>list</var></code></a>
</dt>
<dd>
<p>Given a predicate function <em>pred</em>, this function returns an
attrset containing a list named <code>right</code>, containing the elements
in <em>list</em> for which <em>pred</em> returned <code>true</code>, and a list named
<code>wrong</code>, containing the elements for which it returned
<code>false</code>. For example,</p>
<pre><code class="language-nix">builtins.partition (x: x &gt; 10) [1 23 9 3 42]
</code></pre>
<p>evaluates to</p>
<pre><code class="language-nix">{ right = [ 23 42 ]; wrong = [ 1 9 3 ]; }
</code></pre>
</dd>
<dt id="builtins-path">
  <a href="language/builtins.html#builtins-path"><code>path <var>args</var></code></a>
</dt>
<dd>
<p>An enrichment of the built-in path type, based on the attributes
present in <em>args</em>. All are optional except <code>path</code>:</p>
<ul>
<li>
<p>path<br />
The underlying path.</p>
</li>
<li>
<p>name<br />
The name of the path when added to the store. This can used to
reference paths that have nix-illegal characters in their names,
like <code>@</code>.</p>
</li>
<li>
<p>filter<br />
A function of the type expected by <code>builtins.filterSource</code>,
with the same semantics.</p>
</li>
<li>
<p>recursive<br />
When <code>false</code>, when <code>path</code> is added to the store it is with a
flat hash, rather than a hash of the NAR serialization of the
file. Thus, <code>path</code> must refer to a regular file, not a
directory. This allows similar behavior to <code>fetchurl</code>. Defaults
to <code>true</code>.</p>
</li>
<li>
<p>sha256<br />
When provided, this is the expected hash of the file at the
path. Evaluation will fail if the hash is incorrect, and
providing a hash allows <code>builtins.path</code> to be used even when the
<code>pure-eval</code> nix config option is on.</p>
</li>
</ul>
</dd>
<dt id="builtins-pathExists">
  <a href="language/builtins.html#builtins-pathExists"><code>pathExists <var>path</var></code></a>
</dt>
<dd>
<p>Return <code>true</code> if the path <em>path</em> exists at evaluation time, and
<code>false</code> otherwise.</p>
</dd>
<dt id="builtins-placeholder">
  <a href="language/builtins.html#builtins-placeholder"><code>placeholder <var>output</var></code></a>
</dt>
<dd>
<p>Return a placeholder string for the specified <em>output</em> that will be
substituted by the corresponding output path at build time. Typical
outputs would be <code>&quot;out&quot;</code>, <code>&quot;bin&quot;</code> or <code>&quot;dev&quot;</code>.</p>
</dd>
<dt id="builtins-readDir">
  <a href="language/builtins.html#builtins-readDir"><code>readDir <var>path</var></code></a>
</dt>
<dd>
<p>Return the contents of the directory <em>path</em> as a set mapping
directory entries to the corresponding file type. For instance, if
directory <code>A</code> contains a regular file <code>B</code> and another directory
<code>C</code>, then <code>builtins.readDir ./A</code> will return the set</p>
<pre><code class="language-nix">{ B = &quot;regular&quot;; C = &quot;directory&quot;; }
</code></pre>
<p>The possible values for the file type are <code>&quot;regular&quot;</code>,
<code>&quot;directory&quot;</code>, <code>&quot;symlink&quot;</code> and <code>&quot;unknown&quot;</code>.</p>
</dd>
<dt id="builtins-readFile">
  <a href="language/builtins.html#builtins-readFile"><code>readFile <var>path</var></code></a>
</dt>
<dd>
<p>Return the contents of the file <em>path</em> as a string.</p>
</dd>
<dt id="builtins-removeAttrs">
  <a href="language/builtins.html#builtins-removeAttrs"><code>removeAttrs <var>set</var> <var>list</var></code></a>
</dt>
<dd>
<p>Remove the attributes listed in <em>list</em> from <em>set</em>. The attributes
don’t have to exist in <em>set</em>. For instance,</p>
<pre><code class="language-nix">removeAttrs { x = 1; y = 2; z = 3; } [ &quot;a&quot; &quot;x&quot; &quot;z&quot; ]
</code></pre>
<p>evaluates to <code>{ y = 2; }</code>.</p>
</dd>
<dt id="builtins-replaceStrings">
  <a href="language/builtins.html#builtins-replaceStrings"><code>replaceStrings <var>from</var> <var>to</var> <var>s</var></code></a>
</dt>
<dd>
<p>Given string <em>s</em>, replace every occurrence of the strings in <em>from</em>
with the corresponding string in <em>to</em>. For example,</p>
<pre><code class="language-nix">builtins.replaceStrings [&quot;oo&quot; &quot;a&quot;] [&quot;a&quot; &quot;i&quot;] &quot;foobar&quot;
</code></pre>
<p>evaluates to <code>&quot;fabir&quot;</code>.</p>
</dd>
<dt id="builtins-seq">
  <a href="language/builtins.html#builtins-seq"><code>seq <var>e1</var> <var>e2</var></code></a>
</dt>
<dd>
<p>Evaluate <em>e1</em>, then evaluate and return <em>e2</em>. This ensures that a
computation is strict in the value of <em>e1</em>.</p>
</dd>
<dt id="builtins-sort">
  <a href="language/builtins.html#builtins-sort"><code>sort <var>comparator</var> <var>list</var></code></a>
</dt>
<dd>
<p>Return <em>list</em> in sorted order. It repeatedly calls the function
<em>comparator</em> with two elements. The comparator should return <code>true</code>
if the first element is less than the second, and <code>false</code> otherwise.
For example,</p>
<pre><code class="language-nix">builtins.sort builtins.lessThan [ 483 249 526 147 42 77 ]
</code></pre>
<p>produces the list <code>[ 42 77 147 249 483 526 ]</code>.</p>
<p>This is a stable sort: it preserves the relative order of elements
deemed equal by the comparator.</p>
</dd>
<dt id="builtins-split">
  <a href="language/builtins.html#builtins-split"><code>split <var>regex</var> <var>str</var></code></a>
</dt>
<dd>
<p>Returns a list composed of non matched strings interleaved with the
lists of the <a href="http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap09.html#tag_09_04">extended POSIX regular
expression</a>
<em>regex</em> matches of <em>str</em>. Each item in the lists of matched
sequences is a regex group.</p>
<pre><code class="language-nix">builtins.split &quot;(a)b&quot; &quot;abc&quot;
</code></pre>
<p>Evaluates to <code>[ &quot;&quot; [ &quot;a&quot; ] &quot;c&quot; ]</code>.</p>
<pre><code class="language-nix">builtins.split &quot;([ac])&quot; &quot;abc&quot;
</code></pre>
<p>Evaluates to <code>[ &quot;&quot; [ &quot;a&quot; ] &quot;b&quot; [ &quot;c&quot; ] &quot;&quot; ]</code>.</p>
<pre><code class="language-nix">builtins.split &quot;(a)|(c)&quot; &quot;abc&quot;
</code></pre>
<p>Evaluates to <code>[ &quot;&quot; [ &quot;a&quot; null ] &quot;b&quot; [ null &quot;c&quot; ] &quot;&quot; ]</code>.</p>
<pre><code class="language-nix">builtins.split &quot;([[:upper:]]+)&quot; &quot; FOO &quot;
</code></pre>
<p>Evaluates to <code>[ &quot; &quot; [ &quot;FOO&quot; ] &quot; &quot; ]</code>.</p>
</dd>
<dt id="builtins-splitVersion">
  <a href="language/builtins.html#builtins-splitVersion"><code>splitVersion <var>s</var></code></a>
</dt>
<dd>
<p>Split a string representing a version into its components, by the
same version splitting logic underlying the version comparison in
<a href="language/../command-ref/nix-env.html#operation---upgrade"><code>nix-env -u</code></a>.</p>
</dd>
<dt id="builtins-storePath">
  <a href="language/builtins.html#builtins-storePath"><code>storePath <var>path</var></code></a>
</dt>
<dd>
<p>This function allows you to define a dependency on an already
existing store path. For example, the derivation attribute <code>src = builtins.storePath /nix/store/f1d18v1y…-source</code> causes the
derivation to depend on the specified path, which must exist or
be substitutable. Note that this differs from a plain path
(e.g. <code>src = /nix/store/f1d18v1y…-source</code>) in that the latter
causes the path to be <em>copied</em> again to the Nix store, resulting
in a new path (e.g. <code>/nix/store/ld01dnzc…-source-source</code>).</p>
<p>This function is not available in pure evaluation mode.</p>
</dd>
<dt id="builtins-stringLength">
  <a href="language/builtins.html#builtins-stringLength"><code>stringLength <var>e</var></code></a>
</dt>
<dd>
<p>Return the length of the string <em>e</em>. If <em>e</em> is not a string,
evaluation is aborted.</p>
</dd>
<dt id="builtins-sub">
  <a href="language/builtins.html#builtins-sub"><code>sub <var>e1</var> <var>e2</var></code></a>
</dt>
<dd>
<p>Return the difference between the numbers <em>e1</em> and <em>e2</em>.</p>
</dd>
<dt id="builtins-substring">
  <a href="language/builtins.html#builtins-substring"><code>substring <var>start</var> <var>len</var> <var>s</var></code></a>
</dt>
<dd>
<p>Return the substring of <em>s</em> from character position <em>start</em>
(zero-based) up to but not including <em>start + len</em>. If <em>start</em> is
greater than the length of the string, an empty string is returned,
and if <em>start + len</em> lies beyond the end of the string, only the
substring up to the end of the string is returned. <em>start</em> must be
non-negative. For example,</p>
<pre><code class="language-nix">builtins.substring 0 3 &quot;nixos&quot;
</code></pre>
<p>evaluates to <code>&quot;nix&quot;</code>.</p>
</dd>
<dt id="builtins-tail">
  <a href="language/builtins.html#builtins-tail"><code>tail <var>list</var></code></a>
</dt>
<dd>
<p>Return the second to last elements of a list; abort evaluation if
the argument isn’t a list or is an empty list.</p>
<blockquote>
<p><strong>Warning</strong></p>
<p>This function should generally be avoided since it's inefficient:
unlike Haskell's <code>tail</code>, it takes O(n) time, so recursing over a
list by repeatedly calling <code>tail</code> takes O(n^2) time.</p>
</blockquote>
</dd>
<dt id="builtins-throw">
  <a href="language/builtins.html#builtins-throw"><code>throw <var>s</var></code></a>
</dt>
<dd>
<p>Throw an error message <em>s</em>. This usually aborts Nix expression
evaluation, but in <code>nix-env -qa</code> and other commands that try to
evaluate a set of derivations to get information about those
derivations, a derivation that throws an error is silently skipped
(which is not the case for <code>abort</code>).</p>
</dd>
<dt id="builtins-toFile">
  <a href="language/builtins.html#builtins-toFile"><code>toFile <var>name</var> <var>s</var></code></a>
</dt>
<dd>
<p>Store the string <em>s</em> in a file in the Nix store and return its
path.  The file has suffix <em>name</em>. This file can be used as an
input to derivations. One application is to write builders
“inline”. For instance, the following Nix expression combines the
Nix expression for GNU Hello and its build script into one file:</p>
<pre><code class="language-nix">{ stdenv, fetchurl, perl }:

stdenv.mkDerivation {
  name = &quot;hello-2.1.1&quot;;

  builder = builtins.toFile &quot;builder.sh&quot; &quot;
    source $stdenv/setup

    PATH=$perl/bin:$PATH

    tar xvfz $src
    cd hello-*
    ./configure --prefix=$out
    make
    make install
  &quot;;

  src = fetchurl {
    url = &quot;http://ftp.nluug.nl/pub/gnu/hello/hello-2.1.1.tar.gz&quot;;
    sha256 = &quot;1md7jsfd8pa45z73bz1kszpp01yw6x5ljkjk2hx7wl800any6465&quot;;
  };
  inherit perl;
}
</code></pre>
<p>It is even possible for one file to refer to another, e.g.,</p>
<pre><code class="language-nix">builder = let
  configFile = builtins.toFile &quot;foo.conf&quot; &quot;
    # This is some dummy configuration file.
    ...
  &quot;;
in builtins.toFile &quot;builder.sh&quot; &quot;
  source $stdenv/setup
  ...
  cp ${configFile} $out/etc/foo.conf
&quot;;
</code></pre>
<p>Note that <code>${configFile}</code> is a
<a href="language/../language/values.html#type-string">string interpolation</a>, so the result of the
expression <code>configFile</code>
(i.e., a path like <code>/nix/store/m7p7jfny445k...-foo.conf</code>) will be
spliced into the resulting string.</p>
<p>It is however <em>not</em> allowed to have files mutually referring to each
other, like so:</p>
<pre><code class="language-nix">let
  foo = builtins.toFile &quot;foo&quot; &quot;...${bar}...&quot;;
  bar = builtins.toFile &quot;bar&quot; &quot;...${foo}...&quot;;
in foo
</code></pre>
<p>This is not allowed because it would cause a cyclic dependency in
the computation of the cryptographic hashes for <code>foo</code> and <code>bar</code>.</p>
<p>It is also not possible to reference the result of a derivation. If
you are using Nixpkgs, the <code>writeTextFile</code> function is able to do
that.</p>
</dd>
<dt id="builtins-toJSON">
  <a href="language/builtins.html#builtins-toJSON"><code>toJSON <var>e</var></code></a>
</dt>
<dd>
<p>Return a string containing a JSON representation of <em>e</em>. Strings,
integers, floats, booleans, nulls and lists are mapped to their JSON
equivalents. Sets (except derivations) are represented as objects.
Derivations are translated to a JSON string containing the
derivation’s output path. Paths are copied to the store and
represented as a JSON string of the resulting store path.</p>
</dd>
<dt id="builtins-toPath">
  <a href="language/builtins.html#builtins-toPath"><code>toPath <var>s</var></code></a>
</dt>
<dd>
<p><strong>DEPRECATED.</strong> Use <code>/. + &quot;/path&quot;</code> to convert a string into an absolute
path. For relative paths, use <code>./. + &quot;/path&quot;</code>.</p>
</dd>
<dt id="builtins-toString">
  <a href="language/builtins.html#builtins-toString"><code>toString <var>e</var></code></a>
</dt>
<dd>
<p>Convert the expression <em>e</em> to a string. <em>e</em> can be:</p>
<ul>
<li>
<p>A string (in which case the string is returned unmodified).</p>
</li>
<li>
<p>A path (e.g., <code>toString /foo/bar</code> yields <code>&quot;/foo/bar&quot;</code>.</p>
</li>
<li>
<p>A set containing <code>{ __toString = self: ...; }</code> or <code>{ outPath = ...; }</code>.</p>
</li>
<li>
<p>An integer.</p>
</li>
<li>
<p>A list, in which case the string representations of its elements
are joined with spaces.</p>
</li>
<li>
<p>A Boolean (<code>false</code> yields <code>&quot;&quot;</code>, <code>true</code> yields <code>&quot;1&quot;</code>).</p>
</li>
<li>
<p><code>null</code>, which yields the empty string.</p>
</li>
</ul>
</dd>
<dt id="builtins-toXML">
  <a href="language/builtins.html#builtins-toXML"><code>toXML <var>e</var></code></a>
</dt>
<dd>
<p>Return a string containing an XML representation of <em>e</em>. The main
application for <code>toXML</code> is to communicate information with the
builder in a more structured format than plain environment
variables.</p>
<p>Here is an example where this is the case:</p>
<pre><code class="language-nix">{ stdenv, fetchurl, libxslt, jira, uberwiki }:

stdenv.mkDerivation (rec {
  name = &quot;web-server&quot;;

  buildInputs = [ libxslt ];

  builder = builtins.toFile &quot;builder.sh&quot; &quot;
    source $stdenv/setup
    mkdir $out
    echo &quot;$servlets&quot; | xsltproc ${stylesheet} - &gt; $out/server-conf.xml ①
  &quot;;

  stylesheet = builtins.toFile &quot;stylesheet.xsl&quot; ②
   &quot;&lt;?xml version='1.0' encoding='UTF-8'?&gt;
    &lt;xsl:stylesheet xmlns:xsl='http://www.w3.org/1999/XSL/Transform' version='1.0'&gt;
      &lt;xsl:template match='/'&gt;
        &lt;Configure&gt;
          &lt;xsl:for-each select='/expr/list/attrs'&gt;
            &lt;Call name='addWebApplication'&gt;
              &lt;Arg&gt;&lt;xsl:value-of select=\&quot;attr[@name = 'path']/string/@value\&quot; /&gt;&lt;/Arg&gt;
              &lt;Arg&gt;&lt;xsl:value-of select=\&quot;attr[@name = 'war']/path/@value\&quot; /&gt;&lt;/Arg&gt;
            &lt;/Call&gt;
          &lt;/xsl:for-each&gt;
        &lt;/Configure&gt;
      &lt;/xsl:template&gt;
    &lt;/xsl:stylesheet&gt;
  &quot;;

  servlets = builtins.toXML [ ③
    { path = &quot;/bugtracker&quot;; war = jira + &quot;/lib/atlassian-jira.war&quot;; }
    { path = &quot;/wiki&quot;; war = uberwiki + &quot;/uberwiki.war&quot;; }
  ];
})
</code></pre>
<p>The builder is supposed to generate the configuration file for a
<a href="http://jetty.mortbay.org/">Jetty servlet container</a>. A servlet
container contains a number of servlets (<code>*.war</code> files) each
exported under a specific URI prefix. So the servlet configuration
is a list of sets containing the <code>path</code> and <code>war</code> of the servlet
(①). This kind of information is difficult to communicate with the
normal method of passing information through an environment
variable, which just concatenates everything together into a
string (which might just work in this case, but wouldn’t work if
fields are optional or contain lists themselves). Instead the Nix
expression is converted to an XML representation with <code>toXML</code>,
which is unambiguous and can easily be processed with the
appropriate tools. For instance, in the example an XSLT stylesheet
(at point ②) is applied to it (at point ①) to generate the XML
configuration file for the Jetty server. The XML representation
produced at point ③ by <code>toXML</code> is as follows:</p>
<pre><code class="language-xml">&lt;?xml version='1.0' encoding='utf-8'?&gt;
&lt;expr&gt;
  &lt;list&gt;
    &lt;attrs&gt;
      &lt;attr name=&quot;path&quot;&gt;
        &lt;string value=&quot;/bugtracker&quot; /&gt;
      &lt;/attr&gt;
      &lt;attr name=&quot;war&quot;&gt;
        &lt;path value=&quot;/nix/store/d1jh9pasa7k2...-jira/lib/atlassian-jira.war&quot; /&gt;
      &lt;/attr&gt;
    &lt;/attrs&gt;
    &lt;attrs&gt;
      &lt;attr name=&quot;path&quot;&gt;
        &lt;string value=&quot;/wiki&quot; /&gt;
      &lt;/attr&gt;
      &lt;attr name=&quot;war&quot;&gt;
        &lt;path value=&quot;/nix/store/y6423b1yi4sx...-uberwiki/uberwiki.war&quot; /&gt;
      &lt;/attr&gt;
    &lt;/attrs&gt;
  &lt;/list&gt;
&lt;/expr&gt;
</code></pre>
<p>Note that we used the <code>toFile</code> built-in to write the builder and
the stylesheet “inline” in the Nix expression. The path of the
stylesheet is spliced into the builder using the syntax <code>xsltproc ${stylesheet}</code>.</p>
</dd>
<dt id="builtins-trace">
  <a href="language/builtins.html#builtins-trace"><code>trace <var>e1</var> <var>e2</var></code></a>
</dt>
<dd>
<p>Evaluate <em>e1</em> and print its abstract syntax representation on
standard error. Then return <em>e2</em>. This function is useful for
debugging.</p>
</dd>
<dt id="builtins-traceVerbose">
  <a href="language/builtins.html#builtins-traceVerbose"><code>traceVerbose <var>e1</var> <var>e2</var></code></a>
</dt>
<dd>
<p>Evaluate <em>e1</em> and print its abstract syntax representation on standard
error if <code>--trace-verbose</code> is enabled. Then return <em>e2</em>. This function
is useful for debugging.</p>
</dd>
<dt id="builtins-tryEval">
  <a href="language/builtins.html#builtins-tryEval"><code>tryEval <var>e</var></code></a>
</dt>
<dd>
<p>Try to shallowly evaluate <em>e</em>. Return a set containing the
attributes <code>success</code> (<code>true</code> if <em>e</em> evaluated successfully,
<code>false</code> if an error was thrown) and <code>value</code>, equalling <em>e</em> if
successful and <code>false</code> otherwise. <code>tryEval</code> will only prevent
errors created by <code>throw</code> or <code>assert</code> from being thrown.
Errors <code>tryEval</code> will not catch are for example those created
by <code>abort</code> and type errors generated by builtins. Also note that
this doesn't evaluate <em>e</em> deeply, so <code>let e = { x = throw &quot;&quot;; }; in (builtins.tryEval e).success</code> will be <code>true</code>. Using
<code>builtins.deepSeq</code> one can get the expected result:
<code>let e = { x = throw &quot;&quot;; }; in (builtins.tryEval (builtins.deepSeq e e)).success</code> will be
<code>false</code>.</p>
</dd>
<dt id="builtins-typeOf">
  <a href="language/builtins.html#builtins-typeOf"><code>typeOf <var>e</var></code></a>
</dt>
<dd>
<p>Return a string representing the type of the value <em>e</em>, namely
<code>&quot;int&quot;</code>, <code>&quot;bool&quot;</code>, <code>&quot;string&quot;</code>, <code>&quot;path&quot;</code>, <code>&quot;null&quot;</code>, <code>&quot;set&quot;</code>,
<code>&quot;list&quot;</code>, <code>&quot;lambda&quot;</code> or <code>&quot;float&quot;</code>.</p>
</dd>
<dt id="builtins-zipAttrsWith">
  <a href="language/builtins.html#builtins-zipAttrsWith"><code>zipAttrsWith <var>f</var> <var>list</var></code></a>
</dt>
<dd>
<p>Transpose a list of attribute sets into an attribute set of lists,
then apply <code>mapAttrs</code>.</p>
<p><code>f</code> receives two arguments: the attribute name and a non-empty
list of all values encountered for that attribute name.</p>
<p>The result is an attribute set where the attribute names are the
union of the attribute names in each element of <code>list</code>. The attribute
values are the return values of <code>f</code>.</p>
<pre><code class="language-nix">builtins.zipAttrsWith
  (name: values: { inherit name values; })
  [ { a = &quot;x&quot;; } { a = &quot;y&quot;; b = &quot;z&quot;; } ]
</code></pre>
<p>evaluates to</p>
<pre><code>{
  a = { name = &quot;a&quot;; values = [ &quot;x&quot; &quot;y&quot; ]; };
  b = { name = &quot;b&quot;; values = [ &quot;z&quot; ]; };
}
</code></pre>
</dd>
</dl>
<div style="break-before: page; page-break-before: always;"></div><div style="break-before: page; page-break-before: always;"></div><h1 id="remote-builds"><a class="header" href="#remote-builds">Remote Builds</a></h1>
<p>Nix supports remote builds, where a local Nix installation can forward
Nix builds to other machines. This allows multiple builds to be
performed in parallel and allows Nix to perform multi-platform builds in
a semi-transparent way. For instance, if you perform a build for a
<code>x86_64-darwin</code> on an <code>i686-linux</code> machine, Nix can automatically
forward the build to a <code>x86_64-darwin</code> machine, if available.</p>
<p>To forward a build to a remote machine, it’s required that the remote
machine is accessible via SSH and that it has Nix installed. You can
test whether connecting to the remote Nix instance works, e.g.</p>
<pre><code class="language-console">$ nix store ping --store ssh://mac
</code></pre>
<p>will try to connect to the machine named <code>mac</code>. It is possible to
specify an SSH identity file as part of the remote store URI, e.g.</p>
<pre><code class="language-console">$ nix store ping --store ssh://mac?ssh-key=/home/alice/my-key
</code></pre>
<p>Since builds should be non-interactive, the key should not have a
passphrase. Alternatively, you can load identities ahead of time into
<code>ssh-agent</code> or <code>gpg-agent</code>.</p>
<p>If you get the error</p>
<pre><code class="language-console">bash: nix-store: command not found
error: cannot connect to 'mac'
</code></pre>
<p>then you need to ensure that the <code>PATH</code> of non-interactive login shells
contains Nix.</p>
<blockquote>
<p><strong>Warning</strong></p>
<p>If you are building via the Nix daemon, it is the Nix daemon user
account (that is, <code>root</code>) that should have SSH access to the remote
machine. If you can’t or don’t want to configure <code>root</code> to be able to
access to remote machine, you can use a private Nix store instead by
passing e.g. <code>--store ~/my-nix</code>.</p>
</blockquote>
<p>The list of remote machines can be specified on the command line or in
the Nix configuration file. The former is convenient for testing. For
example, the following command allows you to build a derivation for
<code>x86_64-darwin</code> on a Linux machine:</p>
<pre><code class="language-console">$ uname
Linux

$ nix build --impure \
  --expr '(with import &lt;nixpkgs&gt; { system = &quot;x86_64-darwin&quot;; }; runCommand &quot;foo&quot; {} &quot;uname &gt; $out&quot;)' \
  --builders 'ssh://mac x86_64-darwin'
[1/0/1 built, 0.0 MiB DL] building foo on ssh://mac

$ cat ./result
Darwin
</code></pre>
<p>It is possible to specify multiple builders separated by a semicolon or
a newline, e.g.</p>
<pre><code class="language-console">  --builders 'ssh://mac x86_64-darwin ; ssh://beastie x86_64-freebsd'
</code></pre>
<p>Each machine specification consists of the following elements, separated
by spaces. Only the first element is required. To leave a field at its
default, set it to <code>-</code>.</p>
<ol>
<li>
<p>The URI of the remote store in the format
<code>ssh://[username@]hostname</code>, e.g. <code>ssh://nix@mac</code> or <code>ssh://mac</code>.
For backward compatibility, <code>ssh://</code> may be omitted. The hostname
may be an alias defined in your <code>~/.ssh/config</code>.</p>
</li>
<li>
<p>A comma-separated list of Nix platform type identifiers, such as
<code>x86_64-darwin</code>. It is possible for a machine to support multiple
platform types, e.g., <code>i686-linux,x86_64-linux</code>. If omitted, this
defaults to the local platform type.</p>
</li>
<li>
<p>The SSH identity file to be used to log in to the remote machine. If
omitted, SSH will use its regular identities.</p>
</li>
<li>
<p>The maximum number of builds that Nix will execute in parallel on
the machine. Typically this should be equal to the number of CPU
cores. For instance, the machine <code>itchy</code> in the example will execute
up to 8 builds in parallel.</p>
</li>
<li>
<p>The “speed factor”, indicating the relative speed of the machine. If
there are multiple machines of the right type, Nix will prefer the
fastest, taking load into account.</p>
</li>
<li>
<p>A comma-separated list of <em>supported features</em>. If a derivation has
the <code>requiredSystemFeatures</code> attribute, then Nix will only perform
the derivation on a machine that has the specified features. For
instance, the attribute</p>
<pre><code class="language-nix">requiredSystemFeatures = [ &quot;kvm&quot; ];
</code></pre>
<p>will cause the build to be performed on a machine that has the <code>kvm</code>
feature.</p>
</li>
<li>
<p>A comma-separated list of <em>mandatory features</em>. A machine will only
be used to build a derivation if all of the machine’s mandatory
features appear in the derivation’s <code>requiredSystemFeatures</code>
attribute.</p>
</li>
<li>
<p>The (base64-encoded) public host key of the remote machine. If omitted, SSH
will use its regular known-hosts file. Specifically, the field is calculated
via <code>base64 -w0 /etc/ssh/ssh_host_ed25519_key.pub</code>.</p>
</li>
</ol>
<p>For example, the machine specification</p>
<pre><code>nix@scratchy.labs.cs.uu.nl  i686-linux      /home/nix/.ssh/id_scratchy_auto        8 1 kvm
nix@itchy.labs.cs.uu.nl     i686-linux      /home/nix/.ssh/id_scratchy_auto        8 2
nix@poochie.labs.cs.uu.nl   i686-linux      /home/nix/.ssh/id_scratchy_auto        1 2 kvm benchmark
</code></pre>
<p>specifies several machines that can perform <code>i686-linux</code> builds.
However, <code>poochie</code> will only do builds that have the attribute</p>
<pre><code class="language-nix">requiredSystemFeatures = [ &quot;benchmark&quot; ];
</code></pre>
<p>or</p>
<pre><code class="language-nix">requiredSystemFeatures = [ &quot;benchmark&quot; &quot;kvm&quot; ];
</code></pre>
<p><code>itchy</code> cannot do builds that require <code>kvm</code>, but <code>scratchy</code> does support
such builds. For regular builds, <code>itchy</code> will be preferred over
<code>scratchy</code> because it has a higher speed factor.</p>
<p>Remote builders can also be configured in <code>nix.conf</code>, e.g.</p>
<pre><code>builders = ssh://mac x86_64-darwin ; ssh://beastie x86_64-freebsd
</code></pre>
<p>Finally, remote builders can be configured in a separate configuration
file included in <code>builders</code> via the syntax <code>@file</code>. For example,</p>
<pre><code>builders = @/etc/nix/machines
</code></pre>
<p>causes the list of machines in <code>/etc/nix/machines</code> to be included. (This
is the default.)</p>
<p>If you want the builders to use caches, you likely want to set the
option <code>builders-use-substitutes</code> in your local <code>nix.conf</code>.</p>
<p>To build only on remote builders and disable building on the local
machine, you can use the option <code>--max-jobs 0</code>.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="tuning-cores-and-jobs"><a class="header" href="#tuning-cores-and-jobs">Tuning Cores and Jobs</a></h1>
<p>Nix has two relevant settings with regards to how your CPU cores will
be utilized: <code>cores</code> and <code>max-jobs</code>. This chapter will talk about what
they are, how they interact, and their configuration trade-offs.</p>
<ul>
<li>
<p><code>max-jobs</code><br />
Dictates how many separate derivations will be built at the same
time. If you set this to zero, the local machine will do no
builds.  Nix will still substitute from binary caches, and build
remotely if remote builders are configured.</p>
</li>
<li>
<p><code>cores</code><br />
Suggests how many cores each derivation should use. Similar to
<code>make -j</code>.</p>
</li>
</ul>
<p>The <code>cores</code> setting determines the value of
<code>NIX_BUILD_CORES</code>. <code>NIX_BUILD_CORES</code> is equal to <code>cores</code>, unless
<code>cores</code> equals <code>0</code>, in which case <code>NIX_BUILD_CORES</code> will be the total
number of cores in the system.</p>
<p>The maximum number of consumed cores is a simple multiplication,
<code>max-jobs</code> * <code>NIX_BUILD_CORES</code>.</p>
<p>The balance on how to set these two independent variables depends upon
each builder's workload and hardware. Here are a few example scenarios
on a machine with 24 cores:</p>
<div class="table-wrapper"><table><thead><tr><th><code>max-jobs</code></th><th><code>cores</code></th><th><code>NIX_BUILD_CORES</code></th><th>Maximum Processes</th><th>Result</th></tr></thead><tbody>
<tr><td>1</td><td>24</td><td>24</td><td>24</td><td>One derivation will be built at a time, each one can use 24 cores. Undersold if a job can’t use 24 cores.</td></tr>
<tr><td>4</td><td>6</td><td>6</td><td>24</td><td>Four derivations will be built at once, each given access to six cores.</td></tr>
<tr><td>12</td><td>6</td><td>6</td><td>72</td><td>12 derivations will be built at once, each given access to six cores. This configuration is over-sold. If all 12 derivations being built simultaneously try to use all six cores, the machine's performance will be degraded due to extensive context switching between the 12 builds.</td></tr>
<tr><td>24</td><td>1</td><td>1</td><td>24</td><td>24 derivations can build at the same time, each using a single core. Never oversold, but derivations which require many cores will be very slow to compile.</td></tr>
<tr><td>24</td><td>0</td><td>24</td><td>576</td><td>24 derivations can build at the same time, each using all the available cores of the machine. Very likely to be oversold, and very likely to suffer context switches.</td></tr>
</tbody></table>
</div>
<p>It is up to the derivations' build script to respect host's requested
cores-per-build by following the value of the <code>NIX_BUILD_CORES</code>
environment variable.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="verifying-build-reproducibility"><a class="header" href="#verifying-build-reproducibility">Verifying Build Reproducibility</a></h1>
<p>You can use Nix's <code>diff-hook</code> setting to compare build results. Note
that this hook is only executed if the results differ; it is not used
for determining if the results are the same.</p>
<p>For purposes of demonstration, we'll use the following Nix file,
<code>deterministic.nix</code> for testing:</p>
<pre><code class="language-nix">let
  inherit (import &lt;nixpkgs&gt; {}) runCommand;
in {
  stable = runCommand &quot;stable&quot; {} ''
    touch $out
  '';

  unstable = runCommand &quot;unstable&quot; {} ''
    echo $RANDOM &gt; $out
  '';
}
</code></pre>
<p>Additionally, <code>nix.conf</code> contains:</p>
<pre><code>diff-hook = /etc/nix/my-diff-hook
run-diff-hook = true
</code></pre>
<p>where <code>/etc/nix/my-diff-hook</code> is an executable file containing:</p>
<pre><code class="language-bash">#!/bin/sh
exec &gt;&amp;2
echo &quot;For derivation $3:&quot;
/run/current-system/sw/bin/diff -r &quot;$1&quot; &quot;$2&quot;
</code></pre>
<p>The diff hook is executed by the same user and group who ran the build.
However, the diff hook does not have write access to the store path just
built.</p>
<h1 id="spot-checking-build-determinism"><a class="header" href="#spot-checking-build-determinism">Spot-Checking Build Determinism</a></h1>
<p>Verify a path which already exists in the Nix store by passing <code>--check</code>
to the build command.</p>
<p>If the build passes and is deterministic, Nix will exit with a status
code of 0:</p>
<pre><code class="language-console">$ nix-build ./deterministic.nix -A stable
this derivation will be built:
  /nix/store/z98fasz2jqy9gs0xbvdj939p27jwda38-stable.drv
building '/nix/store/z98fasz2jqy9gs0xbvdj939p27jwda38-stable.drv'...
/nix/store/yyxlzw3vqaas7wfp04g0b1xg51f2czgq-stable

$ nix-build ./deterministic.nix -A stable --check
checking outputs of '/nix/store/z98fasz2jqy9gs0xbvdj939p27jwda38-stable.drv'...
/nix/store/yyxlzw3vqaas7wfp04g0b1xg51f2czgq-stable
</code></pre>
<p>If the build is not deterministic, Nix will exit with a status code of
1:</p>
<pre><code class="language-console">$ nix-build ./deterministic.nix -A unstable
this derivation will be built:
  /nix/store/cgl13lbj1w368r5z8gywipl1ifli7dhk-unstable.drv
building '/nix/store/cgl13lbj1w368r5z8gywipl1ifli7dhk-unstable.drv'...
/nix/store/krpqk0l9ib0ibi1d2w52z293zw455cap-unstable

$ nix-build ./deterministic.nix -A unstable --check
checking outputs of '/nix/store/cgl13lbj1w368r5z8gywipl1ifli7dhk-unstable.drv'...
error: derivation '/nix/store/cgl13lbj1w368r5z8gywipl1ifli7dhk-unstable.drv' may
not be deterministic: output '/nix/store/krpqk0l9ib0ibi1d2w52z293zw455cap-unstable' differs
</code></pre>
<p>In the Nix daemon's log, we will now see:</p>
<pre><code>For derivation /nix/store/cgl13lbj1w368r5z8gywipl1ifli7dhk-unstable.drv:
1c1
&lt; 8108
---
&gt; 30204
</code></pre>
<p>Using <code>--check</code> with <code>--keep-failed</code> will cause Nix to keep the second
build's output in a special, <code>.check</code> path:</p>
<pre><code class="language-console">$ nix-build ./deterministic.nix -A unstable --check --keep-failed
checking outputs of '/nix/store/cgl13lbj1w368r5z8gywipl1ifli7dhk-unstable.drv'...
note: keeping build directory '/tmp/nix-build-unstable.drv-0'
error: derivation '/nix/store/cgl13lbj1w368r5z8gywipl1ifli7dhk-unstable.drv' may
not be deterministic: output '/nix/store/krpqk0l9ib0ibi1d2w52z293zw455cap-unstable' differs
from '/nix/store/krpqk0l9ib0ibi1d2w52z293zw455cap-unstable.check'
</code></pre>
<p>In particular, notice the
<code>/nix/store/krpqk0l9ib0ibi1d2w52z293zw455cap-unstable.check</code> output. Nix
has copied the build results to that directory where you can examine it.</p>
<blockquote>
<p><a name="check-dirs-are-unregistered"></a> <strong>Note</strong></p>
<p>Check paths are not protected against garbage collection, and this
path will be deleted on the next garbage collection.</p>
<p>The path is guaranteed to be alive for the duration of
the <code>diff-hook</code>'s execution, but may be deleted any time after.</p>
<p>If the comparison is performed as part of automated tooling, please
use the diff-hook or author your tooling to handle the case where the
build was not deterministic and also a check path does not exist.</p>
</blockquote>
<p><code>--check</code> is only usable if the derivation has been built on the system
already. If the derivation has not been built Nix will fail with the
error:</p>
<pre><code>error: some outputs of '/nix/store/hzi1h60z2qf0nb85iwnpvrai3j2w7rr6-unstable.drv' 
are not valid, so checking is not possible
</code></pre>
<p>Run the build without <code>--check</code>, and then try with <code>--check</code> again.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="using-the-post-build-hook"><a class="header" href="#using-the-post-build-hook">Using the <code>post-build-hook</code></a></h1>
<h1 id="implementation-caveats"><a class="header" href="#implementation-caveats">Implementation Caveats</a></h1>
<p>Here we use the post-build hook to upload to a binary cache. This is a
simple and working example, but it is not suitable for all use cases.</p>
<p>The post build hook program runs after each executed build, and blocks
the build loop. The build loop exits if the hook program fails.</p>
<p>Concretely, this implementation will make Nix slow or unusable when the
internet is slow or unreliable.</p>
<p>A more advanced implementation might pass the store paths to a
user-supplied daemon or queue for processing the store paths outside of
the build loop.</p>
<h1 id="prerequisites-1"><a class="header" href="#prerequisites-1">Prerequisites</a></h1>
<p>This tutorial assumes you have <a href="advanced-topics/../package-management/s3-substituter.html">configured an S3-compatible binary
cache</a>, and that the <code>root</code>
user's default AWS profile can upload to the bucket.</p>
<h1 id="set-up-a-signing-key"><a class="header" href="#set-up-a-signing-key">Set up a Signing Key</a></h1>
<p>Use <code>nix-store --generate-binary-cache-key</code> to create our public and
private signing keys. We will sign paths with the private key, and
distribute the public key for verifying the authenticity of the paths.</p>
<pre><code class="language-console"># nix-store --generate-binary-cache-key example-nix-cache-1 /etc/nix/key.private /etc/nix/key.public
# cat /etc/nix/key.public
example-nix-cache-1:1/cKDz3QCCOmwcztD2eV6Coggp6rqc9DGjWv7C0G+rM=
</code></pre>
<p>Then update <a href="advanced-topics/../command-ref/conf-file.html"><code>nix.conf</code></a> on any machine that will access the cache.
Add the cache URL to <a href="advanced-topics/../command-ref/conf-file.html#conf-substituters"><code>substituters</code></a> and the public key to <a href="advanced-topics/../command-ref/conf-file.html#conf-trusted-public-keys"><code>trusted-public-keys</code></a>:</p>
<pre><code>substituters = https://cache.nixos.org/ s3://example-nix-cache
trusted-public-keys = cache.nixos.org-1:6NCHdD59X431o0gWypbMrAURkbJ16ZPMQFGspcDShjY= example-nix-cache-1:1/cKDz3QCCOmwcztD2eV6Coggp6rqc9DGjWv7C0G+rM=
</code></pre>
<p>Machines that build for the cache must sign derivations using the private key.
On those machines, add the path to the key file to the <a href="advanced-topics/../command-ref/conf-file.html#conf-secret-key-files"><code>secret-key-files</code></a> field in their <a href="advanced-topics/../command-ref/conf-file.html"><code>nix.conf</code></a>:</p>
<pre><code>secret-key-files = /etc/nix/key.private
</code></pre>
<p>We will restart the Nix daemon in a later step.</p>
<h1 id="implementing-the-build-hook"><a class="header" href="#implementing-the-build-hook">Implementing the build hook</a></h1>
<p>Write the following script to <code>/etc/nix/upload-to-cache.sh</code>:</p>
<pre><code class="language-bash">#!/bin/sh

set -eu
set -f # disable globbing
export IFS=' '

echo &quot;Uploading paths&quot; $OUT_PATHS
exec nix copy --to &quot;s3://example-nix-cache&quot; $OUT_PATHS
</code></pre>
<blockquote>
<p><strong>Note</strong></p>
<p>The <code>$OUT_PATHS</code> variable is a space-separated list of Nix store
paths. In this case, we expect and want the shell to perform word
splitting to make each output path its own argument to <code>nix store sign</code>. Nix guarantees the paths will not contain any spaces,
however a store path might contain glob characters. The <code>set -f</code>
disables globbing in the shell.</p>
</blockquote>
<p>Then make sure the hook program is executable by the <code>root</code> user:</p>
<pre><code class="language-console"># chmod +x /etc/nix/upload-to-cache.sh
</code></pre>
<h1 id="updating-nix-configuration"><a class="header" href="#updating-nix-configuration">Updating Nix Configuration</a></h1>
<p>Edit <code>/etc/nix/nix.conf</code> to run our hook, by adding the following
configuration snippet at the end:</p>
<pre><code>post-build-hook = /etc/nix/upload-to-cache.sh
</code></pre>
<p>Then, restart the <code>nix-daemon</code>.</p>
<h1 id="testing"><a class="header" href="#testing">Testing</a></h1>
<p>Build any derivation, for example:</p>
<pre><code class="language-console">$ nix-build -E '(import &lt;nixpkgs&gt; {}).writeText &quot;example&quot; (builtins.toString builtins.currentTime)'
this derivation will be built:
  /nix/store/s4pnfbkalzy5qz57qs6yybna8wylkig6-example.drv
building '/nix/store/s4pnfbkalzy5qz57qs6yybna8wylkig6-example.drv'...
running post-build-hook '/home/grahamc/projects/github.com/NixOS/nix/post-hook.sh'...
post-build-hook: Signing paths /nix/store/ibcyipq5gf91838ldx40mjsp0b8w9n18-example
post-build-hook: Uploading paths /nix/store/ibcyipq5gf91838ldx40mjsp0b8w9n18-example
/nix/store/ibcyipq5gf91838ldx40mjsp0b8w9n18-example
</code></pre>
<p>Then delete the path from the store, and try substituting it from the
binary cache:</p>
<pre><code class="language-console">$ rm ./result
$ nix-store --delete /nix/store/ibcyipq5gf91838ldx40mjsp0b8w9n18-example
</code></pre>
<p>Now, copy the path back from the cache:</p>
<pre><code class="language-console">$ nix-store --realise /nix/store/ibcyipq5gf91838ldx40mjsp0b8w9n18-example
copying path '/nix/store/m8bmqwrch6l3h8s0k3d673xpmipcdpsa-example from 's3://example-nix-cache'...
warning: you did not specify '--add-root'; the result might be removed by the garbage collector
/nix/store/m8bmqwrch6l3h8s0k3d673xpmipcdpsa-example
</code></pre>
<h1 id="conclusion"><a class="header" href="#conclusion">Conclusion</a></h1>
<p>We now have a Nix installation configured to automatically sign and
upload every local build to a remote binary cache.</p>
<p>Before deploying this to production, be sure to consider the
<a href="advanced-topics/post-build-hook.html#implementation-caveats">implementation caveats</a>.</p>
<div style="break-before: page; page-break-before: always;"></div><p>This section lists commands and options that you can use when you work
with Nix.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="common-options"><a class="header" href="#common-options">Common Options</a></h1>
<p>Most Nix commands accept the following command-line options:</p>
<ul>
<li>
<p><a href="command-ref/opt-common.html#opt-help" id="opt-help"><code>--help</code></a><br />
Prints out a summary of the command syntax and exits.</p>
</li>
<li>
<p><a href="command-ref/opt-common.html#opt-version" id="opt-version"><code>--version</code></a><br />
Prints out the Nix version number on standard output and exits.</p>
</li>
<li>
<p><a href="command-ref/opt-common.html#opt-verbose" id="opt-verbose"><code>--verbose</code></a> / <code>-v</code><br />
Increases the level of verbosity of diagnostic messages printed on
standard error. For each Nix operation, the information printed on
standard output is well-defined; any diagnostic information is
printed on standard error, never on standard output.</p>
<p>This option may be specified repeatedly. Currently, the following
verbosity levels exist:</p>
<ul>
<li>
<p>0<br />
“Errors only”: only print messages explaining why the Nix
invocation failed.</p>
</li>
<li>
<p>1<br />
“Informational”: print <em>useful</em> messages about what Nix is
doing. This is the default.</p>
</li>
<li>
<p>2<br />
“Talkative”: print more informational messages.</p>
</li>
<li>
<p>3<br />
“Chatty”: print even more informational messages.</p>
</li>
<li>
<p>4<br />
“Debug”: print debug information.</p>
</li>
<li>
<p>5<br />
“Vomit”: print vast amounts of debug information.</p>
</li>
</ul>
</li>
<li>
<p><a href="command-ref/opt-common.html#opt-quiet" id="opt-quiet"><code>--quiet</code></a><br />
Decreases the level of verbosity of diagnostic messages printed on
standard error. This is the inverse option to <code>-v</code> / <code>--verbose</code>.</p>
<p>This option may be specified repeatedly. See the previous verbosity
levels list.</p>
</li>
<li>
<p><a href="command-ref/opt-common.html#opt-log-format" id="opt-log-format"><code>--log-format</code></a> <em>format</em><br />
This option can be used to change the output of the log format, with
<em>format</em> being one of:</p>
<ul>
<li>
<p>raw<br />
This is the raw format, as outputted by nix-build.</p>
</li>
<li>
<p>internal-json<br />
Outputs the logs in a structured manner.</p>
<blockquote>
<p><strong>Warning</strong></p>
<p>While the schema itself is relatively stable, the format of
the error-messages (namely of the <code>msg</code>-field) can change
between releases.</p>
</blockquote>
</li>
<li>
<p>bar<br />
Only display a progress bar during the builds.</p>
</li>
<li>
<p>bar-with-logs<br />
Display the raw logs, with the progress bar at the bottom.</p>
</li>
</ul>
</li>
<li>
<p><a href="command-ref/opt-common.html#opt-no-build-output" id="opt-no-build-output"><code>--no-build-output</code></a> / <code>-Q</code><br />
By default, output written by builders to standard output and
standard error is echoed to the Nix command's standard error. This
option suppresses this behaviour. Note that the builder's standard
output and error are always written to a log file in
<code>prefix/nix/var/log/nix</code>.</p>
</li>
<li>
<p><a href="command-ref/opt-common.html#opt-max-jobs" id="opt-max-jobs"><code>--max-jobs</code></a> / <code>-j</code> <em>number</em><br />
Sets the maximum number of build jobs that Nix will perform in
parallel to the specified number. Specify <code>auto</code> to use the number
of CPUs in the system. The default is specified by the <code>max-jobs</code>
configuration setting, which itself defaults to <code>1</code>. A higher
value is useful on SMP systems or to exploit I/O latency.</p>
<p>Setting it to <code>0</code> disallows building on the local machine, which is
useful when you want builds to happen only on remote builders.</p>
</li>
<li>
<p><a href="command-ref/opt-common.html#opt-cores" id="opt-cores"><code>--cores</code></a><br />
Sets the value of the <code>NIX_BUILD_CORES</code> environment variable in
the invocation of builders. Builders can use this variable at
their discretion to control the maximum amount of parallelism. For
instance, in Nixpkgs, if the derivation attribute
<code>enableParallelBuilding</code> is set to <code>true</code>, the builder passes the
<code>-jN</code> flag to GNU Make. It defaults to the value of the <code>cores</code>
configuration setting, if set, or <code>1</code> otherwise. The value <code>0</code>
means that the builder should use all available CPU cores in the
system.</p>
</li>
<li>
<p><a href="command-ref/opt-common.html#opt-max-silent-time" id="opt-max-silent-time"><code>--max-silent-time</code></a><br />
Sets the maximum number of seconds that a builder can go without
producing any data on standard output or standard error. The
default is specified by the <code>max-silent-time</code> configuration
setting. <code>0</code> means no time-out.</p>
</li>
<li>
<p><a href="command-ref/opt-common.html#opt-timeout" id="opt-timeout"><code>--timeout</code></a><br />
Sets the maximum number of seconds that a builder can run. The
default is specified by the <code>timeout</code> configuration setting. <code>0</code>
means no timeout.</p>
</li>
<li>
<p><a href="command-ref/opt-common.html#opt-keep-going" id="opt-keep-going"><code>--keep-going</code></a> / <code>-k</code><br />
Keep going in case of failed builds, to the greatest extent
possible. That is, if building an input of some derivation fails,
Nix will still build the other inputs, but not the derivation
itself. Without this option, Nix stops if any build fails (except
for builds of substitutes), possibly killing builds in progress (in
case of parallel or distributed builds).</p>
</li>
<li>
<p><a href="command-ref/opt-common.html#opt-keep-failed" id="opt-keep-failed"><code>--keep-failed</code></a> / <code>-K</code><br />
Specifies that in case of a build failure, the temporary directory
(usually in <code>/tmp</code>) in which the build takes place should not be
deleted. The path of the build directory is printed as an
informational message.</p>
</li>
<li>
<p><a href="command-ref/opt-common.html#opt-fallback" id="opt-fallback"><code>--fallback</code></a><br />
Whenever Nix attempts to build a derivation for which substitutes
are known for each output path, but realising the output paths
through the substitutes fails, fall back on building the derivation.</p>
<p>The most common scenario in which this is useful is when we have
registered substitutes in order to perform binary distribution from,
say, a network repository. If the repository is down, the
realisation of the derivation will fail. When this option is
specified, Nix will build the derivation instead. Thus, installation
from binaries falls back on installation from source. This option is
not the default since it is generally not desirable for a transient
failure in obtaining the substitutes to lead to a full build from
source (with the related consumption of resources).</p>
</li>
<li>
<p><a href="command-ref/opt-common.html#opt-readonly-mode" id="opt-readonly-mode"><code>--readonly-mode</code></a><br />
When this option is used, no attempt is made to open the Nix
database. Most Nix operations do need database access, so those
operations will fail.</p>
</li>
<li>
<p><a href="command-ref/opt-common.html#opt-arg" id="opt-arg"><code>--arg</code></a> <em>name</em> <em>value</em><br />
This option is accepted by <code>nix-env</code>, <code>nix-instantiate</code>,
<code>nix-shell</code> and <code>nix-build</code>. When evaluating Nix expressions, the
expression evaluator will automatically try to call functions that
it encounters. It can automatically call functions for which every
argument has a <a href="command-ref/../language/constructs.html#functions">default
value</a> (e.g.,
<code>{ argName ?  defaultValue }: ...</code>). With <code>--arg</code>, you can also
call functions that have arguments without a default value (or
override a default value). That is, if the evaluator encounters a
function with an argument named <em>name</em>, it will call it with value
<em>value</em>.</p>
<p>For instance, the top-level <code>default.nix</code> in Nixpkgs is actually a
function:</p>
<pre><code class="language-nix">{ # The system (e.g., `i686-linux') for which to build the packages.
  system ? builtins.currentSystem
  ...
}: ...
</code></pre>
<p>So if you call this Nix expression (e.g., when you do <code>nix-env -iA pkgname</code>), the function will be called automatically using the
value <a href="command-ref/../language/builtins.html"><code>builtins.currentSystem</code></a> for
the <code>system</code> argument. You can override this using <code>--arg</code>, e.g.,
<code>nix-env -iA pkgname --arg system \&quot;i686-freebsd\&quot;</code>. (Note that
since the argument is a Nix string literal, you have to escape the
quotes.)</p>
</li>
<li>
<p><a href="command-ref/opt-common.html#opt-argstr" id="opt-argstr"><code>--argstr</code></a> <em>name</em> <em>value</em><br />
This option is like <code>--arg</code>, only the value is not a Nix
expression but a string. So instead of <code>--arg system &quot;i686-linux&quot;</code> (the outer quotes are to keep the shell happy) you
can say <code>--argstr system i686-linux</code>.</p>
</li>
<li>
<p><a href="command-ref/opt-common.html#opt-attr" id="opt-attr"><code>--attr</code></a> / <code>-A</code> <em>attrPath</em><br />
Select an attribute from the top-level Nix expression being
evaluated. (<code>nix-env</code>, <code>nix-instantiate</code>, <code>nix-build</code> and
<code>nix-shell</code> only.) The <em>attribute path</em> <em>attrPath</em> is a sequence
of attribute names separated by dots. For instance, given a
top-level Nix expression <em>e</em>, the attribute path <code>xorg.xorgserver</code>
would cause the expression <code>e.xorg.xorgserver</code> to be used. See
<a href="command-ref/nix-env.html#operation---install"><code>nix-env --install</code></a> for some
concrete examples.</p>
<p>In addition to attribute names, you can also specify array indices.
For instance, the attribute path <code>foo.3.bar</code> selects the <code>bar</code>
attribute of the fourth element of the array in the <code>foo</code> attribute
of the top-level expression.</p>
</li>
<li>
<p><a href="command-ref/opt-common.html#opt-expr" id="opt-expr"><code>--expr</code></a> / <code>-E</code><br />
Interpret the command line arguments as a list of Nix expressions to
be parsed and evaluated, rather than as a list of file names of Nix
expressions. (<code>nix-instantiate</code>, <code>nix-build</code> and <code>nix-shell</code> only.)</p>
<p>For <code>nix-shell</code>, this option is commonly used to give you a shell in
which you can build the packages returned by the expression. If you
want to get a shell which contain the <em>built</em> packages ready for
use, give your expression to the <code>nix-shell -p</code> convenience flag
instead.</p>
</li>
<li>
<p><a href="command-ref/opt-common.html#opt-I" id="opt-I"><code>-I</code></a> <em>path</em><br />
Add a path to the Nix expression search path. This option may be
given multiple times. See the <code>NIX_PATH</code> environment variable for
information on the semantics of the Nix search path. Paths added
through <code>-I</code> take precedence over <code>NIX_PATH</code>.</p>
</li>
<li>
<p><a href="command-ref/opt-common.html#opt-option" id="opt-option"><code>--option</code></a> <em>name</em> <em>value</em><br />
Set the Nix configuration option <em>name</em> to <em>value</em>. This overrides
settings in the Nix configuration file (see nix.conf5).</p>
</li>
<li>
<p><a href="command-ref/opt-common.html#opt-repair" id="opt-repair"><code>--repair</code></a><br />
Fix corrupted or missing store paths by redownloading or rebuilding
them. Note that this is slow because it requires computing a
cryptographic hash of the contents of every path in the closure of
the build. Also note the warning under <code>nix-store --repair-path</code>.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="common-environment-variables"><a class="header" href="#common-environment-variables">Common Environment Variables</a></h1>
<p>Most Nix commands interpret the following environment variables:</p>
<ul>
<li>
<p><a href="command-ref/env-common.html#env-IN_NIX_SHELL" id="env-IN_NIX_SHELL"><code>IN_NIX_SHELL</code></a><br />
Indicator that tells if the current environment was set up by
<code>nix-shell</code>. It can have the values <code>pure</code> or <code>impure</code>.</p>
</li>
<li>
<p><a href="command-ref/env-common.html#env-NIX_PATH" id="env-NIX_PATH"><code>NIX_PATH</code></a><br />
A colon-separated list of directories used to look up the location of Nix
expressions using <a href="command-ref/../language/values.html#type-path">paths</a>
enclosed in angle brackets (i.e., <code>&lt;path&gt;</code>),
e.g. <code>/home/eelco/Dev:/etc/nixos</code>. It can be extended using the
<a href="command-ref/./opt-common.html#opt-I"><code>-I</code> option</a>.</p>
</li>
<li>
<p><a href="command-ref/env-common.html#env-NIX_IGNORE_SYMLINK_STORE" id="env-NIX_IGNORE_SYMLINK_STORE"><code>NIX_IGNORE_SYMLINK_STORE</code></a><br />
Normally, the Nix store directory (typically <code>/nix/store</code>) is not
allowed to contain any symlink components. This is to prevent
“impure” builds. Builders sometimes “canonicalise” paths by
resolving all symlink components. Thus, builds on different machines
(with <code>/nix/store</code> resolving to different locations) could yield
different results. This is generally not a problem, except when
builds are deployed to machines where <code>/nix/store</code> resolves
differently. If you are sure that you’re not going to do that, you
can set <code>NIX_IGNORE_SYMLINK_STORE</code> to <code>1</code>.</p>
<p>Note that if you’re symlinking the Nix store so that you can put it
on another file system than the root file system, on Linux you’re
better off using <code>bind</code> mount points, e.g.,</p>
<pre><code class="language-console">$ mkdir /nix
$ mount -o bind /mnt/otherdisk/nix /nix
</code></pre>
<p>Consult the mount 8 manual page for details.</p>
</li>
<li>
<p><a href="command-ref/env-common.html#env-NIX_STORE_DIR" id="env-NIX_STORE_DIR"><code>NIX_STORE_DIR</code></a><br />
Overrides the location of the Nix store (default <code>prefix/store</code>).</p>
</li>
<li>
<p><a href="command-ref/env-common.html#env-NIX_DATA_DIR" id="env-NIX_DATA_DIR"><code>NIX_DATA_DIR</code></a><br />
Overrides the location of the Nix static data directory (default
<code>prefix/share</code>).</p>
</li>
<li>
<p><a href="command-ref/env-common.html#env-NIX_LOG_DIR" id="env-NIX_LOG_DIR"><code>NIX_LOG_DIR</code></a><br />
Overrides the location of the Nix log directory (default
<code>prefix/var/log/nix</code>).</p>
</li>
<li>
<p><a href="command-ref/env-common.html#env-NIX_STATE_DIR" id="env-NIX_STATE_DIR"><code>NIX_STATE_DIR</code></a><br />
Overrides the location of the Nix state directory (default
<code>prefix/var/nix</code>).</p>
</li>
<li>
<p><a href="command-ref/env-common.html#env-NIX_CONF_DIR" id="env-NIX_CONF_DIR"><code>NIX_CONF_DIR</code></a><br />
Overrides the location of the system Nix configuration directory
(default <code>prefix/etc/nix</code>).</p>
</li>
<li>
<p><a href="command-ref/env-common.html#env-NIX_CONFIG" id="env-NIX_CONFIG"><code>NIX_CONFIG</code></a><br />
Applies settings from Nix configuration from the environment.
The content is treated as if it was read from a Nix configuration file.
Settings are separated by the newline character.</p>
</li>
<li>
<p><a href="command-ref/env-common.html#env-NIX_USER_CONF_FILES" id="env-NIX_USER_CONF_FILES"><code>NIX_USER_CONF_FILES</code></a><br />
Overrides the location of the user Nix configuration files to load
from (defaults to the XDG spec locations). The variable is treated
as a list separated by the <code>:</code> token.</p>
</li>
<li>
<p><a href="command-ref/env-common.html#env-TMPDIR" id="env-TMPDIR"><code>TMPDIR</code></a><br />
Use the specified directory to store temporary files. In particular,
this includes temporary build directories; these can take up
substantial amounts of disk space. The default is <code>/tmp</code>.</p>
</li>
<li>
<p><a href="command-ref/env-common.html#env-NIX_REMOTE" id="env-NIX_REMOTE"><code>NIX_REMOTE</code></a><br />
This variable should be set to <code>daemon</code> if you want to use the Nix
daemon to execute Nix operations. This is necessary in <a href="command-ref/../installation/multi-user.html">multi-user
Nix installations</a>. If the Nix
daemon's Unix socket is at some non-standard path, this variable
should be set to <code>unix://path/to/socket</code>. Otherwise, it should be
left unset.</p>
</li>
<li>
<p><a href="command-ref/env-common.html#env-NIX_SHOW_STATS" id="env-NIX_SHOW_STATS"><code>NIX_SHOW_STATS</code></a><br />
If set to <code>1</code>, Nix will print some evaluation statistics, such as
the number of values allocated.</p>
</li>
<li>
<p><a href="command-ref/env-common.html#env-NIX_COUNT_CALLS" id="env-NIX_COUNT_CALLS"><code>NIX_COUNT_CALLS</code></a><br />
If set to <code>1</code>, Nix will print how often functions were called during
Nix expression evaluation. This is useful for profiling your Nix
expressions.</p>
</li>
<li>
<p><a href="command-ref/env-common.html#env-GC_INITIAL_HEAP_SIZE" id="env-GC_INITIAL_HEAP_SIZE"><code>GC_INITIAL_HEAP_SIZE</code></a><br />
If Nix has been configured to use the Boehm garbage collector, this
variable sets the initial size of the heap in bytes. It defaults to
384 MiB. Setting it to a low value reduces memory consumption, but
will increase runtime due to the overhead of garbage collection.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="main-commands"><a class="header" href="#main-commands">Main Commands</a></h1>
<p>This section lists commands and options that you can use when you work
with Nix.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="name"><a class="header" href="#name">Name</a></h1>
<p><code>nix-env</code> - manipulate or query Nix user environments</p>
<h1 id="synopsis"><a class="header" href="#synopsis">Synopsis</a></h1>
<p><code>nix-env</code>
[<code>--option</code> <em>name</em> <em>value</em>]
[<code>--arg</code> <em>name</em> <em>value</em>]
[<code>--argstr</code> <em>name</em> <em>value</em>]
[{<code>--file</code> | <code>-f</code>} <em>path</em>]
[{<code>--profile</code> | <code>-p</code>} *path(]
[<code>--system-filter</code> <em>system</em>]
[<code>--dry-run</code>]
<em>operation</em> [<em>options…</em>] [<em>arguments…</em>]</p>
<h1 id="description"><a class="header" href="#description">Description</a></h1>
<p>The command <code>nix-env</code> is used to manipulate Nix user environments. User
environments are sets of software packages available to a user at some
point in time. In other words, they are a synthesised view of the
programs available in the Nix store. There may be many user
environments: different users can have different environments, and
individual users can switch between different environments.</p>
<p><code>nix-env</code> takes exactly one <em>operation</em> flag which indicates the
subcommand to be performed. These are documented below.</p>
<h1 id="selectors"><a class="header" href="#selectors">Selectors</a></h1>
<p>Several commands, such as <code>nix-env -q</code> and <code>nix-env -i</code>, take a list of
arguments that specify the packages on which to operate. These are
extended regular expressions that must match the entire name of the
package. (For details on regular expressions, see <strong>regex</strong>(7).) The match is
case-sensitive. The regular expression can optionally be followed by a
dash and a version number; if omitted, any version of the package will
match. Here are some examples:</p>
<ul>
<li>
<p><code>firefox</code><br />
Matches the package name <code>firefox</code> and any version.</p>
</li>
<li>
<p><code>firefox-32.0</code><br />
Matches the package name <code>firefox</code> and version <code>32.0</code>.</p>
</li>
<li>
<p><code>gtk\\+</code><br />
Matches the package name <code>gtk+</code>. The <code>+</code> character must be escaped
using a backslash to prevent it from being interpreted as a
quantifier, and the backslash must be escaped in turn with another
backslash to ensure that the shell passes it on.</p>
</li>
<li>
<p><code>.\*</code><br />
Matches any package name. This is the default for most commands.</p>
</li>
<li>
<p><code>'.*zip.*'</code><br />
Matches any package name containing the string <code>zip</code>. Note the dots:
<code>'*zip*'</code> does not work, because in a regular expression, the
character <code>*</code> is interpreted as a quantifier.</p>
</li>
<li>
<p><code>'.*(firefox|chromium).*'</code><br />
Matches any package name containing the strings <code>firefox</code> or
<code>chromium</code>.</p>
</li>
</ul>
<h1 id="common-options-1"><a class="header" href="#common-options-1">Common options</a></h1>
<p>This section lists the options that are common to all operations. These
options are allowed for every subcommand, though they may not always
have an effect.</p>
<ul>
<li>
<p><code>--file</code> / <code>-f</code> <em>path</em><br />
Specifies the Nix expression (designated below as the <em>active Nix
expression</em>) used by the <code>--install</code>, <code>--upgrade</code>, and <code>--query --available</code> operations to obtain derivations. The default is
<code>~/.nix-defexpr</code>.</p>
<p>If the argument starts with <code>http://</code> or <code>https://</code>, it is
interpreted as the URL of a tarball that will be downloaded and
unpacked to a temporary location. The tarball must include a single
top-level directory containing at least a file named <code>default.nix</code>.</p>
</li>
<li>
<p><code>--profile</code> / <code>-p</code> <em>path</em><br />
Specifies the profile to be used by those operations that operate on
a profile (designated below as the <em>active profile</em>). A profile is a
sequence of user environments called <em>generations</em>, one of which is
the <em>current generation</em>.</p>
</li>
<li>
<p><code>--dry-run</code><br />
For the <code>--install</code>, <code>--upgrade</code>, <code>--uninstall</code>,
<code>--switch-generation</code>, <code>--delete-generations</code> and <code>--rollback</code>
operations, this flag will cause <code>nix-env</code> to print what <em>would</em> be
done if this flag had not been specified, without actually doing it.</p>
<p><code>--dry-run</code> also prints out which paths will be
<a href="command-ref/../glossary.html">substituted</a> (i.e., downloaded) and which paths
will be built from source (because no substitute is available).</p>
</li>
<li>
<p><code>--system-filter</code> <em>system</em><br />
By default, operations such as <code>--query --available</code> show derivations matching any platform. This option
allows you to use derivations for the specified platform <em>system</em>.</p>
</li>
</ul>
<!-- end list -->
<h1 id="files"><a class="header" href="#files">Files</a></h1>
<ul>
<li>
<p><code>~/.nix-defexpr</code><br />
The source for the default Nix expressions used by the
<code>--install</code>, <code>--upgrade</code>, and <code>--query --available</code> operations to
obtain derivations. The <code>--file</code> option may be used to override
this default.</p>
<p>If <code>~/.nix-defexpr</code> is a file, it is loaded as a Nix expression. If
the expression is a set, it is used as the default Nix expression.
If the expression is a function, an empty set is passed as argument
and the return value is used as the default Nix expression.</p>
<p>If <code>~/.nix-defexpr</code> is a directory containing a <code>default.nix</code> file,
that file is loaded as in the above paragraph.</p>
<p>If <code>~/.nix-defexpr</code> is a directory without a <code>default.nix</code> file,
then its contents (both files and subdirectories) are loaded as Nix
expressions. The expressions are combined into a single set, each
expression under an attribute with the same name as the original
file or subdirectory.</p>
<p>For example, if <code>~/.nix-defexpr</code> contains two files, <code>foo.nix</code> and
<code>bar.nix</code>, then the default Nix expression will essentially be</p>
<pre><code class="language-nix">{
  foo = import ~/.nix-defexpr/foo.nix;
  bar = import ~/.nix-defexpr/bar.nix;
}
</code></pre>
<p>The file <code>manifest.nix</code> is always ignored. Subdirectories without a
<code>default.nix</code> file are traversed recursively in search of more Nix
expressions, but the names of these intermediate directories are not
added to the attribute paths of the default Nix expression.</p>
<p>The command <code>nix-channel</code> places symlinks to the downloaded Nix
expressions from each subscribed channel in this directory.</p>
</li>
<li>
<p><code>~/.nix-profile</code><br />
A symbolic link to the user's current profile. By default, this
symlink points to <code>prefix/var/nix/profiles/default</code>. The <code>PATH</code>
environment variable should include <code>~/.nix-profile/bin</code> for the
user environment to be visible to the user.</p>
</li>
</ul>
<h1 id="operation---install"><a class="header" href="#operation---install">Operation <code>--install</code></a></h1>
<h2 id="synopsis-1"><a class="header" href="#synopsis-1">Synopsis</a></h2>
<p><code>nix-env</code> {<code>--install</code> | <code>-i</code>} <em>args…</em>
[{<code>--prebuilt-only</code> | <code>-b</code>}]
[{<code>--attr</code> | <code>-A</code>}]
[<code>--from-expression</code>] [<code>-E</code>]
[<code>--from-profile</code> <em>path</em>]
[<code>--preserve-installed</code> | <code>-P</code>]
[<code>--remove-all</code> | <code>-r</code>]</p>
<h2 id="description-1"><a class="header" href="#description-1">Description</a></h2>
<p>The install operation creates a new user environment, based on the
current generation of the active profile, to which a set of store paths
described by <em>args</em> is added. The arguments <em>args</em> map to store paths in
a number of possible ways:</p>
<ul>
<li>
<p>By default, <em>args</em> is a set of derivation names denoting derivations
in the active Nix expression. These are realised, and the resulting
output paths are installed. Currently installed derivations with a
name equal to the name of a derivation being added are removed
unless the option <code>--preserve-installed</code> is specified.</p>
<p>If there are multiple derivations matching a name in <em>args</em> that
have the same name (e.g., <code>gcc-3.3.6</code> and <code>gcc-4.1.1</code>), then the
derivation with the highest <em>priority</em> is used. A derivation can
define a priority by declaring the <code>meta.priority</code> attribute. This
attribute should be a number, with a higher value denoting a lower
priority. The default priority is <code>0</code>.</p>
<p>If there are multiple matching derivations with the same priority,
then the derivation with the highest version will be installed.</p>
<p>You can force the installation of multiple derivations with the same
name by being specific about the versions. For instance, <code>nix-env -i gcc-3.3.6 gcc-4.1.1</code> will install both version of GCC (and will
probably cause a user environment conflict!).</p>
</li>
<li>
<p>If <code>--attr</code> (<code>-A</code>) is specified, the arguments are <em>attribute
paths</em> that select attributes from the top-level Nix
expression. This is faster than using derivation names and
unambiguous. To find out the attribute paths of available
packages, use <code>nix-env -qaP</code>.</p>
</li>
<li>
<p>If <code>--from-profile</code> <em>path</em> is given, <em>args</em> is a set of names
denoting installed store paths in the profile <em>path</em>. This is an
easy way to copy user environment elements from one profile to
another.</p>
</li>
<li>
<p>If <code>--from-expression</code> is given, <em>args</em> are Nix
<a href="command-ref/../language/constructs.html#functions">functions</a>
that are called with the active Nix expression as their single
argument. The derivations returned by those function calls are
installed. This allows derivations to be specified in an
unambiguous way, which is necessary if there are multiple
derivations with the same name.</p>
</li>
<li>
<p>If <em>args</em> are <a href="command-ref/../glossary.html#gloss-store-derivation">store derivation</a>s, then these are
<a href="command-ref/nix-store.html#operation---realise">realised</a>, and the resulting output paths
are installed.</p>
</li>
<li>
<p>If <em>args</em> are store paths that are not store derivations, then these
are <a href="command-ref/nix-store.html#operation---realise">realised</a> and installed.</p>
</li>
<li>
<p>By default all outputs are installed for each derivation. That can
be reduced by setting <code>meta.outputsToInstall</code>.</p>
</li>
</ul>
<h2 id="flags"><a class="header" href="#flags">Flags</a></h2>
<ul>
<li>
<p><code>--prebuilt-only</code> / <code>-b</code><br />
Use only derivations for which a substitute is registered, i.e.,
there is a pre-built binary available that can be downloaded in lieu
of building the derivation. Thus, no packages will be built from
source.</p>
</li>
<li>
<p><code>--preserve-installed</code>; <code>-P</code><br />
Do not remove derivations with a name matching one of the
derivations being installed. Usually, trying to have two versions of
the same package installed in the same generation of a profile will
lead to an error in building the generation, due to file name
clashes between the two versions. However, this is not the case for
all packages.</p>
</li>
<li>
<p><code>--remove-all</code>; <code>-r</code><br />
Remove all previously installed packages first. This is equivalent
to running <code>nix-env -e '.*'</code> first, except that everything happens
in a single transaction.</p>
</li>
</ul>
<h2 id="examples-2"><a class="header" href="#examples-2">Examples</a></h2>
<p>To install a package using a specific attribute path from the active Nix expression:</p>
<pre><code class="language-console">$ nix-env -iA gcc40mips
installing `gcc-4.0.2'
$ nix-env -iA xorg.xorgserver
installing `xorg-server-1.2.0'
</code></pre>
<p>To install a specific version of <code>gcc</code> using the derivation name:</p>
<pre><code class="language-console">$ nix-env --install gcc-3.3.2
installing `gcc-3.3.2'
uninstalling `gcc-3.1'
</code></pre>
<p>Using attribute path for selecting a package is preferred,
as it is much faster and there will not be multiple matches.</p>
<p>Note the previously installed version is removed, since
<code>--preserve-installed</code> was not specified.</p>
<p>To install an arbitrary version:</p>
<pre><code class="language-console">$ nix-env --install gcc
installing `gcc-3.3.2'
</code></pre>
<p>To install all derivations in the Nix expression <code>foo.nix</code>:</p>
<pre><code class="language-console">$ nix-env -f ~/foo.nix -i '.*'
</code></pre>
<p>To copy the store path with symbolic name <code>gcc</code> from another profile:</p>
<pre><code class="language-console">$ nix-env -i --from-profile /nix/var/nix/profiles/foo gcc
</code></pre>
<p>To install a specific <a href="command-ref/../glossary.html#gloss-store-derivation">store derivation</a> (typically created by
<code>nix-instantiate</code>):</p>
<pre><code class="language-console">$ nix-env -i /nix/store/fibjb1bfbpm5mrsxc4mh2d8n37sxh91i-gcc-3.4.3.drv
</code></pre>
<p>To install a specific output path:</p>
<pre><code class="language-console">$ nix-env -i /nix/store/y3cgx0xj1p4iv9x0pnnmdhr8iyg741vk-gcc-3.4.3
</code></pre>
<p>To install from a Nix expression specified on the command-line:</p>
<pre><code class="language-console">$ nix-env -f ./foo.nix -i -E \
    'f: (f {system = &quot;i686-linux&quot;;}).subversionWithJava'
</code></pre>
<p>I.e., this evaluates to <code>(f: (f {system = &quot;i686-linux&quot;;}).subversionWithJava) (import ./foo.nix)</code>, thus selecting
the <code>subversionWithJava</code> attribute from the set returned by calling the
function defined in <code>./foo.nix</code>.</p>
<p>A dry-run tells you which paths will be downloaded or built from source:</p>
<pre><code class="language-console">$ nix-env -f '&lt;nixpkgs&gt;' -iA hello --dry-run
(dry run; not doing anything)
installing ‘hello-2.10’
this path will be fetched (0.04 MiB download, 0.19 MiB unpacked):
  /nix/store/wkhdf9jinag5750mqlax6z2zbwhqb76n-hello-2.10
  ...
</code></pre>
<p>To install Firefox from the latest revision in the Nixpkgs/NixOS 14.12
channel:</p>
<pre><code class="language-console">$ nix-env -f https://github.com/NixOS/nixpkgs/archive/nixos-14.12.tar.gz -iA firefox
</code></pre>
<h1 id="operation---upgrade"><a class="header" href="#operation---upgrade">Operation <code>--upgrade</code></a></h1>
<h2 id="synopsis-2"><a class="header" href="#synopsis-2">Synopsis</a></h2>
<p><code>nix-env</code> {<code>--upgrade</code> | <code>-u</code>} <em>args</em>
[<code>--lt</code> | <code>--leq</code> | <code>--eq</code> | <code>--always</code>]
[{<code>--prebuilt-only</code> | <code>-b</code>}]
[{<code>--attr</code> | <code>-A</code>}]
[<code>--from-expression</code>] [<code>-E</code>]
[<code>--from-profile</code> <em>path</em>]
[<code>--preserve-installed</code> | <code>-P</code>]</p>
<h2 id="description-2"><a class="header" href="#description-2">Description</a></h2>
<p>The upgrade operation creates a new user environment, based on the
current generation of the active profile, in which all store paths are
replaced for which there are newer versions in the set of paths
described by <em>args</em>. Paths for which there are no newer versions are
left untouched; this is not an error. It is also not an error if an
element of <em>args</em> matches no installed derivations.</p>
<p>For a description of how <em>args</em> is mapped to a set of store paths, see
<a href="command-ref/nix-env.html#operation---install"><code>--install</code></a>. If <em>args</em> describes multiple
store paths with the same symbolic name, only the one with the highest
version is installed.</p>
<h2 id="flags-1"><a class="header" href="#flags-1">Flags</a></h2>
<ul>
<li>
<p><code>--lt</code><br />
Only upgrade a derivation to newer versions. This is the default.</p>
</li>
<li>
<p><code>--leq</code><br />
In addition to upgrading to newer versions, also “upgrade” to
derivations that have the same version. Version are not a unique
identification of a derivation, so there may be many derivations
that have the same version. This flag may be useful to force
“synchronisation” between the installed and available derivations.</p>
</li>
<li>
<p><code>--eq</code><br />
<em>Only</em> “upgrade” to derivations that have the same version. This may
not seem very useful, but it actually is, e.g., when there is a new
release of Nixpkgs and you want to replace installed applications
with the same versions built against newer dependencies (to reduce
the number of dependencies floating around on your system).</p>
</li>
<li>
<p><code>--always</code><br />
In addition to upgrading to newer versions, also “upgrade” to
derivations that have the same or a lower version. I.e., derivations
may actually be downgraded depending on what is available in the
active Nix expression.</p>
</li>
</ul>
<p>For the other flags, see <code>--install</code>.</p>
<h2 id="examples-3"><a class="header" href="#examples-3">Examples</a></h2>
<pre><code class="language-console">$ nix-env --upgrade -A nixpkgs.gcc
upgrading `gcc-3.3.1' to `gcc-3.4'
</code></pre>
<p>When there are no updates available, nothing will happen:</p>
<pre><code class="language-console">$ nix-env --upgrade -A nixpkgs.pan
</code></pre>
<p>Using <code>-A</code> is preferred when possible, as it is faster and unambiguous but
it is also possible to upgrade to a specific version by matching the derivation name:</p>
<pre><code class="language-console">$ nix-env -u gcc-3.3.2 --always
upgrading `gcc-3.4' to `gcc-3.3.2'
</code></pre>
<p>To try to upgrade everything
(matching packages based on the part of the derivation name without version):</p>
<pre><code class="language-console">$ nix-env -u
upgrading `hello-2.1.2' to `hello-2.1.3'
upgrading `mozilla-1.2' to `mozilla-1.4'
</code></pre>
<h2 id="versions"><a class="header" href="#versions">Versions</a></h2>
<p>The upgrade operation determines whether a derivation <code>y</code> is an upgrade
of a derivation <code>x</code> by looking at their respective <code>name</code> attributes.
The names (e.g., <code>gcc-3.3.1</code> are split into two parts: the package name
(<code>gcc</code>), and the version (<code>3.3.1</code>). The version part starts after the
first dash not followed by a letter. <code>y</code> is considered an upgrade of <code>x</code>
if their package names match, and the version of <code>y</code> is higher than that
of <code>x</code>.</p>
<p>The versions are compared by splitting them into contiguous components
of numbers and letters. E.g., <code>3.3.1pre5</code> is split into <code>[3, 3, 1, &quot;pre&quot;, 5]</code>. These lists are then compared lexicographically (from left
to right). Corresponding components <code>a</code> and <code>b</code> are compared as follows.
If they are both numbers, integer comparison is used. If <code>a</code> is an empty
string and <code>b</code> is a number, <code>a</code> is considered less than <code>b</code>. The special
string component <code>pre</code> (for <em>pre-release</em>) is considered to be less than
other components. String components are considered less than number
components. Otherwise, they are compared lexicographically (i.e., using
case-sensitive string comparison).</p>
<p>This is illustrated by the following examples:</p>
<pre><code>1.0 &lt; 2.3
2.1 &lt; 2.3
2.3 = 2.3
2.5 &gt; 2.3
3.1 &gt; 2.3
2.3.1 &gt; 2.3
2.3.1 &gt; 2.3a
2.3pre1 &lt; 2.3
2.3pre3 &lt; 2.3pre12
2.3a &lt; 2.3c
2.3pre1 &lt; 2.3c
2.3pre1 &lt; 2.3q
</code></pre>
<h1 id="operation---uninstall"><a class="header" href="#operation---uninstall">Operation <code>--uninstall</code></a></h1>
<h2 id="synopsis-3"><a class="header" href="#synopsis-3">Synopsis</a></h2>
<p><code>nix-env</code> {<code>--uninstall</code> | <code>-e</code>} <em>drvnames…</em></p>
<h2 id="description-3"><a class="header" href="#description-3">Description</a></h2>
<p>The uninstall operation creates a new user environment, based on the
current generation of the active profile, from which the store paths
designated by the symbolic names <em>drvnames</em> are removed.</p>
<h2 id="examples-4"><a class="header" href="#examples-4">Examples</a></h2>
<pre><code class="language-console">$ nix-env --uninstall gcc
$ nix-env -e '.*' (remove everything)
</code></pre>
<h1 id="operation---set"><a class="header" href="#operation---set">Operation <code>--set</code></a></h1>
<h2 id="synopsis-4"><a class="header" href="#synopsis-4">Synopsis</a></h2>
<p><code>nix-env</code> <code>--set</code> <em>drvname</em></p>
<h2 id="description-4"><a class="header" href="#description-4">Description</a></h2>
<p>The <code>--set</code> operation modifies the current generation of a profile so
that it contains exactly the specified derivation, and nothing else.</p>
<h2 id="examples-5"><a class="header" href="#examples-5">Examples</a></h2>
<p>The following updates a profile such that its current generation will
contain just Firefox:</p>
<pre><code class="language-console">$ nix-env -p /nix/var/nix/profiles/browser --set firefox
</code></pre>
<h1 id="operation---set-flag"><a class="header" href="#operation---set-flag">Operation <code>--set-flag</code></a></h1>
<h2 id="synopsis-5"><a class="header" href="#synopsis-5">Synopsis</a></h2>
<p><code>nix-env</code> <code>--set-flag</code> <em>name</em> <em>value</em> <em>drvnames</em></p>
<h2 id="description-5"><a class="header" href="#description-5">Description</a></h2>
<p>The <code>--set-flag</code> operation allows meta attributes of installed packages
to be modified. There are several attributes that can be usefully
modified, because they affect the behaviour of <code>nix-env</code> or the user
environment build script:</p>
<ul>
<li>
<p><code>priority</code> can be changed to resolve filename clashes. The user
environment build script uses the <code>meta.priority</code> attribute of
derivations to resolve filename collisions between packages. Lower
priority values denote a higher priority. For instance, the GCC
wrapper package and the Binutils package in Nixpkgs both have a file
<code>bin/ld</code>, so previously if you tried to install both you would get a
collision. Now, on the other hand, the GCC wrapper declares a higher
priority than Binutils, so the former’s <code>bin/ld</code> is symlinked in the
user environment.</p>
</li>
<li>
<p><code>keep</code> can be set to <code>true</code> to prevent the package from being
upgraded or replaced. This is useful if you want to hang on to an
older version of a package.</p>
</li>
<li>
<p><code>active</code> can be set to <code>false</code> to “disable” the package. That is, no
symlinks will be generated to the files of the package, but it
remains part of the profile (so it won’t be garbage-collected). It
can be set back to <code>true</code> to re-enable the package.</p>
</li>
</ul>
<h2 id="examples-6"><a class="header" href="#examples-6">Examples</a></h2>
<p>To prevent the currently installed Firefox from being upgraded:</p>
<pre><code class="language-console">$ nix-env --set-flag keep true firefox
</code></pre>
<p>After this, <code>nix-env -u</code> will ignore Firefox.</p>
<p>To disable the currently installed Firefox, then install a new Firefox
while the old remains part of the profile:</p>
<pre><code class="language-console">$ nix-env -q
firefox-2.0.0.9 (the current one)

$ nix-env --preserve-installed -i firefox-2.0.0.11
installing `firefox-2.0.0.11'
building path(s) `/nix/store/myy0y59q3ig70dgq37jqwg1j0rsapzsl-user-environment'
collision between `/nix/store/...-firefox-2.0.0.11/bin/firefox'
  and `/nix/store/...-firefox-2.0.0.9/bin/firefox'.
(i.e., can’t have two active at the same time)

$ nix-env --set-flag active false firefox
setting flag on `firefox-2.0.0.9'

$ nix-env --preserve-installed -i firefox-2.0.0.11
installing `firefox-2.0.0.11'

$ nix-env -q
firefox-2.0.0.11 (the enabled one)
firefox-2.0.0.9 (the disabled one)
</code></pre>
<p>To make files from <code>binutils</code> take precedence over files from <code>gcc</code>:</p>
<pre><code class="language-console">$ nix-env --set-flag priority 5 binutils
$ nix-env --set-flag priority 10 gcc
</code></pre>
<h1 id="operation---query"><a class="header" href="#operation---query">Operation <code>--query</code></a></h1>
<h2 id="synopsis-6"><a class="header" href="#synopsis-6">Synopsis</a></h2>
<p><code>nix-env</code> {<code>--query</code> | <code>-q</code>} <em>names…</em>
[<code>--installed</code> | <code>--available</code> | <code>-a</code>]
[{<code>--status</code> | <code>-s</code>}]
[{<code>--attr-path</code> | <code>-P</code>}]
[<code>--no-name</code>]
[{<code>--compare-versions</code> | <code>-c</code>}]
[<code>--system</code>]
[<code>--drv-path</code>]
[<code>--out-path</code>]
[<code>--description</code>]
[<code>--meta</code>]
[<code>--xml</code>]
[<code>--json</code>]
[{<code>--prebuilt-only</code> | <code>-b</code>}]
[{<code>--attr</code> | <code>-A</code>} <em>attribute-path</em>]</p>
<h2 id="description-6"><a class="header" href="#description-6">Description</a></h2>
<p>The query operation displays information about either the store paths
that are installed in the current generation of the active profile
(<code>--installed</code>), or the derivations that are available for installation
in the active Nix expression (<code>--available</code>). It only prints information
about derivations whose symbolic name matches one of <em>names</em>.</p>
<p>The derivations are sorted by their <code>name</code> attributes.</p>
<h2 id="source-selection"><a class="header" href="#source-selection">Source selection</a></h2>
<p>The following flags specify the set of things on which the query
operates.</p>
<ul>
<li>
<p><code>--installed</code><br />
The query operates on the store paths that are installed in the
current generation of the active profile. This is the default.</p>
</li>
<li>
<p><code>--available</code>; <code>-a</code><br />
The query operates on the derivations that are available in the
active Nix expression.</p>
</li>
</ul>
<h2 id="queries"><a class="header" href="#queries">Queries</a></h2>
<p>The following flags specify what information to display about the
selected derivations. Multiple flags may be specified, in which case the
information is shown in the order given here. Note that the name of the
derivation is shown unless <code>--no-name</code> is specified.</p>
<ul>
<li>
<p><code>--xml</code><br />
Print the result in an XML representation suitable for automatic
processing by other tools. The root element is called <code>items</code>, which
contains a <code>item</code> element for each available or installed
derivation. The fields discussed below are all stored in attributes
of the <code>item</code> elements.</p>
</li>
<li>
<p><code>--json</code><br />
Print the result in a JSON representation suitable for automatic
processing by other tools.</p>
</li>
<li>
<p><code>--prebuilt-only</code> / <code>-b</code><br />
Show only derivations for which a substitute is registered, i.e.,
there is a pre-built binary available that can be downloaded in lieu
of building the derivation. Thus, this shows all packages that
probably can be installed quickly.</p>
</li>
<li>
<p><code>--status</code>; <code>-s</code><br />
Print the <em>status</em> of the derivation. The status consists of three
characters. The first is <code>I</code> or <code>-</code>, indicating whether the
derivation is currently installed in the current generation of the
active profile. This is by definition the case for <code>--installed</code>,
but not for <code>--available</code>. The second is <code>P</code> or <code>-</code>, indicating
whether the derivation is present on the system. This indicates
whether installation of an available derivation will require the
derivation to be built. The third is <code>S</code> or <code>-</code>, indicating whether
a substitute is available for the derivation.</p>
</li>
<li>
<p><code>--attr-path</code>; <code>-P</code><br />
Print the <em>attribute path</em> of the derivation, which can be used to
unambiguously select it using the <code>--attr</code> option available in
commands that install derivations like <code>nix-env --install</code>. This
option only works together with <code>--available</code></p>
</li>
<li>
<p><code>--no-name</code><br />
Suppress printing of the <code>name</code> attribute of each derivation.</p>
</li>
<li>
<p><code>--compare-versions</code> / <code>-c</code><br />
Compare installed versions to available versions, or vice versa (if
<code>--available</code> is given). This is useful for quickly seeing whether
upgrades for installed packages are available in a Nix expression. A
column is added with the following meaning:</p>
<ul>
<li>
<p><code>&lt;</code> <em>version</em><br />
A newer version of the package is available or installed.</p>
</li>
<li>
<p><code>=</code> <em>version</em><br />
At most the same version of the package is available or
installed.</p>
</li>
<li>
<p><code>&gt;</code> <em>version</em><br />
Only older versions of the package are available or installed.</p>
</li>
<li>
<p><code>- ?</code><br />
No version of the package is available or installed.</p>
</li>
</ul>
</li>
<li>
<p><code>--system</code><br />
Print the <code>system</code> attribute of the derivation.</p>
</li>
<li>
<p><code>--drv-path</code><br />
Print the path of the <a href="command-ref/../glossary.html#gloss-store-derivation">store derivation</a>.</p>
</li>
<li>
<p><code>--out-path</code><br />
Print the output path of the derivation.</p>
</li>
<li>
<p><code>--description</code><br />
Print a short (one-line) description of the derivation, if
available. The description is taken from the <code>meta.description</code>
attribute of the derivation.</p>
</li>
<li>
<p><code>--meta</code><br />
Print all of the meta-attributes of the derivation. This option is
only available with <code>--xml</code> or <code>--json</code>.</p>
</li>
</ul>
<h2 id="examples-7"><a class="header" href="#examples-7">Examples</a></h2>
<p>To show installed packages:</p>
<pre><code class="language-console">$ nix-env -q
bison-1.875c
docbook-xml-4.2
firefox-1.0.4
MPlayer-1.0pre7
ORBit2-2.8.3
…
</code></pre>
<p>To show available packages:</p>
<pre><code class="language-console">$ nix-env -qa
firefox-1.0.7
GConf-2.4.0.1
MPlayer-1.0pre7
ORBit2-2.8.3
…
</code></pre>
<p>To show the status of available packages:</p>
<pre><code class="language-console">$ nix-env -qas
-P- firefox-1.0.7   (not installed but present)
--S GConf-2.4.0.1   (not present, but there is a substitute for fast installation)
--S MPlayer-1.0pre3 (i.e., this is not the installed MPlayer, even though the version is the same!)
IP- ORBit2-2.8.3    (installed and by definition present)
…
</code></pre>
<p>To show available packages in the Nix expression <code>foo.nix</code>:</p>
<pre><code class="language-console">$ nix-env -f ./foo.nix -qa
foo-1.2.3
</code></pre>
<p>To compare installed versions to what’s available:</p>
<pre><code class="language-console">$ nix-env -qc
...
acrobat-reader-7.0 - ?      (package is not available at all)
autoconf-2.59      = 2.59   (same version)
firefox-1.0.4      &lt; 1.0.7  (a more recent version is available)
...
</code></pre>
<p>To show all packages with “<code>zip</code>” in the name:</p>
<pre><code class="language-console">$ nix-env -qa '.*zip.*'
bzip2-1.0.6
gzip-1.6
zip-3.0
…
</code></pre>
<p>To show all packages with “<code>firefox</code>” or “<code>chromium</code>” in the name:</p>
<pre><code class="language-console">$ nix-env -qa '.*(firefox|chromium).*'
chromium-37.0.2062.94
chromium-beta-38.0.2125.24
firefox-32.0.3
firefox-with-plugins-13.0.1
…
</code></pre>
<p>To show all packages in the latest revision of the Nixpkgs repository:</p>
<pre><code class="language-console">$ nix-env -f https://github.com/NixOS/nixpkgs/archive/master.tar.gz -qa
</code></pre>
<h1 id="operation---switch-profile"><a class="header" href="#operation---switch-profile">Operation <code>--switch-profile</code></a></h1>
<h2 id="synopsis-7"><a class="header" href="#synopsis-7">Synopsis</a></h2>
<p><code>nix-env</code> {<code>--switch-profile</code> | <code>-S</code>} <em>path</em></p>
<h2 id="description-7"><a class="header" href="#description-7">Description</a></h2>
<p>This operation makes <em>path</em> the current profile for the user. That is,
the symlink <code>~/.nix-profile</code> is made to point to <em>path</em>.</p>
<h2 id="examples-8"><a class="header" href="#examples-8">Examples</a></h2>
<pre><code class="language-console">$ nix-env -S ~/my-profile
</code></pre>
<h1 id="operation---list-generations"><a class="header" href="#operation---list-generations">Operation <code>--list-generations</code></a></h1>
<h2 id="synopsis-8"><a class="header" href="#synopsis-8">Synopsis</a></h2>
<p><code>nix-env</code> <code>--list-generations</code></p>
<h2 id="description-8"><a class="header" href="#description-8">Description</a></h2>
<p>This operation print a list of all the currently existing generations
for the active profile. These may be switched to using the
<code>--switch-generation</code> operation. It also prints the creation date of the
generation, and indicates the current generation.</p>
<h2 id="examples-9"><a class="header" href="#examples-9">Examples</a></h2>
<pre><code class="language-console">$ nix-env --list-generations
  95   2004-02-06 11:48:24
  96   2004-02-06 11:49:01
  97   2004-02-06 16:22:45
  98   2004-02-06 16:24:33   (current)
</code></pre>
<h1 id="operation---delete-generations"><a class="header" href="#operation---delete-generations">Operation <code>--delete-generations</code></a></h1>
<h2 id="synopsis-9"><a class="header" href="#synopsis-9">Synopsis</a></h2>
<p><code>nix-env</code> <code>--delete-generations</code> <em>generations</em></p>
<h2 id="description-9"><a class="header" href="#description-9">Description</a></h2>
<p>This operation deletes the specified generations of the current profile.
The generations can be a list of generation numbers, the special value
<code>old</code> to delete all non-current generations, a value such as <code>30d</code> to
delete all generations older than the specified number of days (except
for the generation that was active at that point in time), or a value
such as <code>+5</code> to keep the last <code>5</code> generations ignoring any newer than
current, e.g., if <code>30</code> is the current generation <code>+5</code> will delete
generation <code>25</code> and all older generations. Periodically deleting old
generations is important to make garbage collection effective.</p>
<h2 id="examples-10"><a class="header" href="#examples-10">Examples</a></h2>
<pre><code class="language-console">$ nix-env --delete-generations 3 4 8
</code></pre>
<pre><code class="language-console">$ nix-env --delete-generations +5
</code></pre>
<pre><code class="language-console">$ nix-env --delete-generations 30d
</code></pre>
<pre><code class="language-console">$ nix-env -p other_profile --delete-generations old
</code></pre>
<h1 id="operation---switch-generation"><a class="header" href="#operation---switch-generation">Operation <code>--switch-generation</code></a></h1>
<h2 id="synopsis-10"><a class="header" href="#synopsis-10">Synopsis</a></h2>
<p><code>nix-env</code> {<code>--switch-generation</code> | <code>-G</code>} <em>generation</em></p>
<h2 id="description-10"><a class="header" href="#description-10">Description</a></h2>
<p>This operation makes generation number <em>generation</em> the current
generation of the active profile. That is, if the <code>profile</code> is the path
to the active profile, then the symlink <code>profile</code> is made to point to
<code>profile-generation-link</code>, which is in turn a symlink to the actual user
environment in the Nix store.</p>
<p>Switching will fail if the specified generation does not exist.</p>
<h2 id="examples-11"><a class="header" href="#examples-11">Examples</a></h2>
<pre><code class="language-console">$ nix-env -G 42
switching from generation 50 to 42
</code></pre>
<h1 id="operation---rollback"><a class="header" href="#operation---rollback">Operation <code>--rollback</code></a></h1>
<h2 id="synopsis-11"><a class="header" href="#synopsis-11">Synopsis</a></h2>
<p><code>nix-env</code> <code>--rollback</code></p>
<h2 id="description-11"><a class="header" href="#description-11">Description</a></h2>
<p>This operation switches to the “previous” generation of the active
profile, that is, the highest numbered generation lower than the current
generation, if it exists. It is just a convenience wrapper around
<code>--list-generations</code> and <code>--switch-generation</code>.</p>
<h2 id="examples-12"><a class="header" href="#examples-12">Examples</a></h2>
<pre><code class="language-console">$ nix-env --rollback
switching from generation 92 to 91
</code></pre>
<pre><code class="language-console">$ nix-env --rollback
error: no generation older than the current (91) exists
</code></pre>
<h1 id="environment-variables-1"><a class="header" href="#environment-variables-1">Environment variables</a></h1>
<ul>
<li><code>NIX_PROFILE</code><br />
Location of the Nix profile. Defaults to the target of the symlink
<code>~/.nix-profile</code>, if it exists, or <code>/nix/var/nix/profiles/default</code>
otherwise.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="name-1"><a class="header" href="#name-1">Name</a></h1>
<p><code>nix-build</code> - build a Nix expression</p>
<h1 id="synopsis-12"><a class="header" href="#synopsis-12">Synopsis</a></h1>
<p><code>nix-build</code> [<em>paths…</em>]
[<code>--arg</code> <em>name</em> <em>value</em>]
[<code>--argstr</code> <em>name</em> <em>value</em>]
[{<code>--attr</code> | <code>-A</code>} <em>attrPath</em>]
[<code>--no-out-link</code>]
[<code>--dry-run</code>]
[{<code>--out-link</code> | <code>-o</code>} <em>outlink</em>]</p>
<h1 id="disambiguation"><a class="header" href="#disambiguation">Disambiguation</a></h1>
<p>This man page describes the command <code>nix-build</code>, which is distinct from <code>nix build</code>. For documentation on the latter, run <code>nix build --help</code> or see <code>man nix3-build</code>.</p>
<h1 id="description-12"><a class="header" href="#description-12">Description</a></h1>
<p>The <code>nix-build</code> command builds the derivations described by the Nix
expressions in <em>paths</em>. If the build succeeds, it places a symlink to
the result in the current directory. The symlink is called <code>result</code>. If
there are multiple Nix expressions, or the Nix expressions evaluate to
multiple derivations, multiple sequentially numbered symlinks are
created (<code>result</code>, <code>result-2</code>, and so on).</p>
<p>If no <em>paths</em> are specified, then <code>nix-build</code> will use <code>default.nix</code> in
the current directory, if it exists.</p>
<p>If an element of <em>paths</em> starts with <code>http://</code> or <code>https://</code>, it is
interpreted as the URL of a tarball that will be downloaded and unpacked
to a temporary location. The tarball must include a single top-level
directory containing at least a file named <code>default.nix</code>.</p>
<p><code>nix-build</code> is essentially a wrapper around
<a href="command-ref/nix-instantiate.html"><code>nix-instantiate</code></a> (to translate a high-level Nix
expression to a low-level <a href="command-ref/../glossary.html#gloss-store-derivation">store derivation</a>) and <a href="command-ref/nix-store.html#operation---realise"><code>nix-store --realise</code></a> (to build the store
derivation).</p>
<blockquote>
<p><strong>Warning</strong></p>
<p>The result of the build is automatically registered as a root of the
Nix garbage collector. This root disappears automatically when the
<code>result</code> symlink is deleted or renamed. So don’t rename the symlink.</p>
</blockquote>
<h1 id="options"><a class="header" href="#options">Options</a></h1>
<p>All options not listed here are passed to <code>nix-store --realise</code>, except for <code>--arg</code> and <code>--attr</code> / <code>-A</code> which are passed to
<code>nix-instantiate</code>.</p>
<ul>
<li>
<p><span id="opt-no-out-link"><a href="command-ref/nix-build.html#opt-no-out-link"><code>--no-out-link</code></a><span></p>
<p>Do not create a symlink to the output path. Note that as a result
the output does not become a root of the garbage collector, and so
might be deleted by <code>nix-store --gc</code>.</p>
</li>
<li>
<p><span id="opt-dry-run"><a href="command-ref/nix-build.html#opt-dry-run"><code>--dry-run</code></a></span></p>
<p>Show what store paths would be built or downloaded.</p>
</li>
<li>
<p><span id="opt-out-link"><a href="command-ref/nix-build.html#opt-out-link"><code>--out-link</code></a></span> / <code>-o</code> <em>outlink</em></p>
<p>Change the name of the symlink to the output path created from
<code>result</code> to <em>outlink</em>.</p>
</li>
</ul>
<p>The following common options are supported:</p>
<h1 id="examples-13"><a class="header" href="#examples-13">Examples</a></h1>
<pre><code class="language-console">$ nix-build '&lt;nixpkgs&gt;' -A firefox
store derivation is /nix/store/qybprl8sz2lc...-firefox-1.5.0.7.drv
/nix/store/d18hyl92g30l...-firefox-1.5.0.7

$ ls -l result
lrwxrwxrwx  ...  result -&gt; /nix/store/d18hyl92g30l...-firefox-1.5.0.7

$ ls ./result/bin/
firefox  firefox-config
</code></pre>
<p>If a derivation has multiple outputs, <code>nix-build</code> will build the default
(first) output. You can also build all outputs:</p>
<pre><code class="language-console">$ nix-build '&lt;nixpkgs&gt;' -A openssl.all
</code></pre>
<p>This will create a symlink for each output named <code>result-outputname</code>.
The suffix is omitted if the output name is <code>out</code>. So if <code>openssl</code> has
outputs <code>out</code>, <code>bin</code> and <code>man</code>, <code>nix-build</code> will create symlinks
<code>result</code>, <code>result-bin</code> and <code>result-man</code>. It’s also possible to build a
specific output:</p>
<pre><code class="language-console">$ nix-build '&lt;nixpkgs&gt;' -A openssl.man
</code></pre>
<p>This will create a symlink <code>result-man</code>.</p>
<p>Build a Nix expression given on the command line:</p>
<pre><code class="language-console">$ nix-build -E 'with import &lt;nixpkgs&gt; { }; runCommand &quot;foo&quot; { } &quot;echo bar &gt; $out&quot;'
$ cat ./result
bar
</code></pre>
<p>Build the GNU Hello package from the latest revision of the master
branch of Nixpkgs:</p>
<pre><code class="language-console">$ nix-build https://github.com/NixOS/nixpkgs/archive/master.tar.gz -A hello
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="name-2"><a class="header" href="#name-2">Name</a></h1>
<p><code>nix-shell</code> - start an interactive shell based on a Nix expression</p>
<h1 id="synopsis-13"><a class="header" href="#synopsis-13">Synopsis</a></h1>
<p><code>nix-shell</code>
[<code>--arg</code> <em>name</em> <em>value</em>]
[<code>--argstr</code> <em>name</em> <em>value</em>]
[{<code>--attr</code> | <code>-A</code>} <em>attrPath</em>]
[<code>--command</code> <em>cmd</em>]
[<code>--run</code> <em>cmd</em>]
[<code>--exclude</code> <em>regexp</em>]
[<code>--pure</code>]
[<code>--keep</code> <em>name</em>]
{{<code>--packages</code> | <code>-p</code>} {<em>packages</em> | <em>expressions</em>} … | [<em>path</em>]}</p>
<h1 id="disambiguation-1"><a class="header" href="#disambiguation-1">Disambiguation</a></h1>
<p>This man page describes the command <code>nix-shell</code>, which is distinct from <code>nix shell</code>. For documentation on the latter, run <code>nix shell --help</code> or see <code>man nix3-shell</code>.</p>
<h1 id="description-13"><a class="header" href="#description-13">Description</a></h1>
<p>The command <code>nix-shell</code> will build the dependencies of the specified
derivation, but not the derivation itself. It will then start an
interactive shell in which all environment variables defined by the
derivation <em>path</em> have been set to their corresponding values, and the
script <code>$stdenv/setup</code> has been sourced. This is useful for reproducing
the environment of a derivation for development.</p>
<p>If <em>path</em> is not given, <code>nix-shell</code> defaults to <code>shell.nix</code> if it
exists, and <code>default.nix</code> otherwise.</p>
<p>If <em>path</em> starts with <code>http://</code> or <code>https://</code>, it is interpreted as the
URL of a tarball that will be downloaded and unpacked to a temporary
location. The tarball must include a single top-level directory
containing at least a file named <code>default.nix</code>.</p>
<p>If the derivation defines the variable <code>shellHook</code>, it will be run
after <code>$stdenv/setup</code> has been sourced. Since this hook is not executed
by regular Nix builds, it allows you to perform initialisation specific
to <code>nix-shell</code>. For example, the derivation attribute</p>
<pre><code class="language-nix">shellHook =
  ''
    echo &quot;Hello shell&quot;
    export SOME_API_TOKEN=&quot;$(cat ~/.config/some-app/api-token)&quot;
  '';
</code></pre>
<p>will cause <code>nix-shell</code> to print <code>Hello shell</code> and set the <code>SOME_API_TOKEN</code>
environment variable to a user-configured value.</p>
<h1 id="options-1"><a class="header" href="#options-1">Options</a></h1>
<p>All options not listed here are passed to <code>nix-store --realise</code>, except for <code>--arg</code> and <code>--attr</code> / <code>-A</code> which are passed to
<code>nix-instantiate</code>.</p>
<ul>
<li>
<p><code>--command</code> <em>cmd</em><br />
In the environment of the derivation, run the shell command <em>cmd</em>.
This command is executed in an interactive shell. (Use <code>--run</code> to
use a non-interactive shell instead.) However, a call to <code>exit</code> is
implicitly added to the command, so the shell will exit after
running the command. To prevent this, add <code>return</code> at the end;
e.g.  <code>--command &quot;echo Hello; return&quot;</code> will print <code>Hello</code> and then
drop you into the interactive shell. This can be useful for doing
any additional initialisation.</p>
</li>
<li>
<p><code>--run</code> <em>cmd</em><br />
Like <code>--command</code>, but executes the command in a non-interactive
shell. This means (among other things) that if you hit Ctrl-C while
the command is running, the shell exits.</p>
</li>
<li>
<p><code>--exclude</code> <em>regexp</em><br />
Do not build any dependencies whose store path matches the regular
expression <em>regexp</em>. This option may be specified multiple times.</p>
</li>
<li>
<p><code>--pure</code><br />
If this flag is specified, the environment is almost entirely
cleared before the interactive shell is started, so you get an
environment that more closely corresponds to the “real” Nix build. A
few variables, in particular <code>HOME</code>, <code>USER</code> and <code>DISPLAY</code>, are
retained.</p>
</li>
<li>
<p><code>--packages</code> / <code>-p</code> <em>packages</em>…<br />
Set up an environment in which the specified packages are present.
The command line arguments are interpreted as attribute names inside
the Nix Packages collection. Thus, <code>nix-shell -p libjpeg openjdk</code>
will start a shell in which the packages denoted by the attribute
names <code>libjpeg</code> and <code>openjdk</code> are present.</p>
</li>
<li>
<p><code>-i</code> <em>interpreter</em><br />
The chained script interpreter to be invoked by <code>nix-shell</code>. Only
applicable in <code>#!</code>-scripts (described below).</p>
</li>
<li>
<p><code>--keep</code> <em>name</em><br />
When a <code>--pure</code> shell is started, keep the listed environment
variables.</p>
</li>
</ul>
<p>The following common options are supported:</p>
<h1 id="environment-variables-2"><a class="header" href="#environment-variables-2">Environment variables</a></h1>
<ul>
<li><code>NIX_BUILD_SHELL</code><br />
Shell used to start the interactive environment. Defaults to the
<code>bash</code> found in <code>&lt;nixpkgs&gt;</code>, falling back to the <code>bash</code> found in
<code>PATH</code> if not found.</li>
</ul>
<h1 id="examples-14"><a class="header" href="#examples-14">Examples</a></h1>
<p>To build the dependencies of the package Pan, and start an interactive
shell in which to build it:</p>
<pre><code class="language-console">$ nix-shell '&lt;nixpkgs&gt;' -A pan
[nix-shell]$ eval ${unpackPhase:-unpackPhase}
[nix-shell]$ cd pan-*
[nix-shell]$ eval ${configurePhase:-configurePhase}
[nix-shell]$ eval ${buildPhase:-buildPhase}
[nix-shell]$ ./pan/gui/pan
</code></pre>
<p>The reason we use form <code>eval ${configurePhase:-configurePhase}</code> here is because
those packages that override these phases do so by exporting the overridden
values in the environment variable of the same name.
Here bash is being told to either evaluate the contents of 'configurePhase',
if it exists as a variable, otherwise evaluate the configurePhase function.</p>
<p>To clear the environment first, and do some additional automatic
initialisation of the interactive shell:</p>
<pre><code class="language-console">$ nix-shell '&lt;nixpkgs&gt;' -A pan --pure \
    --command 'export NIX_DEBUG=1; export NIX_CORES=8; return'
</code></pre>
<p>Nix expressions can also be given on the command line using the <code>-E</code> and
<code>-p</code> flags. For instance, the following starts a shell containing the
packages <code>sqlite</code> and <code>libX11</code>:</p>
<pre><code class="language-console">$ nix-shell -E 'with import &lt;nixpkgs&gt; { }; runCommand &quot;dummy&quot; { buildInputs = [ sqlite xorg.libX11 ]; } &quot;&quot;'
</code></pre>
<p>A shorter way to do the same is:</p>
<pre><code class="language-console">$ nix-shell -p sqlite xorg.libX11
[nix-shell]$ echo $NIX_LDFLAGS
… -L/nix/store/j1zg5v…-sqlite-3.8.0.2/lib -L/nix/store/0gmcz9…-libX11-1.6.1/lib …
</code></pre>
<p>Note that <code>-p</code> accepts multiple full nix expressions that are valid in
the <code>buildInputs = [ ... ]</code> shown above, not only package names. So the
following is also legal:</p>
<pre><code class="language-console">$ nix-shell -p sqlite 'git.override { withManual = false; }'
</code></pre>
<p>The <code>-p</code> flag looks up Nixpkgs in the Nix search path. You can override
it by passing <code>-I</code> or setting <code>NIX_PATH</code>. For example, the following
gives you a shell containing the Pan package from a specific revision of
Nixpkgs:</p>
<pre><code class="language-console">$ nix-shell -p pan -I nixpkgs=https://github.com/NixOS/nixpkgs/archive/8a3eea054838b55aca962c3fbde9c83c102b8bf2.tar.gz

[nix-shell:~]$ pan --version
Pan 0.139
</code></pre>
<h1 id="use-as-a--interpreter"><a class="header" href="#use-as-a--interpreter">Use as a <code>#!</code>-interpreter</a></h1>
<p>You can use <code>nix-shell</code> as a script interpreter to allow scripts written
in arbitrary languages to obtain their own dependencies via Nix. This is
done by starting the script with the following lines:</p>
<pre><code class="language-bash">#! /usr/bin/env nix-shell
#! nix-shell -i real-interpreter -p packages
</code></pre>
<p>where <em>real-interpreter</em> is the “real” script interpreter that will be
invoked by <code>nix-shell</code> after it has obtained the dependencies and
initialised the environment, and <em>packages</em> are the attribute names of
the dependencies in Nixpkgs.</p>
<p>The lines starting with <code>#! nix-shell</code> specify <code>nix-shell</code> options (see
above). Note that you cannot write <code>#! /usr/bin/env nix-shell -i ...</code>
because many operating systems only allow one argument in <code>#!</code> lines.</p>
<p>For example, here is a Python script that depends on Python and the
<code>prettytable</code> package:</p>
<pre><code class="language-python">#! /usr/bin/env nix-shell
#! nix-shell -i python -p python pythonPackages.prettytable

import prettytable

# Print a simple table.
t = prettytable.PrettyTable([&quot;N&quot;, &quot;N^2&quot;])
for n in range(1, 10): t.add_row([n, n * n])
print t
</code></pre>
<p>Similarly, the following is a Perl script that specifies that it
requires Perl and the <code>HTML::TokeParser::Simple</code> and <code>LWP</code> packages:</p>
<pre><code class="language-perl">#! /usr/bin/env nix-shell
#! nix-shell -i perl -p perl perlPackages.HTMLTokeParserSimple perlPackages.LWP

use HTML::TokeParser::Simple;

# Fetch nixos.org and print all hrefs.
my $p = HTML::TokeParser::Simple-&gt;new(url =&gt; 'http://nixos.org/');

while (my $token = $p-&gt;get_tag(&quot;a&quot;)) {
    my $href = $token-&gt;get_attr(&quot;href&quot;);
    print &quot;$href\n&quot; if $href;
}
</code></pre>
<p>Sometimes you need to pass a simple Nix expression to customize a
package like Terraform:</p>
<pre><code class="language-bash">#! /usr/bin/env nix-shell
#! nix-shell -i bash -p &quot;terraform.withPlugins (plugins: [ plugins.openstack ])&quot;

terraform apply
</code></pre>
<blockquote>
<p><strong>Note</strong></p>
<p>You must use double quotes (<code>&quot;</code>) when passing a simple Nix expression
in a nix-shell shebang.</p>
</blockquote>
<p>Finally, using the merging of multiple nix-shell shebangs the following
Haskell script uses a specific branch of Nixpkgs/NixOS (the 20.03 stable
branch):</p>
<pre><code class="language-haskell">#! /usr/bin/env nix-shell
#! nix-shell -i runghc -p &quot;haskellPackages.ghcWithPackages (ps: [ps.download-curl ps.tagsoup])&quot;
#! nix-shell -I nixpkgs=https://github.com/NixOS/nixpkgs/archive/nixos-20.03.tar.gz

import Network.Curl.Download
import Text.HTML.TagSoup
import Data.Either
import Data.ByteString.Char8 (unpack)

-- Fetch nixos.org and print all hrefs.
main = do
  resp &lt;- openURI &quot;https://nixos.org/&quot;
  let tags = filter (isTagOpenName &quot;a&quot;) $ parseTags $ unpack $ fromRight undefined resp
  let tags' = map (fromAttrib &quot;href&quot;) tags
  mapM_ putStrLn $ filter (/= &quot;&quot;) tags'
</code></pre>
<p>If you want to be even more precise, you can specify a specific revision
of Nixpkgs:</p>
<pre><code>#! nix-shell -I nixpkgs=https://github.com/NixOS/nixpkgs/archive/0672315759b3e15e2121365f067c1c8c56bb4722.tar.gz
</code></pre>
<p>The examples above all used <code>-p</code> to get dependencies from Nixpkgs. You
can also use a Nix expression to build your own dependencies. For
example, the Python example could have been written as:</p>
<pre><code class="language-python">#! /usr/bin/env nix-shell
#! nix-shell deps.nix -i python
</code></pre>
<p>where the file <code>deps.nix</code> in the same directory as the <code>#!</code>-script
contains:</p>
<pre><code class="language-nix">with import &lt;nixpkgs&gt; {};

runCommand &quot;dummy&quot; { buildInputs = [ python pythonPackages.prettytable ]; } &quot;&quot;
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="name-3"><a class="header" href="#name-3">Name</a></h1>
<p><code>nix-store</code> - manipulate or query the Nix store</p>
<h1 id="synopsis-14"><a class="header" href="#synopsis-14">Synopsis</a></h1>
<p><code>nix-store</code> <em>operation</em> [<em>options…</em>] [<em>arguments…</em>]
[<code>--option</code> <em>name</em> <em>value</em>]
[<code>--add-root</code> <em>path</em>]</p>
<h1 id="description-14"><a class="header" href="#description-14">Description</a></h1>
<p>The command <code>nix-store</code> performs primitive operations on the Nix store.
You generally do not need to run this command manually.</p>
<p><code>nix-store</code> takes exactly one <em>operation</em> flag which indicates the
subcommand to be performed. These are documented below.</p>
<h1 id="common-options-2"><a class="header" href="#common-options-2">Common options</a></h1>
<p>This section lists the options that are common to all operations. These
options are allowed for every subcommand, though they may not always
have an effect.</p>
<ul>
<li>
<p><span id="opt-add-root"><a href="command-ref/nix-store.html#opt-add-root"><code>--add-root</code></a></span> <em>path</em></p>
<p>Causes the result of a realisation (<code>--realise</code> and
<code>--force-realise</code>) to be registered as a root of the garbage
collector. <em>path</em> will be created as a symlink to the resulting
store path. In addition, a uniquely named symlink to <em>path</em> will
be created in <code>/nix/var/nix/gcroots/auto/</code>. For instance,</p>
<pre><code class="language-console">$ nix-store --add-root /home/eelco/bla/result -r ...

$ ls -l /nix/var/nix/gcroots/auto
lrwxrwxrwx    1 ... 2005-03-13 21:10 dn54lcypm8f8... -&gt; /home/eelco/bla/result

$ ls -l /home/eelco/bla/result
lrwxrwxrwx    1 ... 2005-03-13 21:10 /home/eelco/bla/result -&gt; /nix/store/1r11343n6qd4...-f-spot-0.0.10
</code></pre>
<p>Thus, when <code>/home/eelco/bla/result</code> is removed, the GC root in the
<code>auto</code> directory becomes a dangling symlink and will be ignored by
the collector.</p>
<blockquote>
<p><strong>Warning</strong></p>
<p>Note that it is not possible to move or rename GC roots, since
the symlink in the <code>auto</code> directory will still point to the old
location.</p>
</blockquote>
<p>If there are multiple results, then multiple symlinks will be
created by sequentially numbering symlinks beyond the first one
(e.g., <code>foo</code>, <code>foo-2</code>, <code>foo-3</code>, and so on).</p>
</li>
</ul>
<h1 id="operation---realise"><a class="header" href="#operation---realise">Operation <code>--realise</code></a></h1>
<h2 id="synopsis-15"><a class="header" href="#synopsis-15">Synopsis</a></h2>
<p><code>nix-store</code> {<code>--realise</code> | <code>-r</code>} <em>paths…</em> [<code>--dry-run</code>]</p>
<h2 id="description-15"><a class="header" href="#description-15">Description</a></h2>
<p>The operation <code>--realise</code> essentially “builds” the specified store
paths. Realisation is a somewhat overloaded term:</p>
<ul>
<li>
<p>If the store path is a <em>derivation</em>, realisation ensures that the
output paths of the derivation are <a href="command-ref/../glossary.html">valid</a> (i.e.,
the output path and its closure exist in the file system). This
can be done in several ways. First, it is possible that the
outputs are already valid, in which case we are done
immediately. Otherwise, there may be <a href="command-ref/../glossary.html">substitutes</a>
that produce the outputs (e.g., by downloading them). Finally, the
outputs can be produced by running the build task described
by the derivation.</p>
</li>
<li>
<p>If the store path is not a derivation, realisation ensures that the
specified path is valid (i.e., it and its closure exist in the file
system). If the path is already valid, we are done immediately.
Otherwise, the path and any missing paths in its closure may be
produced through substitutes. If there are no (successful)
substitutes, realisation fails.</p>
</li>
</ul>
<p>The output path of each derivation is printed on standard output. (For
non-derivations argument, the argument itself is printed.)</p>
<p>The following flags are available:</p>
<ul>
<li>
<p><code>--dry-run</code><br />
Print on standard error a description of what packages would be
built or downloaded, without actually performing the operation.</p>
</li>
<li>
<p><code>--ignore-unknown</code><br />
If a non-derivation path does not have a substitute, then silently
ignore it.</p>
</li>
<li>
<p><code>--check</code><br />
This option allows you to check whether a derivation is
deterministic. It rebuilds the specified derivation and checks
whether the result is bitwise-identical with the existing outputs,
printing an error if that’s not the case. The outputs of the
specified derivation must already exist. When used with <code>-K</code>, if an
output path is not identical to the corresponding output from the
previous build, the new output path is left in
<code>/nix/store/name.check.</code></p>
</li>
</ul>
<p>Special exit codes:</p>
<ul>
<li>
<p><code>100</code><br />
Generic build failure, the builder process returned with a non-zero
exit code.</p>
</li>
<li>
<p><code>101</code><br />
Build timeout, the build was aborted because it did not complete
within the specified <code>timeout</code>.</p>
</li>
<li>
<p><code>102</code><br />
Hash mismatch, the build output was rejected because it does not
match the <a href="command-ref/../language/advanced-attributes.html"><code>outputHash</code> attribute of the
derivation</a>.</p>
</li>
<li>
<p><code>104</code><br />
Not deterministic, the build succeeded in check mode but the
resulting output is not binary reproducible.</p>
</li>
</ul>
<p>With the <code>--keep-going</code> flag it's possible for multiple failures to
occur, in this case the 1xx status codes are or combined using binary
or.</p>
<pre><code>1100100
   ^^^^
   |||`- timeout
   ||`-- output hash mismatch
   |`--- build failure
   `---- not deterministic
</code></pre>
<h2 id="examples-15"><a class="header" href="#examples-15">Examples</a></h2>
<p>This operation is typically used to build <a href="command-ref/../glossary.html#gloss-store-derivation">store derivation</a>s produced by
<a href="command-ref/./nix-instantiate.html"><code>nix-instantiate</code></a>:</p>
<pre><code class="language-console">$ nix-store -r $(nix-instantiate ./test.nix)
/nix/store/31axcgrlbfsxzmfff1gyj1bf62hvkby2-aterm-2.3.1
</code></pre>
<p>This is essentially what <a href="command-ref/nix-build.html"><code>nix-build</code></a> does.</p>
<p>To test whether a previously-built derivation is deterministic:</p>
<pre><code class="language-console">$ nix-build '&lt;nixpkgs&gt;' -A hello --check -K
</code></pre>
<p>Use <a href="command-ref/nix-store.html#operation---read-log"><code>--read-log</code></a> to show the stderr and stdout of a build:</p>
<pre><code class="language-console">$ nix-store --read-log $(nix-instantiate ./test.nix)
</code></pre>
<h1 id="operation---serve"><a class="header" href="#operation---serve">Operation <code>--serve</code></a></h1>
<h2 id="synopsis-16"><a class="header" href="#synopsis-16">Synopsis</a></h2>
<p><code>nix-store</code> <code>--serve</code> [<code>--write</code>]</p>
<h2 id="description-16"><a class="header" href="#description-16">Description</a></h2>
<p>The operation <code>--serve</code> provides access to the Nix store over stdin and
stdout, and is intended to be used as a means of providing Nix store
access to a restricted ssh user.</p>
<p>The following flags are available:</p>
<ul>
<li><code>--write</code><br />
Allow the connected client to request the realization of
derivations. In effect, this can be used to make the host act as a
remote builder.</li>
</ul>
<h2 id="examples-16"><a class="header" href="#examples-16">Examples</a></h2>
<p>To turn a host into a build server, the <code>authorized_keys</code> file can be
used to provide build access to a given SSH public key:</p>
<pre><code class="language-console">$ cat &lt;&lt;EOF &gt;&gt;/root/.ssh/authorized_keys
command=&quot;nice -n20 nix-store --serve --write&quot; ssh-rsa AAAAB3NzaC1yc2EAAAA...
EOF
</code></pre>
<h1 id="operation---gc"><a class="header" href="#operation---gc">Operation <code>--gc</code></a></h1>
<h2 id="synopsis-17"><a class="header" href="#synopsis-17">Synopsis</a></h2>
<p><code>nix-store</code> <code>--gc</code> [<code>--print-roots</code> | <code>--print-live</code> | <code>--print-dead</code>] [<code>--max-freed</code> <em>bytes</em>]</p>
<h2 id="description-17"><a class="header" href="#description-17">Description</a></h2>
<p>Without additional flags, the operation <code>--gc</code> performs a garbage
collection on the Nix store. That is, all paths in the Nix store not
reachable via file system references from a set of “roots”, are deleted.</p>
<p>The following suboperations may be specified:</p>
<ul>
<li>
<p><code>--print-roots</code><br />
This operation prints on standard output the set of roots used by
the garbage collector.</p>
</li>
<li>
<p><code>--print-live</code><br />
This operation prints on standard output the set of “live” store
paths, which are all the store paths reachable from the roots. Live
paths should never be deleted, since that would break consistency —
it would become possible that applications are installed that
reference things that are no longer present in the store.</p>
</li>
<li>
<p><code>--print-dead</code><br />
This operation prints out on standard output the set of “dead” store
paths, which is just the opposite of the set of live paths: any path
in the store that is not live (with respect to the roots) is dead.</p>
</li>
</ul>
<p>By default, all unreachable paths are deleted. The following options
control what gets deleted and in what order:</p>
<ul>
<li><code>--max-freed</code> <em>bytes</em><br />
Keep deleting paths until at least <em>bytes</em> bytes have been deleted,
then stop. The argument <em>bytes</em> can be followed by the
multiplicative suffix <code>K</code>, <code>M</code>, <code>G</code> or <code>T</code>, denoting KiB, MiB, GiB
or TiB units.</li>
</ul>
<p>The behaviour of the collector is also influenced by the
<code>keep-outputs</code> and <code>keep-derivations</code> settings in the Nix
configuration file.</p>
<p>By default, the collector prints the total number of freed bytes when it
finishes (or when it is interrupted). With <code>--print-dead</code>, it prints the
number of bytes that would be freed.</p>
<h2 id="examples-17"><a class="header" href="#examples-17">Examples</a></h2>
<p>To delete all unreachable paths, just do:</p>
<pre><code class="language-console">$ nix-store --gc
deleting `/nix/store/kq82idx6g0nyzsp2s14gfsc38npai7lf-cairo-1.0.4.tar.gz.drv'
...
8825586 bytes freed (8.42 MiB)
</code></pre>
<p>To delete at least 100 MiBs of unreachable paths:</p>
<pre><code class="language-console">$ nix-store --gc --max-freed $((100 * 1024 * 1024))
</code></pre>
<h1 id="operation---delete"><a class="header" href="#operation---delete">Operation <code>--delete</code></a></h1>
<h2 id="synopsis-18"><a class="header" href="#synopsis-18">Synopsis</a></h2>
<p><code>nix-store</code> <code>--delete</code> [<code>--ignore-liveness</code>] <em>paths…</em></p>
<h2 id="description-18"><a class="header" href="#description-18">Description</a></h2>
<p>The operation <code>--delete</code> deletes the store paths <em>paths</em> from the Nix
store, but only if it is safe to do so; that is, when the path is not
reachable from a root of the garbage collector. This means that you can
only delete paths that would also be deleted by <code>nix-store --gc</code>. Thus,
<code>--delete</code> is a more targeted version of <code>--gc</code>.</p>
<p>With the option <code>--ignore-liveness</code>, reachability from the roots is
ignored. However, the path still won’t be deleted if there are other
paths in the store that refer to it (i.e., depend on it).</p>
<h2 id="example"><a class="header" href="#example">Example</a></h2>
<pre><code class="language-console">$ nix-store --delete /nix/store/zq0h41l75vlb4z45kzgjjmsjxvcv1qk7-mesa-6.4
0 bytes freed (0.00 MiB)
error: cannot delete path `/nix/store/zq0h41l75vlb4z45kzgjjmsjxvcv1qk7-mesa-6.4' since it is still alive
</code></pre>
<h1 id="operation---query-1"><a class="header" href="#operation---query-1">Operation <code>--query</code></a></h1>
<h2 id="synopsis-19"><a class="header" href="#synopsis-19">Synopsis</a></h2>
<p><code>nix-store</code> {<code>--query</code> | <code>-q</code>}
{<code>--outputs</code> | <code>--requisites</code> | <code>-R</code> | <code>--references</code> |
<code>--referrers</code> | <code>--referrers-closure</code> | <code>--deriver</code> | <code>-d</code> |
<code>--graph</code> | <code>--tree</code> | <code>--binding</code> <em>name</em> | <code>-b</code> <em>name</em> | <code>--hash</code> |
<code>--size</code> | <code>--roots</code>}
[<code>--use-output</code>] [<code>-u</code>] [<code>--force-realise</code>] [<code>-f</code>]
<em>paths…</em></p>
<h2 id="description-19"><a class="header" href="#description-19">Description</a></h2>
<p>The operation <code>--query</code> displays various bits of information about the
store paths . The queries are described below. At most one query can be
specified. The default query is <code>--outputs</code>.</p>
<p>The paths <em>paths</em> may also be symlinks from outside of the Nix store, to
the Nix store. In that case, the query is applied to the target of the
symlink.</p>
<h2 id="common-query-options"><a class="header" href="#common-query-options">Common query options</a></h2>
<ul>
<li>
<p><code>--use-output</code>; <code>-u</code><br />
For each argument to the query that is a <a href="command-ref/../glossary.html#gloss-store-derivation">store derivation</a>, apply the
query to the output path of the derivation instead.</p>
</li>
<li>
<p><code>--force-realise</code>; <code>-f</code><br />
Realise each argument to the query first (see <a href="command-ref/nix-store.html#operation---realise"><code>nix-store --realise</code></a>).</p>
</li>
</ul>
<h2 id="queries-1"><a class="header" href="#queries-1">Queries</a></h2>
<ul>
<li>
<p><code>--outputs</code><br />
Prints out the <a href="command-ref/../glossary.html">output paths</a> of the store
derivations <em>paths</em>. These are the paths that will be produced when
the derivation is built.</p>
</li>
<li>
<p><code>--requisites</code>; <code>-R</code><br />
Prints out the <a href="command-ref/../glossary.html">closure</a> of the store path <em>paths</em>.</p>
<p>This query has one option:</p>
<ul>
<li><code>--include-outputs</code>
Also include the existing output paths of <a href="command-ref/../glossary.html#gloss-store-derivation">store derivation</a>s,
and their closures.</li>
</ul>
<p>This query can be used to implement various kinds of deployment. A
<em>source deployment</em> is obtained by distributing the closure of a
store derivation. A <em>binary deployment</em> is obtained by distributing
the closure of an output path. A <em>cache deployment</em> (combined
source/binary deployment, including binaries of build-time-only
dependencies) is obtained by distributing the closure of a store
derivation and specifying the option <code>--include-outputs</code>.</p>
</li>
<li>
<p><code>--references</code><br />
Prints the set of <a href="command-ref/../glossary.html">references</a> of the store paths
<em>paths</em>, that is, their immediate dependencies. (For <em>all</em>
dependencies, use <code>--requisites</code>.)</p>
</li>
<li>
<p><code>--referrers</code><br />
Prints the set of <em>referrers</em> of the store paths <em>paths</em>, that is,
the store paths currently existing in the Nix store that refer to
one of <em>paths</em>. Note that contrary to the references, the set of
referrers is not constant; it can change as store paths are added or
removed.</p>
</li>
<li>
<p><code>--referrers-closure</code><br />
Prints the closure of the set of store paths <em>paths</em> under the
referrers relation; that is, all store paths that directly or
indirectly refer to one of <em>paths</em>. These are all the path currently
in the Nix store that are dependent on <em>paths</em>.</p>
</li>
<li>
<p><code>--deriver</code>; <code>-d</code><br />
Prints the <a href="command-ref/../glossary.html">deriver</a> of the store paths <em>paths</em>. If
the path has no deriver (e.g., if it is a source file), or if the
deriver is not known (e.g., in the case of a binary-only
deployment), the string <code>unknown-deriver</code> is printed.</p>
</li>
<li>
<p><code>--graph</code><br />
Prints the references graph of the store paths <em>paths</em> in the format
of the <code>dot</code> tool of AT&amp;T's <a href="http://www.graphviz.org/">Graphviz
package</a>. This can be used to visualise
dependency graphs. To obtain a build-time dependency graph, apply
this to a store derivation. To obtain a runtime dependency graph,
apply it to an output path.</p>
</li>
<li>
<p><code>--tree</code><br />
Prints the references graph of the store paths <em>paths</em> as a nested
ASCII tree. References are ordered by descending closure size; this
tends to flatten the tree, making it more readable. The query only
recurses into a store path when it is first encountered; this
prevents a blowup of the tree representation of the graph.</p>
</li>
<li>
<p><code>--graphml</code><br />
Prints the references graph of the store paths <em>paths</em> in the
<a href="http://graphml.graphdrawing.org/">GraphML</a> file format. This can be
used to visualise dependency graphs. To obtain a build-time
dependency graph, apply this to a <a href="command-ref/../glossary.html#gloss-store-derivation">store derivation</a>. To obtain a
runtime dependency graph, apply it to an output path.</p>
</li>
<li>
<p><code>--binding</code> <em>name</em>; <code>-b</code> <em>name</em><br />
Prints the value of the attribute <em>name</em> (i.e., environment
variable) of the <a href="command-ref/../glossary.html#gloss-store-derivation">store derivation</a>s <em>paths</em>. It is an error for a
derivation to not have the specified attribute.</p>
</li>
<li>
<p><code>--hash</code><br />
Prints the SHA-256 hash of the contents of the store paths <em>paths</em>
(that is, the hash of the output of <code>nix-store --dump</code> on the given
paths). Since the hash is stored in the Nix database, this is a fast
operation.</p>
</li>
<li>
<p><code>--size</code><br />
Prints the size in bytes of the contents of the store paths <em>paths</em>
— to be precise, the size of the output of <code>nix-store --dump</code> on
the given paths. Note that the actual disk space required by the
store paths may be higher, especially on filesystems with large
cluster sizes.</p>
</li>
<li>
<p><code>--roots</code><br />
Prints the garbage collector roots that point, directly or
indirectly, at the store paths <em>paths</em>.</p>
</li>
</ul>
<h2 id="examples-18"><a class="header" href="#examples-18">Examples</a></h2>
<p>Print the closure (runtime dependencies) of the <code>svn</code> program in the
current user environment:</p>
<pre><code class="language-console">$ nix-store -qR $(which svn)
/nix/store/5mbglq5ldqld8sj57273aljwkfvj22mc-subversion-1.1.4
/nix/store/9lz9yc6zgmc0vlqmn2ipcpkjlmbi51vv-glibc-2.3.4
...
</code></pre>
<p>Print the build-time dependencies of <code>svn</code>:</p>
<pre><code class="language-console">$ nix-store -qR $(nix-store -qd $(which svn))
/nix/store/02iizgn86m42q905rddvg4ja975bk2i4-grep-2.5.1.tar.bz2.drv
/nix/store/07a2bzxmzwz5hp58nf03pahrv2ygwgs3-gcc-wrapper.sh
/nix/store/0ma7c9wsbaxahwwl04gbw3fcd806ski4-glibc-2.3.4.drv
... lots of other paths ...
</code></pre>
<p>The difference with the previous example is that we ask the closure of
the derivation (<code>-qd</code>), not the closure of the output path that contains
<code>svn</code>.</p>
<p>Show the build-time dependencies as a tree:</p>
<pre><code class="language-console">$ nix-store -q --tree $(nix-store -qd $(which svn))
/nix/store/7i5082kfb6yjbqdbiwdhhza0am2xvh6c-subversion-1.1.4.drv
+---/nix/store/d8afh10z72n8l1cr5w42366abiblgn54-builder.sh
+---/nix/store/fmzxmpjx2lh849ph0l36snfj9zdibw67-bash-3.0.drv
|   +---/nix/store/570hmhmx3v57605cqg9yfvvyh0nnb8k8-bash
|   +---/nix/store/p3srsbd8dx44v2pg6nbnszab5mcwx03v-builder.sh
...
</code></pre>
<p>Show all paths that depend on the same OpenSSL library as <code>svn</code>:</p>
<pre><code class="language-console">$ nix-store -q --referrers $(nix-store -q --binding openssl $(nix-store -qd $(which svn)))
/nix/store/23ny9l9wixx21632y2wi4p585qhva1q8-sylpheed-1.0.0
/nix/store/5mbglq5ldqld8sj57273aljwkfvj22mc-subversion-1.1.4
/nix/store/dpmvp969yhdqs7lm2r1a3gng7pyq6vy4-subversion-1.1.3
/nix/store/l51240xqsgg8a7yrbqdx1rfzyv6l26fx-lynx-2.8.5
</code></pre>
<p>Show all paths that directly or indirectly depend on the Glibc (C
library) used by <code>svn</code>:</p>
<pre><code class="language-console">$ nix-store -q --referrers-closure $(ldd $(which svn) | grep /libc.so | awk '{print $3}')
/nix/store/034a6h4vpz9kds5r6kzb9lhh81mscw43-libgnomeprintui-2.8.2
/nix/store/15l3yi0d45prm7a82pcrknxdh6nzmxza-gawk-3.1.4
...
</code></pre>
<p>Note that <code>ldd</code> is a command that prints out the dynamic libraries used
by an ELF executable.</p>
<p>Make a picture of the runtime dependency graph of the current user
environment:</p>
<pre><code class="language-console">$ nix-store -q --graph ~/.nix-profile | dot -Tps &gt; graph.ps
$ gv graph.ps
</code></pre>
<p>Show every garbage collector root that points to a store path that
depends on <code>svn</code>:</p>
<pre><code class="language-console">$ nix-store -q --roots $(which svn)
/nix/var/nix/profiles/default-81-link
/nix/var/nix/profiles/default-82-link
/nix/var/nix/profiles/per-user/eelco/profile-97-link
</code></pre>
<h1 id="operation---add"><a class="header" href="#operation---add">Operation <code>--add</code></a></h1>
<h2 id="synopsis-20"><a class="header" href="#synopsis-20">Synopsis</a></h2>
<p><code>nix-store</code> <code>--add</code> <em>paths…</em></p>
<h2 id="description-20"><a class="header" href="#description-20">Description</a></h2>
<p>The operation <code>--add</code> adds the specified paths to the Nix store. It
prints the resulting paths in the Nix store on standard output.</p>
<h2 id="example-1"><a class="header" href="#example-1">Example</a></h2>
<pre><code class="language-console">$ nix-store --add ./foo.c
/nix/store/m7lrha58ph6rcnv109yzx1nk1cj7k7zf-foo.c
</code></pre>
<h1 id="operation---add-fixed"><a class="header" href="#operation---add-fixed">Operation <code>--add-fixed</code></a></h1>
<h2 id="synopsis-21"><a class="header" href="#synopsis-21">Synopsis</a></h2>
<p><code>nix-store</code> <code>--add-fixed</code> [<code>--recursive</code>] <em>algorithm</em> <em>paths…</em></p>
<h2 id="description-21"><a class="header" href="#description-21">Description</a></h2>
<p>The operation <code>--add-fixed</code> adds the specified paths to the Nix store.
Unlike <code>--add</code> paths are registered using the specified hashing
algorithm, resulting in the same output path as a fixed-output
derivation. This can be used for sources that are not available from a
public url or broke since the download expression was written.</p>
<p>This operation has the following options:</p>
<ul>
<li><code>--recursive</code><br />
Use recursive instead of flat hashing mode, used when adding
directories to the store.</li>
</ul>
<h2 id="example-2"><a class="header" href="#example-2">Example</a></h2>
<pre><code class="language-console">$ nix-store --add-fixed sha256 ./hello-2.10.tar.gz
/nix/store/3x7dwzq014bblazs7kq20p9hyzz0qh8g-hello-2.10.tar.gz
</code></pre>
<h1 id="operation---verify"><a class="header" href="#operation---verify">Operation <code>--verify</code></a></h1>
<h2 id="synopsis-22"><a class="header" href="#synopsis-22">Synopsis</a></h2>
<p><code>nix-store</code> <code>--verify</code> [<code>--check-contents</code>] [<code>--repair</code>]</p>
<h2 id="description-22"><a class="header" href="#description-22">Description</a></h2>
<p>The operation <code>--verify</code> verifies the internal consistency of the Nix
database, and the consistency between the Nix database and the Nix
store. Any inconsistencies encountered are automatically repaired.
Inconsistencies are generally the result of the Nix store or database
being modified by non-Nix tools, or of bugs in Nix itself.</p>
<p>This operation has the following options:</p>
<ul>
<li>
<p><code>--check-contents</code><br />
Checks that the contents of every valid store path has not been
altered by computing a SHA-256 hash of the contents and comparing it
with the hash stored in the Nix database at build time. Paths that
have been modified are printed out. For large stores,
<code>--check-contents</code> is obviously quite slow.</p>
</li>
<li>
<p><code>--repair</code><br />
If any valid path is missing from the store, or (if
<code>--check-contents</code> is given) the contents of a valid path has been
modified, then try to repair the path by redownloading it. See
<code>nix-store --repair-path</code> for details.</p>
</li>
</ul>
<h1 id="operation---verify-path"><a class="header" href="#operation---verify-path">Operation <code>--verify-path</code></a></h1>
<h2 id="synopsis-23"><a class="header" href="#synopsis-23">Synopsis</a></h2>
<p><code>nix-store</code> <code>--verify-path</code> <em>paths…</em></p>
<h2 id="description-23"><a class="header" href="#description-23">Description</a></h2>
<p>The operation <code>--verify-path</code> compares the contents of the given store
paths to their cryptographic hashes stored in Nix’s database. For every
changed path, it prints a warning message. The exit status is 0 if no
path has changed, and 1 otherwise.</p>
<h2 id="example-3"><a class="header" href="#example-3">Example</a></h2>
<p>To verify the integrity of the <code>svn</code> command and all its dependencies:</p>
<pre><code class="language-console">$ nix-store --verify-path $(nix-store -qR $(which svn))
</code></pre>
<h1 id="operation---repair-path"><a class="header" href="#operation---repair-path">Operation <code>--repair-path</code></a></h1>
<h2 id="synopsis-24"><a class="header" href="#synopsis-24">Synopsis</a></h2>
<p><code>nix-store</code> <code>--repair-path</code> <em>paths…</em></p>
<h2 id="description-24"><a class="header" href="#description-24">Description</a></h2>
<p>The operation <code>--repair-path</code> attempts to “repair” the specified paths
by redownloading them using the available substituters. If no
substitutes are available, then repair is not possible.</p>
<blockquote>
<p><strong>Warning</strong></p>
<p>During repair, there is a very small time window during which the old
path (if it exists) is moved out of the way and replaced with the new
path. If repair is interrupted in between, then the system may be left
in a broken state (e.g., if the path contains a critical system
component like the GNU C Library).</p>
</blockquote>
<h2 id="example-4"><a class="header" href="#example-4">Example</a></h2>
<pre><code class="language-console">$ nix-store --verify-path /nix/store/dj7a81wsm1ijwwpkks3725661h3263p5-glibc-2.13
path `/nix/store/dj7a81wsm1ijwwpkks3725661h3263p5-glibc-2.13' was modified!
  expected hash `2db57715ae90b7e31ff1f2ecb8c12ec1cc43da920efcbe3b22763f36a1861588',
  got `481c5aa5483ebc97c20457bb8bca24deea56550d3985cda0027f67fe54b808e4'

$ nix-store --repair-path /nix/store/dj7a81wsm1ijwwpkks3725661h3263p5-glibc-2.13
fetching path `/nix/store/d7a81wsm1ijwwpkks3725661h3263p5-glibc-2.13'...
…
</code></pre>
<h1 id="operation---dump"><a class="header" href="#operation---dump">Operation <code>--dump</code></a></h1>
<h2 id="synopsis-25"><a class="header" href="#synopsis-25">Synopsis</a></h2>
<p><code>nix-store</code> <code>--dump</code> <em>path</em></p>
<h2 id="description-25"><a class="header" href="#description-25">Description</a></h2>
<p>The operation <code>--dump</code> produces a NAR (Nix ARchive) file containing the
contents of the file system tree rooted at <em>path</em>. The archive is
written to standard output.</p>
<p>A NAR archive is like a TAR or Zip archive, but it contains only the
information that Nix considers important. For instance, timestamps are
elided because all files in the Nix store have their timestamp set to 0
anyway. Likewise, all permissions are left out except for the execute
bit, because all files in the Nix store have 444 or 555 permission.</p>
<p>Also, a NAR archive is <em>canonical</em>, meaning that “equal” paths always
produce the same NAR archive. For instance, directory entries are
always sorted so that the actual on-disk order doesn’t influence the
result.  This means that the cryptographic hash of a NAR dump of a
path is usable as a fingerprint of the contents of the path. Indeed,
the hashes of store paths stored in Nix’s database (see <code>nix-store -q --hash</code>) are SHA-256 hashes of the NAR dump of each store path.</p>
<p>NAR archives support filenames of unlimited length and 64-bit file
sizes. They can contain regular files, directories, and symbolic links,
but not other types of files (such as device nodes).</p>
<p>A Nix archive can be unpacked using <code>nix-store --restore</code>.</p>
<h1 id="operation---restore"><a class="header" href="#operation---restore">Operation <code>--restore</code></a></h1>
<h2 id="synopsis-26"><a class="header" href="#synopsis-26">Synopsis</a></h2>
<p><code>nix-store</code> <code>--restore</code> <em>path</em></p>
<h2 id="description-26"><a class="header" href="#description-26">Description</a></h2>
<p>The operation <code>--restore</code> unpacks a NAR archive to <em>path</em>, which must
not already exist. The archive is read from standard input.</p>
<h1 id="operation---export"><a class="header" href="#operation---export">Operation <code>--export</code></a></h1>
<h2 id="synopsis-27"><a class="header" href="#synopsis-27">Synopsis</a></h2>
<p><code>nix-store</code> <code>--export</code> <em>paths…</em></p>
<h2 id="description-27"><a class="header" href="#description-27">Description</a></h2>
<p>The operation <code>--export</code> writes a serialisation of the specified store
paths to standard output in a format that can be imported into another
Nix store with <code>nix-store --import</code>. This is like <code>nix-store --dump</code>, except that the NAR archive produced by that command doesn’t
contain the necessary meta-information to allow it to be imported into
another Nix store (namely, the set of references of the path).</p>
<p>This command does not produce a <em>closure</em> of the specified paths, so if
a store path references other store paths that are missing in the target
Nix store, the import will fail. To copy a whole closure, do something
like:</p>
<pre><code class="language-console">$ nix-store --export $(nix-store -qR paths) &gt; out
</code></pre>
<p>To import the whole closure again, run:</p>
<pre><code class="language-console">$ nix-store --import &lt; out
</code></pre>
<h1 id="operation---import"><a class="header" href="#operation---import">Operation <code>--import</code></a></h1>
<h2 id="synopsis-28"><a class="header" href="#synopsis-28">Synopsis</a></h2>
<p><code>nix-store</code> <code>--import</code></p>
<h2 id="description-28"><a class="header" href="#description-28">Description</a></h2>
<p>The operation <code>--import</code> reads a serialisation of a set of store paths
produced by <code>nix-store --export</code> from standard input and adds those
store paths to the Nix store. Paths that already exist in the Nix store
are ignored. If a path refers to another path that doesn’t exist in the
Nix store, the import fails.</p>
<h1 id="operation---optimise"><a class="header" href="#operation---optimise">Operation <code>--optimise</code></a></h1>
<h2 id="synopsis-29"><a class="header" href="#synopsis-29">Synopsis</a></h2>
<p><code>nix-store</code> <code>--optimise</code></p>
<h2 id="description-29"><a class="header" href="#description-29">Description</a></h2>
<p>The operation <code>--optimise</code> reduces Nix store disk space usage by finding
identical files in the store and hard-linking them to each other. It
typically reduces the size of the store by something like 25-35%. Only
regular files and symlinks are hard-linked in this manner. Files are
considered identical when they have the same NAR archive serialisation:
that is, regular files must have the same contents and permission
(executable or non-executable), and symlinks must have the same
contents.</p>
<p>After completion, or when the command is interrupted, a report on the
achieved savings is printed on standard error.</p>
<p>Use <code>-vv</code> or <code>-vvv</code> to get some progress indication.</p>
<h2 id="example-5"><a class="header" href="#example-5">Example</a></h2>
<pre><code class="language-console">$ nix-store --optimise
hashing files in `/nix/store/qhqx7l2f1kmwihc9bnxs7rc159hsxnf3-gcc-4.1.1'
...
541838819 bytes (516.74 MiB) freed by hard-linking 54143 files;
there are 114486 files with equal contents out of 215894 files in total
</code></pre>
<h1 id="operation---read-log"><a class="header" href="#operation---read-log">Operation <code>--read-log</code></a></h1>
<h2 id="synopsis-30"><a class="header" href="#synopsis-30">Synopsis</a></h2>
<p><code>nix-store</code> {<code>--read-log</code> | <code>-l</code>} <em>paths…</em></p>
<h2 id="description-30"><a class="header" href="#description-30">Description</a></h2>
<p>The operation <code>--read-log</code> prints the build log of the specified store
paths on standard output. The build log is whatever the builder of a
derivation wrote to standard output and standard error. If a store path
is not a derivation, the deriver of the store path is used.</p>
<p>Build logs are kept in <code>/nix/var/log/nix/drvs</code>. However, there is no
guarantee that a build log is available for any particular store path.
For instance, if the path was downloaded as a pre-built binary through a
substitute, then the log is unavailable.</p>
<h2 id="example-6"><a class="header" href="#example-6">Example</a></h2>
<pre><code class="language-console">$ nix-store -l $(which ktorrent)
building /nix/store/dhc73pvzpnzxhdgpimsd9sw39di66ph1-ktorrent-2.2.1
unpacking sources
unpacking source archive /nix/store/p8n1jpqs27mgkjw07pb5269717nzf5f8-ktorrent-2.2.1.tar.gz
ktorrent-2.2.1/
ktorrent-2.2.1/NEWS
...
</code></pre>
<h1 id="operation---dump-db"><a class="header" href="#operation---dump-db">Operation <code>--dump-db</code></a></h1>
<h2 id="synopsis-31"><a class="header" href="#synopsis-31">Synopsis</a></h2>
<p><code>nix-store</code> <code>--dump-db</code> [<em>paths…</em>]</p>
<h2 id="description-31"><a class="header" href="#description-31">Description</a></h2>
<p>The operation <code>--dump-db</code> writes a dump of the Nix database to standard
output. It can be loaded into an empty Nix store using <code>--load-db</code>. This
is useful for making backups and when migrating to different database
schemas.</p>
<p>By default, <code>--dump-db</code> will dump the entire Nix database. When one or
more store paths is passed, only the subset of the Nix database for
those store paths is dumped. As with <code>--export</code>, the user is responsible
for passing all the store paths for a closure. See <code>--export</code> for an
example.</p>
<h1 id="operation---load-db"><a class="header" href="#operation---load-db">Operation <code>--load-db</code></a></h1>
<h2 id="synopsis-32"><a class="header" href="#synopsis-32">Synopsis</a></h2>
<p><code>nix-store</code> <code>--load-db</code></p>
<h2 id="description-32"><a class="header" href="#description-32">Description</a></h2>
<p>The operation <code>--load-db</code> reads a dump of the Nix database created by
<code>--dump-db</code> from standard input and loads it into the Nix database.</p>
<h1 id="operation---print-env"><a class="header" href="#operation---print-env">Operation <code>--print-env</code></a></h1>
<h2 id="synopsis-33"><a class="header" href="#synopsis-33">Synopsis</a></h2>
<p><code>nix-store</code> <code>--print-env</code> <em>drvpath</em></p>
<h2 id="description-33"><a class="header" href="#description-33">Description</a></h2>
<p>The operation <code>--print-env</code> prints out the environment of a derivation
in a format that can be evaluated by a shell. The command line arguments
of the builder are placed in the variable <code>_args</code>.</p>
<h2 id="example-7"><a class="header" href="#example-7">Example</a></h2>
<pre><code class="language-console">$ nix-store --print-env $(nix-instantiate '&lt;nixpkgs&gt;' -A firefox)
…
export src; src='/nix/store/plpj7qrwcz94z2psh6fchsi7s8yihc7k-firefox-12.0.source.tar.bz2'
export stdenv; stdenv='/nix/store/7c8asx3yfrg5dg1gzhzyq2236zfgibnn-stdenv'
export system; system='x86_64-linux'
export _args; _args='-e /nix/store/9krlzvny65gdc8s7kpb6lkx8cd02c25c-default-builder.sh'
</code></pre>
<h1 id="operation---generate-binary-cache-key"><a class="header" href="#operation---generate-binary-cache-key">Operation <code>--generate-binary-cache-key</code></a></h1>
<h2 id="synopsis-34"><a class="header" href="#synopsis-34">Synopsis</a></h2>
<p><code>nix-store</code> <code>--generate-binary-cache-key</code> <em>key-name</em> <em>secret-key-file</em> <em>public-key-file</em></p>
<h2 id="description-34"><a class="header" href="#description-34">Description</a></h2>
<p>This command generates an <a href="http://ed25519.cr.yp.to/">Ed25519 key pair</a>
that can be used to create a signed binary cache. It takes three
mandatory parameters:</p>
<ol>
<li>
<p>A key name, such as <code>cache.example.org-1</code>, that is used to look up
keys on the client when it verifies signatures. It can be anything,
but it’s suggested to use the host name of your cache (e.g.
<code>cache.example.org</code>) with a suffix denoting the number of the key
(to be incremented every time you need to revoke a key).</p>
</li>
<li>
<p>The file name where the secret key is to be stored.</p>
</li>
<li>
<p>The file name where the public key is to be stored.</p>
</li>
</ol>
<div style="break-before: page; page-break-before: always;"></div><h1 id="utilities"><a class="header" href="#utilities">Utilities</a></h1>
<p>This section lists utilities that you can use when you work with Nix.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="name-4"><a class="header" href="#name-4">Name</a></h1>
<p><code>nix-channel</code> - manage Nix channels</p>
<h1 id="synopsis-35"><a class="header" href="#synopsis-35">Synopsis</a></h1>
<p><code>nix-channel</code> {<code>--add</code> url [<em>name</em>] | <code>--remove</code> <em>name</em> | <code>--list</code> | <code>--update</code> [<em>names…</em>] | <code>--rollback</code> [<em>generation</em>] }</p>
<h1 id="description-35"><a class="header" href="#description-35">Description</a></h1>
<p>A Nix channel is a mechanism that allows you to automatically stay
up-to-date with a set of pre-built Nix expressions. A Nix channel is
just a URL that points to a place containing a set of Nix expressions.</p>
<p>To see the list of official NixOS channels, visit
<a href="https://nixos.org/channels">https://nixos.org/channels</a>.</p>
<p>This command has the following operations:</p>
<ul>
<li>
<p><code>--add</code> <em>url</em> [<em>name</em>]<br />
Adds a channel named <em>name</em> with URL <em>url</em> to the list of subscribed
channels. If <em>name</em> is omitted, it defaults to the last component of
<em>url</em>, with the suffixes <code>-stable</code> or <code>-unstable</code> removed.</p>
</li>
<li>
<p><code>--remove</code> <em>name</em><br />
Removes the channel named <em>name</em> from the list of subscribed
channels.</p>
</li>
<li>
<p><code>--list</code><br />
Prints the names and URLs of all subscribed channels on standard
output.</p>
</li>
<li>
<p><code>--update</code> [<em>names</em>…]<br />
Downloads the Nix expressions of all subscribed channels (or only
those included in <em>names</em> if specified) and makes them the default
for <code>nix-env</code> operations (by symlinking them from the directory
<code>~/.nix-defexpr</code>).</p>
</li>
<li>
<p><code>--rollback</code> [<em>generation</em>]<br />
Reverts the previous call to <code>nix-channel --update</code>. Optionally, you can specify a specific channel generation
number to restore.</p>
</li>
</ul>
<p>Note that <code>--add</code> does not automatically perform an update.</p>
<p>The list of subscribed channels is stored in <code>~/.nix-channels</code>.</p>
<h1 id="examples-19"><a class="header" href="#examples-19">Examples</a></h1>
<p>To subscribe to the Nixpkgs channel and install the GNU Hello package:</p>
<pre><code class="language-console">$ nix-channel --add https://nixos.org/channels/nixpkgs-unstable
$ nix-channel --update
$ nix-env -iA nixpkgs.hello
</code></pre>
<p>You can revert channel updates using <code>--rollback</code>:</p>
<pre><code class="language-console">$ nix-instantiate --eval -E '(import &lt;nixpkgs&gt; {}).lib.version'
&quot;14.04.527.0e935f1&quot;

$ nix-channel --rollback
switching from generation 483 to 482

$ nix-instantiate --eval -E '(import &lt;nixpkgs&gt; {}).lib.version'
&quot;14.04.526.dbadfad&quot;
</code></pre>
<h1 id="files-1"><a class="header" href="#files-1">Files</a></h1>
<ul>
<li>
<p><code>/nix/var/nix/profiles/per-user/username/channels</code><br />
<code>nix-channel</code> uses a <code>nix-env</code> profile to keep track of previous
versions of the subscribed channels. Every time you run <code>nix-channel --update</code>, a new channel generation (that is, a symlink to the
channel Nix expressions in the Nix store) is created. This enables
<code>nix-channel --rollback</code> to revert to previous versions.</p>
</li>
<li>
<p><code>~/.nix-defexpr/channels</code><br />
This is a symlink to
<code>/nix/var/nix/profiles/per-user/username/channels</code>. It ensures that
<code>nix-env</code> can find your channels. In a multi-user installation, you
may also have <code>~/.nix-defexpr/channels_root</code>, which links to the
channels of the root user.</p>
</li>
</ul>
<h1 id="channel-format"><a class="header" href="#channel-format">Channel format</a></h1>
<p>A channel URL should point to a directory containing the following
files:</p>
<ul>
<li><code>nixexprs.tar.xz</code><br />
A tarball containing Nix expressions and files referenced by them
(such as build scripts and patches). At the top level, the tarball
should contain a single directory. That directory must contain a
file <code>default.nix</code> that serves as the channel’s “entry point”.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="name-5"><a class="header" href="#name-5">Name</a></h1>
<p><code>nix-collect-garbage</code> - delete unreachable store paths</p>
<h1 id="synopsis-36"><a class="header" href="#synopsis-36">Synopsis</a></h1>
<p><code>nix-collect-garbage</code> [<code>--delete-old</code>] [<code>-d</code>] [<code>--delete-older-than</code> <em>period</em>] [<code>--max-freed</code> <em>bytes</em>] [<code>--dry-run</code>]</p>
<h1 id="description-36"><a class="header" href="#description-36">Description</a></h1>
<p>The command <code>nix-collect-garbage</code> is mostly an alias of <a href="command-ref/nix-store.html#operation---gc"><code>nix-store --gc</code></a>, that is, it deletes all
unreachable paths in the Nix store to clean up your system. However,
it provides two additional options: <code>-d</code> (<code>--delete-old</code>), which
deletes all old generations of all profiles in <code>/nix/var/nix/profiles</code>
by invoking <code>nix-env --delete-generations old</code> on all profiles (of
course, this makes rollbacks to previous configurations impossible);
and <code>--delete-older-than</code> <em>period</em>, where period is a value such as
<code>30d</code>, which deletes all generations older than the specified number
of days in all profiles in <code>/nix/var/nix/profiles</code> (except for the
generations that were active at that point in time).</p>
<h1 id="example-8"><a class="header" href="#example-8">Example</a></h1>
<p>To delete from the Nix store everything that is not used by the current
generations of each profile, do</p>
<pre><code class="language-console">$ nix-collect-garbage -d
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="name-6"><a class="header" href="#name-6">Name</a></h1>
<p><code>nix-copy-closure</code> - copy a closure to or from a remote machine via SSH</p>
<h1 id="synopsis-37"><a class="header" href="#synopsis-37">Synopsis</a></h1>
<p><code>nix-copy-closure</code>
[<code>--to</code> | <code>--from</code>]
[<code>--gzip</code>]
[<code>--include-outputs</code>]
[<code>--use-substitutes</code> | <code>-s</code>]
[<code>-v</code>]
<em>user@machine</em> <em>paths</em></p>
<h1 id="description-37"><a class="header" href="#description-37">Description</a></h1>
<p><code>nix-copy-closure</code> gives you an easy and efficient way to exchange
software between machines.  Given one or more Nix store <em>paths</em> on the
local machine, <code>nix-copy-closure</code> computes the closure of those paths
(i.e. all their dependencies in the Nix store), and copies all paths
in the closure to the remote machine via the <code>ssh</code> (Secure Shell)
command.  With the <code>--from</code> option, the direction is reversed: the
closure of <em>paths</em> on a remote machine is copied to the Nix store on
the local machine.</p>
<p>This command is efficient because it only sends the store paths
that are missing on the target machine.</p>
<p>Since <code>nix-copy-closure</code> calls <code>ssh</code>, you may be asked to type in the
appropriate password or passphrase.  In fact, you may be asked <em>twice</em>
because <code>nix-copy-closure</code> currently connects twice to the remote
machine, first to get the set of paths missing on the target machine,
and second to send the dump of those paths.  When using public key
authentication, you can avoid typing the passphrase with <code>ssh-agent</code>.</p>
<h1 id="options-2"><a class="header" href="#options-2">Options</a></h1>
<ul>
<li>
<p><code>--to</code><br />
Copy the closure of <em>paths</em> from the local Nix store to the Nix
store on <em>machine</em>. This is the default.</p>
</li>
<li>
<p><code>--from</code><br />
Copy the closure of <em>paths</em> from the Nix store on <em>machine</em> to the
local Nix store.</p>
</li>
<li>
<p><code>--gzip</code><br />
Enable compression of the SSH connection.</p>
</li>
<li>
<p><code>--include-outputs</code><br />
Also copy the outputs of <a href="command-ref/../glossary.html#gloss-store-derivation">store derivation</a>s included in the closure.</p>
</li>
<li>
<p><code>--use-substitutes</code> / <code>-s</code><br />
Attempt to download missing paths on the target machine using Nix’s
substitute mechanism.  Any paths that cannot be substituted on the
target are still copied normally from the source.  This is useful,
for instance, if the connection between the source and target
machine is slow, but the connection between the target machine and
<code>nixos.org</code> (the default binary cache server) is
fast.</p>
</li>
<li>
<p><code>-v</code><br />
Show verbose output.</p>
</li>
</ul>
<h1 id="environment-variables-3"><a class="header" href="#environment-variables-3">Environment variables</a></h1>
<ul>
<li><code>NIX_SSHOPTS</code><br />
Additional options to be passed to <code>ssh</code> on the command
line.</li>
</ul>
<h1 id="examples-20"><a class="header" href="#examples-20">Examples</a></h1>
<p>Copy Firefox with all its dependencies to a remote machine:</p>
<pre><code class="language-console">$ nix-copy-closure --to alice@itchy.labs $(type -tP firefox)
</code></pre>
<p>Copy Subversion from a remote machine and then install it into a user
environment:</p>
<pre><code class="language-console">$ nix-copy-closure --from alice@itchy.labs \
    /nix/store/0dj0503hjxy5mbwlafv1rsbdiyx1gkdy-subversion-1.4.4
$ nix-env -i /nix/store/0dj0503hjxy5mbwlafv1rsbdiyx1gkdy-subversion-1.4.4
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="name-7"><a class="header" href="#name-7">Name</a></h1>
<p><code>nix-daemon</code> - Nix multi-user support daemon</p>
<h1 id="synopsis-38"><a class="header" href="#synopsis-38">Synopsis</a></h1>
<p><code>nix-daemon</code></p>
<h1 id="description-38"><a class="header" href="#description-38">Description</a></h1>
<p>The Nix daemon is necessary in multi-user Nix installations. It runs
build tasks and other operations on the Nix store on behalf of
unprivileged users.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="name-8"><a class="header" href="#name-8">Name</a></h1>
<p><code>nix-hash</code> - compute the cryptographic hash of a path</p>
<h1 id="synopsis-39"><a class="header" href="#synopsis-39">Synopsis</a></h1>
<p><code>nix-hash</code> [<code>--flat</code>] [<code>--base32</code>] [<code>--truncate</code>] [<code>--type</code> <em>hashAlgo</em>] <em>path…</em></p>
<p><code>nix-hash</code> <code>--to-base16</code> <em>hash…</em></p>
<p><code>nix-hash</code> <code>--to-base32</code> <em>hash…</em></p>
<h1 id="description-39"><a class="header" href="#description-39">Description</a></h1>
<p>The command <code>nix-hash</code> computes the cryptographic hash of the contents
of each <em>path</em> and prints it on standard output. By default, it computes
an MD5 hash, but other hash algorithms are available as well. The hash
is printed in hexadecimal. To generate the same hash as
<code>nix-prefetch-url</code> you have to specify multiple arguments, see below for
an example.</p>
<p>The hash is computed over a <em>serialisation</em> of each path: a dump of
the file system tree rooted at the path. This allows directories and
symlinks to be hashed as well as regular files. The dump is in the
<em>NAR format</em> produced by <a href="command-ref/nix-store.html#operation---dump"><code>nix-store --dump</code></a>.  Thus, <code>nix-hash path</code>
yields the same cryptographic hash as <code>nix-store --dump path | md5sum</code>.</p>
<h1 id="options-3"><a class="header" href="#options-3">Options</a></h1>
<ul>
<li>
<p><code>--flat</code><br />
Print the cryptographic hash of the contents of each regular file
<em>path</em>. That is, do not compute the hash over the dump of <em>path</em>.
The result is identical to that produced by the GNU commands
<code>md5sum</code> and <code>sha1sum</code>.</p>
</li>
<li>
<p><code>--base32</code><br />
Print the hash in a base-32 representation rather than hexadecimal.
This base-32 representation is more compact and can be used in Nix
expressions (such as in calls to <code>fetchurl</code>).</p>
</li>
<li>
<p><code>--truncate</code><br />
Truncate hashes longer than 160 bits (such as SHA-256) to 160 bits.</p>
</li>
<li>
<p><code>--type</code> <em>hashAlgo</em><br />
Use the specified cryptographic hash algorithm, which can be one of
<code>md5</code>, <code>sha1</code>, <code>sha256</code>, and <code>sha512</code>.</p>
</li>
<li>
<p><code>--to-base16</code><br />
Don’t hash anything, but convert the base-32 hash representation
<em>hash</em> to hexadecimal.</p>
</li>
<li>
<p><code>--to-base32</code><br />
Don’t hash anything, but convert the hexadecimal hash representation
<em>hash</em> to base-32.</p>
</li>
</ul>
<h1 id="examples-21"><a class="header" href="#examples-21">Examples</a></h1>
<p>Computing the same hash as <code>nix-prefetch-url</code>:</p>
<pre><code class="language-console">$ nix-prefetch-url file://&lt;(echo test)
1lkgqb6fclns49861dwk9rzb6xnfkxbpws74mxnx01z9qyv1pjpj
$ nix-hash --type sha256 --flat --base32 &lt;(echo test)
1lkgqb6fclns49861dwk9rzb6xnfkxbpws74mxnx01z9qyv1pjpj
</code></pre>
<p>Computing hashes:</p>
<pre><code class="language-console">$ mkdir test
$ echo &quot;hello&quot; &gt; test/world

$ nix-hash test/ (MD5 hash; default)
8179d3caeff1869b5ba1744e5a245c04

$ nix-store --dump test/ | md5sum (for comparison)
8179d3caeff1869b5ba1744e5a245c04  -

$ nix-hash --type sha1 test/
e4fd8ba5f7bbeaea5ace89fe10255536cd60dab6

$ nix-hash --type sha1 --base32 test/
nvd61k9nalji1zl9rrdfmsmvyyjqpzg4

$ nix-hash --type sha256 --flat test/
error: reading file `test/': Is a directory

$ nix-hash --type sha256 --flat test/world
5891b5b522d5df086d0ff0b110fbd9d21bb4fc7163af34d08286a2e846f6be03
</code></pre>
<p>Converting between hexadecimal and base-32:</p>
<pre><code class="language-console">$ nix-hash --type sha1 --to-base32 e4fd8ba5f7bbeaea5ace89fe10255536cd60dab6
nvd61k9nalji1zl9rrdfmsmvyyjqpzg4

$ nix-hash --type sha1 --to-base16 nvd61k9nalji1zl9rrdfmsmvyyjqpzg4
e4fd8ba5f7bbeaea5ace89fe10255536cd60dab6
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="name-9"><a class="header" href="#name-9">Name</a></h1>
<p><code>nix-instantiate</code> - instantiate store derivations from Nix expressions</p>
<h1 id="synopsis-40"><a class="header" href="#synopsis-40">Synopsis</a></h1>
<p><code>nix-instantiate</code>
[<code>--parse</code> | <code>--eval</code> [<code>--strict</code>] [<code>--json</code>] [<code>--xml</code>] ]
[<code>--read-write-mode</code>]
[<code>--arg</code> <em>name</em> <em>value</em>]
[{<code>--attr</code>| <code>-A</code>} <em>attrPath</em>]
[<code>--add-root</code> <em>path</em>]
[<code>--expr</code> | <code>-E</code>]
<em>files…</em></p>
<p><code>nix-instantiate</code> <code>--find-file</code> <em>files…</em></p>
<h1 id="description-40"><a class="header" href="#description-40">Description</a></h1>
<p>The command <code>nix-instantiate</code> produces <a href="command-ref/../glossary.html#gloss-store-derivation">store derivation</a>s from (high-level) Nix expressions.
It evaluates the Nix expressions in each of <em>files</em> (which defaults to
<em>./default.nix</em>). Each top-level expression should evaluate to a
derivation, a list of derivations, or a set of derivations. The paths
of the resulting store derivations are printed on standard output.</p>
<p>If <em>files</em> is the character <code>-</code>, then a Nix expression will be read from
standard input.</p>
<h1 id="options-4"><a class="header" href="#options-4">Options</a></h1>
<ul>
<li>
<p><code>--add-root</code> <em>path</em><br />
See the <a href="command-ref/nix-store.html">corresponding option</a> in <code>nix-store</code>.</p>
</li>
<li>
<p><code>--parse</code><br />
Just parse the input files, and print their abstract syntax trees on
standard output in ATerm format.</p>
</li>
<li>
<p><code>--eval</code><br />
Just parse and evaluate the input files, and print the resulting
values on standard output. No instantiation of store derivations
takes place.</p>
</li>
<li>
<p><code>--find-file</code><br />
Look up the given files in Nix’s search path (as specified by the
<code>NIX_PATH</code> environment variable). If found, print the corresponding
absolute paths on standard output. For instance, if <code>NIX_PATH</code> is
<code>nixpkgs=/home/alice/nixpkgs</code>, then <code>nix-instantiate --find-file nixpkgs/default.nix</code> will print <code>/home/alice/nixpkgs/default.nix</code>.</p>
</li>
<li>
<p><code>--strict</code><br />
When used with <code>--eval</code>, recursively evaluate list elements and
attributes. Normally, such sub-expressions are left unevaluated
(since the Nix language is lazy).</p>
<blockquote>
<p><strong>Warning</strong></p>
<p>This option can cause non-termination, because lazy data
structures can be infinitely large.</p>
</blockquote>
</li>
<li>
<p><code>--json</code><br />
When used with <code>--eval</code>, print the resulting value as an JSON
representation of the abstract syntax tree rather than as an ATerm.</p>
</li>
<li>
<p><code>--xml</code><br />
When used with <code>--eval</code>, print the resulting value as an XML
representation of the abstract syntax tree rather than as an ATerm.
The schema is the same as that used by the <a href="command-ref/../language/builtins.html"><code>toXML</code>
built-in</a>.</p>
</li>
<li>
<p><code>--read-write-mode</code><br />
When used with <code>--eval</code>, perform evaluation in read/write mode so
nix language features that require it will still work (at the cost
of needing to do instantiation of every evaluated derivation). If
this option is not enabled, there may be uninstantiated store paths
in the final output.</p>
</li>
</ul>
<!-- end list -->
<h1 id="examples-22"><a class="header" href="#examples-22">Examples</a></h1>
<p>Instantiate <a href="command-ref/../glossary.html#gloss-store-derivation">store derivation</a>s from a Nix expression, and build them using <code>nix-store</code>:</p>
<pre><code class="language-console">$ nix-instantiate test.nix (instantiate)
/nix/store/cigxbmvy6dzix98dxxh9b6shg7ar5bvs-perl-BerkeleyDB-0.26.drv

$ nix-store -r $(nix-instantiate test.nix) (build)
...
/nix/store/qhqk4n8ci095g3sdp93x7rgwyh9rdvgk-perl-BerkeleyDB-0.26 (output path)

$ ls -l /nix/store/qhqk4n8ci095g3sdp93x7rgwyh9rdvgk-perl-BerkeleyDB-0.26
dr-xr-xr-x    2 eelco    users        4096 1970-01-01 01:00 lib
...
</code></pre>
<p>You can also give a Nix expression on the command line:</p>
<pre><code class="language-console">$ nix-instantiate -E 'with import &lt;nixpkgs&gt; { }; hello'
/nix/store/j8s4zyv75a724q38cb0r87rlczaiag4y-hello-2.8.drv
</code></pre>
<p>This is equivalent to:</p>
<pre><code class="language-console">$ nix-instantiate '&lt;nixpkgs&gt;' -A hello
</code></pre>
<p>Parsing and evaluating Nix expressions:</p>
<pre><code class="language-console">$ nix-instantiate --parse -E '1 + 2'
1 + 2
</code></pre>
<pre><code class="language-console">$ nix-instantiate --eval -E '1 + 2'
3
</code></pre>
<pre><code class="language-console">$ nix-instantiate --eval --xml -E '1 + 2'
&lt;?xml version='1.0' encoding='utf-8'?&gt;
&lt;expr&gt;
  &lt;int value=&quot;3&quot; /&gt;
&lt;/expr&gt;
</code></pre>
<p>The difference between non-strict and strict evaluation:</p>
<pre><code class="language-console">$ nix-instantiate --eval --xml -E 'rec { x = &quot;foo&quot;; y = x; }'
...
  &lt;attr name=&quot;x&quot;&gt;
    &lt;string value=&quot;foo&quot; /&gt;
  &lt;/attr&gt;
  &lt;attr name=&quot;y&quot;&gt;
    &lt;unevaluated /&gt;
  &lt;/attr&gt;
...
</code></pre>
<p>Note that <code>y</code> is left unevaluated (the XML representation doesn’t
attempt to show non-normal forms).</p>
<pre><code class="language-console">$ nix-instantiate --eval --xml --strict -E 'rec { x = &quot;foo&quot;; y = x; }'
...
  &lt;attr name=&quot;x&quot;&gt;
    &lt;string value=&quot;foo&quot; /&gt;
  &lt;/attr&gt;
  &lt;attr name=&quot;y&quot;&gt;
    &lt;string value=&quot;foo&quot; /&gt;
  &lt;/attr&gt;
...
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="name-10"><a class="header" href="#name-10">Name</a></h1>
<p><code>nix-prefetch-url</code> - copy a file from a URL into the store and print its hash</p>
<h1 id="synopsis-41"><a class="header" href="#synopsis-41">Synopsis</a></h1>
<p><code>nix-prefetch-url</code> <em>url</em> [<em>hash</em>]
[<code>--type</code> <em>hashAlgo</em>]
[<code>--print-path</code>]
[<code>--unpack</code>]
[<code>--name</code> <em>name</em>]</p>
<h1 id="description-41"><a class="header" href="#description-41">Description</a></h1>
<p>The command <code>nix-prefetch-url</code> downloads the file referenced by the URL
<em>url</em>, prints its cryptographic hash, and copies it into the Nix store.
The file name in the store is <code>hash-baseName</code>, where <em>baseName</em> is
everything following the final slash in <em>url</em>.</p>
<p>This command is just a convenience for Nix expression writers. Often a
Nix expression fetches some source distribution from the network using
the <code>fetchurl</code> expression contained in Nixpkgs. However, <code>fetchurl</code>
requires a cryptographic hash. If you don't know the hash, you would
have to download the file first, and then <code>fetchurl</code> would download it
again when you build your Nix expression. Since <code>fetchurl</code> uses the same
name for the downloaded file as <code>nix-prefetch-url</code>, the redundant
download can be avoided.</p>
<p>If <em>hash</em> is specified, then a download is not performed if the Nix
store already contains a file with the same hash and base name.
Otherwise, the file is downloaded, and an error is signaled if the
actual hash of the file does not match the specified hash.</p>
<p>This command prints the hash on standard output. Additionally, if the
option <code>--print-path</code> is used, the path of the downloaded file in the
Nix store is also printed.</p>
<h1 id="options-5"><a class="header" href="#options-5">Options</a></h1>
<ul>
<li>
<p><code>--type</code> <em>hashAlgo</em><br />
Use the specified cryptographic hash algorithm, which can be one of
<code>md5</code>, <code>sha1</code>, <code>sha256</code>, and <code>sha512</code>.</p>
</li>
<li>
<p><code>--print-path</code><br />
Print the store path of the downloaded file on standard output.</p>
</li>
<li>
<p><code>--unpack</code><br />
Unpack the archive (which must be a tarball or zip file) and add the
result to the Nix store. The resulting hash can be used with
functions such as Nixpkgs’s <code>fetchzip</code> or <code>fetchFromGitHub</code>.</p>
</li>
<li>
<p><code>--executable</code><br />
Set the executable bit on the downloaded file.</p>
</li>
<li>
<p><code>--name</code> <em>name</em><br />
Override the name of the file in the Nix store. By default, this is
<code>hash-basename</code>, where <em>basename</em> is the last component of <em>url</em>.
Overriding the name is necessary when <em>basename</em> contains characters
that are not allowed in Nix store paths.</p>
</li>
</ul>
<h1 id="examples-23"><a class="header" href="#examples-23">Examples</a></h1>
<pre><code class="language-console">$ nix-prefetch-url ftp://ftp.gnu.org/pub/gnu/hello/hello-2.10.tar.gz
0ssi1wpaf7plaswqqjwigppsg5fyh99vdlb9kzl7c9lng89ndq1i
</code></pre>
<pre><code class="language-console">$ nix-prefetch-url --print-path mirror://gnu/hello/hello-2.10.tar.gz
0ssi1wpaf7plaswqqjwigppsg5fyh99vdlb9kzl7c9lng89ndq1i
/nix/store/3x7dwzq014bblazs7kq20p9hyzz0qh8g-hello-2.10.tar.gz
</code></pre>
<pre><code class="language-console">$ nix-prefetch-url --unpack --print-path https://github.com/NixOS/patchelf/archive/0.8.tar.gz
079agjlv0hrv7fxnx9ngipx14gyncbkllxrp9cccnh3a50fxcmy7
/nix/store/19zrmhm3m40xxaw81c8cqm6aljgrnwj2-0.8.tar.gz
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="experimental-commands"><a class="header" href="#experimental-commands">Experimental Commands</a></h1>
<p>This section lists experimental commands.</p>
<blockquote>
<p><strong>Warning</strong></p>
<p>These commands may be removed in the future, or their syntax may
change in incompatible ways.</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p><strong>Warning</strong> <br />
This program is <strong>experimental</strong> and its interface is subject to change.</p>
</blockquote>
<h1 id="name-11"><a class="header" href="#name-11">Name</a></h1>
<p><code>nix</code> - a tool for reproducible and declarative configuration management</p>
<h1 id="synopsis-42"><a class="header" href="#synopsis-42">Synopsis</a></h1>
<p><code>nix</code> [<em>option</em>...] <em>subcommand</em></p>
<p>where <em>subcommand</em> is one of the following:</p>
<p><strong>Main commands:</strong></p>
<ul>
<li><a href="command-ref/new-cli/./nix3-build.html"><code>nix build</code></a> - build a derivation or fetch a store path</li>
<li><a href="command-ref/new-cli/./nix3-develop.html"><code>nix develop</code></a> - run a bash shell that provides the build environment of a derivation</li>
<li><a href="command-ref/new-cli/./nix3-flake.html"><code>nix flake</code></a> - manage Nix flakes</li>
<li><a href="command-ref/new-cli/./nix3-help.html"><code>nix help</code></a> - show help about <code>nix</code> or a particular subcommand</li>
<li><a href="command-ref/new-cli/./nix3-profile.html"><code>nix profile</code></a> - manage Nix profiles</li>
<li><a href="command-ref/new-cli/./nix3-repl.html"><code>nix repl</code></a> - start an interactive environment for evaluating Nix expressions</li>
<li><a href="command-ref/new-cli/./nix3-run.html"><code>nix run</code></a> - run a Nix application</li>
<li><a href="command-ref/new-cli/./nix3-search.html"><code>nix search</code></a> - search for packages</li>
<li><a href="command-ref/new-cli/./nix3-shell.html"><code>nix shell</code></a> - run a shell in which the specified packages are available</li>
</ul>
<p><strong>Infrequently used commands:</strong></p>
<ul>
<li><a href="command-ref/new-cli/./nix3-bundle.html"><code>nix bundle</code></a> - bundle an application so that it works outside of the Nix store</li>
<li><a href="command-ref/new-cli/./nix3-copy.html"><code>nix copy</code></a> - copy paths between Nix stores</li>
<li><a href="command-ref/new-cli/./nix3-edit.html"><code>nix edit</code></a> - open the Nix expression of a Nix package in $EDITOR</li>
<li><a href="command-ref/new-cli/./nix3-eval.html"><code>nix eval</code></a> - evaluate a Nix expression</li>
<li><a href="command-ref/new-cli/./nix3-fmt.html"><code>nix fmt</code></a> - reformat your code in the standard style</li>
<li><a href="command-ref/new-cli/./nix3-log.html"><code>nix log</code></a> - show the build log of the specified packages or paths, if available</li>
<li><a href="command-ref/new-cli/./nix3-path-info.html"><code>nix path-info</code></a> - query information about store paths</li>
<li><a href="command-ref/new-cli/./nix3-registry.html"><code>nix registry</code></a> - manage the flake registry</li>
<li><a href="command-ref/new-cli/./nix3-why-depends.html"><code>nix why-depends</code></a> - show why a package has another package in its closure</li>
</ul>
<p><strong>Utility/scripting commands:</strong></p>
<ul>
<li><a href="command-ref/new-cli/./nix3-daemon.html"><code>nix daemon</code></a> - daemon to perform store operations on behalf of non-root clients</li>
<li><a href="command-ref/new-cli/./nix3-describe-stores.html"><code>nix describe-stores</code></a> - show registered store types and their available options</li>
<li><a href="command-ref/new-cli/./nix3-hash.html"><code>nix hash</code></a> - compute and convert cryptographic hashes</li>
<li><a href="command-ref/new-cli/./nix3-key.html"><code>nix key</code></a> - generate and convert Nix signing keys</li>
<li><a href="command-ref/new-cli/./nix3-nar.html"><code>nix nar</code></a> - create or inspect NAR files</li>
<li><a href="command-ref/new-cli/./nix3-print-dev-env.html"><code>nix print-dev-env</code></a> - print shell code that can be sourced by bash to reproduce the build environment of a derivation</li>
<li><a href="command-ref/new-cli/./nix3-realisation.html"><code>nix realisation</code></a> - manipulate a Nix realisation</li>
<li><a href="command-ref/new-cli/./nix3-show-config.html"><code>nix show-config</code></a> - show the Nix configuration</li>
<li><a href="command-ref/new-cli/./nix3-show-derivation.html"><code>nix show-derivation</code></a> - show the contents of a store derivation</li>
<li><a href="command-ref/new-cli/./nix3-store.html"><code>nix store</code></a> - manipulate a Nix store</li>
</ul>
<p><strong>Commands for upgrading or troubleshooting your Nix installation:</strong></p>
<ul>
<li><a href="command-ref/new-cli/./nix3-doctor.html"><code>nix doctor</code></a> - check your system for potential problems and print a PASS or FAIL for each check</li>
<li><a href="command-ref/new-cli/./nix3-upgrade-nix.html"><code>nix upgrade-nix</code></a> - upgrade Nix to the stable version declared in Nixpkgs</li>
</ul>
<h1 id="examples-24"><a class="header" href="#examples-24">Examples</a></h1>
<ul>
<li>
<p>Create a new flake:</p>
<pre><code class="language-console"># nix flake new hello
# cd hello
</code></pre>
</li>
<li>
<p>Build the flake in the current directory:</p>
<pre><code class="language-console"># nix build
# ./result/bin/hello
Hello, world!
</code></pre>
</li>
<li>
<p>Run the flake in the current directory:</p>
<pre><code class="language-console"># nix run
Hello, world!
</code></pre>
</li>
<li>
<p>Start a development shell for hacking on this flake:</p>
<pre><code class="language-console"># nix develop
# unpackPhase
# cd hello-*
# configurePhase
# buildPhase
# ./hello
Hello, world!
# installPhase
# ../outputs/out/bin/hello
Hello, world!
</code></pre>
</li>
</ul>
<h1 id="description-42"><a class="header" href="#description-42">Description</a></h1>
<p>Nix is a tool for building software, configurations and other
artifacts in a reproducible and declarative way. For more information,
see the <a href="https://nixos.org/">Nix homepage</a> or the <a href="https://nixos.org/manual/nix/stable/">Nix
manual</a>.</p>
<h1 id="installables"><a class="header" href="#installables">Installables</a></h1>
<p>Many <code>nix</code> subcommands operate on one or more <em>installables</em>. These are
command line arguments that represent something that can be built in
the Nix store. Here are the recognised types of installables:</p>
<ul>
<li>
<p><strong>Flake output attributes</strong>: <code>nixpkgs#hello</code></p>
<p>These have the form <em>flakeref</em>[<code>#</code><em>attrpath</em>], where <em>flakeref</em> is a
flake reference and <em>attrpath</em> is an optional attribute path. For
more information on flakes, see <a href="command-ref/new-cli/./nix3-flake.html">the <code>nix flake</code> manual
page</a>.  Flake references are most commonly a flake
identifier in the flake registry (e.g. <code>nixpkgs</code>), or a raw path
(e.g. <code>/path/to/my-flake</code> or <code>.</code> or <code>../foo</code>), or a full URL
(e.g. <code>github:nixos/nixpkgs</code> or <code>path:.</code>)</p>
<p>When the flake reference is a raw path (a path without any URL
scheme), it is interpreted as a <code>path:</code> or <code>git+file:</code> url in the following
way:</p>
<ul>
<li>
<p>If the path is within a Git repository, then the url will be of the form
<code>git+file://[GIT_REPO_ROOT]?dir=[RELATIVE_FLAKE_DIR_PATH]</code>
where <code>GIT_REPO_ROOT</code> is the path to the root of the git repository,
and <code>RELATIVE_FLAKE_DIR_PATH</code> is the path (relative to the directory
root) of the closest parent of the given path that contains a <code>flake.nix</code> within
the git repository.
If no such directory exists, then Nix will error-out.</p>
<p>Note that the search will only include files indexed by git. In particular, files
which are matched by <code>.gitignore</code> or have never been <code>git add</code>-ed will not be
available in the flake. If this is undesirable, specify <code>path:&lt;directory&gt;</code> explicitly;</p>
<p>For example, if <code>/foo/bar</code> is a git repository with the following structure:</p>
<pre><code>.
└── baz
    ├── blah
    │   └── file.txt
    └── flake.nix
</code></pre>
</li>
</ul>
<p>Then <code>/foo/bar/baz/blah</code> will resolve to <code>git+file:///foo/bar?dir=baz</code></p>
<ul>
<li>
<p>If the supplied path is not a git repository, then the url will have the form
<code>path:FLAKE_DIR_PATH</code> where <code>FLAKE_DIR_PATH</code> is the closest parent
of the supplied path that contains a <code>flake.nix</code> file (within the same file-system).
If no such directory exists, then Nix will error-out.</p>
<p>For example, if <code>/foo/bar/flake.nix</code> exists, then <code>/foo/bar/baz/</code> will resolve to
<code>path:/foo/bar</code></p>
</li>
</ul>
<p>If <em>attrpath</em> is omitted, Nix tries some default values; for most
subcommands, the default is <code>packages.</code><em>system</em><code>.default</code>
(e.g. <code>packages.x86_64-linux.default</code>), but some subcommands have
other defaults. If <em>attrpath</em> <em>is</em> specified, <em>attrpath</em> is
interpreted as relative to one or more prefixes; for most
subcommands, these are <code>packages.</code><em>system</em>,
<code>legacyPackages.*system*</code> and the empty prefix. Thus, on
<code>x86_64-linux</code> <code>nix build nixpkgs#hello</code> will try to build the
attributes <code>packages.x86_64-linux.hello</code>,
<code>legacyPackages.x86_64-linux.hello</code> and <code>hello</code>.</p>
</li>
<li>
<p><strong>Store paths</strong>: <code>/nix/store/v5sv61sszx301i0x6xysaqzla09nksnd-hello-2.10</code></p>
<p>These are paths inside the Nix store, or symlinks that resolve to a
path in the Nix store.</p>
</li>
<li>
<p><strong>Store derivations</strong>: <code>/nix/store/p7gp6lxdg32h4ka1q398wd9r2zkbbz2v-hello-2.10.drv</code></p>
<p>By default, if you pass a <a href="command-ref/new-cli/../../glossary.html#gloss-store-derivation">store derivation</a> path to a <code>nix</code> subcommand, the command will operate on the <a href="command-ref/new-cli/../../glossary.html#gloss-output-path">output path</a>s of the derivation.</p>
<p>For example, <code>nix path-info</code> prints information about the output paths:</p>
<pre><code class="language-console"># nix path-info --json /nix/store/p7gp6lxdg32h4ka1q398wd9r2zkbbz2v-hello-2.10.drv
[{&quot;path&quot;:&quot;/nix/store/v5sv61sszx301i0x6xysaqzla09nksnd-hello-2.10&quot;,…}]
</code></pre>
<p>If you want to operate on the store derivation itself, pass the
<code>--derivation</code> flag.</p>
</li>
<li>
<p><strong>Nix attributes</strong>: <code>--file /path/to/nixpkgs hello</code></p>
<p>When the <code>-f</code> / <code>--file</code> <em>path</em> option is given, installables are
interpreted as attribute paths referencing a value returned by
evaluating the Nix file <em>path</em>.</p>
</li>
<li>
<p><strong>Nix expressions</strong>: <code>--expr '(import &lt;nixpkgs&gt; {}).hello.overrideDerivation (prev: { name = &quot;my-hello&quot;; })'</code>.</p>
<p>When the <code>--expr</code> option is given, all installables are interpreted
as Nix expressions. You may need to specify <code>--impure</code> if the
expression references impure inputs (such as <code>&lt;nixpkgs&gt;</code>).</p>
</li>
</ul>
<p>For most commands, if no installable is specified, the default is <code>.</code>,
i.e. Nix will operate on the default flake output attribute of the
flake in the current directory.</p>
<h2 id="derivation-output-selection"><a class="header" href="#derivation-output-selection">Derivation output selection</a></h2>
<p>Derivations can have multiple outputs, each corresponding to a
different store path. For instance, a package can have a <code>bin</code> output
that contains programs, and a <code>dev</code> output that provides development
artifacts like C/C++ header files. The outputs on which <code>nix</code> commands
operate are determined as follows:</p>
<ul>
<li>
<p>You can explicitly specify the desired outputs using the syntax
<em>installable</em><code>^</code><em>output1</em><code>,</code><em>...</em><code>,</code><em>outputN</em>. For example, you can
obtain the <code>dev</code> and <code>static</code> outputs of the <code>glibc</code> package:</p>
<pre><code class="language-console"># nix build 'nixpkgs#glibc^dev,static'
# ls ./result-dev/include/ ./result-static/lib/
…
</code></pre>
<p>and likewise, using a store path to a &quot;drv&quot; file to specify the derivation:</p>
<pre><code class="language-console"># nix build '/nix/store/gzaflydcr6sb3567hap9q6srzx8ggdgg-glibc-2.33-78.drv^dev,static'
…
</code></pre>
</li>
<li>
<p>You can also specify that <em>all</em> outputs should be used using the
syntax <em>installable</em><code>^*</code>. For example, the following shows the size
of all outputs of the <code>glibc</code> package in the binary cache:</p>
<pre><code class="language-console"># nix path-info -S --eval-store auto --store https://cache.nixos.org 'nixpkgs#glibc^*'
/nix/store/g02b1lpbddhymmcjb923kf0l7s9nww58-glibc-2.33-123                 33208200
/nix/store/851dp95qqiisjifi639r0zzg5l465ny4-glibc-2.33-123-bin             36142896
/nix/store/kdgs3q6r7xdff1p7a9hnjr43xw2404z7-glibc-2.33-123-debug          155787312
/nix/store/n4xa8h6pbmqmwnq0mmsz08l38abb06zc-glibc-2.33-123-static          42488328
/nix/store/q6580lr01jpcsqs4r5arlh4ki2c1m9rv-glibc-2.33-123-dev             44200560
</code></pre>
<p>and likewise, using a store path to a &quot;drv&quot; file to specify the derivation:</p>
<pre><code class="language-console"># nix path-info -S '/nix/store/gzaflydcr6sb3567hap9q6srzx8ggdgg-glibc-2.33-78.drv^*'
…
</code></pre>
</li>
<li>
<p>If you didn't specify the desired outputs, but the derivation has an
attribute <code>meta.outputsToInstall</code>, Nix will use those outputs. For
example, since the package <code>nixpkgs#libxml2</code> has this attribute:</p>
<pre><code class="language-console"># nix eval 'nixpkgs#libxml2.meta.outputsToInstall'
[ &quot;bin&quot; &quot;man&quot; ]
</code></pre>
<p>a command like <code>nix shell nixpkgs#libxml2</code> will provide only those
two outputs by default.</p>
<p>Note that a <a href="command-ref/new-cli/../../glossary.html#gloss-store-derivation">store derivation</a> (given by its <code>.drv</code> file store path) doesn't have
any attributes like <code>meta</code>, and thus this case doesn't apply to it.</p>
</li>
<li>
<p>Otherwise, Nix will use all outputs of the derivation.</p>
</li>
</ul>
<h1 id="nix-stores"><a class="header" href="#nix-stores">Nix stores</a></h1>
<p>Most <code>nix</code> subcommands operate on a <em>Nix store</em>.</p>
<p>TODO: list store types, options</p>
<h1 id="options-6"><a class="header" href="#options-6">Options</a></h1>
<p><strong>Logging-related options:</strong></p>
<ul>
<li>
<p><code>--debug</code></p>
<p>Set the logging verbosity level to 'debug'.</p>
</li>
<li>
<p><code>--log-format</code> <em>format</em></p>
<p>Set the format of log output; one of <code>raw</code>, <code>internal-json</code>, <code>bar</code> or <code>bar-with-logs</code>.</p>
</li>
<li>
<p><code>--print-build-logs</code> / <code>-L</code></p>
<p>Print full build logs on standard error.</p>
</li>
<li>
<p><code>--quiet</code></p>
<p>Decrease the logging verbosity level.</p>
</li>
<li>
<p><code>--verbose</code> / <code>-v</code></p>
<p>Increase the logging verbosity level.</p>
</li>
</ul>
<p><strong>Miscellaneous global options:</strong></p>
<ul>
<li>
<p><code>--help</code></p>
<p>Show usage information.</p>
</li>
<li>
<p><code>--offline</code></p>
<p>Disable substituters and consider all previously downloaded files up-to-date.</p>
</li>
<li>
<p><code>--option</code> <em>name</em> <em>value</em></p>
<p>Set the Nix configuration setting <em>name</em> to <em>value</em> (overriding <code>nix.conf</code>).</p>
</li>
<li>
<p><code>--refresh</code></p>
<p>Consider all previously downloaded files out-of-date.</p>
</li>
<li>
<p><code>--version</code></p>
<p>Show version information.</p>
</li>
</ul>
<p><strong>Options to override configuration settings:</strong></p>
<ul>
<li>
<p><code>--accept-flake-config</code></p>
<p>Enable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--access-tokens</code> <em>value</em></p>
<p>Set the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--allow-dirty</code></p>
<p>Enable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--allow-import-from-derivation</code></p>
<p>Enable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--allow-new-privileges</code></p>
<p>Enable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--allow-symlinked-store</code></p>
<p>Enable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--allow-unsafe-native-code-during-evaluation</code></p>
<p>Enable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--allowed-impure-host-deps</code> <em>value</em></p>
<p>Set the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--allowed-uris</code> <em>value</em></p>
<p>Set the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--allowed-users</code> <em>value</em></p>
<p>Set the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--auto-allocate-uids</code></p>
<p>Enable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--auto-optimise-store</code></p>
<p>Enable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt</code> <em>value</em></p>
<p>Set the <code>bash-prompt</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-prefix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-prefix</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-suffix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-suffix</code> setting.</p>
</li>
<li>
<p><code>--build-hook</code> <em>value</em></p>
<p>Set the <code>build-hook</code> setting.</p>
</li>
<li>
<p><code>--build-poll-interval</code> <em>value</em></p>
<p>Set the <code>build-poll-interval</code> setting.</p>
</li>
<li>
<p><code>--build-users-group</code> <em>value</em></p>
<p>Set the <code>build-users-group</code> setting.</p>
</li>
<li>
<p><code>--builders</code> <em>value</em></p>
<p>Set the <code>builders</code> setting.</p>
</li>
<li>
<p><code>--builders-use-substitutes</code></p>
<p>Enable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--commit-lockfile-summary</code> <em>value</em></p>
<p>Set the <code>commit-lockfile-summary</code> setting.</p>
</li>
<li>
<p><code>--compress-build-log</code></p>
<p>Enable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--connect-timeout</code> <em>value</em></p>
<p>Set the <code>connect-timeout</code> setting.</p>
</li>
<li>
<p><code>--cores</code> <em>value</em></p>
<p>Set the <code>cores</code> setting.</p>
</li>
<li>
<p><code>--diff-hook</code> <em>value</em></p>
<p>Set the <code>diff-hook</code> setting.</p>
</li>
<li>
<p><code>--download-attempts</code> <em>value</em></p>
<p>Set the <code>download-attempts</code> setting.</p>
</li>
<li>
<p><code>--download-speed</code> <em>value</em></p>
<p>Set the <code>download-speed</code> setting.</p>
</li>
<li>
<p><code>--eval-cache</code></p>
<p>Enable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--experimental-features</code> <em>value</em></p>
<p>Set the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-access-tokens</code> <em>value</em></p>
<p>Append to the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-impure-host-deps</code> <em>value</em></p>
<p>Append to the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-uris</code> <em>value</em></p>
<p>Append to the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-users</code> <em>value</em></p>
<p>Append to the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--extra-experimental-features</code> <em>value</em></p>
<p>Append to the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-extra-platforms</code> <em>value</em></p>
<p>Append to the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-hashed-mirrors</code> <em>value</em></p>
<p>Append to the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--extra-ignored-acls</code> <em>value</em></p>
<p>Append to the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--extra-nix-path</code> <em>value</em></p>
<p>Append to the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--extra-platforms</code> <em>value</em></p>
<p>Set the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-plugin-files</code> <em>value</em></p>
<p>Append to the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--extra-sandbox-paths</code> <em>value</em></p>
<p>Append to the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--extra-secret-key-files</code> <em>value</em></p>
<p>Append to the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--extra-substituters</code> <em>value</em></p>
<p>Append to the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-system-features</code> <em>value</em></p>
<p>Append to the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-public-keys</code> <em>value</em></p>
<p>Append to the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-substituters</code> <em>value</em></p>
<p>Append to the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-users</code> <em>value</em></p>
<p>Append to the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--fallback</code></p>
<p>Enable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--filter-syscalls</code></p>
<p>Enable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--flake-registry</code> <em>value</em></p>
<p>Set the <code>flake-registry</code> setting.</p>
</li>
<li>
<p><code>--fsync-metadata</code></p>
<p>Enable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--gc-reserved-space</code> <em>value</em></p>
<p>Set the <code>gc-reserved-space</code> setting.</p>
</li>
<li>
<p><code>--hashed-mirrors</code> <em>value</em></p>
<p>Set the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--http-connections</code> <em>value</em></p>
<p>Set the <code>http-connections</code> setting.</p>
</li>
<li>
<p><code>--http2</code></p>
<p>Enable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--id-count</code> <em>value</em></p>
<p>Set the <code>id-count</code> setting.</p>
</li>
<li>
<p><code>--ignore-try</code></p>
<p>Enable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--ignored-acls</code> <em>value</em></p>
<p>Set the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--impersonate-linux-26</code></p>
<p>Enable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--keep-build-log</code></p>
<p>Enable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--keep-derivations</code></p>
<p>Enable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-env-derivations</code></p>
<p>Enable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-failed</code></p>
<p>Enable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--keep-going</code></p>
<p>Enable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--keep-outputs</code></p>
<p>Enable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--log-lines</code> <em>value</em></p>
<p>Set the <code>log-lines</code> setting.</p>
</li>
<li>
<p><code>--max-build-log-size</code> <em>value</em></p>
<p>Set the <code>max-build-log-size</code> setting.</p>
</li>
<li>
<p><code>--max-free</code> <em>value</em></p>
<p>Set the <code>max-free</code> setting.</p>
</li>
<li>
<p><code>--max-jobs</code> <em>value</em></p>
<p>Set the <code>max-jobs</code> setting.</p>
</li>
<li>
<p><code>--max-silent-time</code> <em>value</em></p>
<p>Set the <code>max-silent-time</code> setting.</p>
</li>
<li>
<p><code>--min-free</code> <em>value</em></p>
<p>Set the <code>min-free</code> setting.</p>
</li>
<li>
<p><code>--min-free-check-interval</code> <em>value</em></p>
<p>Set the <code>min-free-check-interval</code> setting.</p>
</li>
<li>
<p><code>--nar-buffer-size</code> <em>value</em></p>
<p>Set the <code>nar-buffer-size</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-negative-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-negative-ttl</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-positive-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-positive-ttl</code> setting.</p>
</li>
<li>
<p><code>--netrc-file</code> <em>value</em></p>
<p>Set the <code>netrc-file</code> setting.</p>
</li>
<li>
<p><code>--nix-path</code> <em>value</em></p>
<p>Set the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--no-accept-flake-config</code></p>
<p>Disable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--no-allow-dirty</code></p>
<p>Disable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--no-allow-import-from-derivation</code></p>
<p>Disable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--no-allow-new-privileges</code></p>
<p>Disable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--no-allow-symlinked-store</code></p>
<p>Disable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--no-allow-unsafe-native-code-during-evaluation</code></p>
<p>Disable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--no-auto-allocate-uids</code></p>
<p>Disable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--no-auto-optimise-store</code></p>
<p>Disable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--no-builders-use-substitutes</code></p>
<p>Disable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--no-compress-build-log</code></p>
<p>Disable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-eval-cache</code></p>
<p>Disable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--no-fallback</code></p>
<p>Disable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--no-filter-syscalls</code></p>
<p>Disable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--no-fsync-metadata</code></p>
<p>Disable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--no-http2</code></p>
<p>Disable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--no-ignore-try</code></p>
<p>Disable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--no-impersonate-linux-26</code></p>
<p>Disable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--no-keep-build-log</code></p>
<p>Disable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-keep-derivations</code></p>
<p>Disable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-env-derivations</code></p>
<p>Disable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-failed</code></p>
<p>Disable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--no-keep-going</code></p>
<p>Disable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--no-keep-outputs</code></p>
<p>Disable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--no-preallocate-contents</code></p>
<p>Disable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--no-print-missing</code></p>
<p>Disable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--no-pure-eval</code></p>
<p>Disable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--no-require-sigs</code></p>
<p>Disable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--no-restrict-eval</code></p>
<p>Disable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--no-run-diff-hook</code></p>
<p>Disable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--no-sandbox</code></p>
<p>Disable sandboxing.</p>
</li>
<li>
<p><code>--no-sandbox-fallback</code></p>
<p>Disable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--no-show-trace</code></p>
<p>Disable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--no-substitute</code></p>
<p>Disable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--no-sync-before-registering</code></p>
<p>Disable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--no-trace-function-calls</code></p>
<p>Disable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--no-trace-verbose</code></p>
<p>Disable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--no-use-case-hack</code></p>
<p>Disable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--no-use-cgroups</code></p>
<p>Disable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--no-use-registries</code></p>
<p>Disable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--no-use-sqlite-wal</code></p>
<p>Disable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--no-warn-dirty</code></p>
<p>Disable the <code>warn-dirty</code> setting.</p>
</li>
<li>
<p><code>--plugin-files</code> <em>value</em></p>
<p>Set the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--post-build-hook</code> <em>value</em></p>
<p>Set the <code>post-build-hook</code> setting.</p>
</li>
<li>
<p><code>--pre-build-hook</code> <em>value</em></p>
<p>Set the <code>pre-build-hook</code> setting.</p>
</li>
<li>
<p><code>--preallocate-contents</code></p>
<p>Enable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--print-missing</code></p>
<p>Enable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--pure-eval</code></p>
<p>Enable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--relaxed-sandbox</code></p>
<p>Enable sandboxing, but allow builds to disable it.</p>
</li>
<li>
<p><code>--require-sigs</code></p>
<p>Enable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--restrict-eval</code></p>
<p>Enable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--run-diff-hook</code></p>
<p>Enable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--sandbox</code></p>
<p>Enable sandboxing.</p>
</li>
<li>
<p><code>--sandbox-build-dir</code> <em>value</em></p>
<p>Set the <code>sandbox-build-dir</code> setting.</p>
</li>
<li>
<p><code>--sandbox-dev-shm-size</code> <em>value</em></p>
<p>Set the <code>sandbox-dev-shm-size</code> setting.</p>
</li>
<li>
<p><code>--sandbox-fallback</code></p>
<p>Enable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--sandbox-paths</code> <em>value</em></p>
<p>Set the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--secret-key-files</code> <em>value</em></p>
<p>Set the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--show-trace</code></p>
<p>Enable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--stalled-download-timeout</code> <em>value</em></p>
<p>Set the <code>stalled-download-timeout</code> setting.</p>
</li>
<li>
<p><code>--start-id</code> <em>value</em></p>
<p>Set the <code>start-id</code> setting.</p>
</li>
<li>
<p><code>--store</code> <em>value</em></p>
<p>Set the <code>store</code> setting.</p>
</li>
<li>
<p><code>--substitute</code></p>
<p>Enable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--substituters</code> <em>value</em></p>
<p>Set the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--sync-before-registering</code></p>
<p>Enable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--system</code> <em>value</em></p>
<p>Set the <code>system</code> setting.</p>
</li>
<li>
<p><code>--system-features</code> <em>value</em></p>
<p>Set the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--tarball-ttl</code> <em>value</em></p>
<p>Set the <code>tarball-ttl</code> setting.</p>
</li>
<li>
<p><code>--timeout</code> <em>value</em></p>
<p>Set the <code>timeout</code> setting.</p>
</li>
<li>
<p><code>--trace-function-calls</code></p>
<p>Enable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--trace-verbose</code></p>
<p>Enable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--trusted-public-keys</code> <em>value</em></p>
<p>Set the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--trusted-substituters</code> <em>value</em></p>
<p>Set the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--trusted-users</code> <em>value</em></p>
<p>Set the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--use-case-hack</code></p>
<p>Enable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--use-cgroups</code></p>
<p>Enable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--use-registries</code></p>
<p>Enable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--use-sqlite-wal</code></p>
<p>Enable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--user-agent-suffix</code> <em>value</em></p>
<p>Set the <code>user-agent-suffix</code> setting.</p>
</li>
<li>
<p><code>--warn-dirty</code></p>
<p>Enable the <code>warn-dirty</code> setting.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p><strong>Warning</strong> <br />
This program is <strong>experimental</strong> and its interface is subject to change.</p>
</blockquote>
<h1 id="name-12"><a class="header" href="#name-12">Name</a></h1>
<p><code>nix build</code> - build a derivation or fetch a store path</p>
<h1 id="synopsis-43"><a class="header" href="#synopsis-43">Synopsis</a></h1>
<p><code>nix build</code> [<em>option</em>...] <em>installables</em>...</p>
<h1 id="examples-25"><a class="header" href="#examples-25">Examples</a></h1>
<ul>
<li>
<p>Build the default package from the flake in the current directory:</p>
<pre><code class="language-console"># nix build
</code></pre>
</li>
<li>
<p>Build and run GNU Hello from the <code>nixpkgs</code> flake:</p>
<pre><code class="language-console"># nix build nixpkgs#hello
# ./result/bin/hello
Hello, world!
</code></pre>
</li>
<li>
<p>Build GNU Hello and Cowsay, leaving two result symlinks:</p>
<pre><code class="language-console"># nix build nixpkgs#hello nixpkgs#cowsay
# ls -l result*
lrwxrwxrwx 1 … result -&gt; /nix/store/v5sv61sszx301i0x6xysaqzla09nksnd-hello-2.10
lrwxrwxrwx 1 … result-1 -&gt; /nix/store/rkfrm0z6x6jmi7d3gsmma4j53h15mg33-cowsay-3.03+dfsg2
</code></pre>
</li>
<li>
<p>Build GNU Hello and print the resulting store path.</p>
<pre><code class="language-console"># nix build nixpkgs#hello --print-out-paths
/nix/store/v5sv61sszx301i0x6xysaqzla09nksnd-hello-2.10
</code></pre>
</li>
<li>
<p>Build a specific output:</p>
<pre><code class="language-console"># nix build nixpkgs#glibc.dev
# ls -ld ./result-dev
lrwxrwxrwx 1 … ./result-dev -&gt; /nix/store/dkm3gwl0xrx0wrw6zi5x3px3lpgjhlw4-glibc-2.32-dev
</code></pre>
</li>
<li>
<p>Build attribute <code>build.x86_64-linux</code> from (non-flake) Nix expression
<code>release.nix</code>:</p>
<pre><code class="language-console"># nix build -f release.nix build.x86_64-linux
</code></pre>
</li>
<li>
<p>Build a NixOS system configuration from a flake, and make a profile
point to the result:</p>
<pre><code class="language-console"># nix build --profile /nix/var/nix/profiles/system \
    ~/my-configurations#nixosConfigurations.machine.config.system.build.toplevel
</code></pre>
<p>(This is essentially what <code>nixos-rebuild</code> does.)</p>
</li>
<li>
<p>Build an expression specified on the command line:</p>
<pre><code class="language-console"># nix build --impure --expr \
    'with import &lt;nixpkgs&gt; {};
     runCommand &quot;foo&quot; {
       buildInputs = [ hello ];
     }
     &quot;hello &gt; $out&quot;'
# cat ./result
Hello, world!
</code></pre>
<p>Note that <code>--impure</code> is needed because we're using <code>&lt;nixpkgs&gt;</code>,
which relies on the <code>$NIX_PATH</code> environment variable.</p>
</li>
<li>
<p>Fetch a store path from the configured substituters, if it doesn't
already exist:</p>
<pre><code class="language-console"># nix build /nix/store/rkfrm0z6x6jmi7d3gsmma4j53h15mg33-cowsay-3.03+dfsg2
</code></pre>
</li>
</ul>
<h1 id="description-43"><a class="header" href="#description-43">Description</a></h1>
<p><code>nix build</code> builds the specified <em>installables</em>. Installables that
resolve to derivations are built (or substituted if possible). Store
path installables are substituted.</p>
<p>Unless <code>--no-link</code> is specified, after a successful build, it creates
symlinks to the store paths of the installables. These symlinks have
the prefix <code>./result</code> by default; this can be overridden using the
<code>--out-link</code> option. Each symlink has a suffix <code>-&lt;N&gt;-&lt;outname&gt;</code>, where
<em>N</em> is the index of the installable (with the left-most installable
having index 0), and <em>outname</em> is the symbolic derivation output name
(e.g. <code>bin</code>, <code>dev</code> or <code>lib</code>). <code>-&lt;N&gt;</code> is omitted if <em>N</em> = 0, and
<code>-&lt;outname&gt;</code> is omitted if <em>outname</em> = <code>out</code> (denoting the default
output).</p>
<h1 id="options-7"><a class="header" href="#options-7">Options</a></h1>
<ul>
<li>
<p><code>--dry-run</code></p>
<p>Show what this command would do without doing it.</p>
</li>
<li>
<p><code>--json</code></p>
<p>Produce output in JSON format, suitable for consumption by another program.</p>
</li>
<li>
<p><code>--no-link</code></p>
<p>Do not create symlinks to the build results.</p>
</li>
<li>
<p><code>--out-link</code> / <code>-o</code> <em>path</em></p>
<p>Use <em>path</em> as prefix for the symlinks to the build results. It defaults to <code>result</code>.</p>
</li>
<li>
<p><code>--print-out-paths</code></p>
<p>Print the resulting output paths</p>
</li>
<li>
<p><code>--profile</code> <em>path</em></p>
<p>The profile to operate on.</p>
</li>
<li>
<p><code>--rebuild</code></p>
<p>Rebuild an already built package and compare the result to the existing store paths.</p>
</li>
</ul>
<p><strong>Common evaluation options:</strong></p>
<ul>
<li>
<p><code>--arg</code> <em>name</em> <em>expr</em></p>
<p>Pass the value <em>expr</em> as the argument <em>name</em> to Nix functions.</p>
</li>
<li>
<p><code>--argstr</code> <em>name</em> <em>string</em></p>
<p>Pass the string <em>string</em> as the argument <em>name</em> to Nix functions.</p>
</li>
<li>
<p><code>--debugger</code></p>
<p>Start an interactive environment if evaluation fails.</p>
</li>
<li>
<p><code>--eval-store</code> <em>store-url</em></p>
<p>The Nix store to use for evaluations.</p>
</li>
<li>
<p><code>--impure</code></p>
<p>Allow access to mutable paths and repositories.</p>
</li>
<li>
<p><code>--include</code> / <code>-I</code> <em>path</em></p>
<p>Add <em>path</em> to the Nix search path. The Nix search path is
initialized from the colon-separated <a href="command-ref/new-cli/../../command-ref/env-common.html#env-NIX_PATH"><code>NIX_PATH</code></a> environment
variable, and is used to look up the location of Nix expressions using <a href="command-ref/new-cli/../../language/values.html#type-path">paths</a> enclosed in angle
brackets (i.e., <code>&lt;nixpkgs&gt;</code>).</p>
<p>For instance, passing</p>
<pre><code>-I /home/eelco/Dev
-I /etc/nixos
</code></pre>
<p>will cause Nix to look for paths relative to <code>/home/eelco/Dev</code> and
<code>/etc/nixos</code>, in that order. This is equivalent to setting the
<code>NIX_PATH</code> environment variable to</p>
<pre><code>/home/eelco/Dev:/etc/nixos
</code></pre>
<p>It is also possible to match paths against a prefix. For example,
passing</p>
<pre><code>-I nixpkgs=/home/eelco/Dev/nixpkgs-branch
-I /etc/nixos
</code></pre>
<p>will cause Nix to search for <code>&lt;nixpkgs/path&gt;</code> in
<code>/home/eelco/Dev/nixpkgs-branch/path</code> and <code>/etc/nixos/nixpkgs/path</code>.</p>
<p>If a path in the Nix search path starts with <code>http://</code> or <code>https://</code>,
it is interpreted as the URL of a tarball that will be downloaded and
unpacked to a temporary location. The tarball must consist of a single
top-level directory. For example, passing</p>
<pre><code>-I nixpkgs=https://github.com/NixOS/nixpkgs/archive/master.tar.gz
</code></pre>
<p>tells Nix to download and use the current contents of the <code>master</code>
branch in the <code>nixpkgs</code> repository.</p>
<p>The URLs of the tarballs from the official <code>nixos.org</code> channels
(see <a href="command-ref/new-cli/../nix-channel.html">the manual page for <code>nix-channel</code></a>) can be
abbreviated as <code>channel:&lt;channel-name&gt;</code>. For instance, the
following two flags are equivalent:</p>
<pre><code>-I nixpkgs=channel:nixos-21.05
-I nixpkgs=https://nixos.org/channels/nixos-21.05/nixexprs.tar.xz
</code></pre>
<p>You can also fetch source trees using <a href="command-ref/new-cli/./nix3-flake.html#url-like-syntax">flake URLs</a> and add them to the
search path. For instance,</p>
<pre><code>-I nixpkgs=flake:nixpkgs
</code></pre>
<p>specifies that the prefix <code>nixpkgs</code> shall refer to the source tree
downloaded from the <code>nixpkgs</code> entry in the flake registry. Similarly,</p>
<pre><code>-I nixpkgs=flake:github:NixOS/nixpkgs/nixos-22.05
</code></pre>
<p>makes <code>&lt;nixpkgs&gt;</code> refer to a particular branch of the
<code>NixOS/nixpkgs</code> repository on GitHub.</p>
</li>
<li>
<p><code>--override-flake</code> <em>original-ref</em> <em>resolved-ref</em></p>
<p>Override the flake registries, redirecting <em>original-ref</em> to <em>resolved-ref</em>.</p>
</li>
</ul>
<p><strong>Common flake-related options:</strong></p>
<ul>
<li>
<p><code>--commit-lock-file</code></p>
<p>Commit changes to the flake's lock file.</p>
</li>
<li>
<p><code>--inputs-from</code> <em>flake-url</em></p>
<p>Use the inputs of the specified flake as registry entries.</p>
</li>
<li>
<p><code>--no-registries</code></p>
<p>Don't allow lookups in the flake registries. This option is deprecated; use <code>--no-use-registries</code>.</p>
</li>
<li>
<p><code>--no-update-lock-file</code></p>
<p>Do not allow any updates to the flake's lock file.</p>
</li>
<li>
<p><code>--no-write-lock-file</code></p>
<p>Do not write the flake's newly generated lock file.</p>
</li>
<li>
<p><code>--override-input</code> <em>input-path</em> <em>flake-url</em></p>
<p>Override a specific flake input (e.g. <code>dwarffs/nixpkgs</code>). This implies <code>--no-write-lock-file</code>.</p>
</li>
<li>
<p><code>--recreate-lock-file</code></p>
<p>Recreate the flake's lock file from scratch.</p>
</li>
<li>
<p><code>--update-input</code> <em>input-path</em></p>
<p>Update a specific flake input (ignoring its previous entry in the lock file).</p>
</li>
</ul>
<p><strong>Logging-related options:</strong></p>
<ul>
<li>
<p><code>--debug</code></p>
<p>Set the logging verbosity level to 'debug'.</p>
</li>
<li>
<p><code>--log-format</code> <em>format</em></p>
<p>Set the format of log output; one of <code>raw</code>, <code>internal-json</code>, <code>bar</code> or <code>bar-with-logs</code>.</p>
</li>
<li>
<p><code>--print-build-logs</code> / <code>-L</code></p>
<p>Print full build logs on standard error.</p>
</li>
<li>
<p><code>--quiet</code></p>
<p>Decrease the logging verbosity level.</p>
</li>
<li>
<p><code>--verbose</code> / <code>-v</code></p>
<p>Increase the logging verbosity level.</p>
</li>
</ul>
<p><strong>Miscellaneous global options:</strong></p>
<ul>
<li>
<p><code>--help</code></p>
<p>Show usage information.</p>
</li>
<li>
<p><code>--offline</code></p>
<p>Disable substituters and consider all previously downloaded files up-to-date.</p>
</li>
<li>
<p><code>--option</code> <em>name</em> <em>value</em></p>
<p>Set the Nix configuration setting <em>name</em> to <em>value</em> (overriding <code>nix.conf</code>).</p>
</li>
<li>
<p><code>--refresh</code></p>
<p>Consider all previously downloaded files out-of-date.</p>
</li>
<li>
<p><code>--version</code></p>
<p>Show version information.</p>
</li>
</ul>
<p><strong>Options that change the interpretation of installables:</strong></p>
<ul>
<li>
<p><code>--derivation</code></p>
<p>Operate on the <a href="command-ref/new-cli/../../glossary.html#gloss-store-derivation">store derivation</a> rather than its outputs.</p>
</li>
<li>
<p><code>--expr</code> <em>expr</em></p>
<p>Interpret installables as attribute paths relative to the Nix expression <em>expr</em>.</p>
</li>
<li>
<p><code>--file</code> / <code>-f</code> <em>file</em></p>
<p>Interpret installables as attribute paths relative to the Nix expression stored in <em>file</em>. If <em>file</em> is the character -, then a Nix expression will be read from standard input. Implies <code>--impure</code>.</p>
</li>
</ul>
<p><strong>Options to override configuration settings:</strong></p>
<ul>
<li>
<p><code>--accept-flake-config</code></p>
<p>Enable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--access-tokens</code> <em>value</em></p>
<p>Set the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--allow-dirty</code></p>
<p>Enable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--allow-import-from-derivation</code></p>
<p>Enable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--allow-new-privileges</code></p>
<p>Enable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--allow-symlinked-store</code></p>
<p>Enable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--allow-unsafe-native-code-during-evaluation</code></p>
<p>Enable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--allowed-impure-host-deps</code> <em>value</em></p>
<p>Set the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--allowed-uris</code> <em>value</em></p>
<p>Set the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--allowed-users</code> <em>value</em></p>
<p>Set the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--auto-allocate-uids</code></p>
<p>Enable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--auto-optimise-store</code></p>
<p>Enable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt</code> <em>value</em></p>
<p>Set the <code>bash-prompt</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-prefix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-prefix</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-suffix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-suffix</code> setting.</p>
</li>
<li>
<p><code>--build-hook</code> <em>value</em></p>
<p>Set the <code>build-hook</code> setting.</p>
</li>
<li>
<p><code>--build-poll-interval</code> <em>value</em></p>
<p>Set the <code>build-poll-interval</code> setting.</p>
</li>
<li>
<p><code>--build-users-group</code> <em>value</em></p>
<p>Set the <code>build-users-group</code> setting.</p>
</li>
<li>
<p><code>--builders</code> <em>value</em></p>
<p>Set the <code>builders</code> setting.</p>
</li>
<li>
<p><code>--builders-use-substitutes</code></p>
<p>Enable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--commit-lockfile-summary</code> <em>value</em></p>
<p>Set the <code>commit-lockfile-summary</code> setting.</p>
</li>
<li>
<p><code>--compress-build-log</code></p>
<p>Enable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--connect-timeout</code> <em>value</em></p>
<p>Set the <code>connect-timeout</code> setting.</p>
</li>
<li>
<p><code>--cores</code> <em>value</em></p>
<p>Set the <code>cores</code> setting.</p>
</li>
<li>
<p><code>--diff-hook</code> <em>value</em></p>
<p>Set the <code>diff-hook</code> setting.</p>
</li>
<li>
<p><code>--download-attempts</code> <em>value</em></p>
<p>Set the <code>download-attempts</code> setting.</p>
</li>
<li>
<p><code>--download-speed</code> <em>value</em></p>
<p>Set the <code>download-speed</code> setting.</p>
</li>
<li>
<p><code>--eval-cache</code></p>
<p>Enable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--experimental-features</code> <em>value</em></p>
<p>Set the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-access-tokens</code> <em>value</em></p>
<p>Append to the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-impure-host-deps</code> <em>value</em></p>
<p>Append to the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-uris</code> <em>value</em></p>
<p>Append to the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-users</code> <em>value</em></p>
<p>Append to the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--extra-experimental-features</code> <em>value</em></p>
<p>Append to the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-extra-platforms</code> <em>value</em></p>
<p>Append to the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-hashed-mirrors</code> <em>value</em></p>
<p>Append to the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--extra-ignored-acls</code> <em>value</em></p>
<p>Append to the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--extra-nix-path</code> <em>value</em></p>
<p>Append to the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--extra-platforms</code> <em>value</em></p>
<p>Set the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-plugin-files</code> <em>value</em></p>
<p>Append to the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--extra-sandbox-paths</code> <em>value</em></p>
<p>Append to the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--extra-secret-key-files</code> <em>value</em></p>
<p>Append to the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--extra-substituters</code> <em>value</em></p>
<p>Append to the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-system-features</code> <em>value</em></p>
<p>Append to the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-public-keys</code> <em>value</em></p>
<p>Append to the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-substituters</code> <em>value</em></p>
<p>Append to the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-users</code> <em>value</em></p>
<p>Append to the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--fallback</code></p>
<p>Enable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--filter-syscalls</code></p>
<p>Enable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--flake-registry</code> <em>value</em></p>
<p>Set the <code>flake-registry</code> setting.</p>
</li>
<li>
<p><code>--fsync-metadata</code></p>
<p>Enable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--gc-reserved-space</code> <em>value</em></p>
<p>Set the <code>gc-reserved-space</code> setting.</p>
</li>
<li>
<p><code>--hashed-mirrors</code> <em>value</em></p>
<p>Set the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--http-connections</code> <em>value</em></p>
<p>Set the <code>http-connections</code> setting.</p>
</li>
<li>
<p><code>--http2</code></p>
<p>Enable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--id-count</code> <em>value</em></p>
<p>Set the <code>id-count</code> setting.</p>
</li>
<li>
<p><code>--ignore-try</code></p>
<p>Enable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--ignored-acls</code> <em>value</em></p>
<p>Set the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--impersonate-linux-26</code></p>
<p>Enable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--keep-build-log</code></p>
<p>Enable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--keep-derivations</code></p>
<p>Enable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-env-derivations</code></p>
<p>Enable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-failed</code></p>
<p>Enable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--keep-going</code></p>
<p>Enable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--keep-outputs</code></p>
<p>Enable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--log-lines</code> <em>value</em></p>
<p>Set the <code>log-lines</code> setting.</p>
</li>
<li>
<p><code>--max-build-log-size</code> <em>value</em></p>
<p>Set the <code>max-build-log-size</code> setting.</p>
</li>
<li>
<p><code>--max-free</code> <em>value</em></p>
<p>Set the <code>max-free</code> setting.</p>
</li>
<li>
<p><code>--max-jobs</code> <em>value</em></p>
<p>Set the <code>max-jobs</code> setting.</p>
</li>
<li>
<p><code>--max-silent-time</code> <em>value</em></p>
<p>Set the <code>max-silent-time</code> setting.</p>
</li>
<li>
<p><code>--min-free</code> <em>value</em></p>
<p>Set the <code>min-free</code> setting.</p>
</li>
<li>
<p><code>--min-free-check-interval</code> <em>value</em></p>
<p>Set the <code>min-free-check-interval</code> setting.</p>
</li>
<li>
<p><code>--nar-buffer-size</code> <em>value</em></p>
<p>Set the <code>nar-buffer-size</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-negative-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-negative-ttl</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-positive-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-positive-ttl</code> setting.</p>
</li>
<li>
<p><code>--netrc-file</code> <em>value</em></p>
<p>Set the <code>netrc-file</code> setting.</p>
</li>
<li>
<p><code>--nix-path</code> <em>value</em></p>
<p>Set the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--no-accept-flake-config</code></p>
<p>Disable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--no-allow-dirty</code></p>
<p>Disable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--no-allow-import-from-derivation</code></p>
<p>Disable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--no-allow-new-privileges</code></p>
<p>Disable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--no-allow-symlinked-store</code></p>
<p>Disable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--no-allow-unsafe-native-code-during-evaluation</code></p>
<p>Disable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--no-auto-allocate-uids</code></p>
<p>Disable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--no-auto-optimise-store</code></p>
<p>Disable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--no-builders-use-substitutes</code></p>
<p>Disable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--no-compress-build-log</code></p>
<p>Disable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-eval-cache</code></p>
<p>Disable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--no-fallback</code></p>
<p>Disable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--no-filter-syscalls</code></p>
<p>Disable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--no-fsync-metadata</code></p>
<p>Disable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--no-http2</code></p>
<p>Disable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--no-ignore-try</code></p>
<p>Disable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--no-impersonate-linux-26</code></p>
<p>Disable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--no-keep-build-log</code></p>
<p>Disable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-keep-derivations</code></p>
<p>Disable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-env-derivations</code></p>
<p>Disable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-failed</code></p>
<p>Disable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--no-keep-going</code></p>
<p>Disable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--no-keep-outputs</code></p>
<p>Disable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--no-preallocate-contents</code></p>
<p>Disable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--no-print-missing</code></p>
<p>Disable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--no-pure-eval</code></p>
<p>Disable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--no-require-sigs</code></p>
<p>Disable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--no-restrict-eval</code></p>
<p>Disable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--no-run-diff-hook</code></p>
<p>Disable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--no-sandbox</code></p>
<p>Disable sandboxing.</p>
</li>
<li>
<p><code>--no-sandbox-fallback</code></p>
<p>Disable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--no-show-trace</code></p>
<p>Disable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--no-substitute</code></p>
<p>Disable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--no-sync-before-registering</code></p>
<p>Disable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--no-trace-function-calls</code></p>
<p>Disable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--no-trace-verbose</code></p>
<p>Disable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--no-use-case-hack</code></p>
<p>Disable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--no-use-cgroups</code></p>
<p>Disable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--no-use-registries</code></p>
<p>Disable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--no-use-sqlite-wal</code></p>
<p>Disable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--no-warn-dirty</code></p>
<p>Disable the <code>warn-dirty</code> setting.</p>
</li>
<li>
<p><code>--plugin-files</code> <em>value</em></p>
<p>Set the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--post-build-hook</code> <em>value</em></p>
<p>Set the <code>post-build-hook</code> setting.</p>
</li>
<li>
<p><code>--pre-build-hook</code> <em>value</em></p>
<p>Set the <code>pre-build-hook</code> setting.</p>
</li>
<li>
<p><code>--preallocate-contents</code></p>
<p>Enable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--print-missing</code></p>
<p>Enable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--pure-eval</code></p>
<p>Enable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--relaxed-sandbox</code></p>
<p>Enable sandboxing, but allow builds to disable it.</p>
</li>
<li>
<p><code>--require-sigs</code></p>
<p>Enable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--restrict-eval</code></p>
<p>Enable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--run-diff-hook</code></p>
<p>Enable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--sandbox</code></p>
<p>Enable sandboxing.</p>
</li>
<li>
<p><code>--sandbox-build-dir</code> <em>value</em></p>
<p>Set the <code>sandbox-build-dir</code> setting.</p>
</li>
<li>
<p><code>--sandbox-dev-shm-size</code> <em>value</em></p>
<p>Set the <code>sandbox-dev-shm-size</code> setting.</p>
</li>
<li>
<p><code>--sandbox-fallback</code></p>
<p>Enable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--sandbox-paths</code> <em>value</em></p>
<p>Set the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--secret-key-files</code> <em>value</em></p>
<p>Set the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--show-trace</code></p>
<p>Enable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--stalled-download-timeout</code> <em>value</em></p>
<p>Set the <code>stalled-download-timeout</code> setting.</p>
</li>
<li>
<p><code>--start-id</code> <em>value</em></p>
<p>Set the <code>start-id</code> setting.</p>
</li>
<li>
<p><code>--store</code> <em>value</em></p>
<p>Set the <code>store</code> setting.</p>
</li>
<li>
<p><code>--substitute</code></p>
<p>Enable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--substituters</code> <em>value</em></p>
<p>Set the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--sync-before-registering</code></p>
<p>Enable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--system</code> <em>value</em></p>
<p>Set the <code>system</code> setting.</p>
</li>
<li>
<p><code>--system-features</code> <em>value</em></p>
<p>Set the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--tarball-ttl</code> <em>value</em></p>
<p>Set the <code>tarball-ttl</code> setting.</p>
</li>
<li>
<p><code>--timeout</code> <em>value</em></p>
<p>Set the <code>timeout</code> setting.</p>
</li>
<li>
<p><code>--trace-function-calls</code></p>
<p>Enable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--trace-verbose</code></p>
<p>Enable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--trusted-public-keys</code> <em>value</em></p>
<p>Set the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--trusted-substituters</code> <em>value</em></p>
<p>Set the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--trusted-users</code> <em>value</em></p>
<p>Set the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--use-case-hack</code></p>
<p>Enable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--use-cgroups</code></p>
<p>Enable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--use-registries</code></p>
<p>Enable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--use-sqlite-wal</code></p>
<p>Enable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--user-agent-suffix</code> <em>value</em></p>
<p>Set the <code>user-agent-suffix</code> setting.</p>
</li>
<li>
<p><code>--warn-dirty</code></p>
<p>Enable the <code>warn-dirty</code> setting.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p><strong>Warning</strong> <br />
This program is <strong>experimental</strong> and its interface is subject to change.</p>
</blockquote>
<h1 id="name-13"><a class="header" href="#name-13">Name</a></h1>
<p><code>nix bundle</code> - bundle an application so that it works outside of the Nix store</p>
<h1 id="synopsis-44"><a class="header" href="#synopsis-44">Synopsis</a></h1>
<p><code>nix bundle</code> [<em>option</em>...] <em>installable</em></p>
<h1 id="examples-26"><a class="header" href="#examples-26">Examples</a></h1>
<ul>
<li>
<p>Bundle Hello:</p>
<pre><code class="language-console"># nix bundle nixpkgs#hello
# ./hello
Hello, world!
</code></pre>
</li>
<li>
<p>Bundle a specific version of Nix:</p>
<pre><code class="language-console"># nix bundle github:NixOS/nix/e3ddffb27e5fc37a209cfd843c6f7f6a9460a8ec
# ./nix --version
nix (Nix) 2.4pre20201215_e3ddffb
</code></pre>
</li>
<li>
<p>Bundle a Hello using a specific bundler:</p>
<pre><code class="language-console"># nix bundle --bundler github:NixOS/bundlers#toDockerImage nixpkgs#hello
# docker load &lt; hello-2.10.tar.gz
# docker run hello-2.10:latest hello
Hello, world!
</code></pre>
</li>
</ul>
<h1 id="description-44"><a class="header" href="#description-44">Description</a></h1>
<p><code>nix bundle</code>, by default, packs the closure of the <em>installable</em> into a single
self-extracting executable. See the <a href="https://github.com/NixOS/bundlers"><code>bundlers</code>
homepage</a> for more details.</p>
<blockquote>
<p><strong>Note</strong></p>
<p>This command only works on Linux.</p>
</blockquote>
<h1 id="flake-output-attributes"><a class="header" href="#flake-output-attributes">Flake output attributes</a></h1>
<p>If no flake output attribute is given, <code>nix bundle</code> tries the following
flake output attributes:</p>
<ul>
<li><code>bundlers.&lt;system&gt;.default</code></li>
</ul>
<p>If an attribute <em>name</em> is given, <code>nix bundle</code> tries the following flake
output attributes:</p>
<ul>
<li><code>bundlers.&lt;system&gt;.&lt;name&gt;</code></li>
</ul>
<h1 id="bundlers"><a class="header" href="#bundlers">Bundlers</a></h1>
<p>A bundler is specified by a flake output attribute named
<code>bundlers.&lt;system&gt;.&lt;name&gt;</code>. It looks like this:</p>
<pre><code class="language-nix">bundlers.x86_64-linux = rec {
  identity = drv: drv;

  blender_2_79 = drv: self.packages.x86_64-linux.blender_2_79;

  default = identity;
};
</code></pre>
<p>A bundler must be a function that accepts an arbitrary value (typically a
derivation or app definition) and returns a derivation.</p>
<h1 id="options-8"><a class="header" href="#options-8">Options</a></h1>
<ul>
<li>
<p><code>--bundler</code> <em>flake-url</em></p>
<p>Use a custom bundler instead of the default (<code>github:NixOS/bundlers</code>).</p>
</li>
<li>
<p><code>--out-link</code> / <code>-o</code> <em>path</em></p>
<p>Override the name of the symlink to the build result. It defaults to the base name of the app.</p>
</li>
</ul>
<p><strong>Common evaluation options:</strong></p>
<ul>
<li>
<p><code>--arg</code> <em>name</em> <em>expr</em></p>
<p>Pass the value <em>expr</em> as the argument <em>name</em> to Nix functions.</p>
</li>
<li>
<p><code>--argstr</code> <em>name</em> <em>string</em></p>
<p>Pass the string <em>string</em> as the argument <em>name</em> to Nix functions.</p>
</li>
<li>
<p><code>--debugger</code></p>
<p>Start an interactive environment if evaluation fails.</p>
</li>
<li>
<p><code>--eval-store</code> <em>store-url</em></p>
<p>The Nix store to use for evaluations.</p>
</li>
<li>
<p><code>--impure</code></p>
<p>Allow access to mutable paths and repositories.</p>
</li>
<li>
<p><code>--include</code> / <code>-I</code> <em>path</em></p>
<p>Add <em>path</em> to the Nix search path. The Nix search path is
initialized from the colon-separated <a href="command-ref/new-cli/../../command-ref/env-common.html#env-NIX_PATH"><code>NIX_PATH</code></a> environment
variable, and is used to look up the location of Nix expressions using <a href="command-ref/new-cli/../../language/values.html#type-path">paths</a> enclosed in angle
brackets (i.e., <code>&lt;nixpkgs&gt;</code>).</p>
<p>For instance, passing</p>
<pre><code>-I /home/eelco/Dev
-I /etc/nixos
</code></pre>
<p>will cause Nix to look for paths relative to <code>/home/eelco/Dev</code> and
<code>/etc/nixos</code>, in that order. This is equivalent to setting the
<code>NIX_PATH</code> environment variable to</p>
<pre><code>/home/eelco/Dev:/etc/nixos
</code></pre>
<p>It is also possible to match paths against a prefix. For example,
passing</p>
<pre><code>-I nixpkgs=/home/eelco/Dev/nixpkgs-branch
-I /etc/nixos
</code></pre>
<p>will cause Nix to search for <code>&lt;nixpkgs/path&gt;</code> in
<code>/home/eelco/Dev/nixpkgs-branch/path</code> and <code>/etc/nixos/nixpkgs/path</code>.</p>
<p>If a path in the Nix search path starts with <code>http://</code> or <code>https://</code>,
it is interpreted as the URL of a tarball that will be downloaded and
unpacked to a temporary location. The tarball must consist of a single
top-level directory. For example, passing</p>
<pre><code>-I nixpkgs=https://github.com/NixOS/nixpkgs/archive/master.tar.gz
</code></pre>
<p>tells Nix to download and use the current contents of the <code>master</code>
branch in the <code>nixpkgs</code> repository.</p>
<p>The URLs of the tarballs from the official <code>nixos.org</code> channels
(see <a href="command-ref/new-cli/../nix-channel.html">the manual page for <code>nix-channel</code></a>) can be
abbreviated as <code>channel:&lt;channel-name&gt;</code>. For instance, the
following two flags are equivalent:</p>
<pre><code>-I nixpkgs=channel:nixos-21.05
-I nixpkgs=https://nixos.org/channels/nixos-21.05/nixexprs.tar.xz
</code></pre>
<p>You can also fetch source trees using <a href="command-ref/new-cli/./nix3-flake.html#url-like-syntax">flake URLs</a> and add them to the
search path. For instance,</p>
<pre><code>-I nixpkgs=flake:nixpkgs
</code></pre>
<p>specifies that the prefix <code>nixpkgs</code> shall refer to the source tree
downloaded from the <code>nixpkgs</code> entry in the flake registry. Similarly,</p>
<pre><code>-I nixpkgs=flake:github:NixOS/nixpkgs/nixos-22.05
</code></pre>
<p>makes <code>&lt;nixpkgs&gt;</code> refer to a particular branch of the
<code>NixOS/nixpkgs</code> repository on GitHub.</p>
</li>
<li>
<p><code>--override-flake</code> <em>original-ref</em> <em>resolved-ref</em></p>
<p>Override the flake registries, redirecting <em>original-ref</em> to <em>resolved-ref</em>.</p>
</li>
</ul>
<p><strong>Common flake-related options:</strong></p>
<ul>
<li>
<p><code>--commit-lock-file</code></p>
<p>Commit changes to the flake's lock file.</p>
</li>
<li>
<p><code>--inputs-from</code> <em>flake-url</em></p>
<p>Use the inputs of the specified flake as registry entries.</p>
</li>
<li>
<p><code>--no-registries</code></p>
<p>Don't allow lookups in the flake registries. This option is deprecated; use <code>--no-use-registries</code>.</p>
</li>
<li>
<p><code>--no-update-lock-file</code></p>
<p>Do not allow any updates to the flake's lock file.</p>
</li>
<li>
<p><code>--no-write-lock-file</code></p>
<p>Do not write the flake's newly generated lock file.</p>
</li>
<li>
<p><code>--override-input</code> <em>input-path</em> <em>flake-url</em></p>
<p>Override a specific flake input (e.g. <code>dwarffs/nixpkgs</code>). This implies <code>--no-write-lock-file</code>.</p>
</li>
<li>
<p><code>--recreate-lock-file</code></p>
<p>Recreate the flake's lock file from scratch.</p>
</li>
<li>
<p><code>--update-input</code> <em>input-path</em></p>
<p>Update a specific flake input (ignoring its previous entry in the lock file).</p>
</li>
</ul>
<p><strong>Logging-related options:</strong></p>
<ul>
<li>
<p><code>--debug</code></p>
<p>Set the logging verbosity level to 'debug'.</p>
</li>
<li>
<p><code>--log-format</code> <em>format</em></p>
<p>Set the format of log output; one of <code>raw</code>, <code>internal-json</code>, <code>bar</code> or <code>bar-with-logs</code>.</p>
</li>
<li>
<p><code>--print-build-logs</code> / <code>-L</code></p>
<p>Print full build logs on standard error.</p>
</li>
<li>
<p><code>--quiet</code></p>
<p>Decrease the logging verbosity level.</p>
</li>
<li>
<p><code>--verbose</code> / <code>-v</code></p>
<p>Increase the logging verbosity level.</p>
</li>
</ul>
<p><strong>Miscellaneous global options:</strong></p>
<ul>
<li>
<p><code>--help</code></p>
<p>Show usage information.</p>
</li>
<li>
<p><code>--offline</code></p>
<p>Disable substituters and consider all previously downloaded files up-to-date.</p>
</li>
<li>
<p><code>--option</code> <em>name</em> <em>value</em></p>
<p>Set the Nix configuration setting <em>name</em> to <em>value</em> (overriding <code>nix.conf</code>).</p>
</li>
<li>
<p><code>--refresh</code></p>
<p>Consider all previously downloaded files out-of-date.</p>
</li>
<li>
<p><code>--version</code></p>
<p>Show version information.</p>
</li>
</ul>
<p><strong>Options that change the interpretation of installables:</strong></p>
<ul>
<li>
<p><code>--derivation</code></p>
<p>Operate on the <a href="command-ref/new-cli/../../glossary.html#gloss-store-derivation">store derivation</a> rather than its outputs.</p>
</li>
<li>
<p><code>--expr</code> <em>expr</em></p>
<p>Interpret installables as attribute paths relative to the Nix expression <em>expr</em>.</p>
</li>
<li>
<p><code>--file</code> / <code>-f</code> <em>file</em></p>
<p>Interpret installables as attribute paths relative to the Nix expression stored in <em>file</em>. If <em>file</em> is the character -, then a Nix expression will be read from standard input. Implies <code>--impure</code>.</p>
</li>
</ul>
<p><strong>Options to override configuration settings:</strong></p>
<ul>
<li>
<p><code>--accept-flake-config</code></p>
<p>Enable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--access-tokens</code> <em>value</em></p>
<p>Set the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--allow-dirty</code></p>
<p>Enable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--allow-import-from-derivation</code></p>
<p>Enable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--allow-new-privileges</code></p>
<p>Enable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--allow-symlinked-store</code></p>
<p>Enable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--allow-unsafe-native-code-during-evaluation</code></p>
<p>Enable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--allowed-impure-host-deps</code> <em>value</em></p>
<p>Set the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--allowed-uris</code> <em>value</em></p>
<p>Set the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--allowed-users</code> <em>value</em></p>
<p>Set the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--auto-allocate-uids</code></p>
<p>Enable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--auto-optimise-store</code></p>
<p>Enable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt</code> <em>value</em></p>
<p>Set the <code>bash-prompt</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-prefix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-prefix</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-suffix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-suffix</code> setting.</p>
</li>
<li>
<p><code>--build-hook</code> <em>value</em></p>
<p>Set the <code>build-hook</code> setting.</p>
</li>
<li>
<p><code>--build-poll-interval</code> <em>value</em></p>
<p>Set the <code>build-poll-interval</code> setting.</p>
</li>
<li>
<p><code>--build-users-group</code> <em>value</em></p>
<p>Set the <code>build-users-group</code> setting.</p>
</li>
<li>
<p><code>--builders</code> <em>value</em></p>
<p>Set the <code>builders</code> setting.</p>
</li>
<li>
<p><code>--builders-use-substitutes</code></p>
<p>Enable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--commit-lockfile-summary</code> <em>value</em></p>
<p>Set the <code>commit-lockfile-summary</code> setting.</p>
</li>
<li>
<p><code>--compress-build-log</code></p>
<p>Enable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--connect-timeout</code> <em>value</em></p>
<p>Set the <code>connect-timeout</code> setting.</p>
</li>
<li>
<p><code>--cores</code> <em>value</em></p>
<p>Set the <code>cores</code> setting.</p>
</li>
<li>
<p><code>--diff-hook</code> <em>value</em></p>
<p>Set the <code>diff-hook</code> setting.</p>
</li>
<li>
<p><code>--download-attempts</code> <em>value</em></p>
<p>Set the <code>download-attempts</code> setting.</p>
</li>
<li>
<p><code>--download-speed</code> <em>value</em></p>
<p>Set the <code>download-speed</code> setting.</p>
</li>
<li>
<p><code>--eval-cache</code></p>
<p>Enable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--experimental-features</code> <em>value</em></p>
<p>Set the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-access-tokens</code> <em>value</em></p>
<p>Append to the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-impure-host-deps</code> <em>value</em></p>
<p>Append to the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-uris</code> <em>value</em></p>
<p>Append to the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-users</code> <em>value</em></p>
<p>Append to the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--extra-experimental-features</code> <em>value</em></p>
<p>Append to the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-extra-platforms</code> <em>value</em></p>
<p>Append to the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-hashed-mirrors</code> <em>value</em></p>
<p>Append to the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--extra-ignored-acls</code> <em>value</em></p>
<p>Append to the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--extra-nix-path</code> <em>value</em></p>
<p>Append to the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--extra-platforms</code> <em>value</em></p>
<p>Set the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-plugin-files</code> <em>value</em></p>
<p>Append to the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--extra-sandbox-paths</code> <em>value</em></p>
<p>Append to the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--extra-secret-key-files</code> <em>value</em></p>
<p>Append to the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--extra-substituters</code> <em>value</em></p>
<p>Append to the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-system-features</code> <em>value</em></p>
<p>Append to the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-public-keys</code> <em>value</em></p>
<p>Append to the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-substituters</code> <em>value</em></p>
<p>Append to the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-users</code> <em>value</em></p>
<p>Append to the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--fallback</code></p>
<p>Enable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--filter-syscalls</code></p>
<p>Enable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--flake-registry</code> <em>value</em></p>
<p>Set the <code>flake-registry</code> setting.</p>
</li>
<li>
<p><code>--fsync-metadata</code></p>
<p>Enable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--gc-reserved-space</code> <em>value</em></p>
<p>Set the <code>gc-reserved-space</code> setting.</p>
</li>
<li>
<p><code>--hashed-mirrors</code> <em>value</em></p>
<p>Set the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--http-connections</code> <em>value</em></p>
<p>Set the <code>http-connections</code> setting.</p>
</li>
<li>
<p><code>--http2</code></p>
<p>Enable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--id-count</code> <em>value</em></p>
<p>Set the <code>id-count</code> setting.</p>
</li>
<li>
<p><code>--ignore-try</code></p>
<p>Enable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--ignored-acls</code> <em>value</em></p>
<p>Set the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--impersonate-linux-26</code></p>
<p>Enable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--keep-build-log</code></p>
<p>Enable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--keep-derivations</code></p>
<p>Enable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-env-derivations</code></p>
<p>Enable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-failed</code></p>
<p>Enable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--keep-going</code></p>
<p>Enable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--keep-outputs</code></p>
<p>Enable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--log-lines</code> <em>value</em></p>
<p>Set the <code>log-lines</code> setting.</p>
</li>
<li>
<p><code>--max-build-log-size</code> <em>value</em></p>
<p>Set the <code>max-build-log-size</code> setting.</p>
</li>
<li>
<p><code>--max-free</code> <em>value</em></p>
<p>Set the <code>max-free</code> setting.</p>
</li>
<li>
<p><code>--max-jobs</code> <em>value</em></p>
<p>Set the <code>max-jobs</code> setting.</p>
</li>
<li>
<p><code>--max-silent-time</code> <em>value</em></p>
<p>Set the <code>max-silent-time</code> setting.</p>
</li>
<li>
<p><code>--min-free</code> <em>value</em></p>
<p>Set the <code>min-free</code> setting.</p>
</li>
<li>
<p><code>--min-free-check-interval</code> <em>value</em></p>
<p>Set the <code>min-free-check-interval</code> setting.</p>
</li>
<li>
<p><code>--nar-buffer-size</code> <em>value</em></p>
<p>Set the <code>nar-buffer-size</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-negative-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-negative-ttl</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-positive-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-positive-ttl</code> setting.</p>
</li>
<li>
<p><code>--netrc-file</code> <em>value</em></p>
<p>Set the <code>netrc-file</code> setting.</p>
</li>
<li>
<p><code>--nix-path</code> <em>value</em></p>
<p>Set the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--no-accept-flake-config</code></p>
<p>Disable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--no-allow-dirty</code></p>
<p>Disable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--no-allow-import-from-derivation</code></p>
<p>Disable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--no-allow-new-privileges</code></p>
<p>Disable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--no-allow-symlinked-store</code></p>
<p>Disable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--no-allow-unsafe-native-code-during-evaluation</code></p>
<p>Disable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--no-auto-allocate-uids</code></p>
<p>Disable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--no-auto-optimise-store</code></p>
<p>Disable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--no-builders-use-substitutes</code></p>
<p>Disable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--no-compress-build-log</code></p>
<p>Disable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-eval-cache</code></p>
<p>Disable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--no-fallback</code></p>
<p>Disable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--no-filter-syscalls</code></p>
<p>Disable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--no-fsync-metadata</code></p>
<p>Disable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--no-http2</code></p>
<p>Disable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--no-ignore-try</code></p>
<p>Disable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--no-impersonate-linux-26</code></p>
<p>Disable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--no-keep-build-log</code></p>
<p>Disable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-keep-derivations</code></p>
<p>Disable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-env-derivations</code></p>
<p>Disable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-failed</code></p>
<p>Disable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--no-keep-going</code></p>
<p>Disable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--no-keep-outputs</code></p>
<p>Disable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--no-preallocate-contents</code></p>
<p>Disable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--no-print-missing</code></p>
<p>Disable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--no-pure-eval</code></p>
<p>Disable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--no-require-sigs</code></p>
<p>Disable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--no-restrict-eval</code></p>
<p>Disable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--no-run-diff-hook</code></p>
<p>Disable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--no-sandbox</code></p>
<p>Disable sandboxing.</p>
</li>
<li>
<p><code>--no-sandbox-fallback</code></p>
<p>Disable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--no-show-trace</code></p>
<p>Disable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--no-substitute</code></p>
<p>Disable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--no-sync-before-registering</code></p>
<p>Disable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--no-trace-function-calls</code></p>
<p>Disable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--no-trace-verbose</code></p>
<p>Disable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--no-use-case-hack</code></p>
<p>Disable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--no-use-cgroups</code></p>
<p>Disable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--no-use-registries</code></p>
<p>Disable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--no-use-sqlite-wal</code></p>
<p>Disable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--no-warn-dirty</code></p>
<p>Disable the <code>warn-dirty</code> setting.</p>
</li>
<li>
<p><code>--plugin-files</code> <em>value</em></p>
<p>Set the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--post-build-hook</code> <em>value</em></p>
<p>Set the <code>post-build-hook</code> setting.</p>
</li>
<li>
<p><code>--pre-build-hook</code> <em>value</em></p>
<p>Set the <code>pre-build-hook</code> setting.</p>
</li>
<li>
<p><code>--preallocate-contents</code></p>
<p>Enable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--print-missing</code></p>
<p>Enable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--pure-eval</code></p>
<p>Enable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--relaxed-sandbox</code></p>
<p>Enable sandboxing, but allow builds to disable it.</p>
</li>
<li>
<p><code>--require-sigs</code></p>
<p>Enable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--restrict-eval</code></p>
<p>Enable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--run-diff-hook</code></p>
<p>Enable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--sandbox</code></p>
<p>Enable sandboxing.</p>
</li>
<li>
<p><code>--sandbox-build-dir</code> <em>value</em></p>
<p>Set the <code>sandbox-build-dir</code> setting.</p>
</li>
<li>
<p><code>--sandbox-dev-shm-size</code> <em>value</em></p>
<p>Set the <code>sandbox-dev-shm-size</code> setting.</p>
</li>
<li>
<p><code>--sandbox-fallback</code></p>
<p>Enable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--sandbox-paths</code> <em>value</em></p>
<p>Set the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--secret-key-files</code> <em>value</em></p>
<p>Set the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--show-trace</code></p>
<p>Enable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--stalled-download-timeout</code> <em>value</em></p>
<p>Set the <code>stalled-download-timeout</code> setting.</p>
</li>
<li>
<p><code>--start-id</code> <em>value</em></p>
<p>Set the <code>start-id</code> setting.</p>
</li>
<li>
<p><code>--store</code> <em>value</em></p>
<p>Set the <code>store</code> setting.</p>
</li>
<li>
<p><code>--substitute</code></p>
<p>Enable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--substituters</code> <em>value</em></p>
<p>Set the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--sync-before-registering</code></p>
<p>Enable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--system</code> <em>value</em></p>
<p>Set the <code>system</code> setting.</p>
</li>
<li>
<p><code>--system-features</code> <em>value</em></p>
<p>Set the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--tarball-ttl</code> <em>value</em></p>
<p>Set the <code>tarball-ttl</code> setting.</p>
</li>
<li>
<p><code>--timeout</code> <em>value</em></p>
<p>Set the <code>timeout</code> setting.</p>
</li>
<li>
<p><code>--trace-function-calls</code></p>
<p>Enable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--trace-verbose</code></p>
<p>Enable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--trusted-public-keys</code> <em>value</em></p>
<p>Set the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--trusted-substituters</code> <em>value</em></p>
<p>Set the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--trusted-users</code> <em>value</em></p>
<p>Set the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--use-case-hack</code></p>
<p>Enable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--use-cgroups</code></p>
<p>Enable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--use-registries</code></p>
<p>Enable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--use-sqlite-wal</code></p>
<p>Enable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--user-agent-suffix</code> <em>value</em></p>
<p>Set the <code>user-agent-suffix</code> setting.</p>
</li>
<li>
<p><code>--warn-dirty</code></p>
<p>Enable the <code>warn-dirty</code> setting.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p><strong>Warning</strong> <br />
This program is <strong>experimental</strong> and its interface is subject to change.</p>
</blockquote>
<h1 id="name-14"><a class="header" href="#name-14">Name</a></h1>
<p><code>nix copy</code> - copy paths between Nix stores</p>
<h1 id="synopsis-45"><a class="header" href="#synopsis-45">Synopsis</a></h1>
<p><code>nix copy</code> [<em>option</em>...] <em>installables</em>...</p>
<h1 id="examples-27"><a class="header" href="#examples-27">Examples</a></h1>
<ul>
<li>
<p>Copy Firefox from the local store to a binary cache in <code>/tmp/cache</code>:</p>
<pre><code class="language-console"># nix copy --to file:///tmp/cache $(type -p firefox)
</code></pre>
<p>Note the <code>file://</code> - without this, the destination is a chroot
store, not a binary cache.</p>
</li>
<li>
<p>Copy the entire current NixOS system closure to another machine via
SSH:</p>
<pre><code class="language-console"># nix copy -s --to ssh://server /run/current-system
</code></pre>
<p>The <code>-s</code> flag causes the remote machine to try to substitute missing
store paths, which may be faster if the link between the local and
remote machines is slower than the link between the remote machine
and its substituters (e.g. <code>https://cache.nixos.org</code>).</p>
</li>
<li>
<p>Copy a closure from another machine via SSH:</p>
<pre><code class="language-console"># nix copy --from ssh://server /nix/store/a6cnl93nk1wxnq84brbbwr6hxw9gp2w9-blender-2.79-rc2
</code></pre>
</li>
<li>
<p>Copy Hello to a binary cache in an Amazon S3 bucket:</p>
<pre><code class="language-console"># nix copy --to s3://my-bucket?region=eu-west-1 nixpkgs#hello
</code></pre>
<p>or to an S3-compatible storage system:</p>
<pre><code class="language-console"># nix copy --to s3://my-bucket?region=eu-west-1&amp;endpoint=example.com nixpkgs#hello
</code></pre>
<p>Note that this only works if Nix is built with AWS support.</p>
</li>
<li>
<p>Copy a closure from <code>/nix/store</code> to the chroot store <code>/tmp/nix/nix/store</code>:</p>
<pre><code class="language-console"># nix copy --to /tmp/nix nixpkgs#hello --no-check-sigs
</code></pre>
</li>
</ul>
<h1 id="description-45"><a class="header" href="#description-45">Description</a></h1>
<p><code>nix copy</code> copies store path closures between two Nix stores. The
source store is specified using <code>--from</code> and the destination using
<code>--to</code>. If one of these is omitted, it defaults to the local store.</p>
<h1 id="options-9"><a class="header" href="#options-9">Options</a></h1>
<ul>
<li>
<p><code>--from</code> <em>store-uri</em></p>
<p>URL of the source Nix store.</p>
</li>
<li>
<p><code>--no-check-sigs</code></p>
<p>Do not require that paths are signed by trusted keys.</p>
</li>
<li>
<p><code>--substitute-on-destination</code> / <code>-s</code></p>
<p>Whether to try substitutes on the destination store (only supported by SSH stores).</p>
</li>
<li>
<p><code>--to</code> <em>store-uri</em></p>
<p>URL of the destination Nix store.</p>
</li>
</ul>
<p><strong>Common evaluation options:</strong></p>
<ul>
<li>
<p><code>--arg</code> <em>name</em> <em>expr</em></p>
<p>Pass the value <em>expr</em> as the argument <em>name</em> to Nix functions.</p>
</li>
<li>
<p><code>--argstr</code> <em>name</em> <em>string</em></p>
<p>Pass the string <em>string</em> as the argument <em>name</em> to Nix functions.</p>
</li>
<li>
<p><code>--debugger</code></p>
<p>Start an interactive environment if evaluation fails.</p>
</li>
<li>
<p><code>--eval-store</code> <em>store-url</em></p>
<p>The Nix store to use for evaluations.</p>
</li>
<li>
<p><code>--impure</code></p>
<p>Allow access to mutable paths and repositories.</p>
</li>
<li>
<p><code>--include</code> / <code>-I</code> <em>path</em></p>
<p>Add <em>path</em> to the Nix search path. The Nix search path is
initialized from the colon-separated <a href="command-ref/new-cli/../../command-ref/env-common.html#env-NIX_PATH"><code>NIX_PATH</code></a> environment
variable, and is used to look up the location of Nix expressions using <a href="command-ref/new-cli/../../language/values.html#type-path">paths</a> enclosed in angle
brackets (i.e., <code>&lt;nixpkgs&gt;</code>).</p>
<p>For instance, passing</p>
<pre><code>-I /home/eelco/Dev
-I /etc/nixos
</code></pre>
<p>will cause Nix to look for paths relative to <code>/home/eelco/Dev</code> and
<code>/etc/nixos</code>, in that order. This is equivalent to setting the
<code>NIX_PATH</code> environment variable to</p>
<pre><code>/home/eelco/Dev:/etc/nixos
</code></pre>
<p>It is also possible to match paths against a prefix. For example,
passing</p>
<pre><code>-I nixpkgs=/home/eelco/Dev/nixpkgs-branch
-I /etc/nixos
</code></pre>
<p>will cause Nix to search for <code>&lt;nixpkgs/path&gt;</code> in
<code>/home/eelco/Dev/nixpkgs-branch/path</code> and <code>/etc/nixos/nixpkgs/path</code>.</p>
<p>If a path in the Nix search path starts with <code>http://</code> or <code>https://</code>,
it is interpreted as the URL of a tarball that will be downloaded and
unpacked to a temporary location. The tarball must consist of a single
top-level directory. For example, passing</p>
<pre><code>-I nixpkgs=https://github.com/NixOS/nixpkgs/archive/master.tar.gz
</code></pre>
<p>tells Nix to download and use the current contents of the <code>master</code>
branch in the <code>nixpkgs</code> repository.</p>
<p>The URLs of the tarballs from the official <code>nixos.org</code> channels
(see <a href="command-ref/new-cli/../nix-channel.html">the manual page for <code>nix-channel</code></a>) can be
abbreviated as <code>channel:&lt;channel-name&gt;</code>. For instance, the
following two flags are equivalent:</p>
<pre><code>-I nixpkgs=channel:nixos-21.05
-I nixpkgs=https://nixos.org/channels/nixos-21.05/nixexprs.tar.xz
</code></pre>
<p>You can also fetch source trees using <a href="command-ref/new-cli/./nix3-flake.html#url-like-syntax">flake URLs</a> and add them to the
search path. For instance,</p>
<pre><code>-I nixpkgs=flake:nixpkgs
</code></pre>
<p>specifies that the prefix <code>nixpkgs</code> shall refer to the source tree
downloaded from the <code>nixpkgs</code> entry in the flake registry. Similarly,</p>
<pre><code>-I nixpkgs=flake:github:NixOS/nixpkgs/nixos-22.05
</code></pre>
<p>makes <code>&lt;nixpkgs&gt;</code> refer to a particular branch of the
<code>NixOS/nixpkgs</code> repository on GitHub.</p>
</li>
<li>
<p><code>--override-flake</code> <em>original-ref</em> <em>resolved-ref</em></p>
<p>Override the flake registries, redirecting <em>original-ref</em> to <em>resolved-ref</em>.</p>
</li>
</ul>
<p><strong>Common flake-related options:</strong></p>
<ul>
<li>
<p><code>--commit-lock-file</code></p>
<p>Commit changes to the flake's lock file.</p>
</li>
<li>
<p><code>--inputs-from</code> <em>flake-url</em></p>
<p>Use the inputs of the specified flake as registry entries.</p>
</li>
<li>
<p><code>--no-registries</code></p>
<p>Don't allow lookups in the flake registries. This option is deprecated; use <code>--no-use-registries</code>.</p>
</li>
<li>
<p><code>--no-update-lock-file</code></p>
<p>Do not allow any updates to the flake's lock file.</p>
</li>
<li>
<p><code>--no-write-lock-file</code></p>
<p>Do not write the flake's newly generated lock file.</p>
</li>
<li>
<p><code>--override-input</code> <em>input-path</em> <em>flake-url</em></p>
<p>Override a specific flake input (e.g. <code>dwarffs/nixpkgs</code>). This implies <code>--no-write-lock-file</code>.</p>
</li>
<li>
<p><code>--recreate-lock-file</code></p>
<p>Recreate the flake's lock file from scratch.</p>
</li>
<li>
<p><code>--update-input</code> <em>input-path</em></p>
<p>Update a specific flake input (ignoring its previous entry in the lock file).</p>
</li>
</ul>
<p><strong>Logging-related options:</strong></p>
<ul>
<li>
<p><code>--debug</code></p>
<p>Set the logging verbosity level to 'debug'.</p>
</li>
<li>
<p><code>--log-format</code> <em>format</em></p>
<p>Set the format of log output; one of <code>raw</code>, <code>internal-json</code>, <code>bar</code> or <code>bar-with-logs</code>.</p>
</li>
<li>
<p><code>--print-build-logs</code> / <code>-L</code></p>
<p>Print full build logs on standard error.</p>
</li>
<li>
<p><code>--quiet</code></p>
<p>Decrease the logging verbosity level.</p>
</li>
<li>
<p><code>--verbose</code> / <code>-v</code></p>
<p>Increase the logging verbosity level.</p>
</li>
</ul>
<p><strong>Miscellaneous global options:</strong></p>
<ul>
<li>
<p><code>--help</code></p>
<p>Show usage information.</p>
</li>
<li>
<p><code>--offline</code></p>
<p>Disable substituters and consider all previously downloaded files up-to-date.</p>
</li>
<li>
<p><code>--option</code> <em>name</em> <em>value</em></p>
<p>Set the Nix configuration setting <em>name</em> to <em>value</em> (overriding <code>nix.conf</code>).</p>
</li>
<li>
<p><code>--refresh</code></p>
<p>Consider all previously downloaded files out-of-date.</p>
</li>
<li>
<p><code>--version</code></p>
<p>Show version information.</p>
</li>
</ul>
<p><strong>Options that change the interpretation of installables:</strong></p>
<ul>
<li>
<p><code>--all</code></p>
<p>Apply the operation to every store path.</p>
</li>
<li>
<p><code>--derivation</code></p>
<p>Operate on the <a href="command-ref/new-cli/../../glossary.html#gloss-store-derivation">store derivation</a> rather than its outputs.</p>
</li>
<li>
<p><code>--expr</code> <em>expr</em></p>
<p>Interpret installables as attribute paths relative to the Nix expression <em>expr</em>.</p>
</li>
<li>
<p><code>--file</code> / <code>-f</code> <em>file</em></p>
<p>Interpret installables as attribute paths relative to the Nix expression stored in <em>file</em>. If <em>file</em> is the character -, then a Nix expression will be read from standard input. Implies <code>--impure</code>.</p>
</li>
<li>
<p><code>--no-recursive</code></p>
<p>Apply operation to specified paths only.</p>
</li>
</ul>
<p><strong>Options to override configuration settings:</strong></p>
<ul>
<li>
<p><code>--accept-flake-config</code></p>
<p>Enable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--access-tokens</code> <em>value</em></p>
<p>Set the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--allow-dirty</code></p>
<p>Enable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--allow-import-from-derivation</code></p>
<p>Enable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--allow-new-privileges</code></p>
<p>Enable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--allow-symlinked-store</code></p>
<p>Enable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--allow-unsafe-native-code-during-evaluation</code></p>
<p>Enable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--allowed-impure-host-deps</code> <em>value</em></p>
<p>Set the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--allowed-uris</code> <em>value</em></p>
<p>Set the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--allowed-users</code> <em>value</em></p>
<p>Set the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--auto-allocate-uids</code></p>
<p>Enable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--auto-optimise-store</code></p>
<p>Enable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt</code> <em>value</em></p>
<p>Set the <code>bash-prompt</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-prefix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-prefix</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-suffix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-suffix</code> setting.</p>
</li>
<li>
<p><code>--build-hook</code> <em>value</em></p>
<p>Set the <code>build-hook</code> setting.</p>
</li>
<li>
<p><code>--build-poll-interval</code> <em>value</em></p>
<p>Set the <code>build-poll-interval</code> setting.</p>
</li>
<li>
<p><code>--build-users-group</code> <em>value</em></p>
<p>Set the <code>build-users-group</code> setting.</p>
</li>
<li>
<p><code>--builders</code> <em>value</em></p>
<p>Set the <code>builders</code> setting.</p>
</li>
<li>
<p><code>--builders-use-substitutes</code></p>
<p>Enable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--commit-lockfile-summary</code> <em>value</em></p>
<p>Set the <code>commit-lockfile-summary</code> setting.</p>
</li>
<li>
<p><code>--compress-build-log</code></p>
<p>Enable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--connect-timeout</code> <em>value</em></p>
<p>Set the <code>connect-timeout</code> setting.</p>
</li>
<li>
<p><code>--cores</code> <em>value</em></p>
<p>Set the <code>cores</code> setting.</p>
</li>
<li>
<p><code>--diff-hook</code> <em>value</em></p>
<p>Set the <code>diff-hook</code> setting.</p>
</li>
<li>
<p><code>--download-attempts</code> <em>value</em></p>
<p>Set the <code>download-attempts</code> setting.</p>
</li>
<li>
<p><code>--download-speed</code> <em>value</em></p>
<p>Set the <code>download-speed</code> setting.</p>
</li>
<li>
<p><code>--eval-cache</code></p>
<p>Enable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--experimental-features</code> <em>value</em></p>
<p>Set the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-access-tokens</code> <em>value</em></p>
<p>Append to the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-impure-host-deps</code> <em>value</em></p>
<p>Append to the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-uris</code> <em>value</em></p>
<p>Append to the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-users</code> <em>value</em></p>
<p>Append to the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--extra-experimental-features</code> <em>value</em></p>
<p>Append to the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-extra-platforms</code> <em>value</em></p>
<p>Append to the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-hashed-mirrors</code> <em>value</em></p>
<p>Append to the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--extra-ignored-acls</code> <em>value</em></p>
<p>Append to the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--extra-nix-path</code> <em>value</em></p>
<p>Append to the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--extra-platforms</code> <em>value</em></p>
<p>Set the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-plugin-files</code> <em>value</em></p>
<p>Append to the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--extra-sandbox-paths</code> <em>value</em></p>
<p>Append to the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--extra-secret-key-files</code> <em>value</em></p>
<p>Append to the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--extra-substituters</code> <em>value</em></p>
<p>Append to the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-system-features</code> <em>value</em></p>
<p>Append to the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-public-keys</code> <em>value</em></p>
<p>Append to the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-substituters</code> <em>value</em></p>
<p>Append to the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-users</code> <em>value</em></p>
<p>Append to the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--fallback</code></p>
<p>Enable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--filter-syscalls</code></p>
<p>Enable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--flake-registry</code> <em>value</em></p>
<p>Set the <code>flake-registry</code> setting.</p>
</li>
<li>
<p><code>--fsync-metadata</code></p>
<p>Enable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--gc-reserved-space</code> <em>value</em></p>
<p>Set the <code>gc-reserved-space</code> setting.</p>
</li>
<li>
<p><code>--hashed-mirrors</code> <em>value</em></p>
<p>Set the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--http-connections</code> <em>value</em></p>
<p>Set the <code>http-connections</code> setting.</p>
</li>
<li>
<p><code>--http2</code></p>
<p>Enable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--id-count</code> <em>value</em></p>
<p>Set the <code>id-count</code> setting.</p>
</li>
<li>
<p><code>--ignore-try</code></p>
<p>Enable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--ignored-acls</code> <em>value</em></p>
<p>Set the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--impersonate-linux-26</code></p>
<p>Enable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--keep-build-log</code></p>
<p>Enable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--keep-derivations</code></p>
<p>Enable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-env-derivations</code></p>
<p>Enable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-failed</code></p>
<p>Enable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--keep-going</code></p>
<p>Enable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--keep-outputs</code></p>
<p>Enable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--log-lines</code> <em>value</em></p>
<p>Set the <code>log-lines</code> setting.</p>
</li>
<li>
<p><code>--max-build-log-size</code> <em>value</em></p>
<p>Set the <code>max-build-log-size</code> setting.</p>
</li>
<li>
<p><code>--max-free</code> <em>value</em></p>
<p>Set the <code>max-free</code> setting.</p>
</li>
<li>
<p><code>--max-jobs</code> <em>value</em></p>
<p>Set the <code>max-jobs</code> setting.</p>
</li>
<li>
<p><code>--max-silent-time</code> <em>value</em></p>
<p>Set the <code>max-silent-time</code> setting.</p>
</li>
<li>
<p><code>--min-free</code> <em>value</em></p>
<p>Set the <code>min-free</code> setting.</p>
</li>
<li>
<p><code>--min-free-check-interval</code> <em>value</em></p>
<p>Set the <code>min-free-check-interval</code> setting.</p>
</li>
<li>
<p><code>--nar-buffer-size</code> <em>value</em></p>
<p>Set the <code>nar-buffer-size</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-negative-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-negative-ttl</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-positive-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-positive-ttl</code> setting.</p>
</li>
<li>
<p><code>--netrc-file</code> <em>value</em></p>
<p>Set the <code>netrc-file</code> setting.</p>
</li>
<li>
<p><code>--nix-path</code> <em>value</em></p>
<p>Set the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--no-accept-flake-config</code></p>
<p>Disable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--no-allow-dirty</code></p>
<p>Disable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--no-allow-import-from-derivation</code></p>
<p>Disable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--no-allow-new-privileges</code></p>
<p>Disable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--no-allow-symlinked-store</code></p>
<p>Disable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--no-allow-unsafe-native-code-during-evaluation</code></p>
<p>Disable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--no-auto-allocate-uids</code></p>
<p>Disable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--no-auto-optimise-store</code></p>
<p>Disable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--no-builders-use-substitutes</code></p>
<p>Disable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--no-compress-build-log</code></p>
<p>Disable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-eval-cache</code></p>
<p>Disable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--no-fallback</code></p>
<p>Disable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--no-filter-syscalls</code></p>
<p>Disable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--no-fsync-metadata</code></p>
<p>Disable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--no-http2</code></p>
<p>Disable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--no-ignore-try</code></p>
<p>Disable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--no-impersonate-linux-26</code></p>
<p>Disable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--no-keep-build-log</code></p>
<p>Disable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-keep-derivations</code></p>
<p>Disable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-env-derivations</code></p>
<p>Disable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-failed</code></p>
<p>Disable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--no-keep-going</code></p>
<p>Disable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--no-keep-outputs</code></p>
<p>Disable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--no-preallocate-contents</code></p>
<p>Disable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--no-print-missing</code></p>
<p>Disable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--no-pure-eval</code></p>
<p>Disable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--no-require-sigs</code></p>
<p>Disable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--no-restrict-eval</code></p>
<p>Disable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--no-run-diff-hook</code></p>
<p>Disable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--no-sandbox</code></p>
<p>Disable sandboxing.</p>
</li>
<li>
<p><code>--no-sandbox-fallback</code></p>
<p>Disable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--no-show-trace</code></p>
<p>Disable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--no-substitute</code></p>
<p>Disable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--no-sync-before-registering</code></p>
<p>Disable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--no-trace-function-calls</code></p>
<p>Disable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--no-trace-verbose</code></p>
<p>Disable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--no-use-case-hack</code></p>
<p>Disable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--no-use-cgroups</code></p>
<p>Disable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--no-use-registries</code></p>
<p>Disable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--no-use-sqlite-wal</code></p>
<p>Disable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--no-warn-dirty</code></p>
<p>Disable the <code>warn-dirty</code> setting.</p>
</li>
<li>
<p><code>--plugin-files</code> <em>value</em></p>
<p>Set the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--post-build-hook</code> <em>value</em></p>
<p>Set the <code>post-build-hook</code> setting.</p>
</li>
<li>
<p><code>--pre-build-hook</code> <em>value</em></p>
<p>Set the <code>pre-build-hook</code> setting.</p>
</li>
<li>
<p><code>--preallocate-contents</code></p>
<p>Enable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--print-missing</code></p>
<p>Enable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--pure-eval</code></p>
<p>Enable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--relaxed-sandbox</code></p>
<p>Enable sandboxing, but allow builds to disable it.</p>
</li>
<li>
<p><code>--require-sigs</code></p>
<p>Enable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--restrict-eval</code></p>
<p>Enable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--run-diff-hook</code></p>
<p>Enable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--sandbox</code></p>
<p>Enable sandboxing.</p>
</li>
<li>
<p><code>--sandbox-build-dir</code> <em>value</em></p>
<p>Set the <code>sandbox-build-dir</code> setting.</p>
</li>
<li>
<p><code>--sandbox-dev-shm-size</code> <em>value</em></p>
<p>Set the <code>sandbox-dev-shm-size</code> setting.</p>
</li>
<li>
<p><code>--sandbox-fallback</code></p>
<p>Enable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--sandbox-paths</code> <em>value</em></p>
<p>Set the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--secret-key-files</code> <em>value</em></p>
<p>Set the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--show-trace</code></p>
<p>Enable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--stalled-download-timeout</code> <em>value</em></p>
<p>Set the <code>stalled-download-timeout</code> setting.</p>
</li>
<li>
<p><code>--start-id</code> <em>value</em></p>
<p>Set the <code>start-id</code> setting.</p>
</li>
<li>
<p><code>--store</code> <em>value</em></p>
<p>Set the <code>store</code> setting.</p>
</li>
<li>
<p><code>--substitute</code></p>
<p>Enable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--substituters</code> <em>value</em></p>
<p>Set the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--sync-before-registering</code></p>
<p>Enable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--system</code> <em>value</em></p>
<p>Set the <code>system</code> setting.</p>
</li>
<li>
<p><code>--system-features</code> <em>value</em></p>
<p>Set the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--tarball-ttl</code> <em>value</em></p>
<p>Set the <code>tarball-ttl</code> setting.</p>
</li>
<li>
<p><code>--timeout</code> <em>value</em></p>
<p>Set the <code>timeout</code> setting.</p>
</li>
<li>
<p><code>--trace-function-calls</code></p>
<p>Enable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--trace-verbose</code></p>
<p>Enable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--trusted-public-keys</code> <em>value</em></p>
<p>Set the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--trusted-substituters</code> <em>value</em></p>
<p>Set the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--trusted-users</code> <em>value</em></p>
<p>Set the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--use-case-hack</code></p>
<p>Enable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--use-cgroups</code></p>
<p>Enable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--use-registries</code></p>
<p>Enable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--use-sqlite-wal</code></p>
<p>Enable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--user-agent-suffix</code> <em>value</em></p>
<p>Set the <code>user-agent-suffix</code> setting.</p>
</li>
<li>
<p><code>--warn-dirty</code></p>
<p>Enable the <code>warn-dirty</code> setting.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p><strong>Warning</strong> <br />
This program is <strong>experimental</strong> and its interface is subject to change.</p>
</blockquote>
<h1 id="name-15"><a class="header" href="#name-15">Name</a></h1>
<p><code>nix daemon</code> - daemon to perform store operations on behalf of non-root clients</p>
<h1 id="synopsis-46"><a class="header" href="#synopsis-46">Synopsis</a></h1>
<p><code>nix daemon</code> [<em>option</em>...] </p>
<h1 id="example-9"><a class="header" href="#example-9">Example</a></h1>
<ul>
<li>
<p>Run the daemon in the foreground:</p>
<pre><code class="language-console"># nix daemon
</code></pre>
</li>
</ul>
<h1 id="description-46"><a class="header" href="#description-46">Description</a></h1>
<p>This command runs the Nix daemon, which is a required component in
multi-user Nix installations. It runs build tasks and other
operations on the Nix store on behalf of non-root users. Usually you
don't run the daemon directly; instead it's managed by a service
management framework such as <code>systemd</code>.</p>
<p>Note that this daemon does not fork into the background.</p>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p><strong>Warning</strong> <br />
This program is <strong>experimental</strong> and its interface is subject to change.</p>
</blockquote>
<h1 id="name-16"><a class="header" href="#name-16">Name</a></h1>
<p><code>nix describe-stores</code> - show registered store types and their available options</p>
<h1 id="synopsis-47"><a class="header" href="#synopsis-47">Synopsis</a></h1>
<p><code>nix describe-stores</code> [<em>option</em>...] </p>
<h1 id="options-10"><a class="header" href="#options-10">Options</a></h1>
<ul>
<li>
<p><code>--json</code></p>
<p>Produce output in JSON format, suitable for consumption by another program.</p>
</li>
</ul>
<p><strong>Logging-related options:</strong></p>
<ul>
<li>
<p><code>--debug</code></p>
<p>Set the logging verbosity level to 'debug'.</p>
</li>
<li>
<p><code>--log-format</code> <em>format</em></p>
<p>Set the format of log output; one of <code>raw</code>, <code>internal-json</code>, <code>bar</code> or <code>bar-with-logs</code>.</p>
</li>
<li>
<p><code>--print-build-logs</code> / <code>-L</code></p>
<p>Print full build logs on standard error.</p>
</li>
<li>
<p><code>--quiet</code></p>
<p>Decrease the logging verbosity level.</p>
</li>
<li>
<p><code>--verbose</code> / <code>-v</code></p>
<p>Increase the logging verbosity level.</p>
</li>
</ul>
<p><strong>Miscellaneous global options:</strong></p>
<ul>
<li>
<p><code>--help</code></p>
<p>Show usage information.</p>
</li>
<li>
<p><code>--offline</code></p>
<p>Disable substituters and consider all previously downloaded files up-to-date.</p>
</li>
<li>
<p><code>--option</code> <em>name</em> <em>value</em></p>
<p>Set the Nix configuration setting <em>name</em> to <em>value</em> (overriding <code>nix.conf</code>).</p>
</li>
<li>
<p><code>--refresh</code></p>
<p>Consider all previously downloaded files out-of-date.</p>
</li>
<li>
<p><code>--version</code></p>
<p>Show version information.</p>
</li>
</ul>
<p><strong>Options to override configuration settings:</strong></p>
<ul>
<li>
<p><code>--accept-flake-config</code></p>
<p>Enable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--access-tokens</code> <em>value</em></p>
<p>Set the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--allow-dirty</code></p>
<p>Enable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--allow-import-from-derivation</code></p>
<p>Enable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--allow-new-privileges</code></p>
<p>Enable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--allow-symlinked-store</code></p>
<p>Enable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--allow-unsafe-native-code-during-evaluation</code></p>
<p>Enable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--allowed-impure-host-deps</code> <em>value</em></p>
<p>Set the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--allowed-uris</code> <em>value</em></p>
<p>Set the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--allowed-users</code> <em>value</em></p>
<p>Set the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--auto-allocate-uids</code></p>
<p>Enable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--auto-optimise-store</code></p>
<p>Enable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt</code> <em>value</em></p>
<p>Set the <code>bash-prompt</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-prefix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-prefix</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-suffix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-suffix</code> setting.</p>
</li>
<li>
<p><code>--build-hook</code> <em>value</em></p>
<p>Set the <code>build-hook</code> setting.</p>
</li>
<li>
<p><code>--build-poll-interval</code> <em>value</em></p>
<p>Set the <code>build-poll-interval</code> setting.</p>
</li>
<li>
<p><code>--build-users-group</code> <em>value</em></p>
<p>Set the <code>build-users-group</code> setting.</p>
</li>
<li>
<p><code>--builders</code> <em>value</em></p>
<p>Set the <code>builders</code> setting.</p>
</li>
<li>
<p><code>--builders-use-substitutes</code></p>
<p>Enable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--commit-lockfile-summary</code> <em>value</em></p>
<p>Set the <code>commit-lockfile-summary</code> setting.</p>
</li>
<li>
<p><code>--compress-build-log</code></p>
<p>Enable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--connect-timeout</code> <em>value</em></p>
<p>Set the <code>connect-timeout</code> setting.</p>
</li>
<li>
<p><code>--cores</code> <em>value</em></p>
<p>Set the <code>cores</code> setting.</p>
</li>
<li>
<p><code>--diff-hook</code> <em>value</em></p>
<p>Set the <code>diff-hook</code> setting.</p>
</li>
<li>
<p><code>--download-attempts</code> <em>value</em></p>
<p>Set the <code>download-attempts</code> setting.</p>
</li>
<li>
<p><code>--download-speed</code> <em>value</em></p>
<p>Set the <code>download-speed</code> setting.</p>
</li>
<li>
<p><code>--eval-cache</code></p>
<p>Enable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--experimental-features</code> <em>value</em></p>
<p>Set the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-access-tokens</code> <em>value</em></p>
<p>Append to the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-impure-host-deps</code> <em>value</em></p>
<p>Append to the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-uris</code> <em>value</em></p>
<p>Append to the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-users</code> <em>value</em></p>
<p>Append to the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--extra-experimental-features</code> <em>value</em></p>
<p>Append to the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-extra-platforms</code> <em>value</em></p>
<p>Append to the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-hashed-mirrors</code> <em>value</em></p>
<p>Append to the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--extra-ignored-acls</code> <em>value</em></p>
<p>Append to the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--extra-nix-path</code> <em>value</em></p>
<p>Append to the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--extra-platforms</code> <em>value</em></p>
<p>Set the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-plugin-files</code> <em>value</em></p>
<p>Append to the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--extra-sandbox-paths</code> <em>value</em></p>
<p>Append to the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--extra-secret-key-files</code> <em>value</em></p>
<p>Append to the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--extra-substituters</code> <em>value</em></p>
<p>Append to the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-system-features</code> <em>value</em></p>
<p>Append to the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-public-keys</code> <em>value</em></p>
<p>Append to the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-substituters</code> <em>value</em></p>
<p>Append to the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-users</code> <em>value</em></p>
<p>Append to the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--fallback</code></p>
<p>Enable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--filter-syscalls</code></p>
<p>Enable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--flake-registry</code> <em>value</em></p>
<p>Set the <code>flake-registry</code> setting.</p>
</li>
<li>
<p><code>--fsync-metadata</code></p>
<p>Enable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--gc-reserved-space</code> <em>value</em></p>
<p>Set the <code>gc-reserved-space</code> setting.</p>
</li>
<li>
<p><code>--hashed-mirrors</code> <em>value</em></p>
<p>Set the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--http-connections</code> <em>value</em></p>
<p>Set the <code>http-connections</code> setting.</p>
</li>
<li>
<p><code>--http2</code></p>
<p>Enable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--id-count</code> <em>value</em></p>
<p>Set the <code>id-count</code> setting.</p>
</li>
<li>
<p><code>--ignore-try</code></p>
<p>Enable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--ignored-acls</code> <em>value</em></p>
<p>Set the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--impersonate-linux-26</code></p>
<p>Enable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--keep-build-log</code></p>
<p>Enable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--keep-derivations</code></p>
<p>Enable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-env-derivations</code></p>
<p>Enable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-failed</code></p>
<p>Enable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--keep-going</code></p>
<p>Enable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--keep-outputs</code></p>
<p>Enable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--log-lines</code> <em>value</em></p>
<p>Set the <code>log-lines</code> setting.</p>
</li>
<li>
<p><code>--max-build-log-size</code> <em>value</em></p>
<p>Set the <code>max-build-log-size</code> setting.</p>
</li>
<li>
<p><code>--max-free</code> <em>value</em></p>
<p>Set the <code>max-free</code> setting.</p>
</li>
<li>
<p><code>--max-jobs</code> <em>value</em></p>
<p>Set the <code>max-jobs</code> setting.</p>
</li>
<li>
<p><code>--max-silent-time</code> <em>value</em></p>
<p>Set the <code>max-silent-time</code> setting.</p>
</li>
<li>
<p><code>--min-free</code> <em>value</em></p>
<p>Set the <code>min-free</code> setting.</p>
</li>
<li>
<p><code>--min-free-check-interval</code> <em>value</em></p>
<p>Set the <code>min-free-check-interval</code> setting.</p>
</li>
<li>
<p><code>--nar-buffer-size</code> <em>value</em></p>
<p>Set the <code>nar-buffer-size</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-negative-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-negative-ttl</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-positive-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-positive-ttl</code> setting.</p>
</li>
<li>
<p><code>--netrc-file</code> <em>value</em></p>
<p>Set the <code>netrc-file</code> setting.</p>
</li>
<li>
<p><code>--nix-path</code> <em>value</em></p>
<p>Set the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--no-accept-flake-config</code></p>
<p>Disable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--no-allow-dirty</code></p>
<p>Disable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--no-allow-import-from-derivation</code></p>
<p>Disable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--no-allow-new-privileges</code></p>
<p>Disable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--no-allow-symlinked-store</code></p>
<p>Disable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--no-allow-unsafe-native-code-during-evaluation</code></p>
<p>Disable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--no-auto-allocate-uids</code></p>
<p>Disable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--no-auto-optimise-store</code></p>
<p>Disable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--no-builders-use-substitutes</code></p>
<p>Disable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--no-compress-build-log</code></p>
<p>Disable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-eval-cache</code></p>
<p>Disable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--no-fallback</code></p>
<p>Disable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--no-filter-syscalls</code></p>
<p>Disable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--no-fsync-metadata</code></p>
<p>Disable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--no-http2</code></p>
<p>Disable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--no-ignore-try</code></p>
<p>Disable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--no-impersonate-linux-26</code></p>
<p>Disable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--no-keep-build-log</code></p>
<p>Disable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-keep-derivations</code></p>
<p>Disable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-env-derivations</code></p>
<p>Disable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-failed</code></p>
<p>Disable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--no-keep-going</code></p>
<p>Disable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--no-keep-outputs</code></p>
<p>Disable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--no-preallocate-contents</code></p>
<p>Disable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--no-print-missing</code></p>
<p>Disable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--no-pure-eval</code></p>
<p>Disable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--no-require-sigs</code></p>
<p>Disable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--no-restrict-eval</code></p>
<p>Disable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--no-run-diff-hook</code></p>
<p>Disable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--no-sandbox</code></p>
<p>Disable sandboxing.</p>
</li>
<li>
<p><code>--no-sandbox-fallback</code></p>
<p>Disable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--no-show-trace</code></p>
<p>Disable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--no-substitute</code></p>
<p>Disable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--no-sync-before-registering</code></p>
<p>Disable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--no-trace-function-calls</code></p>
<p>Disable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--no-trace-verbose</code></p>
<p>Disable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--no-use-case-hack</code></p>
<p>Disable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--no-use-cgroups</code></p>
<p>Disable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--no-use-registries</code></p>
<p>Disable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--no-use-sqlite-wal</code></p>
<p>Disable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--no-warn-dirty</code></p>
<p>Disable the <code>warn-dirty</code> setting.</p>
</li>
<li>
<p><code>--plugin-files</code> <em>value</em></p>
<p>Set the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--post-build-hook</code> <em>value</em></p>
<p>Set the <code>post-build-hook</code> setting.</p>
</li>
<li>
<p><code>--pre-build-hook</code> <em>value</em></p>
<p>Set the <code>pre-build-hook</code> setting.</p>
</li>
<li>
<p><code>--preallocate-contents</code></p>
<p>Enable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--print-missing</code></p>
<p>Enable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--pure-eval</code></p>
<p>Enable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--relaxed-sandbox</code></p>
<p>Enable sandboxing, but allow builds to disable it.</p>
</li>
<li>
<p><code>--require-sigs</code></p>
<p>Enable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--restrict-eval</code></p>
<p>Enable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--run-diff-hook</code></p>
<p>Enable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--sandbox</code></p>
<p>Enable sandboxing.</p>
</li>
<li>
<p><code>--sandbox-build-dir</code> <em>value</em></p>
<p>Set the <code>sandbox-build-dir</code> setting.</p>
</li>
<li>
<p><code>--sandbox-dev-shm-size</code> <em>value</em></p>
<p>Set the <code>sandbox-dev-shm-size</code> setting.</p>
</li>
<li>
<p><code>--sandbox-fallback</code></p>
<p>Enable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--sandbox-paths</code> <em>value</em></p>
<p>Set the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--secret-key-files</code> <em>value</em></p>
<p>Set the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--show-trace</code></p>
<p>Enable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--stalled-download-timeout</code> <em>value</em></p>
<p>Set the <code>stalled-download-timeout</code> setting.</p>
</li>
<li>
<p><code>--start-id</code> <em>value</em></p>
<p>Set the <code>start-id</code> setting.</p>
</li>
<li>
<p><code>--store</code> <em>value</em></p>
<p>Set the <code>store</code> setting.</p>
</li>
<li>
<p><code>--substitute</code></p>
<p>Enable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--substituters</code> <em>value</em></p>
<p>Set the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--sync-before-registering</code></p>
<p>Enable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--system</code> <em>value</em></p>
<p>Set the <code>system</code> setting.</p>
</li>
<li>
<p><code>--system-features</code> <em>value</em></p>
<p>Set the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--tarball-ttl</code> <em>value</em></p>
<p>Set the <code>tarball-ttl</code> setting.</p>
</li>
<li>
<p><code>--timeout</code> <em>value</em></p>
<p>Set the <code>timeout</code> setting.</p>
</li>
<li>
<p><code>--trace-function-calls</code></p>
<p>Enable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--trace-verbose</code></p>
<p>Enable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--trusted-public-keys</code> <em>value</em></p>
<p>Set the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--trusted-substituters</code> <em>value</em></p>
<p>Set the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--trusted-users</code> <em>value</em></p>
<p>Set the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--use-case-hack</code></p>
<p>Enable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--use-cgroups</code></p>
<p>Enable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--use-registries</code></p>
<p>Enable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--use-sqlite-wal</code></p>
<p>Enable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--user-agent-suffix</code> <em>value</em></p>
<p>Set the <code>user-agent-suffix</code> setting.</p>
</li>
<li>
<p><code>--warn-dirty</code></p>
<p>Enable the <code>warn-dirty</code> setting.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p><strong>Warning</strong> <br />
This program is <strong>experimental</strong> and its interface is subject to change.</p>
</blockquote>
<h1 id="name-17"><a class="header" href="#name-17">Name</a></h1>
<p><code>nix develop</code> - run a bash shell that provides the build environment of a derivation</p>
<h1 id="synopsis-48"><a class="header" href="#synopsis-48">Synopsis</a></h1>
<p><code>nix develop</code> [<em>option</em>...] <em>installable</em></p>
<h1 id="examples-28"><a class="header" href="#examples-28">Examples</a></h1>
<ul>
<li>
<p>Start a shell with the build environment of the default package of
the flake in the current directory:</p>
<pre><code class="language-console"># nix develop
</code></pre>
<p>Typical commands to run inside this shell are:</p>
<pre><code class="language-console"># configurePhase
# buildPhase
# installPhase
</code></pre>
<p>Alternatively, you can run whatever build tools your project uses
directly, e.g. for a typical Unix project:</p>
<pre><code class="language-console"># ./configure --prefix=$out
# make
# make install
</code></pre>
</li>
<li>
<p>Run a particular build phase directly:</p>
<pre><code class="language-console"># nix develop --unpack
# nix develop --configure
# nix develop --build
# nix develop --check
# nix develop --install
# nix develop --installcheck
</code></pre>
</li>
<li>
<p>Start a shell with the build environment of GNU Hello:</p>
<pre><code class="language-console"># nix develop nixpkgs#hello
</code></pre>
</li>
<li>
<p>Record a build environment in a profile:</p>
<pre><code class="language-console"># nix develop --profile /tmp/my-build-env nixpkgs#hello
</code></pre>
</li>
<li>
<p>Use a build environment previously recorded in a profile:</p>
<pre><code class="language-console"># nix develop /tmp/my-build-env
</code></pre>
</li>
<li>
<p>Replace all occurrences of the store path corresponding to
<code>glibc.dev</code> with a writable directory:</p>
<pre><code class="language-console"># nix develop --redirect nixpkgs#glibc.dev ~/my-glibc/outputs/dev
</code></pre>
<p>Note that this is useful if you're running a <code>nix develop</code> shell for
<code>nixpkgs#glibc</code> in <code>~/my-glibc</code> and want to compile another package
against it.</p>
</li>
<li>
<p>Run a series of script commands:</p>
<pre><code class="language-console"># nix develop --command bash -c &quot;mkdir build &amp;&amp; cmake .. &amp;&amp; make&quot;
</code></pre>
</li>
</ul>
<h1 id="description-47"><a class="header" href="#description-47">Description</a></h1>
<p><code>nix develop</code> starts a <code>bash</code> shell that provides an interactive build
environment nearly identical to what Nix would use to build
<em>installable</em>. Inside this shell, environment variables and shell
functions are set up so that you can interactively and incrementally
build your package.</p>
<p>Nix determines the build environment by building a modified version of
the derivation <em>installable</em> that just records the environment
initialised by <code>stdenv</code> and exits. This build environment can be
recorded into a profile using <code>--profile</code>.</p>
<p>The prompt used by the <code>bash</code> shell can be customised by setting the
<code>bash-prompt</code>, <code>bash-prompt-prefix</code>, and <code>bash-prompt-suffix</code> settings in
<code>nix.conf</code> or in the flake's <code>nixConfig</code> attribute.</p>
<h1 id="flake-output-attributes-1"><a class="header" href="#flake-output-attributes-1">Flake output attributes</a></h1>
<p>If no flake output attribute is given, <code>nix develop</code> tries the following
flake output attributes:</p>
<ul>
<li>
<p><code>devShells.&lt;system&gt;.default</code></p>
</li>
<li>
<p><code>packages.&lt;system&gt;.default</code></p>
</li>
</ul>
<p>If a flake output <em>name</em> is given, <code>nix develop</code> tries the following flake
output attributes:</p>
<ul>
<li>
<p><code>devShells.&lt;system&gt;.&lt;name&gt;</code></p>
</li>
<li>
<p><code>packages.&lt;system&gt;.&lt;name&gt;</code></p>
</li>
<li>
<p><code>legacyPackages.&lt;system&gt;.&lt;name&gt;</code></p>
</li>
</ul>
<h1 id="options-11"><a class="header" href="#options-11">Options</a></h1>
<ul>
<li>
<p><code>--build</code></p>
<p>Run the <code>build</code> phase.</p>
</li>
<li>
<p><code>--check</code></p>
<p>Run the <code>check</code> phase.</p>
</li>
<li>
<p><code>--command</code> / <code>-c</code> <em>command</em> <em>args</em></p>
<p>Instead of starting an interactive shell, start the specified command and arguments.</p>
</li>
<li>
<p><code>--configure</code></p>
<p>Run the <code>configure</code> phase.</p>
</li>
<li>
<p><code>--ignore-environment</code> / <code>-i</code></p>
<p>Clear the entire environment (except those specified with <code>--keep</code>).</p>
</li>
<li>
<p><code>--install</code></p>
<p>Run the <code>install</code> phase.</p>
</li>
<li>
<p><code>--installcheck</code></p>
<p>Run the <code>installcheck</code> phase.</p>
</li>
<li>
<p><code>--keep</code> / <code>-k</code> <em>name</em></p>
<p>Keep the environment variable <em>name</em>.</p>
</li>
<li>
<p><code>--phase</code> <em>phase-name</em></p>
<p>The stdenv phase to run (e.g. <code>build</code> or <code>configure</code>).</p>
</li>
<li>
<p><code>--profile</code> <em>path</em></p>
<p>The profile to operate on.</p>
</li>
<li>
<p><code>--redirect</code> <em>installable</em> <em>outputs-dir</em></p>
<p>Redirect a store path to a mutable location.</p>
</li>
<li>
<p><code>--unpack</code></p>
<p>Run the <code>unpack</code> phase.</p>
</li>
<li>
<p><code>--unset</code> / <code>-u</code> <em>name</em></p>
<p>Unset the environment variable <em>name</em>.</p>
</li>
</ul>
<p><strong>Common evaluation options:</strong></p>
<ul>
<li>
<p><code>--arg</code> <em>name</em> <em>expr</em></p>
<p>Pass the value <em>expr</em> as the argument <em>name</em> to Nix functions.</p>
</li>
<li>
<p><code>--argstr</code> <em>name</em> <em>string</em></p>
<p>Pass the string <em>string</em> as the argument <em>name</em> to Nix functions.</p>
</li>
<li>
<p><code>--debugger</code></p>
<p>Start an interactive environment if evaluation fails.</p>
</li>
<li>
<p><code>--eval-store</code> <em>store-url</em></p>
<p>The Nix store to use for evaluations.</p>
</li>
<li>
<p><code>--impure</code></p>
<p>Allow access to mutable paths and repositories.</p>
</li>
<li>
<p><code>--include</code> / <code>-I</code> <em>path</em></p>
<p>Add <em>path</em> to the Nix search path. The Nix search path is
initialized from the colon-separated <a href="command-ref/new-cli/../../command-ref/env-common.html#env-NIX_PATH"><code>NIX_PATH</code></a> environment
variable, and is used to look up the location of Nix expressions using <a href="command-ref/new-cli/../../language/values.html#type-path">paths</a> enclosed in angle
brackets (i.e., <code>&lt;nixpkgs&gt;</code>).</p>
<p>For instance, passing</p>
<pre><code>-I /home/eelco/Dev
-I /etc/nixos
</code></pre>
<p>will cause Nix to look for paths relative to <code>/home/eelco/Dev</code> and
<code>/etc/nixos</code>, in that order. This is equivalent to setting the
<code>NIX_PATH</code> environment variable to</p>
<pre><code>/home/eelco/Dev:/etc/nixos
</code></pre>
<p>It is also possible to match paths against a prefix. For example,
passing</p>
<pre><code>-I nixpkgs=/home/eelco/Dev/nixpkgs-branch
-I /etc/nixos
</code></pre>
<p>will cause Nix to search for <code>&lt;nixpkgs/path&gt;</code> in
<code>/home/eelco/Dev/nixpkgs-branch/path</code> and <code>/etc/nixos/nixpkgs/path</code>.</p>
<p>If a path in the Nix search path starts with <code>http://</code> or <code>https://</code>,
it is interpreted as the URL of a tarball that will be downloaded and
unpacked to a temporary location. The tarball must consist of a single
top-level directory. For example, passing</p>
<pre><code>-I nixpkgs=https://github.com/NixOS/nixpkgs/archive/master.tar.gz
</code></pre>
<p>tells Nix to download and use the current contents of the <code>master</code>
branch in the <code>nixpkgs</code> repository.</p>
<p>The URLs of the tarballs from the official <code>nixos.org</code> channels
(see <a href="command-ref/new-cli/../nix-channel.html">the manual page for <code>nix-channel</code></a>) can be
abbreviated as <code>channel:&lt;channel-name&gt;</code>. For instance, the
following two flags are equivalent:</p>
<pre><code>-I nixpkgs=channel:nixos-21.05
-I nixpkgs=https://nixos.org/channels/nixos-21.05/nixexprs.tar.xz
</code></pre>
<p>You can also fetch source trees using <a href="command-ref/new-cli/./nix3-flake.html#url-like-syntax">flake URLs</a> and add them to the
search path. For instance,</p>
<pre><code>-I nixpkgs=flake:nixpkgs
</code></pre>
<p>specifies that the prefix <code>nixpkgs</code> shall refer to the source tree
downloaded from the <code>nixpkgs</code> entry in the flake registry. Similarly,</p>
<pre><code>-I nixpkgs=flake:github:NixOS/nixpkgs/nixos-22.05
</code></pre>
<p>makes <code>&lt;nixpkgs&gt;</code> refer to a particular branch of the
<code>NixOS/nixpkgs</code> repository on GitHub.</p>
</li>
<li>
<p><code>--override-flake</code> <em>original-ref</em> <em>resolved-ref</em></p>
<p>Override the flake registries, redirecting <em>original-ref</em> to <em>resolved-ref</em>.</p>
</li>
</ul>
<p><strong>Common flake-related options:</strong></p>
<ul>
<li>
<p><code>--commit-lock-file</code></p>
<p>Commit changes to the flake's lock file.</p>
</li>
<li>
<p><code>--inputs-from</code> <em>flake-url</em></p>
<p>Use the inputs of the specified flake as registry entries.</p>
</li>
<li>
<p><code>--no-registries</code></p>
<p>Don't allow lookups in the flake registries. This option is deprecated; use <code>--no-use-registries</code>.</p>
</li>
<li>
<p><code>--no-update-lock-file</code></p>
<p>Do not allow any updates to the flake's lock file.</p>
</li>
<li>
<p><code>--no-write-lock-file</code></p>
<p>Do not write the flake's newly generated lock file.</p>
</li>
<li>
<p><code>--override-input</code> <em>input-path</em> <em>flake-url</em></p>
<p>Override a specific flake input (e.g. <code>dwarffs/nixpkgs</code>). This implies <code>--no-write-lock-file</code>.</p>
</li>
<li>
<p><code>--recreate-lock-file</code></p>
<p>Recreate the flake's lock file from scratch.</p>
</li>
<li>
<p><code>--update-input</code> <em>input-path</em></p>
<p>Update a specific flake input (ignoring its previous entry in the lock file).</p>
</li>
</ul>
<p><strong>Logging-related options:</strong></p>
<ul>
<li>
<p><code>--debug</code></p>
<p>Set the logging verbosity level to 'debug'.</p>
</li>
<li>
<p><code>--log-format</code> <em>format</em></p>
<p>Set the format of log output; one of <code>raw</code>, <code>internal-json</code>, <code>bar</code> or <code>bar-with-logs</code>.</p>
</li>
<li>
<p><code>--print-build-logs</code> / <code>-L</code></p>
<p>Print full build logs on standard error.</p>
</li>
<li>
<p><code>--quiet</code></p>
<p>Decrease the logging verbosity level.</p>
</li>
<li>
<p><code>--verbose</code> / <code>-v</code></p>
<p>Increase the logging verbosity level.</p>
</li>
</ul>
<p><strong>Miscellaneous global options:</strong></p>
<ul>
<li>
<p><code>--help</code></p>
<p>Show usage information.</p>
</li>
<li>
<p><code>--offline</code></p>
<p>Disable substituters and consider all previously downloaded files up-to-date.</p>
</li>
<li>
<p><code>--option</code> <em>name</em> <em>value</em></p>
<p>Set the Nix configuration setting <em>name</em> to <em>value</em> (overriding <code>nix.conf</code>).</p>
</li>
<li>
<p><code>--refresh</code></p>
<p>Consider all previously downloaded files out-of-date.</p>
</li>
<li>
<p><code>--version</code></p>
<p>Show version information.</p>
</li>
</ul>
<p><strong>Options that change the interpretation of installables:</strong></p>
<ul>
<li>
<p><code>--derivation</code></p>
<p>Operate on the <a href="command-ref/new-cli/../../glossary.html#gloss-store-derivation">store derivation</a> rather than its outputs.</p>
</li>
<li>
<p><code>--expr</code> <em>expr</em></p>
<p>Interpret installables as attribute paths relative to the Nix expression <em>expr</em>.</p>
</li>
<li>
<p><code>--file</code> / <code>-f</code> <em>file</em></p>
<p>Interpret installables as attribute paths relative to the Nix expression stored in <em>file</em>. If <em>file</em> is the character -, then a Nix expression will be read from standard input. Implies <code>--impure</code>.</p>
</li>
</ul>
<p><strong>Options to override configuration settings:</strong></p>
<ul>
<li>
<p><code>--accept-flake-config</code></p>
<p>Enable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--access-tokens</code> <em>value</em></p>
<p>Set the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--allow-dirty</code></p>
<p>Enable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--allow-import-from-derivation</code></p>
<p>Enable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--allow-new-privileges</code></p>
<p>Enable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--allow-symlinked-store</code></p>
<p>Enable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--allow-unsafe-native-code-during-evaluation</code></p>
<p>Enable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--allowed-impure-host-deps</code> <em>value</em></p>
<p>Set the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--allowed-uris</code> <em>value</em></p>
<p>Set the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--allowed-users</code> <em>value</em></p>
<p>Set the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--auto-allocate-uids</code></p>
<p>Enable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--auto-optimise-store</code></p>
<p>Enable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt</code> <em>value</em></p>
<p>Set the <code>bash-prompt</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-prefix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-prefix</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-suffix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-suffix</code> setting.</p>
</li>
<li>
<p><code>--build-hook</code> <em>value</em></p>
<p>Set the <code>build-hook</code> setting.</p>
</li>
<li>
<p><code>--build-poll-interval</code> <em>value</em></p>
<p>Set the <code>build-poll-interval</code> setting.</p>
</li>
<li>
<p><code>--build-users-group</code> <em>value</em></p>
<p>Set the <code>build-users-group</code> setting.</p>
</li>
<li>
<p><code>--builders</code> <em>value</em></p>
<p>Set the <code>builders</code> setting.</p>
</li>
<li>
<p><code>--builders-use-substitutes</code></p>
<p>Enable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--commit-lockfile-summary</code> <em>value</em></p>
<p>Set the <code>commit-lockfile-summary</code> setting.</p>
</li>
<li>
<p><code>--compress-build-log</code></p>
<p>Enable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--connect-timeout</code> <em>value</em></p>
<p>Set the <code>connect-timeout</code> setting.</p>
</li>
<li>
<p><code>--cores</code> <em>value</em></p>
<p>Set the <code>cores</code> setting.</p>
</li>
<li>
<p><code>--diff-hook</code> <em>value</em></p>
<p>Set the <code>diff-hook</code> setting.</p>
</li>
<li>
<p><code>--download-attempts</code> <em>value</em></p>
<p>Set the <code>download-attempts</code> setting.</p>
</li>
<li>
<p><code>--download-speed</code> <em>value</em></p>
<p>Set the <code>download-speed</code> setting.</p>
</li>
<li>
<p><code>--eval-cache</code></p>
<p>Enable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--experimental-features</code> <em>value</em></p>
<p>Set the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-access-tokens</code> <em>value</em></p>
<p>Append to the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-impure-host-deps</code> <em>value</em></p>
<p>Append to the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-uris</code> <em>value</em></p>
<p>Append to the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-users</code> <em>value</em></p>
<p>Append to the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--extra-experimental-features</code> <em>value</em></p>
<p>Append to the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-extra-platforms</code> <em>value</em></p>
<p>Append to the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-hashed-mirrors</code> <em>value</em></p>
<p>Append to the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--extra-ignored-acls</code> <em>value</em></p>
<p>Append to the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--extra-nix-path</code> <em>value</em></p>
<p>Append to the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--extra-platforms</code> <em>value</em></p>
<p>Set the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-plugin-files</code> <em>value</em></p>
<p>Append to the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--extra-sandbox-paths</code> <em>value</em></p>
<p>Append to the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--extra-secret-key-files</code> <em>value</em></p>
<p>Append to the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--extra-substituters</code> <em>value</em></p>
<p>Append to the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-system-features</code> <em>value</em></p>
<p>Append to the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-public-keys</code> <em>value</em></p>
<p>Append to the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-substituters</code> <em>value</em></p>
<p>Append to the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-users</code> <em>value</em></p>
<p>Append to the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--fallback</code></p>
<p>Enable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--filter-syscalls</code></p>
<p>Enable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--flake-registry</code> <em>value</em></p>
<p>Set the <code>flake-registry</code> setting.</p>
</li>
<li>
<p><code>--fsync-metadata</code></p>
<p>Enable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--gc-reserved-space</code> <em>value</em></p>
<p>Set the <code>gc-reserved-space</code> setting.</p>
</li>
<li>
<p><code>--hashed-mirrors</code> <em>value</em></p>
<p>Set the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--http-connections</code> <em>value</em></p>
<p>Set the <code>http-connections</code> setting.</p>
</li>
<li>
<p><code>--http2</code></p>
<p>Enable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--id-count</code> <em>value</em></p>
<p>Set the <code>id-count</code> setting.</p>
</li>
<li>
<p><code>--ignore-try</code></p>
<p>Enable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--ignored-acls</code> <em>value</em></p>
<p>Set the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--impersonate-linux-26</code></p>
<p>Enable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--keep-build-log</code></p>
<p>Enable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--keep-derivations</code></p>
<p>Enable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-env-derivations</code></p>
<p>Enable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-failed</code></p>
<p>Enable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--keep-going</code></p>
<p>Enable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--keep-outputs</code></p>
<p>Enable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--log-lines</code> <em>value</em></p>
<p>Set the <code>log-lines</code> setting.</p>
</li>
<li>
<p><code>--max-build-log-size</code> <em>value</em></p>
<p>Set the <code>max-build-log-size</code> setting.</p>
</li>
<li>
<p><code>--max-free</code> <em>value</em></p>
<p>Set the <code>max-free</code> setting.</p>
</li>
<li>
<p><code>--max-jobs</code> <em>value</em></p>
<p>Set the <code>max-jobs</code> setting.</p>
</li>
<li>
<p><code>--max-silent-time</code> <em>value</em></p>
<p>Set the <code>max-silent-time</code> setting.</p>
</li>
<li>
<p><code>--min-free</code> <em>value</em></p>
<p>Set the <code>min-free</code> setting.</p>
</li>
<li>
<p><code>--min-free-check-interval</code> <em>value</em></p>
<p>Set the <code>min-free-check-interval</code> setting.</p>
</li>
<li>
<p><code>--nar-buffer-size</code> <em>value</em></p>
<p>Set the <code>nar-buffer-size</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-negative-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-negative-ttl</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-positive-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-positive-ttl</code> setting.</p>
</li>
<li>
<p><code>--netrc-file</code> <em>value</em></p>
<p>Set the <code>netrc-file</code> setting.</p>
</li>
<li>
<p><code>--nix-path</code> <em>value</em></p>
<p>Set the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--no-accept-flake-config</code></p>
<p>Disable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--no-allow-dirty</code></p>
<p>Disable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--no-allow-import-from-derivation</code></p>
<p>Disable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--no-allow-new-privileges</code></p>
<p>Disable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--no-allow-symlinked-store</code></p>
<p>Disable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--no-allow-unsafe-native-code-during-evaluation</code></p>
<p>Disable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--no-auto-allocate-uids</code></p>
<p>Disable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--no-auto-optimise-store</code></p>
<p>Disable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--no-builders-use-substitutes</code></p>
<p>Disable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--no-compress-build-log</code></p>
<p>Disable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-eval-cache</code></p>
<p>Disable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--no-fallback</code></p>
<p>Disable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--no-filter-syscalls</code></p>
<p>Disable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--no-fsync-metadata</code></p>
<p>Disable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--no-http2</code></p>
<p>Disable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--no-ignore-try</code></p>
<p>Disable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--no-impersonate-linux-26</code></p>
<p>Disable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--no-keep-build-log</code></p>
<p>Disable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-keep-derivations</code></p>
<p>Disable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-env-derivations</code></p>
<p>Disable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-failed</code></p>
<p>Disable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--no-keep-going</code></p>
<p>Disable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--no-keep-outputs</code></p>
<p>Disable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--no-preallocate-contents</code></p>
<p>Disable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--no-print-missing</code></p>
<p>Disable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--no-pure-eval</code></p>
<p>Disable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--no-require-sigs</code></p>
<p>Disable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--no-restrict-eval</code></p>
<p>Disable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--no-run-diff-hook</code></p>
<p>Disable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--no-sandbox</code></p>
<p>Disable sandboxing.</p>
</li>
<li>
<p><code>--no-sandbox-fallback</code></p>
<p>Disable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--no-show-trace</code></p>
<p>Disable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--no-substitute</code></p>
<p>Disable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--no-sync-before-registering</code></p>
<p>Disable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--no-trace-function-calls</code></p>
<p>Disable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--no-trace-verbose</code></p>
<p>Disable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--no-use-case-hack</code></p>
<p>Disable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--no-use-cgroups</code></p>
<p>Disable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--no-use-registries</code></p>
<p>Disable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--no-use-sqlite-wal</code></p>
<p>Disable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--no-warn-dirty</code></p>
<p>Disable the <code>warn-dirty</code> setting.</p>
</li>
<li>
<p><code>--plugin-files</code> <em>value</em></p>
<p>Set the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--post-build-hook</code> <em>value</em></p>
<p>Set the <code>post-build-hook</code> setting.</p>
</li>
<li>
<p><code>--pre-build-hook</code> <em>value</em></p>
<p>Set the <code>pre-build-hook</code> setting.</p>
</li>
<li>
<p><code>--preallocate-contents</code></p>
<p>Enable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--print-missing</code></p>
<p>Enable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--pure-eval</code></p>
<p>Enable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--relaxed-sandbox</code></p>
<p>Enable sandboxing, but allow builds to disable it.</p>
</li>
<li>
<p><code>--require-sigs</code></p>
<p>Enable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--restrict-eval</code></p>
<p>Enable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--run-diff-hook</code></p>
<p>Enable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--sandbox</code></p>
<p>Enable sandboxing.</p>
</li>
<li>
<p><code>--sandbox-build-dir</code> <em>value</em></p>
<p>Set the <code>sandbox-build-dir</code> setting.</p>
</li>
<li>
<p><code>--sandbox-dev-shm-size</code> <em>value</em></p>
<p>Set the <code>sandbox-dev-shm-size</code> setting.</p>
</li>
<li>
<p><code>--sandbox-fallback</code></p>
<p>Enable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--sandbox-paths</code> <em>value</em></p>
<p>Set the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--secret-key-files</code> <em>value</em></p>
<p>Set the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--show-trace</code></p>
<p>Enable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--stalled-download-timeout</code> <em>value</em></p>
<p>Set the <code>stalled-download-timeout</code> setting.</p>
</li>
<li>
<p><code>--start-id</code> <em>value</em></p>
<p>Set the <code>start-id</code> setting.</p>
</li>
<li>
<p><code>--store</code> <em>value</em></p>
<p>Set the <code>store</code> setting.</p>
</li>
<li>
<p><code>--substitute</code></p>
<p>Enable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--substituters</code> <em>value</em></p>
<p>Set the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--sync-before-registering</code></p>
<p>Enable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--system</code> <em>value</em></p>
<p>Set the <code>system</code> setting.</p>
</li>
<li>
<p><code>--system-features</code> <em>value</em></p>
<p>Set the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--tarball-ttl</code> <em>value</em></p>
<p>Set the <code>tarball-ttl</code> setting.</p>
</li>
<li>
<p><code>--timeout</code> <em>value</em></p>
<p>Set the <code>timeout</code> setting.</p>
</li>
<li>
<p><code>--trace-function-calls</code></p>
<p>Enable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--trace-verbose</code></p>
<p>Enable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--trusted-public-keys</code> <em>value</em></p>
<p>Set the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--trusted-substituters</code> <em>value</em></p>
<p>Set the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--trusted-users</code> <em>value</em></p>
<p>Set the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--use-case-hack</code></p>
<p>Enable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--use-cgroups</code></p>
<p>Enable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--use-registries</code></p>
<p>Enable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--use-sqlite-wal</code></p>
<p>Enable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--user-agent-suffix</code> <em>value</em></p>
<p>Set the <code>user-agent-suffix</code> setting.</p>
</li>
<li>
<p><code>--warn-dirty</code></p>
<p>Enable the <code>warn-dirty</code> setting.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p><strong>Warning</strong> <br />
This program is <strong>experimental</strong> and its interface is subject to change.</p>
</blockquote>
<h1 id="name-18"><a class="header" href="#name-18">Name</a></h1>
<p><code>nix doctor</code> - check your system for potential problems and print a PASS or FAIL for each check</p>
<h1 id="synopsis-49"><a class="header" href="#synopsis-49">Synopsis</a></h1>
<p><code>nix doctor</code> [<em>option</em>...] </p>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p><strong>Warning</strong> <br />
This program is <strong>experimental</strong> and its interface is subject to change.</p>
</blockquote>
<h1 id="name-19"><a class="header" href="#name-19">Name</a></h1>
<p><code>nix edit</code> - open the Nix expression of a Nix package in $EDITOR</p>
<h1 id="synopsis-50"><a class="header" href="#synopsis-50">Synopsis</a></h1>
<p><code>nix edit</code> [<em>option</em>...] <em>installable</em></p>
<h1 id="examples-29"><a class="header" href="#examples-29">Examples</a></h1>
<ul>
<li>
<p>Open the Nix expression of the GNU Hello package:</p>
<pre><code class="language-console"># nix edit nixpkgs#hello
</code></pre>
</li>
<li>
<p>Get the filename and line number used by <code>nix edit</code>:</p>
<pre><code class="language-console"># nix eval --raw nixpkgs#hello.meta.position
/nix/store/fvafw0gvwayzdan642wrv84pzm5bgpmy-source/pkgs/applications/misc/hello/default.nix:15
</code></pre>
</li>
</ul>
<h1 id="description-48"><a class="header" href="#description-48">Description</a></h1>
<p>This command opens the Nix expression of a derivation in an
editor. The filename and line number of the derivation are taken from
its <code>meta.position</code> attribute. Nixpkgs' <code>stdenv.mkDerivation</code> sets
this attribute to the location of the definition of the
<code>meta.description</code>, <code>version</code> or <code>name</code> derivation attributes.</p>
<p>The editor to invoke is specified by the <code>EDITOR</code> environment
variable. It defaults to <code>cat</code>. If the editor is <code>emacs</code>, <code>nano</code>,
<code>vim</code> or <code>kak</code>, it is passed the line number of the derivation using
the argument <code>+&lt;lineno&gt;</code>.</p>
<h1 id="options-12"><a class="header" href="#options-12">Options</a></h1>
<p><strong>Common evaluation options:</strong></p>
<ul>
<li>
<p><code>--arg</code> <em>name</em> <em>expr</em></p>
<p>Pass the value <em>expr</em> as the argument <em>name</em> to Nix functions.</p>
</li>
<li>
<p><code>--argstr</code> <em>name</em> <em>string</em></p>
<p>Pass the string <em>string</em> as the argument <em>name</em> to Nix functions.</p>
</li>
<li>
<p><code>--debugger</code></p>
<p>Start an interactive environment if evaluation fails.</p>
</li>
<li>
<p><code>--eval-store</code> <em>store-url</em></p>
<p>The Nix store to use for evaluations.</p>
</li>
<li>
<p><code>--impure</code></p>
<p>Allow access to mutable paths and repositories.</p>
</li>
<li>
<p><code>--include</code> / <code>-I</code> <em>path</em></p>
<p>Add <em>path</em> to the Nix search path. The Nix search path is
initialized from the colon-separated <a href="command-ref/new-cli/../../command-ref/env-common.html#env-NIX_PATH"><code>NIX_PATH</code></a> environment
variable, and is used to look up the location of Nix expressions using <a href="command-ref/new-cli/../../language/values.html#type-path">paths</a> enclosed in angle
brackets (i.e., <code>&lt;nixpkgs&gt;</code>).</p>
<p>For instance, passing</p>
<pre><code>-I /home/eelco/Dev
-I /etc/nixos
</code></pre>
<p>will cause Nix to look for paths relative to <code>/home/eelco/Dev</code> and
<code>/etc/nixos</code>, in that order. This is equivalent to setting the
<code>NIX_PATH</code> environment variable to</p>
<pre><code>/home/eelco/Dev:/etc/nixos
</code></pre>
<p>It is also possible to match paths against a prefix. For example,
passing</p>
<pre><code>-I nixpkgs=/home/eelco/Dev/nixpkgs-branch
-I /etc/nixos
</code></pre>
<p>will cause Nix to search for <code>&lt;nixpkgs/path&gt;</code> in
<code>/home/eelco/Dev/nixpkgs-branch/path</code> and <code>/etc/nixos/nixpkgs/path</code>.</p>
<p>If a path in the Nix search path starts with <code>http://</code> or <code>https://</code>,
it is interpreted as the URL of a tarball that will be downloaded and
unpacked to a temporary location. The tarball must consist of a single
top-level directory. For example, passing</p>
<pre><code>-I nixpkgs=https://github.com/NixOS/nixpkgs/archive/master.tar.gz
</code></pre>
<p>tells Nix to download and use the current contents of the <code>master</code>
branch in the <code>nixpkgs</code> repository.</p>
<p>The URLs of the tarballs from the official <code>nixos.org</code> channels
(see <a href="command-ref/new-cli/../nix-channel.html">the manual page for <code>nix-channel</code></a>) can be
abbreviated as <code>channel:&lt;channel-name&gt;</code>. For instance, the
following two flags are equivalent:</p>
<pre><code>-I nixpkgs=channel:nixos-21.05
-I nixpkgs=https://nixos.org/channels/nixos-21.05/nixexprs.tar.xz
</code></pre>
<p>You can also fetch source trees using <a href="command-ref/new-cli/./nix3-flake.html#url-like-syntax">flake URLs</a> and add them to the
search path. For instance,</p>
<pre><code>-I nixpkgs=flake:nixpkgs
</code></pre>
<p>specifies that the prefix <code>nixpkgs</code> shall refer to the source tree
downloaded from the <code>nixpkgs</code> entry in the flake registry. Similarly,</p>
<pre><code>-I nixpkgs=flake:github:NixOS/nixpkgs/nixos-22.05
</code></pre>
<p>makes <code>&lt;nixpkgs&gt;</code> refer to a particular branch of the
<code>NixOS/nixpkgs</code> repository on GitHub.</p>
</li>
<li>
<p><code>--override-flake</code> <em>original-ref</em> <em>resolved-ref</em></p>
<p>Override the flake registries, redirecting <em>original-ref</em> to <em>resolved-ref</em>.</p>
</li>
</ul>
<p><strong>Common flake-related options:</strong></p>
<ul>
<li>
<p><code>--commit-lock-file</code></p>
<p>Commit changes to the flake's lock file.</p>
</li>
<li>
<p><code>--inputs-from</code> <em>flake-url</em></p>
<p>Use the inputs of the specified flake as registry entries.</p>
</li>
<li>
<p><code>--no-registries</code></p>
<p>Don't allow lookups in the flake registries. This option is deprecated; use <code>--no-use-registries</code>.</p>
</li>
<li>
<p><code>--no-update-lock-file</code></p>
<p>Do not allow any updates to the flake's lock file.</p>
</li>
<li>
<p><code>--no-write-lock-file</code></p>
<p>Do not write the flake's newly generated lock file.</p>
</li>
<li>
<p><code>--override-input</code> <em>input-path</em> <em>flake-url</em></p>
<p>Override a specific flake input (e.g. <code>dwarffs/nixpkgs</code>). This implies <code>--no-write-lock-file</code>.</p>
</li>
<li>
<p><code>--recreate-lock-file</code></p>
<p>Recreate the flake's lock file from scratch.</p>
</li>
<li>
<p><code>--update-input</code> <em>input-path</em></p>
<p>Update a specific flake input (ignoring its previous entry in the lock file).</p>
</li>
</ul>
<p><strong>Logging-related options:</strong></p>
<ul>
<li>
<p><code>--debug</code></p>
<p>Set the logging verbosity level to 'debug'.</p>
</li>
<li>
<p><code>--log-format</code> <em>format</em></p>
<p>Set the format of log output; one of <code>raw</code>, <code>internal-json</code>, <code>bar</code> or <code>bar-with-logs</code>.</p>
</li>
<li>
<p><code>--print-build-logs</code> / <code>-L</code></p>
<p>Print full build logs on standard error.</p>
</li>
<li>
<p><code>--quiet</code></p>
<p>Decrease the logging verbosity level.</p>
</li>
<li>
<p><code>--verbose</code> / <code>-v</code></p>
<p>Increase the logging verbosity level.</p>
</li>
</ul>
<p><strong>Miscellaneous global options:</strong></p>
<ul>
<li>
<p><code>--help</code></p>
<p>Show usage information.</p>
</li>
<li>
<p><code>--offline</code></p>
<p>Disable substituters and consider all previously downloaded files up-to-date.</p>
</li>
<li>
<p><code>--option</code> <em>name</em> <em>value</em></p>
<p>Set the Nix configuration setting <em>name</em> to <em>value</em> (overriding <code>nix.conf</code>).</p>
</li>
<li>
<p><code>--refresh</code></p>
<p>Consider all previously downloaded files out-of-date.</p>
</li>
<li>
<p><code>--version</code></p>
<p>Show version information.</p>
</li>
</ul>
<p><strong>Options that change the interpretation of installables:</strong></p>
<ul>
<li>
<p><code>--derivation</code></p>
<p>Operate on the <a href="command-ref/new-cli/../../glossary.html#gloss-store-derivation">store derivation</a> rather than its outputs.</p>
</li>
<li>
<p><code>--expr</code> <em>expr</em></p>
<p>Interpret installables as attribute paths relative to the Nix expression <em>expr</em>.</p>
</li>
<li>
<p><code>--file</code> / <code>-f</code> <em>file</em></p>
<p>Interpret installables as attribute paths relative to the Nix expression stored in <em>file</em>. If <em>file</em> is the character -, then a Nix expression will be read from standard input. Implies <code>--impure</code>.</p>
</li>
</ul>
<p><strong>Options to override configuration settings:</strong></p>
<ul>
<li>
<p><code>--accept-flake-config</code></p>
<p>Enable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--access-tokens</code> <em>value</em></p>
<p>Set the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--allow-dirty</code></p>
<p>Enable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--allow-import-from-derivation</code></p>
<p>Enable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--allow-new-privileges</code></p>
<p>Enable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--allow-symlinked-store</code></p>
<p>Enable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--allow-unsafe-native-code-during-evaluation</code></p>
<p>Enable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--allowed-impure-host-deps</code> <em>value</em></p>
<p>Set the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--allowed-uris</code> <em>value</em></p>
<p>Set the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--allowed-users</code> <em>value</em></p>
<p>Set the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--auto-allocate-uids</code></p>
<p>Enable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--auto-optimise-store</code></p>
<p>Enable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt</code> <em>value</em></p>
<p>Set the <code>bash-prompt</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-prefix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-prefix</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-suffix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-suffix</code> setting.</p>
</li>
<li>
<p><code>--build-hook</code> <em>value</em></p>
<p>Set the <code>build-hook</code> setting.</p>
</li>
<li>
<p><code>--build-poll-interval</code> <em>value</em></p>
<p>Set the <code>build-poll-interval</code> setting.</p>
</li>
<li>
<p><code>--build-users-group</code> <em>value</em></p>
<p>Set the <code>build-users-group</code> setting.</p>
</li>
<li>
<p><code>--builders</code> <em>value</em></p>
<p>Set the <code>builders</code> setting.</p>
</li>
<li>
<p><code>--builders-use-substitutes</code></p>
<p>Enable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--commit-lockfile-summary</code> <em>value</em></p>
<p>Set the <code>commit-lockfile-summary</code> setting.</p>
</li>
<li>
<p><code>--compress-build-log</code></p>
<p>Enable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--connect-timeout</code> <em>value</em></p>
<p>Set the <code>connect-timeout</code> setting.</p>
</li>
<li>
<p><code>--cores</code> <em>value</em></p>
<p>Set the <code>cores</code> setting.</p>
</li>
<li>
<p><code>--diff-hook</code> <em>value</em></p>
<p>Set the <code>diff-hook</code> setting.</p>
</li>
<li>
<p><code>--download-attempts</code> <em>value</em></p>
<p>Set the <code>download-attempts</code> setting.</p>
</li>
<li>
<p><code>--download-speed</code> <em>value</em></p>
<p>Set the <code>download-speed</code> setting.</p>
</li>
<li>
<p><code>--eval-cache</code></p>
<p>Enable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--experimental-features</code> <em>value</em></p>
<p>Set the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-access-tokens</code> <em>value</em></p>
<p>Append to the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-impure-host-deps</code> <em>value</em></p>
<p>Append to the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-uris</code> <em>value</em></p>
<p>Append to the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-users</code> <em>value</em></p>
<p>Append to the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--extra-experimental-features</code> <em>value</em></p>
<p>Append to the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-extra-platforms</code> <em>value</em></p>
<p>Append to the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-hashed-mirrors</code> <em>value</em></p>
<p>Append to the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--extra-ignored-acls</code> <em>value</em></p>
<p>Append to the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--extra-nix-path</code> <em>value</em></p>
<p>Append to the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--extra-platforms</code> <em>value</em></p>
<p>Set the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-plugin-files</code> <em>value</em></p>
<p>Append to the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--extra-sandbox-paths</code> <em>value</em></p>
<p>Append to the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--extra-secret-key-files</code> <em>value</em></p>
<p>Append to the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--extra-substituters</code> <em>value</em></p>
<p>Append to the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-system-features</code> <em>value</em></p>
<p>Append to the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-public-keys</code> <em>value</em></p>
<p>Append to the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-substituters</code> <em>value</em></p>
<p>Append to the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-users</code> <em>value</em></p>
<p>Append to the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--fallback</code></p>
<p>Enable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--filter-syscalls</code></p>
<p>Enable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--flake-registry</code> <em>value</em></p>
<p>Set the <code>flake-registry</code> setting.</p>
</li>
<li>
<p><code>--fsync-metadata</code></p>
<p>Enable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--gc-reserved-space</code> <em>value</em></p>
<p>Set the <code>gc-reserved-space</code> setting.</p>
</li>
<li>
<p><code>--hashed-mirrors</code> <em>value</em></p>
<p>Set the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--http-connections</code> <em>value</em></p>
<p>Set the <code>http-connections</code> setting.</p>
</li>
<li>
<p><code>--http2</code></p>
<p>Enable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--id-count</code> <em>value</em></p>
<p>Set the <code>id-count</code> setting.</p>
</li>
<li>
<p><code>--ignore-try</code></p>
<p>Enable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--ignored-acls</code> <em>value</em></p>
<p>Set the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--impersonate-linux-26</code></p>
<p>Enable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--keep-build-log</code></p>
<p>Enable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--keep-derivations</code></p>
<p>Enable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-env-derivations</code></p>
<p>Enable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-failed</code></p>
<p>Enable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--keep-going</code></p>
<p>Enable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--keep-outputs</code></p>
<p>Enable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--log-lines</code> <em>value</em></p>
<p>Set the <code>log-lines</code> setting.</p>
</li>
<li>
<p><code>--max-build-log-size</code> <em>value</em></p>
<p>Set the <code>max-build-log-size</code> setting.</p>
</li>
<li>
<p><code>--max-free</code> <em>value</em></p>
<p>Set the <code>max-free</code> setting.</p>
</li>
<li>
<p><code>--max-jobs</code> <em>value</em></p>
<p>Set the <code>max-jobs</code> setting.</p>
</li>
<li>
<p><code>--max-silent-time</code> <em>value</em></p>
<p>Set the <code>max-silent-time</code> setting.</p>
</li>
<li>
<p><code>--min-free</code> <em>value</em></p>
<p>Set the <code>min-free</code> setting.</p>
</li>
<li>
<p><code>--min-free-check-interval</code> <em>value</em></p>
<p>Set the <code>min-free-check-interval</code> setting.</p>
</li>
<li>
<p><code>--nar-buffer-size</code> <em>value</em></p>
<p>Set the <code>nar-buffer-size</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-negative-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-negative-ttl</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-positive-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-positive-ttl</code> setting.</p>
</li>
<li>
<p><code>--netrc-file</code> <em>value</em></p>
<p>Set the <code>netrc-file</code> setting.</p>
</li>
<li>
<p><code>--nix-path</code> <em>value</em></p>
<p>Set the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--no-accept-flake-config</code></p>
<p>Disable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--no-allow-dirty</code></p>
<p>Disable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--no-allow-import-from-derivation</code></p>
<p>Disable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--no-allow-new-privileges</code></p>
<p>Disable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--no-allow-symlinked-store</code></p>
<p>Disable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--no-allow-unsafe-native-code-during-evaluation</code></p>
<p>Disable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--no-auto-allocate-uids</code></p>
<p>Disable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--no-auto-optimise-store</code></p>
<p>Disable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--no-builders-use-substitutes</code></p>
<p>Disable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--no-compress-build-log</code></p>
<p>Disable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-eval-cache</code></p>
<p>Disable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--no-fallback</code></p>
<p>Disable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--no-filter-syscalls</code></p>
<p>Disable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--no-fsync-metadata</code></p>
<p>Disable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--no-http2</code></p>
<p>Disable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--no-ignore-try</code></p>
<p>Disable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--no-impersonate-linux-26</code></p>
<p>Disable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--no-keep-build-log</code></p>
<p>Disable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-keep-derivations</code></p>
<p>Disable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-env-derivations</code></p>
<p>Disable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-failed</code></p>
<p>Disable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--no-keep-going</code></p>
<p>Disable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--no-keep-outputs</code></p>
<p>Disable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--no-preallocate-contents</code></p>
<p>Disable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--no-print-missing</code></p>
<p>Disable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--no-pure-eval</code></p>
<p>Disable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--no-require-sigs</code></p>
<p>Disable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--no-restrict-eval</code></p>
<p>Disable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--no-run-diff-hook</code></p>
<p>Disable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--no-sandbox</code></p>
<p>Disable sandboxing.</p>
</li>
<li>
<p><code>--no-sandbox-fallback</code></p>
<p>Disable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--no-show-trace</code></p>
<p>Disable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--no-substitute</code></p>
<p>Disable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--no-sync-before-registering</code></p>
<p>Disable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--no-trace-function-calls</code></p>
<p>Disable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--no-trace-verbose</code></p>
<p>Disable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--no-use-case-hack</code></p>
<p>Disable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--no-use-cgroups</code></p>
<p>Disable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--no-use-registries</code></p>
<p>Disable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--no-use-sqlite-wal</code></p>
<p>Disable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--no-warn-dirty</code></p>
<p>Disable the <code>warn-dirty</code> setting.</p>
</li>
<li>
<p><code>--plugin-files</code> <em>value</em></p>
<p>Set the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--post-build-hook</code> <em>value</em></p>
<p>Set the <code>post-build-hook</code> setting.</p>
</li>
<li>
<p><code>--pre-build-hook</code> <em>value</em></p>
<p>Set the <code>pre-build-hook</code> setting.</p>
</li>
<li>
<p><code>--preallocate-contents</code></p>
<p>Enable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--print-missing</code></p>
<p>Enable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--pure-eval</code></p>
<p>Enable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--relaxed-sandbox</code></p>
<p>Enable sandboxing, but allow builds to disable it.</p>
</li>
<li>
<p><code>--require-sigs</code></p>
<p>Enable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--restrict-eval</code></p>
<p>Enable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--run-diff-hook</code></p>
<p>Enable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--sandbox</code></p>
<p>Enable sandboxing.</p>
</li>
<li>
<p><code>--sandbox-build-dir</code> <em>value</em></p>
<p>Set the <code>sandbox-build-dir</code> setting.</p>
</li>
<li>
<p><code>--sandbox-dev-shm-size</code> <em>value</em></p>
<p>Set the <code>sandbox-dev-shm-size</code> setting.</p>
</li>
<li>
<p><code>--sandbox-fallback</code></p>
<p>Enable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--sandbox-paths</code> <em>value</em></p>
<p>Set the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--secret-key-files</code> <em>value</em></p>
<p>Set the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--show-trace</code></p>
<p>Enable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--stalled-download-timeout</code> <em>value</em></p>
<p>Set the <code>stalled-download-timeout</code> setting.</p>
</li>
<li>
<p><code>--start-id</code> <em>value</em></p>
<p>Set the <code>start-id</code> setting.</p>
</li>
<li>
<p><code>--store</code> <em>value</em></p>
<p>Set the <code>store</code> setting.</p>
</li>
<li>
<p><code>--substitute</code></p>
<p>Enable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--substituters</code> <em>value</em></p>
<p>Set the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--sync-before-registering</code></p>
<p>Enable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--system</code> <em>value</em></p>
<p>Set the <code>system</code> setting.</p>
</li>
<li>
<p><code>--system-features</code> <em>value</em></p>
<p>Set the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--tarball-ttl</code> <em>value</em></p>
<p>Set the <code>tarball-ttl</code> setting.</p>
</li>
<li>
<p><code>--timeout</code> <em>value</em></p>
<p>Set the <code>timeout</code> setting.</p>
</li>
<li>
<p><code>--trace-function-calls</code></p>
<p>Enable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--trace-verbose</code></p>
<p>Enable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--trusted-public-keys</code> <em>value</em></p>
<p>Set the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--trusted-substituters</code> <em>value</em></p>
<p>Set the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--trusted-users</code> <em>value</em></p>
<p>Set the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--use-case-hack</code></p>
<p>Enable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--use-cgroups</code></p>
<p>Enable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--use-registries</code></p>
<p>Enable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--use-sqlite-wal</code></p>
<p>Enable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--user-agent-suffix</code> <em>value</em></p>
<p>Set the <code>user-agent-suffix</code> setting.</p>
</li>
<li>
<p><code>--warn-dirty</code></p>
<p>Enable the <code>warn-dirty</code> setting.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p><strong>Warning</strong> <br />
This program is <strong>experimental</strong> and its interface is subject to change.</p>
</blockquote>
<h1 id="name-20"><a class="header" href="#name-20">Name</a></h1>
<p><code>nix eval</code> - evaluate a Nix expression</p>
<h1 id="synopsis-51"><a class="header" href="#synopsis-51">Synopsis</a></h1>
<p><code>nix eval</code> [<em>option</em>...] <em>installable</em></p>
<h1 id="examples-30"><a class="header" href="#examples-30">Examples</a></h1>
<ul>
<li>
<p>Evaluate a Nix expression given on the command line:</p>
<pre><code class="language-console"># nix eval --expr '1 + 2'
</code></pre>
</li>
<li>
<p>Evaluate a Nix expression to JSON:</p>
<pre><code class="language-console"># nix eval --json --expr '{ x = 1; }'
{&quot;x&quot;:1}
</code></pre>
</li>
<li>
<p>Evaluate a Nix expression from a file:</p>
<pre><code class="language-console"># nix eval -f ./my-nixpkgs hello.name
</code></pre>
</li>
<li>
<p>Get the current version of the <code>nixpkgs</code> flake:</p>
<pre><code class="language-console"># nix eval --raw nixpkgs#lib.version
</code></pre>
</li>
<li>
<p>Print the store path of the Hello package:</p>
<pre><code class="language-console"># nix eval --raw nixpkgs#hello
</code></pre>
</li>
<li>
<p>Get a list of checks in the <code>nix</code> flake:</p>
<pre><code class="language-console"># nix eval nix#checks.x86_64-linux --apply builtins.attrNames
</code></pre>
</li>
<li>
<p>Generate a directory with the specified contents:</p>
<pre><code class="language-console"># nix eval --write-to ./out --expr '{ foo = &quot;bar&quot;; subdir.bla = &quot;123&quot;; }'
# cat ./out/foo
bar
# cat ./out/subdir/bla
123

</code></pre>
</li>
</ul>
<h1 id="description-49"><a class="header" href="#description-49">Description</a></h1>
<p>This command evaluates the Nix expression <em>installable</em> and prints the
result on standard output.</p>
<h1 id="output-format"><a class="header" href="#output-format">Output format</a></h1>
<p><code>nix eval</code> can produce output in several formats:</p>
<ul>
<li>
<p>By default, the evaluation result is printed as a Nix expression.</p>
</li>
<li>
<p>With <code>--json</code>, the evaluation result is printed in JSON format. Note
that this fails if the result contains values that are not
representable as JSON, such as functions.</p>
</li>
<li>
<p>With <code>--raw</code>, the evaluation result must be a string, which is
printed verbatim, without any quoting.</p>
</li>
<li>
<p>With <code>--write-to</code> <em>path</em>, the evaluation result must be a string or
a nested attribute set whose leaf values are strings. These strings
are written to files named <em>path</em>/<em>attrpath</em>. <em>path</em> must not
already exist.</p>
</li>
</ul>
<h1 id="options-13"><a class="header" href="#options-13">Options</a></h1>
<ul>
<li>
<p><code>--apply</code> <em>expr</em></p>
<p>Apply the function <em>expr</em> to each argument.</p>
</li>
<li>
<p><code>--json</code></p>
<p>Produce output in JSON format, suitable for consumption by another program.</p>
</li>
<li>
<p><code>--raw</code></p>
<p>Print strings without quotes or escaping.</p>
</li>
<li>
<p><code>--read-only</code></p>
<p>Do not instantiate each evaluated derivation. This improves performance, but can cause errors when accessing store paths of derivations during evaluation.</p>
</li>
<li>
<p><code>--write-to</code> <em>path</em></p>
<p>Write a string or attrset of strings to <em>path</em>.</p>
</li>
</ul>
<p><strong>Common evaluation options:</strong></p>
<ul>
<li>
<p><code>--arg</code> <em>name</em> <em>expr</em></p>
<p>Pass the value <em>expr</em> as the argument <em>name</em> to Nix functions.</p>
</li>
<li>
<p><code>--argstr</code> <em>name</em> <em>string</em></p>
<p>Pass the string <em>string</em> as the argument <em>name</em> to Nix functions.</p>
</li>
<li>
<p><code>--debugger</code></p>
<p>Start an interactive environment if evaluation fails.</p>
</li>
<li>
<p><code>--eval-store</code> <em>store-url</em></p>
<p>The Nix store to use for evaluations.</p>
</li>
<li>
<p><code>--impure</code></p>
<p>Allow access to mutable paths and repositories.</p>
</li>
<li>
<p><code>--include</code> / <code>-I</code> <em>path</em></p>
<p>Add <em>path</em> to the Nix search path. The Nix search path is
initialized from the colon-separated <a href="command-ref/new-cli/../../command-ref/env-common.html#env-NIX_PATH"><code>NIX_PATH</code></a> environment
variable, and is used to look up the location of Nix expressions using <a href="command-ref/new-cli/../../language/values.html#type-path">paths</a> enclosed in angle
brackets (i.e., <code>&lt;nixpkgs&gt;</code>).</p>
<p>For instance, passing</p>
<pre><code>-I /home/eelco/Dev
-I /etc/nixos
</code></pre>
<p>will cause Nix to look for paths relative to <code>/home/eelco/Dev</code> and
<code>/etc/nixos</code>, in that order. This is equivalent to setting the
<code>NIX_PATH</code> environment variable to</p>
<pre><code>/home/eelco/Dev:/etc/nixos
</code></pre>
<p>It is also possible to match paths against a prefix. For example,
passing</p>
<pre><code>-I nixpkgs=/home/eelco/Dev/nixpkgs-branch
-I /etc/nixos
</code></pre>
<p>will cause Nix to search for <code>&lt;nixpkgs/path&gt;</code> in
<code>/home/eelco/Dev/nixpkgs-branch/path</code> and <code>/etc/nixos/nixpkgs/path</code>.</p>
<p>If a path in the Nix search path starts with <code>http://</code> or <code>https://</code>,
it is interpreted as the URL of a tarball that will be downloaded and
unpacked to a temporary location. The tarball must consist of a single
top-level directory. For example, passing</p>
<pre><code>-I nixpkgs=https://github.com/NixOS/nixpkgs/archive/master.tar.gz
</code></pre>
<p>tells Nix to download and use the current contents of the <code>master</code>
branch in the <code>nixpkgs</code> repository.</p>
<p>The URLs of the tarballs from the official <code>nixos.org</code> channels
(see <a href="command-ref/new-cli/../nix-channel.html">the manual page for <code>nix-channel</code></a>) can be
abbreviated as <code>channel:&lt;channel-name&gt;</code>. For instance, the
following two flags are equivalent:</p>
<pre><code>-I nixpkgs=channel:nixos-21.05
-I nixpkgs=https://nixos.org/channels/nixos-21.05/nixexprs.tar.xz
</code></pre>
<p>You can also fetch source trees using <a href="command-ref/new-cli/./nix3-flake.html#url-like-syntax">flake URLs</a> and add them to the
search path. For instance,</p>
<pre><code>-I nixpkgs=flake:nixpkgs
</code></pre>
<p>specifies that the prefix <code>nixpkgs</code> shall refer to the source tree
downloaded from the <code>nixpkgs</code> entry in the flake registry. Similarly,</p>
<pre><code>-I nixpkgs=flake:github:NixOS/nixpkgs/nixos-22.05
</code></pre>
<p>makes <code>&lt;nixpkgs&gt;</code> refer to a particular branch of the
<code>NixOS/nixpkgs</code> repository on GitHub.</p>
</li>
<li>
<p><code>--override-flake</code> <em>original-ref</em> <em>resolved-ref</em></p>
<p>Override the flake registries, redirecting <em>original-ref</em> to <em>resolved-ref</em>.</p>
</li>
</ul>
<p><strong>Common flake-related options:</strong></p>
<ul>
<li>
<p><code>--commit-lock-file</code></p>
<p>Commit changes to the flake's lock file.</p>
</li>
<li>
<p><code>--inputs-from</code> <em>flake-url</em></p>
<p>Use the inputs of the specified flake as registry entries.</p>
</li>
<li>
<p><code>--no-registries</code></p>
<p>Don't allow lookups in the flake registries. This option is deprecated; use <code>--no-use-registries</code>.</p>
</li>
<li>
<p><code>--no-update-lock-file</code></p>
<p>Do not allow any updates to the flake's lock file.</p>
</li>
<li>
<p><code>--no-write-lock-file</code></p>
<p>Do not write the flake's newly generated lock file.</p>
</li>
<li>
<p><code>--override-input</code> <em>input-path</em> <em>flake-url</em></p>
<p>Override a specific flake input (e.g. <code>dwarffs/nixpkgs</code>). This implies <code>--no-write-lock-file</code>.</p>
</li>
<li>
<p><code>--recreate-lock-file</code></p>
<p>Recreate the flake's lock file from scratch.</p>
</li>
<li>
<p><code>--update-input</code> <em>input-path</em></p>
<p>Update a specific flake input (ignoring its previous entry in the lock file).</p>
</li>
</ul>
<p><strong>Logging-related options:</strong></p>
<ul>
<li>
<p><code>--debug</code></p>
<p>Set the logging verbosity level to 'debug'.</p>
</li>
<li>
<p><code>--log-format</code> <em>format</em></p>
<p>Set the format of log output; one of <code>raw</code>, <code>internal-json</code>, <code>bar</code> or <code>bar-with-logs</code>.</p>
</li>
<li>
<p><code>--print-build-logs</code> / <code>-L</code></p>
<p>Print full build logs on standard error.</p>
</li>
<li>
<p><code>--quiet</code></p>
<p>Decrease the logging verbosity level.</p>
</li>
<li>
<p><code>--verbose</code> / <code>-v</code></p>
<p>Increase the logging verbosity level.</p>
</li>
</ul>
<p><strong>Miscellaneous global options:</strong></p>
<ul>
<li>
<p><code>--help</code></p>
<p>Show usage information.</p>
</li>
<li>
<p><code>--offline</code></p>
<p>Disable substituters and consider all previously downloaded files up-to-date.</p>
</li>
<li>
<p><code>--option</code> <em>name</em> <em>value</em></p>
<p>Set the Nix configuration setting <em>name</em> to <em>value</em> (overriding <code>nix.conf</code>).</p>
</li>
<li>
<p><code>--refresh</code></p>
<p>Consider all previously downloaded files out-of-date.</p>
</li>
<li>
<p><code>--version</code></p>
<p>Show version information.</p>
</li>
</ul>
<p><strong>Options that change the interpretation of installables:</strong></p>
<ul>
<li>
<p><code>--derivation</code></p>
<p>Operate on the <a href="command-ref/new-cli/../../glossary.html#gloss-store-derivation">store derivation</a> rather than its outputs.</p>
</li>
<li>
<p><code>--expr</code> <em>expr</em></p>
<p>Interpret installables as attribute paths relative to the Nix expression <em>expr</em>.</p>
</li>
<li>
<p><code>--file</code> / <code>-f</code> <em>file</em></p>
<p>Interpret installables as attribute paths relative to the Nix expression stored in <em>file</em>. If <em>file</em> is the character -, then a Nix expression will be read from standard input. Implies <code>--impure</code>.</p>
</li>
</ul>
<p><strong>Options to override configuration settings:</strong></p>
<ul>
<li>
<p><code>--accept-flake-config</code></p>
<p>Enable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--access-tokens</code> <em>value</em></p>
<p>Set the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--allow-dirty</code></p>
<p>Enable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--allow-import-from-derivation</code></p>
<p>Enable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--allow-new-privileges</code></p>
<p>Enable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--allow-symlinked-store</code></p>
<p>Enable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--allow-unsafe-native-code-during-evaluation</code></p>
<p>Enable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--allowed-impure-host-deps</code> <em>value</em></p>
<p>Set the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--allowed-uris</code> <em>value</em></p>
<p>Set the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--allowed-users</code> <em>value</em></p>
<p>Set the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--auto-allocate-uids</code></p>
<p>Enable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--auto-optimise-store</code></p>
<p>Enable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt</code> <em>value</em></p>
<p>Set the <code>bash-prompt</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-prefix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-prefix</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-suffix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-suffix</code> setting.</p>
</li>
<li>
<p><code>--build-hook</code> <em>value</em></p>
<p>Set the <code>build-hook</code> setting.</p>
</li>
<li>
<p><code>--build-poll-interval</code> <em>value</em></p>
<p>Set the <code>build-poll-interval</code> setting.</p>
</li>
<li>
<p><code>--build-users-group</code> <em>value</em></p>
<p>Set the <code>build-users-group</code> setting.</p>
</li>
<li>
<p><code>--builders</code> <em>value</em></p>
<p>Set the <code>builders</code> setting.</p>
</li>
<li>
<p><code>--builders-use-substitutes</code></p>
<p>Enable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--commit-lockfile-summary</code> <em>value</em></p>
<p>Set the <code>commit-lockfile-summary</code> setting.</p>
</li>
<li>
<p><code>--compress-build-log</code></p>
<p>Enable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--connect-timeout</code> <em>value</em></p>
<p>Set the <code>connect-timeout</code> setting.</p>
</li>
<li>
<p><code>--cores</code> <em>value</em></p>
<p>Set the <code>cores</code> setting.</p>
</li>
<li>
<p><code>--diff-hook</code> <em>value</em></p>
<p>Set the <code>diff-hook</code> setting.</p>
</li>
<li>
<p><code>--download-attempts</code> <em>value</em></p>
<p>Set the <code>download-attempts</code> setting.</p>
</li>
<li>
<p><code>--download-speed</code> <em>value</em></p>
<p>Set the <code>download-speed</code> setting.</p>
</li>
<li>
<p><code>--eval-cache</code></p>
<p>Enable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--experimental-features</code> <em>value</em></p>
<p>Set the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-access-tokens</code> <em>value</em></p>
<p>Append to the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-impure-host-deps</code> <em>value</em></p>
<p>Append to the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-uris</code> <em>value</em></p>
<p>Append to the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-users</code> <em>value</em></p>
<p>Append to the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--extra-experimental-features</code> <em>value</em></p>
<p>Append to the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-extra-platforms</code> <em>value</em></p>
<p>Append to the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-hashed-mirrors</code> <em>value</em></p>
<p>Append to the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--extra-ignored-acls</code> <em>value</em></p>
<p>Append to the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--extra-nix-path</code> <em>value</em></p>
<p>Append to the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--extra-platforms</code> <em>value</em></p>
<p>Set the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-plugin-files</code> <em>value</em></p>
<p>Append to the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--extra-sandbox-paths</code> <em>value</em></p>
<p>Append to the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--extra-secret-key-files</code> <em>value</em></p>
<p>Append to the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--extra-substituters</code> <em>value</em></p>
<p>Append to the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-system-features</code> <em>value</em></p>
<p>Append to the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-public-keys</code> <em>value</em></p>
<p>Append to the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-substituters</code> <em>value</em></p>
<p>Append to the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-users</code> <em>value</em></p>
<p>Append to the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--fallback</code></p>
<p>Enable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--filter-syscalls</code></p>
<p>Enable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--flake-registry</code> <em>value</em></p>
<p>Set the <code>flake-registry</code> setting.</p>
</li>
<li>
<p><code>--fsync-metadata</code></p>
<p>Enable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--gc-reserved-space</code> <em>value</em></p>
<p>Set the <code>gc-reserved-space</code> setting.</p>
</li>
<li>
<p><code>--hashed-mirrors</code> <em>value</em></p>
<p>Set the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--http-connections</code> <em>value</em></p>
<p>Set the <code>http-connections</code> setting.</p>
</li>
<li>
<p><code>--http2</code></p>
<p>Enable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--id-count</code> <em>value</em></p>
<p>Set the <code>id-count</code> setting.</p>
</li>
<li>
<p><code>--ignore-try</code></p>
<p>Enable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--ignored-acls</code> <em>value</em></p>
<p>Set the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--impersonate-linux-26</code></p>
<p>Enable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--keep-build-log</code></p>
<p>Enable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--keep-derivations</code></p>
<p>Enable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-env-derivations</code></p>
<p>Enable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-failed</code></p>
<p>Enable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--keep-going</code></p>
<p>Enable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--keep-outputs</code></p>
<p>Enable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--log-lines</code> <em>value</em></p>
<p>Set the <code>log-lines</code> setting.</p>
</li>
<li>
<p><code>--max-build-log-size</code> <em>value</em></p>
<p>Set the <code>max-build-log-size</code> setting.</p>
</li>
<li>
<p><code>--max-free</code> <em>value</em></p>
<p>Set the <code>max-free</code> setting.</p>
</li>
<li>
<p><code>--max-jobs</code> <em>value</em></p>
<p>Set the <code>max-jobs</code> setting.</p>
</li>
<li>
<p><code>--max-silent-time</code> <em>value</em></p>
<p>Set the <code>max-silent-time</code> setting.</p>
</li>
<li>
<p><code>--min-free</code> <em>value</em></p>
<p>Set the <code>min-free</code> setting.</p>
</li>
<li>
<p><code>--min-free-check-interval</code> <em>value</em></p>
<p>Set the <code>min-free-check-interval</code> setting.</p>
</li>
<li>
<p><code>--nar-buffer-size</code> <em>value</em></p>
<p>Set the <code>nar-buffer-size</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-negative-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-negative-ttl</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-positive-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-positive-ttl</code> setting.</p>
</li>
<li>
<p><code>--netrc-file</code> <em>value</em></p>
<p>Set the <code>netrc-file</code> setting.</p>
</li>
<li>
<p><code>--nix-path</code> <em>value</em></p>
<p>Set the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--no-accept-flake-config</code></p>
<p>Disable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--no-allow-dirty</code></p>
<p>Disable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--no-allow-import-from-derivation</code></p>
<p>Disable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--no-allow-new-privileges</code></p>
<p>Disable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--no-allow-symlinked-store</code></p>
<p>Disable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--no-allow-unsafe-native-code-during-evaluation</code></p>
<p>Disable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--no-auto-allocate-uids</code></p>
<p>Disable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--no-auto-optimise-store</code></p>
<p>Disable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--no-builders-use-substitutes</code></p>
<p>Disable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--no-compress-build-log</code></p>
<p>Disable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-eval-cache</code></p>
<p>Disable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--no-fallback</code></p>
<p>Disable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--no-filter-syscalls</code></p>
<p>Disable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--no-fsync-metadata</code></p>
<p>Disable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--no-http2</code></p>
<p>Disable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--no-ignore-try</code></p>
<p>Disable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--no-impersonate-linux-26</code></p>
<p>Disable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--no-keep-build-log</code></p>
<p>Disable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-keep-derivations</code></p>
<p>Disable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-env-derivations</code></p>
<p>Disable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-failed</code></p>
<p>Disable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--no-keep-going</code></p>
<p>Disable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--no-keep-outputs</code></p>
<p>Disable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--no-preallocate-contents</code></p>
<p>Disable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--no-print-missing</code></p>
<p>Disable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--no-pure-eval</code></p>
<p>Disable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--no-require-sigs</code></p>
<p>Disable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--no-restrict-eval</code></p>
<p>Disable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--no-run-diff-hook</code></p>
<p>Disable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--no-sandbox</code></p>
<p>Disable sandboxing.</p>
</li>
<li>
<p><code>--no-sandbox-fallback</code></p>
<p>Disable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--no-show-trace</code></p>
<p>Disable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--no-substitute</code></p>
<p>Disable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--no-sync-before-registering</code></p>
<p>Disable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--no-trace-function-calls</code></p>
<p>Disable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--no-trace-verbose</code></p>
<p>Disable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--no-use-case-hack</code></p>
<p>Disable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--no-use-cgroups</code></p>
<p>Disable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--no-use-registries</code></p>
<p>Disable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--no-use-sqlite-wal</code></p>
<p>Disable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--no-warn-dirty</code></p>
<p>Disable the <code>warn-dirty</code> setting.</p>
</li>
<li>
<p><code>--plugin-files</code> <em>value</em></p>
<p>Set the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--post-build-hook</code> <em>value</em></p>
<p>Set the <code>post-build-hook</code> setting.</p>
</li>
<li>
<p><code>--pre-build-hook</code> <em>value</em></p>
<p>Set the <code>pre-build-hook</code> setting.</p>
</li>
<li>
<p><code>--preallocate-contents</code></p>
<p>Enable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--print-missing</code></p>
<p>Enable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--pure-eval</code></p>
<p>Enable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--relaxed-sandbox</code></p>
<p>Enable sandboxing, but allow builds to disable it.</p>
</li>
<li>
<p><code>--require-sigs</code></p>
<p>Enable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--restrict-eval</code></p>
<p>Enable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--run-diff-hook</code></p>
<p>Enable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--sandbox</code></p>
<p>Enable sandboxing.</p>
</li>
<li>
<p><code>--sandbox-build-dir</code> <em>value</em></p>
<p>Set the <code>sandbox-build-dir</code> setting.</p>
</li>
<li>
<p><code>--sandbox-dev-shm-size</code> <em>value</em></p>
<p>Set the <code>sandbox-dev-shm-size</code> setting.</p>
</li>
<li>
<p><code>--sandbox-fallback</code></p>
<p>Enable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--sandbox-paths</code> <em>value</em></p>
<p>Set the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--secret-key-files</code> <em>value</em></p>
<p>Set the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--show-trace</code></p>
<p>Enable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--stalled-download-timeout</code> <em>value</em></p>
<p>Set the <code>stalled-download-timeout</code> setting.</p>
</li>
<li>
<p><code>--start-id</code> <em>value</em></p>
<p>Set the <code>start-id</code> setting.</p>
</li>
<li>
<p><code>--store</code> <em>value</em></p>
<p>Set the <code>store</code> setting.</p>
</li>
<li>
<p><code>--substitute</code></p>
<p>Enable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--substituters</code> <em>value</em></p>
<p>Set the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--sync-before-registering</code></p>
<p>Enable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--system</code> <em>value</em></p>
<p>Set the <code>system</code> setting.</p>
</li>
<li>
<p><code>--system-features</code> <em>value</em></p>
<p>Set the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--tarball-ttl</code> <em>value</em></p>
<p>Set the <code>tarball-ttl</code> setting.</p>
</li>
<li>
<p><code>--timeout</code> <em>value</em></p>
<p>Set the <code>timeout</code> setting.</p>
</li>
<li>
<p><code>--trace-function-calls</code></p>
<p>Enable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--trace-verbose</code></p>
<p>Enable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--trusted-public-keys</code> <em>value</em></p>
<p>Set the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--trusted-substituters</code> <em>value</em></p>
<p>Set the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--trusted-users</code> <em>value</em></p>
<p>Set the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--use-case-hack</code></p>
<p>Enable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--use-cgroups</code></p>
<p>Enable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--use-registries</code></p>
<p>Enable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--use-sqlite-wal</code></p>
<p>Enable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--user-agent-suffix</code> <em>value</em></p>
<p>Set the <code>user-agent-suffix</code> setting.</p>
</li>
<li>
<p><code>--warn-dirty</code></p>
<p>Enable the <code>warn-dirty</code> setting.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p><strong>Warning</strong> <br />
This program is <strong>experimental</strong> and its interface is subject to change.</p>
</blockquote>
<h1 id="name-21"><a class="header" href="#name-21">Name</a></h1>
<p><code>nix flake</code> - manage Nix flakes</p>
<h1 id="synopsis-52"><a class="header" href="#synopsis-52">Synopsis</a></h1>
<p><code>nix flake</code> [<em>option</em>...] <em>subcommand</em></p>
<p>where <em>subcommand</em> is one of the following:</p>
<ul>
<li><a href="command-ref/new-cli/./nix3-flake-archive.html"><code>nix flake archive</code></a> - copy a flake and all its inputs to a store</li>
<li><a href="command-ref/new-cli/./nix3-flake-check.html"><code>nix flake check</code></a> - check whether the flake evaluates and run its tests</li>
<li><a href="command-ref/new-cli/./nix3-flake-clone.html"><code>nix flake clone</code></a> - clone flake repository</li>
<li><a href="command-ref/new-cli/./nix3-flake-info.html"><code>nix flake info</code></a> - show flake metadata</li>
<li><a href="command-ref/new-cli/./nix3-flake-init.html"><code>nix flake init</code></a> - create a flake in the current directory from a template</li>
<li><a href="command-ref/new-cli/./nix3-flake-lock.html"><code>nix flake lock</code></a> - create missing lock file entries</li>
<li><a href="command-ref/new-cli/./nix3-flake-metadata.html"><code>nix flake metadata</code></a> - show flake metadata</li>
<li><a href="command-ref/new-cli/./nix3-flake-new.html"><code>nix flake new</code></a> - create a flake in the specified directory from a template</li>
<li><a href="command-ref/new-cli/./nix3-flake-prefetch.html"><code>nix flake prefetch</code></a> - download the source tree denoted by a flake reference into the Nix store</li>
<li><a href="command-ref/new-cli/./nix3-flake-show.html"><code>nix flake show</code></a> - show the outputs provided by a flake</li>
<li><a href="command-ref/new-cli/./nix3-flake-update.html"><code>nix flake update</code></a> - update flake lock file</li>
</ul>
<h1 id="description-50"><a class="header" href="#description-50">Description</a></h1>
<p><code>nix flake</code> provides subcommands for creating, modifying and querying
<em>Nix flakes</em>. Flakes are the unit for packaging Nix code in a
reproducible and discoverable way. They can have dependencies on other
flakes, making it possible to have multi-repository Nix projects.</p>
<p>A flake is a filesystem tree (typically fetched from a Git repository
or a tarball) that contains a file named <code>flake.nix</code> in the root
directory. <code>flake.nix</code> specifies some metadata about the flake such as
dependencies (called <em>inputs</em>), as well as its <em>outputs</em> (the Nix
values such as packages or NixOS modules provided by the flake).</p>
<h1 id="flake-references"><a class="header" href="#flake-references">Flake references</a></h1>
<p>Flake references (<em>flakerefs</em>) are a way to specify the location of a
flake. These have two different forms:</p>
<h2 id="attribute-set-representation"><a class="header" href="#attribute-set-representation">Attribute set representation</a></h2>
<p>Example:</p>
<pre><code class="language-nix">{
  type = &quot;github&quot;;
  owner = &quot;NixOS&quot;;
  repo = &quot;nixpkgs&quot;;
}
</code></pre>
<p>The only required attribute is <code>type</code>. The supported types are
listed below.</p>
<h2 id="url-like-syntax"><a class="header" href="#url-like-syntax">URL-like syntax</a></h2>
<p>Example:</p>
<pre><code>github:NixOS/nixpkgs
</code></pre>
<p>These are used on the command line as a more convenient alternative
to the attribute set representation. For instance, in the command</p>
<pre><code class="language-console"># nix build github:NixOS/nixpkgs#hello
</code></pre>
<p><code>github:NixOS/nixpkgs</code> is a flake reference (while <code>hello</code> is an
output attribute). They are also allowed in the <code>inputs</code> attribute
of a flake, e.g.</p>
<pre><code class="language-nix">inputs.nixpkgs.url = github:NixOS/nixpkgs;
</code></pre>
<p>is equivalent to</p>
<pre><code class="language-nix">inputs.nixpkgs = {
  type = &quot;github&quot;;
  owner = &quot;NixOS&quot;;
  repo = &quot;nixpkgs&quot;;
};
</code></pre>
<h3 id="examples-31"><a class="header" href="#examples-31">Examples</a></h3>
<p>Here are some examples of flake references in their URL-like representation:</p>
<ul>
<li><code>.</code>: The flake in the current directory.</li>
<li><code>/home/alice/src/patchelf</code>: A flake in some other directory.</li>
<li><code>nixpkgs</code>: The <code>nixpkgs</code> entry in the flake registry.</li>
<li><code>nixpkgs/a3a3dda3bacf61e8a39258a0ed9c924eeca8e293</code>: The <code>nixpkgs</code>
entry in the flake registry, with its Git revision overridden to a
specific value.</li>
<li><code>github:NixOS/nixpkgs</code>: The <code>master</code> branch of the <code>NixOS/nixpkgs</code>
repository on GitHub.</li>
<li><code>github:NixOS/nixpkgs/nixos-20.09</code>: The <code>nixos-20.09</code> branch of the
<code>nixpkgs</code> repository.</li>
<li><code>github:NixOS/nixpkgs/a3a3dda3bacf61e8a39258a0ed9c924eeca8e293</code>: A
specific revision of the <code>nixpkgs</code> repository.</li>
<li><code>github:edolstra/nix-warez?dir=blender</code>: A flake in a subdirectory
of a GitHub repository.</li>
<li><code>git+https://github.com/NixOS/patchelf</code>: A Git repository.</li>
<li><code>git+https://github.com/NixOS/patchelf?ref=master</code>: A specific
branch of a Git repository.</li>
<li><code>git+https://github.com/NixOS/patchelf?ref=master&amp;rev=f34751b88bd07d7f44f5cd3200fb4122bf916c7e</code>:
A specific branch <em>and</em> revision of a Git repository.</li>
<li><code>https://github.com/NixOS/patchelf/archive/master.tar.gz</code>: A tarball
flake.</li>
</ul>
<h2 id="flake-reference-attributes"><a class="header" href="#flake-reference-attributes">Flake reference attributes</a></h2>
<p>The following generic flake reference attributes are supported:</p>
<ul>
<li>
<p><code>dir</code>: The subdirectory of the flake in which <code>flake.nix</code> is
located. This parameter enables having multiple flakes in a
repository or tarball. The default is the root directory of the
flake.</p>
</li>
<li>
<p><code>narHash</code>: The hash of the NAR serialisation (in SRI format) of the
contents of the flake. This is useful for flake types such as
tarballs that lack a unique content identifier such as a Git commit
hash.</p>
</li>
</ul>
<p>In addition, the following attributes are common to several flake
reference types:</p>
<ul>
<li>
<p><code>rev</code>: A Git or Mercurial commit hash.</p>
</li>
<li>
<p><code>ref</code>: A Git or Mercurial branch or tag name.</p>
</li>
</ul>
<p>Finally, some attribute are typically not specified by the user, but
can occur in <em>locked</em> flake references and are available to Nix code:</p>
<ul>
<li>
<p><code>revCount</code>: The number of ancestors of the commit <code>rev</code>.</p>
</li>
<li>
<p><code>lastModified</code>: The timestamp (in seconds since the Unix epoch) of
the last modification of this version of the flake. For
Git/Mercurial flakes, this is the commit time of commit <em>rev</em>, while
for tarball flakes, it's the most recent timestamp of any file
inside the tarball.</p>
</li>
</ul>
<h2 id="types"><a class="header" href="#types">Types</a></h2>
<p>Currently the <code>type</code> attribute can be one of the following:</p>
<ul>
<li>
<p><code>path</code>: arbitrary local directories, or local Git trees. The
required attribute <code>path</code> specifies the path of the flake. The URL
form is</p>
<pre><code>[path:]&lt;path&gt;(\?&lt;params)?
</code></pre>
<p>where <em>path</em> is an absolute path.</p>
<p><em>path</em> must be a directory in the file system containing a file
named <code>flake.nix</code>.</p>
<p><em>path</em> generally must be an absolute path. However, on the command
line, it can be a relative path (e.g. <code>.</code> or <code>./foo</code>) which is
interpreted as relative to the current directory. In this case, it
must start with <code>.</code> to avoid ambiguity with registry lookups
(e.g. <code>nixpkgs</code> is a registry lookup; <code>./nixpkgs</code> is a relative
path).</p>
</li>
<li>
<p><code>git</code>: Git repositories. The location of the repository is specified
by the attribute <code>url</code>.</p>
<p>They have the URL form</p>
<pre><code>git(+http|+https|+ssh|+git|+file|):(//&lt;server&gt;)?&lt;path&gt;(\?&lt;params&gt;)?
</code></pre>
<p>The <code>ref</code> attribute defaults to resolving the <code>HEAD</code> reference.</p>
<p>The <code>rev</code> attribute must denote a commit that exists in the branch
or tag specified by the <code>ref</code> attribute, since Nix doesn't do a full
clone of the remote repository by default (and the Git protocol
doesn't allow fetching a <code>rev</code> without a known <code>ref</code>). The default
is the commit currently pointed to by <code>ref</code>.</p>
<p>When <code>git+file</code> is used without specifying <code>ref</code> or <code>rev</code>, files are
fetched directly from the local <code>path</code> as long as they have been added
to the Git repository. If there are uncommitted changes, the reference
is treated as dirty and a warning is printed.</p>
<p>For example, the following are valid Git flake references:</p>
<ul>
<li><code>git+https://example.org/my/repo</code></li>
<li><code>git+https://example.org/my/repo?dir=flake1</code></li>
<li><code>git+ssh://git@github.com/NixOS/nix?ref=v1.2.3</code></li>
<li><code>git://github.com/edolstra/dwarffs?ref=unstable&amp;rev=e486d8d40e626a20e06d792db8cc5ac5aba9a5b4</code></li>
<li><code>git+file:///home/my-user/some-repo/some-repo</code></li>
</ul>
</li>
<li>
<p><code>mercurial</code>: Mercurial repositories. The URL form is similar to the
<code>git</code> type, except that the URL schema must be one of <code>hg+http</code>,
<code>hg+https</code>, <code>hg+ssh</code> or <code>hg+file</code>.</p>
</li>
<li>
<p><code>tarball</code>: Tarballs. The location of the tarball is specified by the
attribute <code>url</code>.</p>
<p>In URL form, the schema must be <code>tarball+http://</code>, <code>tarball+https://</code> or <code>tarball+file://</code>.
If the extension corresponds to a known archive format (<code>.zip</code>, <code>.tar</code>,
<code>.tgz</code>, <code>.tar.gz</code>, <code>.tar.xz</code>, <code>.tar.bz2</code> or <code>.tar.zst</code>), then the <code>tarball+</code>
can be dropped.</p>
</li>
<li>
<p><code>file</code>: Plain files or directory tarballs, either over http(s) or from the local
disk.</p>
<p>In URL form, the schema must be <code>file+http://</code>, <code>file+https://</code> or <code>file+file://</code>.
If the extension doesn’t correspond to a known archive format (as defined by the
<code>tarball</code> fetcher), then the <code>file+</code> prefix can be dropped.</p>
</li>
<li>
<p><code>github</code>: A more efficient way to fetch repositories from
GitHub. The following attributes are required:</p>
<ul>
<li>
<p><code>owner</code>: The owner of the repository.</p>
</li>
<li>
<p><code>repo</code>: The name of the repository.</p>
</li>
</ul>
<p>These are downloaded as tarball archives, rather than
through Git. This is often much faster and uses less disk space
since it doesn't require fetching the entire history of the
repository. On the other hand, it doesn't allow incremental fetching
(but full downloads are often faster than incremental fetches!).</p>
<p>The URL syntax for <code>github</code> flakes is:</p>
<pre><code>github:&lt;owner&gt;/&lt;repo&gt;(/&lt;rev-or-ref&gt;)?(\?&lt;params&gt;)?
</code></pre>
<p><code>&lt;rev-or-ref&gt;</code> specifies the name of a branch or tag (<code>ref</code>), or a
commit hash (<code>rev</code>). Note that unlike Git, GitHub allows fetching by
commit hash without specifying a branch or tag.</p>
<p>Some examples:</p>
<ul>
<li><code>github:edolstra/dwarffs</code></li>
<li><code>github:edolstra/dwarffs/unstable</code></li>
<li><code>github:edolstra/dwarffs/d3f2baba8f425779026c6ec04021b2e927f61e31</code></li>
</ul>
</li>
<li>
<p><code>sourcehut</code>: Similar to <code>github</code>, is a more efficient way to fetch
SourceHut repositories. The following attributes are required:</p>
<ul>
<li>
<p><code>owner</code>: The owner of the repository (including leading <code>~</code>).</p>
</li>
<li>
<p><code>repo</code>: The name of the repository.</p>
</li>
</ul>
<p>Like <code>github</code>, these are downloaded as tarball archives.</p>
<p>The URL syntax for <code>sourcehut</code> flakes is:</p>
<p><code>sourcehut:&lt;owner&gt;/&lt;repo&gt;(/&lt;rev-or-ref&gt;)?(\?&lt;params&gt;)?</code></p>
<p><code>&lt;rev-or-ref&gt;</code> works the same as <code>github</code>. Either a branch or tag name
(<code>ref</code>), or a commit hash (<code>rev</code>) can be specified.</p>
<p>Since SourceHut allows for self-hosting, you can specify <code>host</code> as
a parameter, to point to any instances other than <code>git.sr.ht</code>.</p>
<p>Currently, <code>ref</code> name resolution only works for Git repositories.
You can refer to Mercurial repositories by simply changing <code>host</code> to
<code>hg.sr.ht</code> (or any other Mercurial instance). With the caveat
that you must explicitly specify a commit hash (<code>rev</code>).</p>
<p>Some examples:</p>
<ul>
<li><code>sourcehut:~misterio/nix-colors</code></li>
<li><code>sourcehut:~misterio/nix-colors/main</code></li>
<li><code>sourcehut:~misterio/nix-colors?host=git.example.org</code></li>
<li><code>sourcehut:~misterio/nix-colors/182b4b8709b8ffe4e9774a4c5d6877bf6bb9a21c</code></li>
<li><code>sourcehut:~misterio/nix-colors/21c1a380a6915d890d408e9f22203436a35bb2de?host=hg.sr.ht</code></li>
</ul>
</li>
<li>
<p><code>indirect</code>: Indirections through the flake registry. These have the
form</p>
<pre><code>[flake:]&lt;flake-id&gt;(/&lt;rev-or-ref&gt;(/rev)?)?
</code></pre>
<p>These perform a lookup of <code>&lt;flake-id&gt;</code> in the flake registry. For
example, <code>nixpkgs</code> and <code>nixpkgs/release-20.09</code> are indirect flake
references. The specified <code>rev</code> and/or <code>ref</code> are merged with the
entry in the registry; see <a href="command-ref/new-cli/./nix3-registry.html">nix registry</a> for
details.</p>
</li>
</ul>
<h1 id="flake-format"><a class="header" href="#flake-format">Flake format</a></h1>
<p>As an example, here is a simple <code>flake.nix</code> that depends on the
Nixpkgs flake and provides a single package (i.e. an installable
derivation):</p>
<pre><code class="language-nix">{
  description = &quot;A flake for building Hello World&quot;;

  inputs.nixpkgs.url = github:NixOS/nixpkgs/nixos-20.03;

  outputs = { self, nixpkgs }: {

    packages.x86_64-linux.default =
      # Notice the reference to nixpkgs here.
      with import nixpkgs { system = &quot;x86_64-linux&quot;; };
      stdenv.mkDerivation {
        name = &quot;hello&quot;;
        src = self;
        buildPhase = &quot;gcc -o hello ./hello.c&quot;;
        installPhase = &quot;mkdir -p $out/bin; install -t $out/bin hello&quot;;
      };

  };
}
</code></pre>
<p>The following attributes are supported in <code>flake.nix</code>:</p>
<ul>
<li>
<p><code>description</code>: A short, one-line description of the flake.</p>
</li>
<li>
<p><code>inputs</code>: An attrset specifying the dependencies of the flake
(described below).</p>
</li>
<li>
<p><code>outputs</code>: A function that, given an attribute set containing the
outputs of each of the input flakes keyed by their identifier,
yields the Nix values provided by this flake. Thus, in the example
above, <code>inputs.nixpkgs</code> contains the result of the call to the
<code>outputs</code> function of the <code>nixpkgs</code> flake.</p>
<p>In addition to the outputs of each input, each input in <code>inputs</code>
also contains some metadata about the inputs. These are:</p>
<ul>
<li>
<p><code>outPath</code>: The path in the Nix store of the flake's source tree.</p>
</li>
<li>
<p><code>rev</code>: The commit hash of the flake's repository, if applicable.</p>
</li>
<li>
<p><code>revCount</code>: The number of ancestors of the revision <code>rev</code>. This is
not available for <code>github</code> repositories, since they're fetched as
tarballs rather than as Git repositories.</p>
</li>
<li>
<p><code>lastModifiedDate</code>: The commit time of the revision <code>rev</code>, in the
format <code>%Y%m%d%H%M%S</code> (e.g. <code>20181231100934</code>). Unlike <code>revCount</code>,
this is available for both Git and GitHub repositories, so it's
useful for generating (hopefully) monotonically increasing version
strings.</p>
</li>
<li>
<p><code>lastModified</code>: The commit time of the revision <code>rev</code> as an integer
denoting the number of seconds since 1970.</p>
</li>
<li>
<p><code>narHash</code>: The SHA-256 (in SRI format) of the NAR serialization of
the flake's source tree.</p>
</li>
</ul>
<p>The value returned by the <code>outputs</code> function must be an attribute
set. The attributes can have arbitrary values; however, various
<code>nix</code> subcommands require specific attributes to have a specific
value (e.g. <code>packages.x86_64-linux</code> must be an attribute set of
derivations built for the <code>x86_64-linux</code> platform).</p>
</li>
<li>
<p><code>nixConfig</code>: a set of <code>nix.conf</code> options to be set when evaluating any
part of a flake. In the interests of security, only a small set of
whitelisted options (currently <code>bash-prompt</code>, <code>bash-prompt-prefix</code>,
<code>bash-prompt-suffix</code>, and <code>flake-registry</code>) are allowed to be set without
confirmation so long as <code>accept-flake-config</code> is not set in the global
configuration.</p>
</li>
</ul>
<h2 id="flake-inputs"><a class="header" href="#flake-inputs">Flake inputs</a></h2>
<p>The attribute <code>inputs</code> specifies the dependencies of a flake, as an
attrset mapping input names to flake references. For example, the
following specifies a dependency on the <code>nixpkgs</code> and <code>import-cargo</code>
repositories:</p>
<pre><code class="language-nix"># A GitHub repository.
inputs.import-cargo = {
  type = &quot;github&quot;;
  owner = &quot;edolstra&quot;;
  repo = &quot;import-cargo&quot;;
};

# An indirection through the flake registry.
inputs.nixpkgs = {
  type = &quot;indirect&quot;;
  id = &quot;nixpkgs&quot;;
};
</code></pre>
<p>Alternatively, you can use the URL-like syntax:</p>
<pre><code class="language-nix">inputs.import-cargo.url = github:edolstra/import-cargo;
inputs.nixpkgs.url = &quot;nixpkgs&quot;;
</code></pre>
<p>Each input is fetched, evaluated and passed to the <code>outputs</code> function
as a set of attributes with the same name as the corresponding
input. The special input named <code>self</code> refers to the outputs and source
tree of <em>this</em> flake. Thus, a typical <code>outputs</code> function looks like
this:</p>
<pre><code class="language-nix">outputs = { self, nixpkgs, import-cargo }: {
  ... outputs ...
};
</code></pre>
<p>It is also possible to omit an input entirely and <em>only</em> list it as
expected function argument to <code>outputs</code>. Thus,</p>
<pre><code class="language-nix">outputs = { self, nixpkgs }: ...;
</code></pre>
<p>without an <code>inputs.nixpkgs</code> attribute is equivalent to</p>
<pre><code class="language-nix">inputs.nixpkgs = {
  type = &quot;indirect&quot;;
  id = &quot;nixpkgs&quot;;
};
</code></pre>
<p>Repositories that don't contain a <code>flake.nix</code> can also be used as
inputs, by setting the input's <code>flake</code> attribute to <code>false</code>:</p>
<pre><code class="language-nix">inputs.grcov = {
  type = &quot;github&quot;;
  owner = &quot;mozilla&quot;;
  repo = &quot;grcov&quot;;
  flake = false;
};

outputs = { self, nixpkgs, grcov }: {
  packages.x86_64-linux.grcov = stdenv.mkDerivation {
    src = grcov;
    ...
  };
};
</code></pre>
<p>Transitive inputs can be overridden from a <code>flake.nix</code> file. For
example, the following overrides the <code>nixpkgs</code> input of the <code>nixops</code>
input:</p>
<pre><code class="language-nix">inputs.nixops.inputs.nixpkgs = {
  type = &quot;github&quot;;
  owner = &quot;my-org&quot;;
  repo = &quot;nixpkgs&quot;;
};
</code></pre>
<p>It is also possible to &quot;inherit&quot; an input from another input. This is
useful to minimize flake dependencies. For example, the following sets
the <code>nixpkgs</code> input of the top-level flake to be equal to the
<code>nixpkgs</code> input of the <code>dwarffs</code> input of the top-level flake:</p>
<pre><code class="language-nix">inputs.nixpkgs.follows = &quot;dwarffs/nixpkgs&quot;;
</code></pre>
<p>The value of the <code>follows</code> attribute is a <code>/</code>-separated sequence of
input names denoting the path of inputs to be followed from the root
flake.</p>
<p>Overrides and <code>follows</code> can be combined, e.g.</p>
<pre><code class="language-nix">inputs.nixops.inputs.nixpkgs.follows = &quot;dwarffs/nixpkgs&quot;;
</code></pre>
<p>sets the <code>nixpkgs</code> input of <code>nixops</code> to be the same as the <code>nixpkgs</code>
input of <code>dwarffs</code>. It is worth noting, however, that it is generally
not useful to eliminate transitive <code>nixpkgs</code> flake inputs in this
way. Most flakes provide their functionality through Nixpkgs overlays
or NixOS modules, which are composed into the top-level flake's
<code>nixpkgs</code> input; so their own <code>nixpkgs</code> input is usually irrelevant.</p>
<h1 id="lock-files"><a class="header" href="#lock-files">Lock files</a></h1>
<p>Inputs specified in <code>flake.nix</code> are typically &quot;unlocked&quot; in the sense
that they don't specify an exact revision. To ensure reproducibility,
Nix will automatically generate and use a <em>lock file</em> called
<code>flake.lock</code> in the flake's directory. The lock file contains a graph
structure isomorphic to the graph of dependencies of the root
flake. Each node in the graph (except the root node) maps the
(usually) unlocked input specifications in <code>flake.nix</code> to locked input
specifications. Each node also contains some metadata, such as the
dependencies (outgoing edges) of the node.</p>
<p>For example, if <code>flake.nix</code> has the inputs in the example above, then
the resulting lock file might be:</p>
<pre><code class="language-json">{
  &quot;version&quot;: 7,
  &quot;root&quot;: &quot;n1&quot;,
  &quot;nodes&quot;: {
    &quot;n1&quot;: {
      &quot;inputs&quot;: {
        &quot;nixpkgs&quot;: &quot;n2&quot;,
        &quot;import-cargo&quot;: &quot;n3&quot;,
        &quot;grcov&quot;: &quot;n4&quot;
      }
    },
    &quot;n2&quot;: {
      &quot;inputs&quot;: {},
      &quot;locked&quot;: {
        &quot;owner&quot;: &quot;edolstra&quot;,
        &quot;repo&quot;: &quot;nixpkgs&quot;,
        &quot;rev&quot;: &quot;7f8d4b088e2df7fdb6b513bc2d6941f1d422a013&quot;,
        &quot;type&quot;: &quot;github&quot;,
        &quot;lastModified&quot;: 1580555482,
        &quot;narHash&quot;: &quot;sha256-OnpEWzNxF/AU4KlqBXM2s5PWvfI5/BS6xQrPvkF5tO8=&quot;
      },
      &quot;original&quot;: {
        &quot;id&quot;: &quot;nixpkgs&quot;,
        &quot;type&quot;: &quot;indirect&quot;
      }
    },
    &quot;n3&quot;: {
      &quot;inputs&quot;: {},
      &quot;locked&quot;: {
        &quot;owner&quot;: &quot;edolstra&quot;,
        &quot;repo&quot;: &quot;import-cargo&quot;,
        &quot;rev&quot;: &quot;8abf7b3a8cbe1c8a885391f826357a74d382a422&quot;,
        &quot;type&quot;: &quot;github&quot;,
        &quot;lastModified&quot;: 1567183309,
        &quot;narHash&quot;: &quot;sha256-wIXWOpX9rRjK5NDsL6WzuuBJl2R0kUCnlpZUrASykSc=&quot;
      },
      &quot;original&quot;: {
        &quot;owner&quot;: &quot;edolstra&quot;,
        &quot;repo&quot;: &quot;import-cargo&quot;,
        &quot;type&quot;: &quot;github&quot;
      }
    },
    &quot;n4&quot;: {
      &quot;inputs&quot;: {},
      &quot;locked&quot;: {
        &quot;owner&quot;: &quot;mozilla&quot;,
        &quot;repo&quot;: &quot;grcov&quot;,
        &quot;rev&quot;: &quot;989a84bb29e95e392589c4e73c29189fd69a1d4e&quot;,
        &quot;type&quot;: &quot;github&quot;,
        &quot;lastModified&quot;: 1580729070,
        &quot;narHash&quot;: &quot;sha256-235uMxYlHxJ5y92EXZWAYEsEb6mm+b069GAd+BOIOxI=&quot;
      },
      &quot;original&quot;: {
        &quot;owner&quot;: &quot;mozilla&quot;,
        &quot;repo&quot;: &quot;grcov&quot;,
        &quot;type&quot;: &quot;github&quot;
      },
      &quot;flake&quot;: false
    }
  }
}
</code></pre>
<p>This graph has 4 nodes: the root flake, and its 3 dependencies. The
nodes have arbitrary labels (e.g. <code>n1</code>). The label of the root node of
the graph is specified by the <code>root</code> attribute. Nodes contain the
following fields:</p>
<ul>
<li>
<p><code>inputs</code>: The dependencies of this node, as a mapping from input
names (e.g. <code>nixpkgs</code>) to node labels (e.g. <code>n2</code>).</p>
</li>
<li>
<p><code>original</code>: The original input specification from <code>flake.lock</code>, as a
set of <code>builtins.fetchTree</code> arguments.</p>
</li>
<li>
<p><code>locked</code>: The locked input specification, as a set of
<code>builtins.fetchTree</code> arguments. Thus, in the example above, when we
build this flake, the input <code>nixpkgs</code> is mapped to revision
<code>7f8d4b088e2df7fdb6b513bc2d6941f1d422a013</code> of the <code>edolstra/nixpkgs</code>
repository on GitHub.</p>
<p>It also includes the attribute <code>narHash</code>, specifying the expected
contents of the tree in the Nix store (as computed by <code>nix hash-path</code>), and may include input-type-specific attributes such as
the <code>lastModified</code> or <code>revCount</code>. The main reason for these
attributes is to allow flake inputs to be substituted from a binary
cache: <code>narHash</code> allows the store path to be computed, while the
other attributes are necessary because they provide information not
stored in the store path.</p>
</li>
<li>
<p><code>flake</code>: A Boolean denoting whether this is a flake or non-flake
dependency. Corresponds to the <code>flake</code> attribute in the <code>inputs</code>
attribute in <code>flake.nix</code>.</p>
</li>
</ul>
<p>The <code>original</code> and <code>locked</code> attributes are omitted for the root
node. This is because we cannot record the commit hash or content hash
of the root flake, since modifying <code>flake.lock</code> will invalidate these.</p>
<p>The graph representation of lock files allows circular dependencies
between flakes. For example, here are two flakes that reference each
other:</p>
<pre><code class="language-nix">{
  inputs.b = ... location of flake B ...;
  # Tell the 'b' flake not to fetch 'a' again, to ensure its 'a' is
  # *this* 'a'.
  inputs.b.inputs.a.follows = &quot;&quot;;
  outputs = { self, b }: {
    foo = 123 + b.bar;
    xyzzy = 1000;
  };
}
</code></pre>
<p>and</p>
<pre><code class="language-nix">{
  inputs.a = ... location of flake A ...;
  inputs.a.inputs.b.follows = &quot;&quot;;
  outputs = { self, a }: {
    bar = 456 + a.xyzzy;
  };
}
</code></pre>
<p>Lock files transitively lock direct as well as indirect
dependencies. That is, if a lock file exists and is up to date, Nix
will not look at the lock files of dependencies. However, lock file
generation itself <em>does</em> use the lock files of dependencies by
default.</p>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p><strong>Warning</strong> <br />
This program is <strong>experimental</strong> and its interface is subject to change.</p>
</blockquote>
<h1 id="name-22"><a class="header" href="#name-22">Name</a></h1>
<p><code>nix flake archive</code> - copy a flake and all its inputs to a store</p>
<h1 id="synopsis-53"><a class="header" href="#synopsis-53">Synopsis</a></h1>
<p><code>nix flake archive</code> [<em>option</em>...] <em>flake-url</em></p>
<h1 id="examples-32"><a class="header" href="#examples-32">Examples</a></h1>
<ul>
<li>
<p>Copy the <code>dwarffs</code> flake and its dependencies to a binary cache:</p>
<pre><code class="language-console"># nix flake archive --to file:///tmp/my-cache dwarffs
</code></pre>
</li>
<li>
<p>Fetch the <code>dwarffs</code> flake and its dependencies to the local Nix
store:</p>
<pre><code class="language-console"># nix flake archive dwarffs
</code></pre>
</li>
<li>
<p>Print the store paths of the flake sources of NixOps without
fetching them:</p>
<pre><code class="language-console"># nix flake archive --json --dry-run nixops
</code></pre>
</li>
</ul>
<h1 id="description-51"><a class="header" href="#description-51">Description</a></h1>
<p>FIXME</p>
<h1 id="options-14"><a class="header" href="#options-14">Options</a></h1>
<ul>
<li>
<p><code>--dry-run</code></p>
<p>Show what this command would do without doing it.</p>
</li>
<li>
<p><code>--json</code></p>
<p>Produce output in JSON format, suitable for consumption by another program.</p>
</li>
<li>
<p><code>--to</code> <em>store-uri</em></p>
<p>URI of the destination Nix store</p>
</li>
</ul>
<p><strong>Common evaluation options:</strong></p>
<ul>
<li>
<p><code>--arg</code> <em>name</em> <em>expr</em></p>
<p>Pass the value <em>expr</em> as the argument <em>name</em> to Nix functions.</p>
</li>
<li>
<p><code>--argstr</code> <em>name</em> <em>string</em></p>
<p>Pass the string <em>string</em> as the argument <em>name</em> to Nix functions.</p>
</li>
<li>
<p><code>--debugger</code></p>
<p>Start an interactive environment if evaluation fails.</p>
</li>
<li>
<p><code>--eval-store</code> <em>store-url</em></p>
<p>The Nix store to use for evaluations.</p>
</li>
<li>
<p><code>--impure</code></p>
<p>Allow access to mutable paths and repositories.</p>
</li>
<li>
<p><code>--include</code> / <code>-I</code> <em>path</em></p>
<p>Add <em>path</em> to the Nix search path. The Nix search path is
initialized from the colon-separated <a href="command-ref/new-cli/../../command-ref/env-common.html#env-NIX_PATH"><code>NIX_PATH</code></a> environment
variable, and is used to look up the location of Nix expressions using <a href="command-ref/new-cli/../../language/values.html#type-path">paths</a> enclosed in angle
brackets (i.e., <code>&lt;nixpkgs&gt;</code>).</p>
<p>For instance, passing</p>
<pre><code>-I /home/eelco/Dev
-I /etc/nixos
</code></pre>
<p>will cause Nix to look for paths relative to <code>/home/eelco/Dev</code> and
<code>/etc/nixos</code>, in that order. This is equivalent to setting the
<code>NIX_PATH</code> environment variable to</p>
<pre><code>/home/eelco/Dev:/etc/nixos
</code></pre>
<p>It is also possible to match paths against a prefix. For example,
passing</p>
<pre><code>-I nixpkgs=/home/eelco/Dev/nixpkgs-branch
-I /etc/nixos
</code></pre>
<p>will cause Nix to search for <code>&lt;nixpkgs/path&gt;</code> in
<code>/home/eelco/Dev/nixpkgs-branch/path</code> and <code>/etc/nixos/nixpkgs/path</code>.</p>
<p>If a path in the Nix search path starts with <code>http://</code> or <code>https://</code>,
it is interpreted as the URL of a tarball that will be downloaded and
unpacked to a temporary location. The tarball must consist of a single
top-level directory. For example, passing</p>
<pre><code>-I nixpkgs=https://github.com/NixOS/nixpkgs/archive/master.tar.gz
</code></pre>
<p>tells Nix to download and use the current contents of the <code>master</code>
branch in the <code>nixpkgs</code> repository.</p>
<p>The URLs of the tarballs from the official <code>nixos.org</code> channels
(see <a href="command-ref/new-cli/../nix-channel.html">the manual page for <code>nix-channel</code></a>) can be
abbreviated as <code>channel:&lt;channel-name&gt;</code>. For instance, the
following two flags are equivalent:</p>
<pre><code>-I nixpkgs=channel:nixos-21.05
-I nixpkgs=https://nixos.org/channels/nixos-21.05/nixexprs.tar.xz
</code></pre>
<p>You can also fetch source trees using <a href="command-ref/new-cli/./nix3-flake.html#url-like-syntax">flake URLs</a> and add them to the
search path. For instance,</p>
<pre><code>-I nixpkgs=flake:nixpkgs
</code></pre>
<p>specifies that the prefix <code>nixpkgs</code> shall refer to the source tree
downloaded from the <code>nixpkgs</code> entry in the flake registry. Similarly,</p>
<pre><code>-I nixpkgs=flake:github:NixOS/nixpkgs/nixos-22.05
</code></pre>
<p>makes <code>&lt;nixpkgs&gt;</code> refer to a particular branch of the
<code>NixOS/nixpkgs</code> repository on GitHub.</p>
</li>
<li>
<p><code>--override-flake</code> <em>original-ref</em> <em>resolved-ref</em></p>
<p>Override the flake registries, redirecting <em>original-ref</em> to <em>resolved-ref</em>.</p>
</li>
</ul>
<p><strong>Common flake-related options:</strong></p>
<ul>
<li>
<p><code>--commit-lock-file</code></p>
<p>Commit changes to the flake's lock file.</p>
</li>
<li>
<p><code>--inputs-from</code> <em>flake-url</em></p>
<p>Use the inputs of the specified flake as registry entries.</p>
</li>
<li>
<p><code>--no-registries</code></p>
<p>Don't allow lookups in the flake registries. This option is deprecated; use <code>--no-use-registries</code>.</p>
</li>
<li>
<p><code>--no-update-lock-file</code></p>
<p>Do not allow any updates to the flake's lock file.</p>
</li>
<li>
<p><code>--no-write-lock-file</code></p>
<p>Do not write the flake's newly generated lock file.</p>
</li>
<li>
<p><code>--override-input</code> <em>input-path</em> <em>flake-url</em></p>
<p>Override a specific flake input (e.g. <code>dwarffs/nixpkgs</code>). This implies <code>--no-write-lock-file</code>.</p>
</li>
<li>
<p><code>--recreate-lock-file</code></p>
<p>Recreate the flake's lock file from scratch.</p>
</li>
<li>
<p><code>--update-input</code> <em>input-path</em></p>
<p>Update a specific flake input (ignoring its previous entry in the lock file).</p>
</li>
</ul>
<p><strong>Logging-related options:</strong></p>
<ul>
<li>
<p><code>--debug</code></p>
<p>Set the logging verbosity level to 'debug'.</p>
</li>
<li>
<p><code>--log-format</code> <em>format</em></p>
<p>Set the format of log output; one of <code>raw</code>, <code>internal-json</code>, <code>bar</code> or <code>bar-with-logs</code>.</p>
</li>
<li>
<p><code>--print-build-logs</code> / <code>-L</code></p>
<p>Print full build logs on standard error.</p>
</li>
<li>
<p><code>--quiet</code></p>
<p>Decrease the logging verbosity level.</p>
</li>
<li>
<p><code>--verbose</code> / <code>-v</code></p>
<p>Increase the logging verbosity level.</p>
</li>
</ul>
<p><strong>Miscellaneous global options:</strong></p>
<ul>
<li>
<p><code>--help</code></p>
<p>Show usage information.</p>
</li>
<li>
<p><code>--offline</code></p>
<p>Disable substituters and consider all previously downloaded files up-to-date.</p>
</li>
<li>
<p><code>--option</code> <em>name</em> <em>value</em></p>
<p>Set the Nix configuration setting <em>name</em> to <em>value</em> (overriding <code>nix.conf</code>).</p>
</li>
<li>
<p><code>--refresh</code></p>
<p>Consider all previously downloaded files out-of-date.</p>
</li>
<li>
<p><code>--version</code></p>
<p>Show version information.</p>
</li>
</ul>
<p><strong>Options to override configuration settings:</strong></p>
<ul>
<li>
<p><code>--accept-flake-config</code></p>
<p>Enable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--access-tokens</code> <em>value</em></p>
<p>Set the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--allow-dirty</code></p>
<p>Enable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--allow-import-from-derivation</code></p>
<p>Enable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--allow-new-privileges</code></p>
<p>Enable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--allow-symlinked-store</code></p>
<p>Enable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--allow-unsafe-native-code-during-evaluation</code></p>
<p>Enable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--allowed-impure-host-deps</code> <em>value</em></p>
<p>Set the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--allowed-uris</code> <em>value</em></p>
<p>Set the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--allowed-users</code> <em>value</em></p>
<p>Set the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--auto-allocate-uids</code></p>
<p>Enable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--auto-optimise-store</code></p>
<p>Enable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt</code> <em>value</em></p>
<p>Set the <code>bash-prompt</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-prefix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-prefix</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-suffix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-suffix</code> setting.</p>
</li>
<li>
<p><code>--build-hook</code> <em>value</em></p>
<p>Set the <code>build-hook</code> setting.</p>
</li>
<li>
<p><code>--build-poll-interval</code> <em>value</em></p>
<p>Set the <code>build-poll-interval</code> setting.</p>
</li>
<li>
<p><code>--build-users-group</code> <em>value</em></p>
<p>Set the <code>build-users-group</code> setting.</p>
</li>
<li>
<p><code>--builders</code> <em>value</em></p>
<p>Set the <code>builders</code> setting.</p>
</li>
<li>
<p><code>--builders-use-substitutes</code></p>
<p>Enable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--commit-lockfile-summary</code> <em>value</em></p>
<p>Set the <code>commit-lockfile-summary</code> setting.</p>
</li>
<li>
<p><code>--compress-build-log</code></p>
<p>Enable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--connect-timeout</code> <em>value</em></p>
<p>Set the <code>connect-timeout</code> setting.</p>
</li>
<li>
<p><code>--cores</code> <em>value</em></p>
<p>Set the <code>cores</code> setting.</p>
</li>
<li>
<p><code>--diff-hook</code> <em>value</em></p>
<p>Set the <code>diff-hook</code> setting.</p>
</li>
<li>
<p><code>--download-attempts</code> <em>value</em></p>
<p>Set the <code>download-attempts</code> setting.</p>
</li>
<li>
<p><code>--download-speed</code> <em>value</em></p>
<p>Set the <code>download-speed</code> setting.</p>
</li>
<li>
<p><code>--eval-cache</code></p>
<p>Enable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--experimental-features</code> <em>value</em></p>
<p>Set the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-access-tokens</code> <em>value</em></p>
<p>Append to the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-impure-host-deps</code> <em>value</em></p>
<p>Append to the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-uris</code> <em>value</em></p>
<p>Append to the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-users</code> <em>value</em></p>
<p>Append to the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--extra-experimental-features</code> <em>value</em></p>
<p>Append to the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-extra-platforms</code> <em>value</em></p>
<p>Append to the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-hashed-mirrors</code> <em>value</em></p>
<p>Append to the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--extra-ignored-acls</code> <em>value</em></p>
<p>Append to the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--extra-nix-path</code> <em>value</em></p>
<p>Append to the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--extra-platforms</code> <em>value</em></p>
<p>Set the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-plugin-files</code> <em>value</em></p>
<p>Append to the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--extra-sandbox-paths</code> <em>value</em></p>
<p>Append to the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--extra-secret-key-files</code> <em>value</em></p>
<p>Append to the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--extra-substituters</code> <em>value</em></p>
<p>Append to the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-system-features</code> <em>value</em></p>
<p>Append to the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-public-keys</code> <em>value</em></p>
<p>Append to the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-substituters</code> <em>value</em></p>
<p>Append to the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-users</code> <em>value</em></p>
<p>Append to the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--fallback</code></p>
<p>Enable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--filter-syscalls</code></p>
<p>Enable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--flake-registry</code> <em>value</em></p>
<p>Set the <code>flake-registry</code> setting.</p>
</li>
<li>
<p><code>--fsync-metadata</code></p>
<p>Enable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--gc-reserved-space</code> <em>value</em></p>
<p>Set the <code>gc-reserved-space</code> setting.</p>
</li>
<li>
<p><code>--hashed-mirrors</code> <em>value</em></p>
<p>Set the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--http-connections</code> <em>value</em></p>
<p>Set the <code>http-connections</code> setting.</p>
</li>
<li>
<p><code>--http2</code></p>
<p>Enable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--id-count</code> <em>value</em></p>
<p>Set the <code>id-count</code> setting.</p>
</li>
<li>
<p><code>--ignore-try</code></p>
<p>Enable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--ignored-acls</code> <em>value</em></p>
<p>Set the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--impersonate-linux-26</code></p>
<p>Enable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--keep-build-log</code></p>
<p>Enable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--keep-derivations</code></p>
<p>Enable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-env-derivations</code></p>
<p>Enable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-failed</code></p>
<p>Enable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--keep-going</code></p>
<p>Enable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--keep-outputs</code></p>
<p>Enable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--log-lines</code> <em>value</em></p>
<p>Set the <code>log-lines</code> setting.</p>
</li>
<li>
<p><code>--max-build-log-size</code> <em>value</em></p>
<p>Set the <code>max-build-log-size</code> setting.</p>
</li>
<li>
<p><code>--max-free</code> <em>value</em></p>
<p>Set the <code>max-free</code> setting.</p>
</li>
<li>
<p><code>--max-jobs</code> <em>value</em></p>
<p>Set the <code>max-jobs</code> setting.</p>
</li>
<li>
<p><code>--max-silent-time</code> <em>value</em></p>
<p>Set the <code>max-silent-time</code> setting.</p>
</li>
<li>
<p><code>--min-free</code> <em>value</em></p>
<p>Set the <code>min-free</code> setting.</p>
</li>
<li>
<p><code>--min-free-check-interval</code> <em>value</em></p>
<p>Set the <code>min-free-check-interval</code> setting.</p>
</li>
<li>
<p><code>--nar-buffer-size</code> <em>value</em></p>
<p>Set the <code>nar-buffer-size</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-negative-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-negative-ttl</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-positive-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-positive-ttl</code> setting.</p>
</li>
<li>
<p><code>--netrc-file</code> <em>value</em></p>
<p>Set the <code>netrc-file</code> setting.</p>
</li>
<li>
<p><code>--nix-path</code> <em>value</em></p>
<p>Set the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--no-accept-flake-config</code></p>
<p>Disable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--no-allow-dirty</code></p>
<p>Disable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--no-allow-import-from-derivation</code></p>
<p>Disable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--no-allow-new-privileges</code></p>
<p>Disable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--no-allow-symlinked-store</code></p>
<p>Disable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--no-allow-unsafe-native-code-during-evaluation</code></p>
<p>Disable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--no-auto-allocate-uids</code></p>
<p>Disable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--no-auto-optimise-store</code></p>
<p>Disable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--no-builders-use-substitutes</code></p>
<p>Disable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--no-compress-build-log</code></p>
<p>Disable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-eval-cache</code></p>
<p>Disable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--no-fallback</code></p>
<p>Disable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--no-filter-syscalls</code></p>
<p>Disable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--no-fsync-metadata</code></p>
<p>Disable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--no-http2</code></p>
<p>Disable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--no-ignore-try</code></p>
<p>Disable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--no-impersonate-linux-26</code></p>
<p>Disable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--no-keep-build-log</code></p>
<p>Disable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-keep-derivations</code></p>
<p>Disable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-env-derivations</code></p>
<p>Disable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-failed</code></p>
<p>Disable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--no-keep-going</code></p>
<p>Disable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--no-keep-outputs</code></p>
<p>Disable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--no-preallocate-contents</code></p>
<p>Disable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--no-print-missing</code></p>
<p>Disable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--no-pure-eval</code></p>
<p>Disable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--no-require-sigs</code></p>
<p>Disable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--no-restrict-eval</code></p>
<p>Disable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--no-run-diff-hook</code></p>
<p>Disable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--no-sandbox</code></p>
<p>Disable sandboxing.</p>
</li>
<li>
<p><code>--no-sandbox-fallback</code></p>
<p>Disable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--no-show-trace</code></p>
<p>Disable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--no-substitute</code></p>
<p>Disable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--no-sync-before-registering</code></p>
<p>Disable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--no-trace-function-calls</code></p>
<p>Disable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--no-trace-verbose</code></p>
<p>Disable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--no-use-case-hack</code></p>
<p>Disable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--no-use-cgroups</code></p>
<p>Disable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--no-use-registries</code></p>
<p>Disable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--no-use-sqlite-wal</code></p>
<p>Disable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--no-warn-dirty</code></p>
<p>Disable the <code>warn-dirty</code> setting.</p>
</li>
<li>
<p><code>--plugin-files</code> <em>value</em></p>
<p>Set the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--post-build-hook</code> <em>value</em></p>
<p>Set the <code>post-build-hook</code> setting.</p>
</li>
<li>
<p><code>--pre-build-hook</code> <em>value</em></p>
<p>Set the <code>pre-build-hook</code> setting.</p>
</li>
<li>
<p><code>--preallocate-contents</code></p>
<p>Enable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--print-missing</code></p>
<p>Enable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--pure-eval</code></p>
<p>Enable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--relaxed-sandbox</code></p>
<p>Enable sandboxing, but allow builds to disable it.</p>
</li>
<li>
<p><code>--require-sigs</code></p>
<p>Enable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--restrict-eval</code></p>
<p>Enable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--run-diff-hook</code></p>
<p>Enable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--sandbox</code></p>
<p>Enable sandboxing.</p>
</li>
<li>
<p><code>--sandbox-build-dir</code> <em>value</em></p>
<p>Set the <code>sandbox-build-dir</code> setting.</p>
</li>
<li>
<p><code>--sandbox-dev-shm-size</code> <em>value</em></p>
<p>Set the <code>sandbox-dev-shm-size</code> setting.</p>
</li>
<li>
<p><code>--sandbox-fallback</code></p>
<p>Enable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--sandbox-paths</code> <em>value</em></p>
<p>Set the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--secret-key-files</code> <em>value</em></p>
<p>Set the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--show-trace</code></p>
<p>Enable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--stalled-download-timeout</code> <em>value</em></p>
<p>Set the <code>stalled-download-timeout</code> setting.</p>
</li>
<li>
<p><code>--start-id</code> <em>value</em></p>
<p>Set the <code>start-id</code> setting.</p>
</li>
<li>
<p><code>--store</code> <em>value</em></p>
<p>Set the <code>store</code> setting.</p>
</li>
<li>
<p><code>--substitute</code></p>
<p>Enable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--substituters</code> <em>value</em></p>
<p>Set the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--sync-before-registering</code></p>
<p>Enable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--system</code> <em>value</em></p>
<p>Set the <code>system</code> setting.</p>
</li>
<li>
<p><code>--system-features</code> <em>value</em></p>
<p>Set the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--tarball-ttl</code> <em>value</em></p>
<p>Set the <code>tarball-ttl</code> setting.</p>
</li>
<li>
<p><code>--timeout</code> <em>value</em></p>
<p>Set the <code>timeout</code> setting.</p>
</li>
<li>
<p><code>--trace-function-calls</code></p>
<p>Enable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--trace-verbose</code></p>
<p>Enable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--trusted-public-keys</code> <em>value</em></p>
<p>Set the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--trusted-substituters</code> <em>value</em></p>
<p>Set the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--trusted-users</code> <em>value</em></p>
<p>Set the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--use-case-hack</code></p>
<p>Enable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--use-cgroups</code></p>
<p>Enable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--use-registries</code></p>
<p>Enable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--use-sqlite-wal</code></p>
<p>Enable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--user-agent-suffix</code> <em>value</em></p>
<p>Set the <code>user-agent-suffix</code> setting.</p>
</li>
<li>
<p><code>--warn-dirty</code></p>
<p>Enable the <code>warn-dirty</code> setting.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p><strong>Warning</strong> <br />
This program is <strong>experimental</strong> and its interface is subject to change.</p>
</blockquote>
<h1 id="name-23"><a class="header" href="#name-23">Name</a></h1>
<p><code>nix flake check</code> - check whether the flake evaluates and run its tests</p>
<h1 id="synopsis-54"><a class="header" href="#synopsis-54">Synopsis</a></h1>
<p><code>nix flake check</code> [<em>option</em>...] <em>flake-url</em></p>
<h1 id="examples-33"><a class="header" href="#examples-33">Examples</a></h1>
<ul>
<li>
<p>Evaluate the flake in the current directory, and build its checks:</p>
<pre><code class="language-console"># nix flake check
</code></pre>
</li>
<li>
<p>Verify that the <code>patchelf</code> flake evaluates, but don't build its
checks:</p>
<pre><code class="language-console"># nix flake check --no-build github:NixOS/patchelf
</code></pre>
</li>
</ul>
<h1 id="description-52"><a class="header" href="#description-52">Description</a></h1>
<p>This command verifies that the flake specified by flake reference
<em>flake-url</em> can be evaluated successfully (as detailed below), and
that the derivations specified by the flake's <code>checks</code> output can be
built successfully.</p>
<p>If the <code>keep-going</code> option is set to <code>true</code>, Nix will keep evaluating as much
as it can and report the errors as it encounters them. Otherwise it will stop
at the first error.</p>
<h1 id="evaluation-checks"><a class="header" href="#evaluation-checks">Evaluation checks</a></h1>
<p>The following flake output attributes must be derivations:</p>
<ul>
<li><code>checks.</code><em>system</em><code>.</code><em>name</em></li>
<li><code>defaultPackage.</code><em>system</em></li>
<li><code>devShell.</code><em>system</em></li>
<li><code>devShells.</code><em>system</em><code>.</code><em>name</em></li>
<li><code>nixosConfigurations.</code><em>name</em><code>.config.system.build.toplevel</code></li>
<li><code>packages.</code><em>system</em><code>.</code><em>name</em></li>
</ul>
<p>The following flake output attributes must be <a href="command-ref/new-cli/./nix3-run.html">app
definitions</a>:</p>
<ul>
<li><code>apps.</code><em>system</em><code>.</code><em>name</em></li>
<li><code>defaultApp.</code><em>system</em></li>
</ul>
<p>The following flake output attributes must be <a href="command-ref/new-cli/./nix3-flake-init.html">template
definitions</a>:</p>
<ul>
<li><code>defaultTemplate</code></li>
<li><code>templates.</code><em>name</em></li>
</ul>
<p>The following flake output attributes must be <em>Nixpkgs overlays</em>:</p>
<ul>
<li><code>overlay</code></li>
<li><code>overlays.</code><em>name</em></li>
</ul>
<p>The following flake output attributes must be <em>NixOS modules</em>:</p>
<ul>
<li><code>nixosModule</code></li>
<li><code>nixosModules.</code><em>name</em></li>
</ul>
<p>The following flake output attributes must be
<a href="command-ref/new-cli/./nix3-bundle.html">bundlers</a>:</p>
<ul>
<li><code>bundlers.</code><em>name</em></li>
<li><code>defaultBundler</code></li>
</ul>
<p>In addition, the <code>hydraJobs</code> output is evaluated in the same way as
Hydra's <code>hydra-eval-jobs</code> (i.e. as a arbitrarily deeply nested
attribute set of derivations). Similarly, the
<code>legacyPackages</code>.<em>system</em> output is evaluated like <code>nix-env -qa</code>.</p>
<h1 id="options-15"><a class="header" href="#options-15">Options</a></h1>
<ul>
<li>
<p><code>--no-build</code></p>
<p>Do not build checks.</p>
</li>
</ul>
<p><strong>Common evaluation options:</strong></p>
<ul>
<li>
<p><code>--arg</code> <em>name</em> <em>expr</em></p>
<p>Pass the value <em>expr</em> as the argument <em>name</em> to Nix functions.</p>
</li>
<li>
<p><code>--argstr</code> <em>name</em> <em>string</em></p>
<p>Pass the string <em>string</em> as the argument <em>name</em> to Nix functions.</p>
</li>
<li>
<p><code>--debugger</code></p>
<p>Start an interactive environment if evaluation fails.</p>
</li>
<li>
<p><code>--eval-store</code> <em>store-url</em></p>
<p>The Nix store to use for evaluations.</p>
</li>
<li>
<p><code>--impure</code></p>
<p>Allow access to mutable paths and repositories.</p>
</li>
<li>
<p><code>--include</code> / <code>-I</code> <em>path</em></p>
<p>Add <em>path</em> to the Nix search path. The Nix search path is
initialized from the colon-separated <a href="command-ref/new-cli/../../command-ref/env-common.html#env-NIX_PATH"><code>NIX_PATH</code></a> environment
variable, and is used to look up the location of Nix expressions using <a href="command-ref/new-cli/../../language/values.html#type-path">paths</a> enclosed in angle
brackets (i.e., <code>&lt;nixpkgs&gt;</code>).</p>
<p>For instance, passing</p>
<pre><code>-I /home/eelco/Dev
-I /etc/nixos
</code></pre>
<p>will cause Nix to look for paths relative to <code>/home/eelco/Dev</code> and
<code>/etc/nixos</code>, in that order. This is equivalent to setting the
<code>NIX_PATH</code> environment variable to</p>
<pre><code>/home/eelco/Dev:/etc/nixos
</code></pre>
<p>It is also possible to match paths against a prefix. For example,
passing</p>
<pre><code>-I nixpkgs=/home/eelco/Dev/nixpkgs-branch
-I /etc/nixos
</code></pre>
<p>will cause Nix to search for <code>&lt;nixpkgs/path&gt;</code> in
<code>/home/eelco/Dev/nixpkgs-branch/path</code> and <code>/etc/nixos/nixpkgs/path</code>.</p>
<p>If a path in the Nix search path starts with <code>http://</code> or <code>https://</code>,
it is interpreted as the URL of a tarball that will be downloaded and
unpacked to a temporary location. The tarball must consist of a single
top-level directory. For example, passing</p>
<pre><code>-I nixpkgs=https://github.com/NixOS/nixpkgs/archive/master.tar.gz
</code></pre>
<p>tells Nix to download and use the current contents of the <code>master</code>
branch in the <code>nixpkgs</code> repository.</p>
<p>The URLs of the tarballs from the official <code>nixos.org</code> channels
(see <a href="command-ref/new-cli/../nix-channel.html">the manual page for <code>nix-channel</code></a>) can be
abbreviated as <code>channel:&lt;channel-name&gt;</code>. For instance, the
following two flags are equivalent:</p>
<pre><code>-I nixpkgs=channel:nixos-21.05
-I nixpkgs=https://nixos.org/channels/nixos-21.05/nixexprs.tar.xz
</code></pre>
<p>You can also fetch source trees using <a href="command-ref/new-cli/./nix3-flake.html#url-like-syntax">flake URLs</a> and add them to the
search path. For instance,</p>
<pre><code>-I nixpkgs=flake:nixpkgs
</code></pre>
<p>specifies that the prefix <code>nixpkgs</code> shall refer to the source tree
downloaded from the <code>nixpkgs</code> entry in the flake registry. Similarly,</p>
<pre><code>-I nixpkgs=flake:github:NixOS/nixpkgs/nixos-22.05
</code></pre>
<p>makes <code>&lt;nixpkgs&gt;</code> refer to a particular branch of the
<code>NixOS/nixpkgs</code> repository on GitHub.</p>
</li>
<li>
<p><code>--override-flake</code> <em>original-ref</em> <em>resolved-ref</em></p>
<p>Override the flake registries, redirecting <em>original-ref</em> to <em>resolved-ref</em>.</p>
</li>
</ul>
<p><strong>Common flake-related options:</strong></p>
<ul>
<li>
<p><code>--commit-lock-file</code></p>
<p>Commit changes to the flake's lock file.</p>
</li>
<li>
<p><code>--inputs-from</code> <em>flake-url</em></p>
<p>Use the inputs of the specified flake as registry entries.</p>
</li>
<li>
<p><code>--no-registries</code></p>
<p>Don't allow lookups in the flake registries. This option is deprecated; use <code>--no-use-registries</code>.</p>
</li>
<li>
<p><code>--no-update-lock-file</code></p>
<p>Do not allow any updates to the flake's lock file.</p>
</li>
<li>
<p><code>--no-write-lock-file</code></p>
<p>Do not write the flake's newly generated lock file.</p>
</li>
<li>
<p><code>--override-input</code> <em>input-path</em> <em>flake-url</em></p>
<p>Override a specific flake input (e.g. <code>dwarffs/nixpkgs</code>). This implies <code>--no-write-lock-file</code>.</p>
</li>
<li>
<p><code>--recreate-lock-file</code></p>
<p>Recreate the flake's lock file from scratch.</p>
</li>
<li>
<p><code>--update-input</code> <em>input-path</em></p>
<p>Update a specific flake input (ignoring its previous entry in the lock file).</p>
</li>
</ul>
<p><strong>Logging-related options:</strong></p>
<ul>
<li>
<p><code>--debug</code></p>
<p>Set the logging verbosity level to 'debug'.</p>
</li>
<li>
<p><code>--log-format</code> <em>format</em></p>
<p>Set the format of log output; one of <code>raw</code>, <code>internal-json</code>, <code>bar</code> or <code>bar-with-logs</code>.</p>
</li>
<li>
<p><code>--print-build-logs</code> / <code>-L</code></p>
<p>Print full build logs on standard error.</p>
</li>
<li>
<p><code>--quiet</code></p>
<p>Decrease the logging verbosity level.</p>
</li>
<li>
<p><code>--verbose</code> / <code>-v</code></p>
<p>Increase the logging verbosity level.</p>
</li>
</ul>
<p><strong>Miscellaneous global options:</strong></p>
<ul>
<li>
<p><code>--help</code></p>
<p>Show usage information.</p>
</li>
<li>
<p><code>--offline</code></p>
<p>Disable substituters and consider all previously downloaded files up-to-date.</p>
</li>
<li>
<p><code>--option</code> <em>name</em> <em>value</em></p>
<p>Set the Nix configuration setting <em>name</em> to <em>value</em> (overriding <code>nix.conf</code>).</p>
</li>
<li>
<p><code>--refresh</code></p>
<p>Consider all previously downloaded files out-of-date.</p>
</li>
<li>
<p><code>--version</code></p>
<p>Show version information.</p>
</li>
</ul>
<p><strong>Options to override configuration settings:</strong></p>
<ul>
<li>
<p><code>--accept-flake-config</code></p>
<p>Enable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--access-tokens</code> <em>value</em></p>
<p>Set the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--allow-dirty</code></p>
<p>Enable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--allow-import-from-derivation</code></p>
<p>Enable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--allow-new-privileges</code></p>
<p>Enable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--allow-symlinked-store</code></p>
<p>Enable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--allow-unsafe-native-code-during-evaluation</code></p>
<p>Enable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--allowed-impure-host-deps</code> <em>value</em></p>
<p>Set the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--allowed-uris</code> <em>value</em></p>
<p>Set the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--allowed-users</code> <em>value</em></p>
<p>Set the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--auto-allocate-uids</code></p>
<p>Enable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--auto-optimise-store</code></p>
<p>Enable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt</code> <em>value</em></p>
<p>Set the <code>bash-prompt</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-prefix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-prefix</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-suffix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-suffix</code> setting.</p>
</li>
<li>
<p><code>--build-hook</code> <em>value</em></p>
<p>Set the <code>build-hook</code> setting.</p>
</li>
<li>
<p><code>--build-poll-interval</code> <em>value</em></p>
<p>Set the <code>build-poll-interval</code> setting.</p>
</li>
<li>
<p><code>--build-users-group</code> <em>value</em></p>
<p>Set the <code>build-users-group</code> setting.</p>
</li>
<li>
<p><code>--builders</code> <em>value</em></p>
<p>Set the <code>builders</code> setting.</p>
</li>
<li>
<p><code>--builders-use-substitutes</code></p>
<p>Enable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--commit-lockfile-summary</code> <em>value</em></p>
<p>Set the <code>commit-lockfile-summary</code> setting.</p>
</li>
<li>
<p><code>--compress-build-log</code></p>
<p>Enable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--connect-timeout</code> <em>value</em></p>
<p>Set the <code>connect-timeout</code> setting.</p>
</li>
<li>
<p><code>--cores</code> <em>value</em></p>
<p>Set the <code>cores</code> setting.</p>
</li>
<li>
<p><code>--diff-hook</code> <em>value</em></p>
<p>Set the <code>diff-hook</code> setting.</p>
</li>
<li>
<p><code>--download-attempts</code> <em>value</em></p>
<p>Set the <code>download-attempts</code> setting.</p>
</li>
<li>
<p><code>--download-speed</code> <em>value</em></p>
<p>Set the <code>download-speed</code> setting.</p>
</li>
<li>
<p><code>--eval-cache</code></p>
<p>Enable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--experimental-features</code> <em>value</em></p>
<p>Set the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-access-tokens</code> <em>value</em></p>
<p>Append to the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-impure-host-deps</code> <em>value</em></p>
<p>Append to the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-uris</code> <em>value</em></p>
<p>Append to the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-users</code> <em>value</em></p>
<p>Append to the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--extra-experimental-features</code> <em>value</em></p>
<p>Append to the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-extra-platforms</code> <em>value</em></p>
<p>Append to the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-hashed-mirrors</code> <em>value</em></p>
<p>Append to the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--extra-ignored-acls</code> <em>value</em></p>
<p>Append to the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--extra-nix-path</code> <em>value</em></p>
<p>Append to the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--extra-platforms</code> <em>value</em></p>
<p>Set the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-plugin-files</code> <em>value</em></p>
<p>Append to the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--extra-sandbox-paths</code> <em>value</em></p>
<p>Append to the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--extra-secret-key-files</code> <em>value</em></p>
<p>Append to the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--extra-substituters</code> <em>value</em></p>
<p>Append to the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-system-features</code> <em>value</em></p>
<p>Append to the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-public-keys</code> <em>value</em></p>
<p>Append to the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-substituters</code> <em>value</em></p>
<p>Append to the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-users</code> <em>value</em></p>
<p>Append to the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--fallback</code></p>
<p>Enable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--filter-syscalls</code></p>
<p>Enable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--flake-registry</code> <em>value</em></p>
<p>Set the <code>flake-registry</code> setting.</p>
</li>
<li>
<p><code>--fsync-metadata</code></p>
<p>Enable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--gc-reserved-space</code> <em>value</em></p>
<p>Set the <code>gc-reserved-space</code> setting.</p>
</li>
<li>
<p><code>--hashed-mirrors</code> <em>value</em></p>
<p>Set the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--http-connections</code> <em>value</em></p>
<p>Set the <code>http-connections</code> setting.</p>
</li>
<li>
<p><code>--http2</code></p>
<p>Enable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--id-count</code> <em>value</em></p>
<p>Set the <code>id-count</code> setting.</p>
</li>
<li>
<p><code>--ignore-try</code></p>
<p>Enable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--ignored-acls</code> <em>value</em></p>
<p>Set the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--impersonate-linux-26</code></p>
<p>Enable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--keep-build-log</code></p>
<p>Enable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--keep-derivations</code></p>
<p>Enable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-env-derivations</code></p>
<p>Enable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-failed</code></p>
<p>Enable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--keep-going</code></p>
<p>Enable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--keep-outputs</code></p>
<p>Enable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--log-lines</code> <em>value</em></p>
<p>Set the <code>log-lines</code> setting.</p>
</li>
<li>
<p><code>--max-build-log-size</code> <em>value</em></p>
<p>Set the <code>max-build-log-size</code> setting.</p>
</li>
<li>
<p><code>--max-free</code> <em>value</em></p>
<p>Set the <code>max-free</code> setting.</p>
</li>
<li>
<p><code>--max-jobs</code> <em>value</em></p>
<p>Set the <code>max-jobs</code> setting.</p>
</li>
<li>
<p><code>--max-silent-time</code> <em>value</em></p>
<p>Set the <code>max-silent-time</code> setting.</p>
</li>
<li>
<p><code>--min-free</code> <em>value</em></p>
<p>Set the <code>min-free</code> setting.</p>
</li>
<li>
<p><code>--min-free-check-interval</code> <em>value</em></p>
<p>Set the <code>min-free-check-interval</code> setting.</p>
</li>
<li>
<p><code>--nar-buffer-size</code> <em>value</em></p>
<p>Set the <code>nar-buffer-size</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-negative-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-negative-ttl</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-positive-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-positive-ttl</code> setting.</p>
</li>
<li>
<p><code>--netrc-file</code> <em>value</em></p>
<p>Set the <code>netrc-file</code> setting.</p>
</li>
<li>
<p><code>--nix-path</code> <em>value</em></p>
<p>Set the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--no-accept-flake-config</code></p>
<p>Disable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--no-allow-dirty</code></p>
<p>Disable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--no-allow-import-from-derivation</code></p>
<p>Disable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--no-allow-new-privileges</code></p>
<p>Disable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--no-allow-symlinked-store</code></p>
<p>Disable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--no-allow-unsafe-native-code-during-evaluation</code></p>
<p>Disable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--no-auto-allocate-uids</code></p>
<p>Disable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--no-auto-optimise-store</code></p>
<p>Disable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--no-builders-use-substitutes</code></p>
<p>Disable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--no-compress-build-log</code></p>
<p>Disable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-eval-cache</code></p>
<p>Disable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--no-fallback</code></p>
<p>Disable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--no-filter-syscalls</code></p>
<p>Disable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--no-fsync-metadata</code></p>
<p>Disable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--no-http2</code></p>
<p>Disable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--no-ignore-try</code></p>
<p>Disable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--no-impersonate-linux-26</code></p>
<p>Disable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--no-keep-build-log</code></p>
<p>Disable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-keep-derivations</code></p>
<p>Disable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-env-derivations</code></p>
<p>Disable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-failed</code></p>
<p>Disable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--no-keep-going</code></p>
<p>Disable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--no-keep-outputs</code></p>
<p>Disable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--no-preallocate-contents</code></p>
<p>Disable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--no-print-missing</code></p>
<p>Disable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--no-pure-eval</code></p>
<p>Disable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--no-require-sigs</code></p>
<p>Disable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--no-restrict-eval</code></p>
<p>Disable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--no-run-diff-hook</code></p>
<p>Disable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--no-sandbox</code></p>
<p>Disable sandboxing.</p>
</li>
<li>
<p><code>--no-sandbox-fallback</code></p>
<p>Disable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--no-show-trace</code></p>
<p>Disable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--no-substitute</code></p>
<p>Disable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--no-sync-before-registering</code></p>
<p>Disable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--no-trace-function-calls</code></p>
<p>Disable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--no-trace-verbose</code></p>
<p>Disable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--no-use-case-hack</code></p>
<p>Disable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--no-use-cgroups</code></p>
<p>Disable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--no-use-registries</code></p>
<p>Disable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--no-use-sqlite-wal</code></p>
<p>Disable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--no-warn-dirty</code></p>
<p>Disable the <code>warn-dirty</code> setting.</p>
</li>
<li>
<p><code>--plugin-files</code> <em>value</em></p>
<p>Set the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--post-build-hook</code> <em>value</em></p>
<p>Set the <code>post-build-hook</code> setting.</p>
</li>
<li>
<p><code>--pre-build-hook</code> <em>value</em></p>
<p>Set the <code>pre-build-hook</code> setting.</p>
</li>
<li>
<p><code>--preallocate-contents</code></p>
<p>Enable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--print-missing</code></p>
<p>Enable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--pure-eval</code></p>
<p>Enable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--relaxed-sandbox</code></p>
<p>Enable sandboxing, but allow builds to disable it.</p>
</li>
<li>
<p><code>--require-sigs</code></p>
<p>Enable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--restrict-eval</code></p>
<p>Enable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--run-diff-hook</code></p>
<p>Enable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--sandbox</code></p>
<p>Enable sandboxing.</p>
</li>
<li>
<p><code>--sandbox-build-dir</code> <em>value</em></p>
<p>Set the <code>sandbox-build-dir</code> setting.</p>
</li>
<li>
<p><code>--sandbox-dev-shm-size</code> <em>value</em></p>
<p>Set the <code>sandbox-dev-shm-size</code> setting.</p>
</li>
<li>
<p><code>--sandbox-fallback</code></p>
<p>Enable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--sandbox-paths</code> <em>value</em></p>
<p>Set the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--secret-key-files</code> <em>value</em></p>
<p>Set the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--show-trace</code></p>
<p>Enable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--stalled-download-timeout</code> <em>value</em></p>
<p>Set the <code>stalled-download-timeout</code> setting.</p>
</li>
<li>
<p><code>--start-id</code> <em>value</em></p>
<p>Set the <code>start-id</code> setting.</p>
</li>
<li>
<p><code>--store</code> <em>value</em></p>
<p>Set the <code>store</code> setting.</p>
</li>
<li>
<p><code>--substitute</code></p>
<p>Enable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--substituters</code> <em>value</em></p>
<p>Set the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--sync-before-registering</code></p>
<p>Enable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--system</code> <em>value</em></p>
<p>Set the <code>system</code> setting.</p>
</li>
<li>
<p><code>--system-features</code> <em>value</em></p>
<p>Set the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--tarball-ttl</code> <em>value</em></p>
<p>Set the <code>tarball-ttl</code> setting.</p>
</li>
<li>
<p><code>--timeout</code> <em>value</em></p>
<p>Set the <code>timeout</code> setting.</p>
</li>
<li>
<p><code>--trace-function-calls</code></p>
<p>Enable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--trace-verbose</code></p>
<p>Enable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--trusted-public-keys</code> <em>value</em></p>
<p>Set the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--trusted-substituters</code> <em>value</em></p>
<p>Set the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--trusted-users</code> <em>value</em></p>
<p>Set the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--use-case-hack</code></p>
<p>Enable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--use-cgroups</code></p>
<p>Enable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--use-registries</code></p>
<p>Enable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--use-sqlite-wal</code></p>
<p>Enable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--user-agent-suffix</code> <em>value</em></p>
<p>Set the <code>user-agent-suffix</code> setting.</p>
</li>
<li>
<p><code>--warn-dirty</code></p>
<p>Enable the <code>warn-dirty</code> setting.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p><strong>Warning</strong> <br />
This program is <strong>experimental</strong> and its interface is subject to change.</p>
</blockquote>
<h1 id="name-24"><a class="header" href="#name-24">Name</a></h1>
<p><code>nix flake clone</code> - clone flake repository</p>
<h1 id="synopsis-55"><a class="header" href="#synopsis-55">Synopsis</a></h1>
<p><code>nix flake clone</code> [<em>option</em>...] <em>flake-url</em></p>
<h1 id="examples-34"><a class="header" href="#examples-34">Examples</a></h1>
<ul>
<li>
<p>Check out the source code of the <code>dwarffs</code> flake and build it:</p>
<pre><code class="language-console"># nix flake clone dwarffs --dest dwarffs
# cd dwarffs
# nix build
</code></pre>
</li>
</ul>
<h1 id="description-53"><a class="header" href="#description-53">Description</a></h1>
<p>This command performs a Git or Mercurial clone of the repository
containing the source code of the flake <em>flake-url</em>.</p>
<h1 id="options-16"><a class="header" href="#options-16">Options</a></h1>
<ul>
<li>
<p><code>--dest</code> / <code>-f</code> <em>path</em></p>
<p>Clone the flake to path <em>dest</em>.</p>
</li>
</ul>
<p><strong>Common evaluation options:</strong></p>
<ul>
<li>
<p><code>--arg</code> <em>name</em> <em>expr</em></p>
<p>Pass the value <em>expr</em> as the argument <em>name</em> to Nix functions.</p>
</li>
<li>
<p><code>--argstr</code> <em>name</em> <em>string</em></p>
<p>Pass the string <em>string</em> as the argument <em>name</em> to Nix functions.</p>
</li>
<li>
<p><code>--debugger</code></p>
<p>Start an interactive environment if evaluation fails.</p>
</li>
<li>
<p><code>--eval-store</code> <em>store-url</em></p>
<p>The Nix store to use for evaluations.</p>
</li>
<li>
<p><code>--impure</code></p>
<p>Allow access to mutable paths and repositories.</p>
</li>
<li>
<p><code>--include</code> / <code>-I</code> <em>path</em></p>
<p>Add <em>path</em> to the Nix search path. The Nix search path is
initialized from the colon-separated <a href="command-ref/new-cli/../../command-ref/env-common.html#env-NIX_PATH"><code>NIX_PATH</code></a> environment
variable, and is used to look up the location of Nix expressions using <a href="command-ref/new-cli/../../language/values.html#type-path">paths</a> enclosed in angle
brackets (i.e., <code>&lt;nixpkgs&gt;</code>).</p>
<p>For instance, passing</p>
<pre><code>-I /home/eelco/Dev
-I /etc/nixos
</code></pre>
<p>will cause Nix to look for paths relative to <code>/home/eelco/Dev</code> and
<code>/etc/nixos</code>, in that order. This is equivalent to setting the
<code>NIX_PATH</code> environment variable to</p>
<pre><code>/home/eelco/Dev:/etc/nixos
</code></pre>
<p>It is also possible to match paths against a prefix. For example,
passing</p>
<pre><code>-I nixpkgs=/home/eelco/Dev/nixpkgs-branch
-I /etc/nixos
</code></pre>
<p>will cause Nix to search for <code>&lt;nixpkgs/path&gt;</code> in
<code>/home/eelco/Dev/nixpkgs-branch/path</code> and <code>/etc/nixos/nixpkgs/path</code>.</p>
<p>If a path in the Nix search path starts with <code>http://</code> or <code>https://</code>,
it is interpreted as the URL of a tarball that will be downloaded and
unpacked to a temporary location. The tarball must consist of a single
top-level directory. For example, passing</p>
<pre><code>-I nixpkgs=https://github.com/NixOS/nixpkgs/archive/master.tar.gz
</code></pre>
<p>tells Nix to download and use the current contents of the <code>master</code>
branch in the <code>nixpkgs</code> repository.</p>
<p>The URLs of the tarballs from the official <code>nixos.org</code> channels
(see <a href="command-ref/new-cli/../nix-channel.html">the manual page for <code>nix-channel</code></a>) can be
abbreviated as <code>channel:&lt;channel-name&gt;</code>. For instance, the
following two flags are equivalent:</p>
<pre><code>-I nixpkgs=channel:nixos-21.05
-I nixpkgs=https://nixos.org/channels/nixos-21.05/nixexprs.tar.xz
</code></pre>
<p>You can also fetch source trees using <a href="command-ref/new-cli/./nix3-flake.html#url-like-syntax">flake URLs</a> and add them to the
search path. For instance,</p>
<pre><code>-I nixpkgs=flake:nixpkgs
</code></pre>
<p>specifies that the prefix <code>nixpkgs</code> shall refer to the source tree
downloaded from the <code>nixpkgs</code> entry in the flake registry. Similarly,</p>
<pre><code>-I nixpkgs=flake:github:NixOS/nixpkgs/nixos-22.05
</code></pre>
<p>makes <code>&lt;nixpkgs&gt;</code> refer to a particular branch of the
<code>NixOS/nixpkgs</code> repository on GitHub.</p>
</li>
<li>
<p><code>--override-flake</code> <em>original-ref</em> <em>resolved-ref</em></p>
<p>Override the flake registries, redirecting <em>original-ref</em> to <em>resolved-ref</em>.</p>
</li>
</ul>
<p><strong>Common flake-related options:</strong></p>
<ul>
<li>
<p><code>--commit-lock-file</code></p>
<p>Commit changes to the flake's lock file.</p>
</li>
<li>
<p><code>--inputs-from</code> <em>flake-url</em></p>
<p>Use the inputs of the specified flake as registry entries.</p>
</li>
<li>
<p><code>--no-registries</code></p>
<p>Don't allow lookups in the flake registries. This option is deprecated; use <code>--no-use-registries</code>.</p>
</li>
<li>
<p><code>--no-update-lock-file</code></p>
<p>Do not allow any updates to the flake's lock file.</p>
</li>
<li>
<p><code>--no-write-lock-file</code></p>
<p>Do not write the flake's newly generated lock file.</p>
</li>
<li>
<p><code>--override-input</code> <em>input-path</em> <em>flake-url</em></p>
<p>Override a specific flake input (e.g. <code>dwarffs/nixpkgs</code>). This implies <code>--no-write-lock-file</code>.</p>
</li>
<li>
<p><code>--recreate-lock-file</code></p>
<p>Recreate the flake's lock file from scratch.</p>
</li>
<li>
<p><code>--update-input</code> <em>input-path</em></p>
<p>Update a specific flake input (ignoring its previous entry in the lock file).</p>
</li>
</ul>
<p><strong>Logging-related options:</strong></p>
<ul>
<li>
<p><code>--debug</code></p>
<p>Set the logging verbosity level to 'debug'.</p>
</li>
<li>
<p><code>--log-format</code> <em>format</em></p>
<p>Set the format of log output; one of <code>raw</code>, <code>internal-json</code>, <code>bar</code> or <code>bar-with-logs</code>.</p>
</li>
<li>
<p><code>--print-build-logs</code> / <code>-L</code></p>
<p>Print full build logs on standard error.</p>
</li>
<li>
<p><code>--quiet</code></p>
<p>Decrease the logging verbosity level.</p>
</li>
<li>
<p><code>--verbose</code> / <code>-v</code></p>
<p>Increase the logging verbosity level.</p>
</li>
</ul>
<p><strong>Miscellaneous global options:</strong></p>
<ul>
<li>
<p><code>--help</code></p>
<p>Show usage information.</p>
</li>
<li>
<p><code>--offline</code></p>
<p>Disable substituters and consider all previously downloaded files up-to-date.</p>
</li>
<li>
<p><code>--option</code> <em>name</em> <em>value</em></p>
<p>Set the Nix configuration setting <em>name</em> to <em>value</em> (overriding <code>nix.conf</code>).</p>
</li>
<li>
<p><code>--refresh</code></p>
<p>Consider all previously downloaded files out-of-date.</p>
</li>
<li>
<p><code>--version</code></p>
<p>Show version information.</p>
</li>
</ul>
<p><strong>Options to override configuration settings:</strong></p>
<ul>
<li>
<p><code>--accept-flake-config</code></p>
<p>Enable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--access-tokens</code> <em>value</em></p>
<p>Set the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--allow-dirty</code></p>
<p>Enable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--allow-import-from-derivation</code></p>
<p>Enable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--allow-new-privileges</code></p>
<p>Enable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--allow-symlinked-store</code></p>
<p>Enable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--allow-unsafe-native-code-during-evaluation</code></p>
<p>Enable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--allowed-impure-host-deps</code> <em>value</em></p>
<p>Set the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--allowed-uris</code> <em>value</em></p>
<p>Set the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--allowed-users</code> <em>value</em></p>
<p>Set the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--auto-allocate-uids</code></p>
<p>Enable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--auto-optimise-store</code></p>
<p>Enable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt</code> <em>value</em></p>
<p>Set the <code>bash-prompt</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-prefix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-prefix</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-suffix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-suffix</code> setting.</p>
</li>
<li>
<p><code>--build-hook</code> <em>value</em></p>
<p>Set the <code>build-hook</code> setting.</p>
</li>
<li>
<p><code>--build-poll-interval</code> <em>value</em></p>
<p>Set the <code>build-poll-interval</code> setting.</p>
</li>
<li>
<p><code>--build-users-group</code> <em>value</em></p>
<p>Set the <code>build-users-group</code> setting.</p>
</li>
<li>
<p><code>--builders</code> <em>value</em></p>
<p>Set the <code>builders</code> setting.</p>
</li>
<li>
<p><code>--builders-use-substitutes</code></p>
<p>Enable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--commit-lockfile-summary</code> <em>value</em></p>
<p>Set the <code>commit-lockfile-summary</code> setting.</p>
</li>
<li>
<p><code>--compress-build-log</code></p>
<p>Enable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--connect-timeout</code> <em>value</em></p>
<p>Set the <code>connect-timeout</code> setting.</p>
</li>
<li>
<p><code>--cores</code> <em>value</em></p>
<p>Set the <code>cores</code> setting.</p>
</li>
<li>
<p><code>--diff-hook</code> <em>value</em></p>
<p>Set the <code>diff-hook</code> setting.</p>
</li>
<li>
<p><code>--download-attempts</code> <em>value</em></p>
<p>Set the <code>download-attempts</code> setting.</p>
</li>
<li>
<p><code>--download-speed</code> <em>value</em></p>
<p>Set the <code>download-speed</code> setting.</p>
</li>
<li>
<p><code>--eval-cache</code></p>
<p>Enable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--experimental-features</code> <em>value</em></p>
<p>Set the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-access-tokens</code> <em>value</em></p>
<p>Append to the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-impure-host-deps</code> <em>value</em></p>
<p>Append to the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-uris</code> <em>value</em></p>
<p>Append to the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-users</code> <em>value</em></p>
<p>Append to the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--extra-experimental-features</code> <em>value</em></p>
<p>Append to the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-extra-platforms</code> <em>value</em></p>
<p>Append to the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-hashed-mirrors</code> <em>value</em></p>
<p>Append to the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--extra-ignored-acls</code> <em>value</em></p>
<p>Append to the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--extra-nix-path</code> <em>value</em></p>
<p>Append to the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--extra-platforms</code> <em>value</em></p>
<p>Set the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-plugin-files</code> <em>value</em></p>
<p>Append to the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--extra-sandbox-paths</code> <em>value</em></p>
<p>Append to the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--extra-secret-key-files</code> <em>value</em></p>
<p>Append to the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--extra-substituters</code> <em>value</em></p>
<p>Append to the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-system-features</code> <em>value</em></p>
<p>Append to the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-public-keys</code> <em>value</em></p>
<p>Append to the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-substituters</code> <em>value</em></p>
<p>Append to the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-users</code> <em>value</em></p>
<p>Append to the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--fallback</code></p>
<p>Enable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--filter-syscalls</code></p>
<p>Enable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--flake-registry</code> <em>value</em></p>
<p>Set the <code>flake-registry</code> setting.</p>
</li>
<li>
<p><code>--fsync-metadata</code></p>
<p>Enable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--gc-reserved-space</code> <em>value</em></p>
<p>Set the <code>gc-reserved-space</code> setting.</p>
</li>
<li>
<p><code>--hashed-mirrors</code> <em>value</em></p>
<p>Set the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--http-connections</code> <em>value</em></p>
<p>Set the <code>http-connections</code> setting.</p>
</li>
<li>
<p><code>--http2</code></p>
<p>Enable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--id-count</code> <em>value</em></p>
<p>Set the <code>id-count</code> setting.</p>
</li>
<li>
<p><code>--ignore-try</code></p>
<p>Enable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--ignored-acls</code> <em>value</em></p>
<p>Set the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--impersonate-linux-26</code></p>
<p>Enable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--keep-build-log</code></p>
<p>Enable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--keep-derivations</code></p>
<p>Enable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-env-derivations</code></p>
<p>Enable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-failed</code></p>
<p>Enable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--keep-going</code></p>
<p>Enable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--keep-outputs</code></p>
<p>Enable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--log-lines</code> <em>value</em></p>
<p>Set the <code>log-lines</code> setting.</p>
</li>
<li>
<p><code>--max-build-log-size</code> <em>value</em></p>
<p>Set the <code>max-build-log-size</code> setting.</p>
</li>
<li>
<p><code>--max-free</code> <em>value</em></p>
<p>Set the <code>max-free</code> setting.</p>
</li>
<li>
<p><code>--max-jobs</code> <em>value</em></p>
<p>Set the <code>max-jobs</code> setting.</p>
</li>
<li>
<p><code>--max-silent-time</code> <em>value</em></p>
<p>Set the <code>max-silent-time</code> setting.</p>
</li>
<li>
<p><code>--min-free</code> <em>value</em></p>
<p>Set the <code>min-free</code> setting.</p>
</li>
<li>
<p><code>--min-free-check-interval</code> <em>value</em></p>
<p>Set the <code>min-free-check-interval</code> setting.</p>
</li>
<li>
<p><code>--nar-buffer-size</code> <em>value</em></p>
<p>Set the <code>nar-buffer-size</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-negative-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-negative-ttl</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-positive-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-positive-ttl</code> setting.</p>
</li>
<li>
<p><code>--netrc-file</code> <em>value</em></p>
<p>Set the <code>netrc-file</code> setting.</p>
</li>
<li>
<p><code>--nix-path</code> <em>value</em></p>
<p>Set the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--no-accept-flake-config</code></p>
<p>Disable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--no-allow-dirty</code></p>
<p>Disable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--no-allow-import-from-derivation</code></p>
<p>Disable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--no-allow-new-privileges</code></p>
<p>Disable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--no-allow-symlinked-store</code></p>
<p>Disable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--no-allow-unsafe-native-code-during-evaluation</code></p>
<p>Disable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--no-auto-allocate-uids</code></p>
<p>Disable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--no-auto-optimise-store</code></p>
<p>Disable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--no-builders-use-substitutes</code></p>
<p>Disable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--no-compress-build-log</code></p>
<p>Disable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-eval-cache</code></p>
<p>Disable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--no-fallback</code></p>
<p>Disable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--no-filter-syscalls</code></p>
<p>Disable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--no-fsync-metadata</code></p>
<p>Disable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--no-http2</code></p>
<p>Disable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--no-ignore-try</code></p>
<p>Disable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--no-impersonate-linux-26</code></p>
<p>Disable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--no-keep-build-log</code></p>
<p>Disable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-keep-derivations</code></p>
<p>Disable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-env-derivations</code></p>
<p>Disable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-failed</code></p>
<p>Disable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--no-keep-going</code></p>
<p>Disable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--no-keep-outputs</code></p>
<p>Disable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--no-preallocate-contents</code></p>
<p>Disable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--no-print-missing</code></p>
<p>Disable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--no-pure-eval</code></p>
<p>Disable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--no-require-sigs</code></p>
<p>Disable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--no-restrict-eval</code></p>
<p>Disable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--no-run-diff-hook</code></p>
<p>Disable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--no-sandbox</code></p>
<p>Disable sandboxing.</p>
</li>
<li>
<p><code>--no-sandbox-fallback</code></p>
<p>Disable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--no-show-trace</code></p>
<p>Disable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--no-substitute</code></p>
<p>Disable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--no-sync-before-registering</code></p>
<p>Disable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--no-trace-function-calls</code></p>
<p>Disable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--no-trace-verbose</code></p>
<p>Disable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--no-use-case-hack</code></p>
<p>Disable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--no-use-cgroups</code></p>
<p>Disable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--no-use-registries</code></p>
<p>Disable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--no-use-sqlite-wal</code></p>
<p>Disable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--no-warn-dirty</code></p>
<p>Disable the <code>warn-dirty</code> setting.</p>
</li>
<li>
<p><code>--plugin-files</code> <em>value</em></p>
<p>Set the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--post-build-hook</code> <em>value</em></p>
<p>Set the <code>post-build-hook</code> setting.</p>
</li>
<li>
<p><code>--pre-build-hook</code> <em>value</em></p>
<p>Set the <code>pre-build-hook</code> setting.</p>
</li>
<li>
<p><code>--preallocate-contents</code></p>
<p>Enable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--print-missing</code></p>
<p>Enable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--pure-eval</code></p>
<p>Enable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--relaxed-sandbox</code></p>
<p>Enable sandboxing, but allow builds to disable it.</p>
</li>
<li>
<p><code>--require-sigs</code></p>
<p>Enable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--restrict-eval</code></p>
<p>Enable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--run-diff-hook</code></p>
<p>Enable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--sandbox</code></p>
<p>Enable sandboxing.</p>
</li>
<li>
<p><code>--sandbox-build-dir</code> <em>value</em></p>
<p>Set the <code>sandbox-build-dir</code> setting.</p>
</li>
<li>
<p><code>--sandbox-dev-shm-size</code> <em>value</em></p>
<p>Set the <code>sandbox-dev-shm-size</code> setting.</p>
</li>
<li>
<p><code>--sandbox-fallback</code></p>
<p>Enable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--sandbox-paths</code> <em>value</em></p>
<p>Set the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--secret-key-files</code> <em>value</em></p>
<p>Set the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--show-trace</code></p>
<p>Enable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--stalled-download-timeout</code> <em>value</em></p>
<p>Set the <code>stalled-download-timeout</code> setting.</p>
</li>
<li>
<p><code>--start-id</code> <em>value</em></p>
<p>Set the <code>start-id</code> setting.</p>
</li>
<li>
<p><code>--store</code> <em>value</em></p>
<p>Set the <code>store</code> setting.</p>
</li>
<li>
<p><code>--substitute</code></p>
<p>Enable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--substituters</code> <em>value</em></p>
<p>Set the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--sync-before-registering</code></p>
<p>Enable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--system</code> <em>value</em></p>
<p>Set the <code>system</code> setting.</p>
</li>
<li>
<p><code>--system-features</code> <em>value</em></p>
<p>Set the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--tarball-ttl</code> <em>value</em></p>
<p>Set the <code>tarball-ttl</code> setting.</p>
</li>
<li>
<p><code>--timeout</code> <em>value</em></p>
<p>Set the <code>timeout</code> setting.</p>
</li>
<li>
<p><code>--trace-function-calls</code></p>
<p>Enable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--trace-verbose</code></p>
<p>Enable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--trusted-public-keys</code> <em>value</em></p>
<p>Set the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--trusted-substituters</code> <em>value</em></p>
<p>Set the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--trusted-users</code> <em>value</em></p>
<p>Set the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--use-case-hack</code></p>
<p>Enable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--use-cgroups</code></p>
<p>Enable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--use-registries</code></p>
<p>Enable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--use-sqlite-wal</code></p>
<p>Enable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--user-agent-suffix</code> <em>value</em></p>
<p>Set the <code>user-agent-suffix</code> setting.</p>
</li>
<li>
<p><code>--warn-dirty</code></p>
<p>Enable the <code>warn-dirty</code> setting.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p><strong>Warning</strong> <br />
This program is <strong>experimental</strong> and its interface is subject to change.</p>
</blockquote>
<h1 id="name-25"><a class="header" href="#name-25">Name</a></h1>
<p><code>nix flake info</code> - show flake metadata</p>
<h1 id="synopsis-56"><a class="header" href="#synopsis-56">Synopsis</a></h1>
<p><code>nix flake info</code> [<em>option</em>...] <em>flake-url</em></p>
<h1 id="examples-35"><a class="header" href="#examples-35">Examples</a></h1>
<ul>
<li>
<p>Show what <code>nixpkgs</code> resolves to:</p>
<pre><code class="language-console"># nix flake metadata nixpkgs
Resolved URL:  github:edolstra/dwarffs
Locked URL:    github:edolstra/dwarffs/f691e2c991e75edb22836f1dbe632c40324215c5
Description:   A filesystem that fetches DWARF debug info from the Internet on demand
Path:          /nix/store/769s05vjydmc2lcf6b02az28wsa9ixh1-source
Revision:      f691e2c991e75edb22836f1dbe632c40324215c5
Last modified: 2021-01-21 15:41:26
Inputs:
├───nix: github:NixOS/nix/6254b1f5d298ff73127d7b0f0da48f142bdc753c
│   ├───lowdown-src: github:kristapsdz/lowdown/1705b4a26fbf065d9574dce47a94e8c7c79e052f
│   └───nixpkgs: github:NixOS/nixpkgs/ad0d20345219790533ebe06571f82ed6b034db31
└───nixpkgs follows input 'nix/nixpkgs'
</code></pre>
</li>
<li>
<p>Show information about <code>dwarffs</code> in JSON format:</p>
<pre><code class="language-console"># nix flake metadata dwarffs --json | jq .
{
  &quot;description&quot;: &quot;A filesystem that fetches DWARF debug info from the Internet on demand&quot;,
  &quot;lastModified&quot;: 1597153508,
  &quot;locked&quot;: {
    &quot;lastModified&quot;: 1597153508,
    &quot;narHash&quot;: &quot;sha256-VHg3MYVgQ12LeRSU2PSoDeKlSPD8PYYEFxxwkVVDRd0=&quot;,
    &quot;owner&quot;: &quot;edolstra&quot;,
    &quot;repo&quot;: &quot;dwarffs&quot;,
    &quot;rev&quot;: &quot;d181d714fd36eb06f4992a1997cd5601e26db8f5&quot;,
    &quot;type&quot;: &quot;github&quot;
  },
  &quot;locks&quot;: { ... },
  &quot;original&quot;: {
    &quot;id&quot;: &quot;dwarffs&quot;,
    &quot;type&quot;: &quot;indirect&quot;
  },
  &quot;originalUrl&quot;: &quot;flake:dwarffs&quot;,
  &quot;path&quot;: &quot;/nix/store/hang3792qwdmm2n0d9nsrs5n6bsws6kv-source&quot;,
  &quot;resolved&quot;: {
    &quot;owner&quot;: &quot;edolstra&quot;,
    &quot;repo&quot;: &quot;dwarffs&quot;,
    &quot;type&quot;: &quot;github&quot;
  },
  &quot;resolvedUrl&quot;: &quot;github:edolstra/dwarffs&quot;,
  &quot;revision&quot;: &quot;d181d714fd36eb06f4992a1997cd5601e26db8f5&quot;,
  &quot;url&quot;: &quot;github:edolstra/dwarffs/d181d714fd36eb06f4992a1997cd5601e26db8f5&quot;
}
</code></pre>
</li>
</ul>
<h1 id="description-54"><a class="header" href="#description-54">Description</a></h1>
<p>This command shows information about the flake specified by the flake
reference <em>flake-url</em>. It resolves the flake reference using the
<a href="command-ref/new-cli/./nix3-registry.html">flake registry</a>, fetches it, and prints some meta
data. This includes:</p>
<ul>
<li>
<p><code>Resolved URL</code>: If <em>flake-url</em> is a flake identifier, then this is
the flake reference that specifies its actual location, looked up in
the flake registry.</p>
</li>
<li>
<p><code>Locked URL</code>: A flake reference that contains a commit or content
hash and thus uniquely identifies a specific flake version.</p>
</li>
<li>
<p><code>Description</code>: A one-line description of the flake, taken from the
<code>description</code> field in <code>flake.nix</code>.</p>
</li>
<li>
<p><code>Path</code>: The store path containing the source code of the flake.</p>
</li>
<li>
<p><code>Revision</code>: The Git or Mercurial commit hash of the locked flake.</p>
</li>
<li>
<p><code>Revisions</code>: The number of ancestors of the Git or Mercurial commit
of the locked flake. Note that this is not available for <code>github</code>
flakes.</p>
</li>
<li>
<p><code>Last modified</code>: For Git or Mercurial flakes, this is the commit
time of the commit of the locked flake; for tarball flakes, it's the
most recent timestamp of any file inside the tarball.</p>
</li>
<li>
<p><code>Inputs</code>: The flake inputs with their corresponding lock file
entries.</p>
</li>
</ul>
<p>With <code>--json</code>, the output is a JSON object with the following fields:</p>
<ul>
<li>
<p><code>original</code> and <code>originalUrl</code>: The flake reference specified by the
user (<em>flake-url</em>) in attribute set and URL representation.</p>
</li>
<li>
<p><code>resolved</code> and <code>resolvedUrl</code>: The resolved flake reference (see
above) in attribute set and URL representation.</p>
</li>
<li>
<p><code>locked</code> and <code>lockedUrl</code>: The locked flake reference (see above) in
attribute set and URL representation.</p>
</li>
<li>
<p><code>description</code>: See <code>Description</code> above.</p>
</li>
<li>
<p><code>path</code>: See <code>Path</code> above.</p>
</li>
<li>
<p><code>revision</code>: See <code>Revision</code> above.</p>
</li>
<li>
<p><code>revCount</code>: See <code>Revisions</code> above.</p>
</li>
<li>
<p><code>lastModified</code>: See <code>Last modified</code> above.</p>
</li>
<li>
<p><code>locks</code>: The contents of <code>flake.lock</code>.</p>
</li>
</ul>
<h1 id="options-17"><a class="header" href="#options-17">Options</a></h1>
<ul>
<li>
<p><code>--json</code></p>
<p>Produce output in JSON format, suitable for consumption by another program.</p>
</li>
</ul>
<p><strong>Common evaluation options:</strong></p>
<ul>
<li>
<p><code>--arg</code> <em>name</em> <em>expr</em></p>
<p>Pass the value <em>expr</em> as the argument <em>name</em> to Nix functions.</p>
</li>
<li>
<p><code>--argstr</code> <em>name</em> <em>string</em></p>
<p>Pass the string <em>string</em> as the argument <em>name</em> to Nix functions.</p>
</li>
<li>
<p><code>--debugger</code></p>
<p>Start an interactive environment if evaluation fails.</p>
</li>
<li>
<p><code>--eval-store</code> <em>store-url</em></p>
<p>The Nix store to use for evaluations.</p>
</li>
<li>
<p><code>--impure</code></p>
<p>Allow access to mutable paths and repositories.</p>
</li>
<li>
<p><code>--include</code> / <code>-I</code> <em>path</em></p>
<p>Add <em>path</em> to the Nix search path. The Nix search path is
initialized from the colon-separated <a href="command-ref/new-cli/../../command-ref/env-common.html#env-NIX_PATH"><code>NIX_PATH</code></a> environment
variable, and is used to look up the location of Nix expressions using <a href="command-ref/new-cli/../../language/values.html#type-path">paths</a> enclosed in angle
brackets (i.e., <code>&lt;nixpkgs&gt;</code>).</p>
<p>For instance, passing</p>
<pre><code>-I /home/eelco/Dev
-I /etc/nixos
</code></pre>
<p>will cause Nix to look for paths relative to <code>/home/eelco/Dev</code> and
<code>/etc/nixos</code>, in that order. This is equivalent to setting the
<code>NIX_PATH</code> environment variable to</p>
<pre><code>/home/eelco/Dev:/etc/nixos
</code></pre>
<p>It is also possible to match paths against a prefix. For example,
passing</p>
<pre><code>-I nixpkgs=/home/eelco/Dev/nixpkgs-branch
-I /etc/nixos
</code></pre>
<p>will cause Nix to search for <code>&lt;nixpkgs/path&gt;</code> in
<code>/home/eelco/Dev/nixpkgs-branch/path</code> and <code>/etc/nixos/nixpkgs/path</code>.</p>
<p>If a path in the Nix search path starts with <code>http://</code> or <code>https://</code>,
it is interpreted as the URL of a tarball that will be downloaded and
unpacked to a temporary location. The tarball must consist of a single
top-level directory. For example, passing</p>
<pre><code>-I nixpkgs=https://github.com/NixOS/nixpkgs/archive/master.tar.gz
</code></pre>
<p>tells Nix to download and use the current contents of the <code>master</code>
branch in the <code>nixpkgs</code> repository.</p>
<p>The URLs of the tarballs from the official <code>nixos.org</code> channels
(see <a href="command-ref/new-cli/../nix-channel.html">the manual page for <code>nix-channel</code></a>) can be
abbreviated as <code>channel:&lt;channel-name&gt;</code>. For instance, the
following two flags are equivalent:</p>
<pre><code>-I nixpkgs=channel:nixos-21.05
-I nixpkgs=https://nixos.org/channels/nixos-21.05/nixexprs.tar.xz
</code></pre>
<p>You can also fetch source trees using <a href="command-ref/new-cli/./nix3-flake.html#url-like-syntax">flake URLs</a> and add them to the
search path. For instance,</p>
<pre><code>-I nixpkgs=flake:nixpkgs
</code></pre>
<p>specifies that the prefix <code>nixpkgs</code> shall refer to the source tree
downloaded from the <code>nixpkgs</code> entry in the flake registry. Similarly,</p>
<pre><code>-I nixpkgs=flake:github:NixOS/nixpkgs/nixos-22.05
</code></pre>
<p>makes <code>&lt;nixpkgs&gt;</code> refer to a particular branch of the
<code>NixOS/nixpkgs</code> repository on GitHub.</p>
</li>
<li>
<p><code>--override-flake</code> <em>original-ref</em> <em>resolved-ref</em></p>
<p>Override the flake registries, redirecting <em>original-ref</em> to <em>resolved-ref</em>.</p>
</li>
</ul>
<p><strong>Common flake-related options:</strong></p>
<ul>
<li>
<p><code>--commit-lock-file</code></p>
<p>Commit changes to the flake's lock file.</p>
</li>
<li>
<p><code>--inputs-from</code> <em>flake-url</em></p>
<p>Use the inputs of the specified flake as registry entries.</p>
</li>
<li>
<p><code>--no-registries</code></p>
<p>Don't allow lookups in the flake registries. This option is deprecated; use <code>--no-use-registries</code>.</p>
</li>
<li>
<p><code>--no-update-lock-file</code></p>
<p>Do not allow any updates to the flake's lock file.</p>
</li>
<li>
<p><code>--no-write-lock-file</code></p>
<p>Do not write the flake's newly generated lock file.</p>
</li>
<li>
<p><code>--override-input</code> <em>input-path</em> <em>flake-url</em></p>
<p>Override a specific flake input (e.g. <code>dwarffs/nixpkgs</code>). This implies <code>--no-write-lock-file</code>.</p>
</li>
<li>
<p><code>--recreate-lock-file</code></p>
<p>Recreate the flake's lock file from scratch.</p>
</li>
<li>
<p><code>--update-input</code> <em>input-path</em></p>
<p>Update a specific flake input (ignoring its previous entry in the lock file).</p>
</li>
</ul>
<p><strong>Logging-related options:</strong></p>
<ul>
<li>
<p><code>--debug</code></p>
<p>Set the logging verbosity level to 'debug'.</p>
</li>
<li>
<p><code>--log-format</code> <em>format</em></p>
<p>Set the format of log output; one of <code>raw</code>, <code>internal-json</code>, <code>bar</code> or <code>bar-with-logs</code>.</p>
</li>
<li>
<p><code>--print-build-logs</code> / <code>-L</code></p>
<p>Print full build logs on standard error.</p>
</li>
<li>
<p><code>--quiet</code></p>
<p>Decrease the logging verbosity level.</p>
</li>
<li>
<p><code>--verbose</code> / <code>-v</code></p>
<p>Increase the logging verbosity level.</p>
</li>
</ul>
<p><strong>Miscellaneous global options:</strong></p>
<ul>
<li>
<p><code>--help</code></p>
<p>Show usage information.</p>
</li>
<li>
<p><code>--offline</code></p>
<p>Disable substituters and consider all previously downloaded files up-to-date.</p>
</li>
<li>
<p><code>--option</code> <em>name</em> <em>value</em></p>
<p>Set the Nix configuration setting <em>name</em> to <em>value</em> (overriding <code>nix.conf</code>).</p>
</li>
<li>
<p><code>--refresh</code></p>
<p>Consider all previously downloaded files out-of-date.</p>
</li>
<li>
<p><code>--version</code></p>
<p>Show version information.</p>
</li>
</ul>
<p><strong>Options to override configuration settings:</strong></p>
<ul>
<li>
<p><code>--accept-flake-config</code></p>
<p>Enable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--access-tokens</code> <em>value</em></p>
<p>Set the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--allow-dirty</code></p>
<p>Enable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--allow-import-from-derivation</code></p>
<p>Enable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--allow-new-privileges</code></p>
<p>Enable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--allow-symlinked-store</code></p>
<p>Enable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--allow-unsafe-native-code-during-evaluation</code></p>
<p>Enable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--allowed-impure-host-deps</code> <em>value</em></p>
<p>Set the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--allowed-uris</code> <em>value</em></p>
<p>Set the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--allowed-users</code> <em>value</em></p>
<p>Set the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--auto-allocate-uids</code></p>
<p>Enable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--auto-optimise-store</code></p>
<p>Enable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt</code> <em>value</em></p>
<p>Set the <code>bash-prompt</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-prefix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-prefix</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-suffix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-suffix</code> setting.</p>
</li>
<li>
<p><code>--build-hook</code> <em>value</em></p>
<p>Set the <code>build-hook</code> setting.</p>
</li>
<li>
<p><code>--build-poll-interval</code> <em>value</em></p>
<p>Set the <code>build-poll-interval</code> setting.</p>
</li>
<li>
<p><code>--build-users-group</code> <em>value</em></p>
<p>Set the <code>build-users-group</code> setting.</p>
</li>
<li>
<p><code>--builders</code> <em>value</em></p>
<p>Set the <code>builders</code> setting.</p>
</li>
<li>
<p><code>--builders-use-substitutes</code></p>
<p>Enable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--commit-lockfile-summary</code> <em>value</em></p>
<p>Set the <code>commit-lockfile-summary</code> setting.</p>
</li>
<li>
<p><code>--compress-build-log</code></p>
<p>Enable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--connect-timeout</code> <em>value</em></p>
<p>Set the <code>connect-timeout</code> setting.</p>
</li>
<li>
<p><code>--cores</code> <em>value</em></p>
<p>Set the <code>cores</code> setting.</p>
</li>
<li>
<p><code>--diff-hook</code> <em>value</em></p>
<p>Set the <code>diff-hook</code> setting.</p>
</li>
<li>
<p><code>--download-attempts</code> <em>value</em></p>
<p>Set the <code>download-attempts</code> setting.</p>
</li>
<li>
<p><code>--download-speed</code> <em>value</em></p>
<p>Set the <code>download-speed</code> setting.</p>
</li>
<li>
<p><code>--eval-cache</code></p>
<p>Enable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--experimental-features</code> <em>value</em></p>
<p>Set the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-access-tokens</code> <em>value</em></p>
<p>Append to the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-impure-host-deps</code> <em>value</em></p>
<p>Append to the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-uris</code> <em>value</em></p>
<p>Append to the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-users</code> <em>value</em></p>
<p>Append to the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--extra-experimental-features</code> <em>value</em></p>
<p>Append to the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-extra-platforms</code> <em>value</em></p>
<p>Append to the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-hashed-mirrors</code> <em>value</em></p>
<p>Append to the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--extra-ignored-acls</code> <em>value</em></p>
<p>Append to the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--extra-nix-path</code> <em>value</em></p>
<p>Append to the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--extra-platforms</code> <em>value</em></p>
<p>Set the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-plugin-files</code> <em>value</em></p>
<p>Append to the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--extra-sandbox-paths</code> <em>value</em></p>
<p>Append to the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--extra-secret-key-files</code> <em>value</em></p>
<p>Append to the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--extra-substituters</code> <em>value</em></p>
<p>Append to the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-system-features</code> <em>value</em></p>
<p>Append to the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-public-keys</code> <em>value</em></p>
<p>Append to the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-substituters</code> <em>value</em></p>
<p>Append to the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-users</code> <em>value</em></p>
<p>Append to the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--fallback</code></p>
<p>Enable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--filter-syscalls</code></p>
<p>Enable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--flake-registry</code> <em>value</em></p>
<p>Set the <code>flake-registry</code> setting.</p>
</li>
<li>
<p><code>--fsync-metadata</code></p>
<p>Enable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--gc-reserved-space</code> <em>value</em></p>
<p>Set the <code>gc-reserved-space</code> setting.</p>
</li>
<li>
<p><code>--hashed-mirrors</code> <em>value</em></p>
<p>Set the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--http-connections</code> <em>value</em></p>
<p>Set the <code>http-connections</code> setting.</p>
</li>
<li>
<p><code>--http2</code></p>
<p>Enable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--id-count</code> <em>value</em></p>
<p>Set the <code>id-count</code> setting.</p>
</li>
<li>
<p><code>--ignore-try</code></p>
<p>Enable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--ignored-acls</code> <em>value</em></p>
<p>Set the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--impersonate-linux-26</code></p>
<p>Enable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--keep-build-log</code></p>
<p>Enable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--keep-derivations</code></p>
<p>Enable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-env-derivations</code></p>
<p>Enable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-failed</code></p>
<p>Enable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--keep-going</code></p>
<p>Enable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--keep-outputs</code></p>
<p>Enable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--log-lines</code> <em>value</em></p>
<p>Set the <code>log-lines</code> setting.</p>
</li>
<li>
<p><code>--max-build-log-size</code> <em>value</em></p>
<p>Set the <code>max-build-log-size</code> setting.</p>
</li>
<li>
<p><code>--max-free</code> <em>value</em></p>
<p>Set the <code>max-free</code> setting.</p>
</li>
<li>
<p><code>--max-jobs</code> <em>value</em></p>
<p>Set the <code>max-jobs</code> setting.</p>
</li>
<li>
<p><code>--max-silent-time</code> <em>value</em></p>
<p>Set the <code>max-silent-time</code> setting.</p>
</li>
<li>
<p><code>--min-free</code> <em>value</em></p>
<p>Set the <code>min-free</code> setting.</p>
</li>
<li>
<p><code>--min-free-check-interval</code> <em>value</em></p>
<p>Set the <code>min-free-check-interval</code> setting.</p>
</li>
<li>
<p><code>--nar-buffer-size</code> <em>value</em></p>
<p>Set the <code>nar-buffer-size</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-negative-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-negative-ttl</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-positive-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-positive-ttl</code> setting.</p>
</li>
<li>
<p><code>--netrc-file</code> <em>value</em></p>
<p>Set the <code>netrc-file</code> setting.</p>
</li>
<li>
<p><code>--nix-path</code> <em>value</em></p>
<p>Set the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--no-accept-flake-config</code></p>
<p>Disable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--no-allow-dirty</code></p>
<p>Disable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--no-allow-import-from-derivation</code></p>
<p>Disable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--no-allow-new-privileges</code></p>
<p>Disable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--no-allow-symlinked-store</code></p>
<p>Disable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--no-allow-unsafe-native-code-during-evaluation</code></p>
<p>Disable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--no-auto-allocate-uids</code></p>
<p>Disable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--no-auto-optimise-store</code></p>
<p>Disable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--no-builders-use-substitutes</code></p>
<p>Disable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--no-compress-build-log</code></p>
<p>Disable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-eval-cache</code></p>
<p>Disable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--no-fallback</code></p>
<p>Disable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--no-filter-syscalls</code></p>
<p>Disable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--no-fsync-metadata</code></p>
<p>Disable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--no-http2</code></p>
<p>Disable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--no-ignore-try</code></p>
<p>Disable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--no-impersonate-linux-26</code></p>
<p>Disable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--no-keep-build-log</code></p>
<p>Disable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-keep-derivations</code></p>
<p>Disable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-env-derivations</code></p>
<p>Disable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-failed</code></p>
<p>Disable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--no-keep-going</code></p>
<p>Disable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--no-keep-outputs</code></p>
<p>Disable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--no-preallocate-contents</code></p>
<p>Disable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--no-print-missing</code></p>
<p>Disable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--no-pure-eval</code></p>
<p>Disable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--no-require-sigs</code></p>
<p>Disable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--no-restrict-eval</code></p>
<p>Disable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--no-run-diff-hook</code></p>
<p>Disable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--no-sandbox</code></p>
<p>Disable sandboxing.</p>
</li>
<li>
<p><code>--no-sandbox-fallback</code></p>
<p>Disable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--no-show-trace</code></p>
<p>Disable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--no-substitute</code></p>
<p>Disable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--no-sync-before-registering</code></p>
<p>Disable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--no-trace-function-calls</code></p>
<p>Disable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--no-trace-verbose</code></p>
<p>Disable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--no-use-case-hack</code></p>
<p>Disable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--no-use-cgroups</code></p>
<p>Disable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--no-use-registries</code></p>
<p>Disable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--no-use-sqlite-wal</code></p>
<p>Disable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--no-warn-dirty</code></p>
<p>Disable the <code>warn-dirty</code> setting.</p>
</li>
<li>
<p><code>--plugin-files</code> <em>value</em></p>
<p>Set the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--post-build-hook</code> <em>value</em></p>
<p>Set the <code>post-build-hook</code> setting.</p>
</li>
<li>
<p><code>--pre-build-hook</code> <em>value</em></p>
<p>Set the <code>pre-build-hook</code> setting.</p>
</li>
<li>
<p><code>--preallocate-contents</code></p>
<p>Enable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--print-missing</code></p>
<p>Enable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--pure-eval</code></p>
<p>Enable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--relaxed-sandbox</code></p>
<p>Enable sandboxing, but allow builds to disable it.</p>
</li>
<li>
<p><code>--require-sigs</code></p>
<p>Enable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--restrict-eval</code></p>
<p>Enable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--run-diff-hook</code></p>
<p>Enable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--sandbox</code></p>
<p>Enable sandboxing.</p>
</li>
<li>
<p><code>--sandbox-build-dir</code> <em>value</em></p>
<p>Set the <code>sandbox-build-dir</code> setting.</p>
</li>
<li>
<p><code>--sandbox-dev-shm-size</code> <em>value</em></p>
<p>Set the <code>sandbox-dev-shm-size</code> setting.</p>
</li>
<li>
<p><code>--sandbox-fallback</code></p>
<p>Enable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--sandbox-paths</code> <em>value</em></p>
<p>Set the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--secret-key-files</code> <em>value</em></p>
<p>Set the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--show-trace</code></p>
<p>Enable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--stalled-download-timeout</code> <em>value</em></p>
<p>Set the <code>stalled-download-timeout</code> setting.</p>
</li>
<li>
<p><code>--start-id</code> <em>value</em></p>
<p>Set the <code>start-id</code> setting.</p>
</li>
<li>
<p><code>--store</code> <em>value</em></p>
<p>Set the <code>store</code> setting.</p>
</li>
<li>
<p><code>--substitute</code></p>
<p>Enable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--substituters</code> <em>value</em></p>
<p>Set the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--sync-before-registering</code></p>
<p>Enable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--system</code> <em>value</em></p>
<p>Set the <code>system</code> setting.</p>
</li>
<li>
<p><code>--system-features</code> <em>value</em></p>
<p>Set the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--tarball-ttl</code> <em>value</em></p>
<p>Set the <code>tarball-ttl</code> setting.</p>
</li>
<li>
<p><code>--timeout</code> <em>value</em></p>
<p>Set the <code>timeout</code> setting.</p>
</li>
<li>
<p><code>--trace-function-calls</code></p>
<p>Enable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--trace-verbose</code></p>
<p>Enable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--trusted-public-keys</code> <em>value</em></p>
<p>Set the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--trusted-substituters</code> <em>value</em></p>
<p>Set the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--trusted-users</code> <em>value</em></p>
<p>Set the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--use-case-hack</code></p>
<p>Enable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--use-cgroups</code></p>
<p>Enable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--use-registries</code></p>
<p>Enable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--use-sqlite-wal</code></p>
<p>Enable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--user-agent-suffix</code> <em>value</em></p>
<p>Set the <code>user-agent-suffix</code> setting.</p>
</li>
<li>
<p><code>--warn-dirty</code></p>
<p>Enable the <code>warn-dirty</code> setting.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p><strong>Warning</strong> <br />
This program is <strong>experimental</strong> and its interface is subject to change.</p>
</blockquote>
<h1 id="name-26"><a class="header" href="#name-26">Name</a></h1>
<p><code>nix flake init</code> - create a flake in the current directory from a template</p>
<h1 id="synopsis-57"><a class="header" href="#synopsis-57">Synopsis</a></h1>
<p><code>nix flake init</code> [<em>option</em>...] </p>
<h1 id="examples-36"><a class="header" href="#examples-36">Examples</a></h1>
<ul>
<li>
<p>Create a flake using the default template:</p>
<pre><code class="language-console"># nix flake init
</code></pre>
</li>
<li>
<p>List available templates:</p>
<pre><code class="language-console"># nix flake show templates
</code></pre>
</li>
<li>
<p>Create a flake from a specific template:</p>
<pre><code class="language-console"># nix flake init -t templates#simpleContainer
</code></pre>
</li>
</ul>
<h1 id="description-55"><a class="header" href="#description-55">Description</a></h1>
<p>This command creates a flake in the current directory by copying the
files of a template. It will not overwrite existing files. The default
template is <code>templates#templates.default</code>, but this can be overridden
using <code>-t</code>.</p>
<h1 id="template-definitions"><a class="header" href="#template-definitions">Template definitions</a></h1>
<p>A flake can declare templates through its <code>templates</code> output
attribute. A template has two attributes:</p>
<ul>
<li>
<p><code>description</code>: A one-line description of the template, in CommonMark
syntax.</p>
</li>
<li>
<p><code>path</code>: The path of the directory to be copied.</p>
</li>
<li>
<p><code>welcomeText</code>: A block of markdown text to display when a user initializes a
new flake based on this template.</p>
</li>
</ul>
<p>Here is an example:</p>
<pre><code>outputs = { self }: {

  templates.rust = {
    path = ./rust;
    description = &quot;A simple Rust/Cargo project&quot;;
    welcomeText = ''
      # Simple Rust/Cargo Template
      ## Intended usage
      The intended usage of this flake is...

      ## More info
      - [Rust language](https://www.rust-lang.org/)
      - [Rust on the NixOS Wiki](https://nixos.wiki/wiki/Rust)
      - ...
    '';
  };

  templates.default = self.templates.rust;
}
</code></pre>
<h1 id="options-18"><a class="header" href="#options-18">Options</a></h1>
<ul>
<li>
<p><code>--template</code> / <code>-t</code> <em>template</em></p>
<p>The template to use.</p>
</li>
</ul>
<p><strong>Common evaluation options:</strong></p>
<ul>
<li>
<p><code>--arg</code> <em>name</em> <em>expr</em></p>
<p>Pass the value <em>expr</em> as the argument <em>name</em> to Nix functions.</p>
</li>
<li>
<p><code>--argstr</code> <em>name</em> <em>string</em></p>
<p>Pass the string <em>string</em> as the argument <em>name</em> to Nix functions.</p>
</li>
<li>
<p><code>--debugger</code></p>
<p>Start an interactive environment if evaluation fails.</p>
</li>
<li>
<p><code>--eval-store</code> <em>store-url</em></p>
<p>The Nix store to use for evaluations.</p>
</li>
<li>
<p><code>--impure</code></p>
<p>Allow access to mutable paths and repositories.</p>
</li>
<li>
<p><code>--include</code> / <code>-I</code> <em>path</em></p>
<p>Add <em>path</em> to the Nix search path. The Nix search path is
initialized from the colon-separated <a href="command-ref/new-cli/../../command-ref/env-common.html#env-NIX_PATH"><code>NIX_PATH</code></a> environment
variable, and is used to look up the location of Nix expressions using <a href="command-ref/new-cli/../../language/values.html#type-path">paths</a> enclosed in angle
brackets (i.e., <code>&lt;nixpkgs&gt;</code>).</p>
<p>For instance, passing</p>
<pre><code>-I /home/eelco/Dev
-I /etc/nixos
</code></pre>
<p>will cause Nix to look for paths relative to <code>/home/eelco/Dev</code> and
<code>/etc/nixos</code>, in that order. This is equivalent to setting the
<code>NIX_PATH</code> environment variable to</p>
<pre><code>/home/eelco/Dev:/etc/nixos
</code></pre>
<p>It is also possible to match paths against a prefix. For example,
passing</p>
<pre><code>-I nixpkgs=/home/eelco/Dev/nixpkgs-branch
-I /etc/nixos
</code></pre>
<p>will cause Nix to search for <code>&lt;nixpkgs/path&gt;</code> in
<code>/home/eelco/Dev/nixpkgs-branch/path</code> and <code>/etc/nixos/nixpkgs/path</code>.</p>
<p>If a path in the Nix search path starts with <code>http://</code> or <code>https://</code>,
it is interpreted as the URL of a tarball that will be downloaded and
unpacked to a temporary location. The tarball must consist of a single
top-level directory. For example, passing</p>
<pre><code>-I nixpkgs=https://github.com/NixOS/nixpkgs/archive/master.tar.gz
</code></pre>
<p>tells Nix to download and use the current contents of the <code>master</code>
branch in the <code>nixpkgs</code> repository.</p>
<p>The URLs of the tarballs from the official <code>nixos.org</code> channels
(see <a href="command-ref/new-cli/../nix-channel.html">the manual page for <code>nix-channel</code></a>) can be
abbreviated as <code>channel:&lt;channel-name&gt;</code>. For instance, the
following two flags are equivalent:</p>
<pre><code>-I nixpkgs=channel:nixos-21.05
-I nixpkgs=https://nixos.org/channels/nixos-21.05/nixexprs.tar.xz
</code></pre>
<p>You can also fetch source trees using <a href="command-ref/new-cli/./nix3-flake.html#url-like-syntax">flake URLs</a> and add them to the
search path. For instance,</p>
<pre><code>-I nixpkgs=flake:nixpkgs
</code></pre>
<p>specifies that the prefix <code>nixpkgs</code> shall refer to the source tree
downloaded from the <code>nixpkgs</code> entry in the flake registry. Similarly,</p>
<pre><code>-I nixpkgs=flake:github:NixOS/nixpkgs/nixos-22.05
</code></pre>
<p>makes <code>&lt;nixpkgs&gt;</code> refer to a particular branch of the
<code>NixOS/nixpkgs</code> repository on GitHub.</p>
</li>
<li>
<p><code>--override-flake</code> <em>original-ref</em> <em>resolved-ref</em></p>
<p>Override the flake registries, redirecting <em>original-ref</em> to <em>resolved-ref</em>.</p>
</li>
</ul>
<p><strong>Logging-related options:</strong></p>
<ul>
<li>
<p><code>--debug</code></p>
<p>Set the logging verbosity level to 'debug'.</p>
</li>
<li>
<p><code>--log-format</code> <em>format</em></p>
<p>Set the format of log output; one of <code>raw</code>, <code>internal-json</code>, <code>bar</code> or <code>bar-with-logs</code>.</p>
</li>
<li>
<p><code>--print-build-logs</code> / <code>-L</code></p>
<p>Print full build logs on standard error.</p>
</li>
<li>
<p><code>--quiet</code></p>
<p>Decrease the logging verbosity level.</p>
</li>
<li>
<p><code>--verbose</code> / <code>-v</code></p>
<p>Increase the logging verbosity level.</p>
</li>
</ul>
<p><strong>Miscellaneous global options:</strong></p>
<ul>
<li>
<p><code>--help</code></p>
<p>Show usage information.</p>
</li>
<li>
<p><code>--offline</code></p>
<p>Disable substituters and consider all previously downloaded files up-to-date.</p>
</li>
<li>
<p><code>--option</code> <em>name</em> <em>value</em></p>
<p>Set the Nix configuration setting <em>name</em> to <em>value</em> (overriding <code>nix.conf</code>).</p>
</li>
<li>
<p><code>--refresh</code></p>
<p>Consider all previously downloaded files out-of-date.</p>
</li>
<li>
<p><code>--version</code></p>
<p>Show version information.</p>
</li>
</ul>
<p><strong>Options to override configuration settings:</strong></p>
<ul>
<li>
<p><code>--accept-flake-config</code></p>
<p>Enable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--access-tokens</code> <em>value</em></p>
<p>Set the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--allow-dirty</code></p>
<p>Enable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--allow-import-from-derivation</code></p>
<p>Enable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--allow-new-privileges</code></p>
<p>Enable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--allow-symlinked-store</code></p>
<p>Enable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--allow-unsafe-native-code-during-evaluation</code></p>
<p>Enable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--allowed-impure-host-deps</code> <em>value</em></p>
<p>Set the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--allowed-uris</code> <em>value</em></p>
<p>Set the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--allowed-users</code> <em>value</em></p>
<p>Set the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--auto-allocate-uids</code></p>
<p>Enable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--auto-optimise-store</code></p>
<p>Enable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt</code> <em>value</em></p>
<p>Set the <code>bash-prompt</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-prefix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-prefix</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-suffix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-suffix</code> setting.</p>
</li>
<li>
<p><code>--build-hook</code> <em>value</em></p>
<p>Set the <code>build-hook</code> setting.</p>
</li>
<li>
<p><code>--build-poll-interval</code> <em>value</em></p>
<p>Set the <code>build-poll-interval</code> setting.</p>
</li>
<li>
<p><code>--build-users-group</code> <em>value</em></p>
<p>Set the <code>build-users-group</code> setting.</p>
</li>
<li>
<p><code>--builders</code> <em>value</em></p>
<p>Set the <code>builders</code> setting.</p>
</li>
<li>
<p><code>--builders-use-substitutes</code></p>
<p>Enable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--commit-lockfile-summary</code> <em>value</em></p>
<p>Set the <code>commit-lockfile-summary</code> setting.</p>
</li>
<li>
<p><code>--compress-build-log</code></p>
<p>Enable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--connect-timeout</code> <em>value</em></p>
<p>Set the <code>connect-timeout</code> setting.</p>
</li>
<li>
<p><code>--cores</code> <em>value</em></p>
<p>Set the <code>cores</code> setting.</p>
</li>
<li>
<p><code>--diff-hook</code> <em>value</em></p>
<p>Set the <code>diff-hook</code> setting.</p>
</li>
<li>
<p><code>--download-attempts</code> <em>value</em></p>
<p>Set the <code>download-attempts</code> setting.</p>
</li>
<li>
<p><code>--download-speed</code> <em>value</em></p>
<p>Set the <code>download-speed</code> setting.</p>
</li>
<li>
<p><code>--eval-cache</code></p>
<p>Enable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--experimental-features</code> <em>value</em></p>
<p>Set the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-access-tokens</code> <em>value</em></p>
<p>Append to the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-impure-host-deps</code> <em>value</em></p>
<p>Append to the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-uris</code> <em>value</em></p>
<p>Append to the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-users</code> <em>value</em></p>
<p>Append to the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--extra-experimental-features</code> <em>value</em></p>
<p>Append to the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-extra-platforms</code> <em>value</em></p>
<p>Append to the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-hashed-mirrors</code> <em>value</em></p>
<p>Append to the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--extra-ignored-acls</code> <em>value</em></p>
<p>Append to the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--extra-nix-path</code> <em>value</em></p>
<p>Append to the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--extra-platforms</code> <em>value</em></p>
<p>Set the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-plugin-files</code> <em>value</em></p>
<p>Append to the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--extra-sandbox-paths</code> <em>value</em></p>
<p>Append to the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--extra-secret-key-files</code> <em>value</em></p>
<p>Append to the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--extra-substituters</code> <em>value</em></p>
<p>Append to the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-system-features</code> <em>value</em></p>
<p>Append to the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-public-keys</code> <em>value</em></p>
<p>Append to the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-substituters</code> <em>value</em></p>
<p>Append to the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-users</code> <em>value</em></p>
<p>Append to the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--fallback</code></p>
<p>Enable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--filter-syscalls</code></p>
<p>Enable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--flake-registry</code> <em>value</em></p>
<p>Set the <code>flake-registry</code> setting.</p>
</li>
<li>
<p><code>--fsync-metadata</code></p>
<p>Enable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--gc-reserved-space</code> <em>value</em></p>
<p>Set the <code>gc-reserved-space</code> setting.</p>
</li>
<li>
<p><code>--hashed-mirrors</code> <em>value</em></p>
<p>Set the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--http-connections</code> <em>value</em></p>
<p>Set the <code>http-connections</code> setting.</p>
</li>
<li>
<p><code>--http2</code></p>
<p>Enable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--id-count</code> <em>value</em></p>
<p>Set the <code>id-count</code> setting.</p>
</li>
<li>
<p><code>--ignore-try</code></p>
<p>Enable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--ignored-acls</code> <em>value</em></p>
<p>Set the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--impersonate-linux-26</code></p>
<p>Enable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--keep-build-log</code></p>
<p>Enable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--keep-derivations</code></p>
<p>Enable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-env-derivations</code></p>
<p>Enable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-failed</code></p>
<p>Enable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--keep-going</code></p>
<p>Enable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--keep-outputs</code></p>
<p>Enable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--log-lines</code> <em>value</em></p>
<p>Set the <code>log-lines</code> setting.</p>
</li>
<li>
<p><code>--max-build-log-size</code> <em>value</em></p>
<p>Set the <code>max-build-log-size</code> setting.</p>
</li>
<li>
<p><code>--max-free</code> <em>value</em></p>
<p>Set the <code>max-free</code> setting.</p>
</li>
<li>
<p><code>--max-jobs</code> <em>value</em></p>
<p>Set the <code>max-jobs</code> setting.</p>
</li>
<li>
<p><code>--max-silent-time</code> <em>value</em></p>
<p>Set the <code>max-silent-time</code> setting.</p>
</li>
<li>
<p><code>--min-free</code> <em>value</em></p>
<p>Set the <code>min-free</code> setting.</p>
</li>
<li>
<p><code>--min-free-check-interval</code> <em>value</em></p>
<p>Set the <code>min-free-check-interval</code> setting.</p>
</li>
<li>
<p><code>--nar-buffer-size</code> <em>value</em></p>
<p>Set the <code>nar-buffer-size</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-negative-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-negative-ttl</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-positive-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-positive-ttl</code> setting.</p>
</li>
<li>
<p><code>--netrc-file</code> <em>value</em></p>
<p>Set the <code>netrc-file</code> setting.</p>
</li>
<li>
<p><code>--nix-path</code> <em>value</em></p>
<p>Set the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--no-accept-flake-config</code></p>
<p>Disable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--no-allow-dirty</code></p>
<p>Disable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--no-allow-import-from-derivation</code></p>
<p>Disable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--no-allow-new-privileges</code></p>
<p>Disable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--no-allow-symlinked-store</code></p>
<p>Disable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--no-allow-unsafe-native-code-during-evaluation</code></p>
<p>Disable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--no-auto-allocate-uids</code></p>
<p>Disable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--no-auto-optimise-store</code></p>
<p>Disable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--no-builders-use-substitutes</code></p>
<p>Disable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--no-compress-build-log</code></p>
<p>Disable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-eval-cache</code></p>
<p>Disable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--no-fallback</code></p>
<p>Disable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--no-filter-syscalls</code></p>
<p>Disable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--no-fsync-metadata</code></p>
<p>Disable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--no-http2</code></p>
<p>Disable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--no-ignore-try</code></p>
<p>Disable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--no-impersonate-linux-26</code></p>
<p>Disable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--no-keep-build-log</code></p>
<p>Disable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-keep-derivations</code></p>
<p>Disable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-env-derivations</code></p>
<p>Disable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-failed</code></p>
<p>Disable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--no-keep-going</code></p>
<p>Disable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--no-keep-outputs</code></p>
<p>Disable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--no-preallocate-contents</code></p>
<p>Disable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--no-print-missing</code></p>
<p>Disable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--no-pure-eval</code></p>
<p>Disable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--no-require-sigs</code></p>
<p>Disable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--no-restrict-eval</code></p>
<p>Disable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--no-run-diff-hook</code></p>
<p>Disable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--no-sandbox</code></p>
<p>Disable sandboxing.</p>
</li>
<li>
<p><code>--no-sandbox-fallback</code></p>
<p>Disable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--no-show-trace</code></p>
<p>Disable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--no-substitute</code></p>
<p>Disable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--no-sync-before-registering</code></p>
<p>Disable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--no-trace-function-calls</code></p>
<p>Disable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--no-trace-verbose</code></p>
<p>Disable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--no-use-case-hack</code></p>
<p>Disable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--no-use-cgroups</code></p>
<p>Disable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--no-use-registries</code></p>
<p>Disable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--no-use-sqlite-wal</code></p>
<p>Disable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--no-warn-dirty</code></p>
<p>Disable the <code>warn-dirty</code> setting.</p>
</li>
<li>
<p><code>--plugin-files</code> <em>value</em></p>
<p>Set the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--post-build-hook</code> <em>value</em></p>
<p>Set the <code>post-build-hook</code> setting.</p>
</li>
<li>
<p><code>--pre-build-hook</code> <em>value</em></p>
<p>Set the <code>pre-build-hook</code> setting.</p>
</li>
<li>
<p><code>--preallocate-contents</code></p>
<p>Enable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--print-missing</code></p>
<p>Enable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--pure-eval</code></p>
<p>Enable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--relaxed-sandbox</code></p>
<p>Enable sandboxing, but allow builds to disable it.</p>
</li>
<li>
<p><code>--require-sigs</code></p>
<p>Enable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--restrict-eval</code></p>
<p>Enable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--run-diff-hook</code></p>
<p>Enable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--sandbox</code></p>
<p>Enable sandboxing.</p>
</li>
<li>
<p><code>--sandbox-build-dir</code> <em>value</em></p>
<p>Set the <code>sandbox-build-dir</code> setting.</p>
</li>
<li>
<p><code>--sandbox-dev-shm-size</code> <em>value</em></p>
<p>Set the <code>sandbox-dev-shm-size</code> setting.</p>
</li>
<li>
<p><code>--sandbox-fallback</code></p>
<p>Enable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--sandbox-paths</code> <em>value</em></p>
<p>Set the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--secret-key-files</code> <em>value</em></p>
<p>Set the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--show-trace</code></p>
<p>Enable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--stalled-download-timeout</code> <em>value</em></p>
<p>Set the <code>stalled-download-timeout</code> setting.</p>
</li>
<li>
<p><code>--start-id</code> <em>value</em></p>
<p>Set the <code>start-id</code> setting.</p>
</li>
<li>
<p><code>--store</code> <em>value</em></p>
<p>Set the <code>store</code> setting.</p>
</li>
<li>
<p><code>--substitute</code></p>
<p>Enable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--substituters</code> <em>value</em></p>
<p>Set the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--sync-before-registering</code></p>
<p>Enable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--system</code> <em>value</em></p>
<p>Set the <code>system</code> setting.</p>
</li>
<li>
<p><code>--system-features</code> <em>value</em></p>
<p>Set the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--tarball-ttl</code> <em>value</em></p>
<p>Set the <code>tarball-ttl</code> setting.</p>
</li>
<li>
<p><code>--timeout</code> <em>value</em></p>
<p>Set the <code>timeout</code> setting.</p>
</li>
<li>
<p><code>--trace-function-calls</code></p>
<p>Enable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--trace-verbose</code></p>
<p>Enable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--trusted-public-keys</code> <em>value</em></p>
<p>Set the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--trusted-substituters</code> <em>value</em></p>
<p>Set the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--trusted-users</code> <em>value</em></p>
<p>Set the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--use-case-hack</code></p>
<p>Enable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--use-cgroups</code></p>
<p>Enable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--use-registries</code></p>
<p>Enable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--use-sqlite-wal</code></p>
<p>Enable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--user-agent-suffix</code> <em>value</em></p>
<p>Set the <code>user-agent-suffix</code> setting.</p>
</li>
<li>
<p><code>--warn-dirty</code></p>
<p>Enable the <code>warn-dirty</code> setting.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p><strong>Warning</strong> <br />
This program is <strong>experimental</strong> and its interface is subject to change.</p>
</blockquote>
<h1 id="name-27"><a class="header" href="#name-27">Name</a></h1>
<p><code>nix flake lock</code> - create missing lock file entries</p>
<h1 id="synopsis-58"><a class="header" href="#synopsis-58">Synopsis</a></h1>
<p><code>nix flake lock</code> [<em>option</em>...] <em>flake-url</em></p>
<h1 id="examples-37"><a class="header" href="#examples-37">Examples</a></h1>
<ul>
<li>
<p>Update the <code>nixpkgs</code> and <code>nix</code> inputs of the flake in the current
directory:</p>
<pre><code class="language-console"># nix flake lock --update-input nixpkgs --update-input nix
* Updated 'nix': 'github:NixOS/nix/9fab14adbc3810d5cc1f88672fde1eee4358405c' -&gt; 'github:NixOS/nix/8927cba62f5afb33b01016d5c4f7f8b7d0adde3c'
* Updated 'nixpkgs': 'github:NixOS/nixpkgs/3d2d8f281a27d466fa54b469b5993f7dde198375' -&gt; 'github:NixOS/nixpkgs/a3a3dda3bacf61e8a39258a0ed9c924eeca8e293'
</code></pre>
</li>
</ul>
<h1 id="description-56"><a class="header" href="#description-56">Description</a></h1>
<p>This command updates the lock file of a flake (<code>flake.lock</code>) so that
it contains a lock for every flake input specified in
<code>flake.nix</code>. Existing lock file entries are not updated unless
required by a flag such as <code>--update-input</code>.</p>
<p>Note that every command that operates on a flake will also update the
lock file if needed, and supports the same flags. Therefore,</p>
<pre><code class="language-console"># nix flake lock --update-input nixpkgs
# nix build
</code></pre>
<p>is equivalent to:</p>
<pre><code class="language-console"># nix build --update-input nixpkgs
</code></pre>
<p>Thus, this command is only useful if you want to update the lock file
separately from any other action such as building.</p>
<h1 id="options-19"><a class="header" href="#options-19">Options</a></h1>
<p><strong>Common evaluation options:</strong></p>
<ul>
<li>
<p><code>--arg</code> <em>name</em> <em>expr</em></p>
<p>Pass the value <em>expr</em> as the argument <em>name</em> to Nix functions.</p>
</li>
<li>
<p><code>--argstr</code> <em>name</em> <em>string</em></p>
<p>Pass the string <em>string</em> as the argument <em>name</em> to Nix functions.</p>
</li>
<li>
<p><code>--debugger</code></p>
<p>Start an interactive environment if evaluation fails.</p>
</li>
<li>
<p><code>--eval-store</code> <em>store-url</em></p>
<p>The Nix store to use for evaluations.</p>
</li>
<li>
<p><code>--impure</code></p>
<p>Allow access to mutable paths and repositories.</p>
</li>
<li>
<p><code>--include</code> / <code>-I</code> <em>path</em></p>
<p>Add <em>path</em> to the Nix search path. The Nix search path is
initialized from the colon-separated <a href="command-ref/new-cli/../../command-ref/env-common.html#env-NIX_PATH"><code>NIX_PATH</code></a> environment
variable, and is used to look up the location of Nix expressions using <a href="command-ref/new-cli/../../language/values.html#type-path">paths</a> enclosed in angle
brackets (i.e., <code>&lt;nixpkgs&gt;</code>).</p>
<p>For instance, passing</p>
<pre><code>-I /home/eelco/Dev
-I /etc/nixos
</code></pre>
<p>will cause Nix to look for paths relative to <code>/home/eelco/Dev</code> and
<code>/etc/nixos</code>, in that order. This is equivalent to setting the
<code>NIX_PATH</code> environment variable to</p>
<pre><code>/home/eelco/Dev:/etc/nixos
</code></pre>
<p>It is also possible to match paths against a prefix. For example,
passing</p>
<pre><code>-I nixpkgs=/home/eelco/Dev/nixpkgs-branch
-I /etc/nixos
</code></pre>
<p>will cause Nix to search for <code>&lt;nixpkgs/path&gt;</code> in
<code>/home/eelco/Dev/nixpkgs-branch/path</code> and <code>/etc/nixos/nixpkgs/path</code>.</p>
<p>If a path in the Nix search path starts with <code>http://</code> or <code>https://</code>,
it is interpreted as the URL of a tarball that will be downloaded and
unpacked to a temporary location. The tarball must consist of a single
top-level directory. For example, passing</p>
<pre><code>-I nixpkgs=https://github.com/NixOS/nixpkgs/archive/master.tar.gz
</code></pre>
<p>tells Nix to download and use the current contents of the <code>master</code>
branch in the <code>nixpkgs</code> repository.</p>
<p>The URLs of the tarballs from the official <code>nixos.org</code> channels
(see <a href="command-ref/new-cli/../nix-channel.html">the manual page for <code>nix-channel</code></a>) can be
abbreviated as <code>channel:&lt;channel-name&gt;</code>. For instance, the
following two flags are equivalent:</p>
<pre><code>-I nixpkgs=channel:nixos-21.05
-I nixpkgs=https://nixos.org/channels/nixos-21.05/nixexprs.tar.xz
</code></pre>
<p>You can also fetch source trees using <a href="command-ref/new-cli/./nix3-flake.html#url-like-syntax">flake URLs</a> and add them to the
search path. For instance,</p>
<pre><code>-I nixpkgs=flake:nixpkgs
</code></pre>
<p>specifies that the prefix <code>nixpkgs</code> shall refer to the source tree
downloaded from the <code>nixpkgs</code> entry in the flake registry. Similarly,</p>
<pre><code>-I nixpkgs=flake:github:NixOS/nixpkgs/nixos-22.05
</code></pre>
<p>makes <code>&lt;nixpkgs&gt;</code> refer to a particular branch of the
<code>NixOS/nixpkgs</code> repository on GitHub.</p>
</li>
<li>
<p><code>--override-flake</code> <em>original-ref</em> <em>resolved-ref</em></p>
<p>Override the flake registries, redirecting <em>original-ref</em> to <em>resolved-ref</em>.</p>
</li>
</ul>
<p><strong>Common flake-related options:</strong></p>
<ul>
<li>
<p><code>--commit-lock-file</code></p>
<p>Commit changes to the flake's lock file.</p>
</li>
<li>
<p><code>--inputs-from</code> <em>flake-url</em></p>
<p>Use the inputs of the specified flake as registry entries.</p>
</li>
<li>
<p><code>--no-registries</code></p>
<p>Don't allow lookups in the flake registries. This option is deprecated; use <code>--no-use-registries</code>.</p>
</li>
<li>
<p><code>--no-update-lock-file</code></p>
<p>Do not allow any updates to the flake's lock file.</p>
</li>
<li>
<p><code>--override-input</code> <em>input-path</em> <em>flake-url</em></p>
<p>Override a specific flake input (e.g. <code>dwarffs/nixpkgs</code>). This implies <code>--no-write-lock-file</code>.</p>
</li>
<li>
<p><code>--recreate-lock-file</code></p>
<p>Recreate the flake's lock file from scratch.</p>
</li>
<li>
<p><code>--update-input</code> <em>input-path</em></p>
<p>Update a specific flake input (ignoring its previous entry in the lock file).</p>
</li>
</ul>
<p><strong>Logging-related options:</strong></p>
<ul>
<li>
<p><code>--debug</code></p>
<p>Set the logging verbosity level to 'debug'.</p>
</li>
<li>
<p><code>--log-format</code> <em>format</em></p>
<p>Set the format of log output; one of <code>raw</code>, <code>internal-json</code>, <code>bar</code> or <code>bar-with-logs</code>.</p>
</li>
<li>
<p><code>--print-build-logs</code> / <code>-L</code></p>
<p>Print full build logs on standard error.</p>
</li>
<li>
<p><code>--quiet</code></p>
<p>Decrease the logging verbosity level.</p>
</li>
<li>
<p><code>--verbose</code> / <code>-v</code></p>
<p>Increase the logging verbosity level.</p>
</li>
</ul>
<p><strong>Miscellaneous global options:</strong></p>
<ul>
<li>
<p><code>--help</code></p>
<p>Show usage information.</p>
</li>
<li>
<p><code>--offline</code></p>
<p>Disable substituters and consider all previously downloaded files up-to-date.</p>
</li>
<li>
<p><code>--option</code> <em>name</em> <em>value</em></p>
<p>Set the Nix configuration setting <em>name</em> to <em>value</em> (overriding <code>nix.conf</code>).</p>
</li>
<li>
<p><code>--refresh</code></p>
<p>Consider all previously downloaded files out-of-date.</p>
</li>
<li>
<p><code>--version</code></p>
<p>Show version information.</p>
</li>
</ul>
<p><strong>Options to override configuration settings:</strong></p>
<ul>
<li>
<p><code>--accept-flake-config</code></p>
<p>Enable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--access-tokens</code> <em>value</em></p>
<p>Set the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--allow-dirty</code></p>
<p>Enable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--allow-import-from-derivation</code></p>
<p>Enable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--allow-new-privileges</code></p>
<p>Enable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--allow-symlinked-store</code></p>
<p>Enable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--allow-unsafe-native-code-during-evaluation</code></p>
<p>Enable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--allowed-impure-host-deps</code> <em>value</em></p>
<p>Set the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--allowed-uris</code> <em>value</em></p>
<p>Set the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--allowed-users</code> <em>value</em></p>
<p>Set the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--auto-allocate-uids</code></p>
<p>Enable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--auto-optimise-store</code></p>
<p>Enable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt</code> <em>value</em></p>
<p>Set the <code>bash-prompt</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-prefix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-prefix</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-suffix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-suffix</code> setting.</p>
</li>
<li>
<p><code>--build-hook</code> <em>value</em></p>
<p>Set the <code>build-hook</code> setting.</p>
</li>
<li>
<p><code>--build-poll-interval</code> <em>value</em></p>
<p>Set the <code>build-poll-interval</code> setting.</p>
</li>
<li>
<p><code>--build-users-group</code> <em>value</em></p>
<p>Set the <code>build-users-group</code> setting.</p>
</li>
<li>
<p><code>--builders</code> <em>value</em></p>
<p>Set the <code>builders</code> setting.</p>
</li>
<li>
<p><code>--builders-use-substitutes</code></p>
<p>Enable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--commit-lockfile-summary</code> <em>value</em></p>
<p>Set the <code>commit-lockfile-summary</code> setting.</p>
</li>
<li>
<p><code>--compress-build-log</code></p>
<p>Enable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--connect-timeout</code> <em>value</em></p>
<p>Set the <code>connect-timeout</code> setting.</p>
</li>
<li>
<p><code>--cores</code> <em>value</em></p>
<p>Set the <code>cores</code> setting.</p>
</li>
<li>
<p><code>--diff-hook</code> <em>value</em></p>
<p>Set the <code>diff-hook</code> setting.</p>
</li>
<li>
<p><code>--download-attempts</code> <em>value</em></p>
<p>Set the <code>download-attempts</code> setting.</p>
</li>
<li>
<p><code>--download-speed</code> <em>value</em></p>
<p>Set the <code>download-speed</code> setting.</p>
</li>
<li>
<p><code>--eval-cache</code></p>
<p>Enable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--experimental-features</code> <em>value</em></p>
<p>Set the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-access-tokens</code> <em>value</em></p>
<p>Append to the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-impure-host-deps</code> <em>value</em></p>
<p>Append to the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-uris</code> <em>value</em></p>
<p>Append to the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-users</code> <em>value</em></p>
<p>Append to the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--extra-experimental-features</code> <em>value</em></p>
<p>Append to the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-extra-platforms</code> <em>value</em></p>
<p>Append to the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-hashed-mirrors</code> <em>value</em></p>
<p>Append to the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--extra-ignored-acls</code> <em>value</em></p>
<p>Append to the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--extra-nix-path</code> <em>value</em></p>
<p>Append to the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--extra-platforms</code> <em>value</em></p>
<p>Set the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-plugin-files</code> <em>value</em></p>
<p>Append to the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--extra-sandbox-paths</code> <em>value</em></p>
<p>Append to the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--extra-secret-key-files</code> <em>value</em></p>
<p>Append to the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--extra-substituters</code> <em>value</em></p>
<p>Append to the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-system-features</code> <em>value</em></p>
<p>Append to the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-public-keys</code> <em>value</em></p>
<p>Append to the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-substituters</code> <em>value</em></p>
<p>Append to the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-users</code> <em>value</em></p>
<p>Append to the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--fallback</code></p>
<p>Enable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--filter-syscalls</code></p>
<p>Enable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--flake-registry</code> <em>value</em></p>
<p>Set the <code>flake-registry</code> setting.</p>
</li>
<li>
<p><code>--fsync-metadata</code></p>
<p>Enable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--gc-reserved-space</code> <em>value</em></p>
<p>Set the <code>gc-reserved-space</code> setting.</p>
</li>
<li>
<p><code>--hashed-mirrors</code> <em>value</em></p>
<p>Set the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--http-connections</code> <em>value</em></p>
<p>Set the <code>http-connections</code> setting.</p>
</li>
<li>
<p><code>--http2</code></p>
<p>Enable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--id-count</code> <em>value</em></p>
<p>Set the <code>id-count</code> setting.</p>
</li>
<li>
<p><code>--ignore-try</code></p>
<p>Enable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--ignored-acls</code> <em>value</em></p>
<p>Set the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--impersonate-linux-26</code></p>
<p>Enable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--keep-build-log</code></p>
<p>Enable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--keep-derivations</code></p>
<p>Enable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-env-derivations</code></p>
<p>Enable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-failed</code></p>
<p>Enable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--keep-going</code></p>
<p>Enable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--keep-outputs</code></p>
<p>Enable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--log-lines</code> <em>value</em></p>
<p>Set the <code>log-lines</code> setting.</p>
</li>
<li>
<p><code>--max-build-log-size</code> <em>value</em></p>
<p>Set the <code>max-build-log-size</code> setting.</p>
</li>
<li>
<p><code>--max-free</code> <em>value</em></p>
<p>Set the <code>max-free</code> setting.</p>
</li>
<li>
<p><code>--max-jobs</code> <em>value</em></p>
<p>Set the <code>max-jobs</code> setting.</p>
</li>
<li>
<p><code>--max-silent-time</code> <em>value</em></p>
<p>Set the <code>max-silent-time</code> setting.</p>
</li>
<li>
<p><code>--min-free</code> <em>value</em></p>
<p>Set the <code>min-free</code> setting.</p>
</li>
<li>
<p><code>--min-free-check-interval</code> <em>value</em></p>
<p>Set the <code>min-free-check-interval</code> setting.</p>
</li>
<li>
<p><code>--nar-buffer-size</code> <em>value</em></p>
<p>Set the <code>nar-buffer-size</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-negative-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-negative-ttl</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-positive-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-positive-ttl</code> setting.</p>
</li>
<li>
<p><code>--netrc-file</code> <em>value</em></p>
<p>Set the <code>netrc-file</code> setting.</p>
</li>
<li>
<p><code>--nix-path</code> <em>value</em></p>
<p>Set the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--no-accept-flake-config</code></p>
<p>Disable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--no-allow-dirty</code></p>
<p>Disable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--no-allow-import-from-derivation</code></p>
<p>Disable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--no-allow-new-privileges</code></p>
<p>Disable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--no-allow-symlinked-store</code></p>
<p>Disable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--no-allow-unsafe-native-code-during-evaluation</code></p>
<p>Disable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--no-auto-allocate-uids</code></p>
<p>Disable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--no-auto-optimise-store</code></p>
<p>Disable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--no-builders-use-substitutes</code></p>
<p>Disable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--no-compress-build-log</code></p>
<p>Disable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-eval-cache</code></p>
<p>Disable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--no-fallback</code></p>
<p>Disable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--no-filter-syscalls</code></p>
<p>Disable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--no-fsync-metadata</code></p>
<p>Disable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--no-http2</code></p>
<p>Disable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--no-ignore-try</code></p>
<p>Disable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--no-impersonate-linux-26</code></p>
<p>Disable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--no-keep-build-log</code></p>
<p>Disable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-keep-derivations</code></p>
<p>Disable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-env-derivations</code></p>
<p>Disable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-failed</code></p>
<p>Disable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--no-keep-going</code></p>
<p>Disable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--no-keep-outputs</code></p>
<p>Disable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--no-preallocate-contents</code></p>
<p>Disable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--no-print-missing</code></p>
<p>Disable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--no-pure-eval</code></p>
<p>Disable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--no-require-sigs</code></p>
<p>Disable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--no-restrict-eval</code></p>
<p>Disable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--no-run-diff-hook</code></p>
<p>Disable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--no-sandbox</code></p>
<p>Disable sandboxing.</p>
</li>
<li>
<p><code>--no-sandbox-fallback</code></p>
<p>Disable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--no-show-trace</code></p>
<p>Disable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--no-substitute</code></p>
<p>Disable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--no-sync-before-registering</code></p>
<p>Disable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--no-trace-function-calls</code></p>
<p>Disable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--no-trace-verbose</code></p>
<p>Disable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--no-use-case-hack</code></p>
<p>Disable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--no-use-cgroups</code></p>
<p>Disable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--no-use-registries</code></p>
<p>Disable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--no-use-sqlite-wal</code></p>
<p>Disable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--no-warn-dirty</code></p>
<p>Disable the <code>warn-dirty</code> setting.</p>
</li>
<li>
<p><code>--plugin-files</code> <em>value</em></p>
<p>Set the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--post-build-hook</code> <em>value</em></p>
<p>Set the <code>post-build-hook</code> setting.</p>
</li>
<li>
<p><code>--pre-build-hook</code> <em>value</em></p>
<p>Set the <code>pre-build-hook</code> setting.</p>
</li>
<li>
<p><code>--preallocate-contents</code></p>
<p>Enable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--print-missing</code></p>
<p>Enable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--pure-eval</code></p>
<p>Enable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--relaxed-sandbox</code></p>
<p>Enable sandboxing, but allow builds to disable it.</p>
</li>
<li>
<p><code>--require-sigs</code></p>
<p>Enable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--restrict-eval</code></p>
<p>Enable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--run-diff-hook</code></p>
<p>Enable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--sandbox</code></p>
<p>Enable sandboxing.</p>
</li>
<li>
<p><code>--sandbox-build-dir</code> <em>value</em></p>
<p>Set the <code>sandbox-build-dir</code> setting.</p>
</li>
<li>
<p><code>--sandbox-dev-shm-size</code> <em>value</em></p>
<p>Set the <code>sandbox-dev-shm-size</code> setting.</p>
</li>
<li>
<p><code>--sandbox-fallback</code></p>
<p>Enable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--sandbox-paths</code> <em>value</em></p>
<p>Set the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--secret-key-files</code> <em>value</em></p>
<p>Set the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--show-trace</code></p>
<p>Enable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--stalled-download-timeout</code> <em>value</em></p>
<p>Set the <code>stalled-download-timeout</code> setting.</p>
</li>
<li>
<p><code>--start-id</code> <em>value</em></p>
<p>Set the <code>start-id</code> setting.</p>
</li>
<li>
<p><code>--store</code> <em>value</em></p>
<p>Set the <code>store</code> setting.</p>
</li>
<li>
<p><code>--substitute</code></p>
<p>Enable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--substituters</code> <em>value</em></p>
<p>Set the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--sync-before-registering</code></p>
<p>Enable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--system</code> <em>value</em></p>
<p>Set the <code>system</code> setting.</p>
</li>
<li>
<p><code>--system-features</code> <em>value</em></p>
<p>Set the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--tarball-ttl</code> <em>value</em></p>
<p>Set the <code>tarball-ttl</code> setting.</p>
</li>
<li>
<p><code>--timeout</code> <em>value</em></p>
<p>Set the <code>timeout</code> setting.</p>
</li>
<li>
<p><code>--trace-function-calls</code></p>
<p>Enable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--trace-verbose</code></p>
<p>Enable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--trusted-public-keys</code> <em>value</em></p>
<p>Set the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--trusted-substituters</code> <em>value</em></p>
<p>Set the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--trusted-users</code> <em>value</em></p>
<p>Set the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--use-case-hack</code></p>
<p>Enable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--use-cgroups</code></p>
<p>Enable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--use-registries</code></p>
<p>Enable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--use-sqlite-wal</code></p>
<p>Enable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--user-agent-suffix</code> <em>value</em></p>
<p>Set the <code>user-agent-suffix</code> setting.</p>
</li>
<li>
<p><code>--warn-dirty</code></p>
<p>Enable the <code>warn-dirty</code> setting.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p><strong>Warning</strong> <br />
This program is <strong>experimental</strong> and its interface is subject to change.</p>
</blockquote>
<h1 id="name-28"><a class="header" href="#name-28">Name</a></h1>
<p><code>nix flake metadata</code> - show flake metadata</p>
<h1 id="synopsis-59"><a class="header" href="#synopsis-59">Synopsis</a></h1>
<p><code>nix flake metadata</code> [<em>option</em>...] <em>flake-url</em></p>
<h1 id="examples-38"><a class="header" href="#examples-38">Examples</a></h1>
<ul>
<li>
<p>Show what <code>nixpkgs</code> resolves to:</p>
<pre><code class="language-console"># nix flake metadata nixpkgs
Resolved URL:  github:edolstra/dwarffs
Locked URL:    github:edolstra/dwarffs/f691e2c991e75edb22836f1dbe632c40324215c5
Description:   A filesystem that fetches DWARF debug info from the Internet on demand
Path:          /nix/store/769s05vjydmc2lcf6b02az28wsa9ixh1-source
Revision:      f691e2c991e75edb22836f1dbe632c40324215c5
Last modified: 2021-01-21 15:41:26
Inputs:
├───nix: github:NixOS/nix/6254b1f5d298ff73127d7b0f0da48f142bdc753c
│   ├───lowdown-src: github:kristapsdz/lowdown/1705b4a26fbf065d9574dce47a94e8c7c79e052f
│   └───nixpkgs: github:NixOS/nixpkgs/ad0d20345219790533ebe06571f82ed6b034db31
└───nixpkgs follows input 'nix/nixpkgs'
</code></pre>
</li>
<li>
<p>Show information about <code>dwarffs</code> in JSON format:</p>
<pre><code class="language-console"># nix flake metadata dwarffs --json | jq .
{
  &quot;description&quot;: &quot;A filesystem that fetches DWARF debug info from the Internet on demand&quot;,
  &quot;lastModified&quot;: 1597153508,
  &quot;locked&quot;: {
    &quot;lastModified&quot;: 1597153508,
    &quot;narHash&quot;: &quot;sha256-VHg3MYVgQ12LeRSU2PSoDeKlSPD8PYYEFxxwkVVDRd0=&quot;,
    &quot;owner&quot;: &quot;edolstra&quot;,
    &quot;repo&quot;: &quot;dwarffs&quot;,
    &quot;rev&quot;: &quot;d181d714fd36eb06f4992a1997cd5601e26db8f5&quot;,
    &quot;type&quot;: &quot;github&quot;
  },
  &quot;locks&quot;: { ... },
  &quot;original&quot;: {
    &quot;id&quot;: &quot;dwarffs&quot;,
    &quot;type&quot;: &quot;indirect&quot;
  },
  &quot;originalUrl&quot;: &quot;flake:dwarffs&quot;,
  &quot;path&quot;: &quot;/nix/store/hang3792qwdmm2n0d9nsrs5n6bsws6kv-source&quot;,
  &quot;resolved&quot;: {
    &quot;owner&quot;: &quot;edolstra&quot;,
    &quot;repo&quot;: &quot;dwarffs&quot;,
    &quot;type&quot;: &quot;github&quot;
  },
  &quot;resolvedUrl&quot;: &quot;github:edolstra/dwarffs&quot;,
  &quot;revision&quot;: &quot;d181d714fd36eb06f4992a1997cd5601e26db8f5&quot;,
  &quot;url&quot;: &quot;github:edolstra/dwarffs/d181d714fd36eb06f4992a1997cd5601e26db8f5&quot;
}
</code></pre>
</li>
</ul>
<h1 id="description-57"><a class="header" href="#description-57">Description</a></h1>
<p>This command shows information about the flake specified by the flake
reference <em>flake-url</em>. It resolves the flake reference using the
<a href="command-ref/new-cli/./nix3-registry.html">flake registry</a>, fetches it, and prints some meta
data. This includes:</p>
<ul>
<li>
<p><code>Resolved URL</code>: If <em>flake-url</em> is a flake identifier, then this is
the flake reference that specifies its actual location, looked up in
the flake registry.</p>
</li>
<li>
<p><code>Locked URL</code>: A flake reference that contains a commit or content
hash and thus uniquely identifies a specific flake version.</p>
</li>
<li>
<p><code>Description</code>: A one-line description of the flake, taken from the
<code>description</code> field in <code>flake.nix</code>.</p>
</li>
<li>
<p><code>Path</code>: The store path containing the source code of the flake.</p>
</li>
<li>
<p><code>Revision</code>: The Git or Mercurial commit hash of the locked flake.</p>
</li>
<li>
<p><code>Revisions</code>: The number of ancestors of the Git or Mercurial commit
of the locked flake. Note that this is not available for <code>github</code>
flakes.</p>
</li>
<li>
<p><code>Last modified</code>: For Git or Mercurial flakes, this is the commit
time of the commit of the locked flake; for tarball flakes, it's the
most recent timestamp of any file inside the tarball.</p>
</li>
<li>
<p><code>Inputs</code>: The flake inputs with their corresponding lock file
entries.</p>
</li>
</ul>
<p>With <code>--json</code>, the output is a JSON object with the following fields:</p>
<ul>
<li>
<p><code>original</code> and <code>originalUrl</code>: The flake reference specified by the
user (<em>flake-url</em>) in attribute set and URL representation.</p>
</li>
<li>
<p><code>resolved</code> and <code>resolvedUrl</code>: The resolved flake reference (see
above) in attribute set and URL representation.</p>
</li>
<li>
<p><code>locked</code> and <code>lockedUrl</code>: The locked flake reference (see above) in
attribute set and URL representation.</p>
</li>
<li>
<p><code>description</code>: See <code>Description</code> above.</p>
</li>
<li>
<p><code>path</code>: See <code>Path</code> above.</p>
</li>
<li>
<p><code>revision</code>: See <code>Revision</code> above.</p>
</li>
<li>
<p><code>revCount</code>: See <code>Revisions</code> above.</p>
</li>
<li>
<p><code>lastModified</code>: See <code>Last modified</code> above.</p>
</li>
<li>
<p><code>locks</code>: The contents of <code>flake.lock</code>.</p>
</li>
</ul>
<h1 id="options-20"><a class="header" href="#options-20">Options</a></h1>
<ul>
<li>
<p><code>--json</code></p>
<p>Produce output in JSON format, suitable for consumption by another program.</p>
</li>
</ul>
<p><strong>Common evaluation options:</strong></p>
<ul>
<li>
<p><code>--arg</code> <em>name</em> <em>expr</em></p>
<p>Pass the value <em>expr</em> as the argument <em>name</em> to Nix functions.</p>
</li>
<li>
<p><code>--argstr</code> <em>name</em> <em>string</em></p>
<p>Pass the string <em>string</em> as the argument <em>name</em> to Nix functions.</p>
</li>
<li>
<p><code>--debugger</code></p>
<p>Start an interactive environment if evaluation fails.</p>
</li>
<li>
<p><code>--eval-store</code> <em>store-url</em></p>
<p>The Nix store to use for evaluations.</p>
</li>
<li>
<p><code>--impure</code></p>
<p>Allow access to mutable paths and repositories.</p>
</li>
<li>
<p><code>--include</code> / <code>-I</code> <em>path</em></p>
<p>Add <em>path</em> to the Nix search path. The Nix search path is
initialized from the colon-separated <a href="command-ref/new-cli/../../command-ref/env-common.html#env-NIX_PATH"><code>NIX_PATH</code></a> environment
variable, and is used to look up the location of Nix expressions using <a href="command-ref/new-cli/../../language/values.html#type-path">paths</a> enclosed in angle
brackets (i.e., <code>&lt;nixpkgs&gt;</code>).</p>
<p>For instance, passing</p>
<pre><code>-I /home/eelco/Dev
-I /etc/nixos
</code></pre>
<p>will cause Nix to look for paths relative to <code>/home/eelco/Dev</code> and
<code>/etc/nixos</code>, in that order. This is equivalent to setting the
<code>NIX_PATH</code> environment variable to</p>
<pre><code>/home/eelco/Dev:/etc/nixos
</code></pre>
<p>It is also possible to match paths against a prefix. For example,
passing</p>
<pre><code>-I nixpkgs=/home/eelco/Dev/nixpkgs-branch
-I /etc/nixos
</code></pre>
<p>will cause Nix to search for <code>&lt;nixpkgs/path&gt;</code> in
<code>/home/eelco/Dev/nixpkgs-branch/path</code> and <code>/etc/nixos/nixpkgs/path</code>.</p>
<p>If a path in the Nix search path starts with <code>http://</code> or <code>https://</code>,
it is interpreted as the URL of a tarball that will be downloaded and
unpacked to a temporary location. The tarball must consist of a single
top-level directory. For example, passing</p>
<pre><code>-I nixpkgs=https://github.com/NixOS/nixpkgs/archive/master.tar.gz
</code></pre>
<p>tells Nix to download and use the current contents of the <code>master</code>
branch in the <code>nixpkgs</code> repository.</p>
<p>The URLs of the tarballs from the official <code>nixos.org</code> channels
(see <a href="command-ref/new-cli/../nix-channel.html">the manual page for <code>nix-channel</code></a>) can be
abbreviated as <code>channel:&lt;channel-name&gt;</code>. For instance, the
following two flags are equivalent:</p>
<pre><code>-I nixpkgs=channel:nixos-21.05
-I nixpkgs=https://nixos.org/channels/nixos-21.05/nixexprs.tar.xz
</code></pre>
<p>You can also fetch source trees using <a href="command-ref/new-cli/./nix3-flake.html#url-like-syntax">flake URLs</a> and add them to the
search path. For instance,</p>
<pre><code>-I nixpkgs=flake:nixpkgs
</code></pre>
<p>specifies that the prefix <code>nixpkgs</code> shall refer to the source tree
downloaded from the <code>nixpkgs</code> entry in the flake registry. Similarly,</p>
<pre><code>-I nixpkgs=flake:github:NixOS/nixpkgs/nixos-22.05
</code></pre>
<p>makes <code>&lt;nixpkgs&gt;</code> refer to a particular branch of the
<code>NixOS/nixpkgs</code> repository on GitHub.</p>
</li>
<li>
<p><code>--override-flake</code> <em>original-ref</em> <em>resolved-ref</em></p>
<p>Override the flake registries, redirecting <em>original-ref</em> to <em>resolved-ref</em>.</p>
</li>
</ul>
<p><strong>Common flake-related options:</strong></p>
<ul>
<li>
<p><code>--commit-lock-file</code></p>
<p>Commit changes to the flake's lock file.</p>
</li>
<li>
<p><code>--inputs-from</code> <em>flake-url</em></p>
<p>Use the inputs of the specified flake as registry entries.</p>
</li>
<li>
<p><code>--no-registries</code></p>
<p>Don't allow lookups in the flake registries. This option is deprecated; use <code>--no-use-registries</code>.</p>
</li>
<li>
<p><code>--no-update-lock-file</code></p>
<p>Do not allow any updates to the flake's lock file.</p>
</li>
<li>
<p><code>--no-write-lock-file</code></p>
<p>Do not write the flake's newly generated lock file.</p>
</li>
<li>
<p><code>--override-input</code> <em>input-path</em> <em>flake-url</em></p>
<p>Override a specific flake input (e.g. <code>dwarffs/nixpkgs</code>). This implies <code>--no-write-lock-file</code>.</p>
</li>
<li>
<p><code>--recreate-lock-file</code></p>
<p>Recreate the flake's lock file from scratch.</p>
</li>
<li>
<p><code>--update-input</code> <em>input-path</em></p>
<p>Update a specific flake input (ignoring its previous entry in the lock file).</p>
</li>
</ul>
<p><strong>Logging-related options:</strong></p>
<ul>
<li>
<p><code>--debug</code></p>
<p>Set the logging verbosity level to 'debug'.</p>
</li>
<li>
<p><code>--log-format</code> <em>format</em></p>
<p>Set the format of log output; one of <code>raw</code>, <code>internal-json</code>, <code>bar</code> or <code>bar-with-logs</code>.</p>
</li>
<li>
<p><code>--print-build-logs</code> / <code>-L</code></p>
<p>Print full build logs on standard error.</p>
</li>
<li>
<p><code>--quiet</code></p>
<p>Decrease the logging verbosity level.</p>
</li>
<li>
<p><code>--verbose</code> / <code>-v</code></p>
<p>Increase the logging verbosity level.</p>
</li>
</ul>
<p><strong>Miscellaneous global options:</strong></p>
<ul>
<li>
<p><code>--help</code></p>
<p>Show usage information.</p>
</li>
<li>
<p><code>--offline</code></p>
<p>Disable substituters and consider all previously downloaded files up-to-date.</p>
</li>
<li>
<p><code>--option</code> <em>name</em> <em>value</em></p>
<p>Set the Nix configuration setting <em>name</em> to <em>value</em> (overriding <code>nix.conf</code>).</p>
</li>
<li>
<p><code>--refresh</code></p>
<p>Consider all previously downloaded files out-of-date.</p>
</li>
<li>
<p><code>--version</code></p>
<p>Show version information.</p>
</li>
</ul>
<p><strong>Options to override configuration settings:</strong></p>
<ul>
<li>
<p><code>--accept-flake-config</code></p>
<p>Enable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--access-tokens</code> <em>value</em></p>
<p>Set the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--allow-dirty</code></p>
<p>Enable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--allow-import-from-derivation</code></p>
<p>Enable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--allow-new-privileges</code></p>
<p>Enable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--allow-symlinked-store</code></p>
<p>Enable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--allow-unsafe-native-code-during-evaluation</code></p>
<p>Enable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--allowed-impure-host-deps</code> <em>value</em></p>
<p>Set the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--allowed-uris</code> <em>value</em></p>
<p>Set the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--allowed-users</code> <em>value</em></p>
<p>Set the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--auto-allocate-uids</code></p>
<p>Enable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--auto-optimise-store</code></p>
<p>Enable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt</code> <em>value</em></p>
<p>Set the <code>bash-prompt</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-prefix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-prefix</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-suffix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-suffix</code> setting.</p>
</li>
<li>
<p><code>--build-hook</code> <em>value</em></p>
<p>Set the <code>build-hook</code> setting.</p>
</li>
<li>
<p><code>--build-poll-interval</code> <em>value</em></p>
<p>Set the <code>build-poll-interval</code> setting.</p>
</li>
<li>
<p><code>--build-users-group</code> <em>value</em></p>
<p>Set the <code>build-users-group</code> setting.</p>
</li>
<li>
<p><code>--builders</code> <em>value</em></p>
<p>Set the <code>builders</code> setting.</p>
</li>
<li>
<p><code>--builders-use-substitutes</code></p>
<p>Enable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--commit-lockfile-summary</code> <em>value</em></p>
<p>Set the <code>commit-lockfile-summary</code> setting.</p>
</li>
<li>
<p><code>--compress-build-log</code></p>
<p>Enable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--connect-timeout</code> <em>value</em></p>
<p>Set the <code>connect-timeout</code> setting.</p>
</li>
<li>
<p><code>--cores</code> <em>value</em></p>
<p>Set the <code>cores</code> setting.</p>
</li>
<li>
<p><code>--diff-hook</code> <em>value</em></p>
<p>Set the <code>diff-hook</code> setting.</p>
</li>
<li>
<p><code>--download-attempts</code> <em>value</em></p>
<p>Set the <code>download-attempts</code> setting.</p>
</li>
<li>
<p><code>--download-speed</code> <em>value</em></p>
<p>Set the <code>download-speed</code> setting.</p>
</li>
<li>
<p><code>--eval-cache</code></p>
<p>Enable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--experimental-features</code> <em>value</em></p>
<p>Set the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-access-tokens</code> <em>value</em></p>
<p>Append to the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-impure-host-deps</code> <em>value</em></p>
<p>Append to the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-uris</code> <em>value</em></p>
<p>Append to the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-users</code> <em>value</em></p>
<p>Append to the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--extra-experimental-features</code> <em>value</em></p>
<p>Append to the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-extra-platforms</code> <em>value</em></p>
<p>Append to the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-hashed-mirrors</code> <em>value</em></p>
<p>Append to the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--extra-ignored-acls</code> <em>value</em></p>
<p>Append to the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--extra-nix-path</code> <em>value</em></p>
<p>Append to the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--extra-platforms</code> <em>value</em></p>
<p>Set the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-plugin-files</code> <em>value</em></p>
<p>Append to the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--extra-sandbox-paths</code> <em>value</em></p>
<p>Append to the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--extra-secret-key-files</code> <em>value</em></p>
<p>Append to the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--extra-substituters</code> <em>value</em></p>
<p>Append to the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-system-features</code> <em>value</em></p>
<p>Append to the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-public-keys</code> <em>value</em></p>
<p>Append to the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-substituters</code> <em>value</em></p>
<p>Append to the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-users</code> <em>value</em></p>
<p>Append to the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--fallback</code></p>
<p>Enable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--filter-syscalls</code></p>
<p>Enable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--flake-registry</code> <em>value</em></p>
<p>Set the <code>flake-registry</code> setting.</p>
</li>
<li>
<p><code>--fsync-metadata</code></p>
<p>Enable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--gc-reserved-space</code> <em>value</em></p>
<p>Set the <code>gc-reserved-space</code> setting.</p>
</li>
<li>
<p><code>--hashed-mirrors</code> <em>value</em></p>
<p>Set the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--http-connections</code> <em>value</em></p>
<p>Set the <code>http-connections</code> setting.</p>
</li>
<li>
<p><code>--http2</code></p>
<p>Enable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--id-count</code> <em>value</em></p>
<p>Set the <code>id-count</code> setting.</p>
</li>
<li>
<p><code>--ignore-try</code></p>
<p>Enable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--ignored-acls</code> <em>value</em></p>
<p>Set the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--impersonate-linux-26</code></p>
<p>Enable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--keep-build-log</code></p>
<p>Enable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--keep-derivations</code></p>
<p>Enable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-env-derivations</code></p>
<p>Enable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-failed</code></p>
<p>Enable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--keep-going</code></p>
<p>Enable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--keep-outputs</code></p>
<p>Enable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--log-lines</code> <em>value</em></p>
<p>Set the <code>log-lines</code> setting.</p>
</li>
<li>
<p><code>--max-build-log-size</code> <em>value</em></p>
<p>Set the <code>max-build-log-size</code> setting.</p>
</li>
<li>
<p><code>--max-free</code> <em>value</em></p>
<p>Set the <code>max-free</code> setting.</p>
</li>
<li>
<p><code>--max-jobs</code> <em>value</em></p>
<p>Set the <code>max-jobs</code> setting.</p>
</li>
<li>
<p><code>--max-silent-time</code> <em>value</em></p>
<p>Set the <code>max-silent-time</code> setting.</p>
</li>
<li>
<p><code>--min-free</code> <em>value</em></p>
<p>Set the <code>min-free</code> setting.</p>
</li>
<li>
<p><code>--min-free-check-interval</code> <em>value</em></p>
<p>Set the <code>min-free-check-interval</code> setting.</p>
</li>
<li>
<p><code>--nar-buffer-size</code> <em>value</em></p>
<p>Set the <code>nar-buffer-size</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-negative-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-negative-ttl</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-positive-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-positive-ttl</code> setting.</p>
</li>
<li>
<p><code>--netrc-file</code> <em>value</em></p>
<p>Set the <code>netrc-file</code> setting.</p>
</li>
<li>
<p><code>--nix-path</code> <em>value</em></p>
<p>Set the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--no-accept-flake-config</code></p>
<p>Disable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--no-allow-dirty</code></p>
<p>Disable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--no-allow-import-from-derivation</code></p>
<p>Disable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--no-allow-new-privileges</code></p>
<p>Disable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--no-allow-symlinked-store</code></p>
<p>Disable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--no-allow-unsafe-native-code-during-evaluation</code></p>
<p>Disable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--no-auto-allocate-uids</code></p>
<p>Disable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--no-auto-optimise-store</code></p>
<p>Disable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--no-builders-use-substitutes</code></p>
<p>Disable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--no-compress-build-log</code></p>
<p>Disable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-eval-cache</code></p>
<p>Disable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--no-fallback</code></p>
<p>Disable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--no-filter-syscalls</code></p>
<p>Disable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--no-fsync-metadata</code></p>
<p>Disable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--no-http2</code></p>
<p>Disable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--no-ignore-try</code></p>
<p>Disable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--no-impersonate-linux-26</code></p>
<p>Disable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--no-keep-build-log</code></p>
<p>Disable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-keep-derivations</code></p>
<p>Disable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-env-derivations</code></p>
<p>Disable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-failed</code></p>
<p>Disable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--no-keep-going</code></p>
<p>Disable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--no-keep-outputs</code></p>
<p>Disable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--no-preallocate-contents</code></p>
<p>Disable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--no-print-missing</code></p>
<p>Disable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--no-pure-eval</code></p>
<p>Disable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--no-require-sigs</code></p>
<p>Disable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--no-restrict-eval</code></p>
<p>Disable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--no-run-diff-hook</code></p>
<p>Disable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--no-sandbox</code></p>
<p>Disable sandboxing.</p>
</li>
<li>
<p><code>--no-sandbox-fallback</code></p>
<p>Disable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--no-show-trace</code></p>
<p>Disable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--no-substitute</code></p>
<p>Disable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--no-sync-before-registering</code></p>
<p>Disable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--no-trace-function-calls</code></p>
<p>Disable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--no-trace-verbose</code></p>
<p>Disable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--no-use-case-hack</code></p>
<p>Disable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--no-use-cgroups</code></p>
<p>Disable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--no-use-registries</code></p>
<p>Disable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--no-use-sqlite-wal</code></p>
<p>Disable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--no-warn-dirty</code></p>
<p>Disable the <code>warn-dirty</code> setting.</p>
</li>
<li>
<p><code>--plugin-files</code> <em>value</em></p>
<p>Set the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--post-build-hook</code> <em>value</em></p>
<p>Set the <code>post-build-hook</code> setting.</p>
</li>
<li>
<p><code>--pre-build-hook</code> <em>value</em></p>
<p>Set the <code>pre-build-hook</code> setting.</p>
</li>
<li>
<p><code>--preallocate-contents</code></p>
<p>Enable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--print-missing</code></p>
<p>Enable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--pure-eval</code></p>
<p>Enable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--relaxed-sandbox</code></p>
<p>Enable sandboxing, but allow builds to disable it.</p>
</li>
<li>
<p><code>--require-sigs</code></p>
<p>Enable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--restrict-eval</code></p>
<p>Enable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--run-diff-hook</code></p>
<p>Enable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--sandbox</code></p>
<p>Enable sandboxing.</p>
</li>
<li>
<p><code>--sandbox-build-dir</code> <em>value</em></p>
<p>Set the <code>sandbox-build-dir</code> setting.</p>
</li>
<li>
<p><code>--sandbox-dev-shm-size</code> <em>value</em></p>
<p>Set the <code>sandbox-dev-shm-size</code> setting.</p>
</li>
<li>
<p><code>--sandbox-fallback</code></p>
<p>Enable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--sandbox-paths</code> <em>value</em></p>
<p>Set the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--secret-key-files</code> <em>value</em></p>
<p>Set the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--show-trace</code></p>
<p>Enable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--stalled-download-timeout</code> <em>value</em></p>
<p>Set the <code>stalled-download-timeout</code> setting.</p>
</li>
<li>
<p><code>--start-id</code> <em>value</em></p>
<p>Set the <code>start-id</code> setting.</p>
</li>
<li>
<p><code>--store</code> <em>value</em></p>
<p>Set the <code>store</code> setting.</p>
</li>
<li>
<p><code>--substitute</code></p>
<p>Enable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--substituters</code> <em>value</em></p>
<p>Set the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--sync-before-registering</code></p>
<p>Enable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--system</code> <em>value</em></p>
<p>Set the <code>system</code> setting.</p>
</li>
<li>
<p><code>--system-features</code> <em>value</em></p>
<p>Set the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--tarball-ttl</code> <em>value</em></p>
<p>Set the <code>tarball-ttl</code> setting.</p>
</li>
<li>
<p><code>--timeout</code> <em>value</em></p>
<p>Set the <code>timeout</code> setting.</p>
</li>
<li>
<p><code>--trace-function-calls</code></p>
<p>Enable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--trace-verbose</code></p>
<p>Enable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--trusted-public-keys</code> <em>value</em></p>
<p>Set the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--trusted-substituters</code> <em>value</em></p>
<p>Set the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--trusted-users</code> <em>value</em></p>
<p>Set the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--use-case-hack</code></p>
<p>Enable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--use-cgroups</code></p>
<p>Enable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--use-registries</code></p>
<p>Enable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--use-sqlite-wal</code></p>
<p>Enable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--user-agent-suffix</code> <em>value</em></p>
<p>Set the <code>user-agent-suffix</code> setting.</p>
</li>
<li>
<p><code>--warn-dirty</code></p>
<p>Enable the <code>warn-dirty</code> setting.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p><strong>Warning</strong> <br />
This program is <strong>experimental</strong> and its interface is subject to change.</p>
</blockquote>
<h1 id="name-29"><a class="header" href="#name-29">Name</a></h1>
<p><code>nix flake new</code> - create a flake in the specified directory from a template</p>
<h1 id="synopsis-60"><a class="header" href="#synopsis-60">Synopsis</a></h1>
<p><code>nix flake new</code> [<em>option</em>...] <em>dest-dir</em></p>
<h1 id="examples-39"><a class="header" href="#examples-39">Examples</a></h1>
<ul>
<li>
<p>Create a flake using the default template in the directory <code>hello</code>:</p>
<pre><code class="language-console"># nix flake new hello
</code></pre>
</li>
<li>
<p>List available templates:</p>
<pre><code class="language-console"># nix flake show templates
</code></pre>
</li>
<li>
<p>Create a flake from a specific template in the directory <code>hello</code>:</p>
<pre><code class="language-console"># nix flake new hello -t templates#trivial
</code></pre>
</li>
</ul>
<h1 id="description-58"><a class="header" href="#description-58">Description</a></h1>
<p>This command creates a flake in the directory <code>dest-dir</code>, which must
not already exist. It's equivalent to:</p>
<pre><code class="language-console"># mkdir dest-dir
# cd dest-dir
# nix flake init
</code></pre>
<h1 id="options-21"><a class="header" href="#options-21">Options</a></h1>
<ul>
<li>
<p><code>--template</code> / <code>-t</code> <em>template</em></p>
<p>The template to use.</p>
</li>
</ul>
<p><strong>Common evaluation options:</strong></p>
<ul>
<li>
<p><code>--arg</code> <em>name</em> <em>expr</em></p>
<p>Pass the value <em>expr</em> as the argument <em>name</em> to Nix functions.</p>
</li>
<li>
<p><code>--argstr</code> <em>name</em> <em>string</em></p>
<p>Pass the string <em>string</em> as the argument <em>name</em> to Nix functions.</p>
</li>
<li>
<p><code>--debugger</code></p>
<p>Start an interactive environment if evaluation fails.</p>
</li>
<li>
<p><code>--eval-store</code> <em>store-url</em></p>
<p>The Nix store to use for evaluations.</p>
</li>
<li>
<p><code>--impure</code></p>
<p>Allow access to mutable paths and repositories.</p>
</li>
<li>
<p><code>--include</code> / <code>-I</code> <em>path</em></p>
<p>Add <em>path</em> to the Nix search path. The Nix search path is
initialized from the colon-separated <a href="command-ref/new-cli/../../command-ref/env-common.html#env-NIX_PATH"><code>NIX_PATH</code></a> environment
variable, and is used to look up the location of Nix expressions using <a href="command-ref/new-cli/../../language/values.html#type-path">paths</a> enclosed in angle
brackets (i.e., <code>&lt;nixpkgs&gt;</code>).</p>
<p>For instance, passing</p>
<pre><code>-I /home/eelco/Dev
-I /etc/nixos
</code></pre>
<p>will cause Nix to look for paths relative to <code>/home/eelco/Dev</code> and
<code>/etc/nixos</code>, in that order. This is equivalent to setting the
<code>NIX_PATH</code> environment variable to</p>
<pre><code>/home/eelco/Dev:/etc/nixos
</code></pre>
<p>It is also possible to match paths against a prefix. For example,
passing</p>
<pre><code>-I nixpkgs=/home/eelco/Dev/nixpkgs-branch
-I /etc/nixos
</code></pre>
<p>will cause Nix to search for <code>&lt;nixpkgs/path&gt;</code> in
<code>/home/eelco/Dev/nixpkgs-branch/path</code> and <code>/etc/nixos/nixpkgs/path</code>.</p>
<p>If a path in the Nix search path starts with <code>http://</code> or <code>https://</code>,
it is interpreted as the URL of a tarball that will be downloaded and
unpacked to a temporary location. The tarball must consist of a single
top-level directory. For example, passing</p>
<pre><code>-I nixpkgs=https://github.com/NixOS/nixpkgs/archive/master.tar.gz
</code></pre>
<p>tells Nix to download and use the current contents of the <code>master</code>
branch in the <code>nixpkgs</code> repository.</p>
<p>The URLs of the tarballs from the official <code>nixos.org</code> channels
(see <a href="command-ref/new-cli/../nix-channel.html">the manual page for <code>nix-channel</code></a>) can be
abbreviated as <code>channel:&lt;channel-name&gt;</code>. For instance, the
following two flags are equivalent:</p>
<pre><code>-I nixpkgs=channel:nixos-21.05
-I nixpkgs=https://nixos.org/channels/nixos-21.05/nixexprs.tar.xz
</code></pre>
<p>You can also fetch source trees using <a href="command-ref/new-cli/./nix3-flake.html#url-like-syntax">flake URLs</a> and add them to the
search path. For instance,</p>
<pre><code>-I nixpkgs=flake:nixpkgs
</code></pre>
<p>specifies that the prefix <code>nixpkgs</code> shall refer to the source tree
downloaded from the <code>nixpkgs</code> entry in the flake registry. Similarly,</p>
<pre><code>-I nixpkgs=flake:github:NixOS/nixpkgs/nixos-22.05
</code></pre>
<p>makes <code>&lt;nixpkgs&gt;</code> refer to a particular branch of the
<code>NixOS/nixpkgs</code> repository on GitHub.</p>
</li>
<li>
<p><code>--override-flake</code> <em>original-ref</em> <em>resolved-ref</em></p>
<p>Override the flake registries, redirecting <em>original-ref</em> to <em>resolved-ref</em>.</p>
</li>
</ul>
<p><strong>Logging-related options:</strong></p>
<ul>
<li>
<p><code>--debug</code></p>
<p>Set the logging verbosity level to 'debug'.</p>
</li>
<li>
<p><code>--log-format</code> <em>format</em></p>
<p>Set the format of log output; one of <code>raw</code>, <code>internal-json</code>, <code>bar</code> or <code>bar-with-logs</code>.</p>
</li>
<li>
<p><code>--print-build-logs</code> / <code>-L</code></p>
<p>Print full build logs on standard error.</p>
</li>
<li>
<p><code>--quiet</code></p>
<p>Decrease the logging verbosity level.</p>
</li>
<li>
<p><code>--verbose</code> / <code>-v</code></p>
<p>Increase the logging verbosity level.</p>
</li>
</ul>
<p><strong>Miscellaneous global options:</strong></p>
<ul>
<li>
<p><code>--help</code></p>
<p>Show usage information.</p>
</li>
<li>
<p><code>--offline</code></p>
<p>Disable substituters and consider all previously downloaded files up-to-date.</p>
</li>
<li>
<p><code>--option</code> <em>name</em> <em>value</em></p>
<p>Set the Nix configuration setting <em>name</em> to <em>value</em> (overriding <code>nix.conf</code>).</p>
</li>
<li>
<p><code>--refresh</code></p>
<p>Consider all previously downloaded files out-of-date.</p>
</li>
<li>
<p><code>--version</code></p>
<p>Show version information.</p>
</li>
</ul>
<p><strong>Options to override configuration settings:</strong></p>
<ul>
<li>
<p><code>--accept-flake-config</code></p>
<p>Enable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--access-tokens</code> <em>value</em></p>
<p>Set the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--allow-dirty</code></p>
<p>Enable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--allow-import-from-derivation</code></p>
<p>Enable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--allow-new-privileges</code></p>
<p>Enable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--allow-symlinked-store</code></p>
<p>Enable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--allow-unsafe-native-code-during-evaluation</code></p>
<p>Enable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--allowed-impure-host-deps</code> <em>value</em></p>
<p>Set the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--allowed-uris</code> <em>value</em></p>
<p>Set the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--allowed-users</code> <em>value</em></p>
<p>Set the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--auto-allocate-uids</code></p>
<p>Enable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--auto-optimise-store</code></p>
<p>Enable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt</code> <em>value</em></p>
<p>Set the <code>bash-prompt</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-prefix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-prefix</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-suffix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-suffix</code> setting.</p>
</li>
<li>
<p><code>--build-hook</code> <em>value</em></p>
<p>Set the <code>build-hook</code> setting.</p>
</li>
<li>
<p><code>--build-poll-interval</code> <em>value</em></p>
<p>Set the <code>build-poll-interval</code> setting.</p>
</li>
<li>
<p><code>--build-users-group</code> <em>value</em></p>
<p>Set the <code>build-users-group</code> setting.</p>
</li>
<li>
<p><code>--builders</code> <em>value</em></p>
<p>Set the <code>builders</code> setting.</p>
</li>
<li>
<p><code>--builders-use-substitutes</code></p>
<p>Enable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--commit-lockfile-summary</code> <em>value</em></p>
<p>Set the <code>commit-lockfile-summary</code> setting.</p>
</li>
<li>
<p><code>--compress-build-log</code></p>
<p>Enable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--connect-timeout</code> <em>value</em></p>
<p>Set the <code>connect-timeout</code> setting.</p>
</li>
<li>
<p><code>--cores</code> <em>value</em></p>
<p>Set the <code>cores</code> setting.</p>
</li>
<li>
<p><code>--diff-hook</code> <em>value</em></p>
<p>Set the <code>diff-hook</code> setting.</p>
</li>
<li>
<p><code>--download-attempts</code> <em>value</em></p>
<p>Set the <code>download-attempts</code> setting.</p>
</li>
<li>
<p><code>--download-speed</code> <em>value</em></p>
<p>Set the <code>download-speed</code> setting.</p>
</li>
<li>
<p><code>--eval-cache</code></p>
<p>Enable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--experimental-features</code> <em>value</em></p>
<p>Set the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-access-tokens</code> <em>value</em></p>
<p>Append to the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-impure-host-deps</code> <em>value</em></p>
<p>Append to the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-uris</code> <em>value</em></p>
<p>Append to the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-users</code> <em>value</em></p>
<p>Append to the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--extra-experimental-features</code> <em>value</em></p>
<p>Append to the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-extra-platforms</code> <em>value</em></p>
<p>Append to the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-hashed-mirrors</code> <em>value</em></p>
<p>Append to the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--extra-ignored-acls</code> <em>value</em></p>
<p>Append to the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--extra-nix-path</code> <em>value</em></p>
<p>Append to the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--extra-platforms</code> <em>value</em></p>
<p>Set the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-plugin-files</code> <em>value</em></p>
<p>Append to the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--extra-sandbox-paths</code> <em>value</em></p>
<p>Append to the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--extra-secret-key-files</code> <em>value</em></p>
<p>Append to the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--extra-substituters</code> <em>value</em></p>
<p>Append to the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-system-features</code> <em>value</em></p>
<p>Append to the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-public-keys</code> <em>value</em></p>
<p>Append to the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-substituters</code> <em>value</em></p>
<p>Append to the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-users</code> <em>value</em></p>
<p>Append to the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--fallback</code></p>
<p>Enable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--filter-syscalls</code></p>
<p>Enable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--flake-registry</code> <em>value</em></p>
<p>Set the <code>flake-registry</code> setting.</p>
</li>
<li>
<p><code>--fsync-metadata</code></p>
<p>Enable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--gc-reserved-space</code> <em>value</em></p>
<p>Set the <code>gc-reserved-space</code> setting.</p>
</li>
<li>
<p><code>--hashed-mirrors</code> <em>value</em></p>
<p>Set the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--http-connections</code> <em>value</em></p>
<p>Set the <code>http-connections</code> setting.</p>
</li>
<li>
<p><code>--http2</code></p>
<p>Enable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--id-count</code> <em>value</em></p>
<p>Set the <code>id-count</code> setting.</p>
</li>
<li>
<p><code>--ignore-try</code></p>
<p>Enable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--ignored-acls</code> <em>value</em></p>
<p>Set the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--impersonate-linux-26</code></p>
<p>Enable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--keep-build-log</code></p>
<p>Enable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--keep-derivations</code></p>
<p>Enable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-env-derivations</code></p>
<p>Enable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-failed</code></p>
<p>Enable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--keep-going</code></p>
<p>Enable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--keep-outputs</code></p>
<p>Enable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--log-lines</code> <em>value</em></p>
<p>Set the <code>log-lines</code> setting.</p>
</li>
<li>
<p><code>--max-build-log-size</code> <em>value</em></p>
<p>Set the <code>max-build-log-size</code> setting.</p>
</li>
<li>
<p><code>--max-free</code> <em>value</em></p>
<p>Set the <code>max-free</code> setting.</p>
</li>
<li>
<p><code>--max-jobs</code> <em>value</em></p>
<p>Set the <code>max-jobs</code> setting.</p>
</li>
<li>
<p><code>--max-silent-time</code> <em>value</em></p>
<p>Set the <code>max-silent-time</code> setting.</p>
</li>
<li>
<p><code>--min-free</code> <em>value</em></p>
<p>Set the <code>min-free</code> setting.</p>
</li>
<li>
<p><code>--min-free-check-interval</code> <em>value</em></p>
<p>Set the <code>min-free-check-interval</code> setting.</p>
</li>
<li>
<p><code>--nar-buffer-size</code> <em>value</em></p>
<p>Set the <code>nar-buffer-size</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-negative-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-negative-ttl</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-positive-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-positive-ttl</code> setting.</p>
</li>
<li>
<p><code>--netrc-file</code> <em>value</em></p>
<p>Set the <code>netrc-file</code> setting.</p>
</li>
<li>
<p><code>--nix-path</code> <em>value</em></p>
<p>Set the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--no-accept-flake-config</code></p>
<p>Disable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--no-allow-dirty</code></p>
<p>Disable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--no-allow-import-from-derivation</code></p>
<p>Disable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--no-allow-new-privileges</code></p>
<p>Disable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--no-allow-symlinked-store</code></p>
<p>Disable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--no-allow-unsafe-native-code-during-evaluation</code></p>
<p>Disable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--no-auto-allocate-uids</code></p>
<p>Disable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--no-auto-optimise-store</code></p>
<p>Disable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--no-builders-use-substitutes</code></p>
<p>Disable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--no-compress-build-log</code></p>
<p>Disable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-eval-cache</code></p>
<p>Disable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--no-fallback</code></p>
<p>Disable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--no-filter-syscalls</code></p>
<p>Disable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--no-fsync-metadata</code></p>
<p>Disable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--no-http2</code></p>
<p>Disable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--no-ignore-try</code></p>
<p>Disable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--no-impersonate-linux-26</code></p>
<p>Disable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--no-keep-build-log</code></p>
<p>Disable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-keep-derivations</code></p>
<p>Disable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-env-derivations</code></p>
<p>Disable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-failed</code></p>
<p>Disable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--no-keep-going</code></p>
<p>Disable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--no-keep-outputs</code></p>
<p>Disable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--no-preallocate-contents</code></p>
<p>Disable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--no-print-missing</code></p>
<p>Disable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--no-pure-eval</code></p>
<p>Disable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--no-require-sigs</code></p>
<p>Disable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--no-restrict-eval</code></p>
<p>Disable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--no-run-diff-hook</code></p>
<p>Disable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--no-sandbox</code></p>
<p>Disable sandboxing.</p>
</li>
<li>
<p><code>--no-sandbox-fallback</code></p>
<p>Disable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--no-show-trace</code></p>
<p>Disable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--no-substitute</code></p>
<p>Disable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--no-sync-before-registering</code></p>
<p>Disable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--no-trace-function-calls</code></p>
<p>Disable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--no-trace-verbose</code></p>
<p>Disable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--no-use-case-hack</code></p>
<p>Disable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--no-use-cgroups</code></p>
<p>Disable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--no-use-registries</code></p>
<p>Disable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--no-use-sqlite-wal</code></p>
<p>Disable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--no-warn-dirty</code></p>
<p>Disable the <code>warn-dirty</code> setting.</p>
</li>
<li>
<p><code>--plugin-files</code> <em>value</em></p>
<p>Set the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--post-build-hook</code> <em>value</em></p>
<p>Set the <code>post-build-hook</code> setting.</p>
</li>
<li>
<p><code>--pre-build-hook</code> <em>value</em></p>
<p>Set the <code>pre-build-hook</code> setting.</p>
</li>
<li>
<p><code>--preallocate-contents</code></p>
<p>Enable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--print-missing</code></p>
<p>Enable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--pure-eval</code></p>
<p>Enable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--relaxed-sandbox</code></p>
<p>Enable sandboxing, but allow builds to disable it.</p>
</li>
<li>
<p><code>--require-sigs</code></p>
<p>Enable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--restrict-eval</code></p>
<p>Enable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--run-diff-hook</code></p>
<p>Enable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--sandbox</code></p>
<p>Enable sandboxing.</p>
</li>
<li>
<p><code>--sandbox-build-dir</code> <em>value</em></p>
<p>Set the <code>sandbox-build-dir</code> setting.</p>
</li>
<li>
<p><code>--sandbox-dev-shm-size</code> <em>value</em></p>
<p>Set the <code>sandbox-dev-shm-size</code> setting.</p>
</li>
<li>
<p><code>--sandbox-fallback</code></p>
<p>Enable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--sandbox-paths</code> <em>value</em></p>
<p>Set the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--secret-key-files</code> <em>value</em></p>
<p>Set the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--show-trace</code></p>
<p>Enable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--stalled-download-timeout</code> <em>value</em></p>
<p>Set the <code>stalled-download-timeout</code> setting.</p>
</li>
<li>
<p><code>--start-id</code> <em>value</em></p>
<p>Set the <code>start-id</code> setting.</p>
</li>
<li>
<p><code>--store</code> <em>value</em></p>
<p>Set the <code>store</code> setting.</p>
</li>
<li>
<p><code>--substitute</code></p>
<p>Enable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--substituters</code> <em>value</em></p>
<p>Set the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--sync-before-registering</code></p>
<p>Enable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--system</code> <em>value</em></p>
<p>Set the <code>system</code> setting.</p>
</li>
<li>
<p><code>--system-features</code> <em>value</em></p>
<p>Set the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--tarball-ttl</code> <em>value</em></p>
<p>Set the <code>tarball-ttl</code> setting.</p>
</li>
<li>
<p><code>--timeout</code> <em>value</em></p>
<p>Set the <code>timeout</code> setting.</p>
</li>
<li>
<p><code>--trace-function-calls</code></p>
<p>Enable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--trace-verbose</code></p>
<p>Enable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--trusted-public-keys</code> <em>value</em></p>
<p>Set the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--trusted-substituters</code> <em>value</em></p>
<p>Set the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--trusted-users</code> <em>value</em></p>
<p>Set the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--use-case-hack</code></p>
<p>Enable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--use-cgroups</code></p>
<p>Enable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--use-registries</code></p>
<p>Enable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--use-sqlite-wal</code></p>
<p>Enable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--user-agent-suffix</code> <em>value</em></p>
<p>Set the <code>user-agent-suffix</code> setting.</p>
</li>
<li>
<p><code>--warn-dirty</code></p>
<p>Enable the <code>warn-dirty</code> setting.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p><strong>Warning</strong> <br />
This program is <strong>experimental</strong> and its interface is subject to change.</p>
</blockquote>
<h1 id="name-30"><a class="header" href="#name-30">Name</a></h1>
<p><code>nix flake prefetch</code> - download the source tree denoted by a flake reference into the Nix store</p>
<h1 id="synopsis-61"><a class="header" href="#synopsis-61">Synopsis</a></h1>
<p><code>nix flake prefetch</code> [<em>option</em>...] <em>flake-url</em></p>
<h1 id="examples-40"><a class="header" href="#examples-40">Examples</a></h1>
<ul>
<li>
<p>Download a tarball and unpack it:</p>
<pre><code class="language-console"># nix flake prefetch https://cdn.kernel.org/pub/linux/kernel/v5.x/linux-5.10.5.tar.xz
Downloaded 'https://cdn.kernel.org/pub/linux/kernel/v5.x/linux-5.10.5.tar.xz?narHash=sha256-3XYHZANT6AFBV0BqegkAZHbba6oeDkIUCDwbATLMhAY='
to '/nix/store/sl5vvk8mb4ma1sjyy03kwpvkz50hd22d-source' (hash
'sha256-3XYHZANT6AFBV0BqegkAZHbba6oeDkIUCDwbATLMhAY=').
</code></pre>
</li>
<li>
<p>Download the <code>dwarffs</code> flake (looked up in the flake registry):</p>
<pre><code class="language-console"># nix flake prefetch dwarffs --json
{&quot;hash&quot;:&quot;sha256-VHg3MYVgQ12LeRSU2PSoDeKlSPD8PYYEFxxwkVVDRd0=&quot;
,&quot;storePath&quot;:&quot;/nix/store/hang3792qwdmm2n0d9nsrs5n6bsws6kv-source&quot;}
</code></pre>
</li>
</ul>
<h1 id="description-59"><a class="header" href="#description-59">Description</a></h1>
<p>This command downloads the source tree denoted by flake reference
<em>flake-url</em>. Note that this does not need to be a flake (i.e. it does
not have to contain a <code>flake.nix</code> file).</p>
<h1 id="options-22"><a class="header" href="#options-22">Options</a></h1>
<ul>
<li>
<p><code>--json</code></p>
<p>Produce output in JSON format, suitable for consumption by another program.</p>
</li>
</ul>
<p><strong>Common evaluation options:</strong></p>
<ul>
<li>
<p><code>--arg</code> <em>name</em> <em>expr</em></p>
<p>Pass the value <em>expr</em> as the argument <em>name</em> to Nix functions.</p>
</li>
<li>
<p><code>--argstr</code> <em>name</em> <em>string</em></p>
<p>Pass the string <em>string</em> as the argument <em>name</em> to Nix functions.</p>
</li>
<li>
<p><code>--debugger</code></p>
<p>Start an interactive environment if evaluation fails.</p>
</li>
<li>
<p><code>--eval-store</code> <em>store-url</em></p>
<p>The Nix store to use for evaluations.</p>
</li>
<li>
<p><code>--impure</code></p>
<p>Allow access to mutable paths and repositories.</p>
</li>
<li>
<p><code>--include</code> / <code>-I</code> <em>path</em></p>
<p>Add <em>path</em> to the Nix search path. The Nix search path is
initialized from the colon-separated <a href="command-ref/new-cli/../../command-ref/env-common.html#env-NIX_PATH"><code>NIX_PATH</code></a> environment
variable, and is used to look up the location of Nix expressions using <a href="command-ref/new-cli/../../language/values.html#type-path">paths</a> enclosed in angle
brackets (i.e., <code>&lt;nixpkgs&gt;</code>).</p>
<p>For instance, passing</p>
<pre><code>-I /home/eelco/Dev
-I /etc/nixos
</code></pre>
<p>will cause Nix to look for paths relative to <code>/home/eelco/Dev</code> and
<code>/etc/nixos</code>, in that order. This is equivalent to setting the
<code>NIX_PATH</code> environment variable to</p>
<pre><code>/home/eelco/Dev:/etc/nixos
</code></pre>
<p>It is also possible to match paths against a prefix. For example,
passing</p>
<pre><code>-I nixpkgs=/home/eelco/Dev/nixpkgs-branch
-I /etc/nixos
</code></pre>
<p>will cause Nix to search for <code>&lt;nixpkgs/path&gt;</code> in
<code>/home/eelco/Dev/nixpkgs-branch/path</code> and <code>/etc/nixos/nixpkgs/path</code>.</p>
<p>If a path in the Nix search path starts with <code>http://</code> or <code>https://</code>,
it is interpreted as the URL of a tarball that will be downloaded and
unpacked to a temporary location. The tarball must consist of a single
top-level directory. For example, passing</p>
<pre><code>-I nixpkgs=https://github.com/NixOS/nixpkgs/archive/master.tar.gz
</code></pre>
<p>tells Nix to download and use the current contents of the <code>master</code>
branch in the <code>nixpkgs</code> repository.</p>
<p>The URLs of the tarballs from the official <code>nixos.org</code> channels
(see <a href="command-ref/new-cli/../nix-channel.html">the manual page for <code>nix-channel</code></a>) can be
abbreviated as <code>channel:&lt;channel-name&gt;</code>. For instance, the
following two flags are equivalent:</p>
<pre><code>-I nixpkgs=channel:nixos-21.05
-I nixpkgs=https://nixos.org/channels/nixos-21.05/nixexprs.tar.xz
</code></pre>
<p>You can also fetch source trees using <a href="command-ref/new-cli/./nix3-flake.html#url-like-syntax">flake URLs</a> and add them to the
search path. For instance,</p>
<pre><code>-I nixpkgs=flake:nixpkgs
</code></pre>
<p>specifies that the prefix <code>nixpkgs</code> shall refer to the source tree
downloaded from the <code>nixpkgs</code> entry in the flake registry. Similarly,</p>
<pre><code>-I nixpkgs=flake:github:NixOS/nixpkgs/nixos-22.05
</code></pre>
<p>makes <code>&lt;nixpkgs&gt;</code> refer to a particular branch of the
<code>NixOS/nixpkgs</code> repository on GitHub.</p>
</li>
<li>
<p><code>--override-flake</code> <em>original-ref</em> <em>resolved-ref</em></p>
<p>Override the flake registries, redirecting <em>original-ref</em> to <em>resolved-ref</em>.</p>
</li>
</ul>
<p><strong>Common flake-related options:</strong></p>
<ul>
<li>
<p><code>--commit-lock-file</code></p>
<p>Commit changes to the flake's lock file.</p>
</li>
<li>
<p><code>--inputs-from</code> <em>flake-url</em></p>
<p>Use the inputs of the specified flake as registry entries.</p>
</li>
<li>
<p><code>--no-registries</code></p>
<p>Don't allow lookups in the flake registries. This option is deprecated; use <code>--no-use-registries</code>.</p>
</li>
<li>
<p><code>--no-update-lock-file</code></p>
<p>Do not allow any updates to the flake's lock file.</p>
</li>
<li>
<p><code>--no-write-lock-file</code></p>
<p>Do not write the flake's newly generated lock file.</p>
</li>
<li>
<p><code>--override-input</code> <em>input-path</em> <em>flake-url</em></p>
<p>Override a specific flake input (e.g. <code>dwarffs/nixpkgs</code>). This implies <code>--no-write-lock-file</code>.</p>
</li>
<li>
<p><code>--recreate-lock-file</code></p>
<p>Recreate the flake's lock file from scratch.</p>
</li>
<li>
<p><code>--update-input</code> <em>input-path</em></p>
<p>Update a specific flake input (ignoring its previous entry in the lock file).</p>
</li>
</ul>
<p><strong>Logging-related options:</strong></p>
<ul>
<li>
<p><code>--debug</code></p>
<p>Set the logging verbosity level to 'debug'.</p>
</li>
<li>
<p><code>--log-format</code> <em>format</em></p>
<p>Set the format of log output; one of <code>raw</code>, <code>internal-json</code>, <code>bar</code> or <code>bar-with-logs</code>.</p>
</li>
<li>
<p><code>--print-build-logs</code> / <code>-L</code></p>
<p>Print full build logs on standard error.</p>
</li>
<li>
<p><code>--quiet</code></p>
<p>Decrease the logging verbosity level.</p>
</li>
<li>
<p><code>--verbose</code> / <code>-v</code></p>
<p>Increase the logging verbosity level.</p>
</li>
</ul>
<p><strong>Miscellaneous global options:</strong></p>
<ul>
<li>
<p><code>--help</code></p>
<p>Show usage information.</p>
</li>
<li>
<p><code>--offline</code></p>
<p>Disable substituters and consider all previously downloaded files up-to-date.</p>
</li>
<li>
<p><code>--option</code> <em>name</em> <em>value</em></p>
<p>Set the Nix configuration setting <em>name</em> to <em>value</em> (overriding <code>nix.conf</code>).</p>
</li>
<li>
<p><code>--refresh</code></p>
<p>Consider all previously downloaded files out-of-date.</p>
</li>
<li>
<p><code>--version</code></p>
<p>Show version information.</p>
</li>
</ul>
<p><strong>Options to override configuration settings:</strong></p>
<ul>
<li>
<p><code>--accept-flake-config</code></p>
<p>Enable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--access-tokens</code> <em>value</em></p>
<p>Set the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--allow-dirty</code></p>
<p>Enable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--allow-import-from-derivation</code></p>
<p>Enable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--allow-new-privileges</code></p>
<p>Enable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--allow-symlinked-store</code></p>
<p>Enable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--allow-unsafe-native-code-during-evaluation</code></p>
<p>Enable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--allowed-impure-host-deps</code> <em>value</em></p>
<p>Set the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--allowed-uris</code> <em>value</em></p>
<p>Set the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--allowed-users</code> <em>value</em></p>
<p>Set the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--auto-allocate-uids</code></p>
<p>Enable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--auto-optimise-store</code></p>
<p>Enable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt</code> <em>value</em></p>
<p>Set the <code>bash-prompt</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-prefix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-prefix</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-suffix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-suffix</code> setting.</p>
</li>
<li>
<p><code>--build-hook</code> <em>value</em></p>
<p>Set the <code>build-hook</code> setting.</p>
</li>
<li>
<p><code>--build-poll-interval</code> <em>value</em></p>
<p>Set the <code>build-poll-interval</code> setting.</p>
</li>
<li>
<p><code>--build-users-group</code> <em>value</em></p>
<p>Set the <code>build-users-group</code> setting.</p>
</li>
<li>
<p><code>--builders</code> <em>value</em></p>
<p>Set the <code>builders</code> setting.</p>
</li>
<li>
<p><code>--builders-use-substitutes</code></p>
<p>Enable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--commit-lockfile-summary</code> <em>value</em></p>
<p>Set the <code>commit-lockfile-summary</code> setting.</p>
</li>
<li>
<p><code>--compress-build-log</code></p>
<p>Enable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--connect-timeout</code> <em>value</em></p>
<p>Set the <code>connect-timeout</code> setting.</p>
</li>
<li>
<p><code>--cores</code> <em>value</em></p>
<p>Set the <code>cores</code> setting.</p>
</li>
<li>
<p><code>--diff-hook</code> <em>value</em></p>
<p>Set the <code>diff-hook</code> setting.</p>
</li>
<li>
<p><code>--download-attempts</code> <em>value</em></p>
<p>Set the <code>download-attempts</code> setting.</p>
</li>
<li>
<p><code>--download-speed</code> <em>value</em></p>
<p>Set the <code>download-speed</code> setting.</p>
</li>
<li>
<p><code>--eval-cache</code></p>
<p>Enable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--experimental-features</code> <em>value</em></p>
<p>Set the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-access-tokens</code> <em>value</em></p>
<p>Append to the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-impure-host-deps</code> <em>value</em></p>
<p>Append to the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-uris</code> <em>value</em></p>
<p>Append to the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-users</code> <em>value</em></p>
<p>Append to the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--extra-experimental-features</code> <em>value</em></p>
<p>Append to the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-extra-platforms</code> <em>value</em></p>
<p>Append to the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-hashed-mirrors</code> <em>value</em></p>
<p>Append to the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--extra-ignored-acls</code> <em>value</em></p>
<p>Append to the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--extra-nix-path</code> <em>value</em></p>
<p>Append to the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--extra-platforms</code> <em>value</em></p>
<p>Set the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-plugin-files</code> <em>value</em></p>
<p>Append to the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--extra-sandbox-paths</code> <em>value</em></p>
<p>Append to the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--extra-secret-key-files</code> <em>value</em></p>
<p>Append to the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--extra-substituters</code> <em>value</em></p>
<p>Append to the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-system-features</code> <em>value</em></p>
<p>Append to the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-public-keys</code> <em>value</em></p>
<p>Append to the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-substituters</code> <em>value</em></p>
<p>Append to the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-users</code> <em>value</em></p>
<p>Append to the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--fallback</code></p>
<p>Enable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--filter-syscalls</code></p>
<p>Enable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--flake-registry</code> <em>value</em></p>
<p>Set the <code>flake-registry</code> setting.</p>
</li>
<li>
<p><code>--fsync-metadata</code></p>
<p>Enable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--gc-reserved-space</code> <em>value</em></p>
<p>Set the <code>gc-reserved-space</code> setting.</p>
</li>
<li>
<p><code>--hashed-mirrors</code> <em>value</em></p>
<p>Set the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--http-connections</code> <em>value</em></p>
<p>Set the <code>http-connections</code> setting.</p>
</li>
<li>
<p><code>--http2</code></p>
<p>Enable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--id-count</code> <em>value</em></p>
<p>Set the <code>id-count</code> setting.</p>
</li>
<li>
<p><code>--ignore-try</code></p>
<p>Enable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--ignored-acls</code> <em>value</em></p>
<p>Set the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--impersonate-linux-26</code></p>
<p>Enable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--keep-build-log</code></p>
<p>Enable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--keep-derivations</code></p>
<p>Enable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-env-derivations</code></p>
<p>Enable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-failed</code></p>
<p>Enable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--keep-going</code></p>
<p>Enable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--keep-outputs</code></p>
<p>Enable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--log-lines</code> <em>value</em></p>
<p>Set the <code>log-lines</code> setting.</p>
</li>
<li>
<p><code>--max-build-log-size</code> <em>value</em></p>
<p>Set the <code>max-build-log-size</code> setting.</p>
</li>
<li>
<p><code>--max-free</code> <em>value</em></p>
<p>Set the <code>max-free</code> setting.</p>
</li>
<li>
<p><code>--max-jobs</code> <em>value</em></p>
<p>Set the <code>max-jobs</code> setting.</p>
</li>
<li>
<p><code>--max-silent-time</code> <em>value</em></p>
<p>Set the <code>max-silent-time</code> setting.</p>
</li>
<li>
<p><code>--min-free</code> <em>value</em></p>
<p>Set the <code>min-free</code> setting.</p>
</li>
<li>
<p><code>--min-free-check-interval</code> <em>value</em></p>
<p>Set the <code>min-free-check-interval</code> setting.</p>
</li>
<li>
<p><code>--nar-buffer-size</code> <em>value</em></p>
<p>Set the <code>nar-buffer-size</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-negative-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-negative-ttl</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-positive-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-positive-ttl</code> setting.</p>
</li>
<li>
<p><code>--netrc-file</code> <em>value</em></p>
<p>Set the <code>netrc-file</code> setting.</p>
</li>
<li>
<p><code>--nix-path</code> <em>value</em></p>
<p>Set the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--no-accept-flake-config</code></p>
<p>Disable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--no-allow-dirty</code></p>
<p>Disable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--no-allow-import-from-derivation</code></p>
<p>Disable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--no-allow-new-privileges</code></p>
<p>Disable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--no-allow-symlinked-store</code></p>
<p>Disable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--no-allow-unsafe-native-code-during-evaluation</code></p>
<p>Disable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--no-auto-allocate-uids</code></p>
<p>Disable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--no-auto-optimise-store</code></p>
<p>Disable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--no-builders-use-substitutes</code></p>
<p>Disable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--no-compress-build-log</code></p>
<p>Disable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-eval-cache</code></p>
<p>Disable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--no-fallback</code></p>
<p>Disable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--no-filter-syscalls</code></p>
<p>Disable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--no-fsync-metadata</code></p>
<p>Disable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--no-http2</code></p>
<p>Disable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--no-ignore-try</code></p>
<p>Disable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--no-impersonate-linux-26</code></p>
<p>Disable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--no-keep-build-log</code></p>
<p>Disable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-keep-derivations</code></p>
<p>Disable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-env-derivations</code></p>
<p>Disable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-failed</code></p>
<p>Disable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--no-keep-going</code></p>
<p>Disable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--no-keep-outputs</code></p>
<p>Disable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--no-preallocate-contents</code></p>
<p>Disable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--no-print-missing</code></p>
<p>Disable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--no-pure-eval</code></p>
<p>Disable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--no-require-sigs</code></p>
<p>Disable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--no-restrict-eval</code></p>
<p>Disable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--no-run-diff-hook</code></p>
<p>Disable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--no-sandbox</code></p>
<p>Disable sandboxing.</p>
</li>
<li>
<p><code>--no-sandbox-fallback</code></p>
<p>Disable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--no-show-trace</code></p>
<p>Disable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--no-substitute</code></p>
<p>Disable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--no-sync-before-registering</code></p>
<p>Disable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--no-trace-function-calls</code></p>
<p>Disable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--no-trace-verbose</code></p>
<p>Disable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--no-use-case-hack</code></p>
<p>Disable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--no-use-cgroups</code></p>
<p>Disable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--no-use-registries</code></p>
<p>Disable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--no-use-sqlite-wal</code></p>
<p>Disable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--no-warn-dirty</code></p>
<p>Disable the <code>warn-dirty</code> setting.</p>
</li>
<li>
<p><code>--plugin-files</code> <em>value</em></p>
<p>Set the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--post-build-hook</code> <em>value</em></p>
<p>Set the <code>post-build-hook</code> setting.</p>
</li>
<li>
<p><code>--pre-build-hook</code> <em>value</em></p>
<p>Set the <code>pre-build-hook</code> setting.</p>
</li>
<li>
<p><code>--preallocate-contents</code></p>
<p>Enable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--print-missing</code></p>
<p>Enable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--pure-eval</code></p>
<p>Enable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--relaxed-sandbox</code></p>
<p>Enable sandboxing, but allow builds to disable it.</p>
</li>
<li>
<p><code>--require-sigs</code></p>
<p>Enable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--restrict-eval</code></p>
<p>Enable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--run-diff-hook</code></p>
<p>Enable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--sandbox</code></p>
<p>Enable sandboxing.</p>
</li>
<li>
<p><code>--sandbox-build-dir</code> <em>value</em></p>
<p>Set the <code>sandbox-build-dir</code> setting.</p>
</li>
<li>
<p><code>--sandbox-dev-shm-size</code> <em>value</em></p>
<p>Set the <code>sandbox-dev-shm-size</code> setting.</p>
</li>
<li>
<p><code>--sandbox-fallback</code></p>
<p>Enable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--sandbox-paths</code> <em>value</em></p>
<p>Set the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--secret-key-files</code> <em>value</em></p>
<p>Set the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--show-trace</code></p>
<p>Enable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--stalled-download-timeout</code> <em>value</em></p>
<p>Set the <code>stalled-download-timeout</code> setting.</p>
</li>
<li>
<p><code>--start-id</code> <em>value</em></p>
<p>Set the <code>start-id</code> setting.</p>
</li>
<li>
<p><code>--store</code> <em>value</em></p>
<p>Set the <code>store</code> setting.</p>
</li>
<li>
<p><code>--substitute</code></p>
<p>Enable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--substituters</code> <em>value</em></p>
<p>Set the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--sync-before-registering</code></p>
<p>Enable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--system</code> <em>value</em></p>
<p>Set the <code>system</code> setting.</p>
</li>
<li>
<p><code>--system-features</code> <em>value</em></p>
<p>Set the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--tarball-ttl</code> <em>value</em></p>
<p>Set the <code>tarball-ttl</code> setting.</p>
</li>
<li>
<p><code>--timeout</code> <em>value</em></p>
<p>Set the <code>timeout</code> setting.</p>
</li>
<li>
<p><code>--trace-function-calls</code></p>
<p>Enable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--trace-verbose</code></p>
<p>Enable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--trusted-public-keys</code> <em>value</em></p>
<p>Set the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--trusted-substituters</code> <em>value</em></p>
<p>Set the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--trusted-users</code> <em>value</em></p>
<p>Set the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--use-case-hack</code></p>
<p>Enable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--use-cgroups</code></p>
<p>Enable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--use-registries</code></p>
<p>Enable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--use-sqlite-wal</code></p>
<p>Enable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--user-agent-suffix</code> <em>value</em></p>
<p>Set the <code>user-agent-suffix</code> setting.</p>
</li>
<li>
<p><code>--warn-dirty</code></p>
<p>Enable the <code>warn-dirty</code> setting.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p><strong>Warning</strong> <br />
This program is <strong>experimental</strong> and its interface is subject to change.</p>
</blockquote>
<h1 id="name-31"><a class="header" href="#name-31">Name</a></h1>
<p><code>nix flake show</code> - show the outputs provided by a flake</p>
<h1 id="synopsis-62"><a class="header" href="#synopsis-62">Synopsis</a></h1>
<p><code>nix flake show</code> [<em>option</em>...] <em>flake-url</em></p>
<h1 id="examples-41"><a class="header" href="#examples-41">Examples</a></h1>
<ul>
<li>
<p>Show the output attributes provided by the <code>patchelf</code> flake:</p>
<pre><code class="language-console">github:NixOS/patchelf/f34751b88bd07d7f44f5cd3200fb4122bf916c7e
├───checks
│   ├───aarch64-linux
│   │   └───build: derivation 'patchelf-0.12.20201207.f34751b'
│   ├───i686-linux
│   │   └───build: derivation 'patchelf-0.12.20201207.f34751b'
│   └───x86_64-linux
│       └───build: derivation 'patchelf-0.12.20201207.f34751b'
├───packages
│   ├───aarch64-linux
│   │   └───default: package 'patchelf-0.12.20201207.f34751b'
│   ├───i686-linux
│   │   └───default: package 'patchelf-0.12.20201207.f34751b'
│   └───x86_64-linux
│       └───default: package 'patchelf-0.12.20201207.f34751b'
├───hydraJobs
│   ├───build
│   │   ├───aarch64-linux: derivation 'patchelf-0.12.20201207.f34751b'
│   │   ├───i686-linux: derivation 'patchelf-0.12.20201207.f34751b'
│   │   └───x86_64-linux: derivation 'patchelf-0.12.20201207.f34751b'
│   ├───coverage: derivation 'patchelf-coverage-0.12.20201207.f34751b'
│   ├───release: derivation 'patchelf-0.12.20201207.f34751b'
│   └───tarball: derivation 'patchelf-tarball-0.12.20201207.f34751b'
└───overlay: Nixpkgs overlay
</code></pre>
</li>
</ul>
<h1 id="description-60"><a class="header" href="#description-60">Description</a></h1>
<p>This command shows the output attributes provided by the flake
specified by flake reference <em>flake-url</em>. These are the top-level
attributes in the <code>outputs</code> of the flake, as well as lower-level
attributes for some standard outputs (e.g. <code>packages</code> or <code>checks</code>).</p>
<p>With <code>--json</code>, the output is in a JSON representation suitable for automatic
processing by other tools.</p>
<h1 id="options-23"><a class="header" href="#options-23">Options</a></h1>
<ul>
<li>
<p><code>--json</code></p>
<p>Produce output in JSON format, suitable for consumption by another program.</p>
</li>
<li>
<p><code>--legacy</code></p>
<p>Show the contents of the <code>legacyPackages</code> output.</p>
</li>
</ul>
<p><strong>Common evaluation options:</strong></p>
<ul>
<li>
<p><code>--arg</code> <em>name</em> <em>expr</em></p>
<p>Pass the value <em>expr</em> as the argument <em>name</em> to Nix functions.</p>
</li>
<li>
<p><code>--argstr</code> <em>name</em> <em>string</em></p>
<p>Pass the string <em>string</em> as the argument <em>name</em> to Nix functions.</p>
</li>
<li>
<p><code>--debugger</code></p>
<p>Start an interactive environment if evaluation fails.</p>
</li>
<li>
<p><code>--eval-store</code> <em>store-url</em></p>
<p>The Nix store to use for evaluations.</p>
</li>
<li>
<p><code>--impure</code></p>
<p>Allow access to mutable paths and repositories.</p>
</li>
<li>
<p><code>--include</code> / <code>-I</code> <em>path</em></p>
<p>Add <em>path</em> to the Nix search path. The Nix search path is
initialized from the colon-separated <a href="command-ref/new-cli/../../command-ref/env-common.html#env-NIX_PATH"><code>NIX_PATH</code></a> environment
variable, and is used to look up the location of Nix expressions using <a href="command-ref/new-cli/../../language/values.html#type-path">paths</a> enclosed in angle
brackets (i.e., <code>&lt;nixpkgs&gt;</code>).</p>
<p>For instance, passing</p>
<pre><code>-I /home/eelco/Dev
-I /etc/nixos
</code></pre>
<p>will cause Nix to look for paths relative to <code>/home/eelco/Dev</code> and
<code>/etc/nixos</code>, in that order. This is equivalent to setting the
<code>NIX_PATH</code> environment variable to</p>
<pre><code>/home/eelco/Dev:/etc/nixos
</code></pre>
<p>It is also possible to match paths against a prefix. For example,
passing</p>
<pre><code>-I nixpkgs=/home/eelco/Dev/nixpkgs-branch
-I /etc/nixos
</code></pre>
<p>will cause Nix to search for <code>&lt;nixpkgs/path&gt;</code> in
<code>/home/eelco/Dev/nixpkgs-branch/path</code> and <code>/etc/nixos/nixpkgs/path</code>.</p>
<p>If a path in the Nix search path starts with <code>http://</code> or <code>https://</code>,
it is interpreted as the URL of a tarball that will be downloaded and
unpacked to a temporary location. The tarball must consist of a single
top-level directory. For example, passing</p>
<pre><code>-I nixpkgs=https://github.com/NixOS/nixpkgs/archive/master.tar.gz
</code></pre>
<p>tells Nix to download and use the current contents of the <code>master</code>
branch in the <code>nixpkgs</code> repository.</p>
<p>The URLs of the tarballs from the official <code>nixos.org</code> channels
(see <a href="command-ref/new-cli/../nix-channel.html">the manual page for <code>nix-channel</code></a>) can be
abbreviated as <code>channel:&lt;channel-name&gt;</code>. For instance, the
following two flags are equivalent:</p>
<pre><code>-I nixpkgs=channel:nixos-21.05
-I nixpkgs=https://nixos.org/channels/nixos-21.05/nixexprs.tar.xz
</code></pre>
<p>You can also fetch source trees using <a href="command-ref/new-cli/./nix3-flake.html#url-like-syntax">flake URLs</a> and add them to the
search path. For instance,</p>
<pre><code>-I nixpkgs=flake:nixpkgs
</code></pre>
<p>specifies that the prefix <code>nixpkgs</code> shall refer to the source tree
downloaded from the <code>nixpkgs</code> entry in the flake registry. Similarly,</p>
<pre><code>-I nixpkgs=flake:github:NixOS/nixpkgs/nixos-22.05
</code></pre>
<p>makes <code>&lt;nixpkgs&gt;</code> refer to a particular branch of the
<code>NixOS/nixpkgs</code> repository on GitHub.</p>
</li>
<li>
<p><code>--override-flake</code> <em>original-ref</em> <em>resolved-ref</em></p>
<p>Override the flake registries, redirecting <em>original-ref</em> to <em>resolved-ref</em>.</p>
</li>
</ul>
<p><strong>Common flake-related options:</strong></p>
<ul>
<li>
<p><code>--commit-lock-file</code></p>
<p>Commit changes to the flake's lock file.</p>
</li>
<li>
<p><code>--inputs-from</code> <em>flake-url</em></p>
<p>Use the inputs of the specified flake as registry entries.</p>
</li>
<li>
<p><code>--no-registries</code></p>
<p>Don't allow lookups in the flake registries. This option is deprecated; use <code>--no-use-registries</code>.</p>
</li>
<li>
<p><code>--no-update-lock-file</code></p>
<p>Do not allow any updates to the flake's lock file.</p>
</li>
<li>
<p><code>--no-write-lock-file</code></p>
<p>Do not write the flake's newly generated lock file.</p>
</li>
<li>
<p><code>--override-input</code> <em>input-path</em> <em>flake-url</em></p>
<p>Override a specific flake input (e.g. <code>dwarffs/nixpkgs</code>). This implies <code>--no-write-lock-file</code>.</p>
</li>
<li>
<p><code>--recreate-lock-file</code></p>
<p>Recreate the flake's lock file from scratch.</p>
</li>
<li>
<p><code>--update-input</code> <em>input-path</em></p>
<p>Update a specific flake input (ignoring its previous entry in the lock file).</p>
</li>
</ul>
<p><strong>Logging-related options:</strong></p>
<ul>
<li>
<p><code>--debug</code></p>
<p>Set the logging verbosity level to 'debug'.</p>
</li>
<li>
<p><code>--log-format</code> <em>format</em></p>
<p>Set the format of log output; one of <code>raw</code>, <code>internal-json</code>, <code>bar</code> or <code>bar-with-logs</code>.</p>
</li>
<li>
<p><code>--print-build-logs</code> / <code>-L</code></p>
<p>Print full build logs on standard error.</p>
</li>
<li>
<p><code>--quiet</code></p>
<p>Decrease the logging verbosity level.</p>
</li>
<li>
<p><code>--verbose</code> / <code>-v</code></p>
<p>Increase the logging verbosity level.</p>
</li>
</ul>
<p><strong>Miscellaneous global options:</strong></p>
<ul>
<li>
<p><code>--help</code></p>
<p>Show usage information.</p>
</li>
<li>
<p><code>--offline</code></p>
<p>Disable substituters and consider all previously downloaded files up-to-date.</p>
</li>
<li>
<p><code>--option</code> <em>name</em> <em>value</em></p>
<p>Set the Nix configuration setting <em>name</em> to <em>value</em> (overriding <code>nix.conf</code>).</p>
</li>
<li>
<p><code>--refresh</code></p>
<p>Consider all previously downloaded files out-of-date.</p>
</li>
<li>
<p><code>--version</code></p>
<p>Show version information.</p>
</li>
</ul>
<p><strong>Options to override configuration settings:</strong></p>
<ul>
<li>
<p><code>--accept-flake-config</code></p>
<p>Enable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--access-tokens</code> <em>value</em></p>
<p>Set the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--allow-dirty</code></p>
<p>Enable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--allow-import-from-derivation</code></p>
<p>Enable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--allow-new-privileges</code></p>
<p>Enable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--allow-symlinked-store</code></p>
<p>Enable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--allow-unsafe-native-code-during-evaluation</code></p>
<p>Enable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--allowed-impure-host-deps</code> <em>value</em></p>
<p>Set the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--allowed-uris</code> <em>value</em></p>
<p>Set the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--allowed-users</code> <em>value</em></p>
<p>Set the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--auto-allocate-uids</code></p>
<p>Enable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--auto-optimise-store</code></p>
<p>Enable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt</code> <em>value</em></p>
<p>Set the <code>bash-prompt</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-prefix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-prefix</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-suffix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-suffix</code> setting.</p>
</li>
<li>
<p><code>--build-hook</code> <em>value</em></p>
<p>Set the <code>build-hook</code> setting.</p>
</li>
<li>
<p><code>--build-poll-interval</code> <em>value</em></p>
<p>Set the <code>build-poll-interval</code> setting.</p>
</li>
<li>
<p><code>--build-users-group</code> <em>value</em></p>
<p>Set the <code>build-users-group</code> setting.</p>
</li>
<li>
<p><code>--builders</code> <em>value</em></p>
<p>Set the <code>builders</code> setting.</p>
</li>
<li>
<p><code>--builders-use-substitutes</code></p>
<p>Enable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--commit-lockfile-summary</code> <em>value</em></p>
<p>Set the <code>commit-lockfile-summary</code> setting.</p>
</li>
<li>
<p><code>--compress-build-log</code></p>
<p>Enable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--connect-timeout</code> <em>value</em></p>
<p>Set the <code>connect-timeout</code> setting.</p>
</li>
<li>
<p><code>--cores</code> <em>value</em></p>
<p>Set the <code>cores</code> setting.</p>
</li>
<li>
<p><code>--diff-hook</code> <em>value</em></p>
<p>Set the <code>diff-hook</code> setting.</p>
</li>
<li>
<p><code>--download-attempts</code> <em>value</em></p>
<p>Set the <code>download-attempts</code> setting.</p>
</li>
<li>
<p><code>--download-speed</code> <em>value</em></p>
<p>Set the <code>download-speed</code> setting.</p>
</li>
<li>
<p><code>--eval-cache</code></p>
<p>Enable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--experimental-features</code> <em>value</em></p>
<p>Set the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-access-tokens</code> <em>value</em></p>
<p>Append to the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-impure-host-deps</code> <em>value</em></p>
<p>Append to the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-uris</code> <em>value</em></p>
<p>Append to the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-users</code> <em>value</em></p>
<p>Append to the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--extra-experimental-features</code> <em>value</em></p>
<p>Append to the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-extra-platforms</code> <em>value</em></p>
<p>Append to the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-hashed-mirrors</code> <em>value</em></p>
<p>Append to the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--extra-ignored-acls</code> <em>value</em></p>
<p>Append to the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--extra-nix-path</code> <em>value</em></p>
<p>Append to the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--extra-platforms</code> <em>value</em></p>
<p>Set the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-plugin-files</code> <em>value</em></p>
<p>Append to the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--extra-sandbox-paths</code> <em>value</em></p>
<p>Append to the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--extra-secret-key-files</code> <em>value</em></p>
<p>Append to the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--extra-substituters</code> <em>value</em></p>
<p>Append to the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-system-features</code> <em>value</em></p>
<p>Append to the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-public-keys</code> <em>value</em></p>
<p>Append to the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-substituters</code> <em>value</em></p>
<p>Append to the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-users</code> <em>value</em></p>
<p>Append to the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--fallback</code></p>
<p>Enable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--filter-syscalls</code></p>
<p>Enable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--flake-registry</code> <em>value</em></p>
<p>Set the <code>flake-registry</code> setting.</p>
</li>
<li>
<p><code>--fsync-metadata</code></p>
<p>Enable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--gc-reserved-space</code> <em>value</em></p>
<p>Set the <code>gc-reserved-space</code> setting.</p>
</li>
<li>
<p><code>--hashed-mirrors</code> <em>value</em></p>
<p>Set the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--http-connections</code> <em>value</em></p>
<p>Set the <code>http-connections</code> setting.</p>
</li>
<li>
<p><code>--http2</code></p>
<p>Enable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--id-count</code> <em>value</em></p>
<p>Set the <code>id-count</code> setting.</p>
</li>
<li>
<p><code>--ignore-try</code></p>
<p>Enable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--ignored-acls</code> <em>value</em></p>
<p>Set the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--impersonate-linux-26</code></p>
<p>Enable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--keep-build-log</code></p>
<p>Enable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--keep-derivations</code></p>
<p>Enable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-env-derivations</code></p>
<p>Enable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-failed</code></p>
<p>Enable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--keep-going</code></p>
<p>Enable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--keep-outputs</code></p>
<p>Enable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--log-lines</code> <em>value</em></p>
<p>Set the <code>log-lines</code> setting.</p>
</li>
<li>
<p><code>--max-build-log-size</code> <em>value</em></p>
<p>Set the <code>max-build-log-size</code> setting.</p>
</li>
<li>
<p><code>--max-free</code> <em>value</em></p>
<p>Set the <code>max-free</code> setting.</p>
</li>
<li>
<p><code>--max-jobs</code> <em>value</em></p>
<p>Set the <code>max-jobs</code> setting.</p>
</li>
<li>
<p><code>--max-silent-time</code> <em>value</em></p>
<p>Set the <code>max-silent-time</code> setting.</p>
</li>
<li>
<p><code>--min-free</code> <em>value</em></p>
<p>Set the <code>min-free</code> setting.</p>
</li>
<li>
<p><code>--min-free-check-interval</code> <em>value</em></p>
<p>Set the <code>min-free-check-interval</code> setting.</p>
</li>
<li>
<p><code>--nar-buffer-size</code> <em>value</em></p>
<p>Set the <code>nar-buffer-size</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-negative-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-negative-ttl</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-positive-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-positive-ttl</code> setting.</p>
</li>
<li>
<p><code>--netrc-file</code> <em>value</em></p>
<p>Set the <code>netrc-file</code> setting.</p>
</li>
<li>
<p><code>--nix-path</code> <em>value</em></p>
<p>Set the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--no-accept-flake-config</code></p>
<p>Disable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--no-allow-dirty</code></p>
<p>Disable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--no-allow-import-from-derivation</code></p>
<p>Disable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--no-allow-new-privileges</code></p>
<p>Disable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--no-allow-symlinked-store</code></p>
<p>Disable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--no-allow-unsafe-native-code-during-evaluation</code></p>
<p>Disable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--no-auto-allocate-uids</code></p>
<p>Disable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--no-auto-optimise-store</code></p>
<p>Disable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--no-builders-use-substitutes</code></p>
<p>Disable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--no-compress-build-log</code></p>
<p>Disable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-eval-cache</code></p>
<p>Disable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--no-fallback</code></p>
<p>Disable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--no-filter-syscalls</code></p>
<p>Disable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--no-fsync-metadata</code></p>
<p>Disable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--no-http2</code></p>
<p>Disable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--no-ignore-try</code></p>
<p>Disable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--no-impersonate-linux-26</code></p>
<p>Disable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--no-keep-build-log</code></p>
<p>Disable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-keep-derivations</code></p>
<p>Disable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-env-derivations</code></p>
<p>Disable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-failed</code></p>
<p>Disable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--no-keep-going</code></p>
<p>Disable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--no-keep-outputs</code></p>
<p>Disable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--no-preallocate-contents</code></p>
<p>Disable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--no-print-missing</code></p>
<p>Disable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--no-pure-eval</code></p>
<p>Disable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--no-require-sigs</code></p>
<p>Disable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--no-restrict-eval</code></p>
<p>Disable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--no-run-diff-hook</code></p>
<p>Disable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--no-sandbox</code></p>
<p>Disable sandboxing.</p>
</li>
<li>
<p><code>--no-sandbox-fallback</code></p>
<p>Disable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--no-show-trace</code></p>
<p>Disable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--no-substitute</code></p>
<p>Disable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--no-sync-before-registering</code></p>
<p>Disable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--no-trace-function-calls</code></p>
<p>Disable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--no-trace-verbose</code></p>
<p>Disable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--no-use-case-hack</code></p>
<p>Disable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--no-use-cgroups</code></p>
<p>Disable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--no-use-registries</code></p>
<p>Disable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--no-use-sqlite-wal</code></p>
<p>Disable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--no-warn-dirty</code></p>
<p>Disable the <code>warn-dirty</code> setting.</p>
</li>
<li>
<p><code>--plugin-files</code> <em>value</em></p>
<p>Set the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--post-build-hook</code> <em>value</em></p>
<p>Set the <code>post-build-hook</code> setting.</p>
</li>
<li>
<p><code>--pre-build-hook</code> <em>value</em></p>
<p>Set the <code>pre-build-hook</code> setting.</p>
</li>
<li>
<p><code>--preallocate-contents</code></p>
<p>Enable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--print-missing</code></p>
<p>Enable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--pure-eval</code></p>
<p>Enable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--relaxed-sandbox</code></p>
<p>Enable sandboxing, but allow builds to disable it.</p>
</li>
<li>
<p><code>--require-sigs</code></p>
<p>Enable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--restrict-eval</code></p>
<p>Enable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--run-diff-hook</code></p>
<p>Enable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--sandbox</code></p>
<p>Enable sandboxing.</p>
</li>
<li>
<p><code>--sandbox-build-dir</code> <em>value</em></p>
<p>Set the <code>sandbox-build-dir</code> setting.</p>
</li>
<li>
<p><code>--sandbox-dev-shm-size</code> <em>value</em></p>
<p>Set the <code>sandbox-dev-shm-size</code> setting.</p>
</li>
<li>
<p><code>--sandbox-fallback</code></p>
<p>Enable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--sandbox-paths</code> <em>value</em></p>
<p>Set the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--secret-key-files</code> <em>value</em></p>
<p>Set the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--show-trace</code></p>
<p>Enable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--stalled-download-timeout</code> <em>value</em></p>
<p>Set the <code>stalled-download-timeout</code> setting.</p>
</li>
<li>
<p><code>--start-id</code> <em>value</em></p>
<p>Set the <code>start-id</code> setting.</p>
</li>
<li>
<p><code>--store</code> <em>value</em></p>
<p>Set the <code>store</code> setting.</p>
</li>
<li>
<p><code>--substitute</code></p>
<p>Enable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--substituters</code> <em>value</em></p>
<p>Set the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--sync-before-registering</code></p>
<p>Enable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--system</code> <em>value</em></p>
<p>Set the <code>system</code> setting.</p>
</li>
<li>
<p><code>--system-features</code> <em>value</em></p>
<p>Set the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--tarball-ttl</code> <em>value</em></p>
<p>Set the <code>tarball-ttl</code> setting.</p>
</li>
<li>
<p><code>--timeout</code> <em>value</em></p>
<p>Set the <code>timeout</code> setting.</p>
</li>
<li>
<p><code>--trace-function-calls</code></p>
<p>Enable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--trace-verbose</code></p>
<p>Enable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--trusted-public-keys</code> <em>value</em></p>
<p>Set the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--trusted-substituters</code> <em>value</em></p>
<p>Set the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--trusted-users</code> <em>value</em></p>
<p>Set the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--use-case-hack</code></p>
<p>Enable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--use-cgroups</code></p>
<p>Enable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--use-registries</code></p>
<p>Enable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--use-sqlite-wal</code></p>
<p>Enable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--user-agent-suffix</code> <em>value</em></p>
<p>Set the <code>user-agent-suffix</code> setting.</p>
</li>
<li>
<p><code>--warn-dirty</code></p>
<p>Enable the <code>warn-dirty</code> setting.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p><strong>Warning</strong> <br />
This program is <strong>experimental</strong> and its interface is subject to change.</p>
</blockquote>
<h1 id="name-32"><a class="header" href="#name-32">Name</a></h1>
<p><code>nix flake update</code> - update flake lock file</p>
<h1 id="synopsis-63"><a class="header" href="#synopsis-63">Synopsis</a></h1>
<p><code>nix flake update</code> [<em>option</em>...] <em>flake-url</em></p>
<h1 id="examples-42"><a class="header" href="#examples-42">Examples</a></h1>
<ul>
<li>
<p>Recreate the lock file (i.e. update all inputs) and commit the new
lock file:</p>
<pre><code class="language-console"># nix flake update --commit-lock-file
* Updated 'nix': 'github:NixOS/nix/9fab14adbc3810d5cc1f88672fde1eee4358405c' -&gt; 'github:NixOS/nix/8927cba62f5afb33b01016d5c4f7f8b7d0adde3c'
* Updated 'nixpkgs': 'github:NixOS/nixpkgs/3d2d8f281a27d466fa54b469b5993f7dde198375' -&gt; 'github:NixOS/nixpkgs/a3a3dda3bacf61e8a39258a0ed9c924eeca8e293'
…
warning: committed new revision '158bcbd9d6cc08ab859c0810186c1beebc982aad'
</code></pre>
</li>
</ul>
<h1 id="description-61"><a class="header" href="#description-61">Description</a></h1>
<p>This command recreates the lock file of a flake (<code>flake.lock</code>), thus
updating the lock for every unlocked input (like <code>nixpkgs</code>) to its
current version. This is equivalent to passing <code>--recreate-lock-file</code>
to any command that operates on a flake. That is,</p>
<pre><code class="language-console"># nix flake update
# nix build
</code></pre>
<p>is equivalent to:</p>
<pre><code class="language-console"># nix build --recreate-lock-file
</code></pre>
<h1 id="options-24"><a class="header" href="#options-24">Options</a></h1>
<p><strong>Common evaluation options:</strong></p>
<ul>
<li>
<p><code>--arg</code> <em>name</em> <em>expr</em></p>
<p>Pass the value <em>expr</em> as the argument <em>name</em> to Nix functions.</p>
</li>
<li>
<p><code>--argstr</code> <em>name</em> <em>string</em></p>
<p>Pass the string <em>string</em> as the argument <em>name</em> to Nix functions.</p>
</li>
<li>
<p><code>--debugger</code></p>
<p>Start an interactive environment if evaluation fails.</p>
</li>
<li>
<p><code>--eval-store</code> <em>store-url</em></p>
<p>The Nix store to use for evaluations.</p>
</li>
<li>
<p><code>--impure</code></p>
<p>Allow access to mutable paths and repositories.</p>
</li>
<li>
<p><code>--include</code> / <code>-I</code> <em>path</em></p>
<p>Add <em>path</em> to the Nix search path. The Nix search path is
initialized from the colon-separated <a href="command-ref/new-cli/../../command-ref/env-common.html#env-NIX_PATH"><code>NIX_PATH</code></a> environment
variable, and is used to look up the location of Nix expressions using <a href="command-ref/new-cli/../../language/values.html#type-path">paths</a> enclosed in angle
brackets (i.e., <code>&lt;nixpkgs&gt;</code>).</p>
<p>For instance, passing</p>
<pre><code>-I /home/eelco/Dev
-I /etc/nixos
</code></pre>
<p>will cause Nix to look for paths relative to <code>/home/eelco/Dev</code> and
<code>/etc/nixos</code>, in that order. This is equivalent to setting the
<code>NIX_PATH</code> environment variable to</p>
<pre><code>/home/eelco/Dev:/etc/nixos
</code></pre>
<p>It is also possible to match paths against a prefix. For example,
passing</p>
<pre><code>-I nixpkgs=/home/eelco/Dev/nixpkgs-branch
-I /etc/nixos
</code></pre>
<p>will cause Nix to search for <code>&lt;nixpkgs/path&gt;</code> in
<code>/home/eelco/Dev/nixpkgs-branch/path</code> and <code>/etc/nixos/nixpkgs/path</code>.</p>
<p>If a path in the Nix search path starts with <code>http://</code> or <code>https://</code>,
it is interpreted as the URL of a tarball that will be downloaded and
unpacked to a temporary location. The tarball must consist of a single
top-level directory. For example, passing</p>
<pre><code>-I nixpkgs=https://github.com/NixOS/nixpkgs/archive/master.tar.gz
</code></pre>
<p>tells Nix to download and use the current contents of the <code>master</code>
branch in the <code>nixpkgs</code> repository.</p>
<p>The URLs of the tarballs from the official <code>nixos.org</code> channels
(see <a href="command-ref/new-cli/../nix-channel.html">the manual page for <code>nix-channel</code></a>) can be
abbreviated as <code>channel:&lt;channel-name&gt;</code>. For instance, the
following two flags are equivalent:</p>
<pre><code>-I nixpkgs=channel:nixos-21.05
-I nixpkgs=https://nixos.org/channels/nixos-21.05/nixexprs.tar.xz
</code></pre>
<p>You can also fetch source trees using <a href="command-ref/new-cli/./nix3-flake.html#url-like-syntax">flake URLs</a> and add them to the
search path. For instance,</p>
<pre><code>-I nixpkgs=flake:nixpkgs
</code></pre>
<p>specifies that the prefix <code>nixpkgs</code> shall refer to the source tree
downloaded from the <code>nixpkgs</code> entry in the flake registry. Similarly,</p>
<pre><code>-I nixpkgs=flake:github:NixOS/nixpkgs/nixos-22.05
</code></pre>
<p>makes <code>&lt;nixpkgs&gt;</code> refer to a particular branch of the
<code>NixOS/nixpkgs</code> repository on GitHub.</p>
</li>
<li>
<p><code>--override-flake</code> <em>original-ref</em> <em>resolved-ref</em></p>
<p>Override the flake registries, redirecting <em>original-ref</em> to <em>resolved-ref</em>.</p>
</li>
</ul>
<p><strong>Common flake-related options:</strong></p>
<ul>
<li>
<p><code>--commit-lock-file</code></p>
<p>Commit changes to the flake's lock file.</p>
</li>
<li>
<p><code>--inputs-from</code> <em>flake-url</em></p>
<p>Use the inputs of the specified flake as registry entries.</p>
</li>
<li>
<p><code>--no-registries</code></p>
<p>Don't allow lookups in the flake registries. This option is deprecated; use <code>--no-use-registries</code>.</p>
</li>
<li>
<p><code>--override-input</code> <em>input-path</em> <em>flake-url</em></p>
<p>Override a specific flake input (e.g. <code>dwarffs/nixpkgs</code>). This implies <code>--no-write-lock-file</code>.</p>
</li>
</ul>
<p><strong>Logging-related options:</strong></p>
<ul>
<li>
<p><code>--debug</code></p>
<p>Set the logging verbosity level to 'debug'.</p>
</li>
<li>
<p><code>--log-format</code> <em>format</em></p>
<p>Set the format of log output; one of <code>raw</code>, <code>internal-json</code>, <code>bar</code> or <code>bar-with-logs</code>.</p>
</li>
<li>
<p><code>--print-build-logs</code> / <code>-L</code></p>
<p>Print full build logs on standard error.</p>
</li>
<li>
<p><code>--quiet</code></p>
<p>Decrease the logging verbosity level.</p>
</li>
<li>
<p><code>--verbose</code> / <code>-v</code></p>
<p>Increase the logging verbosity level.</p>
</li>
</ul>
<p><strong>Miscellaneous global options:</strong></p>
<ul>
<li>
<p><code>--help</code></p>
<p>Show usage information.</p>
</li>
<li>
<p><code>--offline</code></p>
<p>Disable substituters and consider all previously downloaded files up-to-date.</p>
</li>
<li>
<p><code>--option</code> <em>name</em> <em>value</em></p>
<p>Set the Nix configuration setting <em>name</em> to <em>value</em> (overriding <code>nix.conf</code>).</p>
</li>
<li>
<p><code>--refresh</code></p>
<p>Consider all previously downloaded files out-of-date.</p>
</li>
<li>
<p><code>--version</code></p>
<p>Show version information.</p>
</li>
</ul>
<p><strong>Options to override configuration settings:</strong></p>
<ul>
<li>
<p><code>--accept-flake-config</code></p>
<p>Enable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--access-tokens</code> <em>value</em></p>
<p>Set the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--allow-dirty</code></p>
<p>Enable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--allow-import-from-derivation</code></p>
<p>Enable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--allow-new-privileges</code></p>
<p>Enable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--allow-symlinked-store</code></p>
<p>Enable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--allow-unsafe-native-code-during-evaluation</code></p>
<p>Enable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--allowed-impure-host-deps</code> <em>value</em></p>
<p>Set the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--allowed-uris</code> <em>value</em></p>
<p>Set the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--allowed-users</code> <em>value</em></p>
<p>Set the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--auto-allocate-uids</code></p>
<p>Enable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--auto-optimise-store</code></p>
<p>Enable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt</code> <em>value</em></p>
<p>Set the <code>bash-prompt</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-prefix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-prefix</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-suffix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-suffix</code> setting.</p>
</li>
<li>
<p><code>--build-hook</code> <em>value</em></p>
<p>Set the <code>build-hook</code> setting.</p>
</li>
<li>
<p><code>--build-poll-interval</code> <em>value</em></p>
<p>Set the <code>build-poll-interval</code> setting.</p>
</li>
<li>
<p><code>--build-users-group</code> <em>value</em></p>
<p>Set the <code>build-users-group</code> setting.</p>
</li>
<li>
<p><code>--builders</code> <em>value</em></p>
<p>Set the <code>builders</code> setting.</p>
</li>
<li>
<p><code>--builders-use-substitutes</code></p>
<p>Enable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--commit-lockfile-summary</code> <em>value</em></p>
<p>Set the <code>commit-lockfile-summary</code> setting.</p>
</li>
<li>
<p><code>--compress-build-log</code></p>
<p>Enable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--connect-timeout</code> <em>value</em></p>
<p>Set the <code>connect-timeout</code> setting.</p>
</li>
<li>
<p><code>--cores</code> <em>value</em></p>
<p>Set the <code>cores</code> setting.</p>
</li>
<li>
<p><code>--diff-hook</code> <em>value</em></p>
<p>Set the <code>diff-hook</code> setting.</p>
</li>
<li>
<p><code>--download-attempts</code> <em>value</em></p>
<p>Set the <code>download-attempts</code> setting.</p>
</li>
<li>
<p><code>--download-speed</code> <em>value</em></p>
<p>Set the <code>download-speed</code> setting.</p>
</li>
<li>
<p><code>--eval-cache</code></p>
<p>Enable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--experimental-features</code> <em>value</em></p>
<p>Set the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-access-tokens</code> <em>value</em></p>
<p>Append to the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-impure-host-deps</code> <em>value</em></p>
<p>Append to the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-uris</code> <em>value</em></p>
<p>Append to the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-users</code> <em>value</em></p>
<p>Append to the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--extra-experimental-features</code> <em>value</em></p>
<p>Append to the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-extra-platforms</code> <em>value</em></p>
<p>Append to the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-hashed-mirrors</code> <em>value</em></p>
<p>Append to the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--extra-ignored-acls</code> <em>value</em></p>
<p>Append to the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--extra-nix-path</code> <em>value</em></p>
<p>Append to the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--extra-platforms</code> <em>value</em></p>
<p>Set the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-plugin-files</code> <em>value</em></p>
<p>Append to the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--extra-sandbox-paths</code> <em>value</em></p>
<p>Append to the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--extra-secret-key-files</code> <em>value</em></p>
<p>Append to the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--extra-substituters</code> <em>value</em></p>
<p>Append to the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-system-features</code> <em>value</em></p>
<p>Append to the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-public-keys</code> <em>value</em></p>
<p>Append to the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-substituters</code> <em>value</em></p>
<p>Append to the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-users</code> <em>value</em></p>
<p>Append to the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--fallback</code></p>
<p>Enable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--filter-syscalls</code></p>
<p>Enable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--flake-registry</code> <em>value</em></p>
<p>Set the <code>flake-registry</code> setting.</p>
</li>
<li>
<p><code>--fsync-metadata</code></p>
<p>Enable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--gc-reserved-space</code> <em>value</em></p>
<p>Set the <code>gc-reserved-space</code> setting.</p>
</li>
<li>
<p><code>--hashed-mirrors</code> <em>value</em></p>
<p>Set the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--http-connections</code> <em>value</em></p>
<p>Set the <code>http-connections</code> setting.</p>
</li>
<li>
<p><code>--http2</code></p>
<p>Enable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--id-count</code> <em>value</em></p>
<p>Set the <code>id-count</code> setting.</p>
</li>
<li>
<p><code>--ignore-try</code></p>
<p>Enable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--ignored-acls</code> <em>value</em></p>
<p>Set the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--impersonate-linux-26</code></p>
<p>Enable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--keep-build-log</code></p>
<p>Enable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--keep-derivations</code></p>
<p>Enable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-env-derivations</code></p>
<p>Enable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-failed</code></p>
<p>Enable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--keep-going</code></p>
<p>Enable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--keep-outputs</code></p>
<p>Enable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--log-lines</code> <em>value</em></p>
<p>Set the <code>log-lines</code> setting.</p>
</li>
<li>
<p><code>--max-build-log-size</code> <em>value</em></p>
<p>Set the <code>max-build-log-size</code> setting.</p>
</li>
<li>
<p><code>--max-free</code> <em>value</em></p>
<p>Set the <code>max-free</code> setting.</p>
</li>
<li>
<p><code>--max-jobs</code> <em>value</em></p>
<p>Set the <code>max-jobs</code> setting.</p>
</li>
<li>
<p><code>--max-silent-time</code> <em>value</em></p>
<p>Set the <code>max-silent-time</code> setting.</p>
</li>
<li>
<p><code>--min-free</code> <em>value</em></p>
<p>Set the <code>min-free</code> setting.</p>
</li>
<li>
<p><code>--min-free-check-interval</code> <em>value</em></p>
<p>Set the <code>min-free-check-interval</code> setting.</p>
</li>
<li>
<p><code>--nar-buffer-size</code> <em>value</em></p>
<p>Set the <code>nar-buffer-size</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-negative-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-negative-ttl</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-positive-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-positive-ttl</code> setting.</p>
</li>
<li>
<p><code>--netrc-file</code> <em>value</em></p>
<p>Set the <code>netrc-file</code> setting.</p>
</li>
<li>
<p><code>--nix-path</code> <em>value</em></p>
<p>Set the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--no-accept-flake-config</code></p>
<p>Disable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--no-allow-dirty</code></p>
<p>Disable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--no-allow-import-from-derivation</code></p>
<p>Disable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--no-allow-new-privileges</code></p>
<p>Disable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--no-allow-symlinked-store</code></p>
<p>Disable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--no-allow-unsafe-native-code-during-evaluation</code></p>
<p>Disable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--no-auto-allocate-uids</code></p>
<p>Disable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--no-auto-optimise-store</code></p>
<p>Disable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--no-builders-use-substitutes</code></p>
<p>Disable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--no-compress-build-log</code></p>
<p>Disable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-eval-cache</code></p>
<p>Disable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--no-fallback</code></p>
<p>Disable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--no-filter-syscalls</code></p>
<p>Disable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--no-fsync-metadata</code></p>
<p>Disable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--no-http2</code></p>
<p>Disable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--no-ignore-try</code></p>
<p>Disable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--no-impersonate-linux-26</code></p>
<p>Disable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--no-keep-build-log</code></p>
<p>Disable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-keep-derivations</code></p>
<p>Disable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-env-derivations</code></p>
<p>Disable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-failed</code></p>
<p>Disable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--no-keep-going</code></p>
<p>Disable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--no-keep-outputs</code></p>
<p>Disable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--no-preallocate-contents</code></p>
<p>Disable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--no-print-missing</code></p>
<p>Disable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--no-pure-eval</code></p>
<p>Disable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--no-require-sigs</code></p>
<p>Disable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--no-restrict-eval</code></p>
<p>Disable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--no-run-diff-hook</code></p>
<p>Disable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--no-sandbox</code></p>
<p>Disable sandboxing.</p>
</li>
<li>
<p><code>--no-sandbox-fallback</code></p>
<p>Disable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--no-show-trace</code></p>
<p>Disable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--no-substitute</code></p>
<p>Disable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--no-sync-before-registering</code></p>
<p>Disable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--no-trace-function-calls</code></p>
<p>Disable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--no-trace-verbose</code></p>
<p>Disable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--no-use-case-hack</code></p>
<p>Disable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--no-use-cgroups</code></p>
<p>Disable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--no-use-registries</code></p>
<p>Disable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--no-use-sqlite-wal</code></p>
<p>Disable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--no-warn-dirty</code></p>
<p>Disable the <code>warn-dirty</code> setting.</p>
</li>
<li>
<p><code>--plugin-files</code> <em>value</em></p>
<p>Set the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--post-build-hook</code> <em>value</em></p>
<p>Set the <code>post-build-hook</code> setting.</p>
</li>
<li>
<p><code>--pre-build-hook</code> <em>value</em></p>
<p>Set the <code>pre-build-hook</code> setting.</p>
</li>
<li>
<p><code>--preallocate-contents</code></p>
<p>Enable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--print-missing</code></p>
<p>Enable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--pure-eval</code></p>
<p>Enable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--relaxed-sandbox</code></p>
<p>Enable sandboxing, but allow builds to disable it.</p>
</li>
<li>
<p><code>--require-sigs</code></p>
<p>Enable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--restrict-eval</code></p>
<p>Enable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--run-diff-hook</code></p>
<p>Enable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--sandbox</code></p>
<p>Enable sandboxing.</p>
</li>
<li>
<p><code>--sandbox-build-dir</code> <em>value</em></p>
<p>Set the <code>sandbox-build-dir</code> setting.</p>
</li>
<li>
<p><code>--sandbox-dev-shm-size</code> <em>value</em></p>
<p>Set the <code>sandbox-dev-shm-size</code> setting.</p>
</li>
<li>
<p><code>--sandbox-fallback</code></p>
<p>Enable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--sandbox-paths</code> <em>value</em></p>
<p>Set the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--secret-key-files</code> <em>value</em></p>
<p>Set the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--show-trace</code></p>
<p>Enable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--stalled-download-timeout</code> <em>value</em></p>
<p>Set the <code>stalled-download-timeout</code> setting.</p>
</li>
<li>
<p><code>--start-id</code> <em>value</em></p>
<p>Set the <code>start-id</code> setting.</p>
</li>
<li>
<p><code>--store</code> <em>value</em></p>
<p>Set the <code>store</code> setting.</p>
</li>
<li>
<p><code>--substitute</code></p>
<p>Enable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--substituters</code> <em>value</em></p>
<p>Set the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--sync-before-registering</code></p>
<p>Enable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--system</code> <em>value</em></p>
<p>Set the <code>system</code> setting.</p>
</li>
<li>
<p><code>--system-features</code> <em>value</em></p>
<p>Set the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--tarball-ttl</code> <em>value</em></p>
<p>Set the <code>tarball-ttl</code> setting.</p>
</li>
<li>
<p><code>--timeout</code> <em>value</em></p>
<p>Set the <code>timeout</code> setting.</p>
</li>
<li>
<p><code>--trace-function-calls</code></p>
<p>Enable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--trace-verbose</code></p>
<p>Enable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--trusted-public-keys</code> <em>value</em></p>
<p>Set the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--trusted-substituters</code> <em>value</em></p>
<p>Set the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--trusted-users</code> <em>value</em></p>
<p>Set the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--use-case-hack</code></p>
<p>Enable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--use-cgroups</code></p>
<p>Enable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--use-registries</code></p>
<p>Enable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--use-sqlite-wal</code></p>
<p>Enable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--user-agent-suffix</code> <em>value</em></p>
<p>Set the <code>user-agent-suffix</code> setting.</p>
</li>
<li>
<p><code>--warn-dirty</code></p>
<p>Enable the <code>warn-dirty</code> setting.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p><strong>Warning</strong> <br />
This program is <strong>experimental</strong> and its interface is subject to change.</p>
</blockquote>
<h1 id="name-33"><a class="header" href="#name-33">Name</a></h1>
<p><code>nix fmt</code> - reformat your code in the standard style</p>
<h1 id="synopsis-64"><a class="header" href="#synopsis-64">Synopsis</a></h1>
<p><code>nix fmt</code> [<em>option</em>...] <em>args</em>...</p>
<h1 id="examples-43"><a class="header" href="#examples-43">Examples</a></h1>
<p>With <a href="https://github.com/nix-community/nixpkgs-fmt">nixpkgs-fmt</a>:</p>
<pre><code class="language-nix"># flake.nix
{
  outputs = { nixpkgs, self }: {
    formatter.x86_64-linux = nixpkgs.legacyPackages.x86_64-linux.nixpkgs-fmt;
  };
}
</code></pre>
<ul>
<li>
<p>Format the current flake: <code>$ nix fmt</code></p>
</li>
<li>
<p>Format a specific folder or file: <code>$ nix fmt ./folder ./file.nix</code></p>
</li>
</ul>
<p>With <a href="https://github.com/serokell/nixfmt">nixfmt</a>:</p>
<pre><code class="language-nix"># flake.nix
{
  outputs = { nixpkgs, self }: {
    formatter.x86_64-linux = nixpkgs.legacyPackages.x86_64-linux.nixfmt;
  };
}
</code></pre>
<ul>
<li>Format specific files: <code>$ nix fmt ./file1.nix ./file2.nix</code></li>
</ul>
<p>With <a href="https://github.com/kamadorueda/alejandra">Alejandra</a>:</p>
<pre><code class="language-nix"># flake.nix
{
  outputs = { nixpkgs, self }: {
    formatter.x86_64-linux = nixpkgs.legacyPackages.x86_64-linux.alejandra;
  };
}
</code></pre>
<ul>
<li>
<p>Format the current flake: <code>$ nix fmt</code></p>
</li>
<li>
<p>Format a specific folder or file: <code>$ nix fmt ./folder ./file.nix</code></p>
</li>
</ul>
<h1 id="description-62"><a class="header" href="#description-62">Description</a></h1>
<p><code>nix fmt</code> will rewrite all Nix files (*.nix) to a canonical format
using the formatter specified in your flake.</p>
<h1 id="options-25"><a class="header" href="#options-25">Options</a></h1>
<p><strong>Common evaluation options:</strong></p>
<ul>
<li>
<p><code>--arg</code> <em>name</em> <em>expr</em></p>
<p>Pass the value <em>expr</em> as the argument <em>name</em> to Nix functions.</p>
</li>
<li>
<p><code>--argstr</code> <em>name</em> <em>string</em></p>
<p>Pass the string <em>string</em> as the argument <em>name</em> to Nix functions.</p>
</li>
<li>
<p><code>--debugger</code></p>
<p>Start an interactive environment if evaluation fails.</p>
</li>
<li>
<p><code>--eval-store</code> <em>store-url</em></p>
<p>The Nix store to use for evaluations.</p>
</li>
<li>
<p><code>--impure</code></p>
<p>Allow access to mutable paths and repositories.</p>
</li>
<li>
<p><code>--include</code> / <code>-I</code> <em>path</em></p>
<p>Add <em>path</em> to the Nix search path. The Nix search path is
initialized from the colon-separated <a href="command-ref/new-cli/../../command-ref/env-common.html#env-NIX_PATH"><code>NIX_PATH</code></a> environment
variable, and is used to look up the location of Nix expressions using <a href="command-ref/new-cli/../../language/values.html#type-path">paths</a> enclosed in angle
brackets (i.e., <code>&lt;nixpkgs&gt;</code>).</p>
<p>For instance, passing</p>
<pre><code>-I /home/eelco/Dev
-I /etc/nixos
</code></pre>
<p>will cause Nix to look for paths relative to <code>/home/eelco/Dev</code> and
<code>/etc/nixos</code>, in that order. This is equivalent to setting the
<code>NIX_PATH</code> environment variable to</p>
<pre><code>/home/eelco/Dev:/etc/nixos
</code></pre>
<p>It is also possible to match paths against a prefix. For example,
passing</p>
<pre><code>-I nixpkgs=/home/eelco/Dev/nixpkgs-branch
-I /etc/nixos
</code></pre>
<p>will cause Nix to search for <code>&lt;nixpkgs/path&gt;</code> in
<code>/home/eelco/Dev/nixpkgs-branch/path</code> and <code>/etc/nixos/nixpkgs/path</code>.</p>
<p>If a path in the Nix search path starts with <code>http://</code> or <code>https://</code>,
it is interpreted as the URL of a tarball that will be downloaded and
unpacked to a temporary location. The tarball must consist of a single
top-level directory. For example, passing</p>
<pre><code>-I nixpkgs=https://github.com/NixOS/nixpkgs/archive/master.tar.gz
</code></pre>
<p>tells Nix to download and use the current contents of the <code>master</code>
branch in the <code>nixpkgs</code> repository.</p>
<p>The URLs of the tarballs from the official <code>nixos.org</code> channels
(see <a href="command-ref/new-cli/../nix-channel.html">the manual page for <code>nix-channel</code></a>) can be
abbreviated as <code>channel:&lt;channel-name&gt;</code>. For instance, the
following two flags are equivalent:</p>
<pre><code>-I nixpkgs=channel:nixos-21.05
-I nixpkgs=https://nixos.org/channels/nixos-21.05/nixexprs.tar.xz
</code></pre>
<p>You can also fetch source trees using <a href="command-ref/new-cli/./nix3-flake.html#url-like-syntax">flake URLs</a> and add them to the
search path. For instance,</p>
<pre><code>-I nixpkgs=flake:nixpkgs
</code></pre>
<p>specifies that the prefix <code>nixpkgs</code> shall refer to the source tree
downloaded from the <code>nixpkgs</code> entry in the flake registry. Similarly,</p>
<pre><code>-I nixpkgs=flake:github:NixOS/nixpkgs/nixos-22.05
</code></pre>
<p>makes <code>&lt;nixpkgs&gt;</code> refer to a particular branch of the
<code>NixOS/nixpkgs</code> repository on GitHub.</p>
</li>
<li>
<p><code>--override-flake</code> <em>original-ref</em> <em>resolved-ref</em></p>
<p>Override the flake registries, redirecting <em>original-ref</em> to <em>resolved-ref</em>.</p>
</li>
</ul>
<p><strong>Common flake-related options:</strong></p>
<ul>
<li>
<p><code>--commit-lock-file</code></p>
<p>Commit changes to the flake's lock file.</p>
</li>
<li>
<p><code>--inputs-from</code> <em>flake-url</em></p>
<p>Use the inputs of the specified flake as registry entries.</p>
</li>
<li>
<p><code>--no-registries</code></p>
<p>Don't allow lookups in the flake registries. This option is deprecated; use <code>--no-use-registries</code>.</p>
</li>
<li>
<p><code>--no-update-lock-file</code></p>
<p>Do not allow any updates to the flake's lock file.</p>
</li>
<li>
<p><code>--no-write-lock-file</code></p>
<p>Do not write the flake's newly generated lock file.</p>
</li>
<li>
<p><code>--override-input</code> <em>input-path</em> <em>flake-url</em></p>
<p>Override a specific flake input (e.g. <code>dwarffs/nixpkgs</code>). This implies <code>--no-write-lock-file</code>.</p>
</li>
<li>
<p><code>--recreate-lock-file</code></p>
<p>Recreate the flake's lock file from scratch.</p>
</li>
<li>
<p><code>--update-input</code> <em>input-path</em></p>
<p>Update a specific flake input (ignoring its previous entry in the lock file).</p>
</li>
</ul>
<p><strong>Logging-related options:</strong></p>
<ul>
<li>
<p><code>--debug</code></p>
<p>Set the logging verbosity level to 'debug'.</p>
</li>
<li>
<p><code>--log-format</code> <em>format</em></p>
<p>Set the format of log output; one of <code>raw</code>, <code>internal-json</code>, <code>bar</code> or <code>bar-with-logs</code>.</p>
</li>
<li>
<p><code>--print-build-logs</code> / <code>-L</code></p>
<p>Print full build logs on standard error.</p>
</li>
<li>
<p><code>--quiet</code></p>
<p>Decrease the logging verbosity level.</p>
</li>
<li>
<p><code>--verbose</code> / <code>-v</code></p>
<p>Increase the logging verbosity level.</p>
</li>
</ul>
<p><strong>Miscellaneous global options:</strong></p>
<ul>
<li>
<p><code>--help</code></p>
<p>Show usage information.</p>
</li>
<li>
<p><code>--offline</code></p>
<p>Disable substituters and consider all previously downloaded files up-to-date.</p>
</li>
<li>
<p><code>--option</code> <em>name</em> <em>value</em></p>
<p>Set the Nix configuration setting <em>name</em> to <em>value</em> (overriding <code>nix.conf</code>).</p>
</li>
<li>
<p><code>--refresh</code></p>
<p>Consider all previously downloaded files out-of-date.</p>
</li>
<li>
<p><code>--version</code></p>
<p>Show version information.</p>
</li>
</ul>
<p><strong>Options that change the interpretation of installables:</strong></p>
<ul>
<li>
<p><code>--derivation</code></p>
<p>Operate on the <a href="command-ref/new-cli/../../glossary.html#gloss-store-derivation">store derivation</a> rather than its outputs.</p>
</li>
<li>
<p><code>--expr</code> <em>expr</em></p>
<p>Interpret installables as attribute paths relative to the Nix expression <em>expr</em>.</p>
</li>
<li>
<p><code>--file</code> / <code>-f</code> <em>file</em></p>
<p>Interpret installables as attribute paths relative to the Nix expression stored in <em>file</em>. If <em>file</em> is the character -, then a Nix expression will be read from standard input. Implies <code>--impure</code>.</p>
</li>
</ul>
<p><strong>Options to override configuration settings:</strong></p>
<ul>
<li>
<p><code>--accept-flake-config</code></p>
<p>Enable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--access-tokens</code> <em>value</em></p>
<p>Set the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--allow-dirty</code></p>
<p>Enable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--allow-import-from-derivation</code></p>
<p>Enable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--allow-new-privileges</code></p>
<p>Enable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--allow-symlinked-store</code></p>
<p>Enable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--allow-unsafe-native-code-during-evaluation</code></p>
<p>Enable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--allowed-impure-host-deps</code> <em>value</em></p>
<p>Set the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--allowed-uris</code> <em>value</em></p>
<p>Set the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--allowed-users</code> <em>value</em></p>
<p>Set the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--auto-allocate-uids</code></p>
<p>Enable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--auto-optimise-store</code></p>
<p>Enable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt</code> <em>value</em></p>
<p>Set the <code>bash-prompt</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-prefix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-prefix</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-suffix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-suffix</code> setting.</p>
</li>
<li>
<p><code>--build-hook</code> <em>value</em></p>
<p>Set the <code>build-hook</code> setting.</p>
</li>
<li>
<p><code>--build-poll-interval</code> <em>value</em></p>
<p>Set the <code>build-poll-interval</code> setting.</p>
</li>
<li>
<p><code>--build-users-group</code> <em>value</em></p>
<p>Set the <code>build-users-group</code> setting.</p>
</li>
<li>
<p><code>--builders</code> <em>value</em></p>
<p>Set the <code>builders</code> setting.</p>
</li>
<li>
<p><code>--builders-use-substitutes</code></p>
<p>Enable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--commit-lockfile-summary</code> <em>value</em></p>
<p>Set the <code>commit-lockfile-summary</code> setting.</p>
</li>
<li>
<p><code>--compress-build-log</code></p>
<p>Enable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--connect-timeout</code> <em>value</em></p>
<p>Set the <code>connect-timeout</code> setting.</p>
</li>
<li>
<p><code>--cores</code> <em>value</em></p>
<p>Set the <code>cores</code> setting.</p>
</li>
<li>
<p><code>--diff-hook</code> <em>value</em></p>
<p>Set the <code>diff-hook</code> setting.</p>
</li>
<li>
<p><code>--download-attempts</code> <em>value</em></p>
<p>Set the <code>download-attempts</code> setting.</p>
</li>
<li>
<p><code>--download-speed</code> <em>value</em></p>
<p>Set the <code>download-speed</code> setting.</p>
</li>
<li>
<p><code>--eval-cache</code></p>
<p>Enable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--experimental-features</code> <em>value</em></p>
<p>Set the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-access-tokens</code> <em>value</em></p>
<p>Append to the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-impure-host-deps</code> <em>value</em></p>
<p>Append to the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-uris</code> <em>value</em></p>
<p>Append to the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-users</code> <em>value</em></p>
<p>Append to the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--extra-experimental-features</code> <em>value</em></p>
<p>Append to the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-extra-platforms</code> <em>value</em></p>
<p>Append to the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-hashed-mirrors</code> <em>value</em></p>
<p>Append to the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--extra-ignored-acls</code> <em>value</em></p>
<p>Append to the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--extra-nix-path</code> <em>value</em></p>
<p>Append to the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--extra-platforms</code> <em>value</em></p>
<p>Set the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-plugin-files</code> <em>value</em></p>
<p>Append to the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--extra-sandbox-paths</code> <em>value</em></p>
<p>Append to the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--extra-secret-key-files</code> <em>value</em></p>
<p>Append to the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--extra-substituters</code> <em>value</em></p>
<p>Append to the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-system-features</code> <em>value</em></p>
<p>Append to the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-public-keys</code> <em>value</em></p>
<p>Append to the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-substituters</code> <em>value</em></p>
<p>Append to the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-users</code> <em>value</em></p>
<p>Append to the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--fallback</code></p>
<p>Enable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--filter-syscalls</code></p>
<p>Enable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--flake-registry</code> <em>value</em></p>
<p>Set the <code>flake-registry</code> setting.</p>
</li>
<li>
<p><code>--fsync-metadata</code></p>
<p>Enable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--gc-reserved-space</code> <em>value</em></p>
<p>Set the <code>gc-reserved-space</code> setting.</p>
</li>
<li>
<p><code>--hashed-mirrors</code> <em>value</em></p>
<p>Set the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--http-connections</code> <em>value</em></p>
<p>Set the <code>http-connections</code> setting.</p>
</li>
<li>
<p><code>--http2</code></p>
<p>Enable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--id-count</code> <em>value</em></p>
<p>Set the <code>id-count</code> setting.</p>
</li>
<li>
<p><code>--ignore-try</code></p>
<p>Enable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--ignored-acls</code> <em>value</em></p>
<p>Set the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--impersonate-linux-26</code></p>
<p>Enable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--keep-build-log</code></p>
<p>Enable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--keep-derivations</code></p>
<p>Enable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-env-derivations</code></p>
<p>Enable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-failed</code></p>
<p>Enable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--keep-going</code></p>
<p>Enable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--keep-outputs</code></p>
<p>Enable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--log-lines</code> <em>value</em></p>
<p>Set the <code>log-lines</code> setting.</p>
</li>
<li>
<p><code>--max-build-log-size</code> <em>value</em></p>
<p>Set the <code>max-build-log-size</code> setting.</p>
</li>
<li>
<p><code>--max-free</code> <em>value</em></p>
<p>Set the <code>max-free</code> setting.</p>
</li>
<li>
<p><code>--max-jobs</code> <em>value</em></p>
<p>Set the <code>max-jobs</code> setting.</p>
</li>
<li>
<p><code>--max-silent-time</code> <em>value</em></p>
<p>Set the <code>max-silent-time</code> setting.</p>
</li>
<li>
<p><code>--min-free</code> <em>value</em></p>
<p>Set the <code>min-free</code> setting.</p>
</li>
<li>
<p><code>--min-free-check-interval</code> <em>value</em></p>
<p>Set the <code>min-free-check-interval</code> setting.</p>
</li>
<li>
<p><code>--nar-buffer-size</code> <em>value</em></p>
<p>Set the <code>nar-buffer-size</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-negative-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-negative-ttl</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-positive-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-positive-ttl</code> setting.</p>
</li>
<li>
<p><code>--netrc-file</code> <em>value</em></p>
<p>Set the <code>netrc-file</code> setting.</p>
</li>
<li>
<p><code>--nix-path</code> <em>value</em></p>
<p>Set the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--no-accept-flake-config</code></p>
<p>Disable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--no-allow-dirty</code></p>
<p>Disable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--no-allow-import-from-derivation</code></p>
<p>Disable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--no-allow-new-privileges</code></p>
<p>Disable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--no-allow-symlinked-store</code></p>
<p>Disable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--no-allow-unsafe-native-code-during-evaluation</code></p>
<p>Disable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--no-auto-allocate-uids</code></p>
<p>Disable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--no-auto-optimise-store</code></p>
<p>Disable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--no-builders-use-substitutes</code></p>
<p>Disable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--no-compress-build-log</code></p>
<p>Disable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-eval-cache</code></p>
<p>Disable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--no-fallback</code></p>
<p>Disable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--no-filter-syscalls</code></p>
<p>Disable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--no-fsync-metadata</code></p>
<p>Disable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--no-http2</code></p>
<p>Disable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--no-ignore-try</code></p>
<p>Disable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--no-impersonate-linux-26</code></p>
<p>Disable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--no-keep-build-log</code></p>
<p>Disable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-keep-derivations</code></p>
<p>Disable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-env-derivations</code></p>
<p>Disable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-failed</code></p>
<p>Disable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--no-keep-going</code></p>
<p>Disable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--no-keep-outputs</code></p>
<p>Disable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--no-preallocate-contents</code></p>
<p>Disable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--no-print-missing</code></p>
<p>Disable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--no-pure-eval</code></p>
<p>Disable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--no-require-sigs</code></p>
<p>Disable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--no-restrict-eval</code></p>
<p>Disable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--no-run-diff-hook</code></p>
<p>Disable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--no-sandbox</code></p>
<p>Disable sandboxing.</p>
</li>
<li>
<p><code>--no-sandbox-fallback</code></p>
<p>Disable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--no-show-trace</code></p>
<p>Disable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--no-substitute</code></p>
<p>Disable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--no-sync-before-registering</code></p>
<p>Disable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--no-trace-function-calls</code></p>
<p>Disable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--no-trace-verbose</code></p>
<p>Disable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--no-use-case-hack</code></p>
<p>Disable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--no-use-cgroups</code></p>
<p>Disable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--no-use-registries</code></p>
<p>Disable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--no-use-sqlite-wal</code></p>
<p>Disable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--no-warn-dirty</code></p>
<p>Disable the <code>warn-dirty</code> setting.</p>
</li>
<li>
<p><code>--plugin-files</code> <em>value</em></p>
<p>Set the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--post-build-hook</code> <em>value</em></p>
<p>Set the <code>post-build-hook</code> setting.</p>
</li>
<li>
<p><code>--pre-build-hook</code> <em>value</em></p>
<p>Set the <code>pre-build-hook</code> setting.</p>
</li>
<li>
<p><code>--preallocate-contents</code></p>
<p>Enable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--print-missing</code></p>
<p>Enable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--pure-eval</code></p>
<p>Enable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--relaxed-sandbox</code></p>
<p>Enable sandboxing, but allow builds to disable it.</p>
</li>
<li>
<p><code>--require-sigs</code></p>
<p>Enable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--restrict-eval</code></p>
<p>Enable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--run-diff-hook</code></p>
<p>Enable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--sandbox</code></p>
<p>Enable sandboxing.</p>
</li>
<li>
<p><code>--sandbox-build-dir</code> <em>value</em></p>
<p>Set the <code>sandbox-build-dir</code> setting.</p>
</li>
<li>
<p><code>--sandbox-dev-shm-size</code> <em>value</em></p>
<p>Set the <code>sandbox-dev-shm-size</code> setting.</p>
</li>
<li>
<p><code>--sandbox-fallback</code></p>
<p>Enable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--sandbox-paths</code> <em>value</em></p>
<p>Set the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--secret-key-files</code> <em>value</em></p>
<p>Set the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--show-trace</code></p>
<p>Enable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--stalled-download-timeout</code> <em>value</em></p>
<p>Set the <code>stalled-download-timeout</code> setting.</p>
</li>
<li>
<p><code>--start-id</code> <em>value</em></p>
<p>Set the <code>start-id</code> setting.</p>
</li>
<li>
<p><code>--store</code> <em>value</em></p>
<p>Set the <code>store</code> setting.</p>
</li>
<li>
<p><code>--substitute</code></p>
<p>Enable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--substituters</code> <em>value</em></p>
<p>Set the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--sync-before-registering</code></p>
<p>Enable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--system</code> <em>value</em></p>
<p>Set the <code>system</code> setting.</p>
</li>
<li>
<p><code>--system-features</code> <em>value</em></p>
<p>Set the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--tarball-ttl</code> <em>value</em></p>
<p>Set the <code>tarball-ttl</code> setting.</p>
</li>
<li>
<p><code>--timeout</code> <em>value</em></p>
<p>Set the <code>timeout</code> setting.</p>
</li>
<li>
<p><code>--trace-function-calls</code></p>
<p>Enable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--trace-verbose</code></p>
<p>Enable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--trusted-public-keys</code> <em>value</em></p>
<p>Set the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--trusted-substituters</code> <em>value</em></p>
<p>Set the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--trusted-users</code> <em>value</em></p>
<p>Set the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--use-case-hack</code></p>
<p>Enable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--use-cgroups</code></p>
<p>Enable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--use-registries</code></p>
<p>Enable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--use-sqlite-wal</code></p>
<p>Enable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--user-agent-suffix</code> <em>value</em></p>
<p>Set the <code>user-agent-suffix</code> setting.</p>
</li>
<li>
<p><code>--warn-dirty</code></p>
<p>Enable the <code>warn-dirty</code> setting.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p><strong>Warning</strong> <br />
This program is <strong>experimental</strong> and its interface is subject to change.</p>
</blockquote>
<h1 id="name-34"><a class="header" href="#name-34">Name</a></h1>
<p><code>nix hash</code> - compute and convert cryptographic hashes</p>
<h1 id="synopsis-65"><a class="header" href="#synopsis-65">Synopsis</a></h1>
<p><code>nix hash</code> [<em>option</em>...] <em>subcommand</em></p>
<p>where <em>subcommand</em> is one of the following:</p>
<ul>
<li><a href="command-ref/new-cli/./nix3-hash-file.html"><code>nix hash file</code></a> - print cryptographic hash of a regular file</li>
<li><a href="command-ref/new-cli/./nix3-hash-path.html"><code>nix hash path</code></a> - print cryptographic hash of the NAR serialisation of a path</li>
<li><a href="command-ref/new-cli/./nix3-hash-to-base16.html"><code>nix hash to-base16</code></a> - convert a hash to base-16 representation</li>
<li><a href="command-ref/new-cli/./nix3-hash-to-base32.html"><code>nix hash to-base32</code></a> - convert a hash to base-32 representation</li>
<li><a href="command-ref/new-cli/./nix3-hash-to-base64.html"><code>nix hash to-base64</code></a> - convert a hash to base-64 representation</li>
<li><a href="command-ref/new-cli/./nix3-hash-to-sri.html"><code>nix hash to-sri</code></a> - convert a hash to SRI representation</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p><strong>Warning</strong> <br />
This program is <strong>experimental</strong> and its interface is subject to change.</p>
</blockquote>
<h1 id="name-35"><a class="header" href="#name-35">Name</a></h1>
<p><code>nix hash file</code> - print cryptographic hash of a regular file</p>
<h1 id="synopsis-66"><a class="header" href="#synopsis-66">Synopsis</a></h1>
<p><code>nix hash file</code> [<em>option</em>...] <em>paths</em>...</p>
<h1 id="options-26"><a class="header" href="#options-26">Options</a></h1>
<ul>
<li>
<p><code>--base16</code></p>
<p>Print the hash in base-16 format.</p>
</li>
<li>
<p><code>--base32</code></p>
<p>Print the hash in base-32 (Nix-specific) format.</p>
</li>
<li>
<p><code>--base64</code></p>
<p>Print the hash in base-64 format.</p>
</li>
<li>
<p><code>--sri</code></p>
<p>Print the hash in SRI format.</p>
</li>
<li>
<p><code>--type</code> <em>hash-algo</em></p>
<p>hash algorithm ('md5', 'sha1', 'sha256', or 'sha512')</p>
</li>
</ul>
<p><strong>Logging-related options:</strong></p>
<ul>
<li>
<p><code>--debug</code></p>
<p>Set the logging verbosity level to 'debug'.</p>
</li>
<li>
<p><code>--log-format</code> <em>format</em></p>
<p>Set the format of log output; one of <code>raw</code>, <code>internal-json</code>, <code>bar</code> or <code>bar-with-logs</code>.</p>
</li>
<li>
<p><code>--print-build-logs</code> / <code>-L</code></p>
<p>Print full build logs on standard error.</p>
</li>
<li>
<p><code>--quiet</code></p>
<p>Decrease the logging verbosity level.</p>
</li>
<li>
<p><code>--verbose</code> / <code>-v</code></p>
<p>Increase the logging verbosity level.</p>
</li>
</ul>
<p><strong>Miscellaneous global options:</strong></p>
<ul>
<li>
<p><code>--help</code></p>
<p>Show usage information.</p>
</li>
<li>
<p><code>--offline</code></p>
<p>Disable substituters and consider all previously downloaded files up-to-date.</p>
</li>
<li>
<p><code>--option</code> <em>name</em> <em>value</em></p>
<p>Set the Nix configuration setting <em>name</em> to <em>value</em> (overriding <code>nix.conf</code>).</p>
</li>
<li>
<p><code>--refresh</code></p>
<p>Consider all previously downloaded files out-of-date.</p>
</li>
<li>
<p><code>--version</code></p>
<p>Show version information.</p>
</li>
</ul>
<p><strong>Options to override configuration settings:</strong></p>
<ul>
<li>
<p><code>--accept-flake-config</code></p>
<p>Enable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--access-tokens</code> <em>value</em></p>
<p>Set the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--allow-dirty</code></p>
<p>Enable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--allow-import-from-derivation</code></p>
<p>Enable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--allow-new-privileges</code></p>
<p>Enable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--allow-symlinked-store</code></p>
<p>Enable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--allow-unsafe-native-code-during-evaluation</code></p>
<p>Enable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--allowed-impure-host-deps</code> <em>value</em></p>
<p>Set the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--allowed-uris</code> <em>value</em></p>
<p>Set the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--allowed-users</code> <em>value</em></p>
<p>Set the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--auto-allocate-uids</code></p>
<p>Enable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--auto-optimise-store</code></p>
<p>Enable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt</code> <em>value</em></p>
<p>Set the <code>bash-prompt</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-prefix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-prefix</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-suffix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-suffix</code> setting.</p>
</li>
<li>
<p><code>--build-hook</code> <em>value</em></p>
<p>Set the <code>build-hook</code> setting.</p>
</li>
<li>
<p><code>--build-poll-interval</code> <em>value</em></p>
<p>Set the <code>build-poll-interval</code> setting.</p>
</li>
<li>
<p><code>--build-users-group</code> <em>value</em></p>
<p>Set the <code>build-users-group</code> setting.</p>
</li>
<li>
<p><code>--builders</code> <em>value</em></p>
<p>Set the <code>builders</code> setting.</p>
</li>
<li>
<p><code>--builders-use-substitutes</code></p>
<p>Enable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--commit-lockfile-summary</code> <em>value</em></p>
<p>Set the <code>commit-lockfile-summary</code> setting.</p>
</li>
<li>
<p><code>--compress-build-log</code></p>
<p>Enable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--connect-timeout</code> <em>value</em></p>
<p>Set the <code>connect-timeout</code> setting.</p>
</li>
<li>
<p><code>--cores</code> <em>value</em></p>
<p>Set the <code>cores</code> setting.</p>
</li>
<li>
<p><code>--diff-hook</code> <em>value</em></p>
<p>Set the <code>diff-hook</code> setting.</p>
</li>
<li>
<p><code>--download-attempts</code> <em>value</em></p>
<p>Set the <code>download-attempts</code> setting.</p>
</li>
<li>
<p><code>--download-speed</code> <em>value</em></p>
<p>Set the <code>download-speed</code> setting.</p>
</li>
<li>
<p><code>--eval-cache</code></p>
<p>Enable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--experimental-features</code> <em>value</em></p>
<p>Set the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-access-tokens</code> <em>value</em></p>
<p>Append to the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-impure-host-deps</code> <em>value</em></p>
<p>Append to the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-uris</code> <em>value</em></p>
<p>Append to the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-users</code> <em>value</em></p>
<p>Append to the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--extra-experimental-features</code> <em>value</em></p>
<p>Append to the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-extra-platforms</code> <em>value</em></p>
<p>Append to the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-hashed-mirrors</code> <em>value</em></p>
<p>Append to the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--extra-ignored-acls</code> <em>value</em></p>
<p>Append to the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--extra-nix-path</code> <em>value</em></p>
<p>Append to the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--extra-platforms</code> <em>value</em></p>
<p>Set the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-plugin-files</code> <em>value</em></p>
<p>Append to the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--extra-sandbox-paths</code> <em>value</em></p>
<p>Append to the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--extra-secret-key-files</code> <em>value</em></p>
<p>Append to the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--extra-substituters</code> <em>value</em></p>
<p>Append to the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-system-features</code> <em>value</em></p>
<p>Append to the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-public-keys</code> <em>value</em></p>
<p>Append to the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-substituters</code> <em>value</em></p>
<p>Append to the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-users</code> <em>value</em></p>
<p>Append to the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--fallback</code></p>
<p>Enable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--filter-syscalls</code></p>
<p>Enable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--flake-registry</code> <em>value</em></p>
<p>Set the <code>flake-registry</code> setting.</p>
</li>
<li>
<p><code>--fsync-metadata</code></p>
<p>Enable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--gc-reserved-space</code> <em>value</em></p>
<p>Set the <code>gc-reserved-space</code> setting.</p>
</li>
<li>
<p><code>--hashed-mirrors</code> <em>value</em></p>
<p>Set the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--http-connections</code> <em>value</em></p>
<p>Set the <code>http-connections</code> setting.</p>
</li>
<li>
<p><code>--http2</code></p>
<p>Enable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--id-count</code> <em>value</em></p>
<p>Set the <code>id-count</code> setting.</p>
</li>
<li>
<p><code>--ignore-try</code></p>
<p>Enable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--ignored-acls</code> <em>value</em></p>
<p>Set the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--impersonate-linux-26</code></p>
<p>Enable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--keep-build-log</code></p>
<p>Enable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--keep-derivations</code></p>
<p>Enable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-env-derivations</code></p>
<p>Enable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-failed</code></p>
<p>Enable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--keep-going</code></p>
<p>Enable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--keep-outputs</code></p>
<p>Enable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--log-lines</code> <em>value</em></p>
<p>Set the <code>log-lines</code> setting.</p>
</li>
<li>
<p><code>--max-build-log-size</code> <em>value</em></p>
<p>Set the <code>max-build-log-size</code> setting.</p>
</li>
<li>
<p><code>--max-free</code> <em>value</em></p>
<p>Set the <code>max-free</code> setting.</p>
</li>
<li>
<p><code>--max-jobs</code> <em>value</em></p>
<p>Set the <code>max-jobs</code> setting.</p>
</li>
<li>
<p><code>--max-silent-time</code> <em>value</em></p>
<p>Set the <code>max-silent-time</code> setting.</p>
</li>
<li>
<p><code>--min-free</code> <em>value</em></p>
<p>Set the <code>min-free</code> setting.</p>
</li>
<li>
<p><code>--min-free-check-interval</code> <em>value</em></p>
<p>Set the <code>min-free-check-interval</code> setting.</p>
</li>
<li>
<p><code>--nar-buffer-size</code> <em>value</em></p>
<p>Set the <code>nar-buffer-size</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-negative-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-negative-ttl</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-positive-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-positive-ttl</code> setting.</p>
</li>
<li>
<p><code>--netrc-file</code> <em>value</em></p>
<p>Set the <code>netrc-file</code> setting.</p>
</li>
<li>
<p><code>--nix-path</code> <em>value</em></p>
<p>Set the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--no-accept-flake-config</code></p>
<p>Disable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--no-allow-dirty</code></p>
<p>Disable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--no-allow-import-from-derivation</code></p>
<p>Disable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--no-allow-new-privileges</code></p>
<p>Disable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--no-allow-symlinked-store</code></p>
<p>Disable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--no-allow-unsafe-native-code-during-evaluation</code></p>
<p>Disable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--no-auto-allocate-uids</code></p>
<p>Disable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--no-auto-optimise-store</code></p>
<p>Disable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--no-builders-use-substitutes</code></p>
<p>Disable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--no-compress-build-log</code></p>
<p>Disable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-eval-cache</code></p>
<p>Disable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--no-fallback</code></p>
<p>Disable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--no-filter-syscalls</code></p>
<p>Disable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--no-fsync-metadata</code></p>
<p>Disable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--no-http2</code></p>
<p>Disable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--no-ignore-try</code></p>
<p>Disable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--no-impersonate-linux-26</code></p>
<p>Disable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--no-keep-build-log</code></p>
<p>Disable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-keep-derivations</code></p>
<p>Disable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-env-derivations</code></p>
<p>Disable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-failed</code></p>
<p>Disable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--no-keep-going</code></p>
<p>Disable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--no-keep-outputs</code></p>
<p>Disable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--no-preallocate-contents</code></p>
<p>Disable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--no-print-missing</code></p>
<p>Disable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--no-pure-eval</code></p>
<p>Disable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--no-require-sigs</code></p>
<p>Disable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--no-restrict-eval</code></p>
<p>Disable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--no-run-diff-hook</code></p>
<p>Disable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--no-sandbox</code></p>
<p>Disable sandboxing.</p>
</li>
<li>
<p><code>--no-sandbox-fallback</code></p>
<p>Disable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--no-show-trace</code></p>
<p>Disable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--no-substitute</code></p>
<p>Disable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--no-sync-before-registering</code></p>
<p>Disable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--no-trace-function-calls</code></p>
<p>Disable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--no-trace-verbose</code></p>
<p>Disable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--no-use-case-hack</code></p>
<p>Disable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--no-use-cgroups</code></p>
<p>Disable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--no-use-registries</code></p>
<p>Disable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--no-use-sqlite-wal</code></p>
<p>Disable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--no-warn-dirty</code></p>
<p>Disable the <code>warn-dirty</code> setting.</p>
</li>
<li>
<p><code>--plugin-files</code> <em>value</em></p>
<p>Set the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--post-build-hook</code> <em>value</em></p>
<p>Set the <code>post-build-hook</code> setting.</p>
</li>
<li>
<p><code>--pre-build-hook</code> <em>value</em></p>
<p>Set the <code>pre-build-hook</code> setting.</p>
</li>
<li>
<p><code>--preallocate-contents</code></p>
<p>Enable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--print-missing</code></p>
<p>Enable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--pure-eval</code></p>
<p>Enable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--relaxed-sandbox</code></p>
<p>Enable sandboxing, but allow builds to disable it.</p>
</li>
<li>
<p><code>--require-sigs</code></p>
<p>Enable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--restrict-eval</code></p>
<p>Enable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--run-diff-hook</code></p>
<p>Enable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--sandbox</code></p>
<p>Enable sandboxing.</p>
</li>
<li>
<p><code>--sandbox-build-dir</code> <em>value</em></p>
<p>Set the <code>sandbox-build-dir</code> setting.</p>
</li>
<li>
<p><code>--sandbox-dev-shm-size</code> <em>value</em></p>
<p>Set the <code>sandbox-dev-shm-size</code> setting.</p>
</li>
<li>
<p><code>--sandbox-fallback</code></p>
<p>Enable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--sandbox-paths</code> <em>value</em></p>
<p>Set the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--secret-key-files</code> <em>value</em></p>
<p>Set the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--show-trace</code></p>
<p>Enable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--stalled-download-timeout</code> <em>value</em></p>
<p>Set the <code>stalled-download-timeout</code> setting.</p>
</li>
<li>
<p><code>--start-id</code> <em>value</em></p>
<p>Set the <code>start-id</code> setting.</p>
</li>
<li>
<p><code>--store</code> <em>value</em></p>
<p>Set the <code>store</code> setting.</p>
</li>
<li>
<p><code>--substitute</code></p>
<p>Enable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--substituters</code> <em>value</em></p>
<p>Set the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--sync-before-registering</code></p>
<p>Enable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--system</code> <em>value</em></p>
<p>Set the <code>system</code> setting.</p>
</li>
<li>
<p><code>--system-features</code> <em>value</em></p>
<p>Set the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--tarball-ttl</code> <em>value</em></p>
<p>Set the <code>tarball-ttl</code> setting.</p>
</li>
<li>
<p><code>--timeout</code> <em>value</em></p>
<p>Set the <code>timeout</code> setting.</p>
</li>
<li>
<p><code>--trace-function-calls</code></p>
<p>Enable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--trace-verbose</code></p>
<p>Enable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--trusted-public-keys</code> <em>value</em></p>
<p>Set the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--trusted-substituters</code> <em>value</em></p>
<p>Set the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--trusted-users</code> <em>value</em></p>
<p>Set the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--use-case-hack</code></p>
<p>Enable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--use-cgroups</code></p>
<p>Enable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--use-registries</code></p>
<p>Enable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--use-sqlite-wal</code></p>
<p>Enable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--user-agent-suffix</code> <em>value</em></p>
<p>Set the <code>user-agent-suffix</code> setting.</p>
</li>
<li>
<p><code>--warn-dirty</code></p>
<p>Enable the <code>warn-dirty</code> setting.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p><strong>Warning</strong> <br />
This program is <strong>experimental</strong> and its interface is subject to change.</p>
</blockquote>
<h1 id="name-36"><a class="header" href="#name-36">Name</a></h1>
<p><code>nix hash path</code> - print cryptographic hash of the NAR serialisation of a path</p>
<h1 id="synopsis-67"><a class="header" href="#synopsis-67">Synopsis</a></h1>
<p><code>nix hash path</code> [<em>option</em>...] <em>paths</em>...</p>
<h1 id="options-27"><a class="header" href="#options-27">Options</a></h1>
<ul>
<li>
<p><code>--base16</code></p>
<p>Print the hash in base-16 format.</p>
</li>
<li>
<p><code>--base32</code></p>
<p>Print the hash in base-32 (Nix-specific) format.</p>
</li>
<li>
<p><code>--base64</code></p>
<p>Print the hash in base-64 format.</p>
</li>
<li>
<p><code>--sri</code></p>
<p>Print the hash in SRI format.</p>
</li>
<li>
<p><code>--type</code> <em>hash-algo</em></p>
<p>hash algorithm ('md5', 'sha1', 'sha256', or 'sha512')</p>
</li>
</ul>
<p><strong>Logging-related options:</strong></p>
<ul>
<li>
<p><code>--debug</code></p>
<p>Set the logging verbosity level to 'debug'.</p>
</li>
<li>
<p><code>--log-format</code> <em>format</em></p>
<p>Set the format of log output; one of <code>raw</code>, <code>internal-json</code>, <code>bar</code> or <code>bar-with-logs</code>.</p>
</li>
<li>
<p><code>--print-build-logs</code> / <code>-L</code></p>
<p>Print full build logs on standard error.</p>
</li>
<li>
<p><code>--quiet</code></p>
<p>Decrease the logging verbosity level.</p>
</li>
<li>
<p><code>--verbose</code> / <code>-v</code></p>
<p>Increase the logging verbosity level.</p>
</li>
</ul>
<p><strong>Miscellaneous global options:</strong></p>
<ul>
<li>
<p><code>--help</code></p>
<p>Show usage information.</p>
</li>
<li>
<p><code>--offline</code></p>
<p>Disable substituters and consider all previously downloaded files up-to-date.</p>
</li>
<li>
<p><code>--option</code> <em>name</em> <em>value</em></p>
<p>Set the Nix configuration setting <em>name</em> to <em>value</em> (overriding <code>nix.conf</code>).</p>
</li>
<li>
<p><code>--refresh</code></p>
<p>Consider all previously downloaded files out-of-date.</p>
</li>
<li>
<p><code>--version</code></p>
<p>Show version information.</p>
</li>
</ul>
<p><strong>Options to override configuration settings:</strong></p>
<ul>
<li>
<p><code>--accept-flake-config</code></p>
<p>Enable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--access-tokens</code> <em>value</em></p>
<p>Set the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--allow-dirty</code></p>
<p>Enable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--allow-import-from-derivation</code></p>
<p>Enable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--allow-new-privileges</code></p>
<p>Enable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--allow-symlinked-store</code></p>
<p>Enable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--allow-unsafe-native-code-during-evaluation</code></p>
<p>Enable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--allowed-impure-host-deps</code> <em>value</em></p>
<p>Set the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--allowed-uris</code> <em>value</em></p>
<p>Set the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--allowed-users</code> <em>value</em></p>
<p>Set the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--auto-allocate-uids</code></p>
<p>Enable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--auto-optimise-store</code></p>
<p>Enable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt</code> <em>value</em></p>
<p>Set the <code>bash-prompt</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-prefix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-prefix</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-suffix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-suffix</code> setting.</p>
</li>
<li>
<p><code>--build-hook</code> <em>value</em></p>
<p>Set the <code>build-hook</code> setting.</p>
</li>
<li>
<p><code>--build-poll-interval</code> <em>value</em></p>
<p>Set the <code>build-poll-interval</code> setting.</p>
</li>
<li>
<p><code>--build-users-group</code> <em>value</em></p>
<p>Set the <code>build-users-group</code> setting.</p>
</li>
<li>
<p><code>--builders</code> <em>value</em></p>
<p>Set the <code>builders</code> setting.</p>
</li>
<li>
<p><code>--builders-use-substitutes</code></p>
<p>Enable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--commit-lockfile-summary</code> <em>value</em></p>
<p>Set the <code>commit-lockfile-summary</code> setting.</p>
</li>
<li>
<p><code>--compress-build-log</code></p>
<p>Enable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--connect-timeout</code> <em>value</em></p>
<p>Set the <code>connect-timeout</code> setting.</p>
</li>
<li>
<p><code>--cores</code> <em>value</em></p>
<p>Set the <code>cores</code> setting.</p>
</li>
<li>
<p><code>--diff-hook</code> <em>value</em></p>
<p>Set the <code>diff-hook</code> setting.</p>
</li>
<li>
<p><code>--download-attempts</code> <em>value</em></p>
<p>Set the <code>download-attempts</code> setting.</p>
</li>
<li>
<p><code>--download-speed</code> <em>value</em></p>
<p>Set the <code>download-speed</code> setting.</p>
</li>
<li>
<p><code>--eval-cache</code></p>
<p>Enable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--experimental-features</code> <em>value</em></p>
<p>Set the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-access-tokens</code> <em>value</em></p>
<p>Append to the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-impure-host-deps</code> <em>value</em></p>
<p>Append to the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-uris</code> <em>value</em></p>
<p>Append to the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-users</code> <em>value</em></p>
<p>Append to the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--extra-experimental-features</code> <em>value</em></p>
<p>Append to the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-extra-platforms</code> <em>value</em></p>
<p>Append to the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-hashed-mirrors</code> <em>value</em></p>
<p>Append to the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--extra-ignored-acls</code> <em>value</em></p>
<p>Append to the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--extra-nix-path</code> <em>value</em></p>
<p>Append to the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--extra-platforms</code> <em>value</em></p>
<p>Set the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-plugin-files</code> <em>value</em></p>
<p>Append to the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--extra-sandbox-paths</code> <em>value</em></p>
<p>Append to the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--extra-secret-key-files</code> <em>value</em></p>
<p>Append to the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--extra-substituters</code> <em>value</em></p>
<p>Append to the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-system-features</code> <em>value</em></p>
<p>Append to the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-public-keys</code> <em>value</em></p>
<p>Append to the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-substituters</code> <em>value</em></p>
<p>Append to the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-users</code> <em>value</em></p>
<p>Append to the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--fallback</code></p>
<p>Enable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--filter-syscalls</code></p>
<p>Enable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--flake-registry</code> <em>value</em></p>
<p>Set the <code>flake-registry</code> setting.</p>
</li>
<li>
<p><code>--fsync-metadata</code></p>
<p>Enable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--gc-reserved-space</code> <em>value</em></p>
<p>Set the <code>gc-reserved-space</code> setting.</p>
</li>
<li>
<p><code>--hashed-mirrors</code> <em>value</em></p>
<p>Set the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--http-connections</code> <em>value</em></p>
<p>Set the <code>http-connections</code> setting.</p>
</li>
<li>
<p><code>--http2</code></p>
<p>Enable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--id-count</code> <em>value</em></p>
<p>Set the <code>id-count</code> setting.</p>
</li>
<li>
<p><code>--ignore-try</code></p>
<p>Enable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--ignored-acls</code> <em>value</em></p>
<p>Set the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--impersonate-linux-26</code></p>
<p>Enable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--keep-build-log</code></p>
<p>Enable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--keep-derivations</code></p>
<p>Enable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-env-derivations</code></p>
<p>Enable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-failed</code></p>
<p>Enable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--keep-going</code></p>
<p>Enable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--keep-outputs</code></p>
<p>Enable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--log-lines</code> <em>value</em></p>
<p>Set the <code>log-lines</code> setting.</p>
</li>
<li>
<p><code>--max-build-log-size</code> <em>value</em></p>
<p>Set the <code>max-build-log-size</code> setting.</p>
</li>
<li>
<p><code>--max-free</code> <em>value</em></p>
<p>Set the <code>max-free</code> setting.</p>
</li>
<li>
<p><code>--max-jobs</code> <em>value</em></p>
<p>Set the <code>max-jobs</code> setting.</p>
</li>
<li>
<p><code>--max-silent-time</code> <em>value</em></p>
<p>Set the <code>max-silent-time</code> setting.</p>
</li>
<li>
<p><code>--min-free</code> <em>value</em></p>
<p>Set the <code>min-free</code> setting.</p>
</li>
<li>
<p><code>--min-free-check-interval</code> <em>value</em></p>
<p>Set the <code>min-free-check-interval</code> setting.</p>
</li>
<li>
<p><code>--nar-buffer-size</code> <em>value</em></p>
<p>Set the <code>nar-buffer-size</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-negative-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-negative-ttl</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-positive-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-positive-ttl</code> setting.</p>
</li>
<li>
<p><code>--netrc-file</code> <em>value</em></p>
<p>Set the <code>netrc-file</code> setting.</p>
</li>
<li>
<p><code>--nix-path</code> <em>value</em></p>
<p>Set the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--no-accept-flake-config</code></p>
<p>Disable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--no-allow-dirty</code></p>
<p>Disable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--no-allow-import-from-derivation</code></p>
<p>Disable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--no-allow-new-privileges</code></p>
<p>Disable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--no-allow-symlinked-store</code></p>
<p>Disable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--no-allow-unsafe-native-code-during-evaluation</code></p>
<p>Disable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--no-auto-allocate-uids</code></p>
<p>Disable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--no-auto-optimise-store</code></p>
<p>Disable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--no-builders-use-substitutes</code></p>
<p>Disable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--no-compress-build-log</code></p>
<p>Disable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-eval-cache</code></p>
<p>Disable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--no-fallback</code></p>
<p>Disable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--no-filter-syscalls</code></p>
<p>Disable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--no-fsync-metadata</code></p>
<p>Disable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--no-http2</code></p>
<p>Disable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--no-ignore-try</code></p>
<p>Disable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--no-impersonate-linux-26</code></p>
<p>Disable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--no-keep-build-log</code></p>
<p>Disable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-keep-derivations</code></p>
<p>Disable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-env-derivations</code></p>
<p>Disable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-failed</code></p>
<p>Disable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--no-keep-going</code></p>
<p>Disable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--no-keep-outputs</code></p>
<p>Disable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--no-preallocate-contents</code></p>
<p>Disable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--no-print-missing</code></p>
<p>Disable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--no-pure-eval</code></p>
<p>Disable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--no-require-sigs</code></p>
<p>Disable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--no-restrict-eval</code></p>
<p>Disable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--no-run-diff-hook</code></p>
<p>Disable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--no-sandbox</code></p>
<p>Disable sandboxing.</p>
</li>
<li>
<p><code>--no-sandbox-fallback</code></p>
<p>Disable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--no-show-trace</code></p>
<p>Disable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--no-substitute</code></p>
<p>Disable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--no-sync-before-registering</code></p>
<p>Disable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--no-trace-function-calls</code></p>
<p>Disable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--no-trace-verbose</code></p>
<p>Disable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--no-use-case-hack</code></p>
<p>Disable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--no-use-cgroups</code></p>
<p>Disable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--no-use-registries</code></p>
<p>Disable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--no-use-sqlite-wal</code></p>
<p>Disable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--no-warn-dirty</code></p>
<p>Disable the <code>warn-dirty</code> setting.</p>
</li>
<li>
<p><code>--plugin-files</code> <em>value</em></p>
<p>Set the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--post-build-hook</code> <em>value</em></p>
<p>Set the <code>post-build-hook</code> setting.</p>
</li>
<li>
<p><code>--pre-build-hook</code> <em>value</em></p>
<p>Set the <code>pre-build-hook</code> setting.</p>
</li>
<li>
<p><code>--preallocate-contents</code></p>
<p>Enable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--print-missing</code></p>
<p>Enable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--pure-eval</code></p>
<p>Enable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--relaxed-sandbox</code></p>
<p>Enable sandboxing, but allow builds to disable it.</p>
</li>
<li>
<p><code>--require-sigs</code></p>
<p>Enable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--restrict-eval</code></p>
<p>Enable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--run-diff-hook</code></p>
<p>Enable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--sandbox</code></p>
<p>Enable sandboxing.</p>
</li>
<li>
<p><code>--sandbox-build-dir</code> <em>value</em></p>
<p>Set the <code>sandbox-build-dir</code> setting.</p>
</li>
<li>
<p><code>--sandbox-dev-shm-size</code> <em>value</em></p>
<p>Set the <code>sandbox-dev-shm-size</code> setting.</p>
</li>
<li>
<p><code>--sandbox-fallback</code></p>
<p>Enable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--sandbox-paths</code> <em>value</em></p>
<p>Set the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--secret-key-files</code> <em>value</em></p>
<p>Set the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--show-trace</code></p>
<p>Enable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--stalled-download-timeout</code> <em>value</em></p>
<p>Set the <code>stalled-download-timeout</code> setting.</p>
</li>
<li>
<p><code>--start-id</code> <em>value</em></p>
<p>Set the <code>start-id</code> setting.</p>
</li>
<li>
<p><code>--store</code> <em>value</em></p>
<p>Set the <code>store</code> setting.</p>
</li>
<li>
<p><code>--substitute</code></p>
<p>Enable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--substituters</code> <em>value</em></p>
<p>Set the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--sync-before-registering</code></p>
<p>Enable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--system</code> <em>value</em></p>
<p>Set the <code>system</code> setting.</p>
</li>
<li>
<p><code>--system-features</code> <em>value</em></p>
<p>Set the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--tarball-ttl</code> <em>value</em></p>
<p>Set the <code>tarball-ttl</code> setting.</p>
</li>
<li>
<p><code>--timeout</code> <em>value</em></p>
<p>Set the <code>timeout</code> setting.</p>
</li>
<li>
<p><code>--trace-function-calls</code></p>
<p>Enable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--trace-verbose</code></p>
<p>Enable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--trusted-public-keys</code> <em>value</em></p>
<p>Set the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--trusted-substituters</code> <em>value</em></p>
<p>Set the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--trusted-users</code> <em>value</em></p>
<p>Set the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--use-case-hack</code></p>
<p>Enable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--use-cgroups</code></p>
<p>Enable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--use-registries</code></p>
<p>Enable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--use-sqlite-wal</code></p>
<p>Enable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--user-agent-suffix</code> <em>value</em></p>
<p>Set the <code>user-agent-suffix</code> setting.</p>
</li>
<li>
<p><code>--warn-dirty</code></p>
<p>Enable the <code>warn-dirty</code> setting.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p><strong>Warning</strong> <br />
This program is <strong>experimental</strong> and its interface is subject to change.</p>
</blockquote>
<h1 id="name-37"><a class="header" href="#name-37">Name</a></h1>
<p><code>nix hash to-base16</code> - convert a hash to base-16 representation</p>
<h1 id="synopsis-68"><a class="header" href="#synopsis-68">Synopsis</a></h1>
<p><code>nix hash to-base16</code> [<em>option</em>...] <em>strings</em>...</p>
<h1 id="options-28"><a class="header" href="#options-28">Options</a></h1>
<ul>
<li>
<p><code>--type</code> <em>hash-algo</em></p>
<p>hash algorithm ('md5', 'sha1', 'sha256', or 'sha512'). Optional as can also be gotten from SRI hash itself.</p>
</li>
</ul>
<p><strong>Logging-related options:</strong></p>
<ul>
<li>
<p><code>--debug</code></p>
<p>Set the logging verbosity level to 'debug'.</p>
</li>
<li>
<p><code>--log-format</code> <em>format</em></p>
<p>Set the format of log output; one of <code>raw</code>, <code>internal-json</code>, <code>bar</code> or <code>bar-with-logs</code>.</p>
</li>
<li>
<p><code>--print-build-logs</code> / <code>-L</code></p>
<p>Print full build logs on standard error.</p>
</li>
<li>
<p><code>--quiet</code></p>
<p>Decrease the logging verbosity level.</p>
</li>
<li>
<p><code>--verbose</code> / <code>-v</code></p>
<p>Increase the logging verbosity level.</p>
</li>
</ul>
<p><strong>Miscellaneous global options:</strong></p>
<ul>
<li>
<p><code>--help</code></p>
<p>Show usage information.</p>
</li>
<li>
<p><code>--offline</code></p>
<p>Disable substituters and consider all previously downloaded files up-to-date.</p>
</li>
<li>
<p><code>--option</code> <em>name</em> <em>value</em></p>
<p>Set the Nix configuration setting <em>name</em> to <em>value</em> (overriding <code>nix.conf</code>).</p>
</li>
<li>
<p><code>--refresh</code></p>
<p>Consider all previously downloaded files out-of-date.</p>
</li>
<li>
<p><code>--version</code></p>
<p>Show version information.</p>
</li>
</ul>
<p><strong>Options to override configuration settings:</strong></p>
<ul>
<li>
<p><code>--accept-flake-config</code></p>
<p>Enable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--access-tokens</code> <em>value</em></p>
<p>Set the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--allow-dirty</code></p>
<p>Enable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--allow-import-from-derivation</code></p>
<p>Enable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--allow-new-privileges</code></p>
<p>Enable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--allow-symlinked-store</code></p>
<p>Enable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--allow-unsafe-native-code-during-evaluation</code></p>
<p>Enable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--allowed-impure-host-deps</code> <em>value</em></p>
<p>Set the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--allowed-uris</code> <em>value</em></p>
<p>Set the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--allowed-users</code> <em>value</em></p>
<p>Set the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--auto-allocate-uids</code></p>
<p>Enable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--auto-optimise-store</code></p>
<p>Enable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt</code> <em>value</em></p>
<p>Set the <code>bash-prompt</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-prefix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-prefix</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-suffix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-suffix</code> setting.</p>
</li>
<li>
<p><code>--build-hook</code> <em>value</em></p>
<p>Set the <code>build-hook</code> setting.</p>
</li>
<li>
<p><code>--build-poll-interval</code> <em>value</em></p>
<p>Set the <code>build-poll-interval</code> setting.</p>
</li>
<li>
<p><code>--build-users-group</code> <em>value</em></p>
<p>Set the <code>build-users-group</code> setting.</p>
</li>
<li>
<p><code>--builders</code> <em>value</em></p>
<p>Set the <code>builders</code> setting.</p>
</li>
<li>
<p><code>--builders-use-substitutes</code></p>
<p>Enable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--commit-lockfile-summary</code> <em>value</em></p>
<p>Set the <code>commit-lockfile-summary</code> setting.</p>
</li>
<li>
<p><code>--compress-build-log</code></p>
<p>Enable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--connect-timeout</code> <em>value</em></p>
<p>Set the <code>connect-timeout</code> setting.</p>
</li>
<li>
<p><code>--cores</code> <em>value</em></p>
<p>Set the <code>cores</code> setting.</p>
</li>
<li>
<p><code>--diff-hook</code> <em>value</em></p>
<p>Set the <code>diff-hook</code> setting.</p>
</li>
<li>
<p><code>--download-attempts</code> <em>value</em></p>
<p>Set the <code>download-attempts</code> setting.</p>
</li>
<li>
<p><code>--download-speed</code> <em>value</em></p>
<p>Set the <code>download-speed</code> setting.</p>
</li>
<li>
<p><code>--eval-cache</code></p>
<p>Enable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--experimental-features</code> <em>value</em></p>
<p>Set the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-access-tokens</code> <em>value</em></p>
<p>Append to the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-impure-host-deps</code> <em>value</em></p>
<p>Append to the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-uris</code> <em>value</em></p>
<p>Append to the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-users</code> <em>value</em></p>
<p>Append to the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--extra-experimental-features</code> <em>value</em></p>
<p>Append to the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-extra-platforms</code> <em>value</em></p>
<p>Append to the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-hashed-mirrors</code> <em>value</em></p>
<p>Append to the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--extra-ignored-acls</code> <em>value</em></p>
<p>Append to the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--extra-nix-path</code> <em>value</em></p>
<p>Append to the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--extra-platforms</code> <em>value</em></p>
<p>Set the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-plugin-files</code> <em>value</em></p>
<p>Append to the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--extra-sandbox-paths</code> <em>value</em></p>
<p>Append to the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--extra-secret-key-files</code> <em>value</em></p>
<p>Append to the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--extra-substituters</code> <em>value</em></p>
<p>Append to the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-system-features</code> <em>value</em></p>
<p>Append to the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-public-keys</code> <em>value</em></p>
<p>Append to the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-substituters</code> <em>value</em></p>
<p>Append to the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-users</code> <em>value</em></p>
<p>Append to the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--fallback</code></p>
<p>Enable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--filter-syscalls</code></p>
<p>Enable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--flake-registry</code> <em>value</em></p>
<p>Set the <code>flake-registry</code> setting.</p>
</li>
<li>
<p><code>--fsync-metadata</code></p>
<p>Enable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--gc-reserved-space</code> <em>value</em></p>
<p>Set the <code>gc-reserved-space</code> setting.</p>
</li>
<li>
<p><code>--hashed-mirrors</code> <em>value</em></p>
<p>Set the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--http-connections</code> <em>value</em></p>
<p>Set the <code>http-connections</code> setting.</p>
</li>
<li>
<p><code>--http2</code></p>
<p>Enable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--id-count</code> <em>value</em></p>
<p>Set the <code>id-count</code> setting.</p>
</li>
<li>
<p><code>--ignore-try</code></p>
<p>Enable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--ignored-acls</code> <em>value</em></p>
<p>Set the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--impersonate-linux-26</code></p>
<p>Enable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--keep-build-log</code></p>
<p>Enable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--keep-derivations</code></p>
<p>Enable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-env-derivations</code></p>
<p>Enable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-failed</code></p>
<p>Enable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--keep-going</code></p>
<p>Enable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--keep-outputs</code></p>
<p>Enable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--log-lines</code> <em>value</em></p>
<p>Set the <code>log-lines</code> setting.</p>
</li>
<li>
<p><code>--max-build-log-size</code> <em>value</em></p>
<p>Set the <code>max-build-log-size</code> setting.</p>
</li>
<li>
<p><code>--max-free</code> <em>value</em></p>
<p>Set the <code>max-free</code> setting.</p>
</li>
<li>
<p><code>--max-jobs</code> <em>value</em></p>
<p>Set the <code>max-jobs</code> setting.</p>
</li>
<li>
<p><code>--max-silent-time</code> <em>value</em></p>
<p>Set the <code>max-silent-time</code> setting.</p>
</li>
<li>
<p><code>--min-free</code> <em>value</em></p>
<p>Set the <code>min-free</code> setting.</p>
</li>
<li>
<p><code>--min-free-check-interval</code> <em>value</em></p>
<p>Set the <code>min-free-check-interval</code> setting.</p>
</li>
<li>
<p><code>--nar-buffer-size</code> <em>value</em></p>
<p>Set the <code>nar-buffer-size</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-negative-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-negative-ttl</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-positive-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-positive-ttl</code> setting.</p>
</li>
<li>
<p><code>--netrc-file</code> <em>value</em></p>
<p>Set the <code>netrc-file</code> setting.</p>
</li>
<li>
<p><code>--nix-path</code> <em>value</em></p>
<p>Set the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--no-accept-flake-config</code></p>
<p>Disable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--no-allow-dirty</code></p>
<p>Disable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--no-allow-import-from-derivation</code></p>
<p>Disable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--no-allow-new-privileges</code></p>
<p>Disable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--no-allow-symlinked-store</code></p>
<p>Disable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--no-allow-unsafe-native-code-during-evaluation</code></p>
<p>Disable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--no-auto-allocate-uids</code></p>
<p>Disable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--no-auto-optimise-store</code></p>
<p>Disable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--no-builders-use-substitutes</code></p>
<p>Disable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--no-compress-build-log</code></p>
<p>Disable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-eval-cache</code></p>
<p>Disable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--no-fallback</code></p>
<p>Disable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--no-filter-syscalls</code></p>
<p>Disable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--no-fsync-metadata</code></p>
<p>Disable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--no-http2</code></p>
<p>Disable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--no-ignore-try</code></p>
<p>Disable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--no-impersonate-linux-26</code></p>
<p>Disable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--no-keep-build-log</code></p>
<p>Disable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-keep-derivations</code></p>
<p>Disable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-env-derivations</code></p>
<p>Disable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-failed</code></p>
<p>Disable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--no-keep-going</code></p>
<p>Disable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--no-keep-outputs</code></p>
<p>Disable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--no-preallocate-contents</code></p>
<p>Disable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--no-print-missing</code></p>
<p>Disable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--no-pure-eval</code></p>
<p>Disable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--no-require-sigs</code></p>
<p>Disable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--no-restrict-eval</code></p>
<p>Disable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--no-run-diff-hook</code></p>
<p>Disable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--no-sandbox</code></p>
<p>Disable sandboxing.</p>
</li>
<li>
<p><code>--no-sandbox-fallback</code></p>
<p>Disable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--no-show-trace</code></p>
<p>Disable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--no-substitute</code></p>
<p>Disable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--no-sync-before-registering</code></p>
<p>Disable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--no-trace-function-calls</code></p>
<p>Disable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--no-trace-verbose</code></p>
<p>Disable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--no-use-case-hack</code></p>
<p>Disable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--no-use-cgroups</code></p>
<p>Disable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--no-use-registries</code></p>
<p>Disable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--no-use-sqlite-wal</code></p>
<p>Disable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--no-warn-dirty</code></p>
<p>Disable the <code>warn-dirty</code> setting.</p>
</li>
<li>
<p><code>--plugin-files</code> <em>value</em></p>
<p>Set the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--post-build-hook</code> <em>value</em></p>
<p>Set the <code>post-build-hook</code> setting.</p>
</li>
<li>
<p><code>--pre-build-hook</code> <em>value</em></p>
<p>Set the <code>pre-build-hook</code> setting.</p>
</li>
<li>
<p><code>--preallocate-contents</code></p>
<p>Enable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--print-missing</code></p>
<p>Enable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--pure-eval</code></p>
<p>Enable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--relaxed-sandbox</code></p>
<p>Enable sandboxing, but allow builds to disable it.</p>
</li>
<li>
<p><code>--require-sigs</code></p>
<p>Enable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--restrict-eval</code></p>
<p>Enable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--run-diff-hook</code></p>
<p>Enable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--sandbox</code></p>
<p>Enable sandboxing.</p>
</li>
<li>
<p><code>--sandbox-build-dir</code> <em>value</em></p>
<p>Set the <code>sandbox-build-dir</code> setting.</p>
</li>
<li>
<p><code>--sandbox-dev-shm-size</code> <em>value</em></p>
<p>Set the <code>sandbox-dev-shm-size</code> setting.</p>
</li>
<li>
<p><code>--sandbox-fallback</code></p>
<p>Enable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--sandbox-paths</code> <em>value</em></p>
<p>Set the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--secret-key-files</code> <em>value</em></p>
<p>Set the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--show-trace</code></p>
<p>Enable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--stalled-download-timeout</code> <em>value</em></p>
<p>Set the <code>stalled-download-timeout</code> setting.</p>
</li>
<li>
<p><code>--start-id</code> <em>value</em></p>
<p>Set the <code>start-id</code> setting.</p>
</li>
<li>
<p><code>--store</code> <em>value</em></p>
<p>Set the <code>store</code> setting.</p>
</li>
<li>
<p><code>--substitute</code></p>
<p>Enable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--substituters</code> <em>value</em></p>
<p>Set the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--sync-before-registering</code></p>
<p>Enable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--system</code> <em>value</em></p>
<p>Set the <code>system</code> setting.</p>
</li>
<li>
<p><code>--system-features</code> <em>value</em></p>
<p>Set the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--tarball-ttl</code> <em>value</em></p>
<p>Set the <code>tarball-ttl</code> setting.</p>
</li>
<li>
<p><code>--timeout</code> <em>value</em></p>
<p>Set the <code>timeout</code> setting.</p>
</li>
<li>
<p><code>--trace-function-calls</code></p>
<p>Enable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--trace-verbose</code></p>
<p>Enable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--trusted-public-keys</code> <em>value</em></p>
<p>Set the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--trusted-substituters</code> <em>value</em></p>
<p>Set the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--trusted-users</code> <em>value</em></p>
<p>Set the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--use-case-hack</code></p>
<p>Enable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--use-cgroups</code></p>
<p>Enable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--use-registries</code></p>
<p>Enable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--use-sqlite-wal</code></p>
<p>Enable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--user-agent-suffix</code> <em>value</em></p>
<p>Set the <code>user-agent-suffix</code> setting.</p>
</li>
<li>
<p><code>--warn-dirty</code></p>
<p>Enable the <code>warn-dirty</code> setting.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p><strong>Warning</strong> <br />
This program is <strong>experimental</strong> and its interface is subject to change.</p>
</blockquote>
<h1 id="name-38"><a class="header" href="#name-38">Name</a></h1>
<p><code>nix hash to-base32</code> - convert a hash to base-32 representation</p>
<h1 id="synopsis-69"><a class="header" href="#synopsis-69">Synopsis</a></h1>
<p><code>nix hash to-base32</code> [<em>option</em>...] <em>strings</em>...</p>
<h1 id="options-29"><a class="header" href="#options-29">Options</a></h1>
<ul>
<li>
<p><code>--type</code> <em>hash-algo</em></p>
<p>hash algorithm ('md5', 'sha1', 'sha256', or 'sha512'). Optional as can also be gotten from SRI hash itself.</p>
</li>
</ul>
<p><strong>Logging-related options:</strong></p>
<ul>
<li>
<p><code>--debug</code></p>
<p>Set the logging verbosity level to 'debug'.</p>
</li>
<li>
<p><code>--log-format</code> <em>format</em></p>
<p>Set the format of log output; one of <code>raw</code>, <code>internal-json</code>, <code>bar</code> or <code>bar-with-logs</code>.</p>
</li>
<li>
<p><code>--print-build-logs</code> / <code>-L</code></p>
<p>Print full build logs on standard error.</p>
</li>
<li>
<p><code>--quiet</code></p>
<p>Decrease the logging verbosity level.</p>
</li>
<li>
<p><code>--verbose</code> / <code>-v</code></p>
<p>Increase the logging verbosity level.</p>
</li>
</ul>
<p><strong>Miscellaneous global options:</strong></p>
<ul>
<li>
<p><code>--help</code></p>
<p>Show usage information.</p>
</li>
<li>
<p><code>--offline</code></p>
<p>Disable substituters and consider all previously downloaded files up-to-date.</p>
</li>
<li>
<p><code>--option</code> <em>name</em> <em>value</em></p>
<p>Set the Nix configuration setting <em>name</em> to <em>value</em> (overriding <code>nix.conf</code>).</p>
</li>
<li>
<p><code>--refresh</code></p>
<p>Consider all previously downloaded files out-of-date.</p>
</li>
<li>
<p><code>--version</code></p>
<p>Show version information.</p>
</li>
</ul>
<p><strong>Options to override configuration settings:</strong></p>
<ul>
<li>
<p><code>--accept-flake-config</code></p>
<p>Enable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--access-tokens</code> <em>value</em></p>
<p>Set the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--allow-dirty</code></p>
<p>Enable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--allow-import-from-derivation</code></p>
<p>Enable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--allow-new-privileges</code></p>
<p>Enable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--allow-symlinked-store</code></p>
<p>Enable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--allow-unsafe-native-code-during-evaluation</code></p>
<p>Enable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--allowed-impure-host-deps</code> <em>value</em></p>
<p>Set the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--allowed-uris</code> <em>value</em></p>
<p>Set the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--allowed-users</code> <em>value</em></p>
<p>Set the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--auto-allocate-uids</code></p>
<p>Enable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--auto-optimise-store</code></p>
<p>Enable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt</code> <em>value</em></p>
<p>Set the <code>bash-prompt</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-prefix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-prefix</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-suffix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-suffix</code> setting.</p>
</li>
<li>
<p><code>--build-hook</code> <em>value</em></p>
<p>Set the <code>build-hook</code> setting.</p>
</li>
<li>
<p><code>--build-poll-interval</code> <em>value</em></p>
<p>Set the <code>build-poll-interval</code> setting.</p>
</li>
<li>
<p><code>--build-users-group</code> <em>value</em></p>
<p>Set the <code>build-users-group</code> setting.</p>
</li>
<li>
<p><code>--builders</code> <em>value</em></p>
<p>Set the <code>builders</code> setting.</p>
</li>
<li>
<p><code>--builders-use-substitutes</code></p>
<p>Enable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--commit-lockfile-summary</code> <em>value</em></p>
<p>Set the <code>commit-lockfile-summary</code> setting.</p>
</li>
<li>
<p><code>--compress-build-log</code></p>
<p>Enable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--connect-timeout</code> <em>value</em></p>
<p>Set the <code>connect-timeout</code> setting.</p>
</li>
<li>
<p><code>--cores</code> <em>value</em></p>
<p>Set the <code>cores</code> setting.</p>
</li>
<li>
<p><code>--diff-hook</code> <em>value</em></p>
<p>Set the <code>diff-hook</code> setting.</p>
</li>
<li>
<p><code>--download-attempts</code> <em>value</em></p>
<p>Set the <code>download-attempts</code> setting.</p>
</li>
<li>
<p><code>--download-speed</code> <em>value</em></p>
<p>Set the <code>download-speed</code> setting.</p>
</li>
<li>
<p><code>--eval-cache</code></p>
<p>Enable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--experimental-features</code> <em>value</em></p>
<p>Set the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-access-tokens</code> <em>value</em></p>
<p>Append to the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-impure-host-deps</code> <em>value</em></p>
<p>Append to the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-uris</code> <em>value</em></p>
<p>Append to the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-users</code> <em>value</em></p>
<p>Append to the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--extra-experimental-features</code> <em>value</em></p>
<p>Append to the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-extra-platforms</code> <em>value</em></p>
<p>Append to the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-hashed-mirrors</code> <em>value</em></p>
<p>Append to the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--extra-ignored-acls</code> <em>value</em></p>
<p>Append to the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--extra-nix-path</code> <em>value</em></p>
<p>Append to the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--extra-platforms</code> <em>value</em></p>
<p>Set the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-plugin-files</code> <em>value</em></p>
<p>Append to the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--extra-sandbox-paths</code> <em>value</em></p>
<p>Append to the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--extra-secret-key-files</code> <em>value</em></p>
<p>Append to the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--extra-substituters</code> <em>value</em></p>
<p>Append to the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-system-features</code> <em>value</em></p>
<p>Append to the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-public-keys</code> <em>value</em></p>
<p>Append to the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-substituters</code> <em>value</em></p>
<p>Append to the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-users</code> <em>value</em></p>
<p>Append to the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--fallback</code></p>
<p>Enable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--filter-syscalls</code></p>
<p>Enable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--flake-registry</code> <em>value</em></p>
<p>Set the <code>flake-registry</code> setting.</p>
</li>
<li>
<p><code>--fsync-metadata</code></p>
<p>Enable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--gc-reserved-space</code> <em>value</em></p>
<p>Set the <code>gc-reserved-space</code> setting.</p>
</li>
<li>
<p><code>--hashed-mirrors</code> <em>value</em></p>
<p>Set the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--http-connections</code> <em>value</em></p>
<p>Set the <code>http-connections</code> setting.</p>
</li>
<li>
<p><code>--http2</code></p>
<p>Enable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--id-count</code> <em>value</em></p>
<p>Set the <code>id-count</code> setting.</p>
</li>
<li>
<p><code>--ignore-try</code></p>
<p>Enable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--ignored-acls</code> <em>value</em></p>
<p>Set the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--impersonate-linux-26</code></p>
<p>Enable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--keep-build-log</code></p>
<p>Enable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--keep-derivations</code></p>
<p>Enable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-env-derivations</code></p>
<p>Enable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-failed</code></p>
<p>Enable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--keep-going</code></p>
<p>Enable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--keep-outputs</code></p>
<p>Enable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--log-lines</code> <em>value</em></p>
<p>Set the <code>log-lines</code> setting.</p>
</li>
<li>
<p><code>--max-build-log-size</code> <em>value</em></p>
<p>Set the <code>max-build-log-size</code> setting.</p>
</li>
<li>
<p><code>--max-free</code> <em>value</em></p>
<p>Set the <code>max-free</code> setting.</p>
</li>
<li>
<p><code>--max-jobs</code> <em>value</em></p>
<p>Set the <code>max-jobs</code> setting.</p>
</li>
<li>
<p><code>--max-silent-time</code> <em>value</em></p>
<p>Set the <code>max-silent-time</code> setting.</p>
</li>
<li>
<p><code>--min-free</code> <em>value</em></p>
<p>Set the <code>min-free</code> setting.</p>
</li>
<li>
<p><code>--min-free-check-interval</code> <em>value</em></p>
<p>Set the <code>min-free-check-interval</code> setting.</p>
</li>
<li>
<p><code>--nar-buffer-size</code> <em>value</em></p>
<p>Set the <code>nar-buffer-size</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-negative-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-negative-ttl</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-positive-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-positive-ttl</code> setting.</p>
</li>
<li>
<p><code>--netrc-file</code> <em>value</em></p>
<p>Set the <code>netrc-file</code> setting.</p>
</li>
<li>
<p><code>--nix-path</code> <em>value</em></p>
<p>Set the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--no-accept-flake-config</code></p>
<p>Disable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--no-allow-dirty</code></p>
<p>Disable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--no-allow-import-from-derivation</code></p>
<p>Disable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--no-allow-new-privileges</code></p>
<p>Disable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--no-allow-symlinked-store</code></p>
<p>Disable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--no-allow-unsafe-native-code-during-evaluation</code></p>
<p>Disable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--no-auto-allocate-uids</code></p>
<p>Disable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--no-auto-optimise-store</code></p>
<p>Disable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--no-builders-use-substitutes</code></p>
<p>Disable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--no-compress-build-log</code></p>
<p>Disable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-eval-cache</code></p>
<p>Disable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--no-fallback</code></p>
<p>Disable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--no-filter-syscalls</code></p>
<p>Disable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--no-fsync-metadata</code></p>
<p>Disable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--no-http2</code></p>
<p>Disable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--no-ignore-try</code></p>
<p>Disable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--no-impersonate-linux-26</code></p>
<p>Disable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--no-keep-build-log</code></p>
<p>Disable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-keep-derivations</code></p>
<p>Disable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-env-derivations</code></p>
<p>Disable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-failed</code></p>
<p>Disable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--no-keep-going</code></p>
<p>Disable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--no-keep-outputs</code></p>
<p>Disable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--no-preallocate-contents</code></p>
<p>Disable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--no-print-missing</code></p>
<p>Disable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--no-pure-eval</code></p>
<p>Disable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--no-require-sigs</code></p>
<p>Disable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--no-restrict-eval</code></p>
<p>Disable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--no-run-diff-hook</code></p>
<p>Disable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--no-sandbox</code></p>
<p>Disable sandboxing.</p>
</li>
<li>
<p><code>--no-sandbox-fallback</code></p>
<p>Disable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--no-show-trace</code></p>
<p>Disable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--no-substitute</code></p>
<p>Disable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--no-sync-before-registering</code></p>
<p>Disable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--no-trace-function-calls</code></p>
<p>Disable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--no-trace-verbose</code></p>
<p>Disable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--no-use-case-hack</code></p>
<p>Disable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--no-use-cgroups</code></p>
<p>Disable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--no-use-registries</code></p>
<p>Disable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--no-use-sqlite-wal</code></p>
<p>Disable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--no-warn-dirty</code></p>
<p>Disable the <code>warn-dirty</code> setting.</p>
</li>
<li>
<p><code>--plugin-files</code> <em>value</em></p>
<p>Set the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--post-build-hook</code> <em>value</em></p>
<p>Set the <code>post-build-hook</code> setting.</p>
</li>
<li>
<p><code>--pre-build-hook</code> <em>value</em></p>
<p>Set the <code>pre-build-hook</code> setting.</p>
</li>
<li>
<p><code>--preallocate-contents</code></p>
<p>Enable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--print-missing</code></p>
<p>Enable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--pure-eval</code></p>
<p>Enable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--relaxed-sandbox</code></p>
<p>Enable sandboxing, but allow builds to disable it.</p>
</li>
<li>
<p><code>--require-sigs</code></p>
<p>Enable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--restrict-eval</code></p>
<p>Enable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--run-diff-hook</code></p>
<p>Enable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--sandbox</code></p>
<p>Enable sandboxing.</p>
</li>
<li>
<p><code>--sandbox-build-dir</code> <em>value</em></p>
<p>Set the <code>sandbox-build-dir</code> setting.</p>
</li>
<li>
<p><code>--sandbox-dev-shm-size</code> <em>value</em></p>
<p>Set the <code>sandbox-dev-shm-size</code> setting.</p>
</li>
<li>
<p><code>--sandbox-fallback</code></p>
<p>Enable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--sandbox-paths</code> <em>value</em></p>
<p>Set the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--secret-key-files</code> <em>value</em></p>
<p>Set the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--show-trace</code></p>
<p>Enable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--stalled-download-timeout</code> <em>value</em></p>
<p>Set the <code>stalled-download-timeout</code> setting.</p>
</li>
<li>
<p><code>--start-id</code> <em>value</em></p>
<p>Set the <code>start-id</code> setting.</p>
</li>
<li>
<p><code>--store</code> <em>value</em></p>
<p>Set the <code>store</code> setting.</p>
</li>
<li>
<p><code>--substitute</code></p>
<p>Enable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--substituters</code> <em>value</em></p>
<p>Set the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--sync-before-registering</code></p>
<p>Enable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--system</code> <em>value</em></p>
<p>Set the <code>system</code> setting.</p>
</li>
<li>
<p><code>--system-features</code> <em>value</em></p>
<p>Set the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--tarball-ttl</code> <em>value</em></p>
<p>Set the <code>tarball-ttl</code> setting.</p>
</li>
<li>
<p><code>--timeout</code> <em>value</em></p>
<p>Set the <code>timeout</code> setting.</p>
</li>
<li>
<p><code>--trace-function-calls</code></p>
<p>Enable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--trace-verbose</code></p>
<p>Enable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--trusted-public-keys</code> <em>value</em></p>
<p>Set the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--trusted-substituters</code> <em>value</em></p>
<p>Set the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--trusted-users</code> <em>value</em></p>
<p>Set the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--use-case-hack</code></p>
<p>Enable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--use-cgroups</code></p>
<p>Enable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--use-registries</code></p>
<p>Enable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--use-sqlite-wal</code></p>
<p>Enable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--user-agent-suffix</code> <em>value</em></p>
<p>Set the <code>user-agent-suffix</code> setting.</p>
</li>
<li>
<p><code>--warn-dirty</code></p>
<p>Enable the <code>warn-dirty</code> setting.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p><strong>Warning</strong> <br />
This program is <strong>experimental</strong> and its interface is subject to change.</p>
</blockquote>
<h1 id="name-39"><a class="header" href="#name-39">Name</a></h1>
<p><code>nix hash to-base64</code> - convert a hash to base-64 representation</p>
<h1 id="synopsis-70"><a class="header" href="#synopsis-70">Synopsis</a></h1>
<p><code>nix hash to-base64</code> [<em>option</em>...] <em>strings</em>...</p>
<h1 id="options-30"><a class="header" href="#options-30">Options</a></h1>
<ul>
<li>
<p><code>--type</code> <em>hash-algo</em></p>
<p>hash algorithm ('md5', 'sha1', 'sha256', or 'sha512'). Optional as can also be gotten from SRI hash itself.</p>
</li>
</ul>
<p><strong>Logging-related options:</strong></p>
<ul>
<li>
<p><code>--debug</code></p>
<p>Set the logging verbosity level to 'debug'.</p>
</li>
<li>
<p><code>--log-format</code> <em>format</em></p>
<p>Set the format of log output; one of <code>raw</code>, <code>internal-json</code>, <code>bar</code> or <code>bar-with-logs</code>.</p>
</li>
<li>
<p><code>--print-build-logs</code> / <code>-L</code></p>
<p>Print full build logs on standard error.</p>
</li>
<li>
<p><code>--quiet</code></p>
<p>Decrease the logging verbosity level.</p>
</li>
<li>
<p><code>--verbose</code> / <code>-v</code></p>
<p>Increase the logging verbosity level.</p>
</li>
</ul>
<p><strong>Miscellaneous global options:</strong></p>
<ul>
<li>
<p><code>--help</code></p>
<p>Show usage information.</p>
</li>
<li>
<p><code>--offline</code></p>
<p>Disable substituters and consider all previously downloaded files up-to-date.</p>
</li>
<li>
<p><code>--option</code> <em>name</em> <em>value</em></p>
<p>Set the Nix configuration setting <em>name</em> to <em>value</em> (overriding <code>nix.conf</code>).</p>
</li>
<li>
<p><code>--refresh</code></p>
<p>Consider all previously downloaded files out-of-date.</p>
</li>
<li>
<p><code>--version</code></p>
<p>Show version information.</p>
</li>
</ul>
<p><strong>Options to override configuration settings:</strong></p>
<ul>
<li>
<p><code>--accept-flake-config</code></p>
<p>Enable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--access-tokens</code> <em>value</em></p>
<p>Set the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--allow-dirty</code></p>
<p>Enable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--allow-import-from-derivation</code></p>
<p>Enable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--allow-new-privileges</code></p>
<p>Enable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--allow-symlinked-store</code></p>
<p>Enable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--allow-unsafe-native-code-during-evaluation</code></p>
<p>Enable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--allowed-impure-host-deps</code> <em>value</em></p>
<p>Set the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--allowed-uris</code> <em>value</em></p>
<p>Set the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--allowed-users</code> <em>value</em></p>
<p>Set the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--auto-allocate-uids</code></p>
<p>Enable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--auto-optimise-store</code></p>
<p>Enable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt</code> <em>value</em></p>
<p>Set the <code>bash-prompt</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-prefix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-prefix</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-suffix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-suffix</code> setting.</p>
</li>
<li>
<p><code>--build-hook</code> <em>value</em></p>
<p>Set the <code>build-hook</code> setting.</p>
</li>
<li>
<p><code>--build-poll-interval</code> <em>value</em></p>
<p>Set the <code>build-poll-interval</code> setting.</p>
</li>
<li>
<p><code>--build-users-group</code> <em>value</em></p>
<p>Set the <code>build-users-group</code> setting.</p>
</li>
<li>
<p><code>--builders</code> <em>value</em></p>
<p>Set the <code>builders</code> setting.</p>
</li>
<li>
<p><code>--builders-use-substitutes</code></p>
<p>Enable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--commit-lockfile-summary</code> <em>value</em></p>
<p>Set the <code>commit-lockfile-summary</code> setting.</p>
</li>
<li>
<p><code>--compress-build-log</code></p>
<p>Enable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--connect-timeout</code> <em>value</em></p>
<p>Set the <code>connect-timeout</code> setting.</p>
</li>
<li>
<p><code>--cores</code> <em>value</em></p>
<p>Set the <code>cores</code> setting.</p>
</li>
<li>
<p><code>--diff-hook</code> <em>value</em></p>
<p>Set the <code>diff-hook</code> setting.</p>
</li>
<li>
<p><code>--download-attempts</code> <em>value</em></p>
<p>Set the <code>download-attempts</code> setting.</p>
</li>
<li>
<p><code>--download-speed</code> <em>value</em></p>
<p>Set the <code>download-speed</code> setting.</p>
</li>
<li>
<p><code>--eval-cache</code></p>
<p>Enable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--experimental-features</code> <em>value</em></p>
<p>Set the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-access-tokens</code> <em>value</em></p>
<p>Append to the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-impure-host-deps</code> <em>value</em></p>
<p>Append to the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-uris</code> <em>value</em></p>
<p>Append to the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-users</code> <em>value</em></p>
<p>Append to the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--extra-experimental-features</code> <em>value</em></p>
<p>Append to the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-extra-platforms</code> <em>value</em></p>
<p>Append to the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-hashed-mirrors</code> <em>value</em></p>
<p>Append to the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--extra-ignored-acls</code> <em>value</em></p>
<p>Append to the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--extra-nix-path</code> <em>value</em></p>
<p>Append to the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--extra-platforms</code> <em>value</em></p>
<p>Set the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-plugin-files</code> <em>value</em></p>
<p>Append to the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--extra-sandbox-paths</code> <em>value</em></p>
<p>Append to the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--extra-secret-key-files</code> <em>value</em></p>
<p>Append to the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--extra-substituters</code> <em>value</em></p>
<p>Append to the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-system-features</code> <em>value</em></p>
<p>Append to the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-public-keys</code> <em>value</em></p>
<p>Append to the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-substituters</code> <em>value</em></p>
<p>Append to the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-users</code> <em>value</em></p>
<p>Append to the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--fallback</code></p>
<p>Enable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--filter-syscalls</code></p>
<p>Enable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--flake-registry</code> <em>value</em></p>
<p>Set the <code>flake-registry</code> setting.</p>
</li>
<li>
<p><code>--fsync-metadata</code></p>
<p>Enable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--gc-reserved-space</code> <em>value</em></p>
<p>Set the <code>gc-reserved-space</code> setting.</p>
</li>
<li>
<p><code>--hashed-mirrors</code> <em>value</em></p>
<p>Set the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--http-connections</code> <em>value</em></p>
<p>Set the <code>http-connections</code> setting.</p>
</li>
<li>
<p><code>--http2</code></p>
<p>Enable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--id-count</code> <em>value</em></p>
<p>Set the <code>id-count</code> setting.</p>
</li>
<li>
<p><code>--ignore-try</code></p>
<p>Enable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--ignored-acls</code> <em>value</em></p>
<p>Set the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--impersonate-linux-26</code></p>
<p>Enable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--keep-build-log</code></p>
<p>Enable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--keep-derivations</code></p>
<p>Enable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-env-derivations</code></p>
<p>Enable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-failed</code></p>
<p>Enable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--keep-going</code></p>
<p>Enable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--keep-outputs</code></p>
<p>Enable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--log-lines</code> <em>value</em></p>
<p>Set the <code>log-lines</code> setting.</p>
</li>
<li>
<p><code>--max-build-log-size</code> <em>value</em></p>
<p>Set the <code>max-build-log-size</code> setting.</p>
</li>
<li>
<p><code>--max-free</code> <em>value</em></p>
<p>Set the <code>max-free</code> setting.</p>
</li>
<li>
<p><code>--max-jobs</code> <em>value</em></p>
<p>Set the <code>max-jobs</code> setting.</p>
</li>
<li>
<p><code>--max-silent-time</code> <em>value</em></p>
<p>Set the <code>max-silent-time</code> setting.</p>
</li>
<li>
<p><code>--min-free</code> <em>value</em></p>
<p>Set the <code>min-free</code> setting.</p>
</li>
<li>
<p><code>--min-free-check-interval</code> <em>value</em></p>
<p>Set the <code>min-free-check-interval</code> setting.</p>
</li>
<li>
<p><code>--nar-buffer-size</code> <em>value</em></p>
<p>Set the <code>nar-buffer-size</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-negative-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-negative-ttl</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-positive-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-positive-ttl</code> setting.</p>
</li>
<li>
<p><code>--netrc-file</code> <em>value</em></p>
<p>Set the <code>netrc-file</code> setting.</p>
</li>
<li>
<p><code>--nix-path</code> <em>value</em></p>
<p>Set the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--no-accept-flake-config</code></p>
<p>Disable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--no-allow-dirty</code></p>
<p>Disable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--no-allow-import-from-derivation</code></p>
<p>Disable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--no-allow-new-privileges</code></p>
<p>Disable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--no-allow-symlinked-store</code></p>
<p>Disable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--no-allow-unsafe-native-code-during-evaluation</code></p>
<p>Disable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--no-auto-allocate-uids</code></p>
<p>Disable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--no-auto-optimise-store</code></p>
<p>Disable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--no-builders-use-substitutes</code></p>
<p>Disable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--no-compress-build-log</code></p>
<p>Disable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-eval-cache</code></p>
<p>Disable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--no-fallback</code></p>
<p>Disable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--no-filter-syscalls</code></p>
<p>Disable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--no-fsync-metadata</code></p>
<p>Disable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--no-http2</code></p>
<p>Disable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--no-ignore-try</code></p>
<p>Disable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--no-impersonate-linux-26</code></p>
<p>Disable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--no-keep-build-log</code></p>
<p>Disable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-keep-derivations</code></p>
<p>Disable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-env-derivations</code></p>
<p>Disable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-failed</code></p>
<p>Disable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--no-keep-going</code></p>
<p>Disable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--no-keep-outputs</code></p>
<p>Disable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--no-preallocate-contents</code></p>
<p>Disable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--no-print-missing</code></p>
<p>Disable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--no-pure-eval</code></p>
<p>Disable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--no-require-sigs</code></p>
<p>Disable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--no-restrict-eval</code></p>
<p>Disable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--no-run-diff-hook</code></p>
<p>Disable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--no-sandbox</code></p>
<p>Disable sandboxing.</p>
</li>
<li>
<p><code>--no-sandbox-fallback</code></p>
<p>Disable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--no-show-trace</code></p>
<p>Disable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--no-substitute</code></p>
<p>Disable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--no-sync-before-registering</code></p>
<p>Disable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--no-trace-function-calls</code></p>
<p>Disable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--no-trace-verbose</code></p>
<p>Disable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--no-use-case-hack</code></p>
<p>Disable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--no-use-cgroups</code></p>
<p>Disable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--no-use-registries</code></p>
<p>Disable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--no-use-sqlite-wal</code></p>
<p>Disable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--no-warn-dirty</code></p>
<p>Disable the <code>warn-dirty</code> setting.</p>
</li>
<li>
<p><code>--plugin-files</code> <em>value</em></p>
<p>Set the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--post-build-hook</code> <em>value</em></p>
<p>Set the <code>post-build-hook</code> setting.</p>
</li>
<li>
<p><code>--pre-build-hook</code> <em>value</em></p>
<p>Set the <code>pre-build-hook</code> setting.</p>
</li>
<li>
<p><code>--preallocate-contents</code></p>
<p>Enable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--print-missing</code></p>
<p>Enable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--pure-eval</code></p>
<p>Enable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--relaxed-sandbox</code></p>
<p>Enable sandboxing, but allow builds to disable it.</p>
</li>
<li>
<p><code>--require-sigs</code></p>
<p>Enable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--restrict-eval</code></p>
<p>Enable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--run-diff-hook</code></p>
<p>Enable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--sandbox</code></p>
<p>Enable sandboxing.</p>
</li>
<li>
<p><code>--sandbox-build-dir</code> <em>value</em></p>
<p>Set the <code>sandbox-build-dir</code> setting.</p>
</li>
<li>
<p><code>--sandbox-dev-shm-size</code> <em>value</em></p>
<p>Set the <code>sandbox-dev-shm-size</code> setting.</p>
</li>
<li>
<p><code>--sandbox-fallback</code></p>
<p>Enable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--sandbox-paths</code> <em>value</em></p>
<p>Set the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--secret-key-files</code> <em>value</em></p>
<p>Set the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--show-trace</code></p>
<p>Enable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--stalled-download-timeout</code> <em>value</em></p>
<p>Set the <code>stalled-download-timeout</code> setting.</p>
</li>
<li>
<p><code>--start-id</code> <em>value</em></p>
<p>Set the <code>start-id</code> setting.</p>
</li>
<li>
<p><code>--store</code> <em>value</em></p>
<p>Set the <code>store</code> setting.</p>
</li>
<li>
<p><code>--substitute</code></p>
<p>Enable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--substituters</code> <em>value</em></p>
<p>Set the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--sync-before-registering</code></p>
<p>Enable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--system</code> <em>value</em></p>
<p>Set the <code>system</code> setting.</p>
</li>
<li>
<p><code>--system-features</code> <em>value</em></p>
<p>Set the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--tarball-ttl</code> <em>value</em></p>
<p>Set the <code>tarball-ttl</code> setting.</p>
</li>
<li>
<p><code>--timeout</code> <em>value</em></p>
<p>Set the <code>timeout</code> setting.</p>
</li>
<li>
<p><code>--trace-function-calls</code></p>
<p>Enable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--trace-verbose</code></p>
<p>Enable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--trusted-public-keys</code> <em>value</em></p>
<p>Set the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--trusted-substituters</code> <em>value</em></p>
<p>Set the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--trusted-users</code> <em>value</em></p>
<p>Set the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--use-case-hack</code></p>
<p>Enable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--use-cgroups</code></p>
<p>Enable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--use-registries</code></p>
<p>Enable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--use-sqlite-wal</code></p>
<p>Enable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--user-agent-suffix</code> <em>value</em></p>
<p>Set the <code>user-agent-suffix</code> setting.</p>
</li>
<li>
<p><code>--warn-dirty</code></p>
<p>Enable the <code>warn-dirty</code> setting.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p><strong>Warning</strong> <br />
This program is <strong>experimental</strong> and its interface is subject to change.</p>
</blockquote>
<h1 id="name-40"><a class="header" href="#name-40">Name</a></h1>
<p><code>nix hash to-sri</code> - convert a hash to SRI representation</p>
<h1 id="synopsis-71"><a class="header" href="#synopsis-71">Synopsis</a></h1>
<p><code>nix hash to-sri</code> [<em>option</em>...] <em>strings</em>...</p>
<h1 id="options-31"><a class="header" href="#options-31">Options</a></h1>
<ul>
<li>
<p><code>--type</code> <em>hash-algo</em></p>
<p>hash algorithm ('md5', 'sha1', 'sha256', or 'sha512'). Optional as can also be gotten from SRI hash itself.</p>
</li>
</ul>
<p><strong>Logging-related options:</strong></p>
<ul>
<li>
<p><code>--debug</code></p>
<p>Set the logging verbosity level to 'debug'.</p>
</li>
<li>
<p><code>--log-format</code> <em>format</em></p>
<p>Set the format of log output; one of <code>raw</code>, <code>internal-json</code>, <code>bar</code> or <code>bar-with-logs</code>.</p>
</li>
<li>
<p><code>--print-build-logs</code> / <code>-L</code></p>
<p>Print full build logs on standard error.</p>
</li>
<li>
<p><code>--quiet</code></p>
<p>Decrease the logging verbosity level.</p>
</li>
<li>
<p><code>--verbose</code> / <code>-v</code></p>
<p>Increase the logging verbosity level.</p>
</li>
</ul>
<p><strong>Miscellaneous global options:</strong></p>
<ul>
<li>
<p><code>--help</code></p>
<p>Show usage information.</p>
</li>
<li>
<p><code>--offline</code></p>
<p>Disable substituters and consider all previously downloaded files up-to-date.</p>
</li>
<li>
<p><code>--option</code> <em>name</em> <em>value</em></p>
<p>Set the Nix configuration setting <em>name</em> to <em>value</em> (overriding <code>nix.conf</code>).</p>
</li>
<li>
<p><code>--refresh</code></p>
<p>Consider all previously downloaded files out-of-date.</p>
</li>
<li>
<p><code>--version</code></p>
<p>Show version information.</p>
</li>
</ul>
<p><strong>Options to override configuration settings:</strong></p>
<ul>
<li>
<p><code>--accept-flake-config</code></p>
<p>Enable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--access-tokens</code> <em>value</em></p>
<p>Set the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--allow-dirty</code></p>
<p>Enable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--allow-import-from-derivation</code></p>
<p>Enable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--allow-new-privileges</code></p>
<p>Enable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--allow-symlinked-store</code></p>
<p>Enable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--allow-unsafe-native-code-during-evaluation</code></p>
<p>Enable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--allowed-impure-host-deps</code> <em>value</em></p>
<p>Set the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--allowed-uris</code> <em>value</em></p>
<p>Set the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--allowed-users</code> <em>value</em></p>
<p>Set the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--auto-allocate-uids</code></p>
<p>Enable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--auto-optimise-store</code></p>
<p>Enable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt</code> <em>value</em></p>
<p>Set the <code>bash-prompt</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-prefix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-prefix</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-suffix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-suffix</code> setting.</p>
</li>
<li>
<p><code>--build-hook</code> <em>value</em></p>
<p>Set the <code>build-hook</code> setting.</p>
</li>
<li>
<p><code>--build-poll-interval</code> <em>value</em></p>
<p>Set the <code>build-poll-interval</code> setting.</p>
</li>
<li>
<p><code>--build-users-group</code> <em>value</em></p>
<p>Set the <code>build-users-group</code> setting.</p>
</li>
<li>
<p><code>--builders</code> <em>value</em></p>
<p>Set the <code>builders</code> setting.</p>
</li>
<li>
<p><code>--builders-use-substitutes</code></p>
<p>Enable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--commit-lockfile-summary</code> <em>value</em></p>
<p>Set the <code>commit-lockfile-summary</code> setting.</p>
</li>
<li>
<p><code>--compress-build-log</code></p>
<p>Enable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--connect-timeout</code> <em>value</em></p>
<p>Set the <code>connect-timeout</code> setting.</p>
</li>
<li>
<p><code>--cores</code> <em>value</em></p>
<p>Set the <code>cores</code> setting.</p>
</li>
<li>
<p><code>--diff-hook</code> <em>value</em></p>
<p>Set the <code>diff-hook</code> setting.</p>
</li>
<li>
<p><code>--download-attempts</code> <em>value</em></p>
<p>Set the <code>download-attempts</code> setting.</p>
</li>
<li>
<p><code>--download-speed</code> <em>value</em></p>
<p>Set the <code>download-speed</code> setting.</p>
</li>
<li>
<p><code>--eval-cache</code></p>
<p>Enable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--experimental-features</code> <em>value</em></p>
<p>Set the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-access-tokens</code> <em>value</em></p>
<p>Append to the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-impure-host-deps</code> <em>value</em></p>
<p>Append to the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-uris</code> <em>value</em></p>
<p>Append to the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-users</code> <em>value</em></p>
<p>Append to the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--extra-experimental-features</code> <em>value</em></p>
<p>Append to the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-extra-platforms</code> <em>value</em></p>
<p>Append to the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-hashed-mirrors</code> <em>value</em></p>
<p>Append to the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--extra-ignored-acls</code> <em>value</em></p>
<p>Append to the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--extra-nix-path</code> <em>value</em></p>
<p>Append to the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--extra-platforms</code> <em>value</em></p>
<p>Set the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-plugin-files</code> <em>value</em></p>
<p>Append to the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--extra-sandbox-paths</code> <em>value</em></p>
<p>Append to the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--extra-secret-key-files</code> <em>value</em></p>
<p>Append to the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--extra-substituters</code> <em>value</em></p>
<p>Append to the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-system-features</code> <em>value</em></p>
<p>Append to the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-public-keys</code> <em>value</em></p>
<p>Append to the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-substituters</code> <em>value</em></p>
<p>Append to the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-users</code> <em>value</em></p>
<p>Append to the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--fallback</code></p>
<p>Enable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--filter-syscalls</code></p>
<p>Enable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--flake-registry</code> <em>value</em></p>
<p>Set the <code>flake-registry</code> setting.</p>
</li>
<li>
<p><code>--fsync-metadata</code></p>
<p>Enable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--gc-reserved-space</code> <em>value</em></p>
<p>Set the <code>gc-reserved-space</code> setting.</p>
</li>
<li>
<p><code>--hashed-mirrors</code> <em>value</em></p>
<p>Set the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--http-connections</code> <em>value</em></p>
<p>Set the <code>http-connections</code> setting.</p>
</li>
<li>
<p><code>--http2</code></p>
<p>Enable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--id-count</code> <em>value</em></p>
<p>Set the <code>id-count</code> setting.</p>
</li>
<li>
<p><code>--ignore-try</code></p>
<p>Enable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--ignored-acls</code> <em>value</em></p>
<p>Set the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--impersonate-linux-26</code></p>
<p>Enable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--keep-build-log</code></p>
<p>Enable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--keep-derivations</code></p>
<p>Enable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-env-derivations</code></p>
<p>Enable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-failed</code></p>
<p>Enable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--keep-going</code></p>
<p>Enable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--keep-outputs</code></p>
<p>Enable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--log-lines</code> <em>value</em></p>
<p>Set the <code>log-lines</code> setting.</p>
</li>
<li>
<p><code>--max-build-log-size</code> <em>value</em></p>
<p>Set the <code>max-build-log-size</code> setting.</p>
</li>
<li>
<p><code>--max-free</code> <em>value</em></p>
<p>Set the <code>max-free</code> setting.</p>
</li>
<li>
<p><code>--max-jobs</code> <em>value</em></p>
<p>Set the <code>max-jobs</code> setting.</p>
</li>
<li>
<p><code>--max-silent-time</code> <em>value</em></p>
<p>Set the <code>max-silent-time</code> setting.</p>
</li>
<li>
<p><code>--min-free</code> <em>value</em></p>
<p>Set the <code>min-free</code> setting.</p>
</li>
<li>
<p><code>--min-free-check-interval</code> <em>value</em></p>
<p>Set the <code>min-free-check-interval</code> setting.</p>
</li>
<li>
<p><code>--nar-buffer-size</code> <em>value</em></p>
<p>Set the <code>nar-buffer-size</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-negative-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-negative-ttl</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-positive-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-positive-ttl</code> setting.</p>
</li>
<li>
<p><code>--netrc-file</code> <em>value</em></p>
<p>Set the <code>netrc-file</code> setting.</p>
</li>
<li>
<p><code>--nix-path</code> <em>value</em></p>
<p>Set the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--no-accept-flake-config</code></p>
<p>Disable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--no-allow-dirty</code></p>
<p>Disable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--no-allow-import-from-derivation</code></p>
<p>Disable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--no-allow-new-privileges</code></p>
<p>Disable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--no-allow-symlinked-store</code></p>
<p>Disable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--no-allow-unsafe-native-code-during-evaluation</code></p>
<p>Disable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--no-auto-allocate-uids</code></p>
<p>Disable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--no-auto-optimise-store</code></p>
<p>Disable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--no-builders-use-substitutes</code></p>
<p>Disable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--no-compress-build-log</code></p>
<p>Disable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-eval-cache</code></p>
<p>Disable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--no-fallback</code></p>
<p>Disable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--no-filter-syscalls</code></p>
<p>Disable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--no-fsync-metadata</code></p>
<p>Disable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--no-http2</code></p>
<p>Disable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--no-ignore-try</code></p>
<p>Disable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--no-impersonate-linux-26</code></p>
<p>Disable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--no-keep-build-log</code></p>
<p>Disable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-keep-derivations</code></p>
<p>Disable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-env-derivations</code></p>
<p>Disable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-failed</code></p>
<p>Disable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--no-keep-going</code></p>
<p>Disable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--no-keep-outputs</code></p>
<p>Disable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--no-preallocate-contents</code></p>
<p>Disable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--no-print-missing</code></p>
<p>Disable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--no-pure-eval</code></p>
<p>Disable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--no-require-sigs</code></p>
<p>Disable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--no-restrict-eval</code></p>
<p>Disable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--no-run-diff-hook</code></p>
<p>Disable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--no-sandbox</code></p>
<p>Disable sandboxing.</p>
</li>
<li>
<p><code>--no-sandbox-fallback</code></p>
<p>Disable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--no-show-trace</code></p>
<p>Disable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--no-substitute</code></p>
<p>Disable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--no-sync-before-registering</code></p>
<p>Disable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--no-trace-function-calls</code></p>
<p>Disable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--no-trace-verbose</code></p>
<p>Disable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--no-use-case-hack</code></p>
<p>Disable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--no-use-cgroups</code></p>
<p>Disable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--no-use-registries</code></p>
<p>Disable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--no-use-sqlite-wal</code></p>
<p>Disable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--no-warn-dirty</code></p>
<p>Disable the <code>warn-dirty</code> setting.</p>
</li>
<li>
<p><code>--plugin-files</code> <em>value</em></p>
<p>Set the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--post-build-hook</code> <em>value</em></p>
<p>Set the <code>post-build-hook</code> setting.</p>
</li>
<li>
<p><code>--pre-build-hook</code> <em>value</em></p>
<p>Set the <code>pre-build-hook</code> setting.</p>
</li>
<li>
<p><code>--preallocate-contents</code></p>
<p>Enable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--print-missing</code></p>
<p>Enable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--pure-eval</code></p>
<p>Enable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--relaxed-sandbox</code></p>
<p>Enable sandboxing, but allow builds to disable it.</p>
</li>
<li>
<p><code>--require-sigs</code></p>
<p>Enable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--restrict-eval</code></p>
<p>Enable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--run-diff-hook</code></p>
<p>Enable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--sandbox</code></p>
<p>Enable sandboxing.</p>
</li>
<li>
<p><code>--sandbox-build-dir</code> <em>value</em></p>
<p>Set the <code>sandbox-build-dir</code> setting.</p>
</li>
<li>
<p><code>--sandbox-dev-shm-size</code> <em>value</em></p>
<p>Set the <code>sandbox-dev-shm-size</code> setting.</p>
</li>
<li>
<p><code>--sandbox-fallback</code></p>
<p>Enable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--sandbox-paths</code> <em>value</em></p>
<p>Set the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--secret-key-files</code> <em>value</em></p>
<p>Set the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--show-trace</code></p>
<p>Enable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--stalled-download-timeout</code> <em>value</em></p>
<p>Set the <code>stalled-download-timeout</code> setting.</p>
</li>
<li>
<p><code>--start-id</code> <em>value</em></p>
<p>Set the <code>start-id</code> setting.</p>
</li>
<li>
<p><code>--store</code> <em>value</em></p>
<p>Set the <code>store</code> setting.</p>
</li>
<li>
<p><code>--substitute</code></p>
<p>Enable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--substituters</code> <em>value</em></p>
<p>Set the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--sync-before-registering</code></p>
<p>Enable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--system</code> <em>value</em></p>
<p>Set the <code>system</code> setting.</p>
</li>
<li>
<p><code>--system-features</code> <em>value</em></p>
<p>Set the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--tarball-ttl</code> <em>value</em></p>
<p>Set the <code>tarball-ttl</code> setting.</p>
</li>
<li>
<p><code>--timeout</code> <em>value</em></p>
<p>Set the <code>timeout</code> setting.</p>
</li>
<li>
<p><code>--trace-function-calls</code></p>
<p>Enable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--trace-verbose</code></p>
<p>Enable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--trusted-public-keys</code> <em>value</em></p>
<p>Set the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--trusted-substituters</code> <em>value</em></p>
<p>Set the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--trusted-users</code> <em>value</em></p>
<p>Set the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--use-case-hack</code></p>
<p>Enable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--use-cgroups</code></p>
<p>Enable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--use-registries</code></p>
<p>Enable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--use-sqlite-wal</code></p>
<p>Enable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--user-agent-suffix</code> <em>value</em></p>
<p>Set the <code>user-agent-suffix</code> setting.</p>
</li>
<li>
<p><code>--warn-dirty</code></p>
<p>Enable the <code>warn-dirty</code> setting.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p><strong>Warning</strong> <br />
This program is <strong>experimental</strong> and its interface is subject to change.</p>
</blockquote>
<h1 id="name-41"><a class="header" href="#name-41">Name</a></h1>
<p><code>nix help</code> - show help about <code>nix</code> or a particular subcommand</p>
<h1 id="synopsis-72"><a class="header" href="#synopsis-72">Synopsis</a></h1>
<p><code>nix help</code> [<em>option</em>...] <em>subcommand</em>...</p>
<h1 id="examples-44"><a class="header" href="#examples-44">Examples</a></h1>
<ul>
<li>
<p>Show help about <code>nix</code> in general:</p>
<pre><code class="language-console"># nix help
</code></pre>
</li>
<li>
<p>Show help about a particular subcommand:</p>
<pre><code class="language-console">    # nix help flake info
</code></pre>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p><strong>Warning</strong> <br />
This program is <strong>experimental</strong> and its interface is subject to change.</p>
</blockquote>
<h1 id="name-42"><a class="header" href="#name-42">Name</a></h1>
<p><code>nix key</code> - generate and convert Nix signing keys</p>
<h1 id="synopsis-73"><a class="header" href="#synopsis-73">Synopsis</a></h1>
<p><code>nix key</code> [<em>option</em>...] <em>subcommand</em></p>
<p>where <em>subcommand</em> is one of the following:</p>
<ul>
<li><a href="command-ref/new-cli/./nix3-key-convert-secret-to-public.html"><code>nix key convert-secret-to-public</code></a> - generate a public key for verifying store paths from a secret key read from standard input</li>
<li><a href="command-ref/new-cli/./nix3-key-generate-secret.html"><code>nix key generate-secret</code></a> - generate a secret key for signing store paths</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p><strong>Warning</strong> <br />
This program is <strong>experimental</strong> and its interface is subject to change.</p>
</blockquote>
<h1 id="name-43"><a class="header" href="#name-43">Name</a></h1>
<p><code>nix key convert-secret-to-public</code> - generate a public key for verifying store paths from a secret key read from standard input</p>
<h1 id="synopsis-74"><a class="header" href="#synopsis-74">Synopsis</a></h1>
<p><code>nix key convert-secret-to-public</code> [<em>option</em>...] </p>
<h1 id="examples-45"><a class="header" href="#examples-45">Examples</a></h1>
<ul>
<li>
<p>Convert a secret key to a public key:</p>
<pre><code class="language-console"># echo cache.example.org-0:E7lAO+MsPwTFfPXsdPtW8GKui/5ho4KQHVcAGnX+Tti1V4dUxoVoqLyWJ4YESuZJwQ67GVIksDt47og+tPVUZw== \
  | nix key convert-secret-to-public
cache.example.org-0:tVeHVMaFaKi8lieGBErmScEOuxlSJLA7eO6IPrT1VGc=
</code></pre>
</li>
</ul>
<h1 id="description-63"><a class="header" href="#description-63">Description</a></h1>
<p>This command reads a Ed25519 secret key from standard input, and
writes the corresponding public key to standard output. For more
details, see <a href="command-ref/new-cli/./nix3-key-generate-secret.html">nix key generate-secret</a>.</p>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p><strong>Warning</strong> <br />
This program is <strong>experimental</strong> and its interface is subject to change.</p>
</blockquote>
<h1 id="name-44"><a class="header" href="#name-44">Name</a></h1>
<p><code>nix key generate-secret</code> - generate a secret key for signing store paths</p>
<h1 id="synopsis-75"><a class="header" href="#synopsis-75">Synopsis</a></h1>
<p><code>nix key generate-secret</code> [<em>option</em>...] </p>
<h1 id="examples-46"><a class="header" href="#examples-46">Examples</a></h1>
<ul>
<li>
<p>Generate a new secret key:</p>
<pre><code class="language-console"># nix key generate-secret --key-name cache.example.org-1 &gt; ./secret-key
</code></pre>
<p>We can then use this key to sign the closure of the Hello package:</p>
<pre><code class="language-console"># nix build nixpkgs#hello
# nix store sign --key-file ./secret-key --recursive ./result
</code></pre>
<p>Finally, we can verify the store paths using the corresponding
public key:</p>
<pre><code># nix store verify --trusted-public-keys $(nix key convert-secret-to-public &lt; ./secret-key) ./result
</code></pre>
</li>
</ul>
<h1 id="description-64"><a class="header" href="#description-64">Description</a></h1>
<p>This command generates a new Ed25519 secret key for signing store
paths and prints it on standard output. Use <code>nix key convert-secret-to-public</code> to get the corresponding public key for
verifying signed store paths.</p>
<p>The mandatory argument <code>--key-name</code> specifies a key name (such as
<code>cache.example.org-1</code>). It is used to look up keys on the client when
it verifies signatures. It can be anything, but it’s suggested to use
the host name of your cache (e.g.  <code>cache.example.org</code>) with a suffix
denoting the number of the key (to be incremented every time you need
to revoke a key).</p>
<h1 id="format"><a class="header" href="#format">Format</a></h1>
<p>Both secret and public keys are represented as the key name followed
by a base-64 encoding of the Ed25519 key data, e.g.</p>
<pre><code>cache.example.org-0:E7lAO+MsPwTFfPXsdPtW8GKui/5ho4KQHVcAGnX+Tti1V4dUxoVoqLyWJ4YESuZJwQ67GVIksDt47og+tPVUZw==
</code></pre>
<h1 id="options-32"><a class="header" href="#options-32">Options</a></h1>
<ul>
<li>
<p><code>--key-name</code> <em>name</em></p>
<p>Identifier of the key (e.g. <code>cache.example.org-1</code>).</p>
</li>
</ul>
<p><strong>Logging-related options:</strong></p>
<ul>
<li>
<p><code>--debug</code></p>
<p>Set the logging verbosity level to 'debug'.</p>
</li>
<li>
<p><code>--log-format</code> <em>format</em></p>
<p>Set the format of log output; one of <code>raw</code>, <code>internal-json</code>, <code>bar</code> or <code>bar-with-logs</code>.</p>
</li>
<li>
<p><code>--print-build-logs</code> / <code>-L</code></p>
<p>Print full build logs on standard error.</p>
</li>
<li>
<p><code>--quiet</code></p>
<p>Decrease the logging verbosity level.</p>
</li>
<li>
<p><code>--verbose</code> / <code>-v</code></p>
<p>Increase the logging verbosity level.</p>
</li>
</ul>
<p><strong>Miscellaneous global options:</strong></p>
<ul>
<li>
<p><code>--help</code></p>
<p>Show usage information.</p>
</li>
<li>
<p><code>--offline</code></p>
<p>Disable substituters and consider all previously downloaded files up-to-date.</p>
</li>
<li>
<p><code>--option</code> <em>name</em> <em>value</em></p>
<p>Set the Nix configuration setting <em>name</em> to <em>value</em> (overriding <code>nix.conf</code>).</p>
</li>
<li>
<p><code>--refresh</code></p>
<p>Consider all previously downloaded files out-of-date.</p>
</li>
<li>
<p><code>--version</code></p>
<p>Show version information.</p>
</li>
</ul>
<p><strong>Options to override configuration settings:</strong></p>
<ul>
<li>
<p><code>--accept-flake-config</code></p>
<p>Enable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--access-tokens</code> <em>value</em></p>
<p>Set the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--allow-dirty</code></p>
<p>Enable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--allow-import-from-derivation</code></p>
<p>Enable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--allow-new-privileges</code></p>
<p>Enable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--allow-symlinked-store</code></p>
<p>Enable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--allow-unsafe-native-code-during-evaluation</code></p>
<p>Enable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--allowed-impure-host-deps</code> <em>value</em></p>
<p>Set the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--allowed-uris</code> <em>value</em></p>
<p>Set the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--allowed-users</code> <em>value</em></p>
<p>Set the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--auto-allocate-uids</code></p>
<p>Enable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--auto-optimise-store</code></p>
<p>Enable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt</code> <em>value</em></p>
<p>Set the <code>bash-prompt</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-prefix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-prefix</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-suffix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-suffix</code> setting.</p>
</li>
<li>
<p><code>--build-hook</code> <em>value</em></p>
<p>Set the <code>build-hook</code> setting.</p>
</li>
<li>
<p><code>--build-poll-interval</code> <em>value</em></p>
<p>Set the <code>build-poll-interval</code> setting.</p>
</li>
<li>
<p><code>--build-users-group</code> <em>value</em></p>
<p>Set the <code>build-users-group</code> setting.</p>
</li>
<li>
<p><code>--builders</code> <em>value</em></p>
<p>Set the <code>builders</code> setting.</p>
</li>
<li>
<p><code>--builders-use-substitutes</code></p>
<p>Enable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--commit-lockfile-summary</code> <em>value</em></p>
<p>Set the <code>commit-lockfile-summary</code> setting.</p>
</li>
<li>
<p><code>--compress-build-log</code></p>
<p>Enable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--connect-timeout</code> <em>value</em></p>
<p>Set the <code>connect-timeout</code> setting.</p>
</li>
<li>
<p><code>--cores</code> <em>value</em></p>
<p>Set the <code>cores</code> setting.</p>
</li>
<li>
<p><code>--diff-hook</code> <em>value</em></p>
<p>Set the <code>diff-hook</code> setting.</p>
</li>
<li>
<p><code>--download-attempts</code> <em>value</em></p>
<p>Set the <code>download-attempts</code> setting.</p>
</li>
<li>
<p><code>--download-speed</code> <em>value</em></p>
<p>Set the <code>download-speed</code> setting.</p>
</li>
<li>
<p><code>--eval-cache</code></p>
<p>Enable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--experimental-features</code> <em>value</em></p>
<p>Set the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-access-tokens</code> <em>value</em></p>
<p>Append to the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-impure-host-deps</code> <em>value</em></p>
<p>Append to the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-uris</code> <em>value</em></p>
<p>Append to the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-users</code> <em>value</em></p>
<p>Append to the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--extra-experimental-features</code> <em>value</em></p>
<p>Append to the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-extra-platforms</code> <em>value</em></p>
<p>Append to the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-hashed-mirrors</code> <em>value</em></p>
<p>Append to the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--extra-ignored-acls</code> <em>value</em></p>
<p>Append to the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--extra-nix-path</code> <em>value</em></p>
<p>Append to the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--extra-platforms</code> <em>value</em></p>
<p>Set the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-plugin-files</code> <em>value</em></p>
<p>Append to the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--extra-sandbox-paths</code> <em>value</em></p>
<p>Append to the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--extra-secret-key-files</code> <em>value</em></p>
<p>Append to the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--extra-substituters</code> <em>value</em></p>
<p>Append to the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-system-features</code> <em>value</em></p>
<p>Append to the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-public-keys</code> <em>value</em></p>
<p>Append to the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-substituters</code> <em>value</em></p>
<p>Append to the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-users</code> <em>value</em></p>
<p>Append to the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--fallback</code></p>
<p>Enable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--filter-syscalls</code></p>
<p>Enable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--flake-registry</code> <em>value</em></p>
<p>Set the <code>flake-registry</code> setting.</p>
</li>
<li>
<p><code>--fsync-metadata</code></p>
<p>Enable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--gc-reserved-space</code> <em>value</em></p>
<p>Set the <code>gc-reserved-space</code> setting.</p>
</li>
<li>
<p><code>--hashed-mirrors</code> <em>value</em></p>
<p>Set the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--http-connections</code> <em>value</em></p>
<p>Set the <code>http-connections</code> setting.</p>
</li>
<li>
<p><code>--http2</code></p>
<p>Enable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--id-count</code> <em>value</em></p>
<p>Set the <code>id-count</code> setting.</p>
</li>
<li>
<p><code>--ignore-try</code></p>
<p>Enable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--ignored-acls</code> <em>value</em></p>
<p>Set the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--impersonate-linux-26</code></p>
<p>Enable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--keep-build-log</code></p>
<p>Enable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--keep-derivations</code></p>
<p>Enable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-env-derivations</code></p>
<p>Enable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-failed</code></p>
<p>Enable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--keep-going</code></p>
<p>Enable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--keep-outputs</code></p>
<p>Enable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--log-lines</code> <em>value</em></p>
<p>Set the <code>log-lines</code> setting.</p>
</li>
<li>
<p><code>--max-build-log-size</code> <em>value</em></p>
<p>Set the <code>max-build-log-size</code> setting.</p>
</li>
<li>
<p><code>--max-free</code> <em>value</em></p>
<p>Set the <code>max-free</code> setting.</p>
</li>
<li>
<p><code>--max-jobs</code> <em>value</em></p>
<p>Set the <code>max-jobs</code> setting.</p>
</li>
<li>
<p><code>--max-silent-time</code> <em>value</em></p>
<p>Set the <code>max-silent-time</code> setting.</p>
</li>
<li>
<p><code>--min-free</code> <em>value</em></p>
<p>Set the <code>min-free</code> setting.</p>
</li>
<li>
<p><code>--min-free-check-interval</code> <em>value</em></p>
<p>Set the <code>min-free-check-interval</code> setting.</p>
</li>
<li>
<p><code>--nar-buffer-size</code> <em>value</em></p>
<p>Set the <code>nar-buffer-size</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-negative-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-negative-ttl</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-positive-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-positive-ttl</code> setting.</p>
</li>
<li>
<p><code>--netrc-file</code> <em>value</em></p>
<p>Set the <code>netrc-file</code> setting.</p>
</li>
<li>
<p><code>--nix-path</code> <em>value</em></p>
<p>Set the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--no-accept-flake-config</code></p>
<p>Disable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--no-allow-dirty</code></p>
<p>Disable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--no-allow-import-from-derivation</code></p>
<p>Disable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--no-allow-new-privileges</code></p>
<p>Disable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--no-allow-symlinked-store</code></p>
<p>Disable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--no-allow-unsafe-native-code-during-evaluation</code></p>
<p>Disable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--no-auto-allocate-uids</code></p>
<p>Disable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--no-auto-optimise-store</code></p>
<p>Disable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--no-builders-use-substitutes</code></p>
<p>Disable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--no-compress-build-log</code></p>
<p>Disable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-eval-cache</code></p>
<p>Disable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--no-fallback</code></p>
<p>Disable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--no-filter-syscalls</code></p>
<p>Disable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--no-fsync-metadata</code></p>
<p>Disable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--no-http2</code></p>
<p>Disable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--no-ignore-try</code></p>
<p>Disable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--no-impersonate-linux-26</code></p>
<p>Disable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--no-keep-build-log</code></p>
<p>Disable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-keep-derivations</code></p>
<p>Disable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-env-derivations</code></p>
<p>Disable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-failed</code></p>
<p>Disable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--no-keep-going</code></p>
<p>Disable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--no-keep-outputs</code></p>
<p>Disable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--no-preallocate-contents</code></p>
<p>Disable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--no-print-missing</code></p>
<p>Disable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--no-pure-eval</code></p>
<p>Disable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--no-require-sigs</code></p>
<p>Disable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--no-restrict-eval</code></p>
<p>Disable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--no-run-diff-hook</code></p>
<p>Disable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--no-sandbox</code></p>
<p>Disable sandboxing.</p>
</li>
<li>
<p><code>--no-sandbox-fallback</code></p>
<p>Disable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--no-show-trace</code></p>
<p>Disable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--no-substitute</code></p>
<p>Disable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--no-sync-before-registering</code></p>
<p>Disable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--no-trace-function-calls</code></p>
<p>Disable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--no-trace-verbose</code></p>
<p>Disable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--no-use-case-hack</code></p>
<p>Disable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--no-use-cgroups</code></p>
<p>Disable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--no-use-registries</code></p>
<p>Disable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--no-use-sqlite-wal</code></p>
<p>Disable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--no-warn-dirty</code></p>
<p>Disable the <code>warn-dirty</code> setting.</p>
</li>
<li>
<p><code>--plugin-files</code> <em>value</em></p>
<p>Set the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--post-build-hook</code> <em>value</em></p>
<p>Set the <code>post-build-hook</code> setting.</p>
</li>
<li>
<p><code>--pre-build-hook</code> <em>value</em></p>
<p>Set the <code>pre-build-hook</code> setting.</p>
</li>
<li>
<p><code>--preallocate-contents</code></p>
<p>Enable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--print-missing</code></p>
<p>Enable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--pure-eval</code></p>
<p>Enable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--relaxed-sandbox</code></p>
<p>Enable sandboxing, but allow builds to disable it.</p>
</li>
<li>
<p><code>--require-sigs</code></p>
<p>Enable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--restrict-eval</code></p>
<p>Enable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--run-diff-hook</code></p>
<p>Enable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--sandbox</code></p>
<p>Enable sandboxing.</p>
</li>
<li>
<p><code>--sandbox-build-dir</code> <em>value</em></p>
<p>Set the <code>sandbox-build-dir</code> setting.</p>
</li>
<li>
<p><code>--sandbox-dev-shm-size</code> <em>value</em></p>
<p>Set the <code>sandbox-dev-shm-size</code> setting.</p>
</li>
<li>
<p><code>--sandbox-fallback</code></p>
<p>Enable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--sandbox-paths</code> <em>value</em></p>
<p>Set the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--secret-key-files</code> <em>value</em></p>
<p>Set the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--show-trace</code></p>
<p>Enable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--stalled-download-timeout</code> <em>value</em></p>
<p>Set the <code>stalled-download-timeout</code> setting.</p>
</li>
<li>
<p><code>--start-id</code> <em>value</em></p>
<p>Set the <code>start-id</code> setting.</p>
</li>
<li>
<p><code>--store</code> <em>value</em></p>
<p>Set the <code>store</code> setting.</p>
</li>
<li>
<p><code>--substitute</code></p>
<p>Enable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--substituters</code> <em>value</em></p>
<p>Set the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--sync-before-registering</code></p>
<p>Enable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--system</code> <em>value</em></p>
<p>Set the <code>system</code> setting.</p>
</li>
<li>
<p><code>--system-features</code> <em>value</em></p>
<p>Set the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--tarball-ttl</code> <em>value</em></p>
<p>Set the <code>tarball-ttl</code> setting.</p>
</li>
<li>
<p><code>--timeout</code> <em>value</em></p>
<p>Set the <code>timeout</code> setting.</p>
</li>
<li>
<p><code>--trace-function-calls</code></p>
<p>Enable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--trace-verbose</code></p>
<p>Enable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--trusted-public-keys</code> <em>value</em></p>
<p>Set the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--trusted-substituters</code> <em>value</em></p>
<p>Set the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--trusted-users</code> <em>value</em></p>
<p>Set the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--use-case-hack</code></p>
<p>Enable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--use-cgroups</code></p>
<p>Enable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--use-registries</code></p>
<p>Enable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--use-sqlite-wal</code></p>
<p>Enable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--user-agent-suffix</code> <em>value</em></p>
<p>Set the <code>user-agent-suffix</code> setting.</p>
</li>
<li>
<p><code>--warn-dirty</code></p>
<p>Enable the <code>warn-dirty</code> setting.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p><strong>Warning</strong> <br />
This program is <strong>experimental</strong> and its interface is subject to change.</p>
</blockquote>
<h1 id="name-45"><a class="header" href="#name-45">Name</a></h1>
<p><code>nix log</code> - show the build log of the specified packages or paths, if available</p>
<h1 id="synopsis-76"><a class="header" href="#synopsis-76">Synopsis</a></h1>
<p><code>nix log</code> [<em>option</em>...] <em>installable</em></p>
<h1 id="examples-47"><a class="header" href="#examples-47">Examples</a></h1>
<ul>
<li>
<p>Get the build log of GNU Hello:</p>
<pre><code class="language-console"># nix log nixpkgs#hello
</code></pre>
</li>
<li>
<p>Get the build log of a specific store path:</p>
<pre><code class="language-console"># nix log /nix/store/lmngj4wcm9rkv3w4dfhzhcyij3195hiq-thunderbird-52.2.1
</code></pre>
</li>
<li>
<p>Get a build log from a specific binary cache:</p>
<pre><code class="language-console"># nix log --store https://cache.nixos.org nixpkgs#hello
</code></pre>
</li>
</ul>
<h1 id="description-65"><a class="header" href="#description-65">Description</a></h1>
<p>This command prints the log of a previous build of the derivation
<em>installable</em> on standard output.</p>
<p>Nix looks for build logs in two places:</p>
<ul>
<li>
<p>In the directory <code>/nix/var/log/nix/drvs</code>, which contains logs for
locally built derivations.</p>
</li>
<li>
<p>In the binary caches listed in the <code>substituters</code> setting. Logs
should be named <code>&lt;cache&gt;/log/&lt;base-name-of-store-path&gt;</code>, where
<code>store-path</code> is a derivation,
e.g. <code>https://cache.nixos.org/log/dvmig8jgrdapvbyxb1rprckdmdqx08kv-hello-2.10.drv</code>.
For non-derivation store paths, Nix will first try to determine the
deriver by fetching the <code>.narinfo</code> file for this store path.</p>
</li>
</ul>
<h1 id="options-33"><a class="header" href="#options-33">Options</a></h1>
<p><strong>Common evaluation options:</strong></p>
<ul>
<li>
<p><code>--arg</code> <em>name</em> <em>expr</em></p>
<p>Pass the value <em>expr</em> as the argument <em>name</em> to Nix functions.</p>
</li>
<li>
<p><code>--argstr</code> <em>name</em> <em>string</em></p>
<p>Pass the string <em>string</em> as the argument <em>name</em> to Nix functions.</p>
</li>
<li>
<p><code>--debugger</code></p>
<p>Start an interactive environment if evaluation fails.</p>
</li>
<li>
<p><code>--eval-store</code> <em>store-url</em></p>
<p>The Nix store to use for evaluations.</p>
</li>
<li>
<p><code>--impure</code></p>
<p>Allow access to mutable paths and repositories.</p>
</li>
<li>
<p><code>--include</code> / <code>-I</code> <em>path</em></p>
<p>Add <em>path</em> to the Nix search path. The Nix search path is
initialized from the colon-separated <a href="command-ref/new-cli/../../command-ref/env-common.html#env-NIX_PATH"><code>NIX_PATH</code></a> environment
variable, and is used to look up the location of Nix expressions using <a href="command-ref/new-cli/../../language/values.html#type-path">paths</a> enclosed in angle
brackets (i.e., <code>&lt;nixpkgs&gt;</code>).</p>
<p>For instance, passing</p>
<pre><code>-I /home/eelco/Dev
-I /etc/nixos
</code></pre>
<p>will cause Nix to look for paths relative to <code>/home/eelco/Dev</code> and
<code>/etc/nixos</code>, in that order. This is equivalent to setting the
<code>NIX_PATH</code> environment variable to</p>
<pre><code>/home/eelco/Dev:/etc/nixos
</code></pre>
<p>It is also possible to match paths against a prefix. For example,
passing</p>
<pre><code>-I nixpkgs=/home/eelco/Dev/nixpkgs-branch
-I /etc/nixos
</code></pre>
<p>will cause Nix to search for <code>&lt;nixpkgs/path&gt;</code> in
<code>/home/eelco/Dev/nixpkgs-branch/path</code> and <code>/etc/nixos/nixpkgs/path</code>.</p>
<p>If a path in the Nix search path starts with <code>http://</code> or <code>https://</code>,
it is interpreted as the URL of a tarball that will be downloaded and
unpacked to a temporary location. The tarball must consist of a single
top-level directory. For example, passing</p>
<pre><code>-I nixpkgs=https://github.com/NixOS/nixpkgs/archive/master.tar.gz
</code></pre>
<p>tells Nix to download and use the current contents of the <code>master</code>
branch in the <code>nixpkgs</code> repository.</p>
<p>The URLs of the tarballs from the official <code>nixos.org</code> channels
(see <a href="command-ref/new-cli/../nix-channel.html">the manual page for <code>nix-channel</code></a>) can be
abbreviated as <code>channel:&lt;channel-name&gt;</code>. For instance, the
following two flags are equivalent:</p>
<pre><code>-I nixpkgs=channel:nixos-21.05
-I nixpkgs=https://nixos.org/channels/nixos-21.05/nixexprs.tar.xz
</code></pre>
<p>You can also fetch source trees using <a href="command-ref/new-cli/./nix3-flake.html#url-like-syntax">flake URLs</a> and add them to the
search path. For instance,</p>
<pre><code>-I nixpkgs=flake:nixpkgs
</code></pre>
<p>specifies that the prefix <code>nixpkgs</code> shall refer to the source tree
downloaded from the <code>nixpkgs</code> entry in the flake registry. Similarly,</p>
<pre><code>-I nixpkgs=flake:github:NixOS/nixpkgs/nixos-22.05
</code></pre>
<p>makes <code>&lt;nixpkgs&gt;</code> refer to a particular branch of the
<code>NixOS/nixpkgs</code> repository on GitHub.</p>
</li>
<li>
<p><code>--override-flake</code> <em>original-ref</em> <em>resolved-ref</em></p>
<p>Override the flake registries, redirecting <em>original-ref</em> to <em>resolved-ref</em>.</p>
</li>
</ul>
<p><strong>Common flake-related options:</strong></p>
<ul>
<li>
<p><code>--commit-lock-file</code></p>
<p>Commit changes to the flake's lock file.</p>
</li>
<li>
<p><code>--inputs-from</code> <em>flake-url</em></p>
<p>Use the inputs of the specified flake as registry entries.</p>
</li>
<li>
<p><code>--no-registries</code></p>
<p>Don't allow lookups in the flake registries. This option is deprecated; use <code>--no-use-registries</code>.</p>
</li>
<li>
<p><code>--no-update-lock-file</code></p>
<p>Do not allow any updates to the flake's lock file.</p>
</li>
<li>
<p><code>--no-write-lock-file</code></p>
<p>Do not write the flake's newly generated lock file.</p>
</li>
<li>
<p><code>--override-input</code> <em>input-path</em> <em>flake-url</em></p>
<p>Override a specific flake input (e.g. <code>dwarffs/nixpkgs</code>). This implies <code>--no-write-lock-file</code>.</p>
</li>
<li>
<p><code>--recreate-lock-file</code></p>
<p>Recreate the flake's lock file from scratch.</p>
</li>
<li>
<p><code>--update-input</code> <em>input-path</em></p>
<p>Update a specific flake input (ignoring its previous entry in the lock file).</p>
</li>
</ul>
<p><strong>Logging-related options:</strong></p>
<ul>
<li>
<p><code>--debug</code></p>
<p>Set the logging verbosity level to 'debug'.</p>
</li>
<li>
<p><code>--log-format</code> <em>format</em></p>
<p>Set the format of log output; one of <code>raw</code>, <code>internal-json</code>, <code>bar</code> or <code>bar-with-logs</code>.</p>
</li>
<li>
<p><code>--print-build-logs</code> / <code>-L</code></p>
<p>Print full build logs on standard error.</p>
</li>
<li>
<p><code>--quiet</code></p>
<p>Decrease the logging verbosity level.</p>
</li>
<li>
<p><code>--verbose</code> / <code>-v</code></p>
<p>Increase the logging verbosity level.</p>
</li>
</ul>
<p><strong>Miscellaneous global options:</strong></p>
<ul>
<li>
<p><code>--help</code></p>
<p>Show usage information.</p>
</li>
<li>
<p><code>--offline</code></p>
<p>Disable substituters and consider all previously downloaded files up-to-date.</p>
</li>
<li>
<p><code>--option</code> <em>name</em> <em>value</em></p>
<p>Set the Nix configuration setting <em>name</em> to <em>value</em> (overriding <code>nix.conf</code>).</p>
</li>
<li>
<p><code>--refresh</code></p>
<p>Consider all previously downloaded files out-of-date.</p>
</li>
<li>
<p><code>--version</code></p>
<p>Show version information.</p>
</li>
</ul>
<p><strong>Options that change the interpretation of installables:</strong></p>
<ul>
<li>
<p><code>--derivation</code></p>
<p>Operate on the <a href="command-ref/new-cli/../../glossary.html#gloss-store-derivation">store derivation</a> rather than its outputs.</p>
</li>
<li>
<p><code>--expr</code> <em>expr</em></p>
<p>Interpret installables as attribute paths relative to the Nix expression <em>expr</em>.</p>
</li>
<li>
<p><code>--file</code> / <code>-f</code> <em>file</em></p>
<p>Interpret installables as attribute paths relative to the Nix expression stored in <em>file</em>. If <em>file</em> is the character -, then a Nix expression will be read from standard input. Implies <code>--impure</code>.</p>
</li>
</ul>
<p><strong>Options to override configuration settings:</strong></p>
<ul>
<li>
<p><code>--accept-flake-config</code></p>
<p>Enable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--access-tokens</code> <em>value</em></p>
<p>Set the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--allow-dirty</code></p>
<p>Enable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--allow-import-from-derivation</code></p>
<p>Enable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--allow-new-privileges</code></p>
<p>Enable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--allow-symlinked-store</code></p>
<p>Enable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--allow-unsafe-native-code-during-evaluation</code></p>
<p>Enable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--allowed-impure-host-deps</code> <em>value</em></p>
<p>Set the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--allowed-uris</code> <em>value</em></p>
<p>Set the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--allowed-users</code> <em>value</em></p>
<p>Set the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--auto-allocate-uids</code></p>
<p>Enable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--auto-optimise-store</code></p>
<p>Enable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt</code> <em>value</em></p>
<p>Set the <code>bash-prompt</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-prefix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-prefix</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-suffix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-suffix</code> setting.</p>
</li>
<li>
<p><code>--build-hook</code> <em>value</em></p>
<p>Set the <code>build-hook</code> setting.</p>
</li>
<li>
<p><code>--build-poll-interval</code> <em>value</em></p>
<p>Set the <code>build-poll-interval</code> setting.</p>
</li>
<li>
<p><code>--build-users-group</code> <em>value</em></p>
<p>Set the <code>build-users-group</code> setting.</p>
</li>
<li>
<p><code>--builders</code> <em>value</em></p>
<p>Set the <code>builders</code> setting.</p>
</li>
<li>
<p><code>--builders-use-substitutes</code></p>
<p>Enable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--commit-lockfile-summary</code> <em>value</em></p>
<p>Set the <code>commit-lockfile-summary</code> setting.</p>
</li>
<li>
<p><code>--compress-build-log</code></p>
<p>Enable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--connect-timeout</code> <em>value</em></p>
<p>Set the <code>connect-timeout</code> setting.</p>
</li>
<li>
<p><code>--cores</code> <em>value</em></p>
<p>Set the <code>cores</code> setting.</p>
</li>
<li>
<p><code>--diff-hook</code> <em>value</em></p>
<p>Set the <code>diff-hook</code> setting.</p>
</li>
<li>
<p><code>--download-attempts</code> <em>value</em></p>
<p>Set the <code>download-attempts</code> setting.</p>
</li>
<li>
<p><code>--download-speed</code> <em>value</em></p>
<p>Set the <code>download-speed</code> setting.</p>
</li>
<li>
<p><code>--eval-cache</code></p>
<p>Enable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--experimental-features</code> <em>value</em></p>
<p>Set the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-access-tokens</code> <em>value</em></p>
<p>Append to the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-impure-host-deps</code> <em>value</em></p>
<p>Append to the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-uris</code> <em>value</em></p>
<p>Append to the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-users</code> <em>value</em></p>
<p>Append to the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--extra-experimental-features</code> <em>value</em></p>
<p>Append to the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-extra-platforms</code> <em>value</em></p>
<p>Append to the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-hashed-mirrors</code> <em>value</em></p>
<p>Append to the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--extra-ignored-acls</code> <em>value</em></p>
<p>Append to the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--extra-nix-path</code> <em>value</em></p>
<p>Append to the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--extra-platforms</code> <em>value</em></p>
<p>Set the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-plugin-files</code> <em>value</em></p>
<p>Append to the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--extra-sandbox-paths</code> <em>value</em></p>
<p>Append to the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--extra-secret-key-files</code> <em>value</em></p>
<p>Append to the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--extra-substituters</code> <em>value</em></p>
<p>Append to the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-system-features</code> <em>value</em></p>
<p>Append to the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-public-keys</code> <em>value</em></p>
<p>Append to the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-substituters</code> <em>value</em></p>
<p>Append to the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-users</code> <em>value</em></p>
<p>Append to the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--fallback</code></p>
<p>Enable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--filter-syscalls</code></p>
<p>Enable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--flake-registry</code> <em>value</em></p>
<p>Set the <code>flake-registry</code> setting.</p>
</li>
<li>
<p><code>--fsync-metadata</code></p>
<p>Enable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--gc-reserved-space</code> <em>value</em></p>
<p>Set the <code>gc-reserved-space</code> setting.</p>
</li>
<li>
<p><code>--hashed-mirrors</code> <em>value</em></p>
<p>Set the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--http-connections</code> <em>value</em></p>
<p>Set the <code>http-connections</code> setting.</p>
</li>
<li>
<p><code>--http2</code></p>
<p>Enable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--id-count</code> <em>value</em></p>
<p>Set the <code>id-count</code> setting.</p>
</li>
<li>
<p><code>--ignore-try</code></p>
<p>Enable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--ignored-acls</code> <em>value</em></p>
<p>Set the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--impersonate-linux-26</code></p>
<p>Enable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--keep-build-log</code></p>
<p>Enable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--keep-derivations</code></p>
<p>Enable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-env-derivations</code></p>
<p>Enable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-failed</code></p>
<p>Enable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--keep-going</code></p>
<p>Enable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--keep-outputs</code></p>
<p>Enable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--log-lines</code> <em>value</em></p>
<p>Set the <code>log-lines</code> setting.</p>
</li>
<li>
<p><code>--max-build-log-size</code> <em>value</em></p>
<p>Set the <code>max-build-log-size</code> setting.</p>
</li>
<li>
<p><code>--max-free</code> <em>value</em></p>
<p>Set the <code>max-free</code> setting.</p>
</li>
<li>
<p><code>--max-jobs</code> <em>value</em></p>
<p>Set the <code>max-jobs</code> setting.</p>
</li>
<li>
<p><code>--max-silent-time</code> <em>value</em></p>
<p>Set the <code>max-silent-time</code> setting.</p>
</li>
<li>
<p><code>--min-free</code> <em>value</em></p>
<p>Set the <code>min-free</code> setting.</p>
</li>
<li>
<p><code>--min-free-check-interval</code> <em>value</em></p>
<p>Set the <code>min-free-check-interval</code> setting.</p>
</li>
<li>
<p><code>--nar-buffer-size</code> <em>value</em></p>
<p>Set the <code>nar-buffer-size</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-negative-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-negative-ttl</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-positive-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-positive-ttl</code> setting.</p>
</li>
<li>
<p><code>--netrc-file</code> <em>value</em></p>
<p>Set the <code>netrc-file</code> setting.</p>
</li>
<li>
<p><code>--nix-path</code> <em>value</em></p>
<p>Set the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--no-accept-flake-config</code></p>
<p>Disable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--no-allow-dirty</code></p>
<p>Disable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--no-allow-import-from-derivation</code></p>
<p>Disable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--no-allow-new-privileges</code></p>
<p>Disable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--no-allow-symlinked-store</code></p>
<p>Disable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--no-allow-unsafe-native-code-during-evaluation</code></p>
<p>Disable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--no-auto-allocate-uids</code></p>
<p>Disable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--no-auto-optimise-store</code></p>
<p>Disable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--no-builders-use-substitutes</code></p>
<p>Disable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--no-compress-build-log</code></p>
<p>Disable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-eval-cache</code></p>
<p>Disable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--no-fallback</code></p>
<p>Disable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--no-filter-syscalls</code></p>
<p>Disable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--no-fsync-metadata</code></p>
<p>Disable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--no-http2</code></p>
<p>Disable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--no-ignore-try</code></p>
<p>Disable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--no-impersonate-linux-26</code></p>
<p>Disable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--no-keep-build-log</code></p>
<p>Disable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-keep-derivations</code></p>
<p>Disable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-env-derivations</code></p>
<p>Disable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-failed</code></p>
<p>Disable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--no-keep-going</code></p>
<p>Disable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--no-keep-outputs</code></p>
<p>Disable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--no-preallocate-contents</code></p>
<p>Disable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--no-print-missing</code></p>
<p>Disable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--no-pure-eval</code></p>
<p>Disable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--no-require-sigs</code></p>
<p>Disable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--no-restrict-eval</code></p>
<p>Disable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--no-run-diff-hook</code></p>
<p>Disable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--no-sandbox</code></p>
<p>Disable sandboxing.</p>
</li>
<li>
<p><code>--no-sandbox-fallback</code></p>
<p>Disable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--no-show-trace</code></p>
<p>Disable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--no-substitute</code></p>
<p>Disable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--no-sync-before-registering</code></p>
<p>Disable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--no-trace-function-calls</code></p>
<p>Disable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--no-trace-verbose</code></p>
<p>Disable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--no-use-case-hack</code></p>
<p>Disable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--no-use-cgroups</code></p>
<p>Disable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--no-use-registries</code></p>
<p>Disable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--no-use-sqlite-wal</code></p>
<p>Disable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--no-warn-dirty</code></p>
<p>Disable the <code>warn-dirty</code> setting.</p>
</li>
<li>
<p><code>--plugin-files</code> <em>value</em></p>
<p>Set the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--post-build-hook</code> <em>value</em></p>
<p>Set the <code>post-build-hook</code> setting.</p>
</li>
<li>
<p><code>--pre-build-hook</code> <em>value</em></p>
<p>Set the <code>pre-build-hook</code> setting.</p>
</li>
<li>
<p><code>--preallocate-contents</code></p>
<p>Enable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--print-missing</code></p>
<p>Enable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--pure-eval</code></p>
<p>Enable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--relaxed-sandbox</code></p>
<p>Enable sandboxing, but allow builds to disable it.</p>
</li>
<li>
<p><code>--require-sigs</code></p>
<p>Enable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--restrict-eval</code></p>
<p>Enable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--run-diff-hook</code></p>
<p>Enable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--sandbox</code></p>
<p>Enable sandboxing.</p>
</li>
<li>
<p><code>--sandbox-build-dir</code> <em>value</em></p>
<p>Set the <code>sandbox-build-dir</code> setting.</p>
</li>
<li>
<p><code>--sandbox-dev-shm-size</code> <em>value</em></p>
<p>Set the <code>sandbox-dev-shm-size</code> setting.</p>
</li>
<li>
<p><code>--sandbox-fallback</code></p>
<p>Enable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--sandbox-paths</code> <em>value</em></p>
<p>Set the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--secret-key-files</code> <em>value</em></p>
<p>Set the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--show-trace</code></p>
<p>Enable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--stalled-download-timeout</code> <em>value</em></p>
<p>Set the <code>stalled-download-timeout</code> setting.</p>
</li>
<li>
<p><code>--start-id</code> <em>value</em></p>
<p>Set the <code>start-id</code> setting.</p>
</li>
<li>
<p><code>--store</code> <em>value</em></p>
<p>Set the <code>store</code> setting.</p>
</li>
<li>
<p><code>--substitute</code></p>
<p>Enable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--substituters</code> <em>value</em></p>
<p>Set the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--sync-before-registering</code></p>
<p>Enable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--system</code> <em>value</em></p>
<p>Set the <code>system</code> setting.</p>
</li>
<li>
<p><code>--system-features</code> <em>value</em></p>
<p>Set the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--tarball-ttl</code> <em>value</em></p>
<p>Set the <code>tarball-ttl</code> setting.</p>
</li>
<li>
<p><code>--timeout</code> <em>value</em></p>
<p>Set the <code>timeout</code> setting.</p>
</li>
<li>
<p><code>--trace-function-calls</code></p>
<p>Enable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--trace-verbose</code></p>
<p>Enable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--trusted-public-keys</code> <em>value</em></p>
<p>Set the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--trusted-substituters</code> <em>value</em></p>
<p>Set the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--trusted-users</code> <em>value</em></p>
<p>Set the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--use-case-hack</code></p>
<p>Enable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--use-cgroups</code></p>
<p>Enable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--use-registries</code></p>
<p>Enable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--use-sqlite-wal</code></p>
<p>Enable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--user-agent-suffix</code> <em>value</em></p>
<p>Set the <code>user-agent-suffix</code> setting.</p>
</li>
<li>
<p><code>--warn-dirty</code></p>
<p>Enable the <code>warn-dirty</code> setting.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p><strong>Warning</strong> <br />
This program is <strong>experimental</strong> and its interface is subject to change.</p>
</blockquote>
<h1 id="name-46"><a class="header" href="#name-46">Name</a></h1>
<p><code>nix nar</code> - create or inspect NAR files</p>
<h1 id="synopsis-77"><a class="header" href="#synopsis-77">Synopsis</a></h1>
<p><code>nix nar</code> [<em>option</em>...] <em>subcommand</em></p>
<p>where <em>subcommand</em> is one of the following:</p>
<ul>
<li><a href="command-ref/new-cli/./nix3-nar-cat.html"><code>nix nar cat</code></a> - print the contents of a file inside a NAR file on stdout</li>
<li><a href="command-ref/new-cli/./nix3-nar-dump-path.html"><code>nix nar dump-path</code></a> - serialise a path to stdout in NAR format</li>
<li><a href="command-ref/new-cli/./nix3-nar-ls.html"><code>nix nar ls</code></a> - show information about a path inside a NAR file</li>
</ul>
<h1 id="description-66"><a class="header" href="#description-66">Description</a></h1>
<p><code>nix nar</code> provides several subcommands for creating and inspecting
<em>Nix Archives</em> (NARs).</p>
<h1 id="file-format"><a class="header" href="#file-format">File format</a></h1>
<p>For the definition of the NAR file format, see Figure 5.2 in
https://edolstra.github.io/pubs/phd-thesis.pdf.</p>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p><strong>Warning</strong> <br />
This program is <strong>experimental</strong> and its interface is subject to change.</p>
</blockquote>
<h1 id="name-47"><a class="header" href="#name-47">Name</a></h1>
<p><code>nix nar cat</code> - print the contents of a file inside a NAR file on stdout</p>
<h1 id="synopsis-78"><a class="header" href="#synopsis-78">Synopsis</a></h1>
<p><code>nix nar cat</code> [<em>option</em>...] <em>nar</em> <em>path</em></p>
<h1 id="examples-48"><a class="header" href="#examples-48">Examples</a></h1>
<ul>
<li>
<p>List a file in a NAR and pipe it through <code>gunzip</code>:</p>
<pre><code class="language-console"># nix nar cat ./hello.nar /share/man/man1/hello.1.gz | gunzip
.\&quot; DO NOT MODIFY THIS FILE!  It was generated by help2man 1.46.4.
.TH HELLO &quot;1&quot; &quot;November 2014&quot; &quot;hello 2.10&quot; &quot;User Commands&quot;
…
</code></pre>
</li>
</ul>
<h1 id="description-67"><a class="header" href="#description-67">Description</a></h1>
<p>This command prints on standard output the contents of the regular
file <em>path</em> inside the NAR file <em>nar</em>.</p>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p><strong>Warning</strong> <br />
This program is <strong>experimental</strong> and its interface is subject to change.</p>
</blockquote>
<h1 id="name-48"><a class="header" href="#name-48">Name</a></h1>
<p><code>nix nar dump-path</code> - serialise a path to stdout in NAR format</p>
<h1 id="synopsis-79"><a class="header" href="#synopsis-79">Synopsis</a></h1>
<p><code>nix nar dump-path</code> [<em>option</em>...] <em>path</em></p>
<h1 id="examples-49"><a class="header" href="#examples-49">Examples</a></h1>
<ul>
<li>
<p>To serialise directory <code>foo</code> as a NAR:</p>
<pre><code class="language-console"># nix nar dump-path ./foo &gt; foo.nar
</code></pre>
</li>
</ul>
<h1 id="description-68"><a class="header" href="#description-68">Description</a></h1>
<p>This command generates a NAR file containing the serialisation of
<em>path</em>, which must contain only regular files, directories and
symbolic links. The NAR is written to standard output.</p>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p><strong>Warning</strong> <br />
This program is <strong>experimental</strong> and its interface is subject to change.</p>
</blockquote>
<h1 id="name-49"><a class="header" href="#name-49">Name</a></h1>
<p><code>nix nar ls</code> - show information about a path inside a NAR file</p>
<h1 id="synopsis-80"><a class="header" href="#synopsis-80">Synopsis</a></h1>
<p><code>nix nar ls</code> [<em>option</em>...] <em>nar</em> <em>path</em></p>
<h1 id="examples-50"><a class="header" href="#examples-50">Examples</a></h1>
<ul>
<li>
<p>To list a specific file in a NAR:</p>
<pre><code class="language-console"># nix nar ls -l ./hello.nar /bin/hello
-r-xr-xr-x                38184 hello
</code></pre>
</li>
<li>
<p>To recursively list the contents of a directory inside a NAR, in JSON
format:</p>
<pre><code class="language-console"># nix nar ls --json -R ./hello.nar /bin
{&quot;type&quot;:&quot;directory&quot;,&quot;entries&quot;:{&quot;hello&quot;:{&quot;type&quot;:&quot;regular&quot;,&quot;size&quot;:38184,&quot;executable&quot;:true,&quot;narOffset&quot;:400}}}
</code></pre>
</li>
</ul>
<h1 id="description-69"><a class="header" href="#description-69">Description</a></h1>
<p>This command shows information about a <em>path</em> inside NAR file <em>nar</em>.</p>
<h1 id="options-34"><a class="header" href="#options-34">Options</a></h1>
<ul>
<li>
<p><code>--directory</code> / <code>-d</code></p>
<p>Show directories rather than their contents.</p>
</li>
<li>
<p><code>--json</code></p>
<p>Produce output in JSON format, suitable for consumption by another program.</p>
</li>
<li>
<p><code>--long</code> / <code>-l</code></p>
<p>Show detailed file information.</p>
</li>
<li>
<p><code>--recursive</code> / <code>-R</code></p>
<p>List subdirectories recursively.</p>
</li>
</ul>
<p><strong>Logging-related options:</strong></p>
<ul>
<li>
<p><code>--debug</code></p>
<p>Set the logging verbosity level to 'debug'.</p>
</li>
<li>
<p><code>--log-format</code> <em>format</em></p>
<p>Set the format of log output; one of <code>raw</code>, <code>internal-json</code>, <code>bar</code> or <code>bar-with-logs</code>.</p>
</li>
<li>
<p><code>--print-build-logs</code> / <code>-L</code></p>
<p>Print full build logs on standard error.</p>
</li>
<li>
<p><code>--quiet</code></p>
<p>Decrease the logging verbosity level.</p>
</li>
<li>
<p><code>--verbose</code> / <code>-v</code></p>
<p>Increase the logging verbosity level.</p>
</li>
</ul>
<p><strong>Miscellaneous global options:</strong></p>
<ul>
<li>
<p><code>--help</code></p>
<p>Show usage information.</p>
</li>
<li>
<p><code>--offline</code></p>
<p>Disable substituters and consider all previously downloaded files up-to-date.</p>
</li>
<li>
<p><code>--option</code> <em>name</em> <em>value</em></p>
<p>Set the Nix configuration setting <em>name</em> to <em>value</em> (overriding <code>nix.conf</code>).</p>
</li>
<li>
<p><code>--refresh</code></p>
<p>Consider all previously downloaded files out-of-date.</p>
</li>
<li>
<p><code>--version</code></p>
<p>Show version information.</p>
</li>
</ul>
<p><strong>Options to override configuration settings:</strong></p>
<ul>
<li>
<p><code>--accept-flake-config</code></p>
<p>Enable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--access-tokens</code> <em>value</em></p>
<p>Set the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--allow-dirty</code></p>
<p>Enable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--allow-import-from-derivation</code></p>
<p>Enable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--allow-new-privileges</code></p>
<p>Enable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--allow-symlinked-store</code></p>
<p>Enable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--allow-unsafe-native-code-during-evaluation</code></p>
<p>Enable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--allowed-impure-host-deps</code> <em>value</em></p>
<p>Set the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--allowed-uris</code> <em>value</em></p>
<p>Set the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--allowed-users</code> <em>value</em></p>
<p>Set the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--auto-allocate-uids</code></p>
<p>Enable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--auto-optimise-store</code></p>
<p>Enable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt</code> <em>value</em></p>
<p>Set the <code>bash-prompt</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-prefix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-prefix</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-suffix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-suffix</code> setting.</p>
</li>
<li>
<p><code>--build-hook</code> <em>value</em></p>
<p>Set the <code>build-hook</code> setting.</p>
</li>
<li>
<p><code>--build-poll-interval</code> <em>value</em></p>
<p>Set the <code>build-poll-interval</code> setting.</p>
</li>
<li>
<p><code>--build-users-group</code> <em>value</em></p>
<p>Set the <code>build-users-group</code> setting.</p>
</li>
<li>
<p><code>--builders</code> <em>value</em></p>
<p>Set the <code>builders</code> setting.</p>
</li>
<li>
<p><code>--builders-use-substitutes</code></p>
<p>Enable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--commit-lockfile-summary</code> <em>value</em></p>
<p>Set the <code>commit-lockfile-summary</code> setting.</p>
</li>
<li>
<p><code>--compress-build-log</code></p>
<p>Enable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--connect-timeout</code> <em>value</em></p>
<p>Set the <code>connect-timeout</code> setting.</p>
</li>
<li>
<p><code>--cores</code> <em>value</em></p>
<p>Set the <code>cores</code> setting.</p>
</li>
<li>
<p><code>--diff-hook</code> <em>value</em></p>
<p>Set the <code>diff-hook</code> setting.</p>
</li>
<li>
<p><code>--download-attempts</code> <em>value</em></p>
<p>Set the <code>download-attempts</code> setting.</p>
</li>
<li>
<p><code>--download-speed</code> <em>value</em></p>
<p>Set the <code>download-speed</code> setting.</p>
</li>
<li>
<p><code>--eval-cache</code></p>
<p>Enable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--experimental-features</code> <em>value</em></p>
<p>Set the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-access-tokens</code> <em>value</em></p>
<p>Append to the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-impure-host-deps</code> <em>value</em></p>
<p>Append to the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-uris</code> <em>value</em></p>
<p>Append to the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-users</code> <em>value</em></p>
<p>Append to the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--extra-experimental-features</code> <em>value</em></p>
<p>Append to the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-extra-platforms</code> <em>value</em></p>
<p>Append to the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-hashed-mirrors</code> <em>value</em></p>
<p>Append to the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--extra-ignored-acls</code> <em>value</em></p>
<p>Append to the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--extra-nix-path</code> <em>value</em></p>
<p>Append to the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--extra-platforms</code> <em>value</em></p>
<p>Set the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-plugin-files</code> <em>value</em></p>
<p>Append to the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--extra-sandbox-paths</code> <em>value</em></p>
<p>Append to the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--extra-secret-key-files</code> <em>value</em></p>
<p>Append to the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--extra-substituters</code> <em>value</em></p>
<p>Append to the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-system-features</code> <em>value</em></p>
<p>Append to the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-public-keys</code> <em>value</em></p>
<p>Append to the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-substituters</code> <em>value</em></p>
<p>Append to the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-users</code> <em>value</em></p>
<p>Append to the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--fallback</code></p>
<p>Enable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--filter-syscalls</code></p>
<p>Enable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--flake-registry</code> <em>value</em></p>
<p>Set the <code>flake-registry</code> setting.</p>
</li>
<li>
<p><code>--fsync-metadata</code></p>
<p>Enable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--gc-reserved-space</code> <em>value</em></p>
<p>Set the <code>gc-reserved-space</code> setting.</p>
</li>
<li>
<p><code>--hashed-mirrors</code> <em>value</em></p>
<p>Set the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--http-connections</code> <em>value</em></p>
<p>Set the <code>http-connections</code> setting.</p>
</li>
<li>
<p><code>--http2</code></p>
<p>Enable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--id-count</code> <em>value</em></p>
<p>Set the <code>id-count</code> setting.</p>
</li>
<li>
<p><code>--ignore-try</code></p>
<p>Enable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--ignored-acls</code> <em>value</em></p>
<p>Set the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--impersonate-linux-26</code></p>
<p>Enable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--keep-build-log</code></p>
<p>Enable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--keep-derivations</code></p>
<p>Enable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-env-derivations</code></p>
<p>Enable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-failed</code></p>
<p>Enable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--keep-going</code></p>
<p>Enable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--keep-outputs</code></p>
<p>Enable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--log-lines</code> <em>value</em></p>
<p>Set the <code>log-lines</code> setting.</p>
</li>
<li>
<p><code>--max-build-log-size</code> <em>value</em></p>
<p>Set the <code>max-build-log-size</code> setting.</p>
</li>
<li>
<p><code>--max-free</code> <em>value</em></p>
<p>Set the <code>max-free</code> setting.</p>
</li>
<li>
<p><code>--max-jobs</code> <em>value</em></p>
<p>Set the <code>max-jobs</code> setting.</p>
</li>
<li>
<p><code>--max-silent-time</code> <em>value</em></p>
<p>Set the <code>max-silent-time</code> setting.</p>
</li>
<li>
<p><code>--min-free</code> <em>value</em></p>
<p>Set the <code>min-free</code> setting.</p>
</li>
<li>
<p><code>--min-free-check-interval</code> <em>value</em></p>
<p>Set the <code>min-free-check-interval</code> setting.</p>
</li>
<li>
<p><code>--nar-buffer-size</code> <em>value</em></p>
<p>Set the <code>nar-buffer-size</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-negative-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-negative-ttl</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-positive-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-positive-ttl</code> setting.</p>
</li>
<li>
<p><code>--netrc-file</code> <em>value</em></p>
<p>Set the <code>netrc-file</code> setting.</p>
</li>
<li>
<p><code>--nix-path</code> <em>value</em></p>
<p>Set the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--no-accept-flake-config</code></p>
<p>Disable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--no-allow-dirty</code></p>
<p>Disable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--no-allow-import-from-derivation</code></p>
<p>Disable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--no-allow-new-privileges</code></p>
<p>Disable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--no-allow-symlinked-store</code></p>
<p>Disable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--no-allow-unsafe-native-code-during-evaluation</code></p>
<p>Disable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--no-auto-allocate-uids</code></p>
<p>Disable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--no-auto-optimise-store</code></p>
<p>Disable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--no-builders-use-substitutes</code></p>
<p>Disable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--no-compress-build-log</code></p>
<p>Disable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-eval-cache</code></p>
<p>Disable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--no-fallback</code></p>
<p>Disable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--no-filter-syscalls</code></p>
<p>Disable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--no-fsync-metadata</code></p>
<p>Disable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--no-http2</code></p>
<p>Disable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--no-ignore-try</code></p>
<p>Disable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--no-impersonate-linux-26</code></p>
<p>Disable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--no-keep-build-log</code></p>
<p>Disable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-keep-derivations</code></p>
<p>Disable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-env-derivations</code></p>
<p>Disable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-failed</code></p>
<p>Disable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--no-keep-going</code></p>
<p>Disable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--no-keep-outputs</code></p>
<p>Disable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--no-preallocate-contents</code></p>
<p>Disable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--no-print-missing</code></p>
<p>Disable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--no-pure-eval</code></p>
<p>Disable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--no-require-sigs</code></p>
<p>Disable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--no-restrict-eval</code></p>
<p>Disable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--no-run-diff-hook</code></p>
<p>Disable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--no-sandbox</code></p>
<p>Disable sandboxing.</p>
</li>
<li>
<p><code>--no-sandbox-fallback</code></p>
<p>Disable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--no-show-trace</code></p>
<p>Disable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--no-substitute</code></p>
<p>Disable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--no-sync-before-registering</code></p>
<p>Disable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--no-trace-function-calls</code></p>
<p>Disable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--no-trace-verbose</code></p>
<p>Disable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--no-use-case-hack</code></p>
<p>Disable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--no-use-cgroups</code></p>
<p>Disable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--no-use-registries</code></p>
<p>Disable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--no-use-sqlite-wal</code></p>
<p>Disable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--no-warn-dirty</code></p>
<p>Disable the <code>warn-dirty</code> setting.</p>
</li>
<li>
<p><code>--plugin-files</code> <em>value</em></p>
<p>Set the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--post-build-hook</code> <em>value</em></p>
<p>Set the <code>post-build-hook</code> setting.</p>
</li>
<li>
<p><code>--pre-build-hook</code> <em>value</em></p>
<p>Set the <code>pre-build-hook</code> setting.</p>
</li>
<li>
<p><code>--preallocate-contents</code></p>
<p>Enable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--print-missing</code></p>
<p>Enable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--pure-eval</code></p>
<p>Enable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--relaxed-sandbox</code></p>
<p>Enable sandboxing, but allow builds to disable it.</p>
</li>
<li>
<p><code>--require-sigs</code></p>
<p>Enable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--restrict-eval</code></p>
<p>Enable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--run-diff-hook</code></p>
<p>Enable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--sandbox</code></p>
<p>Enable sandboxing.</p>
</li>
<li>
<p><code>--sandbox-build-dir</code> <em>value</em></p>
<p>Set the <code>sandbox-build-dir</code> setting.</p>
</li>
<li>
<p><code>--sandbox-dev-shm-size</code> <em>value</em></p>
<p>Set the <code>sandbox-dev-shm-size</code> setting.</p>
</li>
<li>
<p><code>--sandbox-fallback</code></p>
<p>Enable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--sandbox-paths</code> <em>value</em></p>
<p>Set the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--secret-key-files</code> <em>value</em></p>
<p>Set the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--show-trace</code></p>
<p>Enable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--stalled-download-timeout</code> <em>value</em></p>
<p>Set the <code>stalled-download-timeout</code> setting.</p>
</li>
<li>
<p><code>--start-id</code> <em>value</em></p>
<p>Set the <code>start-id</code> setting.</p>
</li>
<li>
<p><code>--store</code> <em>value</em></p>
<p>Set the <code>store</code> setting.</p>
</li>
<li>
<p><code>--substitute</code></p>
<p>Enable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--substituters</code> <em>value</em></p>
<p>Set the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--sync-before-registering</code></p>
<p>Enable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--system</code> <em>value</em></p>
<p>Set the <code>system</code> setting.</p>
</li>
<li>
<p><code>--system-features</code> <em>value</em></p>
<p>Set the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--tarball-ttl</code> <em>value</em></p>
<p>Set the <code>tarball-ttl</code> setting.</p>
</li>
<li>
<p><code>--timeout</code> <em>value</em></p>
<p>Set the <code>timeout</code> setting.</p>
</li>
<li>
<p><code>--trace-function-calls</code></p>
<p>Enable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--trace-verbose</code></p>
<p>Enable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--trusted-public-keys</code> <em>value</em></p>
<p>Set the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--trusted-substituters</code> <em>value</em></p>
<p>Set the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--trusted-users</code> <em>value</em></p>
<p>Set the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--use-case-hack</code></p>
<p>Enable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--use-cgroups</code></p>
<p>Enable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--use-registries</code></p>
<p>Enable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--use-sqlite-wal</code></p>
<p>Enable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--user-agent-suffix</code> <em>value</em></p>
<p>Set the <code>user-agent-suffix</code> setting.</p>
</li>
<li>
<p><code>--warn-dirty</code></p>
<p>Enable the <code>warn-dirty</code> setting.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p><strong>Warning</strong> <br />
This program is <strong>experimental</strong> and its interface is subject to change.</p>
</blockquote>
<h1 id="name-50"><a class="header" href="#name-50">Name</a></h1>
<p><code>nix path-info</code> - query information about store paths</p>
<h1 id="synopsis-81"><a class="header" href="#synopsis-81">Synopsis</a></h1>
<p><code>nix path-info</code> [<em>option</em>...] <em>installables</em>...</p>
<h1 id="examples-51"><a class="header" href="#examples-51">Examples</a></h1>
<ul>
<li>
<p>Print the store path produced by <code>nixpkgs#hello</code>:</p>
<pre><code class="language-console"># nix path-info nixpkgs#hello
/nix/store/v5sv61sszx301i0x6xysaqzla09nksnd-hello-2.10
</code></pre>
</li>
<li>
<p>Show the closure sizes of every path in the current NixOS system
closure, sorted by size:</p>
<pre><code class="language-console"># nix path-info -rS /run/current-system | sort -nk2
/nix/store/hl5xwp9kdrd1zkm0idm3kkby9q66z404-empty                                                96
/nix/store/27324qvqhnxj3rncazmxc4mwy79kz8ha-nameservers                                         112
…
/nix/store/539jkw9a8dyry7clcv60gk6na816j7y8-etc                                          5783255504
/nix/store/zqamz3cz4dbzfihki2mk7a63mbkxz9xq-nixos-system-machine-20.09.20201112.3090c65  5887562256
</code></pre>
</li>
<li>
<p>Show a package's closure size and all its dependencies with human
readable sizes:</p>
<pre><code class="language-console"># nix path-info -rsSh nixpkgs#rustc
/nix/store/01rrgsg5zk3cds0xgdsq40zpk6g51dz9-ncurses-6.2-dev      386.7K   69.1M
/nix/store/0q783wnvixpqz6dxjp16nw296avgczam-libpfm-4.11.0          5.9M   37.4M
…
</code></pre>
</li>
<li>
<p>Check the existence of a path in a binary cache:</p>
<pre><code class="language-console"># nix path-info -r /nix/store/blzxgyvrk32ki6xga10phr4sby2xf25q-geeqie-1.5.1 --store https://cache.nixos.org/
path '/nix/store/blzxgyvrk32ki6xga10phr4sby2xf25q-geeqie-1.5.1' is not valid

</code></pre>
</li>
<li>
<p>Print the 10 most recently added paths (using --json and the jq(1)
command):</p>
<pre><code class="language-console"># nix path-info --json --all | jq -r 'sort_by(.registrationTime)[-11:-1][].path'
</code></pre>
</li>
<li>
<p>Show the size of the entire Nix store:</p>
<pre><code class="language-console"># nix path-info --json --all | jq 'map(.narSize) | add'
49812020936
</code></pre>
</li>
<li>
<p>Show every path whose closure is bigger than 1 GB, sorted by closure
size:</p>
<pre><code class="language-console"># nix path-info --json --all -S \
  | jq 'map(select(.closureSize &gt; 1e9)) | sort_by(.closureSize) | map([.path, .closureSize])'
[
  …,
  [
    &quot;/nix/store/zqamz3cz4dbzfihki2mk7a63mbkxz9xq-nixos-system-machine-20.09.20201112.3090c65&quot;,
    5887562256
  ]
]
</code></pre>
</li>
<li>
<p>Print the path of the <a href="command-ref/new-cli/../../glossary.html#gloss-store-derivation">store derivation</a> produced by <code>nixpkgs#hello</code>:</p>
<pre><code class="language-console"># nix path-info --derivation nixpkgs#hello
/nix/store/s6rn4jz1sin56rf4qj5b5v8jxjm32hlk-hello-2.10.drv
</code></pre>
</li>
</ul>
<h1 id="description-70"><a class="header" href="#description-70">Description</a></h1>
<p>This command shows information about the store paths produced by
<em>installables</em>, or about all paths in the store if you pass <code>--all</code>.</p>
<p>By default, this command only prints the store paths. You can get
additional information by passing flags such as <code>--closure-size</code>,
<code>--size</code>, <code>--sigs</code> or <code>--json</code>.</p>
<blockquote>
<p><strong>Warning</strong></p>
<p>Note that <code>nix path-info</code> does not build or substitute the
<em>installables</em> you specify. Thus, if the corresponding store paths
don't already exist, this command will fail. You can use <code>nix build</code>
to ensure that they exist.</p>
</blockquote>
<h1 id="options-35"><a class="header" href="#options-35">Options</a></h1>
<ul>
<li>
<p><code>--closure-size</code> / <code>-S</code></p>
<p>Print the sum of the sizes of the NAR serialisations of the closure of each path.</p>
</li>
<li>
<p><code>--human-readable</code> / <code>-h</code></p>
<p>With <code>-s</code> and <code>-S</code>, print sizes in a human-friendly format such as <code>5.67G</code>.</p>
</li>
<li>
<p><code>--json</code></p>
<p>Produce output in JSON format, suitable for consumption by another program.</p>
</li>
<li>
<p><code>--sigs</code></p>
<p>Show signatures.</p>
</li>
<li>
<p><code>--size</code> / <code>-s</code></p>
<p>Print the size of the NAR serialisation of each path.</p>
</li>
</ul>
<p><strong>Common evaluation options:</strong></p>
<ul>
<li>
<p><code>--arg</code> <em>name</em> <em>expr</em></p>
<p>Pass the value <em>expr</em> as the argument <em>name</em> to Nix functions.</p>
</li>
<li>
<p><code>--argstr</code> <em>name</em> <em>string</em></p>
<p>Pass the string <em>string</em> as the argument <em>name</em> to Nix functions.</p>
</li>
<li>
<p><code>--debugger</code></p>
<p>Start an interactive environment if evaluation fails.</p>
</li>
<li>
<p><code>--eval-store</code> <em>store-url</em></p>
<p>The Nix store to use for evaluations.</p>
</li>
<li>
<p><code>--impure</code></p>
<p>Allow access to mutable paths and repositories.</p>
</li>
<li>
<p><code>--include</code> / <code>-I</code> <em>path</em></p>
<p>Add <em>path</em> to the Nix search path. The Nix search path is
initialized from the colon-separated <a href="command-ref/new-cli/../../command-ref/env-common.html#env-NIX_PATH"><code>NIX_PATH</code></a> environment
variable, and is used to look up the location of Nix expressions using <a href="command-ref/new-cli/../../language/values.html#type-path">paths</a> enclosed in angle
brackets (i.e., <code>&lt;nixpkgs&gt;</code>).</p>
<p>For instance, passing</p>
<pre><code>-I /home/eelco/Dev
-I /etc/nixos
</code></pre>
<p>will cause Nix to look for paths relative to <code>/home/eelco/Dev</code> and
<code>/etc/nixos</code>, in that order. This is equivalent to setting the
<code>NIX_PATH</code> environment variable to</p>
<pre><code>/home/eelco/Dev:/etc/nixos
</code></pre>
<p>It is also possible to match paths against a prefix. For example,
passing</p>
<pre><code>-I nixpkgs=/home/eelco/Dev/nixpkgs-branch
-I /etc/nixos
</code></pre>
<p>will cause Nix to search for <code>&lt;nixpkgs/path&gt;</code> in
<code>/home/eelco/Dev/nixpkgs-branch/path</code> and <code>/etc/nixos/nixpkgs/path</code>.</p>
<p>If a path in the Nix search path starts with <code>http://</code> or <code>https://</code>,
it is interpreted as the URL of a tarball that will be downloaded and
unpacked to a temporary location. The tarball must consist of a single
top-level directory. For example, passing</p>
<pre><code>-I nixpkgs=https://github.com/NixOS/nixpkgs/archive/master.tar.gz
</code></pre>
<p>tells Nix to download and use the current contents of the <code>master</code>
branch in the <code>nixpkgs</code> repository.</p>
<p>The URLs of the tarballs from the official <code>nixos.org</code> channels
(see <a href="command-ref/new-cli/../nix-channel.html">the manual page for <code>nix-channel</code></a>) can be
abbreviated as <code>channel:&lt;channel-name&gt;</code>. For instance, the
following two flags are equivalent:</p>
<pre><code>-I nixpkgs=channel:nixos-21.05
-I nixpkgs=https://nixos.org/channels/nixos-21.05/nixexprs.tar.xz
</code></pre>
<p>You can also fetch source trees using <a href="command-ref/new-cli/./nix3-flake.html#url-like-syntax">flake URLs</a> and add them to the
search path. For instance,</p>
<pre><code>-I nixpkgs=flake:nixpkgs
</code></pre>
<p>specifies that the prefix <code>nixpkgs</code> shall refer to the source tree
downloaded from the <code>nixpkgs</code> entry in the flake registry. Similarly,</p>
<pre><code>-I nixpkgs=flake:github:NixOS/nixpkgs/nixos-22.05
</code></pre>
<p>makes <code>&lt;nixpkgs&gt;</code> refer to a particular branch of the
<code>NixOS/nixpkgs</code> repository on GitHub.</p>
</li>
<li>
<p><code>--override-flake</code> <em>original-ref</em> <em>resolved-ref</em></p>
<p>Override the flake registries, redirecting <em>original-ref</em> to <em>resolved-ref</em>.</p>
</li>
</ul>
<p><strong>Common flake-related options:</strong></p>
<ul>
<li>
<p><code>--commit-lock-file</code></p>
<p>Commit changes to the flake's lock file.</p>
</li>
<li>
<p><code>--inputs-from</code> <em>flake-url</em></p>
<p>Use the inputs of the specified flake as registry entries.</p>
</li>
<li>
<p><code>--no-registries</code></p>
<p>Don't allow lookups in the flake registries. This option is deprecated; use <code>--no-use-registries</code>.</p>
</li>
<li>
<p><code>--no-update-lock-file</code></p>
<p>Do not allow any updates to the flake's lock file.</p>
</li>
<li>
<p><code>--no-write-lock-file</code></p>
<p>Do not write the flake's newly generated lock file.</p>
</li>
<li>
<p><code>--override-input</code> <em>input-path</em> <em>flake-url</em></p>
<p>Override a specific flake input (e.g. <code>dwarffs/nixpkgs</code>). This implies <code>--no-write-lock-file</code>.</p>
</li>
<li>
<p><code>--recreate-lock-file</code></p>
<p>Recreate the flake's lock file from scratch.</p>
</li>
<li>
<p><code>--update-input</code> <em>input-path</em></p>
<p>Update a specific flake input (ignoring its previous entry in the lock file).</p>
</li>
</ul>
<p><strong>Logging-related options:</strong></p>
<ul>
<li>
<p><code>--debug</code></p>
<p>Set the logging verbosity level to 'debug'.</p>
</li>
<li>
<p><code>--log-format</code> <em>format</em></p>
<p>Set the format of log output; one of <code>raw</code>, <code>internal-json</code>, <code>bar</code> or <code>bar-with-logs</code>.</p>
</li>
<li>
<p><code>--print-build-logs</code> / <code>-L</code></p>
<p>Print full build logs on standard error.</p>
</li>
<li>
<p><code>--quiet</code></p>
<p>Decrease the logging verbosity level.</p>
</li>
<li>
<p><code>--verbose</code> / <code>-v</code></p>
<p>Increase the logging verbosity level.</p>
</li>
</ul>
<p><strong>Miscellaneous global options:</strong></p>
<ul>
<li>
<p><code>--help</code></p>
<p>Show usage information.</p>
</li>
<li>
<p><code>--offline</code></p>
<p>Disable substituters and consider all previously downloaded files up-to-date.</p>
</li>
<li>
<p><code>--option</code> <em>name</em> <em>value</em></p>
<p>Set the Nix configuration setting <em>name</em> to <em>value</em> (overriding <code>nix.conf</code>).</p>
</li>
<li>
<p><code>--refresh</code></p>
<p>Consider all previously downloaded files out-of-date.</p>
</li>
<li>
<p><code>--version</code></p>
<p>Show version information.</p>
</li>
</ul>
<p><strong>Options that change the interpretation of installables:</strong></p>
<ul>
<li>
<p><code>--all</code></p>
<p>Apply the operation to every store path.</p>
</li>
<li>
<p><code>--derivation</code></p>
<p>Operate on the <a href="command-ref/new-cli/../../glossary.html#gloss-store-derivation">store derivation</a> rather than its outputs.</p>
</li>
<li>
<p><code>--expr</code> <em>expr</em></p>
<p>Interpret installables as attribute paths relative to the Nix expression <em>expr</em>.</p>
</li>
<li>
<p><code>--file</code> / <code>-f</code> <em>file</em></p>
<p>Interpret installables as attribute paths relative to the Nix expression stored in <em>file</em>. If <em>file</em> is the character -, then a Nix expression will be read from standard input. Implies <code>--impure</code>.</p>
</li>
<li>
<p><code>--recursive</code> / <code>-r</code></p>
<p>Apply operation to closure of the specified paths.</p>
</li>
</ul>
<p><strong>Options to override configuration settings:</strong></p>
<ul>
<li>
<p><code>--accept-flake-config</code></p>
<p>Enable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--access-tokens</code> <em>value</em></p>
<p>Set the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--allow-dirty</code></p>
<p>Enable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--allow-import-from-derivation</code></p>
<p>Enable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--allow-new-privileges</code></p>
<p>Enable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--allow-symlinked-store</code></p>
<p>Enable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--allow-unsafe-native-code-during-evaluation</code></p>
<p>Enable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--allowed-impure-host-deps</code> <em>value</em></p>
<p>Set the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--allowed-uris</code> <em>value</em></p>
<p>Set the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--allowed-users</code> <em>value</em></p>
<p>Set the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--auto-allocate-uids</code></p>
<p>Enable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--auto-optimise-store</code></p>
<p>Enable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt</code> <em>value</em></p>
<p>Set the <code>bash-prompt</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-prefix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-prefix</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-suffix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-suffix</code> setting.</p>
</li>
<li>
<p><code>--build-hook</code> <em>value</em></p>
<p>Set the <code>build-hook</code> setting.</p>
</li>
<li>
<p><code>--build-poll-interval</code> <em>value</em></p>
<p>Set the <code>build-poll-interval</code> setting.</p>
</li>
<li>
<p><code>--build-users-group</code> <em>value</em></p>
<p>Set the <code>build-users-group</code> setting.</p>
</li>
<li>
<p><code>--builders</code> <em>value</em></p>
<p>Set the <code>builders</code> setting.</p>
</li>
<li>
<p><code>--builders-use-substitutes</code></p>
<p>Enable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--commit-lockfile-summary</code> <em>value</em></p>
<p>Set the <code>commit-lockfile-summary</code> setting.</p>
</li>
<li>
<p><code>--compress-build-log</code></p>
<p>Enable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--connect-timeout</code> <em>value</em></p>
<p>Set the <code>connect-timeout</code> setting.</p>
</li>
<li>
<p><code>--cores</code> <em>value</em></p>
<p>Set the <code>cores</code> setting.</p>
</li>
<li>
<p><code>--diff-hook</code> <em>value</em></p>
<p>Set the <code>diff-hook</code> setting.</p>
</li>
<li>
<p><code>--download-attempts</code> <em>value</em></p>
<p>Set the <code>download-attempts</code> setting.</p>
</li>
<li>
<p><code>--download-speed</code> <em>value</em></p>
<p>Set the <code>download-speed</code> setting.</p>
</li>
<li>
<p><code>--eval-cache</code></p>
<p>Enable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--experimental-features</code> <em>value</em></p>
<p>Set the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-access-tokens</code> <em>value</em></p>
<p>Append to the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-impure-host-deps</code> <em>value</em></p>
<p>Append to the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-uris</code> <em>value</em></p>
<p>Append to the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-users</code> <em>value</em></p>
<p>Append to the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--extra-experimental-features</code> <em>value</em></p>
<p>Append to the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-extra-platforms</code> <em>value</em></p>
<p>Append to the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-hashed-mirrors</code> <em>value</em></p>
<p>Append to the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--extra-ignored-acls</code> <em>value</em></p>
<p>Append to the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--extra-nix-path</code> <em>value</em></p>
<p>Append to the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--extra-platforms</code> <em>value</em></p>
<p>Set the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-plugin-files</code> <em>value</em></p>
<p>Append to the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--extra-sandbox-paths</code> <em>value</em></p>
<p>Append to the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--extra-secret-key-files</code> <em>value</em></p>
<p>Append to the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--extra-substituters</code> <em>value</em></p>
<p>Append to the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-system-features</code> <em>value</em></p>
<p>Append to the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-public-keys</code> <em>value</em></p>
<p>Append to the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-substituters</code> <em>value</em></p>
<p>Append to the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-users</code> <em>value</em></p>
<p>Append to the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--fallback</code></p>
<p>Enable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--filter-syscalls</code></p>
<p>Enable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--flake-registry</code> <em>value</em></p>
<p>Set the <code>flake-registry</code> setting.</p>
</li>
<li>
<p><code>--fsync-metadata</code></p>
<p>Enable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--gc-reserved-space</code> <em>value</em></p>
<p>Set the <code>gc-reserved-space</code> setting.</p>
</li>
<li>
<p><code>--hashed-mirrors</code> <em>value</em></p>
<p>Set the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--http-connections</code> <em>value</em></p>
<p>Set the <code>http-connections</code> setting.</p>
</li>
<li>
<p><code>--http2</code></p>
<p>Enable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--id-count</code> <em>value</em></p>
<p>Set the <code>id-count</code> setting.</p>
</li>
<li>
<p><code>--ignore-try</code></p>
<p>Enable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--ignored-acls</code> <em>value</em></p>
<p>Set the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--impersonate-linux-26</code></p>
<p>Enable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--keep-build-log</code></p>
<p>Enable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--keep-derivations</code></p>
<p>Enable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-env-derivations</code></p>
<p>Enable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-failed</code></p>
<p>Enable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--keep-going</code></p>
<p>Enable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--keep-outputs</code></p>
<p>Enable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--log-lines</code> <em>value</em></p>
<p>Set the <code>log-lines</code> setting.</p>
</li>
<li>
<p><code>--max-build-log-size</code> <em>value</em></p>
<p>Set the <code>max-build-log-size</code> setting.</p>
</li>
<li>
<p><code>--max-free</code> <em>value</em></p>
<p>Set the <code>max-free</code> setting.</p>
</li>
<li>
<p><code>--max-jobs</code> <em>value</em></p>
<p>Set the <code>max-jobs</code> setting.</p>
</li>
<li>
<p><code>--max-silent-time</code> <em>value</em></p>
<p>Set the <code>max-silent-time</code> setting.</p>
</li>
<li>
<p><code>--min-free</code> <em>value</em></p>
<p>Set the <code>min-free</code> setting.</p>
</li>
<li>
<p><code>--min-free-check-interval</code> <em>value</em></p>
<p>Set the <code>min-free-check-interval</code> setting.</p>
</li>
<li>
<p><code>--nar-buffer-size</code> <em>value</em></p>
<p>Set the <code>nar-buffer-size</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-negative-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-negative-ttl</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-positive-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-positive-ttl</code> setting.</p>
</li>
<li>
<p><code>--netrc-file</code> <em>value</em></p>
<p>Set the <code>netrc-file</code> setting.</p>
</li>
<li>
<p><code>--nix-path</code> <em>value</em></p>
<p>Set the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--no-accept-flake-config</code></p>
<p>Disable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--no-allow-dirty</code></p>
<p>Disable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--no-allow-import-from-derivation</code></p>
<p>Disable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--no-allow-new-privileges</code></p>
<p>Disable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--no-allow-symlinked-store</code></p>
<p>Disable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--no-allow-unsafe-native-code-during-evaluation</code></p>
<p>Disable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--no-auto-allocate-uids</code></p>
<p>Disable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--no-auto-optimise-store</code></p>
<p>Disable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--no-builders-use-substitutes</code></p>
<p>Disable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--no-compress-build-log</code></p>
<p>Disable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-eval-cache</code></p>
<p>Disable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--no-fallback</code></p>
<p>Disable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--no-filter-syscalls</code></p>
<p>Disable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--no-fsync-metadata</code></p>
<p>Disable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--no-http2</code></p>
<p>Disable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--no-ignore-try</code></p>
<p>Disable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--no-impersonate-linux-26</code></p>
<p>Disable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--no-keep-build-log</code></p>
<p>Disable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-keep-derivations</code></p>
<p>Disable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-env-derivations</code></p>
<p>Disable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-failed</code></p>
<p>Disable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--no-keep-going</code></p>
<p>Disable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--no-keep-outputs</code></p>
<p>Disable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--no-preallocate-contents</code></p>
<p>Disable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--no-print-missing</code></p>
<p>Disable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--no-pure-eval</code></p>
<p>Disable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--no-require-sigs</code></p>
<p>Disable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--no-restrict-eval</code></p>
<p>Disable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--no-run-diff-hook</code></p>
<p>Disable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--no-sandbox</code></p>
<p>Disable sandboxing.</p>
</li>
<li>
<p><code>--no-sandbox-fallback</code></p>
<p>Disable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--no-show-trace</code></p>
<p>Disable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--no-substitute</code></p>
<p>Disable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--no-sync-before-registering</code></p>
<p>Disable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--no-trace-function-calls</code></p>
<p>Disable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--no-trace-verbose</code></p>
<p>Disable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--no-use-case-hack</code></p>
<p>Disable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--no-use-cgroups</code></p>
<p>Disable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--no-use-registries</code></p>
<p>Disable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--no-use-sqlite-wal</code></p>
<p>Disable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--no-warn-dirty</code></p>
<p>Disable the <code>warn-dirty</code> setting.</p>
</li>
<li>
<p><code>--plugin-files</code> <em>value</em></p>
<p>Set the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--post-build-hook</code> <em>value</em></p>
<p>Set the <code>post-build-hook</code> setting.</p>
</li>
<li>
<p><code>--pre-build-hook</code> <em>value</em></p>
<p>Set the <code>pre-build-hook</code> setting.</p>
</li>
<li>
<p><code>--preallocate-contents</code></p>
<p>Enable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--print-missing</code></p>
<p>Enable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--pure-eval</code></p>
<p>Enable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--relaxed-sandbox</code></p>
<p>Enable sandboxing, but allow builds to disable it.</p>
</li>
<li>
<p><code>--require-sigs</code></p>
<p>Enable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--restrict-eval</code></p>
<p>Enable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--run-diff-hook</code></p>
<p>Enable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--sandbox</code></p>
<p>Enable sandboxing.</p>
</li>
<li>
<p><code>--sandbox-build-dir</code> <em>value</em></p>
<p>Set the <code>sandbox-build-dir</code> setting.</p>
</li>
<li>
<p><code>--sandbox-dev-shm-size</code> <em>value</em></p>
<p>Set the <code>sandbox-dev-shm-size</code> setting.</p>
</li>
<li>
<p><code>--sandbox-fallback</code></p>
<p>Enable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--sandbox-paths</code> <em>value</em></p>
<p>Set the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--secret-key-files</code> <em>value</em></p>
<p>Set the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--show-trace</code></p>
<p>Enable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--stalled-download-timeout</code> <em>value</em></p>
<p>Set the <code>stalled-download-timeout</code> setting.</p>
</li>
<li>
<p><code>--start-id</code> <em>value</em></p>
<p>Set the <code>start-id</code> setting.</p>
</li>
<li>
<p><code>--store</code> <em>value</em></p>
<p>Set the <code>store</code> setting.</p>
</li>
<li>
<p><code>--substitute</code></p>
<p>Enable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--substituters</code> <em>value</em></p>
<p>Set the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--sync-before-registering</code></p>
<p>Enable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--system</code> <em>value</em></p>
<p>Set the <code>system</code> setting.</p>
</li>
<li>
<p><code>--system-features</code> <em>value</em></p>
<p>Set the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--tarball-ttl</code> <em>value</em></p>
<p>Set the <code>tarball-ttl</code> setting.</p>
</li>
<li>
<p><code>--timeout</code> <em>value</em></p>
<p>Set the <code>timeout</code> setting.</p>
</li>
<li>
<p><code>--trace-function-calls</code></p>
<p>Enable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--trace-verbose</code></p>
<p>Enable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--trusted-public-keys</code> <em>value</em></p>
<p>Set the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--trusted-substituters</code> <em>value</em></p>
<p>Set the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--trusted-users</code> <em>value</em></p>
<p>Set the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--use-case-hack</code></p>
<p>Enable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--use-cgroups</code></p>
<p>Enable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--use-registries</code></p>
<p>Enable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--use-sqlite-wal</code></p>
<p>Enable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--user-agent-suffix</code> <em>value</em></p>
<p>Set the <code>user-agent-suffix</code> setting.</p>
</li>
<li>
<p><code>--warn-dirty</code></p>
<p>Enable the <code>warn-dirty</code> setting.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p><strong>Warning</strong> <br />
This program is <strong>experimental</strong> and its interface is subject to change.</p>
</blockquote>
<h1 id="name-51"><a class="header" href="#name-51">Name</a></h1>
<p><code>nix print-dev-env</code> - print shell code that can be sourced by bash to reproduce the build environment of a derivation</p>
<h1 id="synopsis-82"><a class="header" href="#synopsis-82">Synopsis</a></h1>
<p><code>nix print-dev-env</code> [<em>option</em>...] <em>installable</em></p>
<h1 id="examples-52"><a class="header" href="#examples-52">Examples</a></h1>
<ul>
<li>
<p>Apply the build environment of GNU hello to the current shell:</p>
<pre><code class="language-console"># . &lt;(nix print-dev-env nixpkgs#hello)
</code></pre>
</li>
<li>
<p>Get the build environment in JSON format:</p>
<pre><code class="language-console"># nix print-dev-env nixpkgs#hello --json
</code></pre>
<p>The output will look like this:</p>
<pre><code class="language-json">{
  &quot;bashFunctions&quot;: {
    &quot;buildPhase&quot;: &quot; \n    runHook preBuild;\n...&quot;,
    ...
  },
  &quot;variables&quot;: {
    &quot;src&quot;: {
      &quot;type&quot;: &quot;exported&quot;,
      &quot;value&quot;: &quot;/nix/store/3x7dwzq014bblazs7kq20p9hyzz0qh8g-hello-2.10.tar.gz&quot;
    },
    &quot;postUnpackHooks&quot;: {
      &quot;type&quot;: &quot;array&quot;,
      &quot;value&quot;: [&quot;_updateSourceDateEpochFromSourceRoot&quot;]
    },
    ...
  }
}
</code></pre>
</li>
</ul>
<h1 id="description-71"><a class="header" href="#description-71">Description</a></h1>
<p>This command prints a shell script that can be sourced by <code>bash</code> and
that sets the variables and shell functions defined by the build
process of <em>installable</em>. This allows you to get a similar build
environment in your current shell rather than in a subshell (as with
<code>nix develop</code>).</p>
<p>With <code>--json</code>, the output is a JSON serialisation of the variables and
functions defined by the build process.</p>
<h1 id="options-36"><a class="header" href="#options-36">Options</a></h1>
<ul>
<li>
<p><code>--json</code></p>
<p>Produce output in JSON format, suitable for consumption by another program.</p>
</li>
<li>
<p><code>--profile</code> <em>path</em></p>
<p>The profile to operate on.</p>
</li>
<li>
<p><code>--redirect</code> <em>installable</em> <em>outputs-dir</em></p>
<p>Redirect a store path to a mutable location.</p>
</li>
</ul>
<p><strong>Common evaluation options:</strong></p>
<ul>
<li>
<p><code>--arg</code> <em>name</em> <em>expr</em></p>
<p>Pass the value <em>expr</em> as the argument <em>name</em> to Nix functions.</p>
</li>
<li>
<p><code>--argstr</code> <em>name</em> <em>string</em></p>
<p>Pass the string <em>string</em> as the argument <em>name</em> to Nix functions.</p>
</li>
<li>
<p><code>--debugger</code></p>
<p>Start an interactive environment if evaluation fails.</p>
</li>
<li>
<p><code>--eval-store</code> <em>store-url</em></p>
<p>The Nix store to use for evaluations.</p>
</li>
<li>
<p><code>--impure</code></p>
<p>Allow access to mutable paths and repositories.</p>
</li>
<li>
<p><code>--include</code> / <code>-I</code> <em>path</em></p>
<p>Add <em>path</em> to the Nix search path. The Nix search path is
initialized from the colon-separated <a href="command-ref/new-cli/../../command-ref/env-common.html#env-NIX_PATH"><code>NIX_PATH</code></a> environment
variable, and is used to look up the location of Nix expressions using <a href="command-ref/new-cli/../../language/values.html#type-path">paths</a> enclosed in angle
brackets (i.e., <code>&lt;nixpkgs&gt;</code>).</p>
<p>For instance, passing</p>
<pre><code>-I /home/eelco/Dev
-I /etc/nixos
</code></pre>
<p>will cause Nix to look for paths relative to <code>/home/eelco/Dev</code> and
<code>/etc/nixos</code>, in that order. This is equivalent to setting the
<code>NIX_PATH</code> environment variable to</p>
<pre><code>/home/eelco/Dev:/etc/nixos
</code></pre>
<p>It is also possible to match paths against a prefix. For example,
passing</p>
<pre><code>-I nixpkgs=/home/eelco/Dev/nixpkgs-branch
-I /etc/nixos
</code></pre>
<p>will cause Nix to search for <code>&lt;nixpkgs/path&gt;</code> in
<code>/home/eelco/Dev/nixpkgs-branch/path</code> and <code>/etc/nixos/nixpkgs/path</code>.</p>
<p>If a path in the Nix search path starts with <code>http://</code> or <code>https://</code>,
it is interpreted as the URL of a tarball that will be downloaded and
unpacked to a temporary location. The tarball must consist of a single
top-level directory. For example, passing</p>
<pre><code>-I nixpkgs=https://github.com/NixOS/nixpkgs/archive/master.tar.gz
</code></pre>
<p>tells Nix to download and use the current contents of the <code>master</code>
branch in the <code>nixpkgs</code> repository.</p>
<p>The URLs of the tarballs from the official <code>nixos.org</code> channels
(see <a href="command-ref/new-cli/../nix-channel.html">the manual page for <code>nix-channel</code></a>) can be
abbreviated as <code>channel:&lt;channel-name&gt;</code>. For instance, the
following two flags are equivalent:</p>
<pre><code>-I nixpkgs=channel:nixos-21.05
-I nixpkgs=https://nixos.org/channels/nixos-21.05/nixexprs.tar.xz
</code></pre>
<p>You can also fetch source trees using <a href="command-ref/new-cli/./nix3-flake.html#url-like-syntax">flake URLs</a> and add them to the
search path. For instance,</p>
<pre><code>-I nixpkgs=flake:nixpkgs
</code></pre>
<p>specifies that the prefix <code>nixpkgs</code> shall refer to the source tree
downloaded from the <code>nixpkgs</code> entry in the flake registry. Similarly,</p>
<pre><code>-I nixpkgs=flake:github:NixOS/nixpkgs/nixos-22.05
</code></pre>
<p>makes <code>&lt;nixpkgs&gt;</code> refer to a particular branch of the
<code>NixOS/nixpkgs</code> repository on GitHub.</p>
</li>
<li>
<p><code>--override-flake</code> <em>original-ref</em> <em>resolved-ref</em></p>
<p>Override the flake registries, redirecting <em>original-ref</em> to <em>resolved-ref</em>.</p>
</li>
</ul>
<p><strong>Common flake-related options:</strong></p>
<ul>
<li>
<p><code>--commit-lock-file</code></p>
<p>Commit changes to the flake's lock file.</p>
</li>
<li>
<p><code>--inputs-from</code> <em>flake-url</em></p>
<p>Use the inputs of the specified flake as registry entries.</p>
</li>
<li>
<p><code>--no-registries</code></p>
<p>Don't allow lookups in the flake registries. This option is deprecated; use <code>--no-use-registries</code>.</p>
</li>
<li>
<p><code>--no-update-lock-file</code></p>
<p>Do not allow any updates to the flake's lock file.</p>
</li>
<li>
<p><code>--no-write-lock-file</code></p>
<p>Do not write the flake's newly generated lock file.</p>
</li>
<li>
<p><code>--override-input</code> <em>input-path</em> <em>flake-url</em></p>
<p>Override a specific flake input (e.g. <code>dwarffs/nixpkgs</code>). This implies <code>--no-write-lock-file</code>.</p>
</li>
<li>
<p><code>--recreate-lock-file</code></p>
<p>Recreate the flake's lock file from scratch.</p>
</li>
<li>
<p><code>--update-input</code> <em>input-path</em></p>
<p>Update a specific flake input (ignoring its previous entry in the lock file).</p>
</li>
</ul>
<p><strong>Logging-related options:</strong></p>
<ul>
<li>
<p><code>--debug</code></p>
<p>Set the logging verbosity level to 'debug'.</p>
</li>
<li>
<p><code>--log-format</code> <em>format</em></p>
<p>Set the format of log output; one of <code>raw</code>, <code>internal-json</code>, <code>bar</code> or <code>bar-with-logs</code>.</p>
</li>
<li>
<p><code>--print-build-logs</code> / <code>-L</code></p>
<p>Print full build logs on standard error.</p>
</li>
<li>
<p><code>--quiet</code></p>
<p>Decrease the logging verbosity level.</p>
</li>
<li>
<p><code>--verbose</code> / <code>-v</code></p>
<p>Increase the logging verbosity level.</p>
</li>
</ul>
<p><strong>Miscellaneous global options:</strong></p>
<ul>
<li>
<p><code>--help</code></p>
<p>Show usage information.</p>
</li>
<li>
<p><code>--offline</code></p>
<p>Disable substituters and consider all previously downloaded files up-to-date.</p>
</li>
<li>
<p><code>--option</code> <em>name</em> <em>value</em></p>
<p>Set the Nix configuration setting <em>name</em> to <em>value</em> (overriding <code>nix.conf</code>).</p>
</li>
<li>
<p><code>--refresh</code></p>
<p>Consider all previously downloaded files out-of-date.</p>
</li>
<li>
<p><code>--version</code></p>
<p>Show version information.</p>
</li>
</ul>
<p><strong>Options that change the interpretation of installables:</strong></p>
<ul>
<li>
<p><code>--derivation</code></p>
<p>Operate on the <a href="command-ref/new-cli/../../glossary.html#gloss-store-derivation">store derivation</a> rather than its outputs.</p>
</li>
<li>
<p><code>--expr</code> <em>expr</em></p>
<p>Interpret installables as attribute paths relative to the Nix expression <em>expr</em>.</p>
</li>
<li>
<p><code>--file</code> / <code>-f</code> <em>file</em></p>
<p>Interpret installables as attribute paths relative to the Nix expression stored in <em>file</em>. If <em>file</em> is the character -, then a Nix expression will be read from standard input. Implies <code>--impure</code>.</p>
</li>
</ul>
<p><strong>Options to override configuration settings:</strong></p>
<ul>
<li>
<p><code>--accept-flake-config</code></p>
<p>Enable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--access-tokens</code> <em>value</em></p>
<p>Set the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--allow-dirty</code></p>
<p>Enable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--allow-import-from-derivation</code></p>
<p>Enable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--allow-new-privileges</code></p>
<p>Enable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--allow-symlinked-store</code></p>
<p>Enable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--allow-unsafe-native-code-during-evaluation</code></p>
<p>Enable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--allowed-impure-host-deps</code> <em>value</em></p>
<p>Set the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--allowed-uris</code> <em>value</em></p>
<p>Set the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--allowed-users</code> <em>value</em></p>
<p>Set the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--auto-allocate-uids</code></p>
<p>Enable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--auto-optimise-store</code></p>
<p>Enable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt</code> <em>value</em></p>
<p>Set the <code>bash-prompt</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-prefix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-prefix</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-suffix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-suffix</code> setting.</p>
</li>
<li>
<p><code>--build-hook</code> <em>value</em></p>
<p>Set the <code>build-hook</code> setting.</p>
</li>
<li>
<p><code>--build-poll-interval</code> <em>value</em></p>
<p>Set the <code>build-poll-interval</code> setting.</p>
</li>
<li>
<p><code>--build-users-group</code> <em>value</em></p>
<p>Set the <code>build-users-group</code> setting.</p>
</li>
<li>
<p><code>--builders</code> <em>value</em></p>
<p>Set the <code>builders</code> setting.</p>
</li>
<li>
<p><code>--builders-use-substitutes</code></p>
<p>Enable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--commit-lockfile-summary</code> <em>value</em></p>
<p>Set the <code>commit-lockfile-summary</code> setting.</p>
</li>
<li>
<p><code>--compress-build-log</code></p>
<p>Enable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--connect-timeout</code> <em>value</em></p>
<p>Set the <code>connect-timeout</code> setting.</p>
</li>
<li>
<p><code>--cores</code> <em>value</em></p>
<p>Set the <code>cores</code> setting.</p>
</li>
<li>
<p><code>--diff-hook</code> <em>value</em></p>
<p>Set the <code>diff-hook</code> setting.</p>
</li>
<li>
<p><code>--download-attempts</code> <em>value</em></p>
<p>Set the <code>download-attempts</code> setting.</p>
</li>
<li>
<p><code>--download-speed</code> <em>value</em></p>
<p>Set the <code>download-speed</code> setting.</p>
</li>
<li>
<p><code>--eval-cache</code></p>
<p>Enable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--experimental-features</code> <em>value</em></p>
<p>Set the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-access-tokens</code> <em>value</em></p>
<p>Append to the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-impure-host-deps</code> <em>value</em></p>
<p>Append to the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-uris</code> <em>value</em></p>
<p>Append to the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-users</code> <em>value</em></p>
<p>Append to the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--extra-experimental-features</code> <em>value</em></p>
<p>Append to the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-extra-platforms</code> <em>value</em></p>
<p>Append to the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-hashed-mirrors</code> <em>value</em></p>
<p>Append to the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--extra-ignored-acls</code> <em>value</em></p>
<p>Append to the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--extra-nix-path</code> <em>value</em></p>
<p>Append to the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--extra-platforms</code> <em>value</em></p>
<p>Set the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-plugin-files</code> <em>value</em></p>
<p>Append to the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--extra-sandbox-paths</code> <em>value</em></p>
<p>Append to the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--extra-secret-key-files</code> <em>value</em></p>
<p>Append to the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--extra-substituters</code> <em>value</em></p>
<p>Append to the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-system-features</code> <em>value</em></p>
<p>Append to the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-public-keys</code> <em>value</em></p>
<p>Append to the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-substituters</code> <em>value</em></p>
<p>Append to the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-users</code> <em>value</em></p>
<p>Append to the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--fallback</code></p>
<p>Enable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--filter-syscalls</code></p>
<p>Enable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--flake-registry</code> <em>value</em></p>
<p>Set the <code>flake-registry</code> setting.</p>
</li>
<li>
<p><code>--fsync-metadata</code></p>
<p>Enable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--gc-reserved-space</code> <em>value</em></p>
<p>Set the <code>gc-reserved-space</code> setting.</p>
</li>
<li>
<p><code>--hashed-mirrors</code> <em>value</em></p>
<p>Set the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--http-connections</code> <em>value</em></p>
<p>Set the <code>http-connections</code> setting.</p>
</li>
<li>
<p><code>--http2</code></p>
<p>Enable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--id-count</code> <em>value</em></p>
<p>Set the <code>id-count</code> setting.</p>
</li>
<li>
<p><code>--ignore-try</code></p>
<p>Enable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--ignored-acls</code> <em>value</em></p>
<p>Set the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--impersonate-linux-26</code></p>
<p>Enable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--keep-build-log</code></p>
<p>Enable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--keep-derivations</code></p>
<p>Enable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-env-derivations</code></p>
<p>Enable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-failed</code></p>
<p>Enable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--keep-going</code></p>
<p>Enable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--keep-outputs</code></p>
<p>Enable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--log-lines</code> <em>value</em></p>
<p>Set the <code>log-lines</code> setting.</p>
</li>
<li>
<p><code>--max-build-log-size</code> <em>value</em></p>
<p>Set the <code>max-build-log-size</code> setting.</p>
</li>
<li>
<p><code>--max-free</code> <em>value</em></p>
<p>Set the <code>max-free</code> setting.</p>
</li>
<li>
<p><code>--max-jobs</code> <em>value</em></p>
<p>Set the <code>max-jobs</code> setting.</p>
</li>
<li>
<p><code>--max-silent-time</code> <em>value</em></p>
<p>Set the <code>max-silent-time</code> setting.</p>
</li>
<li>
<p><code>--min-free</code> <em>value</em></p>
<p>Set the <code>min-free</code> setting.</p>
</li>
<li>
<p><code>--min-free-check-interval</code> <em>value</em></p>
<p>Set the <code>min-free-check-interval</code> setting.</p>
</li>
<li>
<p><code>--nar-buffer-size</code> <em>value</em></p>
<p>Set the <code>nar-buffer-size</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-negative-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-negative-ttl</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-positive-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-positive-ttl</code> setting.</p>
</li>
<li>
<p><code>--netrc-file</code> <em>value</em></p>
<p>Set the <code>netrc-file</code> setting.</p>
</li>
<li>
<p><code>--nix-path</code> <em>value</em></p>
<p>Set the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--no-accept-flake-config</code></p>
<p>Disable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--no-allow-dirty</code></p>
<p>Disable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--no-allow-import-from-derivation</code></p>
<p>Disable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--no-allow-new-privileges</code></p>
<p>Disable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--no-allow-symlinked-store</code></p>
<p>Disable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--no-allow-unsafe-native-code-during-evaluation</code></p>
<p>Disable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--no-auto-allocate-uids</code></p>
<p>Disable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--no-auto-optimise-store</code></p>
<p>Disable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--no-builders-use-substitutes</code></p>
<p>Disable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--no-compress-build-log</code></p>
<p>Disable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-eval-cache</code></p>
<p>Disable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--no-fallback</code></p>
<p>Disable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--no-filter-syscalls</code></p>
<p>Disable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--no-fsync-metadata</code></p>
<p>Disable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--no-http2</code></p>
<p>Disable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--no-ignore-try</code></p>
<p>Disable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--no-impersonate-linux-26</code></p>
<p>Disable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--no-keep-build-log</code></p>
<p>Disable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-keep-derivations</code></p>
<p>Disable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-env-derivations</code></p>
<p>Disable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-failed</code></p>
<p>Disable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--no-keep-going</code></p>
<p>Disable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--no-keep-outputs</code></p>
<p>Disable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--no-preallocate-contents</code></p>
<p>Disable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--no-print-missing</code></p>
<p>Disable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--no-pure-eval</code></p>
<p>Disable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--no-require-sigs</code></p>
<p>Disable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--no-restrict-eval</code></p>
<p>Disable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--no-run-diff-hook</code></p>
<p>Disable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--no-sandbox</code></p>
<p>Disable sandboxing.</p>
</li>
<li>
<p><code>--no-sandbox-fallback</code></p>
<p>Disable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--no-show-trace</code></p>
<p>Disable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--no-substitute</code></p>
<p>Disable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--no-sync-before-registering</code></p>
<p>Disable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--no-trace-function-calls</code></p>
<p>Disable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--no-trace-verbose</code></p>
<p>Disable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--no-use-case-hack</code></p>
<p>Disable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--no-use-cgroups</code></p>
<p>Disable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--no-use-registries</code></p>
<p>Disable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--no-use-sqlite-wal</code></p>
<p>Disable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--no-warn-dirty</code></p>
<p>Disable the <code>warn-dirty</code> setting.</p>
</li>
<li>
<p><code>--plugin-files</code> <em>value</em></p>
<p>Set the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--post-build-hook</code> <em>value</em></p>
<p>Set the <code>post-build-hook</code> setting.</p>
</li>
<li>
<p><code>--pre-build-hook</code> <em>value</em></p>
<p>Set the <code>pre-build-hook</code> setting.</p>
</li>
<li>
<p><code>--preallocate-contents</code></p>
<p>Enable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--print-missing</code></p>
<p>Enable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--pure-eval</code></p>
<p>Enable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--relaxed-sandbox</code></p>
<p>Enable sandboxing, but allow builds to disable it.</p>
</li>
<li>
<p><code>--require-sigs</code></p>
<p>Enable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--restrict-eval</code></p>
<p>Enable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--run-diff-hook</code></p>
<p>Enable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--sandbox</code></p>
<p>Enable sandboxing.</p>
</li>
<li>
<p><code>--sandbox-build-dir</code> <em>value</em></p>
<p>Set the <code>sandbox-build-dir</code> setting.</p>
</li>
<li>
<p><code>--sandbox-dev-shm-size</code> <em>value</em></p>
<p>Set the <code>sandbox-dev-shm-size</code> setting.</p>
</li>
<li>
<p><code>--sandbox-fallback</code></p>
<p>Enable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--sandbox-paths</code> <em>value</em></p>
<p>Set the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--secret-key-files</code> <em>value</em></p>
<p>Set the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--show-trace</code></p>
<p>Enable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--stalled-download-timeout</code> <em>value</em></p>
<p>Set the <code>stalled-download-timeout</code> setting.</p>
</li>
<li>
<p><code>--start-id</code> <em>value</em></p>
<p>Set the <code>start-id</code> setting.</p>
</li>
<li>
<p><code>--store</code> <em>value</em></p>
<p>Set the <code>store</code> setting.</p>
</li>
<li>
<p><code>--substitute</code></p>
<p>Enable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--substituters</code> <em>value</em></p>
<p>Set the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--sync-before-registering</code></p>
<p>Enable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--system</code> <em>value</em></p>
<p>Set the <code>system</code> setting.</p>
</li>
<li>
<p><code>--system-features</code> <em>value</em></p>
<p>Set the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--tarball-ttl</code> <em>value</em></p>
<p>Set the <code>tarball-ttl</code> setting.</p>
</li>
<li>
<p><code>--timeout</code> <em>value</em></p>
<p>Set the <code>timeout</code> setting.</p>
</li>
<li>
<p><code>--trace-function-calls</code></p>
<p>Enable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--trace-verbose</code></p>
<p>Enable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--trusted-public-keys</code> <em>value</em></p>
<p>Set the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--trusted-substituters</code> <em>value</em></p>
<p>Set the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--trusted-users</code> <em>value</em></p>
<p>Set the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--use-case-hack</code></p>
<p>Enable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--use-cgroups</code></p>
<p>Enable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--use-registries</code></p>
<p>Enable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--use-sqlite-wal</code></p>
<p>Enable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--user-agent-suffix</code> <em>value</em></p>
<p>Set the <code>user-agent-suffix</code> setting.</p>
</li>
<li>
<p><code>--warn-dirty</code></p>
<p>Enable the <code>warn-dirty</code> setting.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p><strong>Warning</strong> <br />
This program is <strong>experimental</strong> and its interface is subject to change.</p>
</blockquote>
<h1 id="name-52"><a class="header" href="#name-52">Name</a></h1>
<p><code>nix profile</code> - manage Nix profiles</p>
<h1 id="synopsis-83"><a class="header" href="#synopsis-83">Synopsis</a></h1>
<p><code>nix profile</code> [<em>option</em>...] <em>subcommand</em></p>
<p>where <em>subcommand</em> is one of the following:</p>
<ul>
<li><a href="command-ref/new-cli/./nix3-profile-diff-closures.html"><code>nix profile diff-closures</code></a> - show the closure difference between each version of a profile</li>
<li><a href="command-ref/new-cli/./nix3-profile-history.html"><code>nix profile history</code></a> - show all versions of a profile</li>
<li><a href="command-ref/new-cli/./nix3-profile-install.html"><code>nix profile install</code></a> - install a package into a profile</li>
<li><a href="command-ref/new-cli/./nix3-profile-list.html"><code>nix profile list</code></a> - list installed packages</li>
<li><a href="command-ref/new-cli/./nix3-profile-remove.html"><code>nix profile remove</code></a> - remove packages from a profile</li>
<li><a href="command-ref/new-cli/./nix3-profile-rollback.html"><code>nix profile rollback</code></a> - roll back to the previous version or a specified version of a profile</li>
<li><a href="command-ref/new-cli/./nix3-profile-upgrade.html"><code>nix profile upgrade</code></a> - upgrade packages using their most recent flake</li>
<li><a href="command-ref/new-cli/./nix3-profile-wipe-history.html"><code>nix profile wipe-history</code></a> - delete non-current versions of a profile</li>
</ul>
<h1 id="description-72"><a class="header" href="#description-72">Description</a></h1>
<p><code>nix profile</code> allows you to create and manage <em>Nix profiles</em>. A Nix
profile is a set of packages that can be installed and upgraded
independently from each other. Nix profiles are versioned, allowing
them to be rolled back easily.</p>
<h1 id="default-profile"><a class="header" href="#default-profile">Default profile</a></h1>
<p>The default profile used by <code>nix profile</code> is <code>$HOME/.nix-profile</code>,
which, if it does not exist, is created as a symlink to
<code>/nix/var/nix/profiles/default</code> if Nix is invoked by the
<code>root</code> user, or <code>/nix/var/nix/profiles/per-user/</code><em>username</em> otherwise.</p>
<p>You can specify another profile location using <code>--profile</code> <em>path</em>.</p>
<h1 id="filesystem-layout"><a class="header" href="#filesystem-layout">Filesystem layout</a></h1>
<p>Profiles are versioned as follows. When using profile <em>path</em>, <em>path</em>
is a symlink to <em>path</em><code>-</code><em>N</em>, where <em>N</em> is the current <em>version</em> of
the profile. In turn, <em>path</em><code>-</code><em>N</em> is a symlink to a path in the Nix
store. For example:</p>
<pre><code class="language-console">$ ls -l /nix/var/nix/profiles/per-user/alice/profile*
lrwxrwxrwx 1 alice users 14 Nov 25 14:35 /nix/var/nix/profiles/per-user/alice/profile -&gt; profile-7-link
lrwxrwxrwx 1 alice users 51 Oct 28 16:18 /nix/var/nix/profiles/per-user/alice/profile-5-link -&gt; /nix/store/q69xad13ghpf7ir87h0b2gd28lafjj1j-profile
lrwxrwxrwx 1 alice users 51 Oct 29 13:20 /nix/var/nix/profiles/per-user/alice/profile-6-link -&gt; /nix/store/6bvhpysd7vwz7k3b0pndn7ifi5xr32dg-profile
lrwxrwxrwx 1 alice users 51 Nov 25 14:35 /nix/var/nix/profiles/per-user/alice/profile-7-link -&gt; /nix/store/mp0x6xnsg0b8qhswy6riqvimai4gm677-profile
</code></pre>
<p>Each of these symlinks is a root for the Nix garbage collector.</p>
<p>The contents of the store path corresponding to each version of the
profile is a tree of symlinks to the files of the installed packages,
e.g.</p>
<pre><code class="language-console">$ ll -R /nix/var/nix/profiles/per-user/eelco/profile-7-link/
/nix/var/nix/profiles/per-user/eelco/profile-7-link/:
total 20
dr-xr-xr-x 2 root root 4096 Jan  1  1970 bin
-r--r--r-- 2 root root 1402 Jan  1  1970 manifest.json
dr-xr-xr-x 4 root root 4096 Jan  1  1970 share

/nix/var/nix/profiles/per-user/eelco/profile-7-link/bin:
total 20
lrwxrwxrwx 5 root root 79 Jan  1  1970 chromium -&gt; /nix/store/ijm5k0zqisvkdwjkc77mb9qzb35xfi4m-chromium-86.0.4240.111/bin/chromium
lrwxrwxrwx 7 root root 87 Jan  1  1970 spotify -&gt; /nix/store/w9182874m1bl56smps3m5zjj36jhp3rn-spotify-1.1.26.501.gbe11e53b-15/bin/spotify
lrwxrwxrwx 3 root root 79 Jan  1  1970 zoom-us -&gt; /nix/store/wbhg2ga8f3h87s9h5k0slxk0m81m4cxl-zoom-us-5.3.469451.0927/bin/zoom-us

/nix/var/nix/profiles/per-user/eelco/profile-7-link/share/applications:
total 12
lrwxrwxrwx 4 root root 120 Jan  1  1970 chromium-browser.desktop -&gt; /nix/store/4cf803y4vzfm3gyk3vzhzb2327v0kl8a-chromium-unwrapped-86.0.4240.111/share/applications/chromium-browser.desktop
lrwxrwxrwx 7 root root 110 Jan  1  1970 spotify.desktop -&gt; /nix/store/w9182874m1bl56smps3m5zjj36jhp3rn-spotify-1.1.26.501.gbe11e53b-15/share/applications/spotify.desktop
lrwxrwxrwx 3 root root 107 Jan  1  1970 us.zoom.Zoom.desktop -&gt; /nix/store/wbhg2ga8f3h87s9h5k0slxk0m81m4cxl-zoom-us-5.3.469451.0927/share/applications/us.zoom.Zoom.desktop

…
</code></pre>
<p>The file <code>manifest.json</code> records the provenance of the packages that
are installed in this version of the profile. It looks like this:</p>
<pre><code class="language-json">{
  &quot;version&quot;: 1,
  &quot;elements&quot;: [
    {
      &quot;active&quot;: true,
      &quot;attrPath&quot;: &quot;legacyPackages.x86_64-linux.zoom-us&quot;,
      &quot;originalUrl&quot;: &quot;flake:nixpkgs&quot;,
      &quot;storePaths&quot;: [
        &quot;/nix/store/wbhg2ga8f3h87s9h5k0slxk0m81m4cxl-zoom-us-5.3.469451.0927&quot;
      ],
      &quot;uri&quot;: &quot;github:NixOS/nixpkgs/13d0c311e3ae923a00f734b43fd1d35b47d8943a&quot;
    },
    …
  ]
}
</code></pre>
<p>Each object in the array <code>elements</code> denotes an installed package and
has the following fields:</p>
<ul>
<li>
<p><code>originalUrl</code>: The <a href="command-ref/new-cli/./nix3-flake.html">flake reference</a> specified by
the user at the time of installation (e.g. <code>nixpkgs</code>). This is also
the flake reference that will be used by <code>nix profile upgrade</code>.</p>
</li>
<li>
<p><code>uri</code>: The locked flake reference to which <code>originalUrl</code> resolved.</p>
</li>
<li>
<p><code>attrPath</code>: The flake output attribute that provided this
package. Note that this is not necessarily the attribute that the
user specified, but the one resulting from applying the default
attribute paths and prefixes; for instance, <code>hello</code> might resolve to
<code>packages.x86_64-linux.hello</code> and the empty string to
<code>packages.x86_64-linux.default</code>.</p>
</li>
<li>
<p><code>storePath</code>: The paths in the Nix store containing the package.</p>
</li>
<li>
<p><code>active</code>: Whether the profile contains symlinks to the files of this
package. If set to false, the package is kept in the Nix store, but
is not &quot;visible&quot; in the profile's symlink tree.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p><strong>Warning</strong> <br />
This program is <strong>experimental</strong> and its interface is subject to change.</p>
</blockquote>
<h1 id="name-53"><a class="header" href="#name-53">Name</a></h1>
<p><code>nix profile diff-closures</code> - show the closure difference between each version of a profile</p>
<h1 id="synopsis-84"><a class="header" href="#synopsis-84">Synopsis</a></h1>
<p><code>nix profile diff-closures</code> [<em>option</em>...] </p>
<h1 id="examples-53"><a class="header" href="#examples-53">Examples</a></h1>
<ul>
<li>
<p>Show what changed between each version of the NixOS system
profile:</p>
<pre><code class="language-console"># nix profile diff-closures --profile /nix/var/nix/profiles/system
Version 13 -&gt; 14:
  acpi-call: 2020-04-07-5.8.13 → 2020-04-07-5.8.14
  aws-sdk-cpp: -6723.1 KiB
  …

Version 14 -&gt; 15:
  acpi-call: 2020-04-07-5.8.14 → 2020-04-07-5.8.16
  attica: -996.2 KiB
  breeze-icons: -78713.5 KiB
  brotli: 1.0.7 → 1.0.9, +44.2 KiB
</code></pre>
</li>
</ul>
<h1 id="description-73"><a class="header" href="#description-73">Description</a></h1>
<p>This command shows the difference between the closures of subsequent
versions of a profile. See <a href="command-ref/new-cli/nix3-store-diff-closures.html"><code>nix store diff-closures</code></a> for details.</p>
<h1 id="options-37"><a class="header" href="#options-37">Options</a></h1>
<ul>
<li>
<p><code>--profile</code> <em>path</em></p>
<p>The profile to operate on.</p>
</li>
</ul>
<p><strong>Logging-related options:</strong></p>
<ul>
<li>
<p><code>--debug</code></p>
<p>Set the logging verbosity level to 'debug'.</p>
</li>
<li>
<p><code>--log-format</code> <em>format</em></p>
<p>Set the format of log output; one of <code>raw</code>, <code>internal-json</code>, <code>bar</code> or <code>bar-with-logs</code>.</p>
</li>
<li>
<p><code>--print-build-logs</code> / <code>-L</code></p>
<p>Print full build logs on standard error.</p>
</li>
<li>
<p><code>--quiet</code></p>
<p>Decrease the logging verbosity level.</p>
</li>
<li>
<p><code>--verbose</code> / <code>-v</code></p>
<p>Increase the logging verbosity level.</p>
</li>
</ul>
<p><strong>Miscellaneous global options:</strong></p>
<ul>
<li>
<p><code>--help</code></p>
<p>Show usage information.</p>
</li>
<li>
<p><code>--offline</code></p>
<p>Disable substituters and consider all previously downloaded files up-to-date.</p>
</li>
<li>
<p><code>--option</code> <em>name</em> <em>value</em></p>
<p>Set the Nix configuration setting <em>name</em> to <em>value</em> (overriding <code>nix.conf</code>).</p>
</li>
<li>
<p><code>--refresh</code></p>
<p>Consider all previously downloaded files out-of-date.</p>
</li>
<li>
<p><code>--version</code></p>
<p>Show version information.</p>
</li>
</ul>
<p><strong>Options to override configuration settings:</strong></p>
<ul>
<li>
<p><code>--accept-flake-config</code></p>
<p>Enable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--access-tokens</code> <em>value</em></p>
<p>Set the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--allow-dirty</code></p>
<p>Enable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--allow-import-from-derivation</code></p>
<p>Enable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--allow-new-privileges</code></p>
<p>Enable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--allow-symlinked-store</code></p>
<p>Enable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--allow-unsafe-native-code-during-evaluation</code></p>
<p>Enable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--allowed-impure-host-deps</code> <em>value</em></p>
<p>Set the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--allowed-uris</code> <em>value</em></p>
<p>Set the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--allowed-users</code> <em>value</em></p>
<p>Set the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--auto-allocate-uids</code></p>
<p>Enable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--auto-optimise-store</code></p>
<p>Enable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt</code> <em>value</em></p>
<p>Set the <code>bash-prompt</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-prefix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-prefix</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-suffix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-suffix</code> setting.</p>
</li>
<li>
<p><code>--build-hook</code> <em>value</em></p>
<p>Set the <code>build-hook</code> setting.</p>
</li>
<li>
<p><code>--build-poll-interval</code> <em>value</em></p>
<p>Set the <code>build-poll-interval</code> setting.</p>
</li>
<li>
<p><code>--build-users-group</code> <em>value</em></p>
<p>Set the <code>build-users-group</code> setting.</p>
</li>
<li>
<p><code>--builders</code> <em>value</em></p>
<p>Set the <code>builders</code> setting.</p>
</li>
<li>
<p><code>--builders-use-substitutes</code></p>
<p>Enable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--commit-lockfile-summary</code> <em>value</em></p>
<p>Set the <code>commit-lockfile-summary</code> setting.</p>
</li>
<li>
<p><code>--compress-build-log</code></p>
<p>Enable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--connect-timeout</code> <em>value</em></p>
<p>Set the <code>connect-timeout</code> setting.</p>
</li>
<li>
<p><code>--cores</code> <em>value</em></p>
<p>Set the <code>cores</code> setting.</p>
</li>
<li>
<p><code>--diff-hook</code> <em>value</em></p>
<p>Set the <code>diff-hook</code> setting.</p>
</li>
<li>
<p><code>--download-attempts</code> <em>value</em></p>
<p>Set the <code>download-attempts</code> setting.</p>
</li>
<li>
<p><code>--download-speed</code> <em>value</em></p>
<p>Set the <code>download-speed</code> setting.</p>
</li>
<li>
<p><code>--eval-cache</code></p>
<p>Enable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--experimental-features</code> <em>value</em></p>
<p>Set the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-access-tokens</code> <em>value</em></p>
<p>Append to the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-impure-host-deps</code> <em>value</em></p>
<p>Append to the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-uris</code> <em>value</em></p>
<p>Append to the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-users</code> <em>value</em></p>
<p>Append to the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--extra-experimental-features</code> <em>value</em></p>
<p>Append to the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-extra-platforms</code> <em>value</em></p>
<p>Append to the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-hashed-mirrors</code> <em>value</em></p>
<p>Append to the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--extra-ignored-acls</code> <em>value</em></p>
<p>Append to the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--extra-nix-path</code> <em>value</em></p>
<p>Append to the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--extra-platforms</code> <em>value</em></p>
<p>Set the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-plugin-files</code> <em>value</em></p>
<p>Append to the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--extra-sandbox-paths</code> <em>value</em></p>
<p>Append to the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--extra-secret-key-files</code> <em>value</em></p>
<p>Append to the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--extra-substituters</code> <em>value</em></p>
<p>Append to the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-system-features</code> <em>value</em></p>
<p>Append to the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-public-keys</code> <em>value</em></p>
<p>Append to the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-substituters</code> <em>value</em></p>
<p>Append to the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-users</code> <em>value</em></p>
<p>Append to the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--fallback</code></p>
<p>Enable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--filter-syscalls</code></p>
<p>Enable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--flake-registry</code> <em>value</em></p>
<p>Set the <code>flake-registry</code> setting.</p>
</li>
<li>
<p><code>--fsync-metadata</code></p>
<p>Enable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--gc-reserved-space</code> <em>value</em></p>
<p>Set the <code>gc-reserved-space</code> setting.</p>
</li>
<li>
<p><code>--hashed-mirrors</code> <em>value</em></p>
<p>Set the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--http-connections</code> <em>value</em></p>
<p>Set the <code>http-connections</code> setting.</p>
</li>
<li>
<p><code>--http2</code></p>
<p>Enable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--id-count</code> <em>value</em></p>
<p>Set the <code>id-count</code> setting.</p>
</li>
<li>
<p><code>--ignore-try</code></p>
<p>Enable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--ignored-acls</code> <em>value</em></p>
<p>Set the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--impersonate-linux-26</code></p>
<p>Enable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--keep-build-log</code></p>
<p>Enable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--keep-derivations</code></p>
<p>Enable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-env-derivations</code></p>
<p>Enable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-failed</code></p>
<p>Enable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--keep-going</code></p>
<p>Enable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--keep-outputs</code></p>
<p>Enable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--log-lines</code> <em>value</em></p>
<p>Set the <code>log-lines</code> setting.</p>
</li>
<li>
<p><code>--max-build-log-size</code> <em>value</em></p>
<p>Set the <code>max-build-log-size</code> setting.</p>
</li>
<li>
<p><code>--max-free</code> <em>value</em></p>
<p>Set the <code>max-free</code> setting.</p>
</li>
<li>
<p><code>--max-jobs</code> <em>value</em></p>
<p>Set the <code>max-jobs</code> setting.</p>
</li>
<li>
<p><code>--max-silent-time</code> <em>value</em></p>
<p>Set the <code>max-silent-time</code> setting.</p>
</li>
<li>
<p><code>--min-free</code> <em>value</em></p>
<p>Set the <code>min-free</code> setting.</p>
</li>
<li>
<p><code>--min-free-check-interval</code> <em>value</em></p>
<p>Set the <code>min-free-check-interval</code> setting.</p>
</li>
<li>
<p><code>--nar-buffer-size</code> <em>value</em></p>
<p>Set the <code>nar-buffer-size</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-negative-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-negative-ttl</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-positive-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-positive-ttl</code> setting.</p>
</li>
<li>
<p><code>--netrc-file</code> <em>value</em></p>
<p>Set the <code>netrc-file</code> setting.</p>
</li>
<li>
<p><code>--nix-path</code> <em>value</em></p>
<p>Set the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--no-accept-flake-config</code></p>
<p>Disable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--no-allow-dirty</code></p>
<p>Disable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--no-allow-import-from-derivation</code></p>
<p>Disable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--no-allow-new-privileges</code></p>
<p>Disable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--no-allow-symlinked-store</code></p>
<p>Disable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--no-allow-unsafe-native-code-during-evaluation</code></p>
<p>Disable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--no-auto-allocate-uids</code></p>
<p>Disable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--no-auto-optimise-store</code></p>
<p>Disable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--no-builders-use-substitutes</code></p>
<p>Disable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--no-compress-build-log</code></p>
<p>Disable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-eval-cache</code></p>
<p>Disable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--no-fallback</code></p>
<p>Disable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--no-filter-syscalls</code></p>
<p>Disable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--no-fsync-metadata</code></p>
<p>Disable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--no-http2</code></p>
<p>Disable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--no-ignore-try</code></p>
<p>Disable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--no-impersonate-linux-26</code></p>
<p>Disable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--no-keep-build-log</code></p>
<p>Disable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-keep-derivations</code></p>
<p>Disable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-env-derivations</code></p>
<p>Disable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-failed</code></p>
<p>Disable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--no-keep-going</code></p>
<p>Disable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--no-keep-outputs</code></p>
<p>Disable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--no-preallocate-contents</code></p>
<p>Disable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--no-print-missing</code></p>
<p>Disable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--no-pure-eval</code></p>
<p>Disable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--no-require-sigs</code></p>
<p>Disable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--no-restrict-eval</code></p>
<p>Disable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--no-run-diff-hook</code></p>
<p>Disable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--no-sandbox</code></p>
<p>Disable sandboxing.</p>
</li>
<li>
<p><code>--no-sandbox-fallback</code></p>
<p>Disable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--no-show-trace</code></p>
<p>Disable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--no-substitute</code></p>
<p>Disable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--no-sync-before-registering</code></p>
<p>Disable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--no-trace-function-calls</code></p>
<p>Disable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--no-trace-verbose</code></p>
<p>Disable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--no-use-case-hack</code></p>
<p>Disable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--no-use-cgroups</code></p>
<p>Disable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--no-use-registries</code></p>
<p>Disable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--no-use-sqlite-wal</code></p>
<p>Disable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--no-warn-dirty</code></p>
<p>Disable the <code>warn-dirty</code> setting.</p>
</li>
<li>
<p><code>--plugin-files</code> <em>value</em></p>
<p>Set the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--post-build-hook</code> <em>value</em></p>
<p>Set the <code>post-build-hook</code> setting.</p>
</li>
<li>
<p><code>--pre-build-hook</code> <em>value</em></p>
<p>Set the <code>pre-build-hook</code> setting.</p>
</li>
<li>
<p><code>--preallocate-contents</code></p>
<p>Enable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--print-missing</code></p>
<p>Enable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--pure-eval</code></p>
<p>Enable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--relaxed-sandbox</code></p>
<p>Enable sandboxing, but allow builds to disable it.</p>
</li>
<li>
<p><code>--require-sigs</code></p>
<p>Enable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--restrict-eval</code></p>
<p>Enable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--run-diff-hook</code></p>
<p>Enable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--sandbox</code></p>
<p>Enable sandboxing.</p>
</li>
<li>
<p><code>--sandbox-build-dir</code> <em>value</em></p>
<p>Set the <code>sandbox-build-dir</code> setting.</p>
</li>
<li>
<p><code>--sandbox-dev-shm-size</code> <em>value</em></p>
<p>Set the <code>sandbox-dev-shm-size</code> setting.</p>
</li>
<li>
<p><code>--sandbox-fallback</code></p>
<p>Enable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--sandbox-paths</code> <em>value</em></p>
<p>Set the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--secret-key-files</code> <em>value</em></p>
<p>Set the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--show-trace</code></p>
<p>Enable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--stalled-download-timeout</code> <em>value</em></p>
<p>Set the <code>stalled-download-timeout</code> setting.</p>
</li>
<li>
<p><code>--start-id</code> <em>value</em></p>
<p>Set the <code>start-id</code> setting.</p>
</li>
<li>
<p><code>--store</code> <em>value</em></p>
<p>Set the <code>store</code> setting.</p>
</li>
<li>
<p><code>--substitute</code></p>
<p>Enable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--substituters</code> <em>value</em></p>
<p>Set the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--sync-before-registering</code></p>
<p>Enable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--system</code> <em>value</em></p>
<p>Set the <code>system</code> setting.</p>
</li>
<li>
<p><code>--system-features</code> <em>value</em></p>
<p>Set the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--tarball-ttl</code> <em>value</em></p>
<p>Set the <code>tarball-ttl</code> setting.</p>
</li>
<li>
<p><code>--timeout</code> <em>value</em></p>
<p>Set the <code>timeout</code> setting.</p>
</li>
<li>
<p><code>--trace-function-calls</code></p>
<p>Enable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--trace-verbose</code></p>
<p>Enable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--trusted-public-keys</code> <em>value</em></p>
<p>Set the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--trusted-substituters</code> <em>value</em></p>
<p>Set the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--trusted-users</code> <em>value</em></p>
<p>Set the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--use-case-hack</code></p>
<p>Enable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--use-cgroups</code></p>
<p>Enable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--use-registries</code></p>
<p>Enable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--use-sqlite-wal</code></p>
<p>Enable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--user-agent-suffix</code> <em>value</em></p>
<p>Set the <code>user-agent-suffix</code> setting.</p>
</li>
<li>
<p><code>--warn-dirty</code></p>
<p>Enable the <code>warn-dirty</code> setting.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p><strong>Warning</strong> <br />
This program is <strong>experimental</strong> and its interface is subject to change.</p>
</blockquote>
<h1 id="name-54"><a class="header" href="#name-54">Name</a></h1>
<p><code>nix profile history</code> - show all versions of a profile</p>
<h1 id="synopsis-85"><a class="header" href="#synopsis-85">Synopsis</a></h1>
<p><code>nix profile history</code> [<em>option</em>...] </p>
<h1 id="examples-54"><a class="header" href="#examples-54">Examples</a></h1>
<ul>
<li>
<p>Show the changes between each version of your default profile:</p>
<pre><code class="language-console"># nix profile history
Version 508 (2020-04-10):
  flake:nixpkgs#legacyPackages.x86_64-linux.awscli: ∅ -&gt; 1.17.13

Version 509 (2020-05-16) &lt;- 508:
  flake:nixpkgs#legacyPackages.x86_64-linux.awscli: 1.17.13 -&gt; 1.18.211
</code></pre>
</li>
</ul>
<h1 id="description-74"><a class="header" href="#description-74">Description</a></h1>
<p>This command shows what packages were added, removed or upgraded
between subsequent versions of a profile. It only shows top-level
packages, not dependencies; for that, use <a href="command-ref/new-cli/./nix3-profile-diff-closures.html"><code>nix profile diff-closures</code></a>.</p>
<p>The addition of a package to a profile is denoted by the string <code>∅ -&gt;</code>
<em>version</em>, whereas the removal is denoted by <em>version</em> <code>-&gt; ∅</code>.</p>
<h1 id="options-38"><a class="header" href="#options-38">Options</a></h1>
<ul>
<li>
<p><code>--profile</code> <em>path</em></p>
<p>The profile to operate on.</p>
</li>
</ul>
<p><strong>Common evaluation options:</strong></p>
<ul>
<li>
<p><code>--arg</code> <em>name</em> <em>expr</em></p>
<p>Pass the value <em>expr</em> as the argument <em>name</em> to Nix functions.</p>
</li>
<li>
<p><code>--argstr</code> <em>name</em> <em>string</em></p>
<p>Pass the string <em>string</em> as the argument <em>name</em> to Nix functions.</p>
</li>
<li>
<p><code>--debugger</code></p>
<p>Start an interactive environment if evaluation fails.</p>
</li>
<li>
<p><code>--eval-store</code> <em>store-url</em></p>
<p>The Nix store to use for evaluations.</p>
</li>
<li>
<p><code>--impure</code></p>
<p>Allow access to mutable paths and repositories.</p>
</li>
<li>
<p><code>--include</code> / <code>-I</code> <em>path</em></p>
<p>Add <em>path</em> to the Nix search path. The Nix search path is
initialized from the colon-separated <a href="command-ref/new-cli/../../command-ref/env-common.html#env-NIX_PATH"><code>NIX_PATH</code></a> environment
variable, and is used to look up the location of Nix expressions using <a href="command-ref/new-cli/../../language/values.html#type-path">paths</a> enclosed in angle
brackets (i.e., <code>&lt;nixpkgs&gt;</code>).</p>
<p>For instance, passing</p>
<pre><code>-I /home/eelco/Dev
-I /etc/nixos
</code></pre>
<p>will cause Nix to look for paths relative to <code>/home/eelco/Dev</code> and
<code>/etc/nixos</code>, in that order. This is equivalent to setting the
<code>NIX_PATH</code> environment variable to</p>
<pre><code>/home/eelco/Dev:/etc/nixos
</code></pre>
<p>It is also possible to match paths against a prefix. For example,
passing</p>
<pre><code>-I nixpkgs=/home/eelco/Dev/nixpkgs-branch
-I /etc/nixos
</code></pre>
<p>will cause Nix to search for <code>&lt;nixpkgs/path&gt;</code> in
<code>/home/eelco/Dev/nixpkgs-branch/path</code> and <code>/etc/nixos/nixpkgs/path</code>.</p>
<p>If a path in the Nix search path starts with <code>http://</code> or <code>https://</code>,
it is interpreted as the URL of a tarball that will be downloaded and
unpacked to a temporary location. The tarball must consist of a single
top-level directory. For example, passing</p>
<pre><code>-I nixpkgs=https://github.com/NixOS/nixpkgs/archive/master.tar.gz
</code></pre>
<p>tells Nix to download and use the current contents of the <code>master</code>
branch in the <code>nixpkgs</code> repository.</p>
<p>The URLs of the tarballs from the official <code>nixos.org</code> channels
(see <a href="command-ref/new-cli/../nix-channel.html">the manual page for <code>nix-channel</code></a>) can be
abbreviated as <code>channel:&lt;channel-name&gt;</code>. For instance, the
following two flags are equivalent:</p>
<pre><code>-I nixpkgs=channel:nixos-21.05
-I nixpkgs=https://nixos.org/channels/nixos-21.05/nixexprs.tar.xz
</code></pre>
<p>You can also fetch source trees using <a href="command-ref/new-cli/./nix3-flake.html#url-like-syntax">flake URLs</a> and add them to the
search path. For instance,</p>
<pre><code>-I nixpkgs=flake:nixpkgs
</code></pre>
<p>specifies that the prefix <code>nixpkgs</code> shall refer to the source tree
downloaded from the <code>nixpkgs</code> entry in the flake registry. Similarly,</p>
<pre><code>-I nixpkgs=flake:github:NixOS/nixpkgs/nixos-22.05
</code></pre>
<p>makes <code>&lt;nixpkgs&gt;</code> refer to a particular branch of the
<code>NixOS/nixpkgs</code> repository on GitHub.</p>
</li>
<li>
<p><code>--override-flake</code> <em>original-ref</em> <em>resolved-ref</em></p>
<p>Override the flake registries, redirecting <em>original-ref</em> to <em>resolved-ref</em>.</p>
</li>
</ul>
<p><strong>Logging-related options:</strong></p>
<ul>
<li>
<p><code>--debug</code></p>
<p>Set the logging verbosity level to 'debug'.</p>
</li>
<li>
<p><code>--log-format</code> <em>format</em></p>
<p>Set the format of log output; one of <code>raw</code>, <code>internal-json</code>, <code>bar</code> or <code>bar-with-logs</code>.</p>
</li>
<li>
<p><code>--print-build-logs</code> / <code>-L</code></p>
<p>Print full build logs on standard error.</p>
</li>
<li>
<p><code>--quiet</code></p>
<p>Decrease the logging verbosity level.</p>
</li>
<li>
<p><code>--verbose</code> / <code>-v</code></p>
<p>Increase the logging verbosity level.</p>
</li>
</ul>
<p><strong>Miscellaneous global options:</strong></p>
<ul>
<li>
<p><code>--help</code></p>
<p>Show usage information.</p>
</li>
<li>
<p><code>--offline</code></p>
<p>Disable substituters and consider all previously downloaded files up-to-date.</p>
</li>
<li>
<p><code>--option</code> <em>name</em> <em>value</em></p>
<p>Set the Nix configuration setting <em>name</em> to <em>value</em> (overriding <code>nix.conf</code>).</p>
</li>
<li>
<p><code>--refresh</code></p>
<p>Consider all previously downloaded files out-of-date.</p>
</li>
<li>
<p><code>--version</code></p>
<p>Show version information.</p>
</li>
</ul>
<p><strong>Options to override configuration settings:</strong></p>
<ul>
<li>
<p><code>--accept-flake-config</code></p>
<p>Enable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--access-tokens</code> <em>value</em></p>
<p>Set the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--allow-dirty</code></p>
<p>Enable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--allow-import-from-derivation</code></p>
<p>Enable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--allow-new-privileges</code></p>
<p>Enable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--allow-symlinked-store</code></p>
<p>Enable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--allow-unsafe-native-code-during-evaluation</code></p>
<p>Enable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--allowed-impure-host-deps</code> <em>value</em></p>
<p>Set the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--allowed-uris</code> <em>value</em></p>
<p>Set the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--allowed-users</code> <em>value</em></p>
<p>Set the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--auto-allocate-uids</code></p>
<p>Enable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--auto-optimise-store</code></p>
<p>Enable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt</code> <em>value</em></p>
<p>Set the <code>bash-prompt</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-prefix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-prefix</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-suffix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-suffix</code> setting.</p>
</li>
<li>
<p><code>--build-hook</code> <em>value</em></p>
<p>Set the <code>build-hook</code> setting.</p>
</li>
<li>
<p><code>--build-poll-interval</code> <em>value</em></p>
<p>Set the <code>build-poll-interval</code> setting.</p>
</li>
<li>
<p><code>--build-users-group</code> <em>value</em></p>
<p>Set the <code>build-users-group</code> setting.</p>
</li>
<li>
<p><code>--builders</code> <em>value</em></p>
<p>Set the <code>builders</code> setting.</p>
</li>
<li>
<p><code>--builders-use-substitutes</code></p>
<p>Enable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--commit-lockfile-summary</code> <em>value</em></p>
<p>Set the <code>commit-lockfile-summary</code> setting.</p>
</li>
<li>
<p><code>--compress-build-log</code></p>
<p>Enable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--connect-timeout</code> <em>value</em></p>
<p>Set the <code>connect-timeout</code> setting.</p>
</li>
<li>
<p><code>--cores</code> <em>value</em></p>
<p>Set the <code>cores</code> setting.</p>
</li>
<li>
<p><code>--diff-hook</code> <em>value</em></p>
<p>Set the <code>diff-hook</code> setting.</p>
</li>
<li>
<p><code>--download-attempts</code> <em>value</em></p>
<p>Set the <code>download-attempts</code> setting.</p>
</li>
<li>
<p><code>--download-speed</code> <em>value</em></p>
<p>Set the <code>download-speed</code> setting.</p>
</li>
<li>
<p><code>--eval-cache</code></p>
<p>Enable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--experimental-features</code> <em>value</em></p>
<p>Set the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-access-tokens</code> <em>value</em></p>
<p>Append to the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-impure-host-deps</code> <em>value</em></p>
<p>Append to the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-uris</code> <em>value</em></p>
<p>Append to the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-users</code> <em>value</em></p>
<p>Append to the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--extra-experimental-features</code> <em>value</em></p>
<p>Append to the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-extra-platforms</code> <em>value</em></p>
<p>Append to the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-hashed-mirrors</code> <em>value</em></p>
<p>Append to the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--extra-ignored-acls</code> <em>value</em></p>
<p>Append to the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--extra-nix-path</code> <em>value</em></p>
<p>Append to the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--extra-platforms</code> <em>value</em></p>
<p>Set the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-plugin-files</code> <em>value</em></p>
<p>Append to the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--extra-sandbox-paths</code> <em>value</em></p>
<p>Append to the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--extra-secret-key-files</code> <em>value</em></p>
<p>Append to the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--extra-substituters</code> <em>value</em></p>
<p>Append to the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-system-features</code> <em>value</em></p>
<p>Append to the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-public-keys</code> <em>value</em></p>
<p>Append to the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-substituters</code> <em>value</em></p>
<p>Append to the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-users</code> <em>value</em></p>
<p>Append to the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--fallback</code></p>
<p>Enable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--filter-syscalls</code></p>
<p>Enable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--flake-registry</code> <em>value</em></p>
<p>Set the <code>flake-registry</code> setting.</p>
</li>
<li>
<p><code>--fsync-metadata</code></p>
<p>Enable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--gc-reserved-space</code> <em>value</em></p>
<p>Set the <code>gc-reserved-space</code> setting.</p>
</li>
<li>
<p><code>--hashed-mirrors</code> <em>value</em></p>
<p>Set the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--http-connections</code> <em>value</em></p>
<p>Set the <code>http-connections</code> setting.</p>
</li>
<li>
<p><code>--http2</code></p>
<p>Enable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--id-count</code> <em>value</em></p>
<p>Set the <code>id-count</code> setting.</p>
</li>
<li>
<p><code>--ignore-try</code></p>
<p>Enable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--ignored-acls</code> <em>value</em></p>
<p>Set the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--impersonate-linux-26</code></p>
<p>Enable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--keep-build-log</code></p>
<p>Enable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--keep-derivations</code></p>
<p>Enable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-env-derivations</code></p>
<p>Enable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-failed</code></p>
<p>Enable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--keep-going</code></p>
<p>Enable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--keep-outputs</code></p>
<p>Enable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--log-lines</code> <em>value</em></p>
<p>Set the <code>log-lines</code> setting.</p>
</li>
<li>
<p><code>--max-build-log-size</code> <em>value</em></p>
<p>Set the <code>max-build-log-size</code> setting.</p>
</li>
<li>
<p><code>--max-free</code> <em>value</em></p>
<p>Set the <code>max-free</code> setting.</p>
</li>
<li>
<p><code>--max-jobs</code> <em>value</em></p>
<p>Set the <code>max-jobs</code> setting.</p>
</li>
<li>
<p><code>--max-silent-time</code> <em>value</em></p>
<p>Set the <code>max-silent-time</code> setting.</p>
</li>
<li>
<p><code>--min-free</code> <em>value</em></p>
<p>Set the <code>min-free</code> setting.</p>
</li>
<li>
<p><code>--min-free-check-interval</code> <em>value</em></p>
<p>Set the <code>min-free-check-interval</code> setting.</p>
</li>
<li>
<p><code>--nar-buffer-size</code> <em>value</em></p>
<p>Set the <code>nar-buffer-size</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-negative-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-negative-ttl</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-positive-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-positive-ttl</code> setting.</p>
</li>
<li>
<p><code>--netrc-file</code> <em>value</em></p>
<p>Set the <code>netrc-file</code> setting.</p>
</li>
<li>
<p><code>--nix-path</code> <em>value</em></p>
<p>Set the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--no-accept-flake-config</code></p>
<p>Disable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--no-allow-dirty</code></p>
<p>Disable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--no-allow-import-from-derivation</code></p>
<p>Disable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--no-allow-new-privileges</code></p>
<p>Disable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--no-allow-symlinked-store</code></p>
<p>Disable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--no-allow-unsafe-native-code-during-evaluation</code></p>
<p>Disable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--no-auto-allocate-uids</code></p>
<p>Disable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--no-auto-optimise-store</code></p>
<p>Disable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--no-builders-use-substitutes</code></p>
<p>Disable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--no-compress-build-log</code></p>
<p>Disable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-eval-cache</code></p>
<p>Disable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--no-fallback</code></p>
<p>Disable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--no-filter-syscalls</code></p>
<p>Disable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--no-fsync-metadata</code></p>
<p>Disable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--no-http2</code></p>
<p>Disable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--no-ignore-try</code></p>
<p>Disable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--no-impersonate-linux-26</code></p>
<p>Disable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--no-keep-build-log</code></p>
<p>Disable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-keep-derivations</code></p>
<p>Disable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-env-derivations</code></p>
<p>Disable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-failed</code></p>
<p>Disable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--no-keep-going</code></p>
<p>Disable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--no-keep-outputs</code></p>
<p>Disable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--no-preallocate-contents</code></p>
<p>Disable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--no-print-missing</code></p>
<p>Disable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--no-pure-eval</code></p>
<p>Disable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--no-require-sigs</code></p>
<p>Disable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--no-restrict-eval</code></p>
<p>Disable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--no-run-diff-hook</code></p>
<p>Disable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--no-sandbox</code></p>
<p>Disable sandboxing.</p>
</li>
<li>
<p><code>--no-sandbox-fallback</code></p>
<p>Disable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--no-show-trace</code></p>
<p>Disable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--no-substitute</code></p>
<p>Disable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--no-sync-before-registering</code></p>
<p>Disable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--no-trace-function-calls</code></p>
<p>Disable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--no-trace-verbose</code></p>
<p>Disable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--no-use-case-hack</code></p>
<p>Disable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--no-use-cgroups</code></p>
<p>Disable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--no-use-registries</code></p>
<p>Disable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--no-use-sqlite-wal</code></p>
<p>Disable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--no-warn-dirty</code></p>
<p>Disable the <code>warn-dirty</code> setting.</p>
</li>
<li>
<p><code>--plugin-files</code> <em>value</em></p>
<p>Set the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--post-build-hook</code> <em>value</em></p>
<p>Set the <code>post-build-hook</code> setting.</p>
</li>
<li>
<p><code>--pre-build-hook</code> <em>value</em></p>
<p>Set the <code>pre-build-hook</code> setting.</p>
</li>
<li>
<p><code>--preallocate-contents</code></p>
<p>Enable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--print-missing</code></p>
<p>Enable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--pure-eval</code></p>
<p>Enable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--relaxed-sandbox</code></p>
<p>Enable sandboxing, but allow builds to disable it.</p>
</li>
<li>
<p><code>--require-sigs</code></p>
<p>Enable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--restrict-eval</code></p>
<p>Enable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--run-diff-hook</code></p>
<p>Enable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--sandbox</code></p>
<p>Enable sandboxing.</p>
</li>
<li>
<p><code>--sandbox-build-dir</code> <em>value</em></p>
<p>Set the <code>sandbox-build-dir</code> setting.</p>
</li>
<li>
<p><code>--sandbox-dev-shm-size</code> <em>value</em></p>
<p>Set the <code>sandbox-dev-shm-size</code> setting.</p>
</li>
<li>
<p><code>--sandbox-fallback</code></p>
<p>Enable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--sandbox-paths</code> <em>value</em></p>
<p>Set the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--secret-key-files</code> <em>value</em></p>
<p>Set the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--show-trace</code></p>
<p>Enable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--stalled-download-timeout</code> <em>value</em></p>
<p>Set the <code>stalled-download-timeout</code> setting.</p>
</li>
<li>
<p><code>--start-id</code> <em>value</em></p>
<p>Set the <code>start-id</code> setting.</p>
</li>
<li>
<p><code>--store</code> <em>value</em></p>
<p>Set the <code>store</code> setting.</p>
</li>
<li>
<p><code>--substitute</code></p>
<p>Enable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--substituters</code> <em>value</em></p>
<p>Set the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--sync-before-registering</code></p>
<p>Enable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--system</code> <em>value</em></p>
<p>Set the <code>system</code> setting.</p>
</li>
<li>
<p><code>--system-features</code> <em>value</em></p>
<p>Set the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--tarball-ttl</code> <em>value</em></p>
<p>Set the <code>tarball-ttl</code> setting.</p>
</li>
<li>
<p><code>--timeout</code> <em>value</em></p>
<p>Set the <code>timeout</code> setting.</p>
</li>
<li>
<p><code>--trace-function-calls</code></p>
<p>Enable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--trace-verbose</code></p>
<p>Enable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--trusted-public-keys</code> <em>value</em></p>
<p>Set the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--trusted-substituters</code> <em>value</em></p>
<p>Set the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--trusted-users</code> <em>value</em></p>
<p>Set the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--use-case-hack</code></p>
<p>Enable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--use-cgroups</code></p>
<p>Enable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--use-registries</code></p>
<p>Enable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--use-sqlite-wal</code></p>
<p>Enable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--user-agent-suffix</code> <em>value</em></p>
<p>Set the <code>user-agent-suffix</code> setting.</p>
</li>
<li>
<p><code>--warn-dirty</code></p>
<p>Enable the <code>warn-dirty</code> setting.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p><strong>Warning</strong> <br />
This program is <strong>experimental</strong> and its interface is subject to change.</p>
</blockquote>
<h1 id="name-55"><a class="header" href="#name-55">Name</a></h1>
<p><code>nix profile install</code> - install a package into a profile</p>
<h1 id="synopsis-86"><a class="header" href="#synopsis-86">Synopsis</a></h1>
<p><code>nix profile install</code> [<em>option</em>...] <em>installables</em>...</p>
<h1 id="examples-55"><a class="header" href="#examples-55">Examples</a></h1>
<ul>
<li>
<p>Install a package from Nixpkgs:</p>
<pre><code class="language-console"># nix profile install nixpkgs#hello
</code></pre>
</li>
<li>
<p>Install a package from a specific branch of Nixpkgs:</p>
<pre><code class="language-console"># nix profile install nixpkgs/release-20.09#hello
</code></pre>
</li>
<li>
<p>Install a package from a specific revision of Nixpkgs:</p>
<pre><code class="language-console"># nix profile install nixpkgs/d73407e8e6002646acfdef0e39ace088bacc83da#hello
</code></pre>
</li>
<li>
<p>Install a specific output of a package:</p>
<pre><code class="language-console"># nix profile install nixpkgs#bash^man
</code></pre>
</li>
</ul>
<h1 id="description-75"><a class="header" href="#description-75">Description</a></h1>
<p>This command adds <em>installables</em> to a Nix profile.</p>
<h1 id="options-39"><a class="header" href="#options-39">Options</a></h1>
<ul>
<li>
<p><code>--priority</code> <em>priority</em></p>
<p>The priority of the package to install.</p>
</li>
<li>
<p><code>--profile</code> <em>path</em></p>
<p>The profile to operate on.</p>
</li>
</ul>
<p><strong>Common evaluation options:</strong></p>
<ul>
<li>
<p><code>--arg</code> <em>name</em> <em>expr</em></p>
<p>Pass the value <em>expr</em> as the argument <em>name</em> to Nix functions.</p>
</li>
<li>
<p><code>--argstr</code> <em>name</em> <em>string</em></p>
<p>Pass the string <em>string</em> as the argument <em>name</em> to Nix functions.</p>
</li>
<li>
<p><code>--debugger</code></p>
<p>Start an interactive environment if evaluation fails.</p>
</li>
<li>
<p><code>--eval-store</code> <em>store-url</em></p>
<p>The Nix store to use for evaluations.</p>
</li>
<li>
<p><code>--impure</code></p>
<p>Allow access to mutable paths and repositories.</p>
</li>
<li>
<p><code>--include</code> / <code>-I</code> <em>path</em></p>
<p>Add <em>path</em> to the Nix search path. The Nix search path is
initialized from the colon-separated <a href="command-ref/new-cli/../../command-ref/env-common.html#env-NIX_PATH"><code>NIX_PATH</code></a> environment
variable, and is used to look up the location of Nix expressions using <a href="command-ref/new-cli/../../language/values.html#type-path">paths</a> enclosed in angle
brackets (i.e., <code>&lt;nixpkgs&gt;</code>).</p>
<p>For instance, passing</p>
<pre><code>-I /home/eelco/Dev
-I /etc/nixos
</code></pre>
<p>will cause Nix to look for paths relative to <code>/home/eelco/Dev</code> and
<code>/etc/nixos</code>, in that order. This is equivalent to setting the
<code>NIX_PATH</code> environment variable to</p>
<pre><code>/home/eelco/Dev:/etc/nixos
</code></pre>
<p>It is also possible to match paths against a prefix. For example,
passing</p>
<pre><code>-I nixpkgs=/home/eelco/Dev/nixpkgs-branch
-I /etc/nixos
</code></pre>
<p>will cause Nix to search for <code>&lt;nixpkgs/path&gt;</code> in
<code>/home/eelco/Dev/nixpkgs-branch/path</code> and <code>/etc/nixos/nixpkgs/path</code>.</p>
<p>If a path in the Nix search path starts with <code>http://</code> or <code>https://</code>,
it is interpreted as the URL of a tarball that will be downloaded and
unpacked to a temporary location. The tarball must consist of a single
top-level directory. For example, passing</p>
<pre><code>-I nixpkgs=https://github.com/NixOS/nixpkgs/archive/master.tar.gz
</code></pre>
<p>tells Nix to download and use the current contents of the <code>master</code>
branch in the <code>nixpkgs</code> repository.</p>
<p>The URLs of the tarballs from the official <code>nixos.org</code> channels
(see <a href="command-ref/new-cli/../nix-channel.html">the manual page for <code>nix-channel</code></a>) can be
abbreviated as <code>channel:&lt;channel-name&gt;</code>. For instance, the
following two flags are equivalent:</p>
<pre><code>-I nixpkgs=channel:nixos-21.05
-I nixpkgs=https://nixos.org/channels/nixos-21.05/nixexprs.tar.xz
</code></pre>
<p>You can also fetch source trees using <a href="command-ref/new-cli/./nix3-flake.html#url-like-syntax">flake URLs</a> and add them to the
search path. For instance,</p>
<pre><code>-I nixpkgs=flake:nixpkgs
</code></pre>
<p>specifies that the prefix <code>nixpkgs</code> shall refer to the source tree
downloaded from the <code>nixpkgs</code> entry in the flake registry. Similarly,</p>
<pre><code>-I nixpkgs=flake:github:NixOS/nixpkgs/nixos-22.05
</code></pre>
<p>makes <code>&lt;nixpkgs&gt;</code> refer to a particular branch of the
<code>NixOS/nixpkgs</code> repository on GitHub.</p>
</li>
<li>
<p><code>--override-flake</code> <em>original-ref</em> <em>resolved-ref</em></p>
<p>Override the flake registries, redirecting <em>original-ref</em> to <em>resolved-ref</em>.</p>
</li>
</ul>
<p><strong>Common flake-related options:</strong></p>
<ul>
<li>
<p><code>--commit-lock-file</code></p>
<p>Commit changes to the flake's lock file.</p>
</li>
<li>
<p><code>--inputs-from</code> <em>flake-url</em></p>
<p>Use the inputs of the specified flake as registry entries.</p>
</li>
<li>
<p><code>--no-registries</code></p>
<p>Don't allow lookups in the flake registries. This option is deprecated; use <code>--no-use-registries</code>.</p>
</li>
<li>
<p><code>--no-update-lock-file</code></p>
<p>Do not allow any updates to the flake's lock file.</p>
</li>
<li>
<p><code>--no-write-lock-file</code></p>
<p>Do not write the flake's newly generated lock file.</p>
</li>
<li>
<p><code>--override-input</code> <em>input-path</em> <em>flake-url</em></p>
<p>Override a specific flake input (e.g. <code>dwarffs/nixpkgs</code>). This implies <code>--no-write-lock-file</code>.</p>
</li>
<li>
<p><code>--recreate-lock-file</code></p>
<p>Recreate the flake's lock file from scratch.</p>
</li>
<li>
<p><code>--update-input</code> <em>input-path</em></p>
<p>Update a specific flake input (ignoring its previous entry in the lock file).</p>
</li>
</ul>
<p><strong>Logging-related options:</strong></p>
<ul>
<li>
<p><code>--debug</code></p>
<p>Set the logging verbosity level to 'debug'.</p>
</li>
<li>
<p><code>--log-format</code> <em>format</em></p>
<p>Set the format of log output; one of <code>raw</code>, <code>internal-json</code>, <code>bar</code> or <code>bar-with-logs</code>.</p>
</li>
<li>
<p><code>--print-build-logs</code> / <code>-L</code></p>
<p>Print full build logs on standard error.</p>
</li>
<li>
<p><code>--quiet</code></p>
<p>Decrease the logging verbosity level.</p>
</li>
<li>
<p><code>--verbose</code> / <code>-v</code></p>
<p>Increase the logging verbosity level.</p>
</li>
</ul>
<p><strong>Miscellaneous global options:</strong></p>
<ul>
<li>
<p><code>--help</code></p>
<p>Show usage information.</p>
</li>
<li>
<p><code>--offline</code></p>
<p>Disable substituters and consider all previously downloaded files up-to-date.</p>
</li>
<li>
<p><code>--option</code> <em>name</em> <em>value</em></p>
<p>Set the Nix configuration setting <em>name</em> to <em>value</em> (overriding <code>nix.conf</code>).</p>
</li>
<li>
<p><code>--refresh</code></p>
<p>Consider all previously downloaded files out-of-date.</p>
</li>
<li>
<p><code>--version</code></p>
<p>Show version information.</p>
</li>
</ul>
<p><strong>Options that change the interpretation of installables:</strong></p>
<ul>
<li>
<p><code>--derivation</code></p>
<p>Operate on the <a href="command-ref/new-cli/../../glossary.html#gloss-store-derivation">store derivation</a> rather than its outputs.</p>
</li>
<li>
<p><code>--expr</code> <em>expr</em></p>
<p>Interpret installables as attribute paths relative to the Nix expression <em>expr</em>.</p>
</li>
<li>
<p><code>--file</code> / <code>-f</code> <em>file</em></p>
<p>Interpret installables as attribute paths relative to the Nix expression stored in <em>file</em>. If <em>file</em> is the character -, then a Nix expression will be read from standard input. Implies <code>--impure</code>.</p>
</li>
</ul>
<p><strong>Options to override configuration settings:</strong></p>
<ul>
<li>
<p><code>--accept-flake-config</code></p>
<p>Enable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--access-tokens</code> <em>value</em></p>
<p>Set the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--allow-dirty</code></p>
<p>Enable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--allow-import-from-derivation</code></p>
<p>Enable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--allow-new-privileges</code></p>
<p>Enable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--allow-symlinked-store</code></p>
<p>Enable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--allow-unsafe-native-code-during-evaluation</code></p>
<p>Enable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--allowed-impure-host-deps</code> <em>value</em></p>
<p>Set the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--allowed-uris</code> <em>value</em></p>
<p>Set the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--allowed-users</code> <em>value</em></p>
<p>Set the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--auto-allocate-uids</code></p>
<p>Enable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--auto-optimise-store</code></p>
<p>Enable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt</code> <em>value</em></p>
<p>Set the <code>bash-prompt</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-prefix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-prefix</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-suffix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-suffix</code> setting.</p>
</li>
<li>
<p><code>--build-hook</code> <em>value</em></p>
<p>Set the <code>build-hook</code> setting.</p>
</li>
<li>
<p><code>--build-poll-interval</code> <em>value</em></p>
<p>Set the <code>build-poll-interval</code> setting.</p>
</li>
<li>
<p><code>--build-users-group</code> <em>value</em></p>
<p>Set the <code>build-users-group</code> setting.</p>
</li>
<li>
<p><code>--builders</code> <em>value</em></p>
<p>Set the <code>builders</code> setting.</p>
</li>
<li>
<p><code>--builders-use-substitutes</code></p>
<p>Enable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--commit-lockfile-summary</code> <em>value</em></p>
<p>Set the <code>commit-lockfile-summary</code> setting.</p>
</li>
<li>
<p><code>--compress-build-log</code></p>
<p>Enable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--connect-timeout</code> <em>value</em></p>
<p>Set the <code>connect-timeout</code> setting.</p>
</li>
<li>
<p><code>--cores</code> <em>value</em></p>
<p>Set the <code>cores</code> setting.</p>
</li>
<li>
<p><code>--diff-hook</code> <em>value</em></p>
<p>Set the <code>diff-hook</code> setting.</p>
</li>
<li>
<p><code>--download-attempts</code> <em>value</em></p>
<p>Set the <code>download-attempts</code> setting.</p>
</li>
<li>
<p><code>--download-speed</code> <em>value</em></p>
<p>Set the <code>download-speed</code> setting.</p>
</li>
<li>
<p><code>--eval-cache</code></p>
<p>Enable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--experimental-features</code> <em>value</em></p>
<p>Set the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-access-tokens</code> <em>value</em></p>
<p>Append to the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-impure-host-deps</code> <em>value</em></p>
<p>Append to the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-uris</code> <em>value</em></p>
<p>Append to the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-users</code> <em>value</em></p>
<p>Append to the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--extra-experimental-features</code> <em>value</em></p>
<p>Append to the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-extra-platforms</code> <em>value</em></p>
<p>Append to the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-hashed-mirrors</code> <em>value</em></p>
<p>Append to the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--extra-ignored-acls</code> <em>value</em></p>
<p>Append to the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--extra-nix-path</code> <em>value</em></p>
<p>Append to the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--extra-platforms</code> <em>value</em></p>
<p>Set the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-plugin-files</code> <em>value</em></p>
<p>Append to the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--extra-sandbox-paths</code> <em>value</em></p>
<p>Append to the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--extra-secret-key-files</code> <em>value</em></p>
<p>Append to the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--extra-substituters</code> <em>value</em></p>
<p>Append to the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-system-features</code> <em>value</em></p>
<p>Append to the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-public-keys</code> <em>value</em></p>
<p>Append to the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-substituters</code> <em>value</em></p>
<p>Append to the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-users</code> <em>value</em></p>
<p>Append to the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--fallback</code></p>
<p>Enable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--filter-syscalls</code></p>
<p>Enable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--flake-registry</code> <em>value</em></p>
<p>Set the <code>flake-registry</code> setting.</p>
</li>
<li>
<p><code>--fsync-metadata</code></p>
<p>Enable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--gc-reserved-space</code> <em>value</em></p>
<p>Set the <code>gc-reserved-space</code> setting.</p>
</li>
<li>
<p><code>--hashed-mirrors</code> <em>value</em></p>
<p>Set the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--http-connections</code> <em>value</em></p>
<p>Set the <code>http-connections</code> setting.</p>
</li>
<li>
<p><code>--http2</code></p>
<p>Enable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--id-count</code> <em>value</em></p>
<p>Set the <code>id-count</code> setting.</p>
</li>
<li>
<p><code>--ignore-try</code></p>
<p>Enable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--ignored-acls</code> <em>value</em></p>
<p>Set the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--impersonate-linux-26</code></p>
<p>Enable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--keep-build-log</code></p>
<p>Enable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--keep-derivations</code></p>
<p>Enable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-env-derivations</code></p>
<p>Enable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-failed</code></p>
<p>Enable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--keep-going</code></p>
<p>Enable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--keep-outputs</code></p>
<p>Enable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--log-lines</code> <em>value</em></p>
<p>Set the <code>log-lines</code> setting.</p>
</li>
<li>
<p><code>--max-build-log-size</code> <em>value</em></p>
<p>Set the <code>max-build-log-size</code> setting.</p>
</li>
<li>
<p><code>--max-free</code> <em>value</em></p>
<p>Set the <code>max-free</code> setting.</p>
</li>
<li>
<p><code>--max-jobs</code> <em>value</em></p>
<p>Set the <code>max-jobs</code> setting.</p>
</li>
<li>
<p><code>--max-silent-time</code> <em>value</em></p>
<p>Set the <code>max-silent-time</code> setting.</p>
</li>
<li>
<p><code>--min-free</code> <em>value</em></p>
<p>Set the <code>min-free</code> setting.</p>
</li>
<li>
<p><code>--min-free-check-interval</code> <em>value</em></p>
<p>Set the <code>min-free-check-interval</code> setting.</p>
</li>
<li>
<p><code>--nar-buffer-size</code> <em>value</em></p>
<p>Set the <code>nar-buffer-size</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-negative-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-negative-ttl</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-positive-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-positive-ttl</code> setting.</p>
</li>
<li>
<p><code>--netrc-file</code> <em>value</em></p>
<p>Set the <code>netrc-file</code> setting.</p>
</li>
<li>
<p><code>--nix-path</code> <em>value</em></p>
<p>Set the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--no-accept-flake-config</code></p>
<p>Disable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--no-allow-dirty</code></p>
<p>Disable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--no-allow-import-from-derivation</code></p>
<p>Disable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--no-allow-new-privileges</code></p>
<p>Disable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--no-allow-symlinked-store</code></p>
<p>Disable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--no-allow-unsafe-native-code-during-evaluation</code></p>
<p>Disable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--no-auto-allocate-uids</code></p>
<p>Disable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--no-auto-optimise-store</code></p>
<p>Disable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--no-builders-use-substitutes</code></p>
<p>Disable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--no-compress-build-log</code></p>
<p>Disable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-eval-cache</code></p>
<p>Disable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--no-fallback</code></p>
<p>Disable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--no-filter-syscalls</code></p>
<p>Disable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--no-fsync-metadata</code></p>
<p>Disable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--no-http2</code></p>
<p>Disable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--no-ignore-try</code></p>
<p>Disable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--no-impersonate-linux-26</code></p>
<p>Disable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--no-keep-build-log</code></p>
<p>Disable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-keep-derivations</code></p>
<p>Disable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-env-derivations</code></p>
<p>Disable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-failed</code></p>
<p>Disable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--no-keep-going</code></p>
<p>Disable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--no-keep-outputs</code></p>
<p>Disable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--no-preallocate-contents</code></p>
<p>Disable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--no-print-missing</code></p>
<p>Disable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--no-pure-eval</code></p>
<p>Disable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--no-require-sigs</code></p>
<p>Disable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--no-restrict-eval</code></p>
<p>Disable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--no-run-diff-hook</code></p>
<p>Disable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--no-sandbox</code></p>
<p>Disable sandboxing.</p>
</li>
<li>
<p><code>--no-sandbox-fallback</code></p>
<p>Disable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--no-show-trace</code></p>
<p>Disable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--no-substitute</code></p>
<p>Disable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--no-sync-before-registering</code></p>
<p>Disable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--no-trace-function-calls</code></p>
<p>Disable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--no-trace-verbose</code></p>
<p>Disable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--no-use-case-hack</code></p>
<p>Disable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--no-use-cgroups</code></p>
<p>Disable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--no-use-registries</code></p>
<p>Disable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--no-use-sqlite-wal</code></p>
<p>Disable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--no-warn-dirty</code></p>
<p>Disable the <code>warn-dirty</code> setting.</p>
</li>
<li>
<p><code>--plugin-files</code> <em>value</em></p>
<p>Set the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--post-build-hook</code> <em>value</em></p>
<p>Set the <code>post-build-hook</code> setting.</p>
</li>
<li>
<p><code>--pre-build-hook</code> <em>value</em></p>
<p>Set the <code>pre-build-hook</code> setting.</p>
</li>
<li>
<p><code>--preallocate-contents</code></p>
<p>Enable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--print-missing</code></p>
<p>Enable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--pure-eval</code></p>
<p>Enable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--relaxed-sandbox</code></p>
<p>Enable sandboxing, but allow builds to disable it.</p>
</li>
<li>
<p><code>--require-sigs</code></p>
<p>Enable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--restrict-eval</code></p>
<p>Enable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--run-diff-hook</code></p>
<p>Enable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--sandbox</code></p>
<p>Enable sandboxing.</p>
</li>
<li>
<p><code>--sandbox-build-dir</code> <em>value</em></p>
<p>Set the <code>sandbox-build-dir</code> setting.</p>
</li>
<li>
<p><code>--sandbox-dev-shm-size</code> <em>value</em></p>
<p>Set the <code>sandbox-dev-shm-size</code> setting.</p>
</li>
<li>
<p><code>--sandbox-fallback</code></p>
<p>Enable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--sandbox-paths</code> <em>value</em></p>
<p>Set the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--secret-key-files</code> <em>value</em></p>
<p>Set the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--show-trace</code></p>
<p>Enable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--stalled-download-timeout</code> <em>value</em></p>
<p>Set the <code>stalled-download-timeout</code> setting.</p>
</li>
<li>
<p><code>--start-id</code> <em>value</em></p>
<p>Set the <code>start-id</code> setting.</p>
</li>
<li>
<p><code>--store</code> <em>value</em></p>
<p>Set the <code>store</code> setting.</p>
</li>
<li>
<p><code>--substitute</code></p>
<p>Enable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--substituters</code> <em>value</em></p>
<p>Set the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--sync-before-registering</code></p>
<p>Enable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--system</code> <em>value</em></p>
<p>Set the <code>system</code> setting.</p>
</li>
<li>
<p><code>--system-features</code> <em>value</em></p>
<p>Set the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--tarball-ttl</code> <em>value</em></p>
<p>Set the <code>tarball-ttl</code> setting.</p>
</li>
<li>
<p><code>--timeout</code> <em>value</em></p>
<p>Set the <code>timeout</code> setting.</p>
</li>
<li>
<p><code>--trace-function-calls</code></p>
<p>Enable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--trace-verbose</code></p>
<p>Enable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--trusted-public-keys</code> <em>value</em></p>
<p>Set the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--trusted-substituters</code> <em>value</em></p>
<p>Set the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--trusted-users</code> <em>value</em></p>
<p>Set the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--use-case-hack</code></p>
<p>Enable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--use-cgroups</code></p>
<p>Enable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--use-registries</code></p>
<p>Enable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--use-sqlite-wal</code></p>
<p>Enable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--user-agent-suffix</code> <em>value</em></p>
<p>Set the <code>user-agent-suffix</code> setting.</p>
</li>
<li>
<p><code>--warn-dirty</code></p>
<p>Enable the <code>warn-dirty</code> setting.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p><strong>Warning</strong> <br />
This program is <strong>experimental</strong> and its interface is subject to change.</p>
</blockquote>
<h1 id="name-56"><a class="header" href="#name-56">Name</a></h1>
<p><code>nix profile list</code> - list installed packages</p>
<h1 id="synopsis-87"><a class="header" href="#synopsis-87">Synopsis</a></h1>
<p><code>nix profile list</code> [<em>option</em>...] </p>
<h1 id="examples-56"><a class="header" href="#examples-56">Examples</a></h1>
<ul>
<li>
<p>Show what packages are installed in the default profile:</p>
<pre><code class="language-console"># nix profile list
0 flake:nixpkgs#legacyPackages.x86_64-linux.spotify github:NixOS/nixpkgs/c23db78bbd474c4d0c5c3c551877523b4a50db06#legacyPackages.x86_64-linux.spotify /nix/store/akpdsid105phbbvknjsdh7hl4v3fhjkr-spotify-1.1.46.916.g416cacf1
1 flake:nixpkgs#legacyPackages.x86_64-linux.zoom-us github:NixOS/nixpkgs/c23db78bbd474c4d0c5c3c551877523b4a50db06#legacyPackages.x86_64-linux.zoom-us /nix/store/89pmjmbih5qpi7accgacd17ybpgp4xfm-zoom-us-5.4.53350.1027
2 flake:blender-bin#packages.x86_64-linux.default github:edolstra/nix-warez/d09d7eea893dcb162e89bc67f6dc1ced14abfc27?dir=blender#packages.x86_64-linux.default /nix/store/zfgralhqjnam662kqsgq6isjw8lhrflz-blender-bin-2.91.0
</code></pre>
</li>
</ul>
<h1 id="description-76"><a class="header" href="#description-76">Description</a></h1>
<p>This command shows what packages are currently installed in a
profile. The output consists of one line per package, with the
following fields:</p>
<ul>
<li>
<p>An integer that can be used to unambiguously identify the package in
invocations of <code>nix profile remove</code> and <code>nix profile upgrade</code>.</p>
</li>
<li>
<p>The original (&quot;unlocked&quot;) flake reference and output attribute path
used at installation time.</p>
</li>
<li>
<p>The locked flake reference to which the unlocked flake reference was
resolved.</p>
</li>
<li>
<p>The store path(s) of the package.</p>
</li>
</ul>
<h1 id="options-40"><a class="header" href="#options-40">Options</a></h1>
<ul>
<li>
<p><code>--profile</code> <em>path</em></p>
<p>The profile to operate on.</p>
</li>
</ul>
<p><strong>Common evaluation options:</strong></p>
<ul>
<li>
<p><code>--arg</code> <em>name</em> <em>expr</em></p>
<p>Pass the value <em>expr</em> as the argument <em>name</em> to Nix functions.</p>
</li>
<li>
<p><code>--argstr</code> <em>name</em> <em>string</em></p>
<p>Pass the string <em>string</em> as the argument <em>name</em> to Nix functions.</p>
</li>
<li>
<p><code>--debugger</code></p>
<p>Start an interactive environment if evaluation fails.</p>
</li>
<li>
<p><code>--eval-store</code> <em>store-url</em></p>
<p>The Nix store to use for evaluations.</p>
</li>
<li>
<p><code>--impure</code></p>
<p>Allow access to mutable paths and repositories.</p>
</li>
<li>
<p><code>--include</code> / <code>-I</code> <em>path</em></p>
<p>Add <em>path</em> to the Nix search path. The Nix search path is
initialized from the colon-separated <a href="command-ref/new-cli/../../command-ref/env-common.html#env-NIX_PATH"><code>NIX_PATH</code></a> environment
variable, and is used to look up the location of Nix expressions using <a href="command-ref/new-cli/../../language/values.html#type-path">paths</a> enclosed in angle
brackets (i.e., <code>&lt;nixpkgs&gt;</code>).</p>
<p>For instance, passing</p>
<pre><code>-I /home/eelco/Dev
-I /etc/nixos
</code></pre>
<p>will cause Nix to look for paths relative to <code>/home/eelco/Dev</code> and
<code>/etc/nixos</code>, in that order. This is equivalent to setting the
<code>NIX_PATH</code> environment variable to</p>
<pre><code>/home/eelco/Dev:/etc/nixos
</code></pre>
<p>It is also possible to match paths against a prefix. For example,
passing</p>
<pre><code>-I nixpkgs=/home/eelco/Dev/nixpkgs-branch
-I /etc/nixos
</code></pre>
<p>will cause Nix to search for <code>&lt;nixpkgs/path&gt;</code> in
<code>/home/eelco/Dev/nixpkgs-branch/path</code> and <code>/etc/nixos/nixpkgs/path</code>.</p>
<p>If a path in the Nix search path starts with <code>http://</code> or <code>https://</code>,
it is interpreted as the URL of a tarball that will be downloaded and
unpacked to a temporary location. The tarball must consist of a single
top-level directory. For example, passing</p>
<pre><code>-I nixpkgs=https://github.com/NixOS/nixpkgs/archive/master.tar.gz
</code></pre>
<p>tells Nix to download and use the current contents of the <code>master</code>
branch in the <code>nixpkgs</code> repository.</p>
<p>The URLs of the tarballs from the official <code>nixos.org</code> channels
(see <a href="command-ref/new-cli/../nix-channel.html">the manual page for <code>nix-channel</code></a>) can be
abbreviated as <code>channel:&lt;channel-name&gt;</code>. For instance, the
following two flags are equivalent:</p>
<pre><code>-I nixpkgs=channel:nixos-21.05
-I nixpkgs=https://nixos.org/channels/nixos-21.05/nixexprs.tar.xz
</code></pre>
<p>You can also fetch source trees using <a href="command-ref/new-cli/./nix3-flake.html#url-like-syntax">flake URLs</a> and add them to the
search path. For instance,</p>
<pre><code>-I nixpkgs=flake:nixpkgs
</code></pre>
<p>specifies that the prefix <code>nixpkgs</code> shall refer to the source tree
downloaded from the <code>nixpkgs</code> entry in the flake registry. Similarly,</p>
<pre><code>-I nixpkgs=flake:github:NixOS/nixpkgs/nixos-22.05
</code></pre>
<p>makes <code>&lt;nixpkgs&gt;</code> refer to a particular branch of the
<code>NixOS/nixpkgs</code> repository on GitHub.</p>
</li>
<li>
<p><code>--override-flake</code> <em>original-ref</em> <em>resolved-ref</em></p>
<p>Override the flake registries, redirecting <em>original-ref</em> to <em>resolved-ref</em>.</p>
</li>
</ul>
<p><strong>Logging-related options:</strong></p>
<ul>
<li>
<p><code>--debug</code></p>
<p>Set the logging verbosity level to 'debug'.</p>
</li>
<li>
<p><code>--log-format</code> <em>format</em></p>
<p>Set the format of log output; one of <code>raw</code>, <code>internal-json</code>, <code>bar</code> or <code>bar-with-logs</code>.</p>
</li>
<li>
<p><code>--print-build-logs</code> / <code>-L</code></p>
<p>Print full build logs on standard error.</p>
</li>
<li>
<p><code>--quiet</code></p>
<p>Decrease the logging verbosity level.</p>
</li>
<li>
<p><code>--verbose</code> / <code>-v</code></p>
<p>Increase the logging verbosity level.</p>
</li>
</ul>
<p><strong>Miscellaneous global options:</strong></p>
<ul>
<li>
<p><code>--help</code></p>
<p>Show usage information.</p>
</li>
<li>
<p><code>--offline</code></p>
<p>Disable substituters and consider all previously downloaded files up-to-date.</p>
</li>
<li>
<p><code>--option</code> <em>name</em> <em>value</em></p>
<p>Set the Nix configuration setting <em>name</em> to <em>value</em> (overriding <code>nix.conf</code>).</p>
</li>
<li>
<p><code>--refresh</code></p>
<p>Consider all previously downloaded files out-of-date.</p>
</li>
<li>
<p><code>--version</code></p>
<p>Show version information.</p>
</li>
</ul>
<p><strong>Options to override configuration settings:</strong></p>
<ul>
<li>
<p><code>--accept-flake-config</code></p>
<p>Enable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--access-tokens</code> <em>value</em></p>
<p>Set the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--allow-dirty</code></p>
<p>Enable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--allow-import-from-derivation</code></p>
<p>Enable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--allow-new-privileges</code></p>
<p>Enable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--allow-symlinked-store</code></p>
<p>Enable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--allow-unsafe-native-code-during-evaluation</code></p>
<p>Enable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--allowed-impure-host-deps</code> <em>value</em></p>
<p>Set the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--allowed-uris</code> <em>value</em></p>
<p>Set the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--allowed-users</code> <em>value</em></p>
<p>Set the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--auto-allocate-uids</code></p>
<p>Enable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--auto-optimise-store</code></p>
<p>Enable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt</code> <em>value</em></p>
<p>Set the <code>bash-prompt</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-prefix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-prefix</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-suffix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-suffix</code> setting.</p>
</li>
<li>
<p><code>--build-hook</code> <em>value</em></p>
<p>Set the <code>build-hook</code> setting.</p>
</li>
<li>
<p><code>--build-poll-interval</code> <em>value</em></p>
<p>Set the <code>build-poll-interval</code> setting.</p>
</li>
<li>
<p><code>--build-users-group</code> <em>value</em></p>
<p>Set the <code>build-users-group</code> setting.</p>
</li>
<li>
<p><code>--builders</code> <em>value</em></p>
<p>Set the <code>builders</code> setting.</p>
</li>
<li>
<p><code>--builders-use-substitutes</code></p>
<p>Enable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--commit-lockfile-summary</code> <em>value</em></p>
<p>Set the <code>commit-lockfile-summary</code> setting.</p>
</li>
<li>
<p><code>--compress-build-log</code></p>
<p>Enable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--connect-timeout</code> <em>value</em></p>
<p>Set the <code>connect-timeout</code> setting.</p>
</li>
<li>
<p><code>--cores</code> <em>value</em></p>
<p>Set the <code>cores</code> setting.</p>
</li>
<li>
<p><code>--diff-hook</code> <em>value</em></p>
<p>Set the <code>diff-hook</code> setting.</p>
</li>
<li>
<p><code>--download-attempts</code> <em>value</em></p>
<p>Set the <code>download-attempts</code> setting.</p>
</li>
<li>
<p><code>--download-speed</code> <em>value</em></p>
<p>Set the <code>download-speed</code> setting.</p>
</li>
<li>
<p><code>--eval-cache</code></p>
<p>Enable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--experimental-features</code> <em>value</em></p>
<p>Set the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-access-tokens</code> <em>value</em></p>
<p>Append to the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-impure-host-deps</code> <em>value</em></p>
<p>Append to the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-uris</code> <em>value</em></p>
<p>Append to the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-users</code> <em>value</em></p>
<p>Append to the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--extra-experimental-features</code> <em>value</em></p>
<p>Append to the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-extra-platforms</code> <em>value</em></p>
<p>Append to the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-hashed-mirrors</code> <em>value</em></p>
<p>Append to the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--extra-ignored-acls</code> <em>value</em></p>
<p>Append to the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--extra-nix-path</code> <em>value</em></p>
<p>Append to the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--extra-platforms</code> <em>value</em></p>
<p>Set the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-plugin-files</code> <em>value</em></p>
<p>Append to the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--extra-sandbox-paths</code> <em>value</em></p>
<p>Append to the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--extra-secret-key-files</code> <em>value</em></p>
<p>Append to the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--extra-substituters</code> <em>value</em></p>
<p>Append to the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-system-features</code> <em>value</em></p>
<p>Append to the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-public-keys</code> <em>value</em></p>
<p>Append to the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-substituters</code> <em>value</em></p>
<p>Append to the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-users</code> <em>value</em></p>
<p>Append to the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--fallback</code></p>
<p>Enable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--filter-syscalls</code></p>
<p>Enable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--flake-registry</code> <em>value</em></p>
<p>Set the <code>flake-registry</code> setting.</p>
</li>
<li>
<p><code>--fsync-metadata</code></p>
<p>Enable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--gc-reserved-space</code> <em>value</em></p>
<p>Set the <code>gc-reserved-space</code> setting.</p>
</li>
<li>
<p><code>--hashed-mirrors</code> <em>value</em></p>
<p>Set the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--http-connections</code> <em>value</em></p>
<p>Set the <code>http-connections</code> setting.</p>
</li>
<li>
<p><code>--http2</code></p>
<p>Enable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--id-count</code> <em>value</em></p>
<p>Set the <code>id-count</code> setting.</p>
</li>
<li>
<p><code>--ignore-try</code></p>
<p>Enable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--ignored-acls</code> <em>value</em></p>
<p>Set the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--impersonate-linux-26</code></p>
<p>Enable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--keep-build-log</code></p>
<p>Enable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--keep-derivations</code></p>
<p>Enable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-env-derivations</code></p>
<p>Enable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-failed</code></p>
<p>Enable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--keep-going</code></p>
<p>Enable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--keep-outputs</code></p>
<p>Enable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--log-lines</code> <em>value</em></p>
<p>Set the <code>log-lines</code> setting.</p>
</li>
<li>
<p><code>--max-build-log-size</code> <em>value</em></p>
<p>Set the <code>max-build-log-size</code> setting.</p>
</li>
<li>
<p><code>--max-free</code> <em>value</em></p>
<p>Set the <code>max-free</code> setting.</p>
</li>
<li>
<p><code>--max-jobs</code> <em>value</em></p>
<p>Set the <code>max-jobs</code> setting.</p>
</li>
<li>
<p><code>--max-silent-time</code> <em>value</em></p>
<p>Set the <code>max-silent-time</code> setting.</p>
</li>
<li>
<p><code>--min-free</code> <em>value</em></p>
<p>Set the <code>min-free</code> setting.</p>
</li>
<li>
<p><code>--min-free-check-interval</code> <em>value</em></p>
<p>Set the <code>min-free-check-interval</code> setting.</p>
</li>
<li>
<p><code>--nar-buffer-size</code> <em>value</em></p>
<p>Set the <code>nar-buffer-size</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-negative-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-negative-ttl</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-positive-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-positive-ttl</code> setting.</p>
</li>
<li>
<p><code>--netrc-file</code> <em>value</em></p>
<p>Set the <code>netrc-file</code> setting.</p>
</li>
<li>
<p><code>--nix-path</code> <em>value</em></p>
<p>Set the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--no-accept-flake-config</code></p>
<p>Disable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--no-allow-dirty</code></p>
<p>Disable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--no-allow-import-from-derivation</code></p>
<p>Disable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--no-allow-new-privileges</code></p>
<p>Disable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--no-allow-symlinked-store</code></p>
<p>Disable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--no-allow-unsafe-native-code-during-evaluation</code></p>
<p>Disable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--no-auto-allocate-uids</code></p>
<p>Disable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--no-auto-optimise-store</code></p>
<p>Disable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--no-builders-use-substitutes</code></p>
<p>Disable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--no-compress-build-log</code></p>
<p>Disable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-eval-cache</code></p>
<p>Disable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--no-fallback</code></p>
<p>Disable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--no-filter-syscalls</code></p>
<p>Disable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--no-fsync-metadata</code></p>
<p>Disable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--no-http2</code></p>
<p>Disable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--no-ignore-try</code></p>
<p>Disable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--no-impersonate-linux-26</code></p>
<p>Disable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--no-keep-build-log</code></p>
<p>Disable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-keep-derivations</code></p>
<p>Disable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-env-derivations</code></p>
<p>Disable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-failed</code></p>
<p>Disable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--no-keep-going</code></p>
<p>Disable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--no-keep-outputs</code></p>
<p>Disable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--no-preallocate-contents</code></p>
<p>Disable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--no-print-missing</code></p>
<p>Disable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--no-pure-eval</code></p>
<p>Disable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--no-require-sigs</code></p>
<p>Disable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--no-restrict-eval</code></p>
<p>Disable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--no-run-diff-hook</code></p>
<p>Disable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--no-sandbox</code></p>
<p>Disable sandboxing.</p>
</li>
<li>
<p><code>--no-sandbox-fallback</code></p>
<p>Disable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--no-show-trace</code></p>
<p>Disable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--no-substitute</code></p>
<p>Disable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--no-sync-before-registering</code></p>
<p>Disable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--no-trace-function-calls</code></p>
<p>Disable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--no-trace-verbose</code></p>
<p>Disable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--no-use-case-hack</code></p>
<p>Disable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--no-use-cgroups</code></p>
<p>Disable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--no-use-registries</code></p>
<p>Disable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--no-use-sqlite-wal</code></p>
<p>Disable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--no-warn-dirty</code></p>
<p>Disable the <code>warn-dirty</code> setting.</p>
</li>
<li>
<p><code>--plugin-files</code> <em>value</em></p>
<p>Set the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--post-build-hook</code> <em>value</em></p>
<p>Set the <code>post-build-hook</code> setting.</p>
</li>
<li>
<p><code>--pre-build-hook</code> <em>value</em></p>
<p>Set the <code>pre-build-hook</code> setting.</p>
</li>
<li>
<p><code>--preallocate-contents</code></p>
<p>Enable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--print-missing</code></p>
<p>Enable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--pure-eval</code></p>
<p>Enable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--relaxed-sandbox</code></p>
<p>Enable sandboxing, but allow builds to disable it.</p>
</li>
<li>
<p><code>--require-sigs</code></p>
<p>Enable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--restrict-eval</code></p>
<p>Enable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--run-diff-hook</code></p>
<p>Enable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--sandbox</code></p>
<p>Enable sandboxing.</p>
</li>
<li>
<p><code>--sandbox-build-dir</code> <em>value</em></p>
<p>Set the <code>sandbox-build-dir</code> setting.</p>
</li>
<li>
<p><code>--sandbox-dev-shm-size</code> <em>value</em></p>
<p>Set the <code>sandbox-dev-shm-size</code> setting.</p>
</li>
<li>
<p><code>--sandbox-fallback</code></p>
<p>Enable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--sandbox-paths</code> <em>value</em></p>
<p>Set the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--secret-key-files</code> <em>value</em></p>
<p>Set the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--show-trace</code></p>
<p>Enable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--stalled-download-timeout</code> <em>value</em></p>
<p>Set the <code>stalled-download-timeout</code> setting.</p>
</li>
<li>
<p><code>--start-id</code> <em>value</em></p>
<p>Set the <code>start-id</code> setting.</p>
</li>
<li>
<p><code>--store</code> <em>value</em></p>
<p>Set the <code>store</code> setting.</p>
</li>
<li>
<p><code>--substitute</code></p>
<p>Enable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--substituters</code> <em>value</em></p>
<p>Set the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--sync-before-registering</code></p>
<p>Enable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--system</code> <em>value</em></p>
<p>Set the <code>system</code> setting.</p>
</li>
<li>
<p><code>--system-features</code> <em>value</em></p>
<p>Set the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--tarball-ttl</code> <em>value</em></p>
<p>Set the <code>tarball-ttl</code> setting.</p>
</li>
<li>
<p><code>--timeout</code> <em>value</em></p>
<p>Set the <code>timeout</code> setting.</p>
</li>
<li>
<p><code>--trace-function-calls</code></p>
<p>Enable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--trace-verbose</code></p>
<p>Enable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--trusted-public-keys</code> <em>value</em></p>
<p>Set the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--trusted-substituters</code> <em>value</em></p>
<p>Set the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--trusted-users</code> <em>value</em></p>
<p>Set the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--use-case-hack</code></p>
<p>Enable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--use-cgroups</code></p>
<p>Enable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--use-registries</code></p>
<p>Enable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--use-sqlite-wal</code></p>
<p>Enable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--user-agent-suffix</code> <em>value</em></p>
<p>Set the <code>user-agent-suffix</code> setting.</p>
</li>
<li>
<p><code>--warn-dirty</code></p>
<p>Enable the <code>warn-dirty</code> setting.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p><strong>Warning</strong> <br />
This program is <strong>experimental</strong> and its interface is subject to change.</p>
</blockquote>
<h1 id="name-57"><a class="header" href="#name-57">Name</a></h1>
<p><code>nix profile remove</code> - remove packages from a profile</p>
<h1 id="synopsis-88"><a class="header" href="#synopsis-88">Synopsis</a></h1>
<p><code>nix profile remove</code> [<em>option</em>...] <em>elements</em>...</p>
<h1 id="examples-57"><a class="header" href="#examples-57">Examples</a></h1>
<ul>
<li>
<p>Remove a package by position:</p>
<pre><code class="language-console"># nix profile remove 3
</code></pre>
</li>
<li>
<p>Remove a package by attribute path:</p>
<pre><code class="language-console"># nix profile remove packages.x86_64-linux.hello
</code></pre>
</li>
<li>
<p>Remove all packages:</p>
<pre><code class="language-console"># nix profile remove '.*'
</code></pre>
</li>
<li>
<p>Remove a package by store path:</p>
<pre><code class="language-console"># nix profile remove /nix/store/rr3y0c6zyk7kjjl8y19s4lsrhn4aiq1z-hello-2.10
</code></pre>
</li>
</ul>
<h1 id="description-77"><a class="header" href="#description-77">Description</a></h1>
<p>This command removes a package from a profile.</p>
<h1 id="options-41"><a class="header" href="#options-41">Options</a></h1>
<ul>
<li>
<p><code>--profile</code> <em>path</em></p>
<p>The profile to operate on.</p>
</li>
</ul>
<p><strong>Common evaluation options:</strong></p>
<ul>
<li>
<p><code>--arg</code> <em>name</em> <em>expr</em></p>
<p>Pass the value <em>expr</em> as the argument <em>name</em> to Nix functions.</p>
</li>
<li>
<p><code>--argstr</code> <em>name</em> <em>string</em></p>
<p>Pass the string <em>string</em> as the argument <em>name</em> to Nix functions.</p>
</li>
<li>
<p><code>--debugger</code></p>
<p>Start an interactive environment if evaluation fails.</p>
</li>
<li>
<p><code>--eval-store</code> <em>store-url</em></p>
<p>The Nix store to use for evaluations.</p>
</li>
<li>
<p><code>--impure</code></p>
<p>Allow access to mutable paths and repositories.</p>
</li>
<li>
<p><code>--include</code> / <code>-I</code> <em>path</em></p>
<p>Add <em>path</em> to the Nix search path. The Nix search path is
initialized from the colon-separated <a href="command-ref/new-cli/../../command-ref/env-common.html#env-NIX_PATH"><code>NIX_PATH</code></a> environment
variable, and is used to look up the location of Nix expressions using <a href="command-ref/new-cli/../../language/values.html#type-path">paths</a> enclosed in angle
brackets (i.e., <code>&lt;nixpkgs&gt;</code>).</p>
<p>For instance, passing</p>
<pre><code>-I /home/eelco/Dev
-I /etc/nixos
</code></pre>
<p>will cause Nix to look for paths relative to <code>/home/eelco/Dev</code> and
<code>/etc/nixos</code>, in that order. This is equivalent to setting the
<code>NIX_PATH</code> environment variable to</p>
<pre><code>/home/eelco/Dev:/etc/nixos
</code></pre>
<p>It is also possible to match paths against a prefix. For example,
passing</p>
<pre><code>-I nixpkgs=/home/eelco/Dev/nixpkgs-branch
-I /etc/nixos
</code></pre>
<p>will cause Nix to search for <code>&lt;nixpkgs/path&gt;</code> in
<code>/home/eelco/Dev/nixpkgs-branch/path</code> and <code>/etc/nixos/nixpkgs/path</code>.</p>
<p>If a path in the Nix search path starts with <code>http://</code> or <code>https://</code>,
it is interpreted as the URL of a tarball that will be downloaded and
unpacked to a temporary location. The tarball must consist of a single
top-level directory. For example, passing</p>
<pre><code>-I nixpkgs=https://github.com/NixOS/nixpkgs/archive/master.tar.gz
</code></pre>
<p>tells Nix to download and use the current contents of the <code>master</code>
branch in the <code>nixpkgs</code> repository.</p>
<p>The URLs of the tarballs from the official <code>nixos.org</code> channels
(see <a href="command-ref/new-cli/../nix-channel.html">the manual page for <code>nix-channel</code></a>) can be
abbreviated as <code>channel:&lt;channel-name&gt;</code>. For instance, the
following two flags are equivalent:</p>
<pre><code>-I nixpkgs=channel:nixos-21.05
-I nixpkgs=https://nixos.org/channels/nixos-21.05/nixexprs.tar.xz
</code></pre>
<p>You can also fetch source trees using <a href="command-ref/new-cli/./nix3-flake.html#url-like-syntax">flake URLs</a> and add them to the
search path. For instance,</p>
<pre><code>-I nixpkgs=flake:nixpkgs
</code></pre>
<p>specifies that the prefix <code>nixpkgs</code> shall refer to the source tree
downloaded from the <code>nixpkgs</code> entry in the flake registry. Similarly,</p>
<pre><code>-I nixpkgs=flake:github:NixOS/nixpkgs/nixos-22.05
</code></pre>
<p>makes <code>&lt;nixpkgs&gt;</code> refer to a particular branch of the
<code>NixOS/nixpkgs</code> repository on GitHub.</p>
</li>
<li>
<p><code>--override-flake</code> <em>original-ref</em> <em>resolved-ref</em></p>
<p>Override the flake registries, redirecting <em>original-ref</em> to <em>resolved-ref</em>.</p>
</li>
</ul>
<p><strong>Logging-related options:</strong></p>
<ul>
<li>
<p><code>--debug</code></p>
<p>Set the logging verbosity level to 'debug'.</p>
</li>
<li>
<p><code>--log-format</code> <em>format</em></p>
<p>Set the format of log output; one of <code>raw</code>, <code>internal-json</code>, <code>bar</code> or <code>bar-with-logs</code>.</p>
</li>
<li>
<p><code>--print-build-logs</code> / <code>-L</code></p>
<p>Print full build logs on standard error.</p>
</li>
<li>
<p><code>--quiet</code></p>
<p>Decrease the logging verbosity level.</p>
</li>
<li>
<p><code>--verbose</code> / <code>-v</code></p>
<p>Increase the logging verbosity level.</p>
</li>
</ul>
<p><strong>Miscellaneous global options:</strong></p>
<ul>
<li>
<p><code>--help</code></p>
<p>Show usage information.</p>
</li>
<li>
<p><code>--offline</code></p>
<p>Disable substituters and consider all previously downloaded files up-to-date.</p>
</li>
<li>
<p><code>--option</code> <em>name</em> <em>value</em></p>
<p>Set the Nix configuration setting <em>name</em> to <em>value</em> (overriding <code>nix.conf</code>).</p>
</li>
<li>
<p><code>--refresh</code></p>
<p>Consider all previously downloaded files out-of-date.</p>
</li>
<li>
<p><code>--version</code></p>
<p>Show version information.</p>
</li>
</ul>
<p><strong>Options to override configuration settings:</strong></p>
<ul>
<li>
<p><code>--accept-flake-config</code></p>
<p>Enable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--access-tokens</code> <em>value</em></p>
<p>Set the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--allow-dirty</code></p>
<p>Enable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--allow-import-from-derivation</code></p>
<p>Enable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--allow-new-privileges</code></p>
<p>Enable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--allow-symlinked-store</code></p>
<p>Enable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--allow-unsafe-native-code-during-evaluation</code></p>
<p>Enable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--allowed-impure-host-deps</code> <em>value</em></p>
<p>Set the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--allowed-uris</code> <em>value</em></p>
<p>Set the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--allowed-users</code> <em>value</em></p>
<p>Set the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--auto-allocate-uids</code></p>
<p>Enable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--auto-optimise-store</code></p>
<p>Enable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt</code> <em>value</em></p>
<p>Set the <code>bash-prompt</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-prefix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-prefix</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-suffix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-suffix</code> setting.</p>
</li>
<li>
<p><code>--build-hook</code> <em>value</em></p>
<p>Set the <code>build-hook</code> setting.</p>
</li>
<li>
<p><code>--build-poll-interval</code> <em>value</em></p>
<p>Set the <code>build-poll-interval</code> setting.</p>
</li>
<li>
<p><code>--build-users-group</code> <em>value</em></p>
<p>Set the <code>build-users-group</code> setting.</p>
</li>
<li>
<p><code>--builders</code> <em>value</em></p>
<p>Set the <code>builders</code> setting.</p>
</li>
<li>
<p><code>--builders-use-substitutes</code></p>
<p>Enable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--commit-lockfile-summary</code> <em>value</em></p>
<p>Set the <code>commit-lockfile-summary</code> setting.</p>
</li>
<li>
<p><code>--compress-build-log</code></p>
<p>Enable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--connect-timeout</code> <em>value</em></p>
<p>Set the <code>connect-timeout</code> setting.</p>
</li>
<li>
<p><code>--cores</code> <em>value</em></p>
<p>Set the <code>cores</code> setting.</p>
</li>
<li>
<p><code>--diff-hook</code> <em>value</em></p>
<p>Set the <code>diff-hook</code> setting.</p>
</li>
<li>
<p><code>--download-attempts</code> <em>value</em></p>
<p>Set the <code>download-attempts</code> setting.</p>
</li>
<li>
<p><code>--download-speed</code> <em>value</em></p>
<p>Set the <code>download-speed</code> setting.</p>
</li>
<li>
<p><code>--eval-cache</code></p>
<p>Enable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--experimental-features</code> <em>value</em></p>
<p>Set the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-access-tokens</code> <em>value</em></p>
<p>Append to the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-impure-host-deps</code> <em>value</em></p>
<p>Append to the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-uris</code> <em>value</em></p>
<p>Append to the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-users</code> <em>value</em></p>
<p>Append to the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--extra-experimental-features</code> <em>value</em></p>
<p>Append to the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-extra-platforms</code> <em>value</em></p>
<p>Append to the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-hashed-mirrors</code> <em>value</em></p>
<p>Append to the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--extra-ignored-acls</code> <em>value</em></p>
<p>Append to the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--extra-nix-path</code> <em>value</em></p>
<p>Append to the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--extra-platforms</code> <em>value</em></p>
<p>Set the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-plugin-files</code> <em>value</em></p>
<p>Append to the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--extra-sandbox-paths</code> <em>value</em></p>
<p>Append to the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--extra-secret-key-files</code> <em>value</em></p>
<p>Append to the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--extra-substituters</code> <em>value</em></p>
<p>Append to the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-system-features</code> <em>value</em></p>
<p>Append to the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-public-keys</code> <em>value</em></p>
<p>Append to the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-substituters</code> <em>value</em></p>
<p>Append to the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-users</code> <em>value</em></p>
<p>Append to the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--fallback</code></p>
<p>Enable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--filter-syscalls</code></p>
<p>Enable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--flake-registry</code> <em>value</em></p>
<p>Set the <code>flake-registry</code> setting.</p>
</li>
<li>
<p><code>--fsync-metadata</code></p>
<p>Enable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--gc-reserved-space</code> <em>value</em></p>
<p>Set the <code>gc-reserved-space</code> setting.</p>
</li>
<li>
<p><code>--hashed-mirrors</code> <em>value</em></p>
<p>Set the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--http-connections</code> <em>value</em></p>
<p>Set the <code>http-connections</code> setting.</p>
</li>
<li>
<p><code>--http2</code></p>
<p>Enable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--id-count</code> <em>value</em></p>
<p>Set the <code>id-count</code> setting.</p>
</li>
<li>
<p><code>--ignore-try</code></p>
<p>Enable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--ignored-acls</code> <em>value</em></p>
<p>Set the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--impersonate-linux-26</code></p>
<p>Enable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--keep-build-log</code></p>
<p>Enable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--keep-derivations</code></p>
<p>Enable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-env-derivations</code></p>
<p>Enable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-failed</code></p>
<p>Enable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--keep-going</code></p>
<p>Enable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--keep-outputs</code></p>
<p>Enable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--log-lines</code> <em>value</em></p>
<p>Set the <code>log-lines</code> setting.</p>
</li>
<li>
<p><code>--max-build-log-size</code> <em>value</em></p>
<p>Set the <code>max-build-log-size</code> setting.</p>
</li>
<li>
<p><code>--max-free</code> <em>value</em></p>
<p>Set the <code>max-free</code> setting.</p>
</li>
<li>
<p><code>--max-jobs</code> <em>value</em></p>
<p>Set the <code>max-jobs</code> setting.</p>
</li>
<li>
<p><code>--max-silent-time</code> <em>value</em></p>
<p>Set the <code>max-silent-time</code> setting.</p>
</li>
<li>
<p><code>--min-free</code> <em>value</em></p>
<p>Set the <code>min-free</code> setting.</p>
</li>
<li>
<p><code>--min-free-check-interval</code> <em>value</em></p>
<p>Set the <code>min-free-check-interval</code> setting.</p>
</li>
<li>
<p><code>--nar-buffer-size</code> <em>value</em></p>
<p>Set the <code>nar-buffer-size</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-negative-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-negative-ttl</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-positive-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-positive-ttl</code> setting.</p>
</li>
<li>
<p><code>--netrc-file</code> <em>value</em></p>
<p>Set the <code>netrc-file</code> setting.</p>
</li>
<li>
<p><code>--nix-path</code> <em>value</em></p>
<p>Set the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--no-accept-flake-config</code></p>
<p>Disable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--no-allow-dirty</code></p>
<p>Disable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--no-allow-import-from-derivation</code></p>
<p>Disable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--no-allow-new-privileges</code></p>
<p>Disable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--no-allow-symlinked-store</code></p>
<p>Disable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--no-allow-unsafe-native-code-during-evaluation</code></p>
<p>Disable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--no-auto-allocate-uids</code></p>
<p>Disable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--no-auto-optimise-store</code></p>
<p>Disable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--no-builders-use-substitutes</code></p>
<p>Disable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--no-compress-build-log</code></p>
<p>Disable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-eval-cache</code></p>
<p>Disable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--no-fallback</code></p>
<p>Disable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--no-filter-syscalls</code></p>
<p>Disable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--no-fsync-metadata</code></p>
<p>Disable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--no-http2</code></p>
<p>Disable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--no-ignore-try</code></p>
<p>Disable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--no-impersonate-linux-26</code></p>
<p>Disable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--no-keep-build-log</code></p>
<p>Disable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-keep-derivations</code></p>
<p>Disable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-env-derivations</code></p>
<p>Disable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-failed</code></p>
<p>Disable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--no-keep-going</code></p>
<p>Disable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--no-keep-outputs</code></p>
<p>Disable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--no-preallocate-contents</code></p>
<p>Disable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--no-print-missing</code></p>
<p>Disable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--no-pure-eval</code></p>
<p>Disable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--no-require-sigs</code></p>
<p>Disable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--no-restrict-eval</code></p>
<p>Disable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--no-run-diff-hook</code></p>
<p>Disable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--no-sandbox</code></p>
<p>Disable sandboxing.</p>
</li>
<li>
<p><code>--no-sandbox-fallback</code></p>
<p>Disable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--no-show-trace</code></p>
<p>Disable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--no-substitute</code></p>
<p>Disable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--no-sync-before-registering</code></p>
<p>Disable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--no-trace-function-calls</code></p>
<p>Disable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--no-trace-verbose</code></p>
<p>Disable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--no-use-case-hack</code></p>
<p>Disable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--no-use-cgroups</code></p>
<p>Disable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--no-use-registries</code></p>
<p>Disable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--no-use-sqlite-wal</code></p>
<p>Disable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--no-warn-dirty</code></p>
<p>Disable the <code>warn-dirty</code> setting.</p>
</li>
<li>
<p><code>--plugin-files</code> <em>value</em></p>
<p>Set the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--post-build-hook</code> <em>value</em></p>
<p>Set the <code>post-build-hook</code> setting.</p>
</li>
<li>
<p><code>--pre-build-hook</code> <em>value</em></p>
<p>Set the <code>pre-build-hook</code> setting.</p>
</li>
<li>
<p><code>--preallocate-contents</code></p>
<p>Enable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--print-missing</code></p>
<p>Enable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--pure-eval</code></p>
<p>Enable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--relaxed-sandbox</code></p>
<p>Enable sandboxing, but allow builds to disable it.</p>
</li>
<li>
<p><code>--require-sigs</code></p>
<p>Enable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--restrict-eval</code></p>
<p>Enable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--run-diff-hook</code></p>
<p>Enable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--sandbox</code></p>
<p>Enable sandboxing.</p>
</li>
<li>
<p><code>--sandbox-build-dir</code> <em>value</em></p>
<p>Set the <code>sandbox-build-dir</code> setting.</p>
</li>
<li>
<p><code>--sandbox-dev-shm-size</code> <em>value</em></p>
<p>Set the <code>sandbox-dev-shm-size</code> setting.</p>
</li>
<li>
<p><code>--sandbox-fallback</code></p>
<p>Enable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--sandbox-paths</code> <em>value</em></p>
<p>Set the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--secret-key-files</code> <em>value</em></p>
<p>Set the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--show-trace</code></p>
<p>Enable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--stalled-download-timeout</code> <em>value</em></p>
<p>Set the <code>stalled-download-timeout</code> setting.</p>
</li>
<li>
<p><code>--start-id</code> <em>value</em></p>
<p>Set the <code>start-id</code> setting.</p>
</li>
<li>
<p><code>--store</code> <em>value</em></p>
<p>Set the <code>store</code> setting.</p>
</li>
<li>
<p><code>--substitute</code></p>
<p>Enable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--substituters</code> <em>value</em></p>
<p>Set the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--sync-before-registering</code></p>
<p>Enable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--system</code> <em>value</em></p>
<p>Set the <code>system</code> setting.</p>
</li>
<li>
<p><code>--system-features</code> <em>value</em></p>
<p>Set the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--tarball-ttl</code> <em>value</em></p>
<p>Set the <code>tarball-ttl</code> setting.</p>
</li>
<li>
<p><code>--timeout</code> <em>value</em></p>
<p>Set the <code>timeout</code> setting.</p>
</li>
<li>
<p><code>--trace-function-calls</code></p>
<p>Enable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--trace-verbose</code></p>
<p>Enable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--trusted-public-keys</code> <em>value</em></p>
<p>Set the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--trusted-substituters</code> <em>value</em></p>
<p>Set the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--trusted-users</code> <em>value</em></p>
<p>Set the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--use-case-hack</code></p>
<p>Enable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--use-cgroups</code></p>
<p>Enable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--use-registries</code></p>
<p>Enable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--use-sqlite-wal</code></p>
<p>Enable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--user-agent-suffix</code> <em>value</em></p>
<p>Set the <code>user-agent-suffix</code> setting.</p>
</li>
<li>
<p><code>--warn-dirty</code></p>
<p>Enable the <code>warn-dirty</code> setting.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p><strong>Warning</strong> <br />
This program is <strong>experimental</strong> and its interface is subject to change.</p>
</blockquote>
<h1 id="name-58"><a class="header" href="#name-58">Name</a></h1>
<p><code>nix profile rollback</code> - roll back to the previous version or a specified version of a profile</p>
<h1 id="synopsis-89"><a class="header" href="#synopsis-89">Synopsis</a></h1>
<p><code>nix profile rollback</code> [<em>option</em>...] </p>
<h1 id="examples-58"><a class="header" href="#examples-58">Examples</a></h1>
<ul>
<li>
<p>Roll back your default profile to the previous version:</p>
<pre><code class="language-console"># nix profile rollback
switching profile from version 519 to 518
</code></pre>
</li>
<li>
<p>Switch your default profile to version 510:</p>
<pre><code class="language-console"># nix profile rollback --to 510
switching profile from version 518 to 510
</code></pre>
</li>
</ul>
<h1 id="description-78"><a class="header" href="#description-78">Description</a></h1>
<p>This command switches a profile to the most recent version older
than the currently active version, or if <code>--to</code> <em>N</em> is given, to
version <em>N</em> of the profile. To see the available versions of a
profile, use <code>nix profile history</code>.</p>
<h1 id="options-42"><a class="header" href="#options-42">Options</a></h1>
<ul>
<li>
<p><code>--dry-run</code></p>
<p>Show what this command would do without doing it.</p>
</li>
<li>
<p><code>--profile</code> <em>path</em></p>
<p>The profile to operate on.</p>
</li>
<li>
<p><code>--to</code> <em>version</em></p>
<p>The profile version to roll back to.</p>
</li>
</ul>
<p><strong>Logging-related options:</strong></p>
<ul>
<li>
<p><code>--debug</code></p>
<p>Set the logging verbosity level to 'debug'.</p>
</li>
<li>
<p><code>--log-format</code> <em>format</em></p>
<p>Set the format of log output; one of <code>raw</code>, <code>internal-json</code>, <code>bar</code> or <code>bar-with-logs</code>.</p>
</li>
<li>
<p><code>--print-build-logs</code> / <code>-L</code></p>
<p>Print full build logs on standard error.</p>
</li>
<li>
<p><code>--quiet</code></p>
<p>Decrease the logging verbosity level.</p>
</li>
<li>
<p><code>--verbose</code> / <code>-v</code></p>
<p>Increase the logging verbosity level.</p>
</li>
</ul>
<p><strong>Miscellaneous global options:</strong></p>
<ul>
<li>
<p><code>--help</code></p>
<p>Show usage information.</p>
</li>
<li>
<p><code>--offline</code></p>
<p>Disable substituters and consider all previously downloaded files up-to-date.</p>
</li>
<li>
<p><code>--option</code> <em>name</em> <em>value</em></p>
<p>Set the Nix configuration setting <em>name</em> to <em>value</em> (overriding <code>nix.conf</code>).</p>
</li>
<li>
<p><code>--refresh</code></p>
<p>Consider all previously downloaded files out-of-date.</p>
</li>
<li>
<p><code>--version</code></p>
<p>Show version information.</p>
</li>
</ul>
<p><strong>Options to override configuration settings:</strong></p>
<ul>
<li>
<p><code>--accept-flake-config</code></p>
<p>Enable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--access-tokens</code> <em>value</em></p>
<p>Set the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--allow-dirty</code></p>
<p>Enable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--allow-import-from-derivation</code></p>
<p>Enable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--allow-new-privileges</code></p>
<p>Enable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--allow-symlinked-store</code></p>
<p>Enable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--allow-unsafe-native-code-during-evaluation</code></p>
<p>Enable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--allowed-impure-host-deps</code> <em>value</em></p>
<p>Set the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--allowed-uris</code> <em>value</em></p>
<p>Set the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--allowed-users</code> <em>value</em></p>
<p>Set the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--auto-allocate-uids</code></p>
<p>Enable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--auto-optimise-store</code></p>
<p>Enable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt</code> <em>value</em></p>
<p>Set the <code>bash-prompt</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-prefix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-prefix</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-suffix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-suffix</code> setting.</p>
</li>
<li>
<p><code>--build-hook</code> <em>value</em></p>
<p>Set the <code>build-hook</code> setting.</p>
</li>
<li>
<p><code>--build-poll-interval</code> <em>value</em></p>
<p>Set the <code>build-poll-interval</code> setting.</p>
</li>
<li>
<p><code>--build-users-group</code> <em>value</em></p>
<p>Set the <code>build-users-group</code> setting.</p>
</li>
<li>
<p><code>--builders</code> <em>value</em></p>
<p>Set the <code>builders</code> setting.</p>
</li>
<li>
<p><code>--builders-use-substitutes</code></p>
<p>Enable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--commit-lockfile-summary</code> <em>value</em></p>
<p>Set the <code>commit-lockfile-summary</code> setting.</p>
</li>
<li>
<p><code>--compress-build-log</code></p>
<p>Enable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--connect-timeout</code> <em>value</em></p>
<p>Set the <code>connect-timeout</code> setting.</p>
</li>
<li>
<p><code>--cores</code> <em>value</em></p>
<p>Set the <code>cores</code> setting.</p>
</li>
<li>
<p><code>--diff-hook</code> <em>value</em></p>
<p>Set the <code>diff-hook</code> setting.</p>
</li>
<li>
<p><code>--download-attempts</code> <em>value</em></p>
<p>Set the <code>download-attempts</code> setting.</p>
</li>
<li>
<p><code>--download-speed</code> <em>value</em></p>
<p>Set the <code>download-speed</code> setting.</p>
</li>
<li>
<p><code>--eval-cache</code></p>
<p>Enable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--experimental-features</code> <em>value</em></p>
<p>Set the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-access-tokens</code> <em>value</em></p>
<p>Append to the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-impure-host-deps</code> <em>value</em></p>
<p>Append to the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-uris</code> <em>value</em></p>
<p>Append to the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-users</code> <em>value</em></p>
<p>Append to the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--extra-experimental-features</code> <em>value</em></p>
<p>Append to the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-extra-platforms</code> <em>value</em></p>
<p>Append to the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-hashed-mirrors</code> <em>value</em></p>
<p>Append to the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--extra-ignored-acls</code> <em>value</em></p>
<p>Append to the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--extra-nix-path</code> <em>value</em></p>
<p>Append to the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--extra-platforms</code> <em>value</em></p>
<p>Set the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-plugin-files</code> <em>value</em></p>
<p>Append to the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--extra-sandbox-paths</code> <em>value</em></p>
<p>Append to the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--extra-secret-key-files</code> <em>value</em></p>
<p>Append to the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--extra-substituters</code> <em>value</em></p>
<p>Append to the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-system-features</code> <em>value</em></p>
<p>Append to the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-public-keys</code> <em>value</em></p>
<p>Append to the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-substituters</code> <em>value</em></p>
<p>Append to the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-users</code> <em>value</em></p>
<p>Append to the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--fallback</code></p>
<p>Enable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--filter-syscalls</code></p>
<p>Enable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--flake-registry</code> <em>value</em></p>
<p>Set the <code>flake-registry</code> setting.</p>
</li>
<li>
<p><code>--fsync-metadata</code></p>
<p>Enable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--gc-reserved-space</code> <em>value</em></p>
<p>Set the <code>gc-reserved-space</code> setting.</p>
</li>
<li>
<p><code>--hashed-mirrors</code> <em>value</em></p>
<p>Set the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--http-connections</code> <em>value</em></p>
<p>Set the <code>http-connections</code> setting.</p>
</li>
<li>
<p><code>--http2</code></p>
<p>Enable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--id-count</code> <em>value</em></p>
<p>Set the <code>id-count</code> setting.</p>
</li>
<li>
<p><code>--ignore-try</code></p>
<p>Enable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--ignored-acls</code> <em>value</em></p>
<p>Set the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--impersonate-linux-26</code></p>
<p>Enable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--keep-build-log</code></p>
<p>Enable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--keep-derivations</code></p>
<p>Enable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-env-derivations</code></p>
<p>Enable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-failed</code></p>
<p>Enable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--keep-going</code></p>
<p>Enable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--keep-outputs</code></p>
<p>Enable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--log-lines</code> <em>value</em></p>
<p>Set the <code>log-lines</code> setting.</p>
</li>
<li>
<p><code>--max-build-log-size</code> <em>value</em></p>
<p>Set the <code>max-build-log-size</code> setting.</p>
</li>
<li>
<p><code>--max-free</code> <em>value</em></p>
<p>Set the <code>max-free</code> setting.</p>
</li>
<li>
<p><code>--max-jobs</code> <em>value</em></p>
<p>Set the <code>max-jobs</code> setting.</p>
</li>
<li>
<p><code>--max-silent-time</code> <em>value</em></p>
<p>Set the <code>max-silent-time</code> setting.</p>
</li>
<li>
<p><code>--min-free</code> <em>value</em></p>
<p>Set the <code>min-free</code> setting.</p>
</li>
<li>
<p><code>--min-free-check-interval</code> <em>value</em></p>
<p>Set the <code>min-free-check-interval</code> setting.</p>
</li>
<li>
<p><code>--nar-buffer-size</code> <em>value</em></p>
<p>Set the <code>nar-buffer-size</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-negative-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-negative-ttl</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-positive-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-positive-ttl</code> setting.</p>
</li>
<li>
<p><code>--netrc-file</code> <em>value</em></p>
<p>Set the <code>netrc-file</code> setting.</p>
</li>
<li>
<p><code>--nix-path</code> <em>value</em></p>
<p>Set the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--no-accept-flake-config</code></p>
<p>Disable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--no-allow-dirty</code></p>
<p>Disable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--no-allow-import-from-derivation</code></p>
<p>Disable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--no-allow-new-privileges</code></p>
<p>Disable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--no-allow-symlinked-store</code></p>
<p>Disable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--no-allow-unsafe-native-code-during-evaluation</code></p>
<p>Disable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--no-auto-allocate-uids</code></p>
<p>Disable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--no-auto-optimise-store</code></p>
<p>Disable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--no-builders-use-substitutes</code></p>
<p>Disable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--no-compress-build-log</code></p>
<p>Disable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-eval-cache</code></p>
<p>Disable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--no-fallback</code></p>
<p>Disable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--no-filter-syscalls</code></p>
<p>Disable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--no-fsync-metadata</code></p>
<p>Disable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--no-http2</code></p>
<p>Disable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--no-ignore-try</code></p>
<p>Disable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--no-impersonate-linux-26</code></p>
<p>Disable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--no-keep-build-log</code></p>
<p>Disable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-keep-derivations</code></p>
<p>Disable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-env-derivations</code></p>
<p>Disable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-failed</code></p>
<p>Disable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--no-keep-going</code></p>
<p>Disable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--no-keep-outputs</code></p>
<p>Disable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--no-preallocate-contents</code></p>
<p>Disable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--no-print-missing</code></p>
<p>Disable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--no-pure-eval</code></p>
<p>Disable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--no-require-sigs</code></p>
<p>Disable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--no-restrict-eval</code></p>
<p>Disable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--no-run-diff-hook</code></p>
<p>Disable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--no-sandbox</code></p>
<p>Disable sandboxing.</p>
</li>
<li>
<p><code>--no-sandbox-fallback</code></p>
<p>Disable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--no-show-trace</code></p>
<p>Disable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--no-substitute</code></p>
<p>Disable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--no-sync-before-registering</code></p>
<p>Disable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--no-trace-function-calls</code></p>
<p>Disable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--no-trace-verbose</code></p>
<p>Disable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--no-use-case-hack</code></p>
<p>Disable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--no-use-cgroups</code></p>
<p>Disable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--no-use-registries</code></p>
<p>Disable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--no-use-sqlite-wal</code></p>
<p>Disable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--no-warn-dirty</code></p>
<p>Disable the <code>warn-dirty</code> setting.</p>
</li>
<li>
<p><code>--plugin-files</code> <em>value</em></p>
<p>Set the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--post-build-hook</code> <em>value</em></p>
<p>Set the <code>post-build-hook</code> setting.</p>
</li>
<li>
<p><code>--pre-build-hook</code> <em>value</em></p>
<p>Set the <code>pre-build-hook</code> setting.</p>
</li>
<li>
<p><code>--preallocate-contents</code></p>
<p>Enable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--print-missing</code></p>
<p>Enable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--pure-eval</code></p>
<p>Enable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--relaxed-sandbox</code></p>
<p>Enable sandboxing, but allow builds to disable it.</p>
</li>
<li>
<p><code>--require-sigs</code></p>
<p>Enable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--restrict-eval</code></p>
<p>Enable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--run-diff-hook</code></p>
<p>Enable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--sandbox</code></p>
<p>Enable sandboxing.</p>
</li>
<li>
<p><code>--sandbox-build-dir</code> <em>value</em></p>
<p>Set the <code>sandbox-build-dir</code> setting.</p>
</li>
<li>
<p><code>--sandbox-dev-shm-size</code> <em>value</em></p>
<p>Set the <code>sandbox-dev-shm-size</code> setting.</p>
</li>
<li>
<p><code>--sandbox-fallback</code></p>
<p>Enable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--sandbox-paths</code> <em>value</em></p>
<p>Set the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--secret-key-files</code> <em>value</em></p>
<p>Set the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--show-trace</code></p>
<p>Enable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--stalled-download-timeout</code> <em>value</em></p>
<p>Set the <code>stalled-download-timeout</code> setting.</p>
</li>
<li>
<p><code>--start-id</code> <em>value</em></p>
<p>Set the <code>start-id</code> setting.</p>
</li>
<li>
<p><code>--store</code> <em>value</em></p>
<p>Set the <code>store</code> setting.</p>
</li>
<li>
<p><code>--substitute</code></p>
<p>Enable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--substituters</code> <em>value</em></p>
<p>Set the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--sync-before-registering</code></p>
<p>Enable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--system</code> <em>value</em></p>
<p>Set the <code>system</code> setting.</p>
</li>
<li>
<p><code>--system-features</code> <em>value</em></p>
<p>Set the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--tarball-ttl</code> <em>value</em></p>
<p>Set the <code>tarball-ttl</code> setting.</p>
</li>
<li>
<p><code>--timeout</code> <em>value</em></p>
<p>Set the <code>timeout</code> setting.</p>
</li>
<li>
<p><code>--trace-function-calls</code></p>
<p>Enable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--trace-verbose</code></p>
<p>Enable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--trusted-public-keys</code> <em>value</em></p>
<p>Set the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--trusted-substituters</code> <em>value</em></p>
<p>Set the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--trusted-users</code> <em>value</em></p>
<p>Set the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--use-case-hack</code></p>
<p>Enable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--use-cgroups</code></p>
<p>Enable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--use-registries</code></p>
<p>Enable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--use-sqlite-wal</code></p>
<p>Enable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--user-agent-suffix</code> <em>value</em></p>
<p>Set the <code>user-agent-suffix</code> setting.</p>
</li>
<li>
<p><code>--warn-dirty</code></p>
<p>Enable the <code>warn-dirty</code> setting.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p><strong>Warning</strong> <br />
This program is <strong>experimental</strong> and its interface is subject to change.</p>
</blockquote>
<h1 id="name-59"><a class="header" href="#name-59">Name</a></h1>
<p><code>nix profile upgrade</code> - upgrade packages using their most recent flake</p>
<h1 id="synopsis-90"><a class="header" href="#synopsis-90">Synopsis</a></h1>
<p><code>nix profile upgrade</code> [<em>option</em>...] <em>elements</em>...</p>
<h1 id="examples-59"><a class="header" href="#examples-59">Examples</a></h1>
<ul>
<li>
<p>Upgrade all packages that were installed using an unlocked flake
reference:</p>
<pre><code class="language-console"># nix profile upgrade '.*'
</code></pre>
</li>
<li>
<p>Upgrade a specific package:</p>
<pre><code class="language-console"># nix profile upgrade packages.x86_64-linux.hello
</code></pre>
</li>
<li>
<p>Upgrade a specific profile element by number:</p>
<pre><code class="language-console"># nix profile list
0 flake:nixpkgs#legacyPackages.x86_64-linux.spotify …

# nix profile upgrade 0
</code></pre>
</li>
</ul>
<h1 id="description-79"><a class="header" href="#description-79">Description</a></h1>
<p>This command upgrades a previously installed package in a Nix profile,
by fetching and evaluating the latest version of the flake from which
the package was installed.</p>
<blockquote>
<p><strong>Warning</strong></p>
<p>This only works if you used an <em>unlocked</em> flake reference at
installation time, e.g. <code>nixpkgs#hello</code>. It does not work if you
used a <em>locked</em> flake reference
(e.g. <code>github:NixOS/nixpkgs/13d0c311e3ae923a00f734b43fd1d35b47d8943a#hello</code>),
since in that case the &quot;latest version&quot; is always the same.</p>
</blockquote>
<h1 id="options-43"><a class="header" href="#options-43">Options</a></h1>
<ul>
<li>
<p><code>--profile</code> <em>path</em></p>
<p>The profile to operate on.</p>
</li>
</ul>
<p><strong>Common evaluation options:</strong></p>
<ul>
<li>
<p><code>--arg</code> <em>name</em> <em>expr</em></p>
<p>Pass the value <em>expr</em> as the argument <em>name</em> to Nix functions.</p>
</li>
<li>
<p><code>--argstr</code> <em>name</em> <em>string</em></p>
<p>Pass the string <em>string</em> as the argument <em>name</em> to Nix functions.</p>
</li>
<li>
<p><code>--debugger</code></p>
<p>Start an interactive environment if evaluation fails.</p>
</li>
<li>
<p><code>--eval-store</code> <em>store-url</em></p>
<p>The Nix store to use for evaluations.</p>
</li>
<li>
<p><code>--impure</code></p>
<p>Allow access to mutable paths and repositories.</p>
</li>
<li>
<p><code>--include</code> / <code>-I</code> <em>path</em></p>
<p>Add <em>path</em> to the Nix search path. The Nix search path is
initialized from the colon-separated <a href="command-ref/new-cli/../../command-ref/env-common.html#env-NIX_PATH"><code>NIX_PATH</code></a> environment
variable, and is used to look up the location of Nix expressions using <a href="command-ref/new-cli/../../language/values.html#type-path">paths</a> enclosed in angle
brackets (i.e., <code>&lt;nixpkgs&gt;</code>).</p>
<p>For instance, passing</p>
<pre><code>-I /home/eelco/Dev
-I /etc/nixos
</code></pre>
<p>will cause Nix to look for paths relative to <code>/home/eelco/Dev</code> and
<code>/etc/nixos</code>, in that order. This is equivalent to setting the
<code>NIX_PATH</code> environment variable to</p>
<pre><code>/home/eelco/Dev:/etc/nixos
</code></pre>
<p>It is also possible to match paths against a prefix. For example,
passing</p>
<pre><code>-I nixpkgs=/home/eelco/Dev/nixpkgs-branch
-I /etc/nixos
</code></pre>
<p>will cause Nix to search for <code>&lt;nixpkgs/path&gt;</code> in
<code>/home/eelco/Dev/nixpkgs-branch/path</code> and <code>/etc/nixos/nixpkgs/path</code>.</p>
<p>If a path in the Nix search path starts with <code>http://</code> or <code>https://</code>,
it is interpreted as the URL of a tarball that will be downloaded and
unpacked to a temporary location. The tarball must consist of a single
top-level directory. For example, passing</p>
<pre><code>-I nixpkgs=https://github.com/NixOS/nixpkgs/archive/master.tar.gz
</code></pre>
<p>tells Nix to download and use the current contents of the <code>master</code>
branch in the <code>nixpkgs</code> repository.</p>
<p>The URLs of the tarballs from the official <code>nixos.org</code> channels
(see <a href="command-ref/new-cli/../nix-channel.html">the manual page for <code>nix-channel</code></a>) can be
abbreviated as <code>channel:&lt;channel-name&gt;</code>. For instance, the
following two flags are equivalent:</p>
<pre><code>-I nixpkgs=channel:nixos-21.05
-I nixpkgs=https://nixos.org/channels/nixos-21.05/nixexprs.tar.xz
</code></pre>
<p>You can also fetch source trees using <a href="command-ref/new-cli/./nix3-flake.html#url-like-syntax">flake URLs</a> and add them to the
search path. For instance,</p>
<pre><code>-I nixpkgs=flake:nixpkgs
</code></pre>
<p>specifies that the prefix <code>nixpkgs</code> shall refer to the source tree
downloaded from the <code>nixpkgs</code> entry in the flake registry. Similarly,</p>
<pre><code>-I nixpkgs=flake:github:NixOS/nixpkgs/nixos-22.05
</code></pre>
<p>makes <code>&lt;nixpkgs&gt;</code> refer to a particular branch of the
<code>NixOS/nixpkgs</code> repository on GitHub.</p>
</li>
<li>
<p><code>--override-flake</code> <em>original-ref</em> <em>resolved-ref</em></p>
<p>Override the flake registries, redirecting <em>original-ref</em> to <em>resolved-ref</em>.</p>
</li>
</ul>
<p><strong>Common flake-related options:</strong></p>
<ul>
<li>
<p><code>--commit-lock-file</code></p>
<p>Commit changes to the flake's lock file.</p>
</li>
<li>
<p><code>--inputs-from</code> <em>flake-url</em></p>
<p>Use the inputs of the specified flake as registry entries.</p>
</li>
<li>
<p><code>--no-registries</code></p>
<p>Don't allow lookups in the flake registries. This option is deprecated; use <code>--no-use-registries</code>.</p>
</li>
<li>
<p><code>--no-update-lock-file</code></p>
<p>Do not allow any updates to the flake's lock file.</p>
</li>
<li>
<p><code>--no-write-lock-file</code></p>
<p>Do not write the flake's newly generated lock file.</p>
</li>
<li>
<p><code>--override-input</code> <em>input-path</em> <em>flake-url</em></p>
<p>Override a specific flake input (e.g. <code>dwarffs/nixpkgs</code>). This implies <code>--no-write-lock-file</code>.</p>
</li>
<li>
<p><code>--recreate-lock-file</code></p>
<p>Recreate the flake's lock file from scratch.</p>
</li>
<li>
<p><code>--update-input</code> <em>input-path</em></p>
<p>Update a specific flake input (ignoring its previous entry in the lock file).</p>
</li>
</ul>
<p><strong>Logging-related options:</strong></p>
<ul>
<li>
<p><code>--debug</code></p>
<p>Set the logging verbosity level to 'debug'.</p>
</li>
<li>
<p><code>--log-format</code> <em>format</em></p>
<p>Set the format of log output; one of <code>raw</code>, <code>internal-json</code>, <code>bar</code> or <code>bar-with-logs</code>.</p>
</li>
<li>
<p><code>--print-build-logs</code> / <code>-L</code></p>
<p>Print full build logs on standard error.</p>
</li>
<li>
<p><code>--quiet</code></p>
<p>Decrease the logging verbosity level.</p>
</li>
<li>
<p><code>--verbose</code> / <code>-v</code></p>
<p>Increase the logging verbosity level.</p>
</li>
</ul>
<p><strong>Miscellaneous global options:</strong></p>
<ul>
<li>
<p><code>--help</code></p>
<p>Show usage information.</p>
</li>
<li>
<p><code>--offline</code></p>
<p>Disable substituters and consider all previously downloaded files up-to-date.</p>
</li>
<li>
<p><code>--option</code> <em>name</em> <em>value</em></p>
<p>Set the Nix configuration setting <em>name</em> to <em>value</em> (overriding <code>nix.conf</code>).</p>
</li>
<li>
<p><code>--refresh</code></p>
<p>Consider all previously downloaded files out-of-date.</p>
</li>
<li>
<p><code>--version</code></p>
<p>Show version information.</p>
</li>
</ul>
<p><strong>Options that change the interpretation of installables:</strong></p>
<ul>
<li>
<p><code>--derivation</code></p>
<p>Operate on the <a href="command-ref/new-cli/../../glossary.html#gloss-store-derivation">store derivation</a> rather than its outputs.</p>
</li>
<li>
<p><code>--expr</code> <em>expr</em></p>
<p>Interpret installables as attribute paths relative to the Nix expression <em>expr</em>.</p>
</li>
<li>
<p><code>--file</code> / <code>-f</code> <em>file</em></p>
<p>Interpret installables as attribute paths relative to the Nix expression stored in <em>file</em>. If <em>file</em> is the character -, then a Nix expression will be read from standard input. Implies <code>--impure</code>.</p>
</li>
</ul>
<p><strong>Options to override configuration settings:</strong></p>
<ul>
<li>
<p><code>--accept-flake-config</code></p>
<p>Enable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--access-tokens</code> <em>value</em></p>
<p>Set the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--allow-dirty</code></p>
<p>Enable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--allow-import-from-derivation</code></p>
<p>Enable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--allow-new-privileges</code></p>
<p>Enable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--allow-symlinked-store</code></p>
<p>Enable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--allow-unsafe-native-code-during-evaluation</code></p>
<p>Enable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--allowed-impure-host-deps</code> <em>value</em></p>
<p>Set the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--allowed-uris</code> <em>value</em></p>
<p>Set the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--allowed-users</code> <em>value</em></p>
<p>Set the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--auto-allocate-uids</code></p>
<p>Enable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--auto-optimise-store</code></p>
<p>Enable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt</code> <em>value</em></p>
<p>Set the <code>bash-prompt</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-prefix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-prefix</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-suffix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-suffix</code> setting.</p>
</li>
<li>
<p><code>--build-hook</code> <em>value</em></p>
<p>Set the <code>build-hook</code> setting.</p>
</li>
<li>
<p><code>--build-poll-interval</code> <em>value</em></p>
<p>Set the <code>build-poll-interval</code> setting.</p>
</li>
<li>
<p><code>--build-users-group</code> <em>value</em></p>
<p>Set the <code>build-users-group</code> setting.</p>
</li>
<li>
<p><code>--builders</code> <em>value</em></p>
<p>Set the <code>builders</code> setting.</p>
</li>
<li>
<p><code>--builders-use-substitutes</code></p>
<p>Enable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--commit-lockfile-summary</code> <em>value</em></p>
<p>Set the <code>commit-lockfile-summary</code> setting.</p>
</li>
<li>
<p><code>--compress-build-log</code></p>
<p>Enable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--connect-timeout</code> <em>value</em></p>
<p>Set the <code>connect-timeout</code> setting.</p>
</li>
<li>
<p><code>--cores</code> <em>value</em></p>
<p>Set the <code>cores</code> setting.</p>
</li>
<li>
<p><code>--diff-hook</code> <em>value</em></p>
<p>Set the <code>diff-hook</code> setting.</p>
</li>
<li>
<p><code>--download-attempts</code> <em>value</em></p>
<p>Set the <code>download-attempts</code> setting.</p>
</li>
<li>
<p><code>--download-speed</code> <em>value</em></p>
<p>Set the <code>download-speed</code> setting.</p>
</li>
<li>
<p><code>--eval-cache</code></p>
<p>Enable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--experimental-features</code> <em>value</em></p>
<p>Set the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-access-tokens</code> <em>value</em></p>
<p>Append to the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-impure-host-deps</code> <em>value</em></p>
<p>Append to the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-uris</code> <em>value</em></p>
<p>Append to the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-users</code> <em>value</em></p>
<p>Append to the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--extra-experimental-features</code> <em>value</em></p>
<p>Append to the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-extra-platforms</code> <em>value</em></p>
<p>Append to the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-hashed-mirrors</code> <em>value</em></p>
<p>Append to the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--extra-ignored-acls</code> <em>value</em></p>
<p>Append to the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--extra-nix-path</code> <em>value</em></p>
<p>Append to the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--extra-platforms</code> <em>value</em></p>
<p>Set the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-plugin-files</code> <em>value</em></p>
<p>Append to the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--extra-sandbox-paths</code> <em>value</em></p>
<p>Append to the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--extra-secret-key-files</code> <em>value</em></p>
<p>Append to the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--extra-substituters</code> <em>value</em></p>
<p>Append to the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-system-features</code> <em>value</em></p>
<p>Append to the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-public-keys</code> <em>value</em></p>
<p>Append to the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-substituters</code> <em>value</em></p>
<p>Append to the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-users</code> <em>value</em></p>
<p>Append to the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--fallback</code></p>
<p>Enable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--filter-syscalls</code></p>
<p>Enable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--flake-registry</code> <em>value</em></p>
<p>Set the <code>flake-registry</code> setting.</p>
</li>
<li>
<p><code>--fsync-metadata</code></p>
<p>Enable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--gc-reserved-space</code> <em>value</em></p>
<p>Set the <code>gc-reserved-space</code> setting.</p>
</li>
<li>
<p><code>--hashed-mirrors</code> <em>value</em></p>
<p>Set the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--http-connections</code> <em>value</em></p>
<p>Set the <code>http-connections</code> setting.</p>
</li>
<li>
<p><code>--http2</code></p>
<p>Enable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--id-count</code> <em>value</em></p>
<p>Set the <code>id-count</code> setting.</p>
</li>
<li>
<p><code>--ignore-try</code></p>
<p>Enable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--ignored-acls</code> <em>value</em></p>
<p>Set the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--impersonate-linux-26</code></p>
<p>Enable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--keep-build-log</code></p>
<p>Enable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--keep-derivations</code></p>
<p>Enable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-env-derivations</code></p>
<p>Enable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-failed</code></p>
<p>Enable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--keep-going</code></p>
<p>Enable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--keep-outputs</code></p>
<p>Enable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--log-lines</code> <em>value</em></p>
<p>Set the <code>log-lines</code> setting.</p>
</li>
<li>
<p><code>--max-build-log-size</code> <em>value</em></p>
<p>Set the <code>max-build-log-size</code> setting.</p>
</li>
<li>
<p><code>--max-free</code> <em>value</em></p>
<p>Set the <code>max-free</code> setting.</p>
</li>
<li>
<p><code>--max-jobs</code> <em>value</em></p>
<p>Set the <code>max-jobs</code> setting.</p>
</li>
<li>
<p><code>--max-silent-time</code> <em>value</em></p>
<p>Set the <code>max-silent-time</code> setting.</p>
</li>
<li>
<p><code>--min-free</code> <em>value</em></p>
<p>Set the <code>min-free</code> setting.</p>
</li>
<li>
<p><code>--min-free-check-interval</code> <em>value</em></p>
<p>Set the <code>min-free-check-interval</code> setting.</p>
</li>
<li>
<p><code>--nar-buffer-size</code> <em>value</em></p>
<p>Set the <code>nar-buffer-size</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-negative-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-negative-ttl</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-positive-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-positive-ttl</code> setting.</p>
</li>
<li>
<p><code>--netrc-file</code> <em>value</em></p>
<p>Set the <code>netrc-file</code> setting.</p>
</li>
<li>
<p><code>--nix-path</code> <em>value</em></p>
<p>Set the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--no-accept-flake-config</code></p>
<p>Disable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--no-allow-dirty</code></p>
<p>Disable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--no-allow-import-from-derivation</code></p>
<p>Disable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--no-allow-new-privileges</code></p>
<p>Disable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--no-allow-symlinked-store</code></p>
<p>Disable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--no-allow-unsafe-native-code-during-evaluation</code></p>
<p>Disable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--no-auto-allocate-uids</code></p>
<p>Disable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--no-auto-optimise-store</code></p>
<p>Disable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--no-builders-use-substitutes</code></p>
<p>Disable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--no-compress-build-log</code></p>
<p>Disable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-eval-cache</code></p>
<p>Disable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--no-fallback</code></p>
<p>Disable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--no-filter-syscalls</code></p>
<p>Disable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--no-fsync-metadata</code></p>
<p>Disable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--no-http2</code></p>
<p>Disable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--no-ignore-try</code></p>
<p>Disable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--no-impersonate-linux-26</code></p>
<p>Disable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--no-keep-build-log</code></p>
<p>Disable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-keep-derivations</code></p>
<p>Disable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-env-derivations</code></p>
<p>Disable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-failed</code></p>
<p>Disable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--no-keep-going</code></p>
<p>Disable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--no-keep-outputs</code></p>
<p>Disable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--no-preallocate-contents</code></p>
<p>Disable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--no-print-missing</code></p>
<p>Disable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--no-pure-eval</code></p>
<p>Disable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--no-require-sigs</code></p>
<p>Disable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--no-restrict-eval</code></p>
<p>Disable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--no-run-diff-hook</code></p>
<p>Disable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--no-sandbox</code></p>
<p>Disable sandboxing.</p>
</li>
<li>
<p><code>--no-sandbox-fallback</code></p>
<p>Disable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--no-show-trace</code></p>
<p>Disable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--no-substitute</code></p>
<p>Disable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--no-sync-before-registering</code></p>
<p>Disable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--no-trace-function-calls</code></p>
<p>Disable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--no-trace-verbose</code></p>
<p>Disable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--no-use-case-hack</code></p>
<p>Disable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--no-use-cgroups</code></p>
<p>Disable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--no-use-registries</code></p>
<p>Disable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--no-use-sqlite-wal</code></p>
<p>Disable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--no-warn-dirty</code></p>
<p>Disable the <code>warn-dirty</code> setting.</p>
</li>
<li>
<p><code>--plugin-files</code> <em>value</em></p>
<p>Set the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--post-build-hook</code> <em>value</em></p>
<p>Set the <code>post-build-hook</code> setting.</p>
</li>
<li>
<p><code>--pre-build-hook</code> <em>value</em></p>
<p>Set the <code>pre-build-hook</code> setting.</p>
</li>
<li>
<p><code>--preallocate-contents</code></p>
<p>Enable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--print-missing</code></p>
<p>Enable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--pure-eval</code></p>
<p>Enable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--relaxed-sandbox</code></p>
<p>Enable sandboxing, but allow builds to disable it.</p>
</li>
<li>
<p><code>--require-sigs</code></p>
<p>Enable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--restrict-eval</code></p>
<p>Enable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--run-diff-hook</code></p>
<p>Enable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--sandbox</code></p>
<p>Enable sandboxing.</p>
</li>
<li>
<p><code>--sandbox-build-dir</code> <em>value</em></p>
<p>Set the <code>sandbox-build-dir</code> setting.</p>
</li>
<li>
<p><code>--sandbox-dev-shm-size</code> <em>value</em></p>
<p>Set the <code>sandbox-dev-shm-size</code> setting.</p>
</li>
<li>
<p><code>--sandbox-fallback</code></p>
<p>Enable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--sandbox-paths</code> <em>value</em></p>
<p>Set the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--secret-key-files</code> <em>value</em></p>
<p>Set the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--show-trace</code></p>
<p>Enable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--stalled-download-timeout</code> <em>value</em></p>
<p>Set the <code>stalled-download-timeout</code> setting.</p>
</li>
<li>
<p><code>--start-id</code> <em>value</em></p>
<p>Set the <code>start-id</code> setting.</p>
</li>
<li>
<p><code>--store</code> <em>value</em></p>
<p>Set the <code>store</code> setting.</p>
</li>
<li>
<p><code>--substitute</code></p>
<p>Enable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--substituters</code> <em>value</em></p>
<p>Set the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--sync-before-registering</code></p>
<p>Enable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--system</code> <em>value</em></p>
<p>Set the <code>system</code> setting.</p>
</li>
<li>
<p><code>--system-features</code> <em>value</em></p>
<p>Set the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--tarball-ttl</code> <em>value</em></p>
<p>Set the <code>tarball-ttl</code> setting.</p>
</li>
<li>
<p><code>--timeout</code> <em>value</em></p>
<p>Set the <code>timeout</code> setting.</p>
</li>
<li>
<p><code>--trace-function-calls</code></p>
<p>Enable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--trace-verbose</code></p>
<p>Enable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--trusted-public-keys</code> <em>value</em></p>
<p>Set the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--trusted-substituters</code> <em>value</em></p>
<p>Set the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--trusted-users</code> <em>value</em></p>
<p>Set the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--use-case-hack</code></p>
<p>Enable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--use-cgroups</code></p>
<p>Enable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--use-registries</code></p>
<p>Enable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--use-sqlite-wal</code></p>
<p>Enable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--user-agent-suffix</code> <em>value</em></p>
<p>Set the <code>user-agent-suffix</code> setting.</p>
</li>
<li>
<p><code>--warn-dirty</code></p>
<p>Enable the <code>warn-dirty</code> setting.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p><strong>Warning</strong> <br />
This program is <strong>experimental</strong> and its interface is subject to change.</p>
</blockquote>
<h1 id="name-60"><a class="header" href="#name-60">Name</a></h1>
<p><code>nix profile wipe-history</code> - delete non-current versions of a profile</p>
<h1 id="synopsis-91"><a class="header" href="#synopsis-91">Synopsis</a></h1>
<p><code>nix profile wipe-history</code> [<em>option</em>...] </p>
<h1 id="examples-60"><a class="header" href="#examples-60">Examples</a></h1>
<ul>
<li>
<p>Delete all versions of the default profile older than 100 days:</p>
<pre><code class="language-console"># nix profile wipe-history --profile /tmp/profile --older-than 100d
removing profile version 515
removing profile version 514
</code></pre>
</li>
</ul>
<h1 id="description-80"><a class="header" href="#description-80">Description</a></h1>
<p>This command deletes non-current versions of a profile, making it
impossible to roll back to these versions. By default, all non-current
versions are deleted. With <code>--older-than</code> <em>N</em><code>d</code>, all non-current
versions older than <em>N</em> days are deleted.</p>
<h1 id="options-44"><a class="header" href="#options-44">Options</a></h1>
<ul>
<li>
<p><code>--dry-run</code></p>
<p>Show what this command would do without doing it.</p>
</li>
<li>
<p><code>--older-than</code> <em>age</em></p>
<p>Delete versions older than the specified age. <em>age</em> must be in the format <em>N</em><code>d</code>, where <em>N</em> denotes a number of days.</p>
</li>
<li>
<p><code>--profile</code> <em>path</em></p>
<p>The profile to operate on.</p>
</li>
</ul>
<p><strong>Logging-related options:</strong></p>
<ul>
<li>
<p><code>--debug</code></p>
<p>Set the logging verbosity level to 'debug'.</p>
</li>
<li>
<p><code>--log-format</code> <em>format</em></p>
<p>Set the format of log output; one of <code>raw</code>, <code>internal-json</code>, <code>bar</code> or <code>bar-with-logs</code>.</p>
</li>
<li>
<p><code>--print-build-logs</code> / <code>-L</code></p>
<p>Print full build logs on standard error.</p>
</li>
<li>
<p><code>--quiet</code></p>
<p>Decrease the logging verbosity level.</p>
</li>
<li>
<p><code>--verbose</code> / <code>-v</code></p>
<p>Increase the logging verbosity level.</p>
</li>
</ul>
<p><strong>Miscellaneous global options:</strong></p>
<ul>
<li>
<p><code>--help</code></p>
<p>Show usage information.</p>
</li>
<li>
<p><code>--offline</code></p>
<p>Disable substituters and consider all previously downloaded files up-to-date.</p>
</li>
<li>
<p><code>--option</code> <em>name</em> <em>value</em></p>
<p>Set the Nix configuration setting <em>name</em> to <em>value</em> (overriding <code>nix.conf</code>).</p>
</li>
<li>
<p><code>--refresh</code></p>
<p>Consider all previously downloaded files out-of-date.</p>
</li>
<li>
<p><code>--version</code></p>
<p>Show version information.</p>
</li>
</ul>
<p><strong>Options to override configuration settings:</strong></p>
<ul>
<li>
<p><code>--accept-flake-config</code></p>
<p>Enable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--access-tokens</code> <em>value</em></p>
<p>Set the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--allow-dirty</code></p>
<p>Enable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--allow-import-from-derivation</code></p>
<p>Enable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--allow-new-privileges</code></p>
<p>Enable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--allow-symlinked-store</code></p>
<p>Enable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--allow-unsafe-native-code-during-evaluation</code></p>
<p>Enable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--allowed-impure-host-deps</code> <em>value</em></p>
<p>Set the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--allowed-uris</code> <em>value</em></p>
<p>Set the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--allowed-users</code> <em>value</em></p>
<p>Set the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--auto-allocate-uids</code></p>
<p>Enable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--auto-optimise-store</code></p>
<p>Enable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt</code> <em>value</em></p>
<p>Set the <code>bash-prompt</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-prefix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-prefix</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-suffix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-suffix</code> setting.</p>
</li>
<li>
<p><code>--build-hook</code> <em>value</em></p>
<p>Set the <code>build-hook</code> setting.</p>
</li>
<li>
<p><code>--build-poll-interval</code> <em>value</em></p>
<p>Set the <code>build-poll-interval</code> setting.</p>
</li>
<li>
<p><code>--build-users-group</code> <em>value</em></p>
<p>Set the <code>build-users-group</code> setting.</p>
</li>
<li>
<p><code>--builders</code> <em>value</em></p>
<p>Set the <code>builders</code> setting.</p>
</li>
<li>
<p><code>--builders-use-substitutes</code></p>
<p>Enable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--commit-lockfile-summary</code> <em>value</em></p>
<p>Set the <code>commit-lockfile-summary</code> setting.</p>
</li>
<li>
<p><code>--compress-build-log</code></p>
<p>Enable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--connect-timeout</code> <em>value</em></p>
<p>Set the <code>connect-timeout</code> setting.</p>
</li>
<li>
<p><code>--cores</code> <em>value</em></p>
<p>Set the <code>cores</code> setting.</p>
</li>
<li>
<p><code>--diff-hook</code> <em>value</em></p>
<p>Set the <code>diff-hook</code> setting.</p>
</li>
<li>
<p><code>--download-attempts</code> <em>value</em></p>
<p>Set the <code>download-attempts</code> setting.</p>
</li>
<li>
<p><code>--download-speed</code> <em>value</em></p>
<p>Set the <code>download-speed</code> setting.</p>
</li>
<li>
<p><code>--eval-cache</code></p>
<p>Enable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--experimental-features</code> <em>value</em></p>
<p>Set the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-access-tokens</code> <em>value</em></p>
<p>Append to the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-impure-host-deps</code> <em>value</em></p>
<p>Append to the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-uris</code> <em>value</em></p>
<p>Append to the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-users</code> <em>value</em></p>
<p>Append to the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--extra-experimental-features</code> <em>value</em></p>
<p>Append to the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-extra-platforms</code> <em>value</em></p>
<p>Append to the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-hashed-mirrors</code> <em>value</em></p>
<p>Append to the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--extra-ignored-acls</code> <em>value</em></p>
<p>Append to the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--extra-nix-path</code> <em>value</em></p>
<p>Append to the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--extra-platforms</code> <em>value</em></p>
<p>Set the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-plugin-files</code> <em>value</em></p>
<p>Append to the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--extra-sandbox-paths</code> <em>value</em></p>
<p>Append to the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--extra-secret-key-files</code> <em>value</em></p>
<p>Append to the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--extra-substituters</code> <em>value</em></p>
<p>Append to the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-system-features</code> <em>value</em></p>
<p>Append to the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-public-keys</code> <em>value</em></p>
<p>Append to the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-substituters</code> <em>value</em></p>
<p>Append to the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-users</code> <em>value</em></p>
<p>Append to the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--fallback</code></p>
<p>Enable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--filter-syscalls</code></p>
<p>Enable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--flake-registry</code> <em>value</em></p>
<p>Set the <code>flake-registry</code> setting.</p>
</li>
<li>
<p><code>--fsync-metadata</code></p>
<p>Enable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--gc-reserved-space</code> <em>value</em></p>
<p>Set the <code>gc-reserved-space</code> setting.</p>
</li>
<li>
<p><code>--hashed-mirrors</code> <em>value</em></p>
<p>Set the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--http-connections</code> <em>value</em></p>
<p>Set the <code>http-connections</code> setting.</p>
</li>
<li>
<p><code>--http2</code></p>
<p>Enable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--id-count</code> <em>value</em></p>
<p>Set the <code>id-count</code> setting.</p>
</li>
<li>
<p><code>--ignore-try</code></p>
<p>Enable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--ignored-acls</code> <em>value</em></p>
<p>Set the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--impersonate-linux-26</code></p>
<p>Enable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--keep-build-log</code></p>
<p>Enable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--keep-derivations</code></p>
<p>Enable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-env-derivations</code></p>
<p>Enable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-failed</code></p>
<p>Enable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--keep-going</code></p>
<p>Enable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--keep-outputs</code></p>
<p>Enable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--log-lines</code> <em>value</em></p>
<p>Set the <code>log-lines</code> setting.</p>
</li>
<li>
<p><code>--max-build-log-size</code> <em>value</em></p>
<p>Set the <code>max-build-log-size</code> setting.</p>
</li>
<li>
<p><code>--max-free</code> <em>value</em></p>
<p>Set the <code>max-free</code> setting.</p>
</li>
<li>
<p><code>--max-jobs</code> <em>value</em></p>
<p>Set the <code>max-jobs</code> setting.</p>
</li>
<li>
<p><code>--max-silent-time</code> <em>value</em></p>
<p>Set the <code>max-silent-time</code> setting.</p>
</li>
<li>
<p><code>--min-free</code> <em>value</em></p>
<p>Set the <code>min-free</code> setting.</p>
</li>
<li>
<p><code>--min-free-check-interval</code> <em>value</em></p>
<p>Set the <code>min-free-check-interval</code> setting.</p>
</li>
<li>
<p><code>--nar-buffer-size</code> <em>value</em></p>
<p>Set the <code>nar-buffer-size</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-negative-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-negative-ttl</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-positive-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-positive-ttl</code> setting.</p>
</li>
<li>
<p><code>--netrc-file</code> <em>value</em></p>
<p>Set the <code>netrc-file</code> setting.</p>
</li>
<li>
<p><code>--nix-path</code> <em>value</em></p>
<p>Set the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--no-accept-flake-config</code></p>
<p>Disable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--no-allow-dirty</code></p>
<p>Disable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--no-allow-import-from-derivation</code></p>
<p>Disable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--no-allow-new-privileges</code></p>
<p>Disable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--no-allow-symlinked-store</code></p>
<p>Disable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--no-allow-unsafe-native-code-during-evaluation</code></p>
<p>Disable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--no-auto-allocate-uids</code></p>
<p>Disable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--no-auto-optimise-store</code></p>
<p>Disable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--no-builders-use-substitutes</code></p>
<p>Disable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--no-compress-build-log</code></p>
<p>Disable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-eval-cache</code></p>
<p>Disable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--no-fallback</code></p>
<p>Disable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--no-filter-syscalls</code></p>
<p>Disable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--no-fsync-metadata</code></p>
<p>Disable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--no-http2</code></p>
<p>Disable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--no-ignore-try</code></p>
<p>Disable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--no-impersonate-linux-26</code></p>
<p>Disable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--no-keep-build-log</code></p>
<p>Disable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-keep-derivations</code></p>
<p>Disable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-env-derivations</code></p>
<p>Disable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-failed</code></p>
<p>Disable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--no-keep-going</code></p>
<p>Disable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--no-keep-outputs</code></p>
<p>Disable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--no-preallocate-contents</code></p>
<p>Disable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--no-print-missing</code></p>
<p>Disable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--no-pure-eval</code></p>
<p>Disable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--no-require-sigs</code></p>
<p>Disable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--no-restrict-eval</code></p>
<p>Disable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--no-run-diff-hook</code></p>
<p>Disable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--no-sandbox</code></p>
<p>Disable sandboxing.</p>
</li>
<li>
<p><code>--no-sandbox-fallback</code></p>
<p>Disable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--no-show-trace</code></p>
<p>Disable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--no-substitute</code></p>
<p>Disable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--no-sync-before-registering</code></p>
<p>Disable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--no-trace-function-calls</code></p>
<p>Disable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--no-trace-verbose</code></p>
<p>Disable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--no-use-case-hack</code></p>
<p>Disable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--no-use-cgroups</code></p>
<p>Disable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--no-use-registries</code></p>
<p>Disable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--no-use-sqlite-wal</code></p>
<p>Disable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--no-warn-dirty</code></p>
<p>Disable the <code>warn-dirty</code> setting.</p>
</li>
<li>
<p><code>--plugin-files</code> <em>value</em></p>
<p>Set the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--post-build-hook</code> <em>value</em></p>
<p>Set the <code>post-build-hook</code> setting.</p>
</li>
<li>
<p><code>--pre-build-hook</code> <em>value</em></p>
<p>Set the <code>pre-build-hook</code> setting.</p>
</li>
<li>
<p><code>--preallocate-contents</code></p>
<p>Enable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--print-missing</code></p>
<p>Enable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--pure-eval</code></p>
<p>Enable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--relaxed-sandbox</code></p>
<p>Enable sandboxing, but allow builds to disable it.</p>
</li>
<li>
<p><code>--require-sigs</code></p>
<p>Enable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--restrict-eval</code></p>
<p>Enable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--run-diff-hook</code></p>
<p>Enable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--sandbox</code></p>
<p>Enable sandboxing.</p>
</li>
<li>
<p><code>--sandbox-build-dir</code> <em>value</em></p>
<p>Set the <code>sandbox-build-dir</code> setting.</p>
</li>
<li>
<p><code>--sandbox-dev-shm-size</code> <em>value</em></p>
<p>Set the <code>sandbox-dev-shm-size</code> setting.</p>
</li>
<li>
<p><code>--sandbox-fallback</code></p>
<p>Enable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--sandbox-paths</code> <em>value</em></p>
<p>Set the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--secret-key-files</code> <em>value</em></p>
<p>Set the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--show-trace</code></p>
<p>Enable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--stalled-download-timeout</code> <em>value</em></p>
<p>Set the <code>stalled-download-timeout</code> setting.</p>
</li>
<li>
<p><code>--start-id</code> <em>value</em></p>
<p>Set the <code>start-id</code> setting.</p>
</li>
<li>
<p><code>--store</code> <em>value</em></p>
<p>Set the <code>store</code> setting.</p>
</li>
<li>
<p><code>--substitute</code></p>
<p>Enable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--substituters</code> <em>value</em></p>
<p>Set the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--sync-before-registering</code></p>
<p>Enable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--system</code> <em>value</em></p>
<p>Set the <code>system</code> setting.</p>
</li>
<li>
<p><code>--system-features</code> <em>value</em></p>
<p>Set the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--tarball-ttl</code> <em>value</em></p>
<p>Set the <code>tarball-ttl</code> setting.</p>
</li>
<li>
<p><code>--timeout</code> <em>value</em></p>
<p>Set the <code>timeout</code> setting.</p>
</li>
<li>
<p><code>--trace-function-calls</code></p>
<p>Enable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--trace-verbose</code></p>
<p>Enable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--trusted-public-keys</code> <em>value</em></p>
<p>Set the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--trusted-substituters</code> <em>value</em></p>
<p>Set the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--trusted-users</code> <em>value</em></p>
<p>Set the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--use-case-hack</code></p>
<p>Enable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--use-cgroups</code></p>
<p>Enable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--use-registries</code></p>
<p>Enable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--use-sqlite-wal</code></p>
<p>Enable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--user-agent-suffix</code> <em>value</em></p>
<p>Set the <code>user-agent-suffix</code> setting.</p>
</li>
<li>
<p><code>--warn-dirty</code></p>
<p>Enable the <code>warn-dirty</code> setting.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p><strong>Warning</strong> <br />
This program is <strong>experimental</strong> and its interface is subject to change.</p>
</blockquote>
<h1 id="name-61"><a class="header" href="#name-61">Name</a></h1>
<p><code>nix realisation</code> - manipulate a Nix realisation</p>
<h1 id="synopsis-92"><a class="header" href="#synopsis-92">Synopsis</a></h1>
<p><code>nix realisation</code> [<em>option</em>...] <em>subcommand</em></p>
<p>where <em>subcommand</em> is one of the following:</p>
<ul>
<li><a href="command-ref/new-cli/./nix3-realisation-info.html"><code>nix realisation info</code></a> - query information about one or several realisations</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p><strong>Warning</strong> <br />
This program is <strong>experimental</strong> and its interface is subject to change.</p>
</blockquote>
<h1 id="name-62"><a class="header" href="#name-62">Name</a></h1>
<p><code>nix realisation info</code> - query information about one or several realisations</p>
<h1 id="synopsis-93"><a class="header" href="#synopsis-93">Synopsis</a></h1>
<p><code>nix realisation info</code> [<em>option</em>...] <em>installables</em>...</p>
<h1 id="description-81"><a class="header" href="#description-81">Description</a></h1>
<p>Display some information about the given realisation</p>
<h1 id="examples-61"><a class="header" href="#examples-61">Examples</a></h1>
<p>Show some information about the realisation of the <code>hello</code> package:</p>
<pre><code class="language-console">$ nix realisation info nixpkgs#hello --json
[{&quot;id&quot;:&quot;sha256:3d382378a00588e064ee30be96dd0fa7e7df7cf3fbcace85a0e7b7dada1eef25!out&quot;,&quot;outPath&quot;:&quot;fd3m7xawvrqcg98kgz5hc2vk3x9q0lh7-hello&quot;}]
</code></pre>
<h1 id="options-45"><a class="header" href="#options-45">Options</a></h1>
<ul>
<li>
<p><code>--json</code></p>
<p>Produce output in JSON format, suitable for consumption by another program.</p>
</li>
</ul>
<p><strong>Common evaluation options:</strong></p>
<ul>
<li>
<p><code>--arg</code> <em>name</em> <em>expr</em></p>
<p>Pass the value <em>expr</em> as the argument <em>name</em> to Nix functions.</p>
</li>
<li>
<p><code>--argstr</code> <em>name</em> <em>string</em></p>
<p>Pass the string <em>string</em> as the argument <em>name</em> to Nix functions.</p>
</li>
<li>
<p><code>--debugger</code></p>
<p>Start an interactive environment if evaluation fails.</p>
</li>
<li>
<p><code>--eval-store</code> <em>store-url</em></p>
<p>The Nix store to use for evaluations.</p>
</li>
<li>
<p><code>--impure</code></p>
<p>Allow access to mutable paths and repositories.</p>
</li>
<li>
<p><code>--include</code> / <code>-I</code> <em>path</em></p>
<p>Add <em>path</em> to the Nix search path. The Nix search path is
initialized from the colon-separated <a href="command-ref/new-cli/../../command-ref/env-common.html#env-NIX_PATH"><code>NIX_PATH</code></a> environment
variable, and is used to look up the location of Nix expressions using <a href="command-ref/new-cli/../../language/values.html#type-path">paths</a> enclosed in angle
brackets (i.e., <code>&lt;nixpkgs&gt;</code>).</p>
<p>For instance, passing</p>
<pre><code>-I /home/eelco/Dev
-I /etc/nixos
</code></pre>
<p>will cause Nix to look for paths relative to <code>/home/eelco/Dev</code> and
<code>/etc/nixos</code>, in that order. This is equivalent to setting the
<code>NIX_PATH</code> environment variable to</p>
<pre><code>/home/eelco/Dev:/etc/nixos
</code></pre>
<p>It is also possible to match paths against a prefix. For example,
passing</p>
<pre><code>-I nixpkgs=/home/eelco/Dev/nixpkgs-branch
-I /etc/nixos
</code></pre>
<p>will cause Nix to search for <code>&lt;nixpkgs/path&gt;</code> in
<code>/home/eelco/Dev/nixpkgs-branch/path</code> and <code>/etc/nixos/nixpkgs/path</code>.</p>
<p>If a path in the Nix search path starts with <code>http://</code> or <code>https://</code>,
it is interpreted as the URL of a tarball that will be downloaded and
unpacked to a temporary location. The tarball must consist of a single
top-level directory. For example, passing</p>
<pre><code>-I nixpkgs=https://github.com/NixOS/nixpkgs/archive/master.tar.gz
</code></pre>
<p>tells Nix to download and use the current contents of the <code>master</code>
branch in the <code>nixpkgs</code> repository.</p>
<p>The URLs of the tarballs from the official <code>nixos.org</code> channels
(see <a href="command-ref/new-cli/../nix-channel.html">the manual page for <code>nix-channel</code></a>) can be
abbreviated as <code>channel:&lt;channel-name&gt;</code>. For instance, the
following two flags are equivalent:</p>
<pre><code>-I nixpkgs=channel:nixos-21.05
-I nixpkgs=https://nixos.org/channels/nixos-21.05/nixexprs.tar.xz
</code></pre>
<p>You can also fetch source trees using <a href="command-ref/new-cli/./nix3-flake.html#url-like-syntax">flake URLs</a> and add them to the
search path. For instance,</p>
<pre><code>-I nixpkgs=flake:nixpkgs
</code></pre>
<p>specifies that the prefix <code>nixpkgs</code> shall refer to the source tree
downloaded from the <code>nixpkgs</code> entry in the flake registry. Similarly,</p>
<pre><code>-I nixpkgs=flake:github:NixOS/nixpkgs/nixos-22.05
</code></pre>
<p>makes <code>&lt;nixpkgs&gt;</code> refer to a particular branch of the
<code>NixOS/nixpkgs</code> repository on GitHub.</p>
</li>
<li>
<p><code>--override-flake</code> <em>original-ref</em> <em>resolved-ref</em></p>
<p>Override the flake registries, redirecting <em>original-ref</em> to <em>resolved-ref</em>.</p>
</li>
</ul>
<p><strong>Common flake-related options:</strong></p>
<ul>
<li>
<p><code>--commit-lock-file</code></p>
<p>Commit changes to the flake's lock file.</p>
</li>
<li>
<p><code>--inputs-from</code> <em>flake-url</em></p>
<p>Use the inputs of the specified flake as registry entries.</p>
</li>
<li>
<p><code>--no-registries</code></p>
<p>Don't allow lookups in the flake registries. This option is deprecated; use <code>--no-use-registries</code>.</p>
</li>
<li>
<p><code>--no-update-lock-file</code></p>
<p>Do not allow any updates to the flake's lock file.</p>
</li>
<li>
<p><code>--no-write-lock-file</code></p>
<p>Do not write the flake's newly generated lock file.</p>
</li>
<li>
<p><code>--override-input</code> <em>input-path</em> <em>flake-url</em></p>
<p>Override a specific flake input (e.g. <code>dwarffs/nixpkgs</code>). This implies <code>--no-write-lock-file</code>.</p>
</li>
<li>
<p><code>--recreate-lock-file</code></p>
<p>Recreate the flake's lock file from scratch.</p>
</li>
<li>
<p><code>--update-input</code> <em>input-path</em></p>
<p>Update a specific flake input (ignoring its previous entry in the lock file).</p>
</li>
</ul>
<p><strong>Logging-related options:</strong></p>
<ul>
<li>
<p><code>--debug</code></p>
<p>Set the logging verbosity level to 'debug'.</p>
</li>
<li>
<p><code>--log-format</code> <em>format</em></p>
<p>Set the format of log output; one of <code>raw</code>, <code>internal-json</code>, <code>bar</code> or <code>bar-with-logs</code>.</p>
</li>
<li>
<p><code>--print-build-logs</code> / <code>-L</code></p>
<p>Print full build logs on standard error.</p>
</li>
<li>
<p><code>--quiet</code></p>
<p>Decrease the logging verbosity level.</p>
</li>
<li>
<p><code>--verbose</code> / <code>-v</code></p>
<p>Increase the logging verbosity level.</p>
</li>
</ul>
<p><strong>Miscellaneous global options:</strong></p>
<ul>
<li>
<p><code>--help</code></p>
<p>Show usage information.</p>
</li>
<li>
<p><code>--offline</code></p>
<p>Disable substituters and consider all previously downloaded files up-to-date.</p>
</li>
<li>
<p><code>--option</code> <em>name</em> <em>value</em></p>
<p>Set the Nix configuration setting <em>name</em> to <em>value</em> (overriding <code>nix.conf</code>).</p>
</li>
<li>
<p><code>--refresh</code></p>
<p>Consider all previously downloaded files out-of-date.</p>
</li>
<li>
<p><code>--version</code></p>
<p>Show version information.</p>
</li>
</ul>
<p><strong>Options that change the interpretation of installables:</strong></p>
<ul>
<li>
<p><code>--all</code></p>
<p>Apply the operation to every store path.</p>
</li>
<li>
<p><code>--derivation</code></p>
<p>Operate on the <a href="command-ref/new-cli/../../glossary.html#gloss-store-derivation">store derivation</a> rather than its outputs.</p>
</li>
<li>
<p><code>--expr</code> <em>expr</em></p>
<p>Interpret installables as attribute paths relative to the Nix expression <em>expr</em>.</p>
</li>
<li>
<p><code>--file</code> / <code>-f</code> <em>file</em></p>
<p>Interpret installables as attribute paths relative to the Nix expression stored in <em>file</em>. If <em>file</em> is the character -, then a Nix expression will be read from standard input. Implies <code>--impure</code>.</p>
</li>
<li>
<p><code>--recursive</code> / <code>-r</code></p>
<p>Apply operation to closure of the specified paths.</p>
</li>
</ul>
<p><strong>Options to override configuration settings:</strong></p>
<ul>
<li>
<p><code>--accept-flake-config</code></p>
<p>Enable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--access-tokens</code> <em>value</em></p>
<p>Set the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--allow-dirty</code></p>
<p>Enable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--allow-import-from-derivation</code></p>
<p>Enable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--allow-new-privileges</code></p>
<p>Enable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--allow-symlinked-store</code></p>
<p>Enable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--allow-unsafe-native-code-during-evaluation</code></p>
<p>Enable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--allowed-impure-host-deps</code> <em>value</em></p>
<p>Set the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--allowed-uris</code> <em>value</em></p>
<p>Set the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--allowed-users</code> <em>value</em></p>
<p>Set the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--auto-allocate-uids</code></p>
<p>Enable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--auto-optimise-store</code></p>
<p>Enable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt</code> <em>value</em></p>
<p>Set the <code>bash-prompt</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-prefix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-prefix</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-suffix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-suffix</code> setting.</p>
</li>
<li>
<p><code>--build-hook</code> <em>value</em></p>
<p>Set the <code>build-hook</code> setting.</p>
</li>
<li>
<p><code>--build-poll-interval</code> <em>value</em></p>
<p>Set the <code>build-poll-interval</code> setting.</p>
</li>
<li>
<p><code>--build-users-group</code> <em>value</em></p>
<p>Set the <code>build-users-group</code> setting.</p>
</li>
<li>
<p><code>--builders</code> <em>value</em></p>
<p>Set the <code>builders</code> setting.</p>
</li>
<li>
<p><code>--builders-use-substitutes</code></p>
<p>Enable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--commit-lockfile-summary</code> <em>value</em></p>
<p>Set the <code>commit-lockfile-summary</code> setting.</p>
</li>
<li>
<p><code>--compress-build-log</code></p>
<p>Enable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--connect-timeout</code> <em>value</em></p>
<p>Set the <code>connect-timeout</code> setting.</p>
</li>
<li>
<p><code>--cores</code> <em>value</em></p>
<p>Set the <code>cores</code> setting.</p>
</li>
<li>
<p><code>--diff-hook</code> <em>value</em></p>
<p>Set the <code>diff-hook</code> setting.</p>
</li>
<li>
<p><code>--download-attempts</code> <em>value</em></p>
<p>Set the <code>download-attempts</code> setting.</p>
</li>
<li>
<p><code>--download-speed</code> <em>value</em></p>
<p>Set the <code>download-speed</code> setting.</p>
</li>
<li>
<p><code>--eval-cache</code></p>
<p>Enable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--experimental-features</code> <em>value</em></p>
<p>Set the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-access-tokens</code> <em>value</em></p>
<p>Append to the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-impure-host-deps</code> <em>value</em></p>
<p>Append to the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-uris</code> <em>value</em></p>
<p>Append to the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-users</code> <em>value</em></p>
<p>Append to the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--extra-experimental-features</code> <em>value</em></p>
<p>Append to the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-extra-platforms</code> <em>value</em></p>
<p>Append to the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-hashed-mirrors</code> <em>value</em></p>
<p>Append to the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--extra-ignored-acls</code> <em>value</em></p>
<p>Append to the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--extra-nix-path</code> <em>value</em></p>
<p>Append to the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--extra-platforms</code> <em>value</em></p>
<p>Set the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-plugin-files</code> <em>value</em></p>
<p>Append to the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--extra-sandbox-paths</code> <em>value</em></p>
<p>Append to the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--extra-secret-key-files</code> <em>value</em></p>
<p>Append to the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--extra-substituters</code> <em>value</em></p>
<p>Append to the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-system-features</code> <em>value</em></p>
<p>Append to the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-public-keys</code> <em>value</em></p>
<p>Append to the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-substituters</code> <em>value</em></p>
<p>Append to the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-users</code> <em>value</em></p>
<p>Append to the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--fallback</code></p>
<p>Enable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--filter-syscalls</code></p>
<p>Enable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--flake-registry</code> <em>value</em></p>
<p>Set the <code>flake-registry</code> setting.</p>
</li>
<li>
<p><code>--fsync-metadata</code></p>
<p>Enable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--gc-reserved-space</code> <em>value</em></p>
<p>Set the <code>gc-reserved-space</code> setting.</p>
</li>
<li>
<p><code>--hashed-mirrors</code> <em>value</em></p>
<p>Set the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--http-connections</code> <em>value</em></p>
<p>Set the <code>http-connections</code> setting.</p>
</li>
<li>
<p><code>--http2</code></p>
<p>Enable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--id-count</code> <em>value</em></p>
<p>Set the <code>id-count</code> setting.</p>
</li>
<li>
<p><code>--ignore-try</code></p>
<p>Enable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--ignored-acls</code> <em>value</em></p>
<p>Set the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--impersonate-linux-26</code></p>
<p>Enable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--keep-build-log</code></p>
<p>Enable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--keep-derivations</code></p>
<p>Enable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-env-derivations</code></p>
<p>Enable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-failed</code></p>
<p>Enable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--keep-going</code></p>
<p>Enable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--keep-outputs</code></p>
<p>Enable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--log-lines</code> <em>value</em></p>
<p>Set the <code>log-lines</code> setting.</p>
</li>
<li>
<p><code>--max-build-log-size</code> <em>value</em></p>
<p>Set the <code>max-build-log-size</code> setting.</p>
</li>
<li>
<p><code>--max-free</code> <em>value</em></p>
<p>Set the <code>max-free</code> setting.</p>
</li>
<li>
<p><code>--max-jobs</code> <em>value</em></p>
<p>Set the <code>max-jobs</code> setting.</p>
</li>
<li>
<p><code>--max-silent-time</code> <em>value</em></p>
<p>Set the <code>max-silent-time</code> setting.</p>
</li>
<li>
<p><code>--min-free</code> <em>value</em></p>
<p>Set the <code>min-free</code> setting.</p>
</li>
<li>
<p><code>--min-free-check-interval</code> <em>value</em></p>
<p>Set the <code>min-free-check-interval</code> setting.</p>
</li>
<li>
<p><code>--nar-buffer-size</code> <em>value</em></p>
<p>Set the <code>nar-buffer-size</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-negative-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-negative-ttl</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-positive-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-positive-ttl</code> setting.</p>
</li>
<li>
<p><code>--netrc-file</code> <em>value</em></p>
<p>Set the <code>netrc-file</code> setting.</p>
</li>
<li>
<p><code>--nix-path</code> <em>value</em></p>
<p>Set the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--no-accept-flake-config</code></p>
<p>Disable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--no-allow-dirty</code></p>
<p>Disable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--no-allow-import-from-derivation</code></p>
<p>Disable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--no-allow-new-privileges</code></p>
<p>Disable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--no-allow-symlinked-store</code></p>
<p>Disable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--no-allow-unsafe-native-code-during-evaluation</code></p>
<p>Disable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--no-auto-allocate-uids</code></p>
<p>Disable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--no-auto-optimise-store</code></p>
<p>Disable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--no-builders-use-substitutes</code></p>
<p>Disable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--no-compress-build-log</code></p>
<p>Disable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-eval-cache</code></p>
<p>Disable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--no-fallback</code></p>
<p>Disable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--no-filter-syscalls</code></p>
<p>Disable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--no-fsync-metadata</code></p>
<p>Disable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--no-http2</code></p>
<p>Disable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--no-ignore-try</code></p>
<p>Disable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--no-impersonate-linux-26</code></p>
<p>Disable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--no-keep-build-log</code></p>
<p>Disable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-keep-derivations</code></p>
<p>Disable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-env-derivations</code></p>
<p>Disable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-failed</code></p>
<p>Disable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--no-keep-going</code></p>
<p>Disable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--no-keep-outputs</code></p>
<p>Disable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--no-preallocate-contents</code></p>
<p>Disable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--no-print-missing</code></p>
<p>Disable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--no-pure-eval</code></p>
<p>Disable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--no-require-sigs</code></p>
<p>Disable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--no-restrict-eval</code></p>
<p>Disable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--no-run-diff-hook</code></p>
<p>Disable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--no-sandbox</code></p>
<p>Disable sandboxing.</p>
</li>
<li>
<p><code>--no-sandbox-fallback</code></p>
<p>Disable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--no-show-trace</code></p>
<p>Disable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--no-substitute</code></p>
<p>Disable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--no-sync-before-registering</code></p>
<p>Disable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--no-trace-function-calls</code></p>
<p>Disable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--no-trace-verbose</code></p>
<p>Disable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--no-use-case-hack</code></p>
<p>Disable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--no-use-cgroups</code></p>
<p>Disable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--no-use-registries</code></p>
<p>Disable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--no-use-sqlite-wal</code></p>
<p>Disable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--no-warn-dirty</code></p>
<p>Disable the <code>warn-dirty</code> setting.</p>
</li>
<li>
<p><code>--plugin-files</code> <em>value</em></p>
<p>Set the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--post-build-hook</code> <em>value</em></p>
<p>Set the <code>post-build-hook</code> setting.</p>
</li>
<li>
<p><code>--pre-build-hook</code> <em>value</em></p>
<p>Set the <code>pre-build-hook</code> setting.</p>
</li>
<li>
<p><code>--preallocate-contents</code></p>
<p>Enable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--print-missing</code></p>
<p>Enable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--pure-eval</code></p>
<p>Enable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--relaxed-sandbox</code></p>
<p>Enable sandboxing, but allow builds to disable it.</p>
</li>
<li>
<p><code>--require-sigs</code></p>
<p>Enable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--restrict-eval</code></p>
<p>Enable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--run-diff-hook</code></p>
<p>Enable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--sandbox</code></p>
<p>Enable sandboxing.</p>
</li>
<li>
<p><code>--sandbox-build-dir</code> <em>value</em></p>
<p>Set the <code>sandbox-build-dir</code> setting.</p>
</li>
<li>
<p><code>--sandbox-dev-shm-size</code> <em>value</em></p>
<p>Set the <code>sandbox-dev-shm-size</code> setting.</p>
</li>
<li>
<p><code>--sandbox-fallback</code></p>
<p>Enable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--sandbox-paths</code> <em>value</em></p>
<p>Set the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--secret-key-files</code> <em>value</em></p>
<p>Set the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--show-trace</code></p>
<p>Enable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--stalled-download-timeout</code> <em>value</em></p>
<p>Set the <code>stalled-download-timeout</code> setting.</p>
</li>
<li>
<p><code>--start-id</code> <em>value</em></p>
<p>Set the <code>start-id</code> setting.</p>
</li>
<li>
<p><code>--store</code> <em>value</em></p>
<p>Set the <code>store</code> setting.</p>
</li>
<li>
<p><code>--substitute</code></p>
<p>Enable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--substituters</code> <em>value</em></p>
<p>Set the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--sync-before-registering</code></p>
<p>Enable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--system</code> <em>value</em></p>
<p>Set the <code>system</code> setting.</p>
</li>
<li>
<p><code>--system-features</code> <em>value</em></p>
<p>Set the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--tarball-ttl</code> <em>value</em></p>
<p>Set the <code>tarball-ttl</code> setting.</p>
</li>
<li>
<p><code>--timeout</code> <em>value</em></p>
<p>Set the <code>timeout</code> setting.</p>
</li>
<li>
<p><code>--trace-function-calls</code></p>
<p>Enable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--trace-verbose</code></p>
<p>Enable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--trusted-public-keys</code> <em>value</em></p>
<p>Set the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--trusted-substituters</code> <em>value</em></p>
<p>Set the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--trusted-users</code> <em>value</em></p>
<p>Set the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--use-case-hack</code></p>
<p>Enable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--use-cgroups</code></p>
<p>Enable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--use-registries</code></p>
<p>Enable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--use-sqlite-wal</code></p>
<p>Enable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--user-agent-suffix</code> <em>value</em></p>
<p>Set the <code>user-agent-suffix</code> setting.</p>
</li>
<li>
<p><code>--warn-dirty</code></p>
<p>Enable the <code>warn-dirty</code> setting.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p><strong>Warning</strong> <br />
This program is <strong>experimental</strong> and its interface is subject to change.</p>
</blockquote>
<h1 id="name-63"><a class="header" href="#name-63">Name</a></h1>
<p><code>nix registry</code> - manage the flake registry</p>
<h1 id="synopsis-94"><a class="header" href="#synopsis-94">Synopsis</a></h1>
<p><code>nix registry</code> [<em>option</em>...] <em>subcommand</em></p>
<p>where <em>subcommand</em> is one of the following:</p>
<ul>
<li><a href="command-ref/new-cli/./nix3-registry-add.html"><code>nix registry add</code></a> - add/replace flake in user flake registry</li>
<li><a href="command-ref/new-cli/./nix3-registry-list.html"><code>nix registry list</code></a> - list available Nix flakes</li>
<li><a href="command-ref/new-cli/./nix3-registry-pin.html"><code>nix registry pin</code></a> - pin a flake to its current version or to the current version of a flake URL</li>
<li><a href="command-ref/new-cli/./nix3-registry-remove.html"><code>nix registry remove</code></a> - remove flake from user flake registry</li>
</ul>
<h1 id="description-82"><a class="header" href="#description-82">Description</a></h1>
<p><code>nix registry</code> provides subcommands for managing <em>flake
registries</em>. Flake registries are a convenience feature that allows
you to refer to flakes using symbolic identifiers such as <code>nixpkgs</code>,
rather than full URLs such as <code>git://github.com/NixOS/nixpkgs</code>. You
can use these identifiers on the command line (e.g. when you do <code>nix run nixpkgs#hello</code>) or in flake input specifications in <code>flake.nix</code>
files. The latter are automatically resolved to full URLs and recorded
in the flake's <code>flake.lock</code> file.</p>
<p>In addition, the flake registry allows you to redirect arbitrary flake
references (e.g. <code>github:NixOS/patchelf</code>) to another location, such as
a local fork.</p>
<p>There are multiple registries. These are, in order from lowest to
highest precedence:</p>
<ul>
<li>
<p>The global registry, which is a file downloaded from the URL
specified by the setting <code>flake-registry</code>. It is cached locally and
updated automatically when it's older than <code>tarball-ttl</code>
seconds. The default global registry is kept in <a href="https://github.com/NixOS/flake-registry">a GitHub
repository</a>.</p>
</li>
<li>
<p>The system registry, which is shared by all users. The default
location is <code>/etc/nix/registry.json</code>. On NixOS, the system registry
can be specified using the NixOS option <code>nix.registry</code>.</p>
</li>
<li>
<p>The user registry <code>~/.config/nix/registry.json</code>. This registry can
be modified by commands such as <code>nix registry pin</code>.</p>
</li>
<li>
<p>Overrides specified on the command line using the option
<code>--override-flake</code>.</p>
</li>
</ul>
<h1 id="registry-format"><a class="header" href="#registry-format">Registry format</a></h1>
<p>A registry is a JSON file with the following format:</p>
<pre><code class="language-json">{
  &quot;version&quot;: 2,
  &quot;flakes&quot;: [
    {
      &quot;from&quot;: {
        &quot;type&quot;: &quot;indirect&quot;,
        &quot;id&quot;: &quot;nixpkgs&quot;
      },
      &quot;to&quot;: {
        &quot;type&quot;: &quot;github&quot;,
        &quot;owner&quot;: &quot;NixOS&quot;,
        &quot;repo&quot;: &quot;nixpkgs&quot;
      }
    },
    ...
  ]
}
</code></pre>
<p>That is, it contains a list of objects with attributes <code>from</code> and
<code>to</code>, both of which contain a flake reference in attribute
representation. (For example, <code>{&quot;type&quot;: &quot;indirect&quot;, &quot;id&quot;: &quot;nixpkgs&quot;}</code>
is the attribute representation of <code>nixpkgs</code>, while <code>{&quot;type&quot;: &quot;github&quot;, &quot;owner&quot;: &quot;NixOS&quot;, &quot;repo&quot;: &quot;nixpkgs&quot;}</code> is the attribute
representation of <code>github:NixOS/nixpkgs</code>.)</p>
<p>Given some flake reference <em>R</em>, a registry entry is used if its
<code>from</code> flake reference <em>matches</em> <em>R</em>. <em>R</em> is then replaced by the
<em>unification</em> of the <code>to</code> flake reference with <em>R</em>.</p>
<h1 id="matching"><a class="header" href="#matching">Matching</a></h1>
<p>The <code>from</code> flake reference in a registry entry <em>matches</em> some flake
reference <em>R</em> if the attributes in <code>from</code> are the same as the
attributes in <code>R</code>. For example:</p>
<ul>
<li>
<p><code>nixpkgs</code> matches with <code>nixpkgs</code>.</p>
</li>
<li>
<p><code>nixpkgs</code> matches with <code>nixpkgs/nixos-20.09</code>.</p>
</li>
<li>
<p><code>nixpkgs/nixos-20.09</code> does not match with <code>nixpkgs</code>.</p>
</li>
<li>
<p><code>nixpkgs</code> does not match with <code>git://github.com/NixOS/patchelf</code>.</p>
</li>
</ul>
<h1 id="unification"><a class="header" href="#unification">Unification</a></h1>
<p>The <code>to</code> flake reference in a registry entry is <em>unified</em> with some flake
reference <em>R</em> by taking <code>to</code> and applying the <code>rev</code> and <code>ref</code>
attributes from <em>R</em>, if specified. For example:</p>
<ul>
<li>
<p><code>github:NixOS/nixpkgs</code> unified with <code>nixpkgs</code> produces <code>github:NixOS/nixpkgs</code>.</p>
</li>
<li>
<p><code>github:NixOS/nixpkgs</code> unified with <code>nixpkgs/nixos-20.09</code> produces <code>github:NixOS/nixpkgs/nixos-20.09</code>.</p>
</li>
<li>
<p><code>github:NixOS/nixpkgs/master</code> unified with <code>nixpkgs/nixos-20.09</code> produces <code>github:NixOS/nixpkgs/nixos-20.09</code>.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p><strong>Warning</strong> <br />
This program is <strong>experimental</strong> and its interface is subject to change.</p>
</blockquote>
<h1 id="name-64"><a class="header" href="#name-64">Name</a></h1>
<p><code>nix registry add</code> - add/replace flake in user flake registry</p>
<h1 id="synopsis-95"><a class="header" href="#synopsis-95">Synopsis</a></h1>
<p><code>nix registry add</code> [<em>option</em>...] <em>from-url</em> <em>to-url</em></p>
<h1 id="examples-62"><a class="header" href="#examples-62">Examples</a></h1>
<ul>
<li>
<p>Set the <code>nixpkgs</code> flake identifier to a specific branch of Nixpkgs:</p>
<pre><code class="language-console"># nix registry add nixpkgs github:NixOS/nixpkgs/nixos-20.03
</code></pre>
</li>
<li>
<p>Pin <code>nixpkgs</code> to a specific revision:</p>
<pre><code class="language-console"># nix registry add nixpkgs github:NixOS/nixpkgs/925b70cd964ceaedee26fde9b19cc4c4f081196a
</code></pre>
</li>
<li>
<p>Add an entry that redirects a specific branch of <code>nixpkgs</code> to
another fork:</p>
<pre><code class="language-console"># nix registry add nixpkgs/nixos-20.03 ~/Dev/nixpkgs
</code></pre>
</li>
<li>
<p>Add <code>nixpkgs</code> pointing to <code>github:nixos/nixpkgs</code> to your custom flake
registry:</p>
<pre><code class="language-console">nix registry add --registry ./custom-flake-registry.json nixpkgs github:nixos/nixpkgs
</code></pre>
</li>
</ul>
<h1 id="description-83"><a class="header" href="#description-83">Description</a></h1>
<p>This command adds an entry to the user registry that maps flake
reference <em>from-url</em> to flake reference <em>to-url</em>. If an entry for
<em>from-url</em> already exists, it is overwritten.</p>
<p>Entries can be removed using <a href="command-ref/new-cli/./nix3-registry-remove.html"><code>nix registry remove</code></a>.</p>
<h1 id="options-46"><a class="header" href="#options-46">Options</a></h1>
<ul>
<li>
<p><code>--registry</code> <em>registry</em></p>
<p>The registry to operate on.</p>
</li>
</ul>
<p><strong>Common evaluation options:</strong></p>
<ul>
<li>
<p><code>--arg</code> <em>name</em> <em>expr</em></p>
<p>Pass the value <em>expr</em> as the argument <em>name</em> to Nix functions.</p>
</li>
<li>
<p><code>--argstr</code> <em>name</em> <em>string</em></p>
<p>Pass the string <em>string</em> as the argument <em>name</em> to Nix functions.</p>
</li>
<li>
<p><code>--eval-store</code> <em>store-url</em></p>
<p>The Nix store to use for evaluations.</p>
</li>
<li>
<p><code>--impure</code></p>
<p>Allow access to mutable paths and repositories.</p>
</li>
<li>
<p><code>--include</code> / <code>-I</code> <em>path</em></p>
<p>Add <em>path</em> to the Nix search path. The Nix search path is
initialized from the colon-separated <a href="command-ref/new-cli/../../command-ref/env-common.html#env-NIX_PATH"><code>NIX_PATH</code></a> environment
variable, and is used to look up the location of Nix expressions using <a href="command-ref/new-cli/../../language/values.html#type-path">paths</a> enclosed in angle
brackets (i.e., <code>&lt;nixpkgs&gt;</code>).</p>
<p>For instance, passing</p>
<pre><code>-I /home/eelco/Dev
-I /etc/nixos
</code></pre>
<p>will cause Nix to look for paths relative to <code>/home/eelco/Dev</code> and
<code>/etc/nixos</code>, in that order. This is equivalent to setting the
<code>NIX_PATH</code> environment variable to</p>
<pre><code>/home/eelco/Dev:/etc/nixos
</code></pre>
<p>It is also possible to match paths against a prefix. For example,
passing</p>
<pre><code>-I nixpkgs=/home/eelco/Dev/nixpkgs-branch
-I /etc/nixos
</code></pre>
<p>will cause Nix to search for <code>&lt;nixpkgs/path&gt;</code> in
<code>/home/eelco/Dev/nixpkgs-branch/path</code> and <code>/etc/nixos/nixpkgs/path</code>.</p>
<p>If a path in the Nix search path starts with <code>http://</code> or <code>https://</code>,
it is interpreted as the URL of a tarball that will be downloaded and
unpacked to a temporary location. The tarball must consist of a single
top-level directory. For example, passing</p>
<pre><code>-I nixpkgs=https://github.com/NixOS/nixpkgs/archive/master.tar.gz
</code></pre>
<p>tells Nix to download and use the current contents of the <code>master</code>
branch in the <code>nixpkgs</code> repository.</p>
<p>The URLs of the tarballs from the official <code>nixos.org</code> channels
(see <a href="command-ref/new-cli/../nix-channel.html">the manual page for <code>nix-channel</code></a>) can be
abbreviated as <code>channel:&lt;channel-name&gt;</code>. For instance, the
following two flags are equivalent:</p>
<pre><code>-I nixpkgs=channel:nixos-21.05
-I nixpkgs=https://nixos.org/channels/nixos-21.05/nixexprs.tar.xz
</code></pre>
<p>You can also fetch source trees using <a href="command-ref/new-cli/./nix3-flake.html#url-like-syntax">flake URLs</a> and add them to the
search path. For instance,</p>
<pre><code>-I nixpkgs=flake:nixpkgs
</code></pre>
<p>specifies that the prefix <code>nixpkgs</code> shall refer to the source tree
downloaded from the <code>nixpkgs</code> entry in the flake registry. Similarly,</p>
<pre><code>-I nixpkgs=flake:github:NixOS/nixpkgs/nixos-22.05
</code></pre>
<p>makes <code>&lt;nixpkgs&gt;</code> refer to a particular branch of the
<code>NixOS/nixpkgs</code> repository on GitHub.</p>
</li>
<li>
<p><code>--override-flake</code> <em>original-ref</em> <em>resolved-ref</em></p>
<p>Override the flake registries, redirecting <em>original-ref</em> to <em>resolved-ref</em>.</p>
</li>
</ul>
<p><strong>Logging-related options:</strong></p>
<ul>
<li>
<p><code>--debug</code></p>
<p>Set the logging verbosity level to 'debug'.</p>
</li>
<li>
<p><code>--log-format</code> <em>format</em></p>
<p>Set the format of log output; one of <code>raw</code>, <code>internal-json</code>, <code>bar</code> or <code>bar-with-logs</code>.</p>
</li>
<li>
<p><code>--print-build-logs</code> / <code>-L</code></p>
<p>Print full build logs on standard error.</p>
</li>
<li>
<p><code>--quiet</code></p>
<p>Decrease the logging verbosity level.</p>
</li>
<li>
<p><code>--verbose</code> / <code>-v</code></p>
<p>Increase the logging verbosity level.</p>
</li>
</ul>
<p><strong>Miscellaneous global options:</strong></p>
<ul>
<li>
<p><code>--help</code></p>
<p>Show usage information.</p>
</li>
<li>
<p><code>--offline</code></p>
<p>Disable substituters and consider all previously downloaded files up-to-date.</p>
</li>
<li>
<p><code>--option</code> <em>name</em> <em>value</em></p>
<p>Set the Nix configuration setting <em>name</em> to <em>value</em> (overriding <code>nix.conf</code>).</p>
</li>
<li>
<p><code>--refresh</code></p>
<p>Consider all previously downloaded files out-of-date.</p>
</li>
<li>
<p><code>--version</code></p>
<p>Show version information.</p>
</li>
</ul>
<p><strong>Options to override configuration settings:</strong></p>
<ul>
<li>
<p><code>--accept-flake-config</code></p>
<p>Enable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--access-tokens</code> <em>value</em></p>
<p>Set the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--allow-dirty</code></p>
<p>Enable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--allow-import-from-derivation</code></p>
<p>Enable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--allow-new-privileges</code></p>
<p>Enable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--allow-symlinked-store</code></p>
<p>Enable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--allow-unsafe-native-code-during-evaluation</code></p>
<p>Enable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--allowed-impure-host-deps</code> <em>value</em></p>
<p>Set the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--allowed-uris</code> <em>value</em></p>
<p>Set the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--allowed-users</code> <em>value</em></p>
<p>Set the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--auto-allocate-uids</code></p>
<p>Enable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--auto-optimise-store</code></p>
<p>Enable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt</code> <em>value</em></p>
<p>Set the <code>bash-prompt</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-prefix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-prefix</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-suffix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-suffix</code> setting.</p>
</li>
<li>
<p><code>--build-hook</code> <em>value</em></p>
<p>Set the <code>build-hook</code> setting.</p>
</li>
<li>
<p><code>--build-poll-interval</code> <em>value</em></p>
<p>Set the <code>build-poll-interval</code> setting.</p>
</li>
<li>
<p><code>--build-users-group</code> <em>value</em></p>
<p>Set the <code>build-users-group</code> setting.</p>
</li>
<li>
<p><code>--builders</code> <em>value</em></p>
<p>Set the <code>builders</code> setting.</p>
</li>
<li>
<p><code>--builders-use-substitutes</code></p>
<p>Enable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--commit-lockfile-summary</code> <em>value</em></p>
<p>Set the <code>commit-lockfile-summary</code> setting.</p>
</li>
<li>
<p><code>--compress-build-log</code></p>
<p>Enable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--connect-timeout</code> <em>value</em></p>
<p>Set the <code>connect-timeout</code> setting.</p>
</li>
<li>
<p><code>--cores</code> <em>value</em></p>
<p>Set the <code>cores</code> setting.</p>
</li>
<li>
<p><code>--diff-hook</code> <em>value</em></p>
<p>Set the <code>diff-hook</code> setting.</p>
</li>
<li>
<p><code>--download-attempts</code> <em>value</em></p>
<p>Set the <code>download-attempts</code> setting.</p>
</li>
<li>
<p><code>--download-speed</code> <em>value</em></p>
<p>Set the <code>download-speed</code> setting.</p>
</li>
<li>
<p><code>--eval-cache</code></p>
<p>Enable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--experimental-features</code> <em>value</em></p>
<p>Set the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-access-tokens</code> <em>value</em></p>
<p>Append to the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-impure-host-deps</code> <em>value</em></p>
<p>Append to the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-uris</code> <em>value</em></p>
<p>Append to the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-users</code> <em>value</em></p>
<p>Append to the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--extra-experimental-features</code> <em>value</em></p>
<p>Append to the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-extra-platforms</code> <em>value</em></p>
<p>Append to the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-hashed-mirrors</code> <em>value</em></p>
<p>Append to the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--extra-ignored-acls</code> <em>value</em></p>
<p>Append to the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--extra-nix-path</code> <em>value</em></p>
<p>Append to the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--extra-platforms</code> <em>value</em></p>
<p>Set the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-plugin-files</code> <em>value</em></p>
<p>Append to the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--extra-sandbox-paths</code> <em>value</em></p>
<p>Append to the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--extra-secret-key-files</code> <em>value</em></p>
<p>Append to the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--extra-substituters</code> <em>value</em></p>
<p>Append to the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-system-features</code> <em>value</em></p>
<p>Append to the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-public-keys</code> <em>value</em></p>
<p>Append to the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-substituters</code> <em>value</em></p>
<p>Append to the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-users</code> <em>value</em></p>
<p>Append to the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--fallback</code></p>
<p>Enable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--filter-syscalls</code></p>
<p>Enable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--flake-registry</code> <em>value</em></p>
<p>Set the <code>flake-registry</code> setting.</p>
</li>
<li>
<p><code>--fsync-metadata</code></p>
<p>Enable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--gc-reserved-space</code> <em>value</em></p>
<p>Set the <code>gc-reserved-space</code> setting.</p>
</li>
<li>
<p><code>--hashed-mirrors</code> <em>value</em></p>
<p>Set the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--http-connections</code> <em>value</em></p>
<p>Set the <code>http-connections</code> setting.</p>
</li>
<li>
<p><code>--http2</code></p>
<p>Enable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--id-count</code> <em>value</em></p>
<p>Set the <code>id-count</code> setting.</p>
</li>
<li>
<p><code>--ignore-try</code></p>
<p>Enable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--ignored-acls</code> <em>value</em></p>
<p>Set the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--impersonate-linux-26</code></p>
<p>Enable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--keep-build-log</code></p>
<p>Enable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--keep-derivations</code></p>
<p>Enable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-env-derivations</code></p>
<p>Enable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-failed</code></p>
<p>Enable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--keep-going</code></p>
<p>Enable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--keep-outputs</code></p>
<p>Enable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--log-lines</code> <em>value</em></p>
<p>Set the <code>log-lines</code> setting.</p>
</li>
<li>
<p><code>--max-build-log-size</code> <em>value</em></p>
<p>Set the <code>max-build-log-size</code> setting.</p>
</li>
<li>
<p><code>--max-free</code> <em>value</em></p>
<p>Set the <code>max-free</code> setting.</p>
</li>
<li>
<p><code>--max-jobs</code> <em>value</em></p>
<p>Set the <code>max-jobs</code> setting.</p>
</li>
<li>
<p><code>--max-silent-time</code> <em>value</em></p>
<p>Set the <code>max-silent-time</code> setting.</p>
</li>
<li>
<p><code>--min-free</code> <em>value</em></p>
<p>Set the <code>min-free</code> setting.</p>
</li>
<li>
<p><code>--min-free-check-interval</code> <em>value</em></p>
<p>Set the <code>min-free-check-interval</code> setting.</p>
</li>
<li>
<p><code>--nar-buffer-size</code> <em>value</em></p>
<p>Set the <code>nar-buffer-size</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-negative-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-negative-ttl</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-positive-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-positive-ttl</code> setting.</p>
</li>
<li>
<p><code>--netrc-file</code> <em>value</em></p>
<p>Set the <code>netrc-file</code> setting.</p>
</li>
<li>
<p><code>--nix-path</code> <em>value</em></p>
<p>Set the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--no-accept-flake-config</code></p>
<p>Disable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--no-allow-dirty</code></p>
<p>Disable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--no-allow-import-from-derivation</code></p>
<p>Disable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--no-allow-new-privileges</code></p>
<p>Disable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--no-allow-symlinked-store</code></p>
<p>Disable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--no-allow-unsafe-native-code-during-evaluation</code></p>
<p>Disable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--no-auto-allocate-uids</code></p>
<p>Disable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--no-auto-optimise-store</code></p>
<p>Disable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--no-builders-use-substitutes</code></p>
<p>Disable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--no-compress-build-log</code></p>
<p>Disable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-eval-cache</code></p>
<p>Disable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--no-fallback</code></p>
<p>Disable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--no-filter-syscalls</code></p>
<p>Disable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--no-fsync-metadata</code></p>
<p>Disable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--no-http2</code></p>
<p>Disable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--no-ignore-try</code></p>
<p>Disable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--no-impersonate-linux-26</code></p>
<p>Disable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--no-keep-build-log</code></p>
<p>Disable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-keep-derivations</code></p>
<p>Disable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-env-derivations</code></p>
<p>Disable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-failed</code></p>
<p>Disable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--no-keep-going</code></p>
<p>Disable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--no-keep-outputs</code></p>
<p>Disable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--no-preallocate-contents</code></p>
<p>Disable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--no-print-missing</code></p>
<p>Disable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--no-pure-eval</code></p>
<p>Disable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--no-require-sigs</code></p>
<p>Disable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--no-restrict-eval</code></p>
<p>Disable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--no-run-diff-hook</code></p>
<p>Disable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--no-sandbox</code></p>
<p>Disable sandboxing.</p>
</li>
<li>
<p><code>--no-sandbox-fallback</code></p>
<p>Disable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--no-show-trace</code></p>
<p>Disable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--no-substitute</code></p>
<p>Disable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--no-sync-before-registering</code></p>
<p>Disable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--no-trace-function-calls</code></p>
<p>Disable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--no-trace-verbose</code></p>
<p>Disable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--no-use-case-hack</code></p>
<p>Disable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--no-use-cgroups</code></p>
<p>Disable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--no-use-registries</code></p>
<p>Disable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--no-use-sqlite-wal</code></p>
<p>Disable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--no-warn-dirty</code></p>
<p>Disable the <code>warn-dirty</code> setting.</p>
</li>
<li>
<p><code>--plugin-files</code> <em>value</em></p>
<p>Set the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--post-build-hook</code> <em>value</em></p>
<p>Set the <code>post-build-hook</code> setting.</p>
</li>
<li>
<p><code>--pre-build-hook</code> <em>value</em></p>
<p>Set the <code>pre-build-hook</code> setting.</p>
</li>
<li>
<p><code>--preallocate-contents</code></p>
<p>Enable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--print-missing</code></p>
<p>Enable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--pure-eval</code></p>
<p>Enable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--relaxed-sandbox</code></p>
<p>Enable sandboxing, but allow builds to disable it.</p>
</li>
<li>
<p><code>--require-sigs</code></p>
<p>Enable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--restrict-eval</code></p>
<p>Enable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--run-diff-hook</code></p>
<p>Enable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--sandbox</code></p>
<p>Enable sandboxing.</p>
</li>
<li>
<p><code>--sandbox-build-dir</code> <em>value</em></p>
<p>Set the <code>sandbox-build-dir</code> setting.</p>
</li>
<li>
<p><code>--sandbox-dev-shm-size</code> <em>value</em></p>
<p>Set the <code>sandbox-dev-shm-size</code> setting.</p>
</li>
<li>
<p><code>--sandbox-fallback</code></p>
<p>Enable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--sandbox-paths</code> <em>value</em></p>
<p>Set the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--secret-key-files</code> <em>value</em></p>
<p>Set the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--show-trace</code></p>
<p>Enable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--stalled-download-timeout</code> <em>value</em></p>
<p>Set the <code>stalled-download-timeout</code> setting.</p>
</li>
<li>
<p><code>--start-id</code> <em>value</em></p>
<p>Set the <code>start-id</code> setting.</p>
</li>
<li>
<p><code>--store</code> <em>value</em></p>
<p>Set the <code>store</code> setting.</p>
</li>
<li>
<p><code>--substitute</code></p>
<p>Enable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--substituters</code> <em>value</em></p>
<p>Set the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--sync-before-registering</code></p>
<p>Enable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--system</code> <em>value</em></p>
<p>Set the <code>system</code> setting.</p>
</li>
<li>
<p><code>--system-features</code> <em>value</em></p>
<p>Set the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--tarball-ttl</code> <em>value</em></p>
<p>Set the <code>tarball-ttl</code> setting.</p>
</li>
<li>
<p><code>--timeout</code> <em>value</em></p>
<p>Set the <code>timeout</code> setting.</p>
</li>
<li>
<p><code>--trace-function-calls</code></p>
<p>Enable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--trace-verbose</code></p>
<p>Enable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--trusted-public-keys</code> <em>value</em></p>
<p>Set the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--trusted-substituters</code> <em>value</em></p>
<p>Set the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--trusted-users</code> <em>value</em></p>
<p>Set the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--use-case-hack</code></p>
<p>Enable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--use-cgroups</code></p>
<p>Enable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--use-registries</code></p>
<p>Enable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--use-sqlite-wal</code></p>
<p>Enable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--user-agent-suffix</code> <em>value</em></p>
<p>Set the <code>user-agent-suffix</code> setting.</p>
</li>
<li>
<p><code>--warn-dirty</code></p>
<p>Enable the <code>warn-dirty</code> setting.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p><strong>Warning</strong> <br />
This program is <strong>experimental</strong> and its interface is subject to change.</p>
</blockquote>
<h1 id="name-65"><a class="header" href="#name-65">Name</a></h1>
<p><code>nix registry list</code> - list available Nix flakes</p>
<h1 id="synopsis-96"><a class="header" href="#synopsis-96">Synopsis</a></h1>
<p><code>nix registry list</code> [<em>option</em>...] </p>
<h1 id="examples-63"><a class="header" href="#examples-63">Examples</a></h1>
<ul>
<li>
<p>Show the contents of all registries:</p>
<pre><code class="language-console"># nix registry list
user   flake:dwarffs github:edolstra/dwarffs/d181d714fd36eb06f4992a1997cd5601e26db8f5
system flake:nixpkgs path:/nix/store/fxl9mrm5xvzam0lxi9ygdmksskx4qq8s-source?lastModified=1605220118&amp;narHash=sha256-Und10ixH1WuW0XHYMxxuHRohKYb45R%2fT8CwZuLd2D2Q=&amp;rev=3090c65041104931adda7625d37fa874b2b5c124
global flake:blender-bin github:edolstra/nix-warez?dir=blender
global flake:dwarffs github:edolstra/dwarffs
…
</code></pre>
</li>
</ul>
<h1 id="description-84"><a class="header" href="#description-84">Description</a></h1>
<p>This command displays the contents of all registries on standard
output. Each line represents one registry entry in the format <em>type</em>
<em>from</em> <em>to</em>, where <em>type</em> denotes the registry containing the entry:</p>
<ul>
<li><code>flags</code>: entries specified on the command line using <code>--override-flake</code>.</li>
<li><code>user</code>: the user registry.</li>
<li><code>system</code>: the system registry.</li>
<li><code>global</code>: the global registry.</li>
</ul>
<p>See the <a href="command-ref/new-cli/./nix3-registry.html"><code>nix registry</code> manual page</a> for more details.</p>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p><strong>Warning</strong> <br />
This program is <strong>experimental</strong> and its interface is subject to change.</p>
</blockquote>
<h1 id="name-66"><a class="header" href="#name-66">Name</a></h1>
<p><code>nix registry pin</code> - pin a flake to its current version or to the current version of a flake URL</p>
<h1 id="synopsis-97"><a class="header" href="#synopsis-97">Synopsis</a></h1>
<p><code>nix registry pin</code> [<em>option</em>...] <em>url</em> <em>locked</em></p>
<h1 id="examples-64"><a class="header" href="#examples-64">Examples</a></h1>
<ul>
<li>
<p>Pin <code>nixpkgs</code> to its most recent Git revision:</p>
<pre><code class="language-console"># nix registry pin nixpkgs
</code></pre>
<p>Afterwards the user registry will have an entry like this:</p>
<pre><code class="language-console">nix registry list | grep '^user '
user   flake:nixpkgs github:NixOS/nixpkgs/925b70cd964ceaedee26fde9b19cc4c4f081196a
</code></pre>
<p>and <code>nix flake info</code> will say:</p>
<pre><code class="language-console"># nix flake info nixpkgs
Resolved URL:  github:NixOS/nixpkgs/925b70cd964ceaedee26fde9b19cc4c4f081196a
Locked URL:    github:NixOS/nixpkgs/925b70cd964ceaedee26fde9b19cc4c4f081196a
…
</code></pre>
</li>
<li>
<p>Pin <code>nixpkgs</code> in a custom registry to its most recent Git revision:</p>
<pre><code class="language-console"># nix registry pin --registry ./custom-flake-registry.json nixpkgs
</code></pre>
</li>
</ul>
<h1 id="description-85"><a class="header" href="#description-85">Description</a></h1>
<p>This command adds an entry to the user registry that maps flake
reference <em>url</em> to the corresponding <em>locked</em> flake reference, that
is, a flake reference that specifies an exact revision or content
hash. This ensures that until this registry entry is removed, all uses
of <em>url</em> will resolve to exactly the same flake.</p>
<p>Entries can be removed using <a href="command-ref/new-cli/./nix3-registry-remove.html"><code>nix registry remove</code></a>.</p>
<h1 id="options-47"><a class="header" href="#options-47">Options</a></h1>
<ul>
<li>
<p><code>--registry</code> <em>registry</em></p>
<p>The registry to operate on.</p>
</li>
</ul>
<p><strong>Common evaluation options:</strong></p>
<ul>
<li>
<p><code>--arg</code> <em>name</em> <em>expr</em></p>
<p>Pass the value <em>expr</em> as the argument <em>name</em> to Nix functions.</p>
</li>
<li>
<p><code>--argstr</code> <em>name</em> <em>string</em></p>
<p>Pass the string <em>string</em> as the argument <em>name</em> to Nix functions.</p>
</li>
<li>
<p><code>--debugger</code></p>
<p>Start an interactive environment if evaluation fails.</p>
</li>
<li>
<p><code>--eval-store</code> <em>store-url</em></p>
<p>The Nix store to use for evaluations.</p>
</li>
<li>
<p><code>--impure</code></p>
<p>Allow access to mutable paths and repositories.</p>
</li>
<li>
<p><code>--include</code> / <code>-I</code> <em>path</em></p>
<p>Add <em>path</em> to the Nix search path. The Nix search path is
initialized from the colon-separated <a href="command-ref/new-cli/../../command-ref/env-common.html#env-NIX_PATH"><code>NIX_PATH</code></a> environment
variable, and is used to look up the location of Nix expressions using <a href="command-ref/new-cli/../../language/values.html#type-path">paths</a> enclosed in angle
brackets (i.e., <code>&lt;nixpkgs&gt;</code>).</p>
<p>For instance, passing</p>
<pre><code>-I /home/eelco/Dev
-I /etc/nixos
</code></pre>
<p>will cause Nix to look for paths relative to <code>/home/eelco/Dev</code> and
<code>/etc/nixos</code>, in that order. This is equivalent to setting the
<code>NIX_PATH</code> environment variable to</p>
<pre><code>/home/eelco/Dev:/etc/nixos
</code></pre>
<p>It is also possible to match paths against a prefix. For example,
passing</p>
<pre><code>-I nixpkgs=/home/eelco/Dev/nixpkgs-branch
-I /etc/nixos
</code></pre>
<p>will cause Nix to search for <code>&lt;nixpkgs/path&gt;</code> in
<code>/home/eelco/Dev/nixpkgs-branch/path</code> and <code>/etc/nixos/nixpkgs/path</code>.</p>
<p>If a path in the Nix search path starts with <code>http://</code> or <code>https://</code>,
it is interpreted as the URL of a tarball that will be downloaded and
unpacked to a temporary location. The tarball must consist of a single
top-level directory. For example, passing</p>
<pre><code>-I nixpkgs=https://github.com/NixOS/nixpkgs/archive/master.tar.gz
</code></pre>
<p>tells Nix to download and use the current contents of the <code>master</code>
branch in the <code>nixpkgs</code> repository.</p>
<p>The URLs of the tarballs from the official <code>nixos.org</code> channels
(see <a href="command-ref/new-cli/../nix-channel.html">the manual page for <code>nix-channel</code></a>) can be
abbreviated as <code>channel:&lt;channel-name&gt;</code>. For instance, the
following two flags are equivalent:</p>
<pre><code>-I nixpkgs=channel:nixos-21.05
-I nixpkgs=https://nixos.org/channels/nixos-21.05/nixexprs.tar.xz
</code></pre>
<p>You can also fetch source trees using <a href="command-ref/new-cli/./nix3-flake.html#url-like-syntax">flake URLs</a> and add them to the
search path. For instance,</p>
<pre><code>-I nixpkgs=flake:nixpkgs
</code></pre>
<p>specifies that the prefix <code>nixpkgs</code> shall refer to the source tree
downloaded from the <code>nixpkgs</code> entry in the flake registry. Similarly,</p>
<pre><code>-I nixpkgs=flake:github:NixOS/nixpkgs/nixos-22.05
</code></pre>
<p>makes <code>&lt;nixpkgs&gt;</code> refer to a particular branch of the
<code>NixOS/nixpkgs</code> repository on GitHub.</p>
</li>
<li>
<p><code>--override-flake</code> <em>original-ref</em> <em>resolved-ref</em></p>
<p>Override the flake registries, redirecting <em>original-ref</em> to <em>resolved-ref</em>.</p>
</li>
</ul>
<p><strong>Logging-related options:</strong></p>
<ul>
<li>
<p><code>--debug</code></p>
<p>Set the logging verbosity level to 'debug'.</p>
</li>
<li>
<p><code>--log-format</code> <em>format</em></p>
<p>Set the format of log output; one of <code>raw</code>, <code>internal-json</code>, <code>bar</code> or <code>bar-with-logs</code>.</p>
</li>
<li>
<p><code>--print-build-logs</code> / <code>-L</code></p>
<p>Print full build logs on standard error.</p>
</li>
<li>
<p><code>--quiet</code></p>
<p>Decrease the logging verbosity level.</p>
</li>
<li>
<p><code>--verbose</code> / <code>-v</code></p>
<p>Increase the logging verbosity level.</p>
</li>
</ul>
<p><strong>Miscellaneous global options:</strong></p>
<ul>
<li>
<p><code>--help</code></p>
<p>Show usage information.</p>
</li>
<li>
<p><code>--offline</code></p>
<p>Disable substituters and consider all previously downloaded files up-to-date.</p>
</li>
<li>
<p><code>--option</code> <em>name</em> <em>value</em></p>
<p>Set the Nix configuration setting <em>name</em> to <em>value</em> (overriding <code>nix.conf</code>).</p>
</li>
<li>
<p><code>--refresh</code></p>
<p>Consider all previously downloaded files out-of-date.</p>
</li>
<li>
<p><code>--version</code></p>
<p>Show version information.</p>
</li>
</ul>
<p><strong>Options to override configuration settings:</strong></p>
<ul>
<li>
<p><code>--accept-flake-config</code></p>
<p>Enable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--access-tokens</code> <em>value</em></p>
<p>Set the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--allow-dirty</code></p>
<p>Enable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--allow-import-from-derivation</code></p>
<p>Enable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--allow-new-privileges</code></p>
<p>Enable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--allow-symlinked-store</code></p>
<p>Enable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--allow-unsafe-native-code-during-evaluation</code></p>
<p>Enable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--allowed-impure-host-deps</code> <em>value</em></p>
<p>Set the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--allowed-uris</code> <em>value</em></p>
<p>Set the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--allowed-users</code> <em>value</em></p>
<p>Set the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--auto-allocate-uids</code></p>
<p>Enable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--auto-optimise-store</code></p>
<p>Enable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt</code> <em>value</em></p>
<p>Set the <code>bash-prompt</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-prefix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-prefix</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-suffix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-suffix</code> setting.</p>
</li>
<li>
<p><code>--build-hook</code> <em>value</em></p>
<p>Set the <code>build-hook</code> setting.</p>
</li>
<li>
<p><code>--build-poll-interval</code> <em>value</em></p>
<p>Set the <code>build-poll-interval</code> setting.</p>
</li>
<li>
<p><code>--build-users-group</code> <em>value</em></p>
<p>Set the <code>build-users-group</code> setting.</p>
</li>
<li>
<p><code>--builders</code> <em>value</em></p>
<p>Set the <code>builders</code> setting.</p>
</li>
<li>
<p><code>--builders-use-substitutes</code></p>
<p>Enable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--commit-lockfile-summary</code> <em>value</em></p>
<p>Set the <code>commit-lockfile-summary</code> setting.</p>
</li>
<li>
<p><code>--compress-build-log</code></p>
<p>Enable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--connect-timeout</code> <em>value</em></p>
<p>Set the <code>connect-timeout</code> setting.</p>
</li>
<li>
<p><code>--cores</code> <em>value</em></p>
<p>Set the <code>cores</code> setting.</p>
</li>
<li>
<p><code>--diff-hook</code> <em>value</em></p>
<p>Set the <code>diff-hook</code> setting.</p>
</li>
<li>
<p><code>--download-attempts</code> <em>value</em></p>
<p>Set the <code>download-attempts</code> setting.</p>
</li>
<li>
<p><code>--download-speed</code> <em>value</em></p>
<p>Set the <code>download-speed</code> setting.</p>
</li>
<li>
<p><code>--eval-cache</code></p>
<p>Enable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--experimental-features</code> <em>value</em></p>
<p>Set the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-access-tokens</code> <em>value</em></p>
<p>Append to the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-impure-host-deps</code> <em>value</em></p>
<p>Append to the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-uris</code> <em>value</em></p>
<p>Append to the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-users</code> <em>value</em></p>
<p>Append to the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--extra-experimental-features</code> <em>value</em></p>
<p>Append to the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-extra-platforms</code> <em>value</em></p>
<p>Append to the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-hashed-mirrors</code> <em>value</em></p>
<p>Append to the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--extra-ignored-acls</code> <em>value</em></p>
<p>Append to the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--extra-nix-path</code> <em>value</em></p>
<p>Append to the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--extra-platforms</code> <em>value</em></p>
<p>Set the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-plugin-files</code> <em>value</em></p>
<p>Append to the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--extra-sandbox-paths</code> <em>value</em></p>
<p>Append to the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--extra-secret-key-files</code> <em>value</em></p>
<p>Append to the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--extra-substituters</code> <em>value</em></p>
<p>Append to the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-system-features</code> <em>value</em></p>
<p>Append to the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-public-keys</code> <em>value</em></p>
<p>Append to the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-substituters</code> <em>value</em></p>
<p>Append to the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-users</code> <em>value</em></p>
<p>Append to the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--fallback</code></p>
<p>Enable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--filter-syscalls</code></p>
<p>Enable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--flake-registry</code> <em>value</em></p>
<p>Set the <code>flake-registry</code> setting.</p>
</li>
<li>
<p><code>--fsync-metadata</code></p>
<p>Enable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--gc-reserved-space</code> <em>value</em></p>
<p>Set the <code>gc-reserved-space</code> setting.</p>
</li>
<li>
<p><code>--hashed-mirrors</code> <em>value</em></p>
<p>Set the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--http-connections</code> <em>value</em></p>
<p>Set the <code>http-connections</code> setting.</p>
</li>
<li>
<p><code>--http2</code></p>
<p>Enable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--id-count</code> <em>value</em></p>
<p>Set the <code>id-count</code> setting.</p>
</li>
<li>
<p><code>--ignore-try</code></p>
<p>Enable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--ignored-acls</code> <em>value</em></p>
<p>Set the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--impersonate-linux-26</code></p>
<p>Enable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--keep-build-log</code></p>
<p>Enable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--keep-derivations</code></p>
<p>Enable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-env-derivations</code></p>
<p>Enable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-failed</code></p>
<p>Enable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--keep-going</code></p>
<p>Enable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--keep-outputs</code></p>
<p>Enable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--log-lines</code> <em>value</em></p>
<p>Set the <code>log-lines</code> setting.</p>
</li>
<li>
<p><code>--max-build-log-size</code> <em>value</em></p>
<p>Set the <code>max-build-log-size</code> setting.</p>
</li>
<li>
<p><code>--max-free</code> <em>value</em></p>
<p>Set the <code>max-free</code> setting.</p>
</li>
<li>
<p><code>--max-jobs</code> <em>value</em></p>
<p>Set the <code>max-jobs</code> setting.</p>
</li>
<li>
<p><code>--max-silent-time</code> <em>value</em></p>
<p>Set the <code>max-silent-time</code> setting.</p>
</li>
<li>
<p><code>--min-free</code> <em>value</em></p>
<p>Set the <code>min-free</code> setting.</p>
</li>
<li>
<p><code>--min-free-check-interval</code> <em>value</em></p>
<p>Set the <code>min-free-check-interval</code> setting.</p>
</li>
<li>
<p><code>--nar-buffer-size</code> <em>value</em></p>
<p>Set the <code>nar-buffer-size</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-negative-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-negative-ttl</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-positive-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-positive-ttl</code> setting.</p>
</li>
<li>
<p><code>--netrc-file</code> <em>value</em></p>
<p>Set the <code>netrc-file</code> setting.</p>
</li>
<li>
<p><code>--nix-path</code> <em>value</em></p>
<p>Set the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--no-accept-flake-config</code></p>
<p>Disable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--no-allow-dirty</code></p>
<p>Disable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--no-allow-import-from-derivation</code></p>
<p>Disable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--no-allow-new-privileges</code></p>
<p>Disable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--no-allow-symlinked-store</code></p>
<p>Disable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--no-allow-unsafe-native-code-during-evaluation</code></p>
<p>Disable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--no-auto-allocate-uids</code></p>
<p>Disable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--no-auto-optimise-store</code></p>
<p>Disable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--no-builders-use-substitutes</code></p>
<p>Disable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--no-compress-build-log</code></p>
<p>Disable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-eval-cache</code></p>
<p>Disable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--no-fallback</code></p>
<p>Disable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--no-filter-syscalls</code></p>
<p>Disable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--no-fsync-metadata</code></p>
<p>Disable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--no-http2</code></p>
<p>Disable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--no-ignore-try</code></p>
<p>Disable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--no-impersonate-linux-26</code></p>
<p>Disable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--no-keep-build-log</code></p>
<p>Disable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-keep-derivations</code></p>
<p>Disable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-env-derivations</code></p>
<p>Disable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-failed</code></p>
<p>Disable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--no-keep-going</code></p>
<p>Disable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--no-keep-outputs</code></p>
<p>Disable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--no-preallocate-contents</code></p>
<p>Disable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--no-print-missing</code></p>
<p>Disable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--no-pure-eval</code></p>
<p>Disable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--no-require-sigs</code></p>
<p>Disable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--no-restrict-eval</code></p>
<p>Disable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--no-run-diff-hook</code></p>
<p>Disable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--no-sandbox</code></p>
<p>Disable sandboxing.</p>
</li>
<li>
<p><code>--no-sandbox-fallback</code></p>
<p>Disable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--no-show-trace</code></p>
<p>Disable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--no-substitute</code></p>
<p>Disable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--no-sync-before-registering</code></p>
<p>Disable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--no-trace-function-calls</code></p>
<p>Disable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--no-trace-verbose</code></p>
<p>Disable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--no-use-case-hack</code></p>
<p>Disable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--no-use-cgroups</code></p>
<p>Disable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--no-use-registries</code></p>
<p>Disable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--no-use-sqlite-wal</code></p>
<p>Disable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--no-warn-dirty</code></p>
<p>Disable the <code>warn-dirty</code> setting.</p>
</li>
<li>
<p><code>--plugin-files</code> <em>value</em></p>
<p>Set the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--post-build-hook</code> <em>value</em></p>
<p>Set the <code>post-build-hook</code> setting.</p>
</li>
<li>
<p><code>--pre-build-hook</code> <em>value</em></p>
<p>Set the <code>pre-build-hook</code> setting.</p>
</li>
<li>
<p><code>--preallocate-contents</code></p>
<p>Enable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--print-missing</code></p>
<p>Enable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--pure-eval</code></p>
<p>Enable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--relaxed-sandbox</code></p>
<p>Enable sandboxing, but allow builds to disable it.</p>
</li>
<li>
<p><code>--require-sigs</code></p>
<p>Enable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--restrict-eval</code></p>
<p>Enable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--run-diff-hook</code></p>
<p>Enable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--sandbox</code></p>
<p>Enable sandboxing.</p>
</li>
<li>
<p><code>--sandbox-build-dir</code> <em>value</em></p>
<p>Set the <code>sandbox-build-dir</code> setting.</p>
</li>
<li>
<p><code>--sandbox-dev-shm-size</code> <em>value</em></p>
<p>Set the <code>sandbox-dev-shm-size</code> setting.</p>
</li>
<li>
<p><code>--sandbox-fallback</code></p>
<p>Enable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--sandbox-paths</code> <em>value</em></p>
<p>Set the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--secret-key-files</code> <em>value</em></p>
<p>Set the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--show-trace</code></p>
<p>Enable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--stalled-download-timeout</code> <em>value</em></p>
<p>Set the <code>stalled-download-timeout</code> setting.</p>
</li>
<li>
<p><code>--start-id</code> <em>value</em></p>
<p>Set the <code>start-id</code> setting.</p>
</li>
<li>
<p><code>--store</code> <em>value</em></p>
<p>Set the <code>store</code> setting.</p>
</li>
<li>
<p><code>--substitute</code></p>
<p>Enable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--substituters</code> <em>value</em></p>
<p>Set the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--sync-before-registering</code></p>
<p>Enable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--system</code> <em>value</em></p>
<p>Set the <code>system</code> setting.</p>
</li>
<li>
<p><code>--system-features</code> <em>value</em></p>
<p>Set the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--tarball-ttl</code> <em>value</em></p>
<p>Set the <code>tarball-ttl</code> setting.</p>
</li>
<li>
<p><code>--timeout</code> <em>value</em></p>
<p>Set the <code>timeout</code> setting.</p>
</li>
<li>
<p><code>--trace-function-calls</code></p>
<p>Enable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--trace-verbose</code></p>
<p>Enable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--trusted-public-keys</code> <em>value</em></p>
<p>Set the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--trusted-substituters</code> <em>value</em></p>
<p>Set the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--trusted-users</code> <em>value</em></p>
<p>Set the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--use-case-hack</code></p>
<p>Enable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--use-cgroups</code></p>
<p>Enable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--use-registries</code></p>
<p>Enable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--use-sqlite-wal</code></p>
<p>Enable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--user-agent-suffix</code> <em>value</em></p>
<p>Set the <code>user-agent-suffix</code> setting.</p>
</li>
<li>
<p><code>--warn-dirty</code></p>
<p>Enable the <code>warn-dirty</code> setting.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p><strong>Warning</strong> <br />
This program is <strong>experimental</strong> and its interface is subject to change.</p>
</blockquote>
<h1 id="name-67"><a class="header" href="#name-67">Name</a></h1>
<p><code>nix registry remove</code> - remove flake from user flake registry</p>
<h1 id="synopsis-98"><a class="header" href="#synopsis-98">Synopsis</a></h1>
<p><code>nix registry remove</code> [<em>option</em>...] <em>url</em></p>
<h1 id="examples-65"><a class="header" href="#examples-65">Examples</a></h1>
<ul>
<li>
<p>Remove the entry <code>nixpkgs</code> from the user registry:</p>
<pre><code class="language-console"># nix registry remove nixpkgs
</code></pre>
</li>
<li>
<p>Remove the entry <code>nixpkgs</code> from a custom registry:</p>
<pre><code class="language-console"># nix registry remove --registry ./custom-flake-registry.json nixpkgs
</code></pre>
</li>
</ul>
<h1 id="description-86"><a class="header" href="#description-86">Description</a></h1>
<p>This command removes from the user registry any entry for flake
reference <em>url</em>.</p>
<h1 id="options-48"><a class="header" href="#options-48">Options</a></h1>
<ul>
<li>
<p><code>--registry</code> <em>registry</em></p>
<p>The registry to operate on.</p>
</li>
</ul>
<p><strong>Logging-related options:</strong></p>
<ul>
<li>
<p><code>--debug</code></p>
<p>Set the logging verbosity level to 'debug'.</p>
</li>
<li>
<p><code>--log-format</code> <em>format</em></p>
<p>Set the format of log output; one of <code>raw</code>, <code>internal-json</code>, <code>bar</code> or <code>bar-with-logs</code>.</p>
</li>
<li>
<p><code>--print-build-logs</code> / <code>-L</code></p>
<p>Print full build logs on standard error.</p>
</li>
<li>
<p><code>--quiet</code></p>
<p>Decrease the logging verbosity level.</p>
</li>
<li>
<p><code>--verbose</code> / <code>-v</code></p>
<p>Increase the logging verbosity level.</p>
</li>
</ul>
<p><strong>Miscellaneous global options:</strong></p>
<ul>
<li>
<p><code>--help</code></p>
<p>Show usage information.</p>
</li>
<li>
<p><code>--offline</code></p>
<p>Disable substituters and consider all previously downloaded files up-to-date.</p>
</li>
<li>
<p><code>--option</code> <em>name</em> <em>value</em></p>
<p>Set the Nix configuration setting <em>name</em> to <em>value</em> (overriding <code>nix.conf</code>).</p>
</li>
<li>
<p><code>--refresh</code></p>
<p>Consider all previously downloaded files out-of-date.</p>
</li>
<li>
<p><code>--version</code></p>
<p>Show version information.</p>
</li>
</ul>
<p><strong>Options to override configuration settings:</strong></p>
<ul>
<li>
<p><code>--accept-flake-config</code></p>
<p>Enable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--access-tokens</code> <em>value</em></p>
<p>Set the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--allow-dirty</code></p>
<p>Enable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--allow-import-from-derivation</code></p>
<p>Enable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--allow-new-privileges</code></p>
<p>Enable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--allow-symlinked-store</code></p>
<p>Enable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--allow-unsafe-native-code-during-evaluation</code></p>
<p>Enable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--allowed-impure-host-deps</code> <em>value</em></p>
<p>Set the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--allowed-uris</code> <em>value</em></p>
<p>Set the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--allowed-users</code> <em>value</em></p>
<p>Set the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--auto-allocate-uids</code></p>
<p>Enable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--auto-optimise-store</code></p>
<p>Enable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt</code> <em>value</em></p>
<p>Set the <code>bash-prompt</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-prefix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-prefix</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-suffix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-suffix</code> setting.</p>
</li>
<li>
<p><code>--build-hook</code> <em>value</em></p>
<p>Set the <code>build-hook</code> setting.</p>
</li>
<li>
<p><code>--build-poll-interval</code> <em>value</em></p>
<p>Set the <code>build-poll-interval</code> setting.</p>
</li>
<li>
<p><code>--build-users-group</code> <em>value</em></p>
<p>Set the <code>build-users-group</code> setting.</p>
</li>
<li>
<p><code>--builders</code> <em>value</em></p>
<p>Set the <code>builders</code> setting.</p>
</li>
<li>
<p><code>--builders-use-substitutes</code></p>
<p>Enable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--commit-lockfile-summary</code> <em>value</em></p>
<p>Set the <code>commit-lockfile-summary</code> setting.</p>
</li>
<li>
<p><code>--compress-build-log</code></p>
<p>Enable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--connect-timeout</code> <em>value</em></p>
<p>Set the <code>connect-timeout</code> setting.</p>
</li>
<li>
<p><code>--cores</code> <em>value</em></p>
<p>Set the <code>cores</code> setting.</p>
</li>
<li>
<p><code>--diff-hook</code> <em>value</em></p>
<p>Set the <code>diff-hook</code> setting.</p>
</li>
<li>
<p><code>--download-attempts</code> <em>value</em></p>
<p>Set the <code>download-attempts</code> setting.</p>
</li>
<li>
<p><code>--download-speed</code> <em>value</em></p>
<p>Set the <code>download-speed</code> setting.</p>
</li>
<li>
<p><code>--eval-cache</code></p>
<p>Enable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--experimental-features</code> <em>value</em></p>
<p>Set the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-access-tokens</code> <em>value</em></p>
<p>Append to the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-impure-host-deps</code> <em>value</em></p>
<p>Append to the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-uris</code> <em>value</em></p>
<p>Append to the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-users</code> <em>value</em></p>
<p>Append to the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--extra-experimental-features</code> <em>value</em></p>
<p>Append to the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-extra-platforms</code> <em>value</em></p>
<p>Append to the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-hashed-mirrors</code> <em>value</em></p>
<p>Append to the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--extra-ignored-acls</code> <em>value</em></p>
<p>Append to the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--extra-nix-path</code> <em>value</em></p>
<p>Append to the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--extra-platforms</code> <em>value</em></p>
<p>Set the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-plugin-files</code> <em>value</em></p>
<p>Append to the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--extra-sandbox-paths</code> <em>value</em></p>
<p>Append to the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--extra-secret-key-files</code> <em>value</em></p>
<p>Append to the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--extra-substituters</code> <em>value</em></p>
<p>Append to the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-system-features</code> <em>value</em></p>
<p>Append to the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-public-keys</code> <em>value</em></p>
<p>Append to the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-substituters</code> <em>value</em></p>
<p>Append to the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-users</code> <em>value</em></p>
<p>Append to the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--fallback</code></p>
<p>Enable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--filter-syscalls</code></p>
<p>Enable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--flake-registry</code> <em>value</em></p>
<p>Set the <code>flake-registry</code> setting.</p>
</li>
<li>
<p><code>--fsync-metadata</code></p>
<p>Enable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--gc-reserved-space</code> <em>value</em></p>
<p>Set the <code>gc-reserved-space</code> setting.</p>
</li>
<li>
<p><code>--hashed-mirrors</code> <em>value</em></p>
<p>Set the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--http-connections</code> <em>value</em></p>
<p>Set the <code>http-connections</code> setting.</p>
</li>
<li>
<p><code>--http2</code></p>
<p>Enable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--id-count</code> <em>value</em></p>
<p>Set the <code>id-count</code> setting.</p>
</li>
<li>
<p><code>--ignore-try</code></p>
<p>Enable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--ignored-acls</code> <em>value</em></p>
<p>Set the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--impersonate-linux-26</code></p>
<p>Enable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--keep-build-log</code></p>
<p>Enable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--keep-derivations</code></p>
<p>Enable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-env-derivations</code></p>
<p>Enable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-failed</code></p>
<p>Enable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--keep-going</code></p>
<p>Enable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--keep-outputs</code></p>
<p>Enable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--log-lines</code> <em>value</em></p>
<p>Set the <code>log-lines</code> setting.</p>
</li>
<li>
<p><code>--max-build-log-size</code> <em>value</em></p>
<p>Set the <code>max-build-log-size</code> setting.</p>
</li>
<li>
<p><code>--max-free</code> <em>value</em></p>
<p>Set the <code>max-free</code> setting.</p>
</li>
<li>
<p><code>--max-jobs</code> <em>value</em></p>
<p>Set the <code>max-jobs</code> setting.</p>
</li>
<li>
<p><code>--max-silent-time</code> <em>value</em></p>
<p>Set the <code>max-silent-time</code> setting.</p>
</li>
<li>
<p><code>--min-free</code> <em>value</em></p>
<p>Set the <code>min-free</code> setting.</p>
</li>
<li>
<p><code>--min-free-check-interval</code> <em>value</em></p>
<p>Set the <code>min-free-check-interval</code> setting.</p>
</li>
<li>
<p><code>--nar-buffer-size</code> <em>value</em></p>
<p>Set the <code>nar-buffer-size</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-negative-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-negative-ttl</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-positive-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-positive-ttl</code> setting.</p>
</li>
<li>
<p><code>--netrc-file</code> <em>value</em></p>
<p>Set the <code>netrc-file</code> setting.</p>
</li>
<li>
<p><code>--nix-path</code> <em>value</em></p>
<p>Set the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--no-accept-flake-config</code></p>
<p>Disable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--no-allow-dirty</code></p>
<p>Disable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--no-allow-import-from-derivation</code></p>
<p>Disable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--no-allow-new-privileges</code></p>
<p>Disable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--no-allow-symlinked-store</code></p>
<p>Disable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--no-allow-unsafe-native-code-during-evaluation</code></p>
<p>Disable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--no-auto-allocate-uids</code></p>
<p>Disable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--no-auto-optimise-store</code></p>
<p>Disable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--no-builders-use-substitutes</code></p>
<p>Disable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--no-compress-build-log</code></p>
<p>Disable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-eval-cache</code></p>
<p>Disable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--no-fallback</code></p>
<p>Disable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--no-filter-syscalls</code></p>
<p>Disable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--no-fsync-metadata</code></p>
<p>Disable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--no-http2</code></p>
<p>Disable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--no-ignore-try</code></p>
<p>Disable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--no-impersonate-linux-26</code></p>
<p>Disable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--no-keep-build-log</code></p>
<p>Disable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-keep-derivations</code></p>
<p>Disable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-env-derivations</code></p>
<p>Disable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-failed</code></p>
<p>Disable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--no-keep-going</code></p>
<p>Disable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--no-keep-outputs</code></p>
<p>Disable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--no-preallocate-contents</code></p>
<p>Disable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--no-print-missing</code></p>
<p>Disable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--no-pure-eval</code></p>
<p>Disable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--no-require-sigs</code></p>
<p>Disable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--no-restrict-eval</code></p>
<p>Disable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--no-run-diff-hook</code></p>
<p>Disable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--no-sandbox</code></p>
<p>Disable sandboxing.</p>
</li>
<li>
<p><code>--no-sandbox-fallback</code></p>
<p>Disable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--no-show-trace</code></p>
<p>Disable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--no-substitute</code></p>
<p>Disable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--no-sync-before-registering</code></p>
<p>Disable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--no-trace-function-calls</code></p>
<p>Disable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--no-trace-verbose</code></p>
<p>Disable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--no-use-case-hack</code></p>
<p>Disable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--no-use-cgroups</code></p>
<p>Disable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--no-use-registries</code></p>
<p>Disable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--no-use-sqlite-wal</code></p>
<p>Disable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--no-warn-dirty</code></p>
<p>Disable the <code>warn-dirty</code> setting.</p>
</li>
<li>
<p><code>--plugin-files</code> <em>value</em></p>
<p>Set the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--post-build-hook</code> <em>value</em></p>
<p>Set the <code>post-build-hook</code> setting.</p>
</li>
<li>
<p><code>--pre-build-hook</code> <em>value</em></p>
<p>Set the <code>pre-build-hook</code> setting.</p>
</li>
<li>
<p><code>--preallocate-contents</code></p>
<p>Enable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--print-missing</code></p>
<p>Enable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--pure-eval</code></p>
<p>Enable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--relaxed-sandbox</code></p>
<p>Enable sandboxing, but allow builds to disable it.</p>
</li>
<li>
<p><code>--require-sigs</code></p>
<p>Enable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--restrict-eval</code></p>
<p>Enable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--run-diff-hook</code></p>
<p>Enable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--sandbox</code></p>
<p>Enable sandboxing.</p>
</li>
<li>
<p><code>--sandbox-build-dir</code> <em>value</em></p>
<p>Set the <code>sandbox-build-dir</code> setting.</p>
</li>
<li>
<p><code>--sandbox-dev-shm-size</code> <em>value</em></p>
<p>Set the <code>sandbox-dev-shm-size</code> setting.</p>
</li>
<li>
<p><code>--sandbox-fallback</code></p>
<p>Enable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--sandbox-paths</code> <em>value</em></p>
<p>Set the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--secret-key-files</code> <em>value</em></p>
<p>Set the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--show-trace</code></p>
<p>Enable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--stalled-download-timeout</code> <em>value</em></p>
<p>Set the <code>stalled-download-timeout</code> setting.</p>
</li>
<li>
<p><code>--start-id</code> <em>value</em></p>
<p>Set the <code>start-id</code> setting.</p>
</li>
<li>
<p><code>--store</code> <em>value</em></p>
<p>Set the <code>store</code> setting.</p>
</li>
<li>
<p><code>--substitute</code></p>
<p>Enable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--substituters</code> <em>value</em></p>
<p>Set the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--sync-before-registering</code></p>
<p>Enable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--system</code> <em>value</em></p>
<p>Set the <code>system</code> setting.</p>
</li>
<li>
<p><code>--system-features</code> <em>value</em></p>
<p>Set the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--tarball-ttl</code> <em>value</em></p>
<p>Set the <code>tarball-ttl</code> setting.</p>
</li>
<li>
<p><code>--timeout</code> <em>value</em></p>
<p>Set the <code>timeout</code> setting.</p>
</li>
<li>
<p><code>--trace-function-calls</code></p>
<p>Enable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--trace-verbose</code></p>
<p>Enable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--trusted-public-keys</code> <em>value</em></p>
<p>Set the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--trusted-substituters</code> <em>value</em></p>
<p>Set the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--trusted-users</code> <em>value</em></p>
<p>Set the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--use-case-hack</code></p>
<p>Enable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--use-cgroups</code></p>
<p>Enable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--use-registries</code></p>
<p>Enable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--use-sqlite-wal</code></p>
<p>Enable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--user-agent-suffix</code> <em>value</em></p>
<p>Set the <code>user-agent-suffix</code> setting.</p>
</li>
<li>
<p><code>--warn-dirty</code></p>
<p>Enable the <code>warn-dirty</code> setting.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p><strong>Warning</strong> <br />
This program is <strong>experimental</strong> and its interface is subject to change.</p>
</blockquote>
<h1 id="name-68"><a class="header" href="#name-68">Name</a></h1>
<p><code>nix repl</code> - start an interactive environment for evaluating Nix expressions</p>
<h1 id="synopsis-99"><a class="header" href="#synopsis-99">Synopsis</a></h1>
<p><code>nix repl</code> [<em>option</em>...] <em>installables</em>...</p>
<h1 id="examples-66"><a class="header" href="#examples-66">Examples</a></h1>
<ul>
<li>
<p>Display all special commands within the REPL:</p>
<pre><code class="language-console"># nix repl
nix-repl&gt; :?
</code></pre>
</li>
<li>
<p>Evaluate some simple Nix expressions:</p>
<pre><code class="language-console"># nix repl

nix-repl&gt; 1 + 2
3

nix-repl&gt; map (x: x * 2) [1 2 3]
[ 2 4 6 ]
</code></pre>
</li>
<li>
<p>Interact with Nixpkgs in the REPL:</p>
<pre><code class="language-console"># nix repl --file example.nix
Loading Installable ''...
Added 3 variables.

# nix repl --expr '{a={b=3;c=4;};}'
Loading Installable ''...
Added 1 variables.

# nix repl --expr '{a={b=3;c=4;};}' a
Loading Installable ''...
Added 1 variables.

# nix repl --extra-experimental-features 'flakes repl-flake' nixpkgs
Loading Installable 'flake:nixpkgs#'...
Added 5 variables.

nix-repl&gt; legacyPackages.x86_64-linux.emacs.name
&quot;emacs-27.1&quot;

nix-repl&gt; legacyPackages.x86_64-linux.emacs.name
&quot;emacs-27.1&quot;

nix-repl&gt; :q

# nix repl --expr 'import &lt;nixpkgs&gt;{}'

Loading Installable ''...
Added 12439 variables.

nix-repl&gt; emacs.name
&quot;emacs-27.1&quot;

nix-repl&gt; emacs.drvPath
&quot;/nix/store/lp0sjrhgg03y2n0l10n70rg0k7hhyz0l-emacs-27.1.drv&quot;

nix-repl&gt; drv = runCommand &quot;hello&quot; { buildInputs = [ hello ]; } &quot;hello; hello &gt; $out&quot;

nix-repl&gt; :b drv
this derivation produced the following outputs:
  out -&gt; /nix/store/0njwbgwmkwls0w5dv9mpc1pq5fj39q0l-hello

nix-repl&gt; builtins.readFile drv
&quot;Hello, world!\n&quot;

nix-repl&gt; :log drv
Hello, world!
</code></pre>
</li>
</ul>
<h1 id="description-87"><a class="header" href="#description-87">Description</a></h1>
<p>This command provides an interactive environment for evaluating Nix
expressions. (REPL stands for 'read–eval–print loop'.)</p>
<p>On startup, it loads the Nix expressions named <em>files</em> and adds them
into the lexical scope. You can load addition files using the <code>:l &lt;filename&gt;</code> command, or reload all files using <code>:r</code>.</p>
<h1 id="options-49"><a class="header" href="#options-49">Options</a></h1>
<p><strong>Common evaluation options:</strong></p>
<ul>
<li>
<p><code>--arg</code> <em>name</em> <em>expr</em></p>
<p>Pass the value <em>expr</em> as the argument <em>name</em> to Nix functions.</p>
</li>
<li>
<p><code>--argstr</code> <em>name</em> <em>string</em></p>
<p>Pass the string <em>string</em> as the argument <em>name</em> to Nix functions.</p>
</li>
<li>
<p><code>--debugger</code></p>
<p>Start an interactive environment if evaluation fails.</p>
</li>
<li>
<p><code>--eval-store</code> <em>store-url</em></p>
<p>The Nix store to use for evaluations.</p>
</li>
<li>
<p><code>--impure</code></p>
<p>Allow access to mutable paths and repositories.</p>
</li>
<li>
<p><code>--include</code> / <code>-I</code> <em>path</em></p>
<p>Add <em>path</em> to the Nix search path. The Nix search path is
initialized from the colon-separated <a href="command-ref/new-cli/../../command-ref/env-common.html#env-NIX_PATH"><code>NIX_PATH</code></a> environment
variable, and is used to look up the location of Nix expressions using <a href="command-ref/new-cli/../../language/values.html#type-path">paths</a> enclosed in angle
brackets (i.e., <code>&lt;nixpkgs&gt;</code>).</p>
<p>For instance, passing</p>
<pre><code>-I /home/eelco/Dev
-I /etc/nixos
</code></pre>
<p>will cause Nix to look for paths relative to <code>/home/eelco/Dev</code> and
<code>/etc/nixos</code>, in that order. This is equivalent to setting the
<code>NIX_PATH</code> environment variable to</p>
<pre><code>/home/eelco/Dev:/etc/nixos
</code></pre>
<p>It is also possible to match paths against a prefix. For example,
passing</p>
<pre><code>-I nixpkgs=/home/eelco/Dev/nixpkgs-branch
-I /etc/nixos
</code></pre>
<p>will cause Nix to search for <code>&lt;nixpkgs/path&gt;</code> in
<code>/home/eelco/Dev/nixpkgs-branch/path</code> and <code>/etc/nixos/nixpkgs/path</code>.</p>
<p>If a path in the Nix search path starts with <code>http://</code> or <code>https://</code>,
it is interpreted as the URL of a tarball that will be downloaded and
unpacked to a temporary location. The tarball must consist of a single
top-level directory. For example, passing</p>
<pre><code>-I nixpkgs=https://github.com/NixOS/nixpkgs/archive/master.tar.gz
</code></pre>
<p>tells Nix to download and use the current contents of the <code>master</code>
branch in the <code>nixpkgs</code> repository.</p>
<p>The URLs of the tarballs from the official <code>nixos.org</code> channels
(see <a href="command-ref/new-cli/../nix-channel.html">the manual page for <code>nix-channel</code></a>) can be
abbreviated as <code>channel:&lt;channel-name&gt;</code>. For instance, the
following two flags are equivalent:</p>
<pre><code>-I nixpkgs=channel:nixos-21.05
-I nixpkgs=https://nixos.org/channels/nixos-21.05/nixexprs.tar.xz
</code></pre>
<p>You can also fetch source trees using <a href="command-ref/new-cli/./nix3-flake.html#url-like-syntax">flake URLs</a> and add them to the
search path. For instance,</p>
<pre><code>-I nixpkgs=flake:nixpkgs
</code></pre>
<p>specifies that the prefix <code>nixpkgs</code> shall refer to the source tree
downloaded from the <code>nixpkgs</code> entry in the flake registry. Similarly,</p>
<pre><code>-I nixpkgs=flake:github:NixOS/nixpkgs/nixos-22.05
</code></pre>
<p>makes <code>&lt;nixpkgs&gt;</code> refer to a particular branch of the
<code>NixOS/nixpkgs</code> repository on GitHub.</p>
</li>
<li>
<p><code>--override-flake</code> <em>original-ref</em> <em>resolved-ref</em></p>
<p>Override the flake registries, redirecting <em>original-ref</em> to <em>resolved-ref</em>.</p>
</li>
</ul>
<p><strong>Common flake-related options:</strong></p>
<ul>
<li>
<p><code>--commit-lock-file</code></p>
<p>Commit changes to the flake's lock file.</p>
</li>
<li>
<p><code>--inputs-from</code> <em>flake-url</em></p>
<p>Use the inputs of the specified flake as registry entries.</p>
</li>
<li>
<p><code>--no-registries</code></p>
<p>Don't allow lookups in the flake registries. This option is deprecated; use <code>--no-use-registries</code>.</p>
</li>
<li>
<p><code>--no-update-lock-file</code></p>
<p>Do not allow any updates to the flake's lock file.</p>
</li>
<li>
<p><code>--no-write-lock-file</code></p>
<p>Do not write the flake's newly generated lock file.</p>
</li>
<li>
<p><code>--override-input</code> <em>input-path</em> <em>flake-url</em></p>
<p>Override a specific flake input (e.g. <code>dwarffs/nixpkgs</code>). This implies <code>--no-write-lock-file</code>.</p>
</li>
<li>
<p><code>--recreate-lock-file</code></p>
<p>Recreate the flake's lock file from scratch.</p>
</li>
<li>
<p><code>--update-input</code> <em>input-path</em></p>
<p>Update a specific flake input (ignoring its previous entry in the lock file).</p>
</li>
</ul>
<p><strong>Logging-related options:</strong></p>
<ul>
<li>
<p><code>--debug</code></p>
<p>Set the logging verbosity level to 'debug'.</p>
</li>
<li>
<p><code>--log-format</code> <em>format</em></p>
<p>Set the format of log output; one of <code>raw</code>, <code>internal-json</code>, <code>bar</code> or <code>bar-with-logs</code>.</p>
</li>
<li>
<p><code>--print-build-logs</code> / <code>-L</code></p>
<p>Print full build logs on standard error.</p>
</li>
<li>
<p><code>--quiet</code></p>
<p>Decrease the logging verbosity level.</p>
</li>
<li>
<p><code>--verbose</code> / <code>-v</code></p>
<p>Increase the logging verbosity level.</p>
</li>
</ul>
<p><strong>Miscellaneous global options:</strong></p>
<ul>
<li>
<p><code>--help</code></p>
<p>Show usage information.</p>
</li>
<li>
<p><code>--offline</code></p>
<p>Disable substituters and consider all previously downloaded files up-to-date.</p>
</li>
<li>
<p><code>--option</code> <em>name</em> <em>value</em></p>
<p>Set the Nix configuration setting <em>name</em> to <em>value</em> (overriding <code>nix.conf</code>).</p>
</li>
<li>
<p><code>--refresh</code></p>
<p>Consider all previously downloaded files out-of-date.</p>
</li>
<li>
<p><code>--version</code></p>
<p>Show version information.</p>
</li>
</ul>
<p><strong>Options that change the interpretation of installables:</strong></p>
<ul>
<li>
<p><code>--derivation</code></p>
<p>Operate on the <a href="command-ref/new-cli/../../glossary.html#gloss-store-derivation">store derivation</a> rather than its outputs.</p>
</li>
<li>
<p><code>--expr</code> <em>expr</em></p>
<p>Interpret installables as attribute paths relative to the Nix expression <em>expr</em>.</p>
</li>
<li>
<p><code>--file</code> / <code>-f</code> <em>file</em></p>
<p>Interpret installables as attribute paths relative to the Nix expression stored in <em>file</em>. If <em>file</em> is the character -, then a Nix expression will be read from standard input. Implies <code>--impure</code>.</p>
</li>
</ul>
<p><strong>Options to override configuration settings:</strong></p>
<ul>
<li>
<p><code>--accept-flake-config</code></p>
<p>Enable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--access-tokens</code> <em>value</em></p>
<p>Set the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--allow-dirty</code></p>
<p>Enable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--allow-import-from-derivation</code></p>
<p>Enable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--allow-new-privileges</code></p>
<p>Enable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--allow-symlinked-store</code></p>
<p>Enable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--allow-unsafe-native-code-during-evaluation</code></p>
<p>Enable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--allowed-impure-host-deps</code> <em>value</em></p>
<p>Set the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--allowed-uris</code> <em>value</em></p>
<p>Set the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--allowed-users</code> <em>value</em></p>
<p>Set the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--auto-allocate-uids</code></p>
<p>Enable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--auto-optimise-store</code></p>
<p>Enable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt</code> <em>value</em></p>
<p>Set the <code>bash-prompt</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-prefix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-prefix</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-suffix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-suffix</code> setting.</p>
</li>
<li>
<p><code>--build-hook</code> <em>value</em></p>
<p>Set the <code>build-hook</code> setting.</p>
</li>
<li>
<p><code>--build-poll-interval</code> <em>value</em></p>
<p>Set the <code>build-poll-interval</code> setting.</p>
</li>
<li>
<p><code>--build-users-group</code> <em>value</em></p>
<p>Set the <code>build-users-group</code> setting.</p>
</li>
<li>
<p><code>--builders</code> <em>value</em></p>
<p>Set the <code>builders</code> setting.</p>
</li>
<li>
<p><code>--builders-use-substitutes</code></p>
<p>Enable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--commit-lockfile-summary</code> <em>value</em></p>
<p>Set the <code>commit-lockfile-summary</code> setting.</p>
</li>
<li>
<p><code>--compress-build-log</code></p>
<p>Enable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--connect-timeout</code> <em>value</em></p>
<p>Set the <code>connect-timeout</code> setting.</p>
</li>
<li>
<p><code>--cores</code> <em>value</em></p>
<p>Set the <code>cores</code> setting.</p>
</li>
<li>
<p><code>--diff-hook</code> <em>value</em></p>
<p>Set the <code>diff-hook</code> setting.</p>
</li>
<li>
<p><code>--download-attempts</code> <em>value</em></p>
<p>Set the <code>download-attempts</code> setting.</p>
</li>
<li>
<p><code>--download-speed</code> <em>value</em></p>
<p>Set the <code>download-speed</code> setting.</p>
</li>
<li>
<p><code>--eval-cache</code></p>
<p>Enable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--experimental-features</code> <em>value</em></p>
<p>Set the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-access-tokens</code> <em>value</em></p>
<p>Append to the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-impure-host-deps</code> <em>value</em></p>
<p>Append to the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-uris</code> <em>value</em></p>
<p>Append to the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-users</code> <em>value</em></p>
<p>Append to the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--extra-experimental-features</code> <em>value</em></p>
<p>Append to the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-extra-platforms</code> <em>value</em></p>
<p>Append to the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-hashed-mirrors</code> <em>value</em></p>
<p>Append to the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--extra-ignored-acls</code> <em>value</em></p>
<p>Append to the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--extra-nix-path</code> <em>value</em></p>
<p>Append to the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--extra-platforms</code> <em>value</em></p>
<p>Set the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-plugin-files</code> <em>value</em></p>
<p>Append to the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--extra-sandbox-paths</code> <em>value</em></p>
<p>Append to the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--extra-secret-key-files</code> <em>value</em></p>
<p>Append to the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--extra-substituters</code> <em>value</em></p>
<p>Append to the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-system-features</code> <em>value</em></p>
<p>Append to the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-public-keys</code> <em>value</em></p>
<p>Append to the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-substituters</code> <em>value</em></p>
<p>Append to the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-users</code> <em>value</em></p>
<p>Append to the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--fallback</code></p>
<p>Enable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--filter-syscalls</code></p>
<p>Enable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--flake-registry</code> <em>value</em></p>
<p>Set the <code>flake-registry</code> setting.</p>
</li>
<li>
<p><code>--fsync-metadata</code></p>
<p>Enable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--gc-reserved-space</code> <em>value</em></p>
<p>Set the <code>gc-reserved-space</code> setting.</p>
</li>
<li>
<p><code>--hashed-mirrors</code> <em>value</em></p>
<p>Set the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--http-connections</code> <em>value</em></p>
<p>Set the <code>http-connections</code> setting.</p>
</li>
<li>
<p><code>--http2</code></p>
<p>Enable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--id-count</code> <em>value</em></p>
<p>Set the <code>id-count</code> setting.</p>
</li>
<li>
<p><code>--ignore-try</code></p>
<p>Enable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--ignored-acls</code> <em>value</em></p>
<p>Set the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--impersonate-linux-26</code></p>
<p>Enable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--keep-build-log</code></p>
<p>Enable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--keep-derivations</code></p>
<p>Enable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-env-derivations</code></p>
<p>Enable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-failed</code></p>
<p>Enable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--keep-going</code></p>
<p>Enable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--keep-outputs</code></p>
<p>Enable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--log-lines</code> <em>value</em></p>
<p>Set the <code>log-lines</code> setting.</p>
</li>
<li>
<p><code>--max-build-log-size</code> <em>value</em></p>
<p>Set the <code>max-build-log-size</code> setting.</p>
</li>
<li>
<p><code>--max-free</code> <em>value</em></p>
<p>Set the <code>max-free</code> setting.</p>
</li>
<li>
<p><code>--max-jobs</code> <em>value</em></p>
<p>Set the <code>max-jobs</code> setting.</p>
</li>
<li>
<p><code>--max-silent-time</code> <em>value</em></p>
<p>Set the <code>max-silent-time</code> setting.</p>
</li>
<li>
<p><code>--min-free</code> <em>value</em></p>
<p>Set the <code>min-free</code> setting.</p>
</li>
<li>
<p><code>--min-free-check-interval</code> <em>value</em></p>
<p>Set the <code>min-free-check-interval</code> setting.</p>
</li>
<li>
<p><code>--nar-buffer-size</code> <em>value</em></p>
<p>Set the <code>nar-buffer-size</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-negative-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-negative-ttl</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-positive-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-positive-ttl</code> setting.</p>
</li>
<li>
<p><code>--netrc-file</code> <em>value</em></p>
<p>Set the <code>netrc-file</code> setting.</p>
</li>
<li>
<p><code>--nix-path</code> <em>value</em></p>
<p>Set the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--no-accept-flake-config</code></p>
<p>Disable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--no-allow-dirty</code></p>
<p>Disable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--no-allow-import-from-derivation</code></p>
<p>Disable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--no-allow-new-privileges</code></p>
<p>Disable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--no-allow-symlinked-store</code></p>
<p>Disable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--no-allow-unsafe-native-code-during-evaluation</code></p>
<p>Disable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--no-auto-allocate-uids</code></p>
<p>Disable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--no-auto-optimise-store</code></p>
<p>Disable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--no-builders-use-substitutes</code></p>
<p>Disable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--no-compress-build-log</code></p>
<p>Disable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-eval-cache</code></p>
<p>Disable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--no-fallback</code></p>
<p>Disable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--no-filter-syscalls</code></p>
<p>Disable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--no-fsync-metadata</code></p>
<p>Disable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--no-http2</code></p>
<p>Disable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--no-ignore-try</code></p>
<p>Disable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--no-impersonate-linux-26</code></p>
<p>Disable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--no-keep-build-log</code></p>
<p>Disable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-keep-derivations</code></p>
<p>Disable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-env-derivations</code></p>
<p>Disable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-failed</code></p>
<p>Disable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--no-keep-going</code></p>
<p>Disable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--no-keep-outputs</code></p>
<p>Disable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--no-preallocate-contents</code></p>
<p>Disable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--no-print-missing</code></p>
<p>Disable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--no-pure-eval</code></p>
<p>Disable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--no-require-sigs</code></p>
<p>Disable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--no-restrict-eval</code></p>
<p>Disable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--no-run-diff-hook</code></p>
<p>Disable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--no-sandbox</code></p>
<p>Disable sandboxing.</p>
</li>
<li>
<p><code>--no-sandbox-fallback</code></p>
<p>Disable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--no-show-trace</code></p>
<p>Disable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--no-substitute</code></p>
<p>Disable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--no-sync-before-registering</code></p>
<p>Disable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--no-trace-function-calls</code></p>
<p>Disable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--no-trace-verbose</code></p>
<p>Disable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--no-use-case-hack</code></p>
<p>Disable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--no-use-cgroups</code></p>
<p>Disable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--no-use-registries</code></p>
<p>Disable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--no-use-sqlite-wal</code></p>
<p>Disable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--no-warn-dirty</code></p>
<p>Disable the <code>warn-dirty</code> setting.</p>
</li>
<li>
<p><code>--plugin-files</code> <em>value</em></p>
<p>Set the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--post-build-hook</code> <em>value</em></p>
<p>Set the <code>post-build-hook</code> setting.</p>
</li>
<li>
<p><code>--pre-build-hook</code> <em>value</em></p>
<p>Set the <code>pre-build-hook</code> setting.</p>
</li>
<li>
<p><code>--preallocate-contents</code></p>
<p>Enable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--print-missing</code></p>
<p>Enable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--pure-eval</code></p>
<p>Enable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--relaxed-sandbox</code></p>
<p>Enable sandboxing, but allow builds to disable it.</p>
</li>
<li>
<p><code>--require-sigs</code></p>
<p>Enable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--restrict-eval</code></p>
<p>Enable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--run-diff-hook</code></p>
<p>Enable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--sandbox</code></p>
<p>Enable sandboxing.</p>
</li>
<li>
<p><code>--sandbox-build-dir</code> <em>value</em></p>
<p>Set the <code>sandbox-build-dir</code> setting.</p>
</li>
<li>
<p><code>--sandbox-dev-shm-size</code> <em>value</em></p>
<p>Set the <code>sandbox-dev-shm-size</code> setting.</p>
</li>
<li>
<p><code>--sandbox-fallback</code></p>
<p>Enable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--sandbox-paths</code> <em>value</em></p>
<p>Set the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--secret-key-files</code> <em>value</em></p>
<p>Set the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--show-trace</code></p>
<p>Enable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--stalled-download-timeout</code> <em>value</em></p>
<p>Set the <code>stalled-download-timeout</code> setting.</p>
</li>
<li>
<p><code>--start-id</code> <em>value</em></p>
<p>Set the <code>start-id</code> setting.</p>
</li>
<li>
<p><code>--store</code> <em>value</em></p>
<p>Set the <code>store</code> setting.</p>
</li>
<li>
<p><code>--substitute</code></p>
<p>Enable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--substituters</code> <em>value</em></p>
<p>Set the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--sync-before-registering</code></p>
<p>Enable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--system</code> <em>value</em></p>
<p>Set the <code>system</code> setting.</p>
</li>
<li>
<p><code>--system-features</code> <em>value</em></p>
<p>Set the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--tarball-ttl</code> <em>value</em></p>
<p>Set the <code>tarball-ttl</code> setting.</p>
</li>
<li>
<p><code>--timeout</code> <em>value</em></p>
<p>Set the <code>timeout</code> setting.</p>
</li>
<li>
<p><code>--trace-function-calls</code></p>
<p>Enable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--trace-verbose</code></p>
<p>Enable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--trusted-public-keys</code> <em>value</em></p>
<p>Set the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--trusted-substituters</code> <em>value</em></p>
<p>Set the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--trusted-users</code> <em>value</em></p>
<p>Set the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--use-case-hack</code></p>
<p>Enable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--use-cgroups</code></p>
<p>Enable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--use-registries</code></p>
<p>Enable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--use-sqlite-wal</code></p>
<p>Enable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--user-agent-suffix</code> <em>value</em></p>
<p>Set the <code>user-agent-suffix</code> setting.</p>
</li>
<li>
<p><code>--warn-dirty</code></p>
<p>Enable the <code>warn-dirty</code> setting.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p><strong>Warning</strong> <br />
This program is <strong>experimental</strong> and its interface is subject to change.</p>
</blockquote>
<h1 id="name-69"><a class="header" href="#name-69">Name</a></h1>
<p><code>nix run</code> - run a Nix application</p>
<h1 id="synopsis-100"><a class="header" href="#synopsis-100">Synopsis</a></h1>
<p><code>nix run</code> [<em>option</em>...] <em>installable</em> <em>args</em>...</p>
<h1 id="examples-67"><a class="header" href="#examples-67">Examples</a></h1>
<ul>
<li>
<p>Run the default app from the <code>blender-bin</code> flake:</p>
<pre><code class="language-console"># nix run blender-bin
</code></pre>
</li>
<li>
<p>Run a non-default app from the <code>blender-bin</code> flake:</p>
<pre><code class="language-console"># nix run blender-bin#blender_2_83
</code></pre>
<p>Tip: you can find apps provided by this flake by running <code>nix flake show blender-bin</code>.</p>
</li>
<li>
<p>Run <code>vim</code> from the <code>nixpkgs</code> flake:</p>
<pre><code class="language-console"># nix run nixpkgs#vim
</code></pre>
<p>Note that <code>vim</code> (as of the time of writing of this page) is not an
app but a package. Thus, Nix runs the eponymous file from the <code>vim</code>
package.</p>
</li>
<li>
<p>Run <code>vim</code> with arguments:</p>
<pre><code class="language-console"># nix run nixpkgs#vim -- --help
</code></pre>
</li>
</ul>
<h1 id="description-88"><a class="header" href="#description-88">Description</a></h1>
<p><code>nix run</code> builds and runs <em>installable</em>, which must evaluate to an
<em>app</em> or a regular Nix derivation.</p>
<p>If <em>installable</em> evaluates to an <em>app</em> (see below), it executes the
program specified by the app definition.</p>
<p>If <em>installable</em> evaluates to a derivation, it will try to execute the
program <code>&lt;out&gt;/bin/&lt;name&gt;</code>, where <em>out</em> is the primary output store
path of the derivation, and <em>name</em> is the first of the following that
exists:</p>
<ul>
<li>The <code>meta.mainProgram</code> attribute of the derivation.</li>
<li>The <code>pname</code> attribute of the derivation.</li>
<li>The name part of the value of the <code>name</code> attribute of the derivation.</li>
</ul>
<p>For instance, if <code>name</code> is set to <code>hello-1.10</code>, <code>nix run</code> will run
<code>$out/bin/hello</code>.</p>
<h1 id="flake-output-attributes-2"><a class="header" href="#flake-output-attributes-2">Flake output attributes</a></h1>
<p>If no flake output attribute is given, <code>nix run</code> tries the following
flake output attributes:</p>
<ul>
<li>
<p><code>apps.&lt;system&gt;.default</code></p>
</li>
<li>
<p><code>packages.&lt;system&gt;.default</code></p>
</li>
</ul>
<p>If an attribute <em>name</em> is given, <code>nix run</code> tries the following flake
output attributes:</p>
<ul>
<li>
<p><code>apps.&lt;system&gt;.&lt;name&gt;</code></p>
</li>
<li>
<p><code>packages.&lt;system&gt;.&lt;name&gt;</code></p>
</li>
<li>
<p><code>legacyPackages.&lt;system&gt;.&lt;name&gt;</code></p>
</li>
</ul>
<h1 id="apps"><a class="header" href="#apps">Apps</a></h1>
<p>An app is specified by a flake output attribute named
<code>apps.&lt;system&gt;.&lt;name&gt;</code>. It looks like this:</p>
<pre><code class="language-nix">apps.x86_64-linux.blender_2_79 = {
  type = &quot;app&quot;;
  program = &quot;${self.packages.x86_64-linux.blender_2_79}/bin/blender&quot;;
};
</code></pre>
<p>The only supported attributes are:</p>
<ul>
<li>
<p><code>type</code> (required): Must be set to <code>app</code>.</p>
</li>
<li>
<p><code>program</code> (required): The full path of the executable to run. It
must reside in the Nix store.</p>
</li>
</ul>
<h1 id="options-50"><a class="header" href="#options-50">Options</a></h1>
<p><strong>Common evaluation options:</strong></p>
<ul>
<li>
<p><code>--arg</code> <em>name</em> <em>expr</em></p>
<p>Pass the value <em>expr</em> as the argument <em>name</em> to Nix functions.</p>
</li>
<li>
<p><code>--argstr</code> <em>name</em> <em>string</em></p>
<p>Pass the string <em>string</em> as the argument <em>name</em> to Nix functions.</p>
</li>
<li>
<p><code>--debugger</code></p>
<p>Start an interactive environment if evaluation fails.</p>
</li>
<li>
<p><code>--eval-store</code> <em>store-url</em></p>
<p>The Nix store to use for evaluations.</p>
</li>
<li>
<p><code>--impure</code></p>
<p>Allow access to mutable paths and repositories.</p>
</li>
<li>
<p><code>--include</code> / <code>-I</code> <em>path</em></p>
<p>Add <em>path</em> to the Nix search path. The Nix search path is
initialized from the colon-separated <a href="command-ref/new-cli/../../command-ref/env-common.html#env-NIX_PATH"><code>NIX_PATH</code></a> environment
variable, and is used to look up the location of Nix expressions using <a href="command-ref/new-cli/../../language/values.html#type-path">paths</a> enclosed in angle
brackets (i.e., <code>&lt;nixpkgs&gt;</code>).</p>
<p>For instance, passing</p>
<pre><code>-I /home/eelco/Dev
-I /etc/nixos
</code></pre>
<p>will cause Nix to look for paths relative to <code>/home/eelco/Dev</code> and
<code>/etc/nixos</code>, in that order. This is equivalent to setting the
<code>NIX_PATH</code> environment variable to</p>
<pre><code>/home/eelco/Dev:/etc/nixos
</code></pre>
<p>It is also possible to match paths against a prefix. For example,
passing</p>
<pre><code>-I nixpkgs=/home/eelco/Dev/nixpkgs-branch
-I /etc/nixos
</code></pre>
<p>will cause Nix to search for <code>&lt;nixpkgs/path&gt;</code> in
<code>/home/eelco/Dev/nixpkgs-branch/path</code> and <code>/etc/nixos/nixpkgs/path</code>.</p>
<p>If a path in the Nix search path starts with <code>http://</code> or <code>https://</code>,
it is interpreted as the URL of a tarball that will be downloaded and
unpacked to a temporary location. The tarball must consist of a single
top-level directory. For example, passing</p>
<pre><code>-I nixpkgs=https://github.com/NixOS/nixpkgs/archive/master.tar.gz
</code></pre>
<p>tells Nix to download and use the current contents of the <code>master</code>
branch in the <code>nixpkgs</code> repository.</p>
<p>The URLs of the tarballs from the official <code>nixos.org</code> channels
(see <a href="command-ref/new-cli/../nix-channel.html">the manual page for <code>nix-channel</code></a>) can be
abbreviated as <code>channel:&lt;channel-name&gt;</code>. For instance, the
following two flags are equivalent:</p>
<pre><code>-I nixpkgs=channel:nixos-21.05
-I nixpkgs=https://nixos.org/channels/nixos-21.05/nixexprs.tar.xz
</code></pre>
<p>You can also fetch source trees using <a href="command-ref/new-cli/./nix3-flake.html#url-like-syntax">flake URLs</a> and add them to the
search path. For instance,</p>
<pre><code>-I nixpkgs=flake:nixpkgs
</code></pre>
<p>specifies that the prefix <code>nixpkgs</code> shall refer to the source tree
downloaded from the <code>nixpkgs</code> entry in the flake registry. Similarly,</p>
<pre><code>-I nixpkgs=flake:github:NixOS/nixpkgs/nixos-22.05
</code></pre>
<p>makes <code>&lt;nixpkgs&gt;</code> refer to a particular branch of the
<code>NixOS/nixpkgs</code> repository on GitHub.</p>
</li>
<li>
<p><code>--override-flake</code> <em>original-ref</em> <em>resolved-ref</em></p>
<p>Override the flake registries, redirecting <em>original-ref</em> to <em>resolved-ref</em>.</p>
</li>
</ul>
<p><strong>Common flake-related options:</strong></p>
<ul>
<li>
<p><code>--commit-lock-file</code></p>
<p>Commit changes to the flake's lock file.</p>
</li>
<li>
<p><code>--inputs-from</code> <em>flake-url</em></p>
<p>Use the inputs of the specified flake as registry entries.</p>
</li>
<li>
<p><code>--no-registries</code></p>
<p>Don't allow lookups in the flake registries. This option is deprecated; use <code>--no-use-registries</code>.</p>
</li>
<li>
<p><code>--no-update-lock-file</code></p>
<p>Do not allow any updates to the flake's lock file.</p>
</li>
<li>
<p><code>--no-write-lock-file</code></p>
<p>Do not write the flake's newly generated lock file.</p>
</li>
<li>
<p><code>--override-input</code> <em>input-path</em> <em>flake-url</em></p>
<p>Override a specific flake input (e.g. <code>dwarffs/nixpkgs</code>). This implies <code>--no-write-lock-file</code>.</p>
</li>
<li>
<p><code>--recreate-lock-file</code></p>
<p>Recreate the flake's lock file from scratch.</p>
</li>
<li>
<p><code>--update-input</code> <em>input-path</em></p>
<p>Update a specific flake input (ignoring its previous entry in the lock file).</p>
</li>
</ul>
<p><strong>Logging-related options:</strong></p>
<ul>
<li>
<p><code>--debug</code></p>
<p>Set the logging verbosity level to 'debug'.</p>
</li>
<li>
<p><code>--log-format</code> <em>format</em></p>
<p>Set the format of log output; one of <code>raw</code>, <code>internal-json</code>, <code>bar</code> or <code>bar-with-logs</code>.</p>
</li>
<li>
<p><code>--print-build-logs</code> / <code>-L</code></p>
<p>Print full build logs on standard error.</p>
</li>
<li>
<p><code>--quiet</code></p>
<p>Decrease the logging verbosity level.</p>
</li>
<li>
<p><code>--verbose</code> / <code>-v</code></p>
<p>Increase the logging verbosity level.</p>
</li>
</ul>
<p><strong>Miscellaneous global options:</strong></p>
<ul>
<li>
<p><code>--help</code></p>
<p>Show usage information.</p>
</li>
<li>
<p><code>--offline</code></p>
<p>Disable substituters and consider all previously downloaded files up-to-date.</p>
</li>
<li>
<p><code>--option</code> <em>name</em> <em>value</em></p>
<p>Set the Nix configuration setting <em>name</em> to <em>value</em> (overriding <code>nix.conf</code>).</p>
</li>
<li>
<p><code>--refresh</code></p>
<p>Consider all previously downloaded files out-of-date.</p>
</li>
<li>
<p><code>--version</code></p>
<p>Show version information.</p>
</li>
</ul>
<p><strong>Options that change the interpretation of installables:</strong></p>
<ul>
<li>
<p><code>--derivation</code></p>
<p>Operate on the <a href="command-ref/new-cli/../../glossary.html#gloss-store-derivation">store derivation</a> rather than its outputs.</p>
</li>
<li>
<p><code>--expr</code> <em>expr</em></p>
<p>Interpret installables as attribute paths relative to the Nix expression <em>expr</em>.</p>
</li>
<li>
<p><code>--file</code> / <code>-f</code> <em>file</em></p>
<p>Interpret installables as attribute paths relative to the Nix expression stored in <em>file</em>. If <em>file</em> is the character -, then a Nix expression will be read from standard input. Implies <code>--impure</code>.</p>
</li>
</ul>
<p><strong>Options to override configuration settings:</strong></p>
<ul>
<li>
<p><code>--accept-flake-config</code></p>
<p>Enable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--access-tokens</code> <em>value</em></p>
<p>Set the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--allow-dirty</code></p>
<p>Enable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--allow-import-from-derivation</code></p>
<p>Enable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--allow-new-privileges</code></p>
<p>Enable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--allow-symlinked-store</code></p>
<p>Enable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--allow-unsafe-native-code-during-evaluation</code></p>
<p>Enable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--allowed-impure-host-deps</code> <em>value</em></p>
<p>Set the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--allowed-uris</code> <em>value</em></p>
<p>Set the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--allowed-users</code> <em>value</em></p>
<p>Set the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--auto-allocate-uids</code></p>
<p>Enable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--auto-optimise-store</code></p>
<p>Enable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt</code> <em>value</em></p>
<p>Set the <code>bash-prompt</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-prefix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-prefix</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-suffix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-suffix</code> setting.</p>
</li>
<li>
<p><code>--build-hook</code> <em>value</em></p>
<p>Set the <code>build-hook</code> setting.</p>
</li>
<li>
<p><code>--build-poll-interval</code> <em>value</em></p>
<p>Set the <code>build-poll-interval</code> setting.</p>
</li>
<li>
<p><code>--build-users-group</code> <em>value</em></p>
<p>Set the <code>build-users-group</code> setting.</p>
</li>
<li>
<p><code>--builders</code> <em>value</em></p>
<p>Set the <code>builders</code> setting.</p>
</li>
<li>
<p><code>--builders-use-substitutes</code></p>
<p>Enable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--commit-lockfile-summary</code> <em>value</em></p>
<p>Set the <code>commit-lockfile-summary</code> setting.</p>
</li>
<li>
<p><code>--compress-build-log</code></p>
<p>Enable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--connect-timeout</code> <em>value</em></p>
<p>Set the <code>connect-timeout</code> setting.</p>
</li>
<li>
<p><code>--cores</code> <em>value</em></p>
<p>Set the <code>cores</code> setting.</p>
</li>
<li>
<p><code>--diff-hook</code> <em>value</em></p>
<p>Set the <code>diff-hook</code> setting.</p>
</li>
<li>
<p><code>--download-attempts</code> <em>value</em></p>
<p>Set the <code>download-attempts</code> setting.</p>
</li>
<li>
<p><code>--download-speed</code> <em>value</em></p>
<p>Set the <code>download-speed</code> setting.</p>
</li>
<li>
<p><code>--eval-cache</code></p>
<p>Enable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--experimental-features</code> <em>value</em></p>
<p>Set the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-access-tokens</code> <em>value</em></p>
<p>Append to the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-impure-host-deps</code> <em>value</em></p>
<p>Append to the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-uris</code> <em>value</em></p>
<p>Append to the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-users</code> <em>value</em></p>
<p>Append to the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--extra-experimental-features</code> <em>value</em></p>
<p>Append to the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-extra-platforms</code> <em>value</em></p>
<p>Append to the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-hashed-mirrors</code> <em>value</em></p>
<p>Append to the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--extra-ignored-acls</code> <em>value</em></p>
<p>Append to the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--extra-nix-path</code> <em>value</em></p>
<p>Append to the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--extra-platforms</code> <em>value</em></p>
<p>Set the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-plugin-files</code> <em>value</em></p>
<p>Append to the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--extra-sandbox-paths</code> <em>value</em></p>
<p>Append to the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--extra-secret-key-files</code> <em>value</em></p>
<p>Append to the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--extra-substituters</code> <em>value</em></p>
<p>Append to the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-system-features</code> <em>value</em></p>
<p>Append to the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-public-keys</code> <em>value</em></p>
<p>Append to the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-substituters</code> <em>value</em></p>
<p>Append to the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-users</code> <em>value</em></p>
<p>Append to the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--fallback</code></p>
<p>Enable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--filter-syscalls</code></p>
<p>Enable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--flake-registry</code> <em>value</em></p>
<p>Set the <code>flake-registry</code> setting.</p>
</li>
<li>
<p><code>--fsync-metadata</code></p>
<p>Enable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--gc-reserved-space</code> <em>value</em></p>
<p>Set the <code>gc-reserved-space</code> setting.</p>
</li>
<li>
<p><code>--hashed-mirrors</code> <em>value</em></p>
<p>Set the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--http-connections</code> <em>value</em></p>
<p>Set the <code>http-connections</code> setting.</p>
</li>
<li>
<p><code>--http2</code></p>
<p>Enable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--id-count</code> <em>value</em></p>
<p>Set the <code>id-count</code> setting.</p>
</li>
<li>
<p><code>--ignore-try</code></p>
<p>Enable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--ignored-acls</code> <em>value</em></p>
<p>Set the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--impersonate-linux-26</code></p>
<p>Enable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--keep-build-log</code></p>
<p>Enable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--keep-derivations</code></p>
<p>Enable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-env-derivations</code></p>
<p>Enable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-failed</code></p>
<p>Enable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--keep-going</code></p>
<p>Enable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--keep-outputs</code></p>
<p>Enable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--log-lines</code> <em>value</em></p>
<p>Set the <code>log-lines</code> setting.</p>
</li>
<li>
<p><code>--max-build-log-size</code> <em>value</em></p>
<p>Set the <code>max-build-log-size</code> setting.</p>
</li>
<li>
<p><code>--max-free</code> <em>value</em></p>
<p>Set the <code>max-free</code> setting.</p>
</li>
<li>
<p><code>--max-jobs</code> <em>value</em></p>
<p>Set the <code>max-jobs</code> setting.</p>
</li>
<li>
<p><code>--max-silent-time</code> <em>value</em></p>
<p>Set the <code>max-silent-time</code> setting.</p>
</li>
<li>
<p><code>--min-free</code> <em>value</em></p>
<p>Set the <code>min-free</code> setting.</p>
</li>
<li>
<p><code>--min-free-check-interval</code> <em>value</em></p>
<p>Set the <code>min-free-check-interval</code> setting.</p>
</li>
<li>
<p><code>--nar-buffer-size</code> <em>value</em></p>
<p>Set the <code>nar-buffer-size</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-negative-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-negative-ttl</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-positive-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-positive-ttl</code> setting.</p>
</li>
<li>
<p><code>--netrc-file</code> <em>value</em></p>
<p>Set the <code>netrc-file</code> setting.</p>
</li>
<li>
<p><code>--nix-path</code> <em>value</em></p>
<p>Set the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--no-accept-flake-config</code></p>
<p>Disable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--no-allow-dirty</code></p>
<p>Disable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--no-allow-import-from-derivation</code></p>
<p>Disable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--no-allow-new-privileges</code></p>
<p>Disable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--no-allow-symlinked-store</code></p>
<p>Disable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--no-allow-unsafe-native-code-during-evaluation</code></p>
<p>Disable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--no-auto-allocate-uids</code></p>
<p>Disable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--no-auto-optimise-store</code></p>
<p>Disable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--no-builders-use-substitutes</code></p>
<p>Disable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--no-compress-build-log</code></p>
<p>Disable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-eval-cache</code></p>
<p>Disable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--no-fallback</code></p>
<p>Disable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--no-filter-syscalls</code></p>
<p>Disable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--no-fsync-metadata</code></p>
<p>Disable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--no-http2</code></p>
<p>Disable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--no-ignore-try</code></p>
<p>Disable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--no-impersonate-linux-26</code></p>
<p>Disable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--no-keep-build-log</code></p>
<p>Disable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-keep-derivations</code></p>
<p>Disable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-env-derivations</code></p>
<p>Disable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-failed</code></p>
<p>Disable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--no-keep-going</code></p>
<p>Disable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--no-keep-outputs</code></p>
<p>Disable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--no-preallocate-contents</code></p>
<p>Disable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--no-print-missing</code></p>
<p>Disable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--no-pure-eval</code></p>
<p>Disable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--no-require-sigs</code></p>
<p>Disable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--no-restrict-eval</code></p>
<p>Disable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--no-run-diff-hook</code></p>
<p>Disable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--no-sandbox</code></p>
<p>Disable sandboxing.</p>
</li>
<li>
<p><code>--no-sandbox-fallback</code></p>
<p>Disable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--no-show-trace</code></p>
<p>Disable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--no-substitute</code></p>
<p>Disable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--no-sync-before-registering</code></p>
<p>Disable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--no-trace-function-calls</code></p>
<p>Disable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--no-trace-verbose</code></p>
<p>Disable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--no-use-case-hack</code></p>
<p>Disable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--no-use-cgroups</code></p>
<p>Disable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--no-use-registries</code></p>
<p>Disable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--no-use-sqlite-wal</code></p>
<p>Disable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--no-warn-dirty</code></p>
<p>Disable the <code>warn-dirty</code> setting.</p>
</li>
<li>
<p><code>--plugin-files</code> <em>value</em></p>
<p>Set the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--post-build-hook</code> <em>value</em></p>
<p>Set the <code>post-build-hook</code> setting.</p>
</li>
<li>
<p><code>--pre-build-hook</code> <em>value</em></p>
<p>Set the <code>pre-build-hook</code> setting.</p>
</li>
<li>
<p><code>--preallocate-contents</code></p>
<p>Enable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--print-missing</code></p>
<p>Enable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--pure-eval</code></p>
<p>Enable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--relaxed-sandbox</code></p>
<p>Enable sandboxing, but allow builds to disable it.</p>
</li>
<li>
<p><code>--require-sigs</code></p>
<p>Enable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--restrict-eval</code></p>
<p>Enable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--run-diff-hook</code></p>
<p>Enable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--sandbox</code></p>
<p>Enable sandboxing.</p>
</li>
<li>
<p><code>--sandbox-build-dir</code> <em>value</em></p>
<p>Set the <code>sandbox-build-dir</code> setting.</p>
</li>
<li>
<p><code>--sandbox-dev-shm-size</code> <em>value</em></p>
<p>Set the <code>sandbox-dev-shm-size</code> setting.</p>
</li>
<li>
<p><code>--sandbox-fallback</code></p>
<p>Enable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--sandbox-paths</code> <em>value</em></p>
<p>Set the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--secret-key-files</code> <em>value</em></p>
<p>Set the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--show-trace</code></p>
<p>Enable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--stalled-download-timeout</code> <em>value</em></p>
<p>Set the <code>stalled-download-timeout</code> setting.</p>
</li>
<li>
<p><code>--start-id</code> <em>value</em></p>
<p>Set the <code>start-id</code> setting.</p>
</li>
<li>
<p><code>--store</code> <em>value</em></p>
<p>Set the <code>store</code> setting.</p>
</li>
<li>
<p><code>--substitute</code></p>
<p>Enable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--substituters</code> <em>value</em></p>
<p>Set the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--sync-before-registering</code></p>
<p>Enable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--system</code> <em>value</em></p>
<p>Set the <code>system</code> setting.</p>
</li>
<li>
<p><code>--system-features</code> <em>value</em></p>
<p>Set the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--tarball-ttl</code> <em>value</em></p>
<p>Set the <code>tarball-ttl</code> setting.</p>
</li>
<li>
<p><code>--timeout</code> <em>value</em></p>
<p>Set the <code>timeout</code> setting.</p>
</li>
<li>
<p><code>--trace-function-calls</code></p>
<p>Enable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--trace-verbose</code></p>
<p>Enable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--trusted-public-keys</code> <em>value</em></p>
<p>Set the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--trusted-substituters</code> <em>value</em></p>
<p>Set the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--trusted-users</code> <em>value</em></p>
<p>Set the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--use-case-hack</code></p>
<p>Enable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--use-cgroups</code></p>
<p>Enable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--use-registries</code></p>
<p>Enable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--use-sqlite-wal</code></p>
<p>Enable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--user-agent-suffix</code> <em>value</em></p>
<p>Set the <code>user-agent-suffix</code> setting.</p>
</li>
<li>
<p><code>--warn-dirty</code></p>
<p>Enable the <code>warn-dirty</code> setting.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p><strong>Warning</strong> <br />
This program is <strong>experimental</strong> and its interface is subject to change.</p>
</blockquote>
<h1 id="name-70"><a class="header" href="#name-70">Name</a></h1>
<p><code>nix search</code> - search for packages</p>
<h1 id="synopsis-101"><a class="header" href="#synopsis-101">Synopsis</a></h1>
<p><code>nix search</code> [<em>option</em>...] <em>installable</em> <em>regex</em>...</p>
<h1 id="examples-68"><a class="header" href="#examples-68">Examples</a></h1>
<ul>
<li>
<p>Show all packages in the <code>nixpkgs</code> flake:</p>
<pre><code class="language-console"># nix search nixpkgs
* legacyPackages.x86_64-linux.AMB-plugins (0.8.1)
  A set of ambisonics ladspa plugins

* legacyPackages.x86_64-linux.ArchiSteamFarm (4.3.1.0)
  Application with primary purpose of idling Steam cards from multiple accounts simultaneously
…
</code></pre>
</li>
<li>
<p>Show packages in the <code>nixpkgs</code> flake containing <code>blender</code> in its
name or description:</p>
<pre><code class="language-console"># nix search nixpkgs blender
* legacyPackages.x86_64-linux.blender (2.91.0)
  3D Creation/Animation/Publishing System
</code></pre>
</li>
<li>
<p>Search for packages underneath the attribute <code>gnome3</code> in Nixpkgs:</p>
<pre><code class="language-console"># nix search nixpkgs#gnome3 vala
* legacyPackages.x86_64-linux.gnome3.vala (0.48.9)
  Compiler for GObject type system
</code></pre>
</li>
<li>
<p>Show all packages in the flake in the current directory:</p>
<pre><code class="language-console"># nix search
</code></pre>
</li>
<li>
<p>Search for Firefox or Chromium:</p>
<pre><code class="language-console"># nix search nixpkgs 'firefox|chromium'
</code></pre>
</li>
<li>
<p>Search for packages containing <code>git</code> and either <code>frontend</code> or <code>gui</code>:</p>
<pre><code class="language-console"># nix search nixpkgs git 'frontend|gui'
</code></pre>
</li>
<li>
<p>Search for packages containing <code>neovim</code> but hide ones containing either <code>gui</code> or <code>python</code>:</p>
<pre><code class="language-console"># nix search nixpkgs neovim -e 'python|gui'
</code></pre>
<p>or</p>
<pre><code class="language-console"># nix search nixpkgs neovim -e 'python' -e 'gui'
</code></pre>
</li>
</ul>
<h1 id="description-89"><a class="header" href="#description-89">Description</a></h1>
<p><code>nix search</code> searches <em>installable</em> (which must be evaluatable, e.g. a
flake) for packages whose name or description matches all of the
regular expressions <em>regex</em>.  For each matching package, It prints the
full attribute name (from the root of the installable), the version
and the <code>meta.description</code> field, highlighting the substrings that
were matched by the regular expressions. If no regular expressions are
specified, all packages are shown.</p>
<h1 id="flake-output-attributes-3"><a class="header" href="#flake-output-attributes-3">Flake output attributes</a></h1>
<p>If no flake output attribute is given, <code>nix search</code> searches for
packages:</p>
<ul>
<li>
<p>Directly underneath <code>packages.&lt;system&gt;</code>.</p>
</li>
<li>
<p>Underneath <code>legacyPackages.&lt;system&gt;</code>, recursing into attribute sets
that contain an attribute <code>recurseForDerivations = true</code>.</p>
</li>
</ul>
<h1 id="options-51"><a class="header" href="#options-51">Options</a></h1>
<ul>
<li>
<p><code>--exclude</code> / <code>-e</code> <em>regex</em></p>
<p>Hide packages whose attribute path, name or description contain <em>regex</em>.</p>
</li>
<li>
<p><code>--json</code></p>
<p>Produce output in JSON format, suitable for consumption by another program.</p>
</li>
</ul>
<p><strong>Common evaluation options:</strong></p>
<ul>
<li>
<p><code>--arg</code> <em>name</em> <em>expr</em></p>
<p>Pass the value <em>expr</em> as the argument <em>name</em> to Nix functions.</p>
</li>
<li>
<p><code>--argstr</code> <em>name</em> <em>string</em></p>
<p>Pass the string <em>string</em> as the argument <em>name</em> to Nix functions.</p>
</li>
<li>
<p><code>--debugger</code></p>
<p>Start an interactive environment if evaluation fails.</p>
</li>
<li>
<p><code>--eval-store</code> <em>store-url</em></p>
<p>The Nix store to use for evaluations.</p>
</li>
<li>
<p><code>--impure</code></p>
<p>Allow access to mutable paths and repositories.</p>
</li>
<li>
<p><code>--include</code> / <code>-I</code> <em>path</em></p>
<p>Add <em>path</em> to the Nix search path. The Nix search path is
initialized from the colon-separated <a href="command-ref/new-cli/../../command-ref/env-common.html#env-NIX_PATH"><code>NIX_PATH</code></a> environment
variable, and is used to look up the location of Nix expressions using <a href="command-ref/new-cli/../../language/values.html#type-path">paths</a> enclosed in angle
brackets (i.e., <code>&lt;nixpkgs&gt;</code>).</p>
<p>For instance, passing</p>
<pre><code>-I /home/eelco/Dev
-I /etc/nixos
</code></pre>
<p>will cause Nix to look for paths relative to <code>/home/eelco/Dev</code> and
<code>/etc/nixos</code>, in that order. This is equivalent to setting the
<code>NIX_PATH</code> environment variable to</p>
<pre><code>/home/eelco/Dev:/etc/nixos
</code></pre>
<p>It is also possible to match paths against a prefix. For example,
passing</p>
<pre><code>-I nixpkgs=/home/eelco/Dev/nixpkgs-branch
-I /etc/nixos
</code></pre>
<p>will cause Nix to search for <code>&lt;nixpkgs/path&gt;</code> in
<code>/home/eelco/Dev/nixpkgs-branch/path</code> and <code>/etc/nixos/nixpkgs/path</code>.</p>
<p>If a path in the Nix search path starts with <code>http://</code> or <code>https://</code>,
it is interpreted as the URL of a tarball that will be downloaded and
unpacked to a temporary location. The tarball must consist of a single
top-level directory. For example, passing</p>
<pre><code>-I nixpkgs=https://github.com/NixOS/nixpkgs/archive/master.tar.gz
</code></pre>
<p>tells Nix to download and use the current contents of the <code>master</code>
branch in the <code>nixpkgs</code> repository.</p>
<p>The URLs of the tarballs from the official <code>nixos.org</code> channels
(see <a href="command-ref/new-cli/../nix-channel.html">the manual page for <code>nix-channel</code></a>) can be
abbreviated as <code>channel:&lt;channel-name&gt;</code>. For instance, the
following two flags are equivalent:</p>
<pre><code>-I nixpkgs=channel:nixos-21.05
-I nixpkgs=https://nixos.org/channels/nixos-21.05/nixexprs.tar.xz
</code></pre>
<p>You can also fetch source trees using <a href="command-ref/new-cli/./nix3-flake.html#url-like-syntax">flake URLs</a> and add them to the
search path. For instance,</p>
<pre><code>-I nixpkgs=flake:nixpkgs
</code></pre>
<p>specifies that the prefix <code>nixpkgs</code> shall refer to the source tree
downloaded from the <code>nixpkgs</code> entry in the flake registry. Similarly,</p>
<pre><code>-I nixpkgs=flake:github:NixOS/nixpkgs/nixos-22.05
</code></pre>
<p>makes <code>&lt;nixpkgs&gt;</code> refer to a particular branch of the
<code>NixOS/nixpkgs</code> repository on GitHub.</p>
</li>
<li>
<p><code>--override-flake</code> <em>original-ref</em> <em>resolved-ref</em></p>
<p>Override the flake registries, redirecting <em>original-ref</em> to <em>resolved-ref</em>.</p>
</li>
</ul>
<p><strong>Common flake-related options:</strong></p>
<ul>
<li>
<p><code>--commit-lock-file</code></p>
<p>Commit changes to the flake's lock file.</p>
</li>
<li>
<p><code>--inputs-from</code> <em>flake-url</em></p>
<p>Use the inputs of the specified flake as registry entries.</p>
</li>
<li>
<p><code>--no-registries</code></p>
<p>Don't allow lookups in the flake registries. This option is deprecated; use <code>--no-use-registries</code>.</p>
</li>
<li>
<p><code>--no-update-lock-file</code></p>
<p>Do not allow any updates to the flake's lock file.</p>
</li>
<li>
<p><code>--no-write-lock-file</code></p>
<p>Do not write the flake's newly generated lock file.</p>
</li>
<li>
<p><code>--override-input</code> <em>input-path</em> <em>flake-url</em></p>
<p>Override a specific flake input (e.g. <code>dwarffs/nixpkgs</code>). This implies <code>--no-write-lock-file</code>.</p>
</li>
<li>
<p><code>--recreate-lock-file</code></p>
<p>Recreate the flake's lock file from scratch.</p>
</li>
<li>
<p><code>--update-input</code> <em>input-path</em></p>
<p>Update a specific flake input (ignoring its previous entry in the lock file).</p>
</li>
</ul>
<p><strong>Logging-related options:</strong></p>
<ul>
<li>
<p><code>--debug</code></p>
<p>Set the logging verbosity level to 'debug'.</p>
</li>
<li>
<p><code>--log-format</code> <em>format</em></p>
<p>Set the format of log output; one of <code>raw</code>, <code>internal-json</code>, <code>bar</code> or <code>bar-with-logs</code>.</p>
</li>
<li>
<p><code>--print-build-logs</code> / <code>-L</code></p>
<p>Print full build logs on standard error.</p>
</li>
<li>
<p><code>--quiet</code></p>
<p>Decrease the logging verbosity level.</p>
</li>
<li>
<p><code>--verbose</code> / <code>-v</code></p>
<p>Increase the logging verbosity level.</p>
</li>
</ul>
<p><strong>Miscellaneous global options:</strong></p>
<ul>
<li>
<p><code>--help</code></p>
<p>Show usage information.</p>
</li>
<li>
<p><code>--offline</code></p>
<p>Disable substituters and consider all previously downloaded files up-to-date.</p>
</li>
<li>
<p><code>--option</code> <em>name</em> <em>value</em></p>
<p>Set the Nix configuration setting <em>name</em> to <em>value</em> (overriding <code>nix.conf</code>).</p>
</li>
<li>
<p><code>--refresh</code></p>
<p>Consider all previously downloaded files out-of-date.</p>
</li>
<li>
<p><code>--version</code></p>
<p>Show version information.</p>
</li>
</ul>
<p><strong>Options that change the interpretation of installables:</strong></p>
<ul>
<li>
<p><code>--derivation</code></p>
<p>Operate on the <a href="command-ref/new-cli/../../glossary.html#gloss-store-derivation">store derivation</a> rather than its outputs.</p>
</li>
<li>
<p><code>--expr</code> <em>expr</em></p>
<p>Interpret installables as attribute paths relative to the Nix expression <em>expr</em>.</p>
</li>
<li>
<p><code>--file</code> / <code>-f</code> <em>file</em></p>
<p>Interpret installables as attribute paths relative to the Nix expression stored in <em>file</em>. If <em>file</em> is the character -, then a Nix expression will be read from standard input. Implies <code>--impure</code>.</p>
</li>
</ul>
<p><strong>Options to override configuration settings:</strong></p>
<ul>
<li>
<p><code>--accept-flake-config</code></p>
<p>Enable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--access-tokens</code> <em>value</em></p>
<p>Set the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--allow-dirty</code></p>
<p>Enable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--allow-import-from-derivation</code></p>
<p>Enable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--allow-new-privileges</code></p>
<p>Enable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--allow-symlinked-store</code></p>
<p>Enable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--allow-unsafe-native-code-during-evaluation</code></p>
<p>Enable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--allowed-impure-host-deps</code> <em>value</em></p>
<p>Set the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--allowed-uris</code> <em>value</em></p>
<p>Set the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--allowed-users</code> <em>value</em></p>
<p>Set the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--auto-allocate-uids</code></p>
<p>Enable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--auto-optimise-store</code></p>
<p>Enable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt</code> <em>value</em></p>
<p>Set the <code>bash-prompt</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-prefix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-prefix</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-suffix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-suffix</code> setting.</p>
</li>
<li>
<p><code>--build-hook</code> <em>value</em></p>
<p>Set the <code>build-hook</code> setting.</p>
</li>
<li>
<p><code>--build-poll-interval</code> <em>value</em></p>
<p>Set the <code>build-poll-interval</code> setting.</p>
</li>
<li>
<p><code>--build-users-group</code> <em>value</em></p>
<p>Set the <code>build-users-group</code> setting.</p>
</li>
<li>
<p><code>--builders</code> <em>value</em></p>
<p>Set the <code>builders</code> setting.</p>
</li>
<li>
<p><code>--builders-use-substitutes</code></p>
<p>Enable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--commit-lockfile-summary</code> <em>value</em></p>
<p>Set the <code>commit-lockfile-summary</code> setting.</p>
</li>
<li>
<p><code>--compress-build-log</code></p>
<p>Enable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--connect-timeout</code> <em>value</em></p>
<p>Set the <code>connect-timeout</code> setting.</p>
</li>
<li>
<p><code>--cores</code> <em>value</em></p>
<p>Set the <code>cores</code> setting.</p>
</li>
<li>
<p><code>--diff-hook</code> <em>value</em></p>
<p>Set the <code>diff-hook</code> setting.</p>
</li>
<li>
<p><code>--download-attempts</code> <em>value</em></p>
<p>Set the <code>download-attempts</code> setting.</p>
</li>
<li>
<p><code>--download-speed</code> <em>value</em></p>
<p>Set the <code>download-speed</code> setting.</p>
</li>
<li>
<p><code>--eval-cache</code></p>
<p>Enable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--experimental-features</code> <em>value</em></p>
<p>Set the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-access-tokens</code> <em>value</em></p>
<p>Append to the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-impure-host-deps</code> <em>value</em></p>
<p>Append to the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-uris</code> <em>value</em></p>
<p>Append to the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-users</code> <em>value</em></p>
<p>Append to the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--extra-experimental-features</code> <em>value</em></p>
<p>Append to the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-extra-platforms</code> <em>value</em></p>
<p>Append to the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-hashed-mirrors</code> <em>value</em></p>
<p>Append to the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--extra-ignored-acls</code> <em>value</em></p>
<p>Append to the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--extra-nix-path</code> <em>value</em></p>
<p>Append to the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--extra-platforms</code> <em>value</em></p>
<p>Set the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-plugin-files</code> <em>value</em></p>
<p>Append to the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--extra-sandbox-paths</code> <em>value</em></p>
<p>Append to the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--extra-secret-key-files</code> <em>value</em></p>
<p>Append to the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--extra-substituters</code> <em>value</em></p>
<p>Append to the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-system-features</code> <em>value</em></p>
<p>Append to the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-public-keys</code> <em>value</em></p>
<p>Append to the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-substituters</code> <em>value</em></p>
<p>Append to the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-users</code> <em>value</em></p>
<p>Append to the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--fallback</code></p>
<p>Enable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--filter-syscalls</code></p>
<p>Enable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--flake-registry</code> <em>value</em></p>
<p>Set the <code>flake-registry</code> setting.</p>
</li>
<li>
<p><code>--fsync-metadata</code></p>
<p>Enable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--gc-reserved-space</code> <em>value</em></p>
<p>Set the <code>gc-reserved-space</code> setting.</p>
</li>
<li>
<p><code>--hashed-mirrors</code> <em>value</em></p>
<p>Set the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--http-connections</code> <em>value</em></p>
<p>Set the <code>http-connections</code> setting.</p>
</li>
<li>
<p><code>--http2</code></p>
<p>Enable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--id-count</code> <em>value</em></p>
<p>Set the <code>id-count</code> setting.</p>
</li>
<li>
<p><code>--ignore-try</code></p>
<p>Enable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--ignored-acls</code> <em>value</em></p>
<p>Set the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--impersonate-linux-26</code></p>
<p>Enable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--keep-build-log</code></p>
<p>Enable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--keep-derivations</code></p>
<p>Enable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-env-derivations</code></p>
<p>Enable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-failed</code></p>
<p>Enable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--keep-going</code></p>
<p>Enable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--keep-outputs</code></p>
<p>Enable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--log-lines</code> <em>value</em></p>
<p>Set the <code>log-lines</code> setting.</p>
</li>
<li>
<p><code>--max-build-log-size</code> <em>value</em></p>
<p>Set the <code>max-build-log-size</code> setting.</p>
</li>
<li>
<p><code>--max-free</code> <em>value</em></p>
<p>Set the <code>max-free</code> setting.</p>
</li>
<li>
<p><code>--max-jobs</code> <em>value</em></p>
<p>Set the <code>max-jobs</code> setting.</p>
</li>
<li>
<p><code>--max-silent-time</code> <em>value</em></p>
<p>Set the <code>max-silent-time</code> setting.</p>
</li>
<li>
<p><code>--min-free</code> <em>value</em></p>
<p>Set the <code>min-free</code> setting.</p>
</li>
<li>
<p><code>--min-free-check-interval</code> <em>value</em></p>
<p>Set the <code>min-free-check-interval</code> setting.</p>
</li>
<li>
<p><code>--nar-buffer-size</code> <em>value</em></p>
<p>Set the <code>nar-buffer-size</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-negative-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-negative-ttl</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-positive-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-positive-ttl</code> setting.</p>
</li>
<li>
<p><code>--netrc-file</code> <em>value</em></p>
<p>Set the <code>netrc-file</code> setting.</p>
</li>
<li>
<p><code>--nix-path</code> <em>value</em></p>
<p>Set the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--no-accept-flake-config</code></p>
<p>Disable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--no-allow-dirty</code></p>
<p>Disable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--no-allow-import-from-derivation</code></p>
<p>Disable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--no-allow-new-privileges</code></p>
<p>Disable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--no-allow-symlinked-store</code></p>
<p>Disable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--no-allow-unsafe-native-code-during-evaluation</code></p>
<p>Disable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--no-auto-allocate-uids</code></p>
<p>Disable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--no-auto-optimise-store</code></p>
<p>Disable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--no-builders-use-substitutes</code></p>
<p>Disable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--no-compress-build-log</code></p>
<p>Disable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-eval-cache</code></p>
<p>Disable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--no-fallback</code></p>
<p>Disable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--no-filter-syscalls</code></p>
<p>Disable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--no-fsync-metadata</code></p>
<p>Disable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--no-http2</code></p>
<p>Disable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--no-ignore-try</code></p>
<p>Disable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--no-impersonate-linux-26</code></p>
<p>Disable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--no-keep-build-log</code></p>
<p>Disable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-keep-derivations</code></p>
<p>Disable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-env-derivations</code></p>
<p>Disable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-failed</code></p>
<p>Disable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--no-keep-going</code></p>
<p>Disable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--no-keep-outputs</code></p>
<p>Disable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--no-preallocate-contents</code></p>
<p>Disable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--no-print-missing</code></p>
<p>Disable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--no-pure-eval</code></p>
<p>Disable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--no-require-sigs</code></p>
<p>Disable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--no-restrict-eval</code></p>
<p>Disable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--no-run-diff-hook</code></p>
<p>Disable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--no-sandbox</code></p>
<p>Disable sandboxing.</p>
</li>
<li>
<p><code>--no-sandbox-fallback</code></p>
<p>Disable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--no-show-trace</code></p>
<p>Disable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--no-substitute</code></p>
<p>Disable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--no-sync-before-registering</code></p>
<p>Disable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--no-trace-function-calls</code></p>
<p>Disable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--no-trace-verbose</code></p>
<p>Disable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--no-use-case-hack</code></p>
<p>Disable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--no-use-cgroups</code></p>
<p>Disable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--no-use-registries</code></p>
<p>Disable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--no-use-sqlite-wal</code></p>
<p>Disable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--no-warn-dirty</code></p>
<p>Disable the <code>warn-dirty</code> setting.</p>
</li>
<li>
<p><code>--plugin-files</code> <em>value</em></p>
<p>Set the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--post-build-hook</code> <em>value</em></p>
<p>Set the <code>post-build-hook</code> setting.</p>
</li>
<li>
<p><code>--pre-build-hook</code> <em>value</em></p>
<p>Set the <code>pre-build-hook</code> setting.</p>
</li>
<li>
<p><code>--preallocate-contents</code></p>
<p>Enable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--print-missing</code></p>
<p>Enable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--pure-eval</code></p>
<p>Enable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--relaxed-sandbox</code></p>
<p>Enable sandboxing, but allow builds to disable it.</p>
</li>
<li>
<p><code>--require-sigs</code></p>
<p>Enable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--restrict-eval</code></p>
<p>Enable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--run-diff-hook</code></p>
<p>Enable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--sandbox</code></p>
<p>Enable sandboxing.</p>
</li>
<li>
<p><code>--sandbox-build-dir</code> <em>value</em></p>
<p>Set the <code>sandbox-build-dir</code> setting.</p>
</li>
<li>
<p><code>--sandbox-dev-shm-size</code> <em>value</em></p>
<p>Set the <code>sandbox-dev-shm-size</code> setting.</p>
</li>
<li>
<p><code>--sandbox-fallback</code></p>
<p>Enable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--sandbox-paths</code> <em>value</em></p>
<p>Set the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--secret-key-files</code> <em>value</em></p>
<p>Set the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--show-trace</code></p>
<p>Enable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--stalled-download-timeout</code> <em>value</em></p>
<p>Set the <code>stalled-download-timeout</code> setting.</p>
</li>
<li>
<p><code>--start-id</code> <em>value</em></p>
<p>Set the <code>start-id</code> setting.</p>
</li>
<li>
<p><code>--store</code> <em>value</em></p>
<p>Set the <code>store</code> setting.</p>
</li>
<li>
<p><code>--substitute</code></p>
<p>Enable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--substituters</code> <em>value</em></p>
<p>Set the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--sync-before-registering</code></p>
<p>Enable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--system</code> <em>value</em></p>
<p>Set the <code>system</code> setting.</p>
</li>
<li>
<p><code>--system-features</code> <em>value</em></p>
<p>Set the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--tarball-ttl</code> <em>value</em></p>
<p>Set the <code>tarball-ttl</code> setting.</p>
</li>
<li>
<p><code>--timeout</code> <em>value</em></p>
<p>Set the <code>timeout</code> setting.</p>
</li>
<li>
<p><code>--trace-function-calls</code></p>
<p>Enable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--trace-verbose</code></p>
<p>Enable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--trusted-public-keys</code> <em>value</em></p>
<p>Set the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--trusted-substituters</code> <em>value</em></p>
<p>Set the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--trusted-users</code> <em>value</em></p>
<p>Set the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--use-case-hack</code></p>
<p>Enable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--use-cgroups</code></p>
<p>Enable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--use-registries</code></p>
<p>Enable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--use-sqlite-wal</code></p>
<p>Enable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--user-agent-suffix</code> <em>value</em></p>
<p>Set the <code>user-agent-suffix</code> setting.</p>
</li>
<li>
<p><code>--warn-dirty</code></p>
<p>Enable the <code>warn-dirty</code> setting.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p><strong>Warning</strong> <br />
This program is <strong>experimental</strong> and its interface is subject to change.</p>
</blockquote>
<h1 id="name-71"><a class="header" href="#name-71">Name</a></h1>
<p><code>nix shell</code> - run a shell in which the specified packages are available</p>
<h1 id="synopsis-102"><a class="header" href="#synopsis-102">Synopsis</a></h1>
<p><code>nix shell</code> [<em>option</em>...] <em>installables</em>...</p>
<h1 id="examples-69"><a class="header" href="#examples-69">Examples</a></h1>
<ul>
<li>
<p>Start a shell providing <code>youtube-dl</code> from the <code>nixpkgs</code> flake:</p>
<pre><code class="language-console"># nix shell nixpkgs#youtube-dl
# youtube-dl --version
2020.11.01.1
</code></pre>
</li>
<li>
<p>Start a shell providing GNU Hello from NixOS 20.03:</p>
<pre><code class="language-console"># nix shell nixpkgs/nixos-20.03#hello
</code></pre>
</li>
<li>
<p>Run GNU Hello:</p>
<pre><code class="language-console"># nix shell nixpkgs#hello -c hello --greeting 'Hi everybody!'
Hi everybody!
</code></pre>
</li>
<li>
<p>Run multiple commands in a shell environment:</p>
<pre><code class="language-console"># nix shell nixpkgs#gnumake -c sh -c &quot;cd src &amp;&amp; make&quot;
</code></pre>
</li>
<li>
<p>Run GNU Hello in a chroot store:</p>
<pre><code class="language-console"># nix shell --store ~/my-nix nixpkgs#hello -c hello
</code></pre>
</li>
<li>
<p>Start a shell providing GNU Hello in a chroot store:</p>
<pre><code class="language-console"># nix shell --store ~/my-nix nixpkgs#hello nixpkgs#bashInteractive -c bash
</code></pre>
<p>Note that it's necessary to specify <code>bash</code> explicitly because your
default shell (e.g. <code>/bin/bash</code>) generally will not exist in the
chroot.</p>
</li>
</ul>
<h1 id="description-90"><a class="header" href="#description-90">Description</a></h1>
<p><code>nix shell</code> runs a command in an environment in which the <code>$PATH</code> variable
provides the specified <em>installables</em>. If no command is specified, it starts the
default shell of your user account specified by <code>$SHELL</code>.</p>
<h1 id="options-52"><a class="header" href="#options-52">Options</a></h1>
<ul>
<li>
<p><code>--command</code> / <code>-c</code> <em>command</em> <em>args</em></p>
<p>Command and arguments to be executed, defaulting to <code>$SHELL</code></p>
</li>
<li>
<p><code>--ignore-environment</code> / <code>-i</code></p>
<p>Clear the entire environment (except those specified with <code>--keep</code>).</p>
</li>
<li>
<p><code>--keep</code> / <code>-k</code> <em>name</em></p>
<p>Keep the environment variable <em>name</em>.</p>
</li>
<li>
<p><code>--unset</code> / <code>-u</code> <em>name</em></p>
<p>Unset the environment variable <em>name</em>.</p>
</li>
</ul>
<p><strong>Common evaluation options:</strong></p>
<ul>
<li>
<p><code>--arg</code> <em>name</em> <em>expr</em></p>
<p>Pass the value <em>expr</em> as the argument <em>name</em> to Nix functions.</p>
</li>
<li>
<p><code>--argstr</code> <em>name</em> <em>string</em></p>
<p>Pass the string <em>string</em> as the argument <em>name</em> to Nix functions.</p>
</li>
<li>
<p><code>--debugger</code></p>
<p>Start an interactive environment if evaluation fails.</p>
</li>
<li>
<p><code>--eval-store</code> <em>store-url</em></p>
<p>The Nix store to use for evaluations.</p>
</li>
<li>
<p><code>--impure</code></p>
<p>Allow access to mutable paths and repositories.</p>
</li>
<li>
<p><code>--include</code> / <code>-I</code> <em>path</em></p>
<p>Add <em>path</em> to the Nix search path. The Nix search path is
initialized from the colon-separated <a href="command-ref/new-cli/../../command-ref/env-common.html#env-NIX_PATH"><code>NIX_PATH</code></a> environment
variable, and is used to look up the location of Nix expressions using <a href="command-ref/new-cli/../../language/values.html#type-path">paths</a> enclosed in angle
brackets (i.e., <code>&lt;nixpkgs&gt;</code>).</p>
<p>For instance, passing</p>
<pre><code>-I /home/eelco/Dev
-I /etc/nixos
</code></pre>
<p>will cause Nix to look for paths relative to <code>/home/eelco/Dev</code> and
<code>/etc/nixos</code>, in that order. This is equivalent to setting the
<code>NIX_PATH</code> environment variable to</p>
<pre><code>/home/eelco/Dev:/etc/nixos
</code></pre>
<p>It is also possible to match paths against a prefix. For example,
passing</p>
<pre><code>-I nixpkgs=/home/eelco/Dev/nixpkgs-branch
-I /etc/nixos
</code></pre>
<p>will cause Nix to search for <code>&lt;nixpkgs/path&gt;</code> in
<code>/home/eelco/Dev/nixpkgs-branch/path</code> and <code>/etc/nixos/nixpkgs/path</code>.</p>
<p>If a path in the Nix search path starts with <code>http://</code> or <code>https://</code>,
it is interpreted as the URL of a tarball that will be downloaded and
unpacked to a temporary location. The tarball must consist of a single
top-level directory. For example, passing</p>
<pre><code>-I nixpkgs=https://github.com/NixOS/nixpkgs/archive/master.tar.gz
</code></pre>
<p>tells Nix to download and use the current contents of the <code>master</code>
branch in the <code>nixpkgs</code> repository.</p>
<p>The URLs of the tarballs from the official <code>nixos.org</code> channels
(see <a href="command-ref/new-cli/../nix-channel.html">the manual page for <code>nix-channel</code></a>) can be
abbreviated as <code>channel:&lt;channel-name&gt;</code>. For instance, the
following two flags are equivalent:</p>
<pre><code>-I nixpkgs=channel:nixos-21.05
-I nixpkgs=https://nixos.org/channels/nixos-21.05/nixexprs.tar.xz
</code></pre>
<p>You can also fetch source trees using <a href="command-ref/new-cli/./nix3-flake.html#url-like-syntax">flake URLs</a> and add them to the
search path. For instance,</p>
<pre><code>-I nixpkgs=flake:nixpkgs
</code></pre>
<p>specifies that the prefix <code>nixpkgs</code> shall refer to the source tree
downloaded from the <code>nixpkgs</code> entry in the flake registry. Similarly,</p>
<pre><code>-I nixpkgs=flake:github:NixOS/nixpkgs/nixos-22.05
</code></pre>
<p>makes <code>&lt;nixpkgs&gt;</code> refer to a particular branch of the
<code>NixOS/nixpkgs</code> repository on GitHub.</p>
</li>
<li>
<p><code>--override-flake</code> <em>original-ref</em> <em>resolved-ref</em></p>
<p>Override the flake registries, redirecting <em>original-ref</em> to <em>resolved-ref</em>.</p>
</li>
</ul>
<p><strong>Common flake-related options:</strong></p>
<ul>
<li>
<p><code>--commit-lock-file</code></p>
<p>Commit changes to the flake's lock file.</p>
</li>
<li>
<p><code>--inputs-from</code> <em>flake-url</em></p>
<p>Use the inputs of the specified flake as registry entries.</p>
</li>
<li>
<p><code>--no-registries</code></p>
<p>Don't allow lookups in the flake registries. This option is deprecated; use <code>--no-use-registries</code>.</p>
</li>
<li>
<p><code>--no-update-lock-file</code></p>
<p>Do not allow any updates to the flake's lock file.</p>
</li>
<li>
<p><code>--no-write-lock-file</code></p>
<p>Do not write the flake's newly generated lock file.</p>
</li>
<li>
<p><code>--override-input</code> <em>input-path</em> <em>flake-url</em></p>
<p>Override a specific flake input (e.g. <code>dwarffs/nixpkgs</code>). This implies <code>--no-write-lock-file</code>.</p>
</li>
<li>
<p><code>--recreate-lock-file</code></p>
<p>Recreate the flake's lock file from scratch.</p>
</li>
<li>
<p><code>--update-input</code> <em>input-path</em></p>
<p>Update a specific flake input (ignoring its previous entry in the lock file).</p>
</li>
</ul>
<p><strong>Logging-related options:</strong></p>
<ul>
<li>
<p><code>--debug</code></p>
<p>Set the logging verbosity level to 'debug'.</p>
</li>
<li>
<p><code>--log-format</code> <em>format</em></p>
<p>Set the format of log output; one of <code>raw</code>, <code>internal-json</code>, <code>bar</code> or <code>bar-with-logs</code>.</p>
</li>
<li>
<p><code>--print-build-logs</code> / <code>-L</code></p>
<p>Print full build logs on standard error.</p>
</li>
<li>
<p><code>--quiet</code></p>
<p>Decrease the logging verbosity level.</p>
</li>
<li>
<p><code>--verbose</code> / <code>-v</code></p>
<p>Increase the logging verbosity level.</p>
</li>
</ul>
<p><strong>Miscellaneous global options:</strong></p>
<ul>
<li>
<p><code>--help</code></p>
<p>Show usage information.</p>
</li>
<li>
<p><code>--offline</code></p>
<p>Disable substituters and consider all previously downloaded files up-to-date.</p>
</li>
<li>
<p><code>--option</code> <em>name</em> <em>value</em></p>
<p>Set the Nix configuration setting <em>name</em> to <em>value</em> (overriding <code>nix.conf</code>).</p>
</li>
<li>
<p><code>--refresh</code></p>
<p>Consider all previously downloaded files out-of-date.</p>
</li>
<li>
<p><code>--version</code></p>
<p>Show version information.</p>
</li>
</ul>
<p><strong>Options that change the interpretation of installables:</strong></p>
<ul>
<li>
<p><code>--derivation</code></p>
<p>Operate on the <a href="command-ref/new-cli/../../glossary.html#gloss-store-derivation">store derivation</a> rather than its outputs.</p>
</li>
<li>
<p><code>--expr</code> <em>expr</em></p>
<p>Interpret installables as attribute paths relative to the Nix expression <em>expr</em>.</p>
</li>
<li>
<p><code>--file</code> / <code>-f</code> <em>file</em></p>
<p>Interpret installables as attribute paths relative to the Nix expression stored in <em>file</em>. If <em>file</em> is the character -, then a Nix expression will be read from standard input. Implies <code>--impure</code>.</p>
</li>
</ul>
<p><strong>Options to override configuration settings:</strong></p>
<ul>
<li>
<p><code>--accept-flake-config</code></p>
<p>Enable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--access-tokens</code> <em>value</em></p>
<p>Set the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--allow-dirty</code></p>
<p>Enable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--allow-import-from-derivation</code></p>
<p>Enable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--allow-new-privileges</code></p>
<p>Enable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--allow-symlinked-store</code></p>
<p>Enable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--allow-unsafe-native-code-during-evaluation</code></p>
<p>Enable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--allowed-impure-host-deps</code> <em>value</em></p>
<p>Set the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--allowed-uris</code> <em>value</em></p>
<p>Set the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--allowed-users</code> <em>value</em></p>
<p>Set the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--auto-allocate-uids</code></p>
<p>Enable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--auto-optimise-store</code></p>
<p>Enable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt</code> <em>value</em></p>
<p>Set the <code>bash-prompt</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-prefix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-prefix</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-suffix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-suffix</code> setting.</p>
</li>
<li>
<p><code>--build-hook</code> <em>value</em></p>
<p>Set the <code>build-hook</code> setting.</p>
</li>
<li>
<p><code>--build-poll-interval</code> <em>value</em></p>
<p>Set the <code>build-poll-interval</code> setting.</p>
</li>
<li>
<p><code>--build-users-group</code> <em>value</em></p>
<p>Set the <code>build-users-group</code> setting.</p>
</li>
<li>
<p><code>--builders</code> <em>value</em></p>
<p>Set the <code>builders</code> setting.</p>
</li>
<li>
<p><code>--builders-use-substitutes</code></p>
<p>Enable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--commit-lockfile-summary</code> <em>value</em></p>
<p>Set the <code>commit-lockfile-summary</code> setting.</p>
</li>
<li>
<p><code>--compress-build-log</code></p>
<p>Enable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--connect-timeout</code> <em>value</em></p>
<p>Set the <code>connect-timeout</code> setting.</p>
</li>
<li>
<p><code>--cores</code> <em>value</em></p>
<p>Set the <code>cores</code> setting.</p>
</li>
<li>
<p><code>--diff-hook</code> <em>value</em></p>
<p>Set the <code>diff-hook</code> setting.</p>
</li>
<li>
<p><code>--download-attempts</code> <em>value</em></p>
<p>Set the <code>download-attempts</code> setting.</p>
</li>
<li>
<p><code>--download-speed</code> <em>value</em></p>
<p>Set the <code>download-speed</code> setting.</p>
</li>
<li>
<p><code>--eval-cache</code></p>
<p>Enable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--experimental-features</code> <em>value</em></p>
<p>Set the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-access-tokens</code> <em>value</em></p>
<p>Append to the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-impure-host-deps</code> <em>value</em></p>
<p>Append to the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-uris</code> <em>value</em></p>
<p>Append to the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-users</code> <em>value</em></p>
<p>Append to the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--extra-experimental-features</code> <em>value</em></p>
<p>Append to the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-extra-platforms</code> <em>value</em></p>
<p>Append to the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-hashed-mirrors</code> <em>value</em></p>
<p>Append to the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--extra-ignored-acls</code> <em>value</em></p>
<p>Append to the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--extra-nix-path</code> <em>value</em></p>
<p>Append to the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--extra-platforms</code> <em>value</em></p>
<p>Set the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-plugin-files</code> <em>value</em></p>
<p>Append to the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--extra-sandbox-paths</code> <em>value</em></p>
<p>Append to the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--extra-secret-key-files</code> <em>value</em></p>
<p>Append to the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--extra-substituters</code> <em>value</em></p>
<p>Append to the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-system-features</code> <em>value</em></p>
<p>Append to the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-public-keys</code> <em>value</em></p>
<p>Append to the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-substituters</code> <em>value</em></p>
<p>Append to the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-users</code> <em>value</em></p>
<p>Append to the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--fallback</code></p>
<p>Enable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--filter-syscalls</code></p>
<p>Enable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--flake-registry</code> <em>value</em></p>
<p>Set the <code>flake-registry</code> setting.</p>
</li>
<li>
<p><code>--fsync-metadata</code></p>
<p>Enable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--gc-reserved-space</code> <em>value</em></p>
<p>Set the <code>gc-reserved-space</code> setting.</p>
</li>
<li>
<p><code>--hashed-mirrors</code> <em>value</em></p>
<p>Set the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--http-connections</code> <em>value</em></p>
<p>Set the <code>http-connections</code> setting.</p>
</li>
<li>
<p><code>--http2</code></p>
<p>Enable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--id-count</code> <em>value</em></p>
<p>Set the <code>id-count</code> setting.</p>
</li>
<li>
<p><code>--ignore-try</code></p>
<p>Enable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--ignored-acls</code> <em>value</em></p>
<p>Set the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--impersonate-linux-26</code></p>
<p>Enable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--keep-build-log</code></p>
<p>Enable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--keep-derivations</code></p>
<p>Enable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-env-derivations</code></p>
<p>Enable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-failed</code></p>
<p>Enable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--keep-going</code></p>
<p>Enable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--keep-outputs</code></p>
<p>Enable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--log-lines</code> <em>value</em></p>
<p>Set the <code>log-lines</code> setting.</p>
</li>
<li>
<p><code>--max-build-log-size</code> <em>value</em></p>
<p>Set the <code>max-build-log-size</code> setting.</p>
</li>
<li>
<p><code>--max-free</code> <em>value</em></p>
<p>Set the <code>max-free</code> setting.</p>
</li>
<li>
<p><code>--max-jobs</code> <em>value</em></p>
<p>Set the <code>max-jobs</code> setting.</p>
</li>
<li>
<p><code>--max-silent-time</code> <em>value</em></p>
<p>Set the <code>max-silent-time</code> setting.</p>
</li>
<li>
<p><code>--min-free</code> <em>value</em></p>
<p>Set the <code>min-free</code> setting.</p>
</li>
<li>
<p><code>--min-free-check-interval</code> <em>value</em></p>
<p>Set the <code>min-free-check-interval</code> setting.</p>
</li>
<li>
<p><code>--nar-buffer-size</code> <em>value</em></p>
<p>Set the <code>nar-buffer-size</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-negative-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-negative-ttl</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-positive-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-positive-ttl</code> setting.</p>
</li>
<li>
<p><code>--netrc-file</code> <em>value</em></p>
<p>Set the <code>netrc-file</code> setting.</p>
</li>
<li>
<p><code>--nix-path</code> <em>value</em></p>
<p>Set the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--no-accept-flake-config</code></p>
<p>Disable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--no-allow-dirty</code></p>
<p>Disable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--no-allow-import-from-derivation</code></p>
<p>Disable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--no-allow-new-privileges</code></p>
<p>Disable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--no-allow-symlinked-store</code></p>
<p>Disable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--no-allow-unsafe-native-code-during-evaluation</code></p>
<p>Disable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--no-auto-allocate-uids</code></p>
<p>Disable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--no-auto-optimise-store</code></p>
<p>Disable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--no-builders-use-substitutes</code></p>
<p>Disable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--no-compress-build-log</code></p>
<p>Disable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-eval-cache</code></p>
<p>Disable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--no-fallback</code></p>
<p>Disable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--no-filter-syscalls</code></p>
<p>Disable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--no-fsync-metadata</code></p>
<p>Disable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--no-http2</code></p>
<p>Disable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--no-ignore-try</code></p>
<p>Disable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--no-impersonate-linux-26</code></p>
<p>Disable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--no-keep-build-log</code></p>
<p>Disable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-keep-derivations</code></p>
<p>Disable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-env-derivations</code></p>
<p>Disable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-failed</code></p>
<p>Disable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--no-keep-going</code></p>
<p>Disable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--no-keep-outputs</code></p>
<p>Disable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--no-preallocate-contents</code></p>
<p>Disable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--no-print-missing</code></p>
<p>Disable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--no-pure-eval</code></p>
<p>Disable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--no-require-sigs</code></p>
<p>Disable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--no-restrict-eval</code></p>
<p>Disable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--no-run-diff-hook</code></p>
<p>Disable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--no-sandbox</code></p>
<p>Disable sandboxing.</p>
</li>
<li>
<p><code>--no-sandbox-fallback</code></p>
<p>Disable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--no-show-trace</code></p>
<p>Disable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--no-substitute</code></p>
<p>Disable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--no-sync-before-registering</code></p>
<p>Disable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--no-trace-function-calls</code></p>
<p>Disable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--no-trace-verbose</code></p>
<p>Disable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--no-use-case-hack</code></p>
<p>Disable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--no-use-cgroups</code></p>
<p>Disable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--no-use-registries</code></p>
<p>Disable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--no-use-sqlite-wal</code></p>
<p>Disable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--no-warn-dirty</code></p>
<p>Disable the <code>warn-dirty</code> setting.</p>
</li>
<li>
<p><code>--plugin-files</code> <em>value</em></p>
<p>Set the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--post-build-hook</code> <em>value</em></p>
<p>Set the <code>post-build-hook</code> setting.</p>
</li>
<li>
<p><code>--pre-build-hook</code> <em>value</em></p>
<p>Set the <code>pre-build-hook</code> setting.</p>
</li>
<li>
<p><code>--preallocate-contents</code></p>
<p>Enable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--print-missing</code></p>
<p>Enable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--pure-eval</code></p>
<p>Enable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--relaxed-sandbox</code></p>
<p>Enable sandboxing, but allow builds to disable it.</p>
</li>
<li>
<p><code>--require-sigs</code></p>
<p>Enable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--restrict-eval</code></p>
<p>Enable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--run-diff-hook</code></p>
<p>Enable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--sandbox</code></p>
<p>Enable sandboxing.</p>
</li>
<li>
<p><code>--sandbox-build-dir</code> <em>value</em></p>
<p>Set the <code>sandbox-build-dir</code> setting.</p>
</li>
<li>
<p><code>--sandbox-dev-shm-size</code> <em>value</em></p>
<p>Set the <code>sandbox-dev-shm-size</code> setting.</p>
</li>
<li>
<p><code>--sandbox-fallback</code></p>
<p>Enable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--sandbox-paths</code> <em>value</em></p>
<p>Set the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--secret-key-files</code> <em>value</em></p>
<p>Set the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--show-trace</code></p>
<p>Enable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--stalled-download-timeout</code> <em>value</em></p>
<p>Set the <code>stalled-download-timeout</code> setting.</p>
</li>
<li>
<p><code>--start-id</code> <em>value</em></p>
<p>Set the <code>start-id</code> setting.</p>
</li>
<li>
<p><code>--store</code> <em>value</em></p>
<p>Set the <code>store</code> setting.</p>
</li>
<li>
<p><code>--substitute</code></p>
<p>Enable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--substituters</code> <em>value</em></p>
<p>Set the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--sync-before-registering</code></p>
<p>Enable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--system</code> <em>value</em></p>
<p>Set the <code>system</code> setting.</p>
</li>
<li>
<p><code>--system-features</code> <em>value</em></p>
<p>Set the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--tarball-ttl</code> <em>value</em></p>
<p>Set the <code>tarball-ttl</code> setting.</p>
</li>
<li>
<p><code>--timeout</code> <em>value</em></p>
<p>Set the <code>timeout</code> setting.</p>
</li>
<li>
<p><code>--trace-function-calls</code></p>
<p>Enable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--trace-verbose</code></p>
<p>Enable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--trusted-public-keys</code> <em>value</em></p>
<p>Set the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--trusted-substituters</code> <em>value</em></p>
<p>Set the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--trusted-users</code> <em>value</em></p>
<p>Set the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--use-case-hack</code></p>
<p>Enable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--use-cgroups</code></p>
<p>Enable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--use-registries</code></p>
<p>Enable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--use-sqlite-wal</code></p>
<p>Enable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--user-agent-suffix</code> <em>value</em></p>
<p>Set the <code>user-agent-suffix</code> setting.</p>
</li>
<li>
<p><code>--warn-dirty</code></p>
<p>Enable the <code>warn-dirty</code> setting.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p><strong>Warning</strong> <br />
This program is <strong>experimental</strong> and its interface is subject to change.</p>
</blockquote>
<h1 id="name-72"><a class="header" href="#name-72">Name</a></h1>
<p><code>nix show-config</code> - show the Nix configuration</p>
<h1 id="synopsis-103"><a class="header" href="#synopsis-103">Synopsis</a></h1>
<p><code>nix show-config</code> [<em>option</em>...] </p>
<h1 id="options-53"><a class="header" href="#options-53">Options</a></h1>
<ul>
<li>
<p><code>--json</code></p>
<p>Produce output in JSON format, suitable for consumption by another program.</p>
</li>
</ul>
<p><strong>Logging-related options:</strong></p>
<ul>
<li>
<p><code>--debug</code></p>
<p>Set the logging verbosity level to 'debug'.</p>
</li>
<li>
<p><code>--log-format</code> <em>format</em></p>
<p>Set the format of log output; one of <code>raw</code>, <code>internal-json</code>, <code>bar</code> or <code>bar-with-logs</code>.</p>
</li>
<li>
<p><code>--print-build-logs</code> / <code>-L</code></p>
<p>Print full build logs on standard error.</p>
</li>
<li>
<p><code>--quiet</code></p>
<p>Decrease the logging verbosity level.</p>
</li>
<li>
<p><code>--verbose</code> / <code>-v</code></p>
<p>Increase the logging verbosity level.</p>
</li>
</ul>
<p><strong>Miscellaneous global options:</strong></p>
<ul>
<li>
<p><code>--help</code></p>
<p>Show usage information.</p>
</li>
<li>
<p><code>--offline</code></p>
<p>Disable substituters and consider all previously downloaded files up-to-date.</p>
</li>
<li>
<p><code>--option</code> <em>name</em> <em>value</em></p>
<p>Set the Nix configuration setting <em>name</em> to <em>value</em> (overriding <code>nix.conf</code>).</p>
</li>
<li>
<p><code>--refresh</code></p>
<p>Consider all previously downloaded files out-of-date.</p>
</li>
<li>
<p><code>--version</code></p>
<p>Show version information.</p>
</li>
</ul>
<p><strong>Options to override configuration settings:</strong></p>
<ul>
<li>
<p><code>--accept-flake-config</code></p>
<p>Enable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--access-tokens</code> <em>value</em></p>
<p>Set the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--allow-dirty</code></p>
<p>Enable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--allow-import-from-derivation</code></p>
<p>Enable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--allow-new-privileges</code></p>
<p>Enable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--allow-symlinked-store</code></p>
<p>Enable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--allow-unsafe-native-code-during-evaluation</code></p>
<p>Enable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--allowed-impure-host-deps</code> <em>value</em></p>
<p>Set the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--allowed-uris</code> <em>value</em></p>
<p>Set the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--allowed-users</code> <em>value</em></p>
<p>Set the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--auto-allocate-uids</code></p>
<p>Enable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--auto-optimise-store</code></p>
<p>Enable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt</code> <em>value</em></p>
<p>Set the <code>bash-prompt</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-prefix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-prefix</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-suffix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-suffix</code> setting.</p>
</li>
<li>
<p><code>--build-hook</code> <em>value</em></p>
<p>Set the <code>build-hook</code> setting.</p>
</li>
<li>
<p><code>--build-poll-interval</code> <em>value</em></p>
<p>Set the <code>build-poll-interval</code> setting.</p>
</li>
<li>
<p><code>--build-users-group</code> <em>value</em></p>
<p>Set the <code>build-users-group</code> setting.</p>
</li>
<li>
<p><code>--builders</code> <em>value</em></p>
<p>Set the <code>builders</code> setting.</p>
</li>
<li>
<p><code>--builders-use-substitutes</code></p>
<p>Enable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--commit-lockfile-summary</code> <em>value</em></p>
<p>Set the <code>commit-lockfile-summary</code> setting.</p>
</li>
<li>
<p><code>--compress-build-log</code></p>
<p>Enable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--connect-timeout</code> <em>value</em></p>
<p>Set the <code>connect-timeout</code> setting.</p>
</li>
<li>
<p><code>--cores</code> <em>value</em></p>
<p>Set the <code>cores</code> setting.</p>
</li>
<li>
<p><code>--diff-hook</code> <em>value</em></p>
<p>Set the <code>diff-hook</code> setting.</p>
</li>
<li>
<p><code>--download-attempts</code> <em>value</em></p>
<p>Set the <code>download-attempts</code> setting.</p>
</li>
<li>
<p><code>--download-speed</code> <em>value</em></p>
<p>Set the <code>download-speed</code> setting.</p>
</li>
<li>
<p><code>--eval-cache</code></p>
<p>Enable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--experimental-features</code> <em>value</em></p>
<p>Set the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-access-tokens</code> <em>value</em></p>
<p>Append to the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-impure-host-deps</code> <em>value</em></p>
<p>Append to the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-uris</code> <em>value</em></p>
<p>Append to the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-users</code> <em>value</em></p>
<p>Append to the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--extra-experimental-features</code> <em>value</em></p>
<p>Append to the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-extra-platforms</code> <em>value</em></p>
<p>Append to the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-hashed-mirrors</code> <em>value</em></p>
<p>Append to the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--extra-ignored-acls</code> <em>value</em></p>
<p>Append to the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--extra-nix-path</code> <em>value</em></p>
<p>Append to the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--extra-platforms</code> <em>value</em></p>
<p>Set the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-plugin-files</code> <em>value</em></p>
<p>Append to the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--extra-sandbox-paths</code> <em>value</em></p>
<p>Append to the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--extra-secret-key-files</code> <em>value</em></p>
<p>Append to the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--extra-substituters</code> <em>value</em></p>
<p>Append to the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-system-features</code> <em>value</em></p>
<p>Append to the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-public-keys</code> <em>value</em></p>
<p>Append to the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-substituters</code> <em>value</em></p>
<p>Append to the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-users</code> <em>value</em></p>
<p>Append to the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--fallback</code></p>
<p>Enable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--filter-syscalls</code></p>
<p>Enable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--flake-registry</code> <em>value</em></p>
<p>Set the <code>flake-registry</code> setting.</p>
</li>
<li>
<p><code>--fsync-metadata</code></p>
<p>Enable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--gc-reserved-space</code> <em>value</em></p>
<p>Set the <code>gc-reserved-space</code> setting.</p>
</li>
<li>
<p><code>--hashed-mirrors</code> <em>value</em></p>
<p>Set the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--http-connections</code> <em>value</em></p>
<p>Set the <code>http-connections</code> setting.</p>
</li>
<li>
<p><code>--http2</code></p>
<p>Enable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--id-count</code> <em>value</em></p>
<p>Set the <code>id-count</code> setting.</p>
</li>
<li>
<p><code>--ignore-try</code></p>
<p>Enable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--ignored-acls</code> <em>value</em></p>
<p>Set the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--impersonate-linux-26</code></p>
<p>Enable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--keep-build-log</code></p>
<p>Enable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--keep-derivations</code></p>
<p>Enable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-env-derivations</code></p>
<p>Enable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-failed</code></p>
<p>Enable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--keep-going</code></p>
<p>Enable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--keep-outputs</code></p>
<p>Enable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--log-lines</code> <em>value</em></p>
<p>Set the <code>log-lines</code> setting.</p>
</li>
<li>
<p><code>--max-build-log-size</code> <em>value</em></p>
<p>Set the <code>max-build-log-size</code> setting.</p>
</li>
<li>
<p><code>--max-free</code> <em>value</em></p>
<p>Set the <code>max-free</code> setting.</p>
</li>
<li>
<p><code>--max-jobs</code> <em>value</em></p>
<p>Set the <code>max-jobs</code> setting.</p>
</li>
<li>
<p><code>--max-silent-time</code> <em>value</em></p>
<p>Set the <code>max-silent-time</code> setting.</p>
</li>
<li>
<p><code>--min-free</code> <em>value</em></p>
<p>Set the <code>min-free</code> setting.</p>
</li>
<li>
<p><code>--min-free-check-interval</code> <em>value</em></p>
<p>Set the <code>min-free-check-interval</code> setting.</p>
</li>
<li>
<p><code>--nar-buffer-size</code> <em>value</em></p>
<p>Set the <code>nar-buffer-size</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-negative-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-negative-ttl</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-positive-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-positive-ttl</code> setting.</p>
</li>
<li>
<p><code>--netrc-file</code> <em>value</em></p>
<p>Set the <code>netrc-file</code> setting.</p>
</li>
<li>
<p><code>--nix-path</code> <em>value</em></p>
<p>Set the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--no-accept-flake-config</code></p>
<p>Disable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--no-allow-dirty</code></p>
<p>Disable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--no-allow-import-from-derivation</code></p>
<p>Disable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--no-allow-new-privileges</code></p>
<p>Disable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--no-allow-symlinked-store</code></p>
<p>Disable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--no-allow-unsafe-native-code-during-evaluation</code></p>
<p>Disable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--no-auto-allocate-uids</code></p>
<p>Disable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--no-auto-optimise-store</code></p>
<p>Disable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--no-builders-use-substitutes</code></p>
<p>Disable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--no-compress-build-log</code></p>
<p>Disable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-eval-cache</code></p>
<p>Disable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--no-fallback</code></p>
<p>Disable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--no-filter-syscalls</code></p>
<p>Disable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--no-fsync-metadata</code></p>
<p>Disable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--no-http2</code></p>
<p>Disable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--no-ignore-try</code></p>
<p>Disable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--no-impersonate-linux-26</code></p>
<p>Disable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--no-keep-build-log</code></p>
<p>Disable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-keep-derivations</code></p>
<p>Disable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-env-derivations</code></p>
<p>Disable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-failed</code></p>
<p>Disable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--no-keep-going</code></p>
<p>Disable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--no-keep-outputs</code></p>
<p>Disable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--no-preallocate-contents</code></p>
<p>Disable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--no-print-missing</code></p>
<p>Disable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--no-pure-eval</code></p>
<p>Disable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--no-require-sigs</code></p>
<p>Disable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--no-restrict-eval</code></p>
<p>Disable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--no-run-diff-hook</code></p>
<p>Disable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--no-sandbox</code></p>
<p>Disable sandboxing.</p>
</li>
<li>
<p><code>--no-sandbox-fallback</code></p>
<p>Disable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--no-show-trace</code></p>
<p>Disable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--no-substitute</code></p>
<p>Disable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--no-sync-before-registering</code></p>
<p>Disable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--no-trace-function-calls</code></p>
<p>Disable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--no-trace-verbose</code></p>
<p>Disable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--no-use-case-hack</code></p>
<p>Disable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--no-use-cgroups</code></p>
<p>Disable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--no-use-registries</code></p>
<p>Disable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--no-use-sqlite-wal</code></p>
<p>Disable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--no-warn-dirty</code></p>
<p>Disable the <code>warn-dirty</code> setting.</p>
</li>
<li>
<p><code>--plugin-files</code> <em>value</em></p>
<p>Set the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--post-build-hook</code> <em>value</em></p>
<p>Set the <code>post-build-hook</code> setting.</p>
</li>
<li>
<p><code>--pre-build-hook</code> <em>value</em></p>
<p>Set the <code>pre-build-hook</code> setting.</p>
</li>
<li>
<p><code>--preallocate-contents</code></p>
<p>Enable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--print-missing</code></p>
<p>Enable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--pure-eval</code></p>
<p>Enable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--relaxed-sandbox</code></p>
<p>Enable sandboxing, but allow builds to disable it.</p>
</li>
<li>
<p><code>--require-sigs</code></p>
<p>Enable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--restrict-eval</code></p>
<p>Enable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--run-diff-hook</code></p>
<p>Enable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--sandbox</code></p>
<p>Enable sandboxing.</p>
</li>
<li>
<p><code>--sandbox-build-dir</code> <em>value</em></p>
<p>Set the <code>sandbox-build-dir</code> setting.</p>
</li>
<li>
<p><code>--sandbox-dev-shm-size</code> <em>value</em></p>
<p>Set the <code>sandbox-dev-shm-size</code> setting.</p>
</li>
<li>
<p><code>--sandbox-fallback</code></p>
<p>Enable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--sandbox-paths</code> <em>value</em></p>
<p>Set the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--secret-key-files</code> <em>value</em></p>
<p>Set the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--show-trace</code></p>
<p>Enable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--stalled-download-timeout</code> <em>value</em></p>
<p>Set the <code>stalled-download-timeout</code> setting.</p>
</li>
<li>
<p><code>--start-id</code> <em>value</em></p>
<p>Set the <code>start-id</code> setting.</p>
</li>
<li>
<p><code>--store</code> <em>value</em></p>
<p>Set the <code>store</code> setting.</p>
</li>
<li>
<p><code>--substitute</code></p>
<p>Enable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--substituters</code> <em>value</em></p>
<p>Set the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--sync-before-registering</code></p>
<p>Enable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--system</code> <em>value</em></p>
<p>Set the <code>system</code> setting.</p>
</li>
<li>
<p><code>--system-features</code> <em>value</em></p>
<p>Set the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--tarball-ttl</code> <em>value</em></p>
<p>Set the <code>tarball-ttl</code> setting.</p>
</li>
<li>
<p><code>--timeout</code> <em>value</em></p>
<p>Set the <code>timeout</code> setting.</p>
</li>
<li>
<p><code>--trace-function-calls</code></p>
<p>Enable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--trace-verbose</code></p>
<p>Enable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--trusted-public-keys</code> <em>value</em></p>
<p>Set the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--trusted-substituters</code> <em>value</em></p>
<p>Set the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--trusted-users</code> <em>value</em></p>
<p>Set the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--use-case-hack</code></p>
<p>Enable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--use-cgroups</code></p>
<p>Enable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--use-registries</code></p>
<p>Enable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--use-sqlite-wal</code></p>
<p>Enable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--user-agent-suffix</code> <em>value</em></p>
<p>Set the <code>user-agent-suffix</code> setting.</p>
</li>
<li>
<p><code>--warn-dirty</code></p>
<p>Enable the <code>warn-dirty</code> setting.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p><strong>Warning</strong> <br />
This program is <strong>experimental</strong> and its interface is subject to change.</p>
</blockquote>
<h1 id="name-73"><a class="header" href="#name-73">Name</a></h1>
<p><code>nix show-derivation</code> - show the contents of a store derivation</p>
<h1 id="synopsis-104"><a class="header" href="#synopsis-104">Synopsis</a></h1>
<p><code>nix show-derivation</code> [<em>option</em>...] <em>installables</em>...</p>
<h1 id="examples-70"><a class="header" href="#examples-70">Examples</a></h1>
<ul>
<li>
<p>Show the <a href="command-ref/new-cli/../../glossary.html#gloss-store-derivation">store derivation</a> that results from evaluating the Hello
package:</p>
<pre><code class="language-console"># nix show-derivation nixpkgs#hello
{
  &quot;/nix/store/s6rn4jz1sin56rf4qj5b5v8jxjm32hlk-hello-2.10.drv&quot;: {
    …
  }
}
</code></pre>
</li>
<li>
<p>Show the full derivation graph (if available) that produced your
NixOS system:</p>
<pre><code class="language-console"># nix show-derivation -r /run/current-system
</code></pre>
</li>
<li>
<p>Print all files fetched using <code>fetchurl</code> by Firefox's dependency
graph:</p>
<pre><code class="language-console"># nix show-derivation -r nixpkgs#firefox \
  | jq -r '.[] | select(.outputs.out.hash and .env.urls) | .env.urls' \
  | uniq | sort
</code></pre>
<p>Note that <code>.outputs.out.hash</code> selects <em>fixed-output derivations</em>
(derivations that produce output with a specified content hash),
while <code>.env.urls</code> selects derivations with a <code>urls</code> attribute.</p>
</li>
</ul>
<h1 id="description-91"><a class="header" href="#description-91">Description</a></h1>
<p>This command prints on standard output a JSON representation of the
<a href="command-ref/new-cli/../../glossary.html#gloss-store-derivation">store derivation</a>s to which <em>installables</em> evaluate. Store derivations
are used internally by Nix. They are store paths with extension <code>.drv</code>
that represent the build-time dependency graph to which a Nix
expression evaluates.</p>
<p>By default, this command only shows top-level derivations, but with
<code>--recursive</code>, it also shows their dependencies.</p>
<p>The JSON output is a JSON object whose keys are the store paths of the
derivations, and whose values are a JSON object with the following
fields:</p>
<ul>
<li>
<p><code>outputs</code>: Information about the output paths of the
derivation. This is a JSON object with one member per output, where
the key is the output name and the value is a JSON object with these
fields:</p>
<ul>
<li><code>path</code>: The output path.</li>
<li><code>hashAlgo</code>: For fixed-output derivations, the hashing algorithm
(e.g. <code>sha256</code>), optionally prefixed by <code>r:</code> if <code>hash</code> denotes a
NAR hash rather than a flat file hash.</li>
<li><code>hash</code>: For fixed-output derivations, the expected content hash in
base-16.</li>
</ul>
<p>Example:</p>
<pre><code class="language-json">&quot;outputs&quot;: {
  &quot;out&quot;: {
    &quot;path&quot;: &quot;/nix/store/2543j7c6jn75blc3drf4g5vhb1rhdq29-source&quot;,
    &quot;hashAlgo&quot;: &quot;r:sha256&quot;,
    &quot;hash&quot;: &quot;6fc80dcc62179dbc12fc0b5881275898f93444833d21b89dfe5f7fbcbb1d0d62&quot;
  }
}
</code></pre>
</li>
<li>
<p><code>inputSrcs</code>: A list of store paths on which this derivation depends.</p>
</li>
<li>
<p><code>inputDrvs</code>: A JSON object specifying the derivations on which this
derivation depends, and what outputs of those derivations. For
example,</p>
<pre><code class="language-json">&quot;inputDrvs&quot;: {
  &quot;/nix/store/6lkh5yi7nlb7l6dr8fljlli5zfd9hq58-curl-7.73.0.drv&quot;: [&quot;dev&quot;],
  &quot;/nix/store/fn3kgnfzl5dzym26j8g907gq3kbm8bfh-unzip-6.0.drv&quot;: [&quot;out&quot;]
}
</code></pre>
<p>specifies that this derivation depends on the <code>dev</code> output of
<code>curl</code>, and the <code>out</code> output of <code>unzip</code>.</p>
</li>
<li>
<p><code>system</code>: The system type on which this derivation is to be built
(e.g. <code>x86_64-linux</code>).</p>
</li>
<li>
<p><code>builder</code>: The absolute path of the program to be executed to run
the build. Typically this is the <code>bash</code> shell
(e.g. <code>/nix/store/r3j288vpmczbl500w6zz89gyfa4nr0b1-bash-4.4-p23/bin/bash</code>).</p>
</li>
<li>
<p><code>args</code>: The command-line arguments passed to the <code>builder</code>.</p>
</li>
<li>
<p><code>env</code>: The environment passed to the <code>builder</code>.</p>
</li>
</ul>
<h1 id="options-54"><a class="header" href="#options-54">Options</a></h1>
<ul>
<li>
<p><code>--recursive</code> / <code>-r</code></p>
<p>Include the dependencies of the specified derivations.</p>
</li>
</ul>
<p><strong>Common evaluation options:</strong></p>
<ul>
<li>
<p><code>--arg</code> <em>name</em> <em>expr</em></p>
<p>Pass the value <em>expr</em> as the argument <em>name</em> to Nix functions.</p>
</li>
<li>
<p><code>--argstr</code> <em>name</em> <em>string</em></p>
<p>Pass the string <em>string</em> as the argument <em>name</em> to Nix functions.</p>
</li>
<li>
<p><code>--debugger</code></p>
<p>Start an interactive environment if evaluation fails.</p>
</li>
<li>
<p><code>--eval-store</code> <em>store-url</em></p>
<p>The Nix store to use for evaluations.</p>
</li>
<li>
<p><code>--impure</code></p>
<p>Allow access to mutable paths and repositories.</p>
</li>
<li>
<p><code>--include</code> / <code>-I</code> <em>path</em></p>
<p>Add <em>path</em> to the Nix search path. The Nix search path is
initialized from the colon-separated <a href="command-ref/new-cli/../../command-ref/env-common.html#env-NIX_PATH"><code>NIX_PATH</code></a> environment
variable, and is used to look up the location of Nix expressions using <a href="command-ref/new-cli/../../language/values.html#type-path">paths</a> enclosed in angle
brackets (i.e., <code>&lt;nixpkgs&gt;</code>).</p>
<p>For instance, passing</p>
<pre><code>-I /home/eelco/Dev
-I /etc/nixos
</code></pre>
<p>will cause Nix to look for paths relative to <code>/home/eelco/Dev</code> and
<code>/etc/nixos</code>, in that order. This is equivalent to setting the
<code>NIX_PATH</code> environment variable to</p>
<pre><code>/home/eelco/Dev:/etc/nixos
</code></pre>
<p>It is also possible to match paths against a prefix. For example,
passing</p>
<pre><code>-I nixpkgs=/home/eelco/Dev/nixpkgs-branch
-I /etc/nixos
</code></pre>
<p>will cause Nix to search for <code>&lt;nixpkgs/path&gt;</code> in
<code>/home/eelco/Dev/nixpkgs-branch/path</code> and <code>/etc/nixos/nixpkgs/path</code>.</p>
<p>If a path in the Nix search path starts with <code>http://</code> or <code>https://</code>,
it is interpreted as the URL of a tarball that will be downloaded and
unpacked to a temporary location. The tarball must consist of a single
top-level directory. For example, passing</p>
<pre><code>-I nixpkgs=https://github.com/NixOS/nixpkgs/archive/master.tar.gz
</code></pre>
<p>tells Nix to download and use the current contents of the <code>master</code>
branch in the <code>nixpkgs</code> repository.</p>
<p>The URLs of the tarballs from the official <code>nixos.org</code> channels
(see <a href="command-ref/new-cli/../nix-channel.html">the manual page for <code>nix-channel</code></a>) can be
abbreviated as <code>channel:&lt;channel-name&gt;</code>. For instance, the
following two flags are equivalent:</p>
<pre><code>-I nixpkgs=channel:nixos-21.05
-I nixpkgs=https://nixos.org/channels/nixos-21.05/nixexprs.tar.xz
</code></pre>
<p>You can also fetch source trees using <a href="command-ref/new-cli/./nix3-flake.html#url-like-syntax">flake URLs</a> and add them to the
search path. For instance,</p>
<pre><code>-I nixpkgs=flake:nixpkgs
</code></pre>
<p>specifies that the prefix <code>nixpkgs</code> shall refer to the source tree
downloaded from the <code>nixpkgs</code> entry in the flake registry. Similarly,</p>
<pre><code>-I nixpkgs=flake:github:NixOS/nixpkgs/nixos-22.05
</code></pre>
<p>makes <code>&lt;nixpkgs&gt;</code> refer to a particular branch of the
<code>NixOS/nixpkgs</code> repository on GitHub.</p>
</li>
<li>
<p><code>--override-flake</code> <em>original-ref</em> <em>resolved-ref</em></p>
<p>Override the flake registries, redirecting <em>original-ref</em> to <em>resolved-ref</em>.</p>
</li>
</ul>
<p><strong>Common flake-related options:</strong></p>
<ul>
<li>
<p><code>--commit-lock-file</code></p>
<p>Commit changes to the flake's lock file.</p>
</li>
<li>
<p><code>--inputs-from</code> <em>flake-url</em></p>
<p>Use the inputs of the specified flake as registry entries.</p>
</li>
<li>
<p><code>--no-registries</code></p>
<p>Don't allow lookups in the flake registries. This option is deprecated; use <code>--no-use-registries</code>.</p>
</li>
<li>
<p><code>--no-update-lock-file</code></p>
<p>Do not allow any updates to the flake's lock file.</p>
</li>
<li>
<p><code>--no-write-lock-file</code></p>
<p>Do not write the flake's newly generated lock file.</p>
</li>
<li>
<p><code>--override-input</code> <em>input-path</em> <em>flake-url</em></p>
<p>Override a specific flake input (e.g. <code>dwarffs/nixpkgs</code>). This implies <code>--no-write-lock-file</code>.</p>
</li>
<li>
<p><code>--recreate-lock-file</code></p>
<p>Recreate the flake's lock file from scratch.</p>
</li>
<li>
<p><code>--update-input</code> <em>input-path</em></p>
<p>Update a specific flake input (ignoring its previous entry in the lock file).</p>
</li>
</ul>
<p><strong>Logging-related options:</strong></p>
<ul>
<li>
<p><code>--debug</code></p>
<p>Set the logging verbosity level to 'debug'.</p>
</li>
<li>
<p><code>--log-format</code> <em>format</em></p>
<p>Set the format of log output; one of <code>raw</code>, <code>internal-json</code>, <code>bar</code> or <code>bar-with-logs</code>.</p>
</li>
<li>
<p><code>--print-build-logs</code> / <code>-L</code></p>
<p>Print full build logs on standard error.</p>
</li>
<li>
<p><code>--quiet</code></p>
<p>Decrease the logging verbosity level.</p>
</li>
<li>
<p><code>--verbose</code> / <code>-v</code></p>
<p>Increase the logging verbosity level.</p>
</li>
</ul>
<p><strong>Miscellaneous global options:</strong></p>
<ul>
<li>
<p><code>--help</code></p>
<p>Show usage information.</p>
</li>
<li>
<p><code>--offline</code></p>
<p>Disable substituters and consider all previously downloaded files up-to-date.</p>
</li>
<li>
<p><code>--option</code> <em>name</em> <em>value</em></p>
<p>Set the Nix configuration setting <em>name</em> to <em>value</em> (overriding <code>nix.conf</code>).</p>
</li>
<li>
<p><code>--refresh</code></p>
<p>Consider all previously downloaded files out-of-date.</p>
</li>
<li>
<p><code>--version</code></p>
<p>Show version information.</p>
</li>
</ul>
<p><strong>Options that change the interpretation of installables:</strong></p>
<ul>
<li>
<p><code>--derivation</code></p>
<p>Operate on the <a href="command-ref/new-cli/../../glossary.html#gloss-store-derivation">store derivation</a> rather than its outputs.</p>
</li>
<li>
<p><code>--expr</code> <em>expr</em></p>
<p>Interpret installables as attribute paths relative to the Nix expression <em>expr</em>.</p>
</li>
<li>
<p><code>--file</code> / <code>-f</code> <em>file</em></p>
<p>Interpret installables as attribute paths relative to the Nix expression stored in <em>file</em>. If <em>file</em> is the character -, then a Nix expression will be read from standard input. Implies <code>--impure</code>.</p>
</li>
</ul>
<p><strong>Options to override configuration settings:</strong></p>
<ul>
<li>
<p><code>--accept-flake-config</code></p>
<p>Enable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--access-tokens</code> <em>value</em></p>
<p>Set the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--allow-dirty</code></p>
<p>Enable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--allow-import-from-derivation</code></p>
<p>Enable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--allow-new-privileges</code></p>
<p>Enable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--allow-symlinked-store</code></p>
<p>Enable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--allow-unsafe-native-code-during-evaluation</code></p>
<p>Enable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--allowed-impure-host-deps</code> <em>value</em></p>
<p>Set the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--allowed-uris</code> <em>value</em></p>
<p>Set the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--allowed-users</code> <em>value</em></p>
<p>Set the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--auto-allocate-uids</code></p>
<p>Enable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--auto-optimise-store</code></p>
<p>Enable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt</code> <em>value</em></p>
<p>Set the <code>bash-prompt</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-prefix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-prefix</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-suffix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-suffix</code> setting.</p>
</li>
<li>
<p><code>--build-hook</code> <em>value</em></p>
<p>Set the <code>build-hook</code> setting.</p>
</li>
<li>
<p><code>--build-poll-interval</code> <em>value</em></p>
<p>Set the <code>build-poll-interval</code> setting.</p>
</li>
<li>
<p><code>--build-users-group</code> <em>value</em></p>
<p>Set the <code>build-users-group</code> setting.</p>
</li>
<li>
<p><code>--builders</code> <em>value</em></p>
<p>Set the <code>builders</code> setting.</p>
</li>
<li>
<p><code>--builders-use-substitutes</code></p>
<p>Enable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--commit-lockfile-summary</code> <em>value</em></p>
<p>Set the <code>commit-lockfile-summary</code> setting.</p>
</li>
<li>
<p><code>--compress-build-log</code></p>
<p>Enable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--connect-timeout</code> <em>value</em></p>
<p>Set the <code>connect-timeout</code> setting.</p>
</li>
<li>
<p><code>--cores</code> <em>value</em></p>
<p>Set the <code>cores</code> setting.</p>
</li>
<li>
<p><code>--diff-hook</code> <em>value</em></p>
<p>Set the <code>diff-hook</code> setting.</p>
</li>
<li>
<p><code>--download-attempts</code> <em>value</em></p>
<p>Set the <code>download-attempts</code> setting.</p>
</li>
<li>
<p><code>--download-speed</code> <em>value</em></p>
<p>Set the <code>download-speed</code> setting.</p>
</li>
<li>
<p><code>--eval-cache</code></p>
<p>Enable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--experimental-features</code> <em>value</em></p>
<p>Set the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-access-tokens</code> <em>value</em></p>
<p>Append to the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-impure-host-deps</code> <em>value</em></p>
<p>Append to the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-uris</code> <em>value</em></p>
<p>Append to the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-users</code> <em>value</em></p>
<p>Append to the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--extra-experimental-features</code> <em>value</em></p>
<p>Append to the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-extra-platforms</code> <em>value</em></p>
<p>Append to the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-hashed-mirrors</code> <em>value</em></p>
<p>Append to the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--extra-ignored-acls</code> <em>value</em></p>
<p>Append to the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--extra-nix-path</code> <em>value</em></p>
<p>Append to the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--extra-platforms</code> <em>value</em></p>
<p>Set the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-plugin-files</code> <em>value</em></p>
<p>Append to the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--extra-sandbox-paths</code> <em>value</em></p>
<p>Append to the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--extra-secret-key-files</code> <em>value</em></p>
<p>Append to the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--extra-substituters</code> <em>value</em></p>
<p>Append to the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-system-features</code> <em>value</em></p>
<p>Append to the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-public-keys</code> <em>value</em></p>
<p>Append to the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-substituters</code> <em>value</em></p>
<p>Append to the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-users</code> <em>value</em></p>
<p>Append to the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--fallback</code></p>
<p>Enable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--filter-syscalls</code></p>
<p>Enable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--flake-registry</code> <em>value</em></p>
<p>Set the <code>flake-registry</code> setting.</p>
</li>
<li>
<p><code>--fsync-metadata</code></p>
<p>Enable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--gc-reserved-space</code> <em>value</em></p>
<p>Set the <code>gc-reserved-space</code> setting.</p>
</li>
<li>
<p><code>--hashed-mirrors</code> <em>value</em></p>
<p>Set the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--http-connections</code> <em>value</em></p>
<p>Set the <code>http-connections</code> setting.</p>
</li>
<li>
<p><code>--http2</code></p>
<p>Enable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--id-count</code> <em>value</em></p>
<p>Set the <code>id-count</code> setting.</p>
</li>
<li>
<p><code>--ignore-try</code></p>
<p>Enable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--ignored-acls</code> <em>value</em></p>
<p>Set the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--impersonate-linux-26</code></p>
<p>Enable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--keep-build-log</code></p>
<p>Enable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--keep-derivations</code></p>
<p>Enable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-env-derivations</code></p>
<p>Enable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-failed</code></p>
<p>Enable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--keep-going</code></p>
<p>Enable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--keep-outputs</code></p>
<p>Enable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--log-lines</code> <em>value</em></p>
<p>Set the <code>log-lines</code> setting.</p>
</li>
<li>
<p><code>--max-build-log-size</code> <em>value</em></p>
<p>Set the <code>max-build-log-size</code> setting.</p>
</li>
<li>
<p><code>--max-free</code> <em>value</em></p>
<p>Set the <code>max-free</code> setting.</p>
</li>
<li>
<p><code>--max-jobs</code> <em>value</em></p>
<p>Set the <code>max-jobs</code> setting.</p>
</li>
<li>
<p><code>--max-silent-time</code> <em>value</em></p>
<p>Set the <code>max-silent-time</code> setting.</p>
</li>
<li>
<p><code>--min-free</code> <em>value</em></p>
<p>Set the <code>min-free</code> setting.</p>
</li>
<li>
<p><code>--min-free-check-interval</code> <em>value</em></p>
<p>Set the <code>min-free-check-interval</code> setting.</p>
</li>
<li>
<p><code>--nar-buffer-size</code> <em>value</em></p>
<p>Set the <code>nar-buffer-size</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-negative-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-negative-ttl</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-positive-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-positive-ttl</code> setting.</p>
</li>
<li>
<p><code>--netrc-file</code> <em>value</em></p>
<p>Set the <code>netrc-file</code> setting.</p>
</li>
<li>
<p><code>--nix-path</code> <em>value</em></p>
<p>Set the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--no-accept-flake-config</code></p>
<p>Disable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--no-allow-dirty</code></p>
<p>Disable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--no-allow-import-from-derivation</code></p>
<p>Disable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--no-allow-new-privileges</code></p>
<p>Disable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--no-allow-symlinked-store</code></p>
<p>Disable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--no-allow-unsafe-native-code-during-evaluation</code></p>
<p>Disable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--no-auto-allocate-uids</code></p>
<p>Disable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--no-auto-optimise-store</code></p>
<p>Disable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--no-builders-use-substitutes</code></p>
<p>Disable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--no-compress-build-log</code></p>
<p>Disable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-eval-cache</code></p>
<p>Disable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--no-fallback</code></p>
<p>Disable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--no-filter-syscalls</code></p>
<p>Disable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--no-fsync-metadata</code></p>
<p>Disable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--no-http2</code></p>
<p>Disable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--no-ignore-try</code></p>
<p>Disable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--no-impersonate-linux-26</code></p>
<p>Disable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--no-keep-build-log</code></p>
<p>Disable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-keep-derivations</code></p>
<p>Disable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-env-derivations</code></p>
<p>Disable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-failed</code></p>
<p>Disable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--no-keep-going</code></p>
<p>Disable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--no-keep-outputs</code></p>
<p>Disable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--no-preallocate-contents</code></p>
<p>Disable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--no-print-missing</code></p>
<p>Disable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--no-pure-eval</code></p>
<p>Disable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--no-require-sigs</code></p>
<p>Disable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--no-restrict-eval</code></p>
<p>Disable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--no-run-diff-hook</code></p>
<p>Disable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--no-sandbox</code></p>
<p>Disable sandboxing.</p>
</li>
<li>
<p><code>--no-sandbox-fallback</code></p>
<p>Disable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--no-show-trace</code></p>
<p>Disable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--no-substitute</code></p>
<p>Disable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--no-sync-before-registering</code></p>
<p>Disable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--no-trace-function-calls</code></p>
<p>Disable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--no-trace-verbose</code></p>
<p>Disable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--no-use-case-hack</code></p>
<p>Disable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--no-use-cgroups</code></p>
<p>Disable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--no-use-registries</code></p>
<p>Disable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--no-use-sqlite-wal</code></p>
<p>Disable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--no-warn-dirty</code></p>
<p>Disable the <code>warn-dirty</code> setting.</p>
</li>
<li>
<p><code>--plugin-files</code> <em>value</em></p>
<p>Set the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--post-build-hook</code> <em>value</em></p>
<p>Set the <code>post-build-hook</code> setting.</p>
</li>
<li>
<p><code>--pre-build-hook</code> <em>value</em></p>
<p>Set the <code>pre-build-hook</code> setting.</p>
</li>
<li>
<p><code>--preallocate-contents</code></p>
<p>Enable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--print-missing</code></p>
<p>Enable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--pure-eval</code></p>
<p>Enable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--relaxed-sandbox</code></p>
<p>Enable sandboxing, but allow builds to disable it.</p>
</li>
<li>
<p><code>--require-sigs</code></p>
<p>Enable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--restrict-eval</code></p>
<p>Enable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--run-diff-hook</code></p>
<p>Enable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--sandbox</code></p>
<p>Enable sandboxing.</p>
</li>
<li>
<p><code>--sandbox-build-dir</code> <em>value</em></p>
<p>Set the <code>sandbox-build-dir</code> setting.</p>
</li>
<li>
<p><code>--sandbox-dev-shm-size</code> <em>value</em></p>
<p>Set the <code>sandbox-dev-shm-size</code> setting.</p>
</li>
<li>
<p><code>--sandbox-fallback</code></p>
<p>Enable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--sandbox-paths</code> <em>value</em></p>
<p>Set the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--secret-key-files</code> <em>value</em></p>
<p>Set the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--show-trace</code></p>
<p>Enable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--stalled-download-timeout</code> <em>value</em></p>
<p>Set the <code>stalled-download-timeout</code> setting.</p>
</li>
<li>
<p><code>--start-id</code> <em>value</em></p>
<p>Set the <code>start-id</code> setting.</p>
</li>
<li>
<p><code>--store</code> <em>value</em></p>
<p>Set the <code>store</code> setting.</p>
</li>
<li>
<p><code>--substitute</code></p>
<p>Enable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--substituters</code> <em>value</em></p>
<p>Set the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--sync-before-registering</code></p>
<p>Enable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--system</code> <em>value</em></p>
<p>Set the <code>system</code> setting.</p>
</li>
<li>
<p><code>--system-features</code> <em>value</em></p>
<p>Set the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--tarball-ttl</code> <em>value</em></p>
<p>Set the <code>tarball-ttl</code> setting.</p>
</li>
<li>
<p><code>--timeout</code> <em>value</em></p>
<p>Set the <code>timeout</code> setting.</p>
</li>
<li>
<p><code>--trace-function-calls</code></p>
<p>Enable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--trace-verbose</code></p>
<p>Enable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--trusted-public-keys</code> <em>value</em></p>
<p>Set the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--trusted-substituters</code> <em>value</em></p>
<p>Set the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--trusted-users</code> <em>value</em></p>
<p>Set the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--use-case-hack</code></p>
<p>Enable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--use-cgroups</code></p>
<p>Enable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--use-registries</code></p>
<p>Enable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--use-sqlite-wal</code></p>
<p>Enable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--user-agent-suffix</code> <em>value</em></p>
<p>Set the <code>user-agent-suffix</code> setting.</p>
</li>
<li>
<p><code>--warn-dirty</code></p>
<p>Enable the <code>warn-dirty</code> setting.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p><strong>Warning</strong> <br />
This program is <strong>experimental</strong> and its interface is subject to change.</p>
</blockquote>
<h1 id="name-74"><a class="header" href="#name-74">Name</a></h1>
<p><code>nix store</code> - manipulate a Nix store</p>
<h1 id="synopsis-105"><a class="header" href="#synopsis-105">Synopsis</a></h1>
<p><code>nix store</code> [<em>option</em>...] <em>subcommand</em></p>
<p>where <em>subcommand</em> is one of the following:</p>
<p><strong>Available commands:</strong></p>
<ul>
<li><a href="command-ref/new-cli/./nix3-store-add-file.html"><code>nix store add-file</code></a> - add a regular file to the Nix store</li>
<li><a href="command-ref/new-cli/./nix3-store-add-path.html"><code>nix store add-path</code></a> - add a path to the Nix store</li>
<li><a href="command-ref/new-cli/./nix3-store-cat.html"><code>nix store cat</code></a> - print the contents of a file in the Nix store on stdout</li>
<li><a href="command-ref/new-cli/./nix3-store-copy-sigs.html"><code>nix store copy-sigs</code></a> - copy store path signatures from substituters</li>
<li><a href="command-ref/new-cli/./nix3-store-delete.html"><code>nix store delete</code></a> - delete paths from the Nix store</li>
<li><a href="command-ref/new-cli/./nix3-store-diff-closures.html"><code>nix store diff-closures</code></a> - show what packages and versions were added and removed between two closures</li>
<li><a href="command-ref/new-cli/./nix3-store-dump-path.html"><code>nix store dump-path</code></a> - serialise a store path to stdout in NAR format</li>
<li><a href="command-ref/new-cli/./nix3-store-gc.html"><code>nix store gc</code></a> - perform garbage collection on a Nix store</li>
<li><a href="command-ref/new-cli/./nix3-store-ls.html"><code>nix store ls</code></a> - show information about a path in the Nix store</li>
<li><a href="command-ref/new-cli/./nix3-store-make-content-addressed.html"><code>nix store make-content-addressed</code></a> - rewrite a path or closure to content-addressed form</li>
<li><a href="command-ref/new-cli/./nix3-store-optimise.html"><code>nix store optimise</code></a> - replace identical files in the store by hard links</li>
<li><a href="command-ref/new-cli/./nix3-store-path-from-hash-part.html"><code>nix store path-from-hash-part</code></a> - get a store path from its hash part</li>
<li><a href="command-ref/new-cli/./nix3-store-ping.html"><code>nix store ping</code></a> - test whether a store can be accessed</li>
<li><a href="command-ref/new-cli/./nix3-store-prefetch-file.html"><code>nix store prefetch-file</code></a> - download a file into the Nix store</li>
<li><a href="command-ref/new-cli/./nix3-store-repair.html"><code>nix store repair</code></a> - repair store paths</li>
<li><a href="command-ref/new-cli/./nix3-store-sign.html"><code>nix store sign</code></a> - sign store paths</li>
<li><a href="command-ref/new-cli/./nix3-store-verify.html"><code>nix store verify</code></a> - verify the integrity of store paths</li>
</ul>
<p><strong>:</strong></p>
<ul>
<li><a href="command-ref/new-cli/./nix3-store-copy-log.html"><code>nix store copy-log</code></a> - copy build logs between Nix stores</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p><strong>Warning</strong> <br />
This program is <strong>experimental</strong> and its interface is subject to change.</p>
</blockquote>
<h1 id="name-75"><a class="header" href="#name-75">Name</a></h1>
<p><code>nix store add-file</code> - add a regular file to the Nix store</p>
<h1 id="synopsis-106"><a class="header" href="#synopsis-106">Synopsis</a></h1>
<p><code>nix store add-file</code> [<em>option</em>...] <em>path</em></p>
<h1 id="description-92"><a class="header" href="#description-92">Description</a></h1>
<p>Copy the regular file <em>path</em> to the Nix store, and print the resulting
store path on standard output.</p>
<blockquote>
<p><strong>Warning</strong></p>
<p>The resulting store path is not registered as a garbage
collector root, so it could be deleted before you have a
chance to register it.</p>
</blockquote>
<h1 id="examples-71"><a class="header" href="#examples-71">Examples</a></h1>
<p>Add a regular file to the store:</p>
<pre><code class="language-console"># echo foo &gt; bar

# nix store add-file ./bar
/nix/store/cbv2s4bsvzjri77s2gb8g8bpcb6dpa8w-bar

# cat /nix/store/cbv2s4bsvzjri77s2gb8g8bpcb6dpa8w-bar
foo
</code></pre>
<h1 id="options-55"><a class="header" href="#options-55">Options</a></h1>
<ul>
<li>
<p><code>--dry-run</code></p>
<p>Show what this command would do without doing it.</p>
</li>
<li>
<p><code>--name</code> / <code>-n</code> <em>name</em></p>
<p>Override the name component of the store path. It defaults to the base name of <em>path</em>.</p>
</li>
</ul>
<p><strong>Logging-related options:</strong></p>
<ul>
<li>
<p><code>--debug</code></p>
<p>Set the logging verbosity level to 'debug'.</p>
</li>
<li>
<p><code>--log-format</code> <em>format</em></p>
<p>Set the format of log output; one of <code>raw</code>, <code>internal-json</code>, <code>bar</code> or <code>bar-with-logs</code>.</p>
</li>
<li>
<p><code>--print-build-logs</code> / <code>-L</code></p>
<p>Print full build logs on standard error.</p>
</li>
<li>
<p><code>--quiet</code></p>
<p>Decrease the logging verbosity level.</p>
</li>
<li>
<p><code>--verbose</code> / <code>-v</code></p>
<p>Increase the logging verbosity level.</p>
</li>
</ul>
<p><strong>Miscellaneous global options:</strong></p>
<ul>
<li>
<p><code>--help</code></p>
<p>Show usage information.</p>
</li>
<li>
<p><code>--offline</code></p>
<p>Disable substituters and consider all previously downloaded files up-to-date.</p>
</li>
<li>
<p><code>--option</code> <em>name</em> <em>value</em></p>
<p>Set the Nix configuration setting <em>name</em> to <em>value</em> (overriding <code>nix.conf</code>).</p>
</li>
<li>
<p><code>--refresh</code></p>
<p>Consider all previously downloaded files out-of-date.</p>
</li>
<li>
<p><code>--version</code></p>
<p>Show version information.</p>
</li>
</ul>
<p><strong>Options to override configuration settings:</strong></p>
<ul>
<li>
<p><code>--accept-flake-config</code></p>
<p>Enable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--access-tokens</code> <em>value</em></p>
<p>Set the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--allow-dirty</code></p>
<p>Enable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--allow-import-from-derivation</code></p>
<p>Enable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--allow-new-privileges</code></p>
<p>Enable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--allow-symlinked-store</code></p>
<p>Enable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--allow-unsafe-native-code-during-evaluation</code></p>
<p>Enable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--allowed-impure-host-deps</code> <em>value</em></p>
<p>Set the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--allowed-uris</code> <em>value</em></p>
<p>Set the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--allowed-users</code> <em>value</em></p>
<p>Set the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--auto-allocate-uids</code></p>
<p>Enable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--auto-optimise-store</code></p>
<p>Enable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt</code> <em>value</em></p>
<p>Set the <code>bash-prompt</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-prefix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-prefix</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-suffix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-suffix</code> setting.</p>
</li>
<li>
<p><code>--build-hook</code> <em>value</em></p>
<p>Set the <code>build-hook</code> setting.</p>
</li>
<li>
<p><code>--build-poll-interval</code> <em>value</em></p>
<p>Set the <code>build-poll-interval</code> setting.</p>
</li>
<li>
<p><code>--build-users-group</code> <em>value</em></p>
<p>Set the <code>build-users-group</code> setting.</p>
</li>
<li>
<p><code>--builders</code> <em>value</em></p>
<p>Set the <code>builders</code> setting.</p>
</li>
<li>
<p><code>--builders-use-substitutes</code></p>
<p>Enable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--commit-lockfile-summary</code> <em>value</em></p>
<p>Set the <code>commit-lockfile-summary</code> setting.</p>
</li>
<li>
<p><code>--compress-build-log</code></p>
<p>Enable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--connect-timeout</code> <em>value</em></p>
<p>Set the <code>connect-timeout</code> setting.</p>
</li>
<li>
<p><code>--cores</code> <em>value</em></p>
<p>Set the <code>cores</code> setting.</p>
</li>
<li>
<p><code>--diff-hook</code> <em>value</em></p>
<p>Set the <code>diff-hook</code> setting.</p>
</li>
<li>
<p><code>--download-attempts</code> <em>value</em></p>
<p>Set the <code>download-attempts</code> setting.</p>
</li>
<li>
<p><code>--download-speed</code> <em>value</em></p>
<p>Set the <code>download-speed</code> setting.</p>
</li>
<li>
<p><code>--eval-cache</code></p>
<p>Enable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--experimental-features</code> <em>value</em></p>
<p>Set the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-access-tokens</code> <em>value</em></p>
<p>Append to the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-impure-host-deps</code> <em>value</em></p>
<p>Append to the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-uris</code> <em>value</em></p>
<p>Append to the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-users</code> <em>value</em></p>
<p>Append to the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--extra-experimental-features</code> <em>value</em></p>
<p>Append to the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-extra-platforms</code> <em>value</em></p>
<p>Append to the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-hashed-mirrors</code> <em>value</em></p>
<p>Append to the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--extra-ignored-acls</code> <em>value</em></p>
<p>Append to the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--extra-nix-path</code> <em>value</em></p>
<p>Append to the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--extra-platforms</code> <em>value</em></p>
<p>Set the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-plugin-files</code> <em>value</em></p>
<p>Append to the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--extra-sandbox-paths</code> <em>value</em></p>
<p>Append to the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--extra-secret-key-files</code> <em>value</em></p>
<p>Append to the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--extra-substituters</code> <em>value</em></p>
<p>Append to the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-system-features</code> <em>value</em></p>
<p>Append to the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-public-keys</code> <em>value</em></p>
<p>Append to the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-substituters</code> <em>value</em></p>
<p>Append to the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-users</code> <em>value</em></p>
<p>Append to the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--fallback</code></p>
<p>Enable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--filter-syscalls</code></p>
<p>Enable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--flake-registry</code> <em>value</em></p>
<p>Set the <code>flake-registry</code> setting.</p>
</li>
<li>
<p><code>--fsync-metadata</code></p>
<p>Enable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--gc-reserved-space</code> <em>value</em></p>
<p>Set the <code>gc-reserved-space</code> setting.</p>
</li>
<li>
<p><code>--hashed-mirrors</code> <em>value</em></p>
<p>Set the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--http-connections</code> <em>value</em></p>
<p>Set the <code>http-connections</code> setting.</p>
</li>
<li>
<p><code>--http2</code></p>
<p>Enable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--id-count</code> <em>value</em></p>
<p>Set the <code>id-count</code> setting.</p>
</li>
<li>
<p><code>--ignore-try</code></p>
<p>Enable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--ignored-acls</code> <em>value</em></p>
<p>Set the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--impersonate-linux-26</code></p>
<p>Enable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--keep-build-log</code></p>
<p>Enable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--keep-derivations</code></p>
<p>Enable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-env-derivations</code></p>
<p>Enable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-failed</code></p>
<p>Enable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--keep-going</code></p>
<p>Enable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--keep-outputs</code></p>
<p>Enable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--log-lines</code> <em>value</em></p>
<p>Set the <code>log-lines</code> setting.</p>
</li>
<li>
<p><code>--max-build-log-size</code> <em>value</em></p>
<p>Set the <code>max-build-log-size</code> setting.</p>
</li>
<li>
<p><code>--max-free</code> <em>value</em></p>
<p>Set the <code>max-free</code> setting.</p>
</li>
<li>
<p><code>--max-jobs</code> <em>value</em></p>
<p>Set the <code>max-jobs</code> setting.</p>
</li>
<li>
<p><code>--max-silent-time</code> <em>value</em></p>
<p>Set the <code>max-silent-time</code> setting.</p>
</li>
<li>
<p><code>--min-free</code> <em>value</em></p>
<p>Set the <code>min-free</code> setting.</p>
</li>
<li>
<p><code>--min-free-check-interval</code> <em>value</em></p>
<p>Set the <code>min-free-check-interval</code> setting.</p>
</li>
<li>
<p><code>--nar-buffer-size</code> <em>value</em></p>
<p>Set the <code>nar-buffer-size</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-negative-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-negative-ttl</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-positive-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-positive-ttl</code> setting.</p>
</li>
<li>
<p><code>--netrc-file</code> <em>value</em></p>
<p>Set the <code>netrc-file</code> setting.</p>
</li>
<li>
<p><code>--nix-path</code> <em>value</em></p>
<p>Set the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--no-accept-flake-config</code></p>
<p>Disable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--no-allow-dirty</code></p>
<p>Disable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--no-allow-import-from-derivation</code></p>
<p>Disable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--no-allow-new-privileges</code></p>
<p>Disable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--no-allow-symlinked-store</code></p>
<p>Disable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--no-allow-unsafe-native-code-during-evaluation</code></p>
<p>Disable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--no-auto-allocate-uids</code></p>
<p>Disable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--no-auto-optimise-store</code></p>
<p>Disable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--no-builders-use-substitutes</code></p>
<p>Disable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--no-compress-build-log</code></p>
<p>Disable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-eval-cache</code></p>
<p>Disable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--no-fallback</code></p>
<p>Disable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--no-filter-syscalls</code></p>
<p>Disable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--no-fsync-metadata</code></p>
<p>Disable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--no-http2</code></p>
<p>Disable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--no-ignore-try</code></p>
<p>Disable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--no-impersonate-linux-26</code></p>
<p>Disable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--no-keep-build-log</code></p>
<p>Disable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-keep-derivations</code></p>
<p>Disable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-env-derivations</code></p>
<p>Disable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-failed</code></p>
<p>Disable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--no-keep-going</code></p>
<p>Disable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--no-keep-outputs</code></p>
<p>Disable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--no-preallocate-contents</code></p>
<p>Disable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--no-print-missing</code></p>
<p>Disable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--no-pure-eval</code></p>
<p>Disable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--no-require-sigs</code></p>
<p>Disable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--no-restrict-eval</code></p>
<p>Disable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--no-run-diff-hook</code></p>
<p>Disable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--no-sandbox</code></p>
<p>Disable sandboxing.</p>
</li>
<li>
<p><code>--no-sandbox-fallback</code></p>
<p>Disable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--no-show-trace</code></p>
<p>Disable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--no-substitute</code></p>
<p>Disable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--no-sync-before-registering</code></p>
<p>Disable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--no-trace-function-calls</code></p>
<p>Disable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--no-trace-verbose</code></p>
<p>Disable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--no-use-case-hack</code></p>
<p>Disable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--no-use-cgroups</code></p>
<p>Disable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--no-use-registries</code></p>
<p>Disable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--no-use-sqlite-wal</code></p>
<p>Disable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--no-warn-dirty</code></p>
<p>Disable the <code>warn-dirty</code> setting.</p>
</li>
<li>
<p><code>--plugin-files</code> <em>value</em></p>
<p>Set the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--post-build-hook</code> <em>value</em></p>
<p>Set the <code>post-build-hook</code> setting.</p>
</li>
<li>
<p><code>--pre-build-hook</code> <em>value</em></p>
<p>Set the <code>pre-build-hook</code> setting.</p>
</li>
<li>
<p><code>--preallocate-contents</code></p>
<p>Enable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--print-missing</code></p>
<p>Enable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--pure-eval</code></p>
<p>Enable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--relaxed-sandbox</code></p>
<p>Enable sandboxing, but allow builds to disable it.</p>
</li>
<li>
<p><code>--require-sigs</code></p>
<p>Enable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--restrict-eval</code></p>
<p>Enable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--run-diff-hook</code></p>
<p>Enable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--sandbox</code></p>
<p>Enable sandboxing.</p>
</li>
<li>
<p><code>--sandbox-build-dir</code> <em>value</em></p>
<p>Set the <code>sandbox-build-dir</code> setting.</p>
</li>
<li>
<p><code>--sandbox-dev-shm-size</code> <em>value</em></p>
<p>Set the <code>sandbox-dev-shm-size</code> setting.</p>
</li>
<li>
<p><code>--sandbox-fallback</code></p>
<p>Enable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--sandbox-paths</code> <em>value</em></p>
<p>Set the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--secret-key-files</code> <em>value</em></p>
<p>Set the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--show-trace</code></p>
<p>Enable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--stalled-download-timeout</code> <em>value</em></p>
<p>Set the <code>stalled-download-timeout</code> setting.</p>
</li>
<li>
<p><code>--start-id</code> <em>value</em></p>
<p>Set the <code>start-id</code> setting.</p>
</li>
<li>
<p><code>--store</code> <em>value</em></p>
<p>Set the <code>store</code> setting.</p>
</li>
<li>
<p><code>--substitute</code></p>
<p>Enable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--substituters</code> <em>value</em></p>
<p>Set the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--sync-before-registering</code></p>
<p>Enable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--system</code> <em>value</em></p>
<p>Set the <code>system</code> setting.</p>
</li>
<li>
<p><code>--system-features</code> <em>value</em></p>
<p>Set the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--tarball-ttl</code> <em>value</em></p>
<p>Set the <code>tarball-ttl</code> setting.</p>
</li>
<li>
<p><code>--timeout</code> <em>value</em></p>
<p>Set the <code>timeout</code> setting.</p>
</li>
<li>
<p><code>--trace-function-calls</code></p>
<p>Enable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--trace-verbose</code></p>
<p>Enable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--trusted-public-keys</code> <em>value</em></p>
<p>Set the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--trusted-substituters</code> <em>value</em></p>
<p>Set the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--trusted-users</code> <em>value</em></p>
<p>Set the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--use-case-hack</code></p>
<p>Enable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--use-cgroups</code></p>
<p>Enable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--use-registries</code></p>
<p>Enable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--use-sqlite-wal</code></p>
<p>Enable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--user-agent-suffix</code> <em>value</em></p>
<p>Set the <code>user-agent-suffix</code> setting.</p>
</li>
<li>
<p><code>--warn-dirty</code></p>
<p>Enable the <code>warn-dirty</code> setting.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p><strong>Warning</strong> <br />
This program is <strong>experimental</strong> and its interface is subject to change.</p>
</blockquote>
<h1 id="name-76"><a class="header" href="#name-76">Name</a></h1>
<p><code>nix store add-path</code> - add a path to the Nix store</p>
<h1 id="synopsis-107"><a class="header" href="#synopsis-107">Synopsis</a></h1>
<p><code>nix store add-path</code> [<em>option</em>...] <em>path</em></p>
<h1 id="description-93"><a class="header" href="#description-93">Description</a></h1>
<p>Copy <em>path</em> to the Nix store, and print the resulting store path on
standard output.</p>
<blockquote>
<p><strong>Warning</strong></p>
<p>The resulting store path is not registered as a garbage
collector root, so it could be deleted before you have a
chance to register it.</p>
</blockquote>
<h1 id="examples-72"><a class="header" href="#examples-72">Examples</a></h1>
<p>Add a directory to the store:</p>
<pre><code class="language-console"># mkdir dir
# echo foo &gt; dir/bar

# nix store add-path ./dir
/nix/store/6pmjx56pm94n66n4qw1nff0y1crm8nqg-dir

# cat /nix/store/6pmjx56pm94n66n4qw1nff0y1crm8nqg-dir/bar
foo
</code></pre>
<h1 id="options-56"><a class="header" href="#options-56">Options</a></h1>
<ul>
<li>
<p><code>--dry-run</code></p>
<p>Show what this command would do without doing it.</p>
</li>
<li>
<p><code>--name</code> / <code>-n</code> <em>name</em></p>
<p>Override the name component of the store path. It defaults to the base name of <em>path</em>.</p>
</li>
</ul>
<p><strong>Logging-related options:</strong></p>
<ul>
<li>
<p><code>--debug</code></p>
<p>Set the logging verbosity level to 'debug'.</p>
</li>
<li>
<p><code>--log-format</code> <em>format</em></p>
<p>Set the format of log output; one of <code>raw</code>, <code>internal-json</code>, <code>bar</code> or <code>bar-with-logs</code>.</p>
</li>
<li>
<p><code>--print-build-logs</code> / <code>-L</code></p>
<p>Print full build logs on standard error.</p>
</li>
<li>
<p><code>--quiet</code></p>
<p>Decrease the logging verbosity level.</p>
</li>
<li>
<p><code>--verbose</code> / <code>-v</code></p>
<p>Increase the logging verbosity level.</p>
</li>
</ul>
<p><strong>Miscellaneous global options:</strong></p>
<ul>
<li>
<p><code>--help</code></p>
<p>Show usage information.</p>
</li>
<li>
<p><code>--offline</code></p>
<p>Disable substituters and consider all previously downloaded files up-to-date.</p>
</li>
<li>
<p><code>--option</code> <em>name</em> <em>value</em></p>
<p>Set the Nix configuration setting <em>name</em> to <em>value</em> (overriding <code>nix.conf</code>).</p>
</li>
<li>
<p><code>--refresh</code></p>
<p>Consider all previously downloaded files out-of-date.</p>
</li>
<li>
<p><code>--version</code></p>
<p>Show version information.</p>
</li>
</ul>
<p><strong>Options to override configuration settings:</strong></p>
<ul>
<li>
<p><code>--accept-flake-config</code></p>
<p>Enable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--access-tokens</code> <em>value</em></p>
<p>Set the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--allow-dirty</code></p>
<p>Enable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--allow-import-from-derivation</code></p>
<p>Enable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--allow-new-privileges</code></p>
<p>Enable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--allow-symlinked-store</code></p>
<p>Enable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--allow-unsafe-native-code-during-evaluation</code></p>
<p>Enable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--allowed-impure-host-deps</code> <em>value</em></p>
<p>Set the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--allowed-uris</code> <em>value</em></p>
<p>Set the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--allowed-users</code> <em>value</em></p>
<p>Set the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--auto-allocate-uids</code></p>
<p>Enable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--auto-optimise-store</code></p>
<p>Enable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt</code> <em>value</em></p>
<p>Set the <code>bash-prompt</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-prefix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-prefix</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-suffix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-suffix</code> setting.</p>
</li>
<li>
<p><code>--build-hook</code> <em>value</em></p>
<p>Set the <code>build-hook</code> setting.</p>
</li>
<li>
<p><code>--build-poll-interval</code> <em>value</em></p>
<p>Set the <code>build-poll-interval</code> setting.</p>
</li>
<li>
<p><code>--build-users-group</code> <em>value</em></p>
<p>Set the <code>build-users-group</code> setting.</p>
</li>
<li>
<p><code>--builders</code> <em>value</em></p>
<p>Set the <code>builders</code> setting.</p>
</li>
<li>
<p><code>--builders-use-substitutes</code></p>
<p>Enable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--commit-lockfile-summary</code> <em>value</em></p>
<p>Set the <code>commit-lockfile-summary</code> setting.</p>
</li>
<li>
<p><code>--compress-build-log</code></p>
<p>Enable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--connect-timeout</code> <em>value</em></p>
<p>Set the <code>connect-timeout</code> setting.</p>
</li>
<li>
<p><code>--cores</code> <em>value</em></p>
<p>Set the <code>cores</code> setting.</p>
</li>
<li>
<p><code>--diff-hook</code> <em>value</em></p>
<p>Set the <code>diff-hook</code> setting.</p>
</li>
<li>
<p><code>--download-attempts</code> <em>value</em></p>
<p>Set the <code>download-attempts</code> setting.</p>
</li>
<li>
<p><code>--download-speed</code> <em>value</em></p>
<p>Set the <code>download-speed</code> setting.</p>
</li>
<li>
<p><code>--eval-cache</code></p>
<p>Enable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--experimental-features</code> <em>value</em></p>
<p>Set the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-access-tokens</code> <em>value</em></p>
<p>Append to the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-impure-host-deps</code> <em>value</em></p>
<p>Append to the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-uris</code> <em>value</em></p>
<p>Append to the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-users</code> <em>value</em></p>
<p>Append to the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--extra-experimental-features</code> <em>value</em></p>
<p>Append to the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-extra-platforms</code> <em>value</em></p>
<p>Append to the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-hashed-mirrors</code> <em>value</em></p>
<p>Append to the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--extra-ignored-acls</code> <em>value</em></p>
<p>Append to the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--extra-nix-path</code> <em>value</em></p>
<p>Append to the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--extra-platforms</code> <em>value</em></p>
<p>Set the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-plugin-files</code> <em>value</em></p>
<p>Append to the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--extra-sandbox-paths</code> <em>value</em></p>
<p>Append to the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--extra-secret-key-files</code> <em>value</em></p>
<p>Append to the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--extra-substituters</code> <em>value</em></p>
<p>Append to the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-system-features</code> <em>value</em></p>
<p>Append to the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-public-keys</code> <em>value</em></p>
<p>Append to the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-substituters</code> <em>value</em></p>
<p>Append to the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-users</code> <em>value</em></p>
<p>Append to the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--fallback</code></p>
<p>Enable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--filter-syscalls</code></p>
<p>Enable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--flake-registry</code> <em>value</em></p>
<p>Set the <code>flake-registry</code> setting.</p>
</li>
<li>
<p><code>--fsync-metadata</code></p>
<p>Enable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--gc-reserved-space</code> <em>value</em></p>
<p>Set the <code>gc-reserved-space</code> setting.</p>
</li>
<li>
<p><code>--hashed-mirrors</code> <em>value</em></p>
<p>Set the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--http-connections</code> <em>value</em></p>
<p>Set the <code>http-connections</code> setting.</p>
</li>
<li>
<p><code>--http2</code></p>
<p>Enable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--id-count</code> <em>value</em></p>
<p>Set the <code>id-count</code> setting.</p>
</li>
<li>
<p><code>--ignore-try</code></p>
<p>Enable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--ignored-acls</code> <em>value</em></p>
<p>Set the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--impersonate-linux-26</code></p>
<p>Enable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--keep-build-log</code></p>
<p>Enable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--keep-derivations</code></p>
<p>Enable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-env-derivations</code></p>
<p>Enable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-failed</code></p>
<p>Enable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--keep-going</code></p>
<p>Enable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--keep-outputs</code></p>
<p>Enable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--log-lines</code> <em>value</em></p>
<p>Set the <code>log-lines</code> setting.</p>
</li>
<li>
<p><code>--max-build-log-size</code> <em>value</em></p>
<p>Set the <code>max-build-log-size</code> setting.</p>
</li>
<li>
<p><code>--max-free</code> <em>value</em></p>
<p>Set the <code>max-free</code> setting.</p>
</li>
<li>
<p><code>--max-jobs</code> <em>value</em></p>
<p>Set the <code>max-jobs</code> setting.</p>
</li>
<li>
<p><code>--max-silent-time</code> <em>value</em></p>
<p>Set the <code>max-silent-time</code> setting.</p>
</li>
<li>
<p><code>--min-free</code> <em>value</em></p>
<p>Set the <code>min-free</code> setting.</p>
</li>
<li>
<p><code>--min-free-check-interval</code> <em>value</em></p>
<p>Set the <code>min-free-check-interval</code> setting.</p>
</li>
<li>
<p><code>--nar-buffer-size</code> <em>value</em></p>
<p>Set the <code>nar-buffer-size</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-negative-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-negative-ttl</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-positive-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-positive-ttl</code> setting.</p>
</li>
<li>
<p><code>--netrc-file</code> <em>value</em></p>
<p>Set the <code>netrc-file</code> setting.</p>
</li>
<li>
<p><code>--nix-path</code> <em>value</em></p>
<p>Set the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--no-accept-flake-config</code></p>
<p>Disable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--no-allow-dirty</code></p>
<p>Disable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--no-allow-import-from-derivation</code></p>
<p>Disable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--no-allow-new-privileges</code></p>
<p>Disable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--no-allow-symlinked-store</code></p>
<p>Disable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--no-allow-unsafe-native-code-during-evaluation</code></p>
<p>Disable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--no-auto-allocate-uids</code></p>
<p>Disable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--no-auto-optimise-store</code></p>
<p>Disable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--no-builders-use-substitutes</code></p>
<p>Disable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--no-compress-build-log</code></p>
<p>Disable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-eval-cache</code></p>
<p>Disable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--no-fallback</code></p>
<p>Disable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--no-filter-syscalls</code></p>
<p>Disable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--no-fsync-metadata</code></p>
<p>Disable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--no-http2</code></p>
<p>Disable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--no-ignore-try</code></p>
<p>Disable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--no-impersonate-linux-26</code></p>
<p>Disable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--no-keep-build-log</code></p>
<p>Disable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-keep-derivations</code></p>
<p>Disable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-env-derivations</code></p>
<p>Disable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-failed</code></p>
<p>Disable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--no-keep-going</code></p>
<p>Disable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--no-keep-outputs</code></p>
<p>Disable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--no-preallocate-contents</code></p>
<p>Disable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--no-print-missing</code></p>
<p>Disable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--no-pure-eval</code></p>
<p>Disable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--no-require-sigs</code></p>
<p>Disable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--no-restrict-eval</code></p>
<p>Disable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--no-run-diff-hook</code></p>
<p>Disable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--no-sandbox</code></p>
<p>Disable sandboxing.</p>
</li>
<li>
<p><code>--no-sandbox-fallback</code></p>
<p>Disable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--no-show-trace</code></p>
<p>Disable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--no-substitute</code></p>
<p>Disable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--no-sync-before-registering</code></p>
<p>Disable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--no-trace-function-calls</code></p>
<p>Disable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--no-trace-verbose</code></p>
<p>Disable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--no-use-case-hack</code></p>
<p>Disable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--no-use-cgroups</code></p>
<p>Disable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--no-use-registries</code></p>
<p>Disable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--no-use-sqlite-wal</code></p>
<p>Disable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--no-warn-dirty</code></p>
<p>Disable the <code>warn-dirty</code> setting.</p>
</li>
<li>
<p><code>--plugin-files</code> <em>value</em></p>
<p>Set the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--post-build-hook</code> <em>value</em></p>
<p>Set the <code>post-build-hook</code> setting.</p>
</li>
<li>
<p><code>--pre-build-hook</code> <em>value</em></p>
<p>Set the <code>pre-build-hook</code> setting.</p>
</li>
<li>
<p><code>--preallocate-contents</code></p>
<p>Enable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--print-missing</code></p>
<p>Enable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--pure-eval</code></p>
<p>Enable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--relaxed-sandbox</code></p>
<p>Enable sandboxing, but allow builds to disable it.</p>
</li>
<li>
<p><code>--require-sigs</code></p>
<p>Enable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--restrict-eval</code></p>
<p>Enable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--run-diff-hook</code></p>
<p>Enable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--sandbox</code></p>
<p>Enable sandboxing.</p>
</li>
<li>
<p><code>--sandbox-build-dir</code> <em>value</em></p>
<p>Set the <code>sandbox-build-dir</code> setting.</p>
</li>
<li>
<p><code>--sandbox-dev-shm-size</code> <em>value</em></p>
<p>Set the <code>sandbox-dev-shm-size</code> setting.</p>
</li>
<li>
<p><code>--sandbox-fallback</code></p>
<p>Enable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--sandbox-paths</code> <em>value</em></p>
<p>Set the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--secret-key-files</code> <em>value</em></p>
<p>Set the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--show-trace</code></p>
<p>Enable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--stalled-download-timeout</code> <em>value</em></p>
<p>Set the <code>stalled-download-timeout</code> setting.</p>
</li>
<li>
<p><code>--start-id</code> <em>value</em></p>
<p>Set the <code>start-id</code> setting.</p>
</li>
<li>
<p><code>--store</code> <em>value</em></p>
<p>Set the <code>store</code> setting.</p>
</li>
<li>
<p><code>--substitute</code></p>
<p>Enable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--substituters</code> <em>value</em></p>
<p>Set the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--sync-before-registering</code></p>
<p>Enable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--system</code> <em>value</em></p>
<p>Set the <code>system</code> setting.</p>
</li>
<li>
<p><code>--system-features</code> <em>value</em></p>
<p>Set the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--tarball-ttl</code> <em>value</em></p>
<p>Set the <code>tarball-ttl</code> setting.</p>
</li>
<li>
<p><code>--timeout</code> <em>value</em></p>
<p>Set the <code>timeout</code> setting.</p>
</li>
<li>
<p><code>--trace-function-calls</code></p>
<p>Enable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--trace-verbose</code></p>
<p>Enable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--trusted-public-keys</code> <em>value</em></p>
<p>Set the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--trusted-substituters</code> <em>value</em></p>
<p>Set the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--trusted-users</code> <em>value</em></p>
<p>Set the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--use-case-hack</code></p>
<p>Enable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--use-cgroups</code></p>
<p>Enable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--use-registries</code></p>
<p>Enable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--use-sqlite-wal</code></p>
<p>Enable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--user-agent-suffix</code> <em>value</em></p>
<p>Set the <code>user-agent-suffix</code> setting.</p>
</li>
<li>
<p><code>--warn-dirty</code></p>
<p>Enable the <code>warn-dirty</code> setting.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p><strong>Warning</strong> <br />
This program is <strong>experimental</strong> and its interface is subject to change.</p>
</blockquote>
<h1 id="name-77"><a class="header" href="#name-77">Name</a></h1>
<p><code>nix store cat</code> - print the contents of a file in the Nix store on stdout</p>
<h1 id="synopsis-108"><a class="header" href="#synopsis-108">Synopsis</a></h1>
<p><code>nix store cat</code> [<em>option</em>...] <em>path</em></p>
<h1 id="examples-73"><a class="header" href="#examples-73">Examples</a></h1>
<ul>
<li>
<p>Show the contents of a file in a binary cache:</p>
<pre><code class="language-console"># nix store cat --store https://cache.nixos.org/ \
    /nix/store/0i2jd68mp5g6h2sa5k9c85rb80sn8hi9-hello-2.10/bin/hello | hexdump -C | head -n1
00000000  7f 45 4c 46 02 01 01 00  00 00 00 00 00 00 00 00  |.ELF............|
</code></pre>
</li>
</ul>
<h1 id="description-94"><a class="header" href="#description-94">Description</a></h1>
<p>This command prints on standard output the contents of the regular
file <em>path</em> in a Nix store. <em>path</em> can be a top-level store path or
any file inside a store path.</p>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p><strong>Warning</strong> <br />
This program is <strong>experimental</strong> and its interface is subject to change.</p>
</blockquote>
<h1 id="name-78"><a class="header" href="#name-78">Name</a></h1>
<p><code>nix store copy-log</code> - copy build logs between Nix stores</p>
<h1 id="synopsis-109"><a class="header" href="#synopsis-109">Synopsis</a></h1>
<p><code>nix store copy-log</code> [<em>option</em>...] <em>installables</em>...</p>
<h1 id="examples-74"><a class="header" href="#examples-74">Examples</a></h1>
<ul>
<li>
<p>To copy the build log of the <code>hello</code> package from
https://cache.nixos.org to the local store:</p>
<pre><code class="language-console"># nix store copy-log --from https://cache.nixos.org --eval-store auto nixpkgs#hello
</code></pre>
<p>You can verify that the log is available locally:</p>
<pre><code class="language-console"># nix log --substituters '' nixpkgs#hello
</code></pre>
<p>(The flag <code>--substituters ''</code> avoids querying
<code>https://cache.nixos.org</code> for the log.)</p>
</li>
<li>
<p>To copy the log for a specific <a href="command-ref/new-cli/../../glossary.html#gloss-store-derivation">store derivation</a> via SSH:</p>
<pre><code class="language-console"># nix store copy-log --to ssh-ng://machine /nix/store/ilgm50plpmcgjhcp33z6n4qbnpqfhxym-glibc-2.33-59.drv
</code></pre>
</li>
</ul>
<h1 id="description-95"><a class="header" href="#description-95">Description</a></h1>
<p><code>nix store copy-log</code> copies build logs between two Nix stores. The
source store is specified using <code>--from</code> and the destination using
<code>--to</code>. If one of these is omitted, it defaults to the local store.</p>
<h1 id="options-57"><a class="header" href="#options-57">Options</a></h1>
<ul>
<li>
<p><code>--from</code> <em>store-uri</em></p>
<p>URL of the source Nix store.</p>
</li>
<li>
<p><code>--to</code> <em>store-uri</em></p>
<p>URL of the destination Nix store.</p>
</li>
</ul>
<p><strong>Common evaluation options:</strong></p>
<ul>
<li>
<p><code>--arg</code> <em>name</em> <em>expr</em></p>
<p>Pass the value <em>expr</em> as the argument <em>name</em> to Nix functions.</p>
</li>
<li>
<p><code>--argstr</code> <em>name</em> <em>string</em></p>
<p>Pass the string <em>string</em> as the argument <em>name</em> to Nix functions.</p>
</li>
<li>
<p><code>--debugger</code></p>
<p>Start an interactive environment if evaluation fails.</p>
</li>
<li>
<p><code>--eval-store</code> <em>store-url</em></p>
<p>The Nix store to use for evaluations.</p>
</li>
<li>
<p><code>--impure</code></p>
<p>Allow access to mutable paths and repositories.</p>
</li>
<li>
<p><code>--include</code> / <code>-I</code> <em>path</em></p>
<p>Add <em>path</em> to the Nix search path. The Nix search path is
initialized from the colon-separated <a href="command-ref/new-cli/../../command-ref/env-common.html#env-NIX_PATH"><code>NIX_PATH</code></a> environment
variable, and is used to look up the location of Nix expressions using <a href="command-ref/new-cli/../../language/values.html#type-path">paths</a> enclosed in angle
brackets (i.e., <code>&lt;nixpkgs&gt;</code>).</p>
<p>For instance, passing</p>
<pre><code>-I /home/eelco/Dev
-I /etc/nixos
</code></pre>
<p>will cause Nix to look for paths relative to <code>/home/eelco/Dev</code> and
<code>/etc/nixos</code>, in that order. This is equivalent to setting the
<code>NIX_PATH</code> environment variable to</p>
<pre><code>/home/eelco/Dev:/etc/nixos
</code></pre>
<p>It is also possible to match paths against a prefix. For example,
passing</p>
<pre><code>-I nixpkgs=/home/eelco/Dev/nixpkgs-branch
-I /etc/nixos
</code></pre>
<p>will cause Nix to search for <code>&lt;nixpkgs/path&gt;</code> in
<code>/home/eelco/Dev/nixpkgs-branch/path</code> and <code>/etc/nixos/nixpkgs/path</code>.</p>
<p>If a path in the Nix search path starts with <code>http://</code> or <code>https://</code>,
it is interpreted as the URL of a tarball that will be downloaded and
unpacked to a temporary location. The tarball must consist of a single
top-level directory. For example, passing</p>
<pre><code>-I nixpkgs=https://github.com/NixOS/nixpkgs/archive/master.tar.gz
</code></pre>
<p>tells Nix to download and use the current contents of the <code>master</code>
branch in the <code>nixpkgs</code> repository.</p>
<p>The URLs of the tarballs from the official <code>nixos.org</code> channels
(see <a href="command-ref/new-cli/../nix-channel.html">the manual page for <code>nix-channel</code></a>) can be
abbreviated as <code>channel:&lt;channel-name&gt;</code>. For instance, the
following two flags are equivalent:</p>
<pre><code>-I nixpkgs=channel:nixos-21.05
-I nixpkgs=https://nixos.org/channels/nixos-21.05/nixexprs.tar.xz
</code></pre>
<p>You can also fetch source trees using <a href="command-ref/new-cli/./nix3-flake.html#url-like-syntax">flake URLs</a> and add them to the
search path. For instance,</p>
<pre><code>-I nixpkgs=flake:nixpkgs
</code></pre>
<p>specifies that the prefix <code>nixpkgs</code> shall refer to the source tree
downloaded from the <code>nixpkgs</code> entry in the flake registry. Similarly,</p>
<pre><code>-I nixpkgs=flake:github:NixOS/nixpkgs/nixos-22.05
</code></pre>
<p>makes <code>&lt;nixpkgs&gt;</code> refer to a particular branch of the
<code>NixOS/nixpkgs</code> repository on GitHub.</p>
</li>
<li>
<p><code>--override-flake</code> <em>original-ref</em> <em>resolved-ref</em></p>
<p>Override the flake registries, redirecting <em>original-ref</em> to <em>resolved-ref</em>.</p>
</li>
</ul>
<p><strong>Common flake-related options:</strong></p>
<ul>
<li>
<p><code>--commit-lock-file</code></p>
<p>Commit changes to the flake's lock file.</p>
</li>
<li>
<p><code>--inputs-from</code> <em>flake-url</em></p>
<p>Use the inputs of the specified flake as registry entries.</p>
</li>
<li>
<p><code>--no-registries</code></p>
<p>Don't allow lookups in the flake registries. This option is deprecated; use <code>--no-use-registries</code>.</p>
</li>
<li>
<p><code>--no-update-lock-file</code></p>
<p>Do not allow any updates to the flake's lock file.</p>
</li>
<li>
<p><code>--no-write-lock-file</code></p>
<p>Do not write the flake's newly generated lock file.</p>
</li>
<li>
<p><code>--override-input</code> <em>input-path</em> <em>flake-url</em></p>
<p>Override a specific flake input (e.g. <code>dwarffs/nixpkgs</code>). This implies <code>--no-write-lock-file</code>.</p>
</li>
<li>
<p><code>--recreate-lock-file</code></p>
<p>Recreate the flake's lock file from scratch.</p>
</li>
<li>
<p><code>--update-input</code> <em>input-path</em></p>
<p>Update a specific flake input (ignoring its previous entry in the lock file).</p>
</li>
</ul>
<p><strong>Logging-related options:</strong></p>
<ul>
<li>
<p><code>--debug</code></p>
<p>Set the logging verbosity level to 'debug'.</p>
</li>
<li>
<p><code>--log-format</code> <em>format</em></p>
<p>Set the format of log output; one of <code>raw</code>, <code>internal-json</code>, <code>bar</code> or <code>bar-with-logs</code>.</p>
</li>
<li>
<p><code>--print-build-logs</code> / <code>-L</code></p>
<p>Print full build logs on standard error.</p>
</li>
<li>
<p><code>--quiet</code></p>
<p>Decrease the logging verbosity level.</p>
</li>
<li>
<p><code>--verbose</code> / <code>-v</code></p>
<p>Increase the logging verbosity level.</p>
</li>
</ul>
<p><strong>Miscellaneous global options:</strong></p>
<ul>
<li>
<p><code>--help</code></p>
<p>Show usage information.</p>
</li>
<li>
<p><code>--offline</code></p>
<p>Disable substituters and consider all previously downloaded files up-to-date.</p>
</li>
<li>
<p><code>--option</code> <em>name</em> <em>value</em></p>
<p>Set the Nix configuration setting <em>name</em> to <em>value</em> (overriding <code>nix.conf</code>).</p>
</li>
<li>
<p><code>--refresh</code></p>
<p>Consider all previously downloaded files out-of-date.</p>
</li>
<li>
<p><code>--version</code></p>
<p>Show version information.</p>
</li>
</ul>
<p><strong>Options that change the interpretation of installables:</strong></p>
<ul>
<li>
<p><code>--derivation</code></p>
<p>Operate on the <a href="command-ref/new-cli/../../glossary.html#gloss-store-derivation">store derivation</a> rather than its outputs.</p>
</li>
<li>
<p><code>--expr</code> <em>expr</em></p>
<p>Interpret installables as attribute paths relative to the Nix expression <em>expr</em>.</p>
</li>
<li>
<p><code>--file</code> / <code>-f</code> <em>file</em></p>
<p>Interpret installables as attribute paths relative to the Nix expression stored in <em>file</em>. If <em>file</em> is the character -, then a Nix expression will be read from standard input. Implies <code>--impure</code>.</p>
</li>
</ul>
<p><strong>Options to override configuration settings:</strong></p>
<ul>
<li>
<p><code>--accept-flake-config</code></p>
<p>Enable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--access-tokens</code> <em>value</em></p>
<p>Set the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--allow-dirty</code></p>
<p>Enable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--allow-import-from-derivation</code></p>
<p>Enable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--allow-new-privileges</code></p>
<p>Enable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--allow-symlinked-store</code></p>
<p>Enable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--allow-unsafe-native-code-during-evaluation</code></p>
<p>Enable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--allowed-impure-host-deps</code> <em>value</em></p>
<p>Set the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--allowed-uris</code> <em>value</em></p>
<p>Set the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--allowed-users</code> <em>value</em></p>
<p>Set the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--auto-allocate-uids</code></p>
<p>Enable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--auto-optimise-store</code></p>
<p>Enable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt</code> <em>value</em></p>
<p>Set the <code>bash-prompt</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-prefix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-prefix</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-suffix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-suffix</code> setting.</p>
</li>
<li>
<p><code>--build-hook</code> <em>value</em></p>
<p>Set the <code>build-hook</code> setting.</p>
</li>
<li>
<p><code>--build-poll-interval</code> <em>value</em></p>
<p>Set the <code>build-poll-interval</code> setting.</p>
</li>
<li>
<p><code>--build-users-group</code> <em>value</em></p>
<p>Set the <code>build-users-group</code> setting.</p>
</li>
<li>
<p><code>--builders</code> <em>value</em></p>
<p>Set the <code>builders</code> setting.</p>
</li>
<li>
<p><code>--builders-use-substitutes</code></p>
<p>Enable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--commit-lockfile-summary</code> <em>value</em></p>
<p>Set the <code>commit-lockfile-summary</code> setting.</p>
</li>
<li>
<p><code>--compress-build-log</code></p>
<p>Enable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--connect-timeout</code> <em>value</em></p>
<p>Set the <code>connect-timeout</code> setting.</p>
</li>
<li>
<p><code>--cores</code> <em>value</em></p>
<p>Set the <code>cores</code> setting.</p>
</li>
<li>
<p><code>--diff-hook</code> <em>value</em></p>
<p>Set the <code>diff-hook</code> setting.</p>
</li>
<li>
<p><code>--download-attempts</code> <em>value</em></p>
<p>Set the <code>download-attempts</code> setting.</p>
</li>
<li>
<p><code>--download-speed</code> <em>value</em></p>
<p>Set the <code>download-speed</code> setting.</p>
</li>
<li>
<p><code>--eval-cache</code></p>
<p>Enable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--experimental-features</code> <em>value</em></p>
<p>Set the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-access-tokens</code> <em>value</em></p>
<p>Append to the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-impure-host-deps</code> <em>value</em></p>
<p>Append to the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-uris</code> <em>value</em></p>
<p>Append to the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-users</code> <em>value</em></p>
<p>Append to the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--extra-experimental-features</code> <em>value</em></p>
<p>Append to the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-extra-platforms</code> <em>value</em></p>
<p>Append to the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-hashed-mirrors</code> <em>value</em></p>
<p>Append to the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--extra-ignored-acls</code> <em>value</em></p>
<p>Append to the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--extra-nix-path</code> <em>value</em></p>
<p>Append to the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--extra-platforms</code> <em>value</em></p>
<p>Set the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-plugin-files</code> <em>value</em></p>
<p>Append to the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--extra-sandbox-paths</code> <em>value</em></p>
<p>Append to the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--extra-secret-key-files</code> <em>value</em></p>
<p>Append to the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--extra-substituters</code> <em>value</em></p>
<p>Append to the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-system-features</code> <em>value</em></p>
<p>Append to the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-public-keys</code> <em>value</em></p>
<p>Append to the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-substituters</code> <em>value</em></p>
<p>Append to the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-users</code> <em>value</em></p>
<p>Append to the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--fallback</code></p>
<p>Enable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--filter-syscalls</code></p>
<p>Enable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--flake-registry</code> <em>value</em></p>
<p>Set the <code>flake-registry</code> setting.</p>
</li>
<li>
<p><code>--fsync-metadata</code></p>
<p>Enable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--gc-reserved-space</code> <em>value</em></p>
<p>Set the <code>gc-reserved-space</code> setting.</p>
</li>
<li>
<p><code>--hashed-mirrors</code> <em>value</em></p>
<p>Set the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--http-connections</code> <em>value</em></p>
<p>Set the <code>http-connections</code> setting.</p>
</li>
<li>
<p><code>--http2</code></p>
<p>Enable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--id-count</code> <em>value</em></p>
<p>Set the <code>id-count</code> setting.</p>
</li>
<li>
<p><code>--ignore-try</code></p>
<p>Enable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--ignored-acls</code> <em>value</em></p>
<p>Set the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--impersonate-linux-26</code></p>
<p>Enable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--keep-build-log</code></p>
<p>Enable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--keep-derivations</code></p>
<p>Enable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-env-derivations</code></p>
<p>Enable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-failed</code></p>
<p>Enable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--keep-going</code></p>
<p>Enable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--keep-outputs</code></p>
<p>Enable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--log-lines</code> <em>value</em></p>
<p>Set the <code>log-lines</code> setting.</p>
</li>
<li>
<p><code>--max-build-log-size</code> <em>value</em></p>
<p>Set the <code>max-build-log-size</code> setting.</p>
</li>
<li>
<p><code>--max-free</code> <em>value</em></p>
<p>Set the <code>max-free</code> setting.</p>
</li>
<li>
<p><code>--max-jobs</code> <em>value</em></p>
<p>Set the <code>max-jobs</code> setting.</p>
</li>
<li>
<p><code>--max-silent-time</code> <em>value</em></p>
<p>Set the <code>max-silent-time</code> setting.</p>
</li>
<li>
<p><code>--min-free</code> <em>value</em></p>
<p>Set the <code>min-free</code> setting.</p>
</li>
<li>
<p><code>--min-free-check-interval</code> <em>value</em></p>
<p>Set the <code>min-free-check-interval</code> setting.</p>
</li>
<li>
<p><code>--nar-buffer-size</code> <em>value</em></p>
<p>Set the <code>nar-buffer-size</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-negative-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-negative-ttl</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-positive-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-positive-ttl</code> setting.</p>
</li>
<li>
<p><code>--netrc-file</code> <em>value</em></p>
<p>Set the <code>netrc-file</code> setting.</p>
</li>
<li>
<p><code>--nix-path</code> <em>value</em></p>
<p>Set the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--no-accept-flake-config</code></p>
<p>Disable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--no-allow-dirty</code></p>
<p>Disable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--no-allow-import-from-derivation</code></p>
<p>Disable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--no-allow-new-privileges</code></p>
<p>Disable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--no-allow-symlinked-store</code></p>
<p>Disable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--no-allow-unsafe-native-code-during-evaluation</code></p>
<p>Disable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--no-auto-allocate-uids</code></p>
<p>Disable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--no-auto-optimise-store</code></p>
<p>Disable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--no-builders-use-substitutes</code></p>
<p>Disable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--no-compress-build-log</code></p>
<p>Disable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-eval-cache</code></p>
<p>Disable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--no-fallback</code></p>
<p>Disable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--no-filter-syscalls</code></p>
<p>Disable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--no-fsync-metadata</code></p>
<p>Disable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--no-http2</code></p>
<p>Disable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--no-ignore-try</code></p>
<p>Disable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--no-impersonate-linux-26</code></p>
<p>Disable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--no-keep-build-log</code></p>
<p>Disable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-keep-derivations</code></p>
<p>Disable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-env-derivations</code></p>
<p>Disable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-failed</code></p>
<p>Disable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--no-keep-going</code></p>
<p>Disable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--no-keep-outputs</code></p>
<p>Disable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--no-preallocate-contents</code></p>
<p>Disable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--no-print-missing</code></p>
<p>Disable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--no-pure-eval</code></p>
<p>Disable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--no-require-sigs</code></p>
<p>Disable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--no-restrict-eval</code></p>
<p>Disable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--no-run-diff-hook</code></p>
<p>Disable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--no-sandbox</code></p>
<p>Disable sandboxing.</p>
</li>
<li>
<p><code>--no-sandbox-fallback</code></p>
<p>Disable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--no-show-trace</code></p>
<p>Disable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--no-substitute</code></p>
<p>Disable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--no-sync-before-registering</code></p>
<p>Disable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--no-trace-function-calls</code></p>
<p>Disable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--no-trace-verbose</code></p>
<p>Disable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--no-use-case-hack</code></p>
<p>Disable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--no-use-cgroups</code></p>
<p>Disable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--no-use-registries</code></p>
<p>Disable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--no-use-sqlite-wal</code></p>
<p>Disable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--no-warn-dirty</code></p>
<p>Disable the <code>warn-dirty</code> setting.</p>
</li>
<li>
<p><code>--plugin-files</code> <em>value</em></p>
<p>Set the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--post-build-hook</code> <em>value</em></p>
<p>Set the <code>post-build-hook</code> setting.</p>
</li>
<li>
<p><code>--pre-build-hook</code> <em>value</em></p>
<p>Set the <code>pre-build-hook</code> setting.</p>
</li>
<li>
<p><code>--preallocate-contents</code></p>
<p>Enable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--print-missing</code></p>
<p>Enable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--pure-eval</code></p>
<p>Enable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--relaxed-sandbox</code></p>
<p>Enable sandboxing, but allow builds to disable it.</p>
</li>
<li>
<p><code>--require-sigs</code></p>
<p>Enable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--restrict-eval</code></p>
<p>Enable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--run-diff-hook</code></p>
<p>Enable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--sandbox</code></p>
<p>Enable sandboxing.</p>
</li>
<li>
<p><code>--sandbox-build-dir</code> <em>value</em></p>
<p>Set the <code>sandbox-build-dir</code> setting.</p>
</li>
<li>
<p><code>--sandbox-dev-shm-size</code> <em>value</em></p>
<p>Set the <code>sandbox-dev-shm-size</code> setting.</p>
</li>
<li>
<p><code>--sandbox-fallback</code></p>
<p>Enable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--sandbox-paths</code> <em>value</em></p>
<p>Set the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--secret-key-files</code> <em>value</em></p>
<p>Set the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--show-trace</code></p>
<p>Enable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--stalled-download-timeout</code> <em>value</em></p>
<p>Set the <code>stalled-download-timeout</code> setting.</p>
</li>
<li>
<p><code>--start-id</code> <em>value</em></p>
<p>Set the <code>start-id</code> setting.</p>
</li>
<li>
<p><code>--store</code> <em>value</em></p>
<p>Set the <code>store</code> setting.</p>
</li>
<li>
<p><code>--substitute</code></p>
<p>Enable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--substituters</code> <em>value</em></p>
<p>Set the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--sync-before-registering</code></p>
<p>Enable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--system</code> <em>value</em></p>
<p>Set the <code>system</code> setting.</p>
</li>
<li>
<p><code>--system-features</code> <em>value</em></p>
<p>Set the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--tarball-ttl</code> <em>value</em></p>
<p>Set the <code>tarball-ttl</code> setting.</p>
</li>
<li>
<p><code>--timeout</code> <em>value</em></p>
<p>Set the <code>timeout</code> setting.</p>
</li>
<li>
<p><code>--trace-function-calls</code></p>
<p>Enable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--trace-verbose</code></p>
<p>Enable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--trusted-public-keys</code> <em>value</em></p>
<p>Set the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--trusted-substituters</code> <em>value</em></p>
<p>Set the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--trusted-users</code> <em>value</em></p>
<p>Set the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--use-case-hack</code></p>
<p>Enable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--use-cgroups</code></p>
<p>Enable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--use-registries</code></p>
<p>Enable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--use-sqlite-wal</code></p>
<p>Enable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--user-agent-suffix</code> <em>value</em></p>
<p>Set the <code>user-agent-suffix</code> setting.</p>
</li>
<li>
<p><code>--warn-dirty</code></p>
<p>Enable the <code>warn-dirty</code> setting.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p><strong>Warning</strong> <br />
This program is <strong>experimental</strong> and its interface is subject to change.</p>
</blockquote>
<h1 id="name-79"><a class="header" href="#name-79">Name</a></h1>
<p><code>nix store copy-sigs</code> - copy store path signatures from substituters</p>
<h1 id="synopsis-110"><a class="header" href="#synopsis-110">Synopsis</a></h1>
<p><code>nix store copy-sigs</code> [<em>option</em>...] <em>installables</em>...</p>
<h1 id="options-58"><a class="header" href="#options-58">Options</a></h1>
<ul>
<li>
<p><code>--substituter</code> / <code>-s</code> <em>store-uri</em></p>
<p>Copy signatures from the specified store.</p>
</li>
</ul>
<p><strong>Common evaluation options:</strong></p>
<ul>
<li>
<p><code>--arg</code> <em>name</em> <em>expr</em></p>
<p>Pass the value <em>expr</em> as the argument <em>name</em> to Nix functions.</p>
</li>
<li>
<p><code>--argstr</code> <em>name</em> <em>string</em></p>
<p>Pass the string <em>string</em> as the argument <em>name</em> to Nix functions.</p>
</li>
<li>
<p><code>--debugger</code></p>
<p>Start an interactive environment if evaluation fails.</p>
</li>
<li>
<p><code>--eval-store</code> <em>store-url</em></p>
<p>The Nix store to use for evaluations.</p>
</li>
<li>
<p><code>--impure</code></p>
<p>Allow access to mutable paths and repositories.</p>
</li>
<li>
<p><code>--include</code> / <code>-I</code> <em>path</em></p>
<p>Add <em>path</em> to the Nix search path. The Nix search path is
initialized from the colon-separated <a href="command-ref/new-cli/../../command-ref/env-common.html#env-NIX_PATH"><code>NIX_PATH</code></a> environment
variable, and is used to look up the location of Nix expressions using <a href="command-ref/new-cli/../../language/values.html#type-path">paths</a> enclosed in angle
brackets (i.e., <code>&lt;nixpkgs&gt;</code>).</p>
<p>For instance, passing</p>
<pre><code>-I /home/eelco/Dev
-I /etc/nixos
</code></pre>
<p>will cause Nix to look for paths relative to <code>/home/eelco/Dev</code> and
<code>/etc/nixos</code>, in that order. This is equivalent to setting the
<code>NIX_PATH</code> environment variable to</p>
<pre><code>/home/eelco/Dev:/etc/nixos
</code></pre>
<p>It is also possible to match paths against a prefix. For example,
passing</p>
<pre><code>-I nixpkgs=/home/eelco/Dev/nixpkgs-branch
-I /etc/nixos
</code></pre>
<p>will cause Nix to search for <code>&lt;nixpkgs/path&gt;</code> in
<code>/home/eelco/Dev/nixpkgs-branch/path</code> and <code>/etc/nixos/nixpkgs/path</code>.</p>
<p>If a path in the Nix search path starts with <code>http://</code> or <code>https://</code>,
it is interpreted as the URL of a tarball that will be downloaded and
unpacked to a temporary location. The tarball must consist of a single
top-level directory. For example, passing</p>
<pre><code>-I nixpkgs=https://github.com/NixOS/nixpkgs/archive/master.tar.gz
</code></pre>
<p>tells Nix to download and use the current contents of the <code>master</code>
branch in the <code>nixpkgs</code> repository.</p>
<p>The URLs of the tarballs from the official <code>nixos.org</code> channels
(see <a href="command-ref/new-cli/../nix-channel.html">the manual page for <code>nix-channel</code></a>) can be
abbreviated as <code>channel:&lt;channel-name&gt;</code>. For instance, the
following two flags are equivalent:</p>
<pre><code>-I nixpkgs=channel:nixos-21.05
-I nixpkgs=https://nixos.org/channels/nixos-21.05/nixexprs.tar.xz
</code></pre>
<p>You can also fetch source trees using <a href="command-ref/new-cli/./nix3-flake.html#url-like-syntax">flake URLs</a> and add them to the
search path. For instance,</p>
<pre><code>-I nixpkgs=flake:nixpkgs
</code></pre>
<p>specifies that the prefix <code>nixpkgs</code> shall refer to the source tree
downloaded from the <code>nixpkgs</code> entry in the flake registry. Similarly,</p>
<pre><code>-I nixpkgs=flake:github:NixOS/nixpkgs/nixos-22.05
</code></pre>
<p>makes <code>&lt;nixpkgs&gt;</code> refer to a particular branch of the
<code>NixOS/nixpkgs</code> repository on GitHub.</p>
</li>
<li>
<p><code>--override-flake</code> <em>original-ref</em> <em>resolved-ref</em></p>
<p>Override the flake registries, redirecting <em>original-ref</em> to <em>resolved-ref</em>.</p>
</li>
</ul>
<p><strong>Common flake-related options:</strong></p>
<ul>
<li>
<p><code>--commit-lock-file</code></p>
<p>Commit changes to the flake's lock file.</p>
</li>
<li>
<p><code>--inputs-from</code> <em>flake-url</em></p>
<p>Use the inputs of the specified flake as registry entries.</p>
</li>
<li>
<p><code>--no-registries</code></p>
<p>Don't allow lookups in the flake registries. This option is deprecated; use <code>--no-use-registries</code>.</p>
</li>
<li>
<p><code>--no-update-lock-file</code></p>
<p>Do not allow any updates to the flake's lock file.</p>
</li>
<li>
<p><code>--no-write-lock-file</code></p>
<p>Do not write the flake's newly generated lock file.</p>
</li>
<li>
<p><code>--override-input</code> <em>input-path</em> <em>flake-url</em></p>
<p>Override a specific flake input (e.g. <code>dwarffs/nixpkgs</code>). This implies <code>--no-write-lock-file</code>.</p>
</li>
<li>
<p><code>--recreate-lock-file</code></p>
<p>Recreate the flake's lock file from scratch.</p>
</li>
<li>
<p><code>--update-input</code> <em>input-path</em></p>
<p>Update a specific flake input (ignoring its previous entry in the lock file).</p>
</li>
</ul>
<p><strong>Logging-related options:</strong></p>
<ul>
<li>
<p><code>--debug</code></p>
<p>Set the logging verbosity level to 'debug'.</p>
</li>
<li>
<p><code>--log-format</code> <em>format</em></p>
<p>Set the format of log output; one of <code>raw</code>, <code>internal-json</code>, <code>bar</code> or <code>bar-with-logs</code>.</p>
</li>
<li>
<p><code>--print-build-logs</code> / <code>-L</code></p>
<p>Print full build logs on standard error.</p>
</li>
<li>
<p><code>--quiet</code></p>
<p>Decrease the logging verbosity level.</p>
</li>
<li>
<p><code>--verbose</code> / <code>-v</code></p>
<p>Increase the logging verbosity level.</p>
</li>
</ul>
<p><strong>Miscellaneous global options:</strong></p>
<ul>
<li>
<p><code>--help</code></p>
<p>Show usage information.</p>
</li>
<li>
<p><code>--offline</code></p>
<p>Disable substituters and consider all previously downloaded files up-to-date.</p>
</li>
<li>
<p><code>--option</code> <em>name</em> <em>value</em></p>
<p>Set the Nix configuration setting <em>name</em> to <em>value</em> (overriding <code>nix.conf</code>).</p>
</li>
<li>
<p><code>--refresh</code></p>
<p>Consider all previously downloaded files out-of-date.</p>
</li>
<li>
<p><code>--version</code></p>
<p>Show version information.</p>
</li>
</ul>
<p><strong>Options that change the interpretation of installables:</strong></p>
<ul>
<li>
<p><code>--all</code></p>
<p>Apply the operation to every store path.</p>
</li>
<li>
<p><code>--derivation</code></p>
<p>Operate on the <a href="command-ref/new-cli/../../glossary.html#gloss-store-derivation">store derivation</a> rather than its outputs.</p>
</li>
<li>
<p><code>--expr</code> <em>expr</em></p>
<p>Interpret installables as attribute paths relative to the Nix expression <em>expr</em>.</p>
</li>
<li>
<p><code>--file</code> / <code>-f</code> <em>file</em></p>
<p>Interpret installables as attribute paths relative to the Nix expression stored in <em>file</em>. If <em>file</em> is the character -, then a Nix expression will be read from standard input. Implies <code>--impure</code>.</p>
</li>
<li>
<p><code>--recursive</code> / <code>-r</code></p>
<p>Apply operation to closure of the specified paths.</p>
</li>
</ul>
<p><strong>Options to override configuration settings:</strong></p>
<ul>
<li>
<p><code>--accept-flake-config</code></p>
<p>Enable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--access-tokens</code> <em>value</em></p>
<p>Set the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--allow-dirty</code></p>
<p>Enable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--allow-import-from-derivation</code></p>
<p>Enable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--allow-new-privileges</code></p>
<p>Enable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--allow-symlinked-store</code></p>
<p>Enable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--allow-unsafe-native-code-during-evaluation</code></p>
<p>Enable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--allowed-impure-host-deps</code> <em>value</em></p>
<p>Set the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--allowed-uris</code> <em>value</em></p>
<p>Set the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--allowed-users</code> <em>value</em></p>
<p>Set the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--auto-allocate-uids</code></p>
<p>Enable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--auto-optimise-store</code></p>
<p>Enable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt</code> <em>value</em></p>
<p>Set the <code>bash-prompt</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-prefix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-prefix</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-suffix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-suffix</code> setting.</p>
</li>
<li>
<p><code>--build-hook</code> <em>value</em></p>
<p>Set the <code>build-hook</code> setting.</p>
</li>
<li>
<p><code>--build-poll-interval</code> <em>value</em></p>
<p>Set the <code>build-poll-interval</code> setting.</p>
</li>
<li>
<p><code>--build-users-group</code> <em>value</em></p>
<p>Set the <code>build-users-group</code> setting.</p>
</li>
<li>
<p><code>--builders</code> <em>value</em></p>
<p>Set the <code>builders</code> setting.</p>
</li>
<li>
<p><code>--builders-use-substitutes</code></p>
<p>Enable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--commit-lockfile-summary</code> <em>value</em></p>
<p>Set the <code>commit-lockfile-summary</code> setting.</p>
</li>
<li>
<p><code>--compress-build-log</code></p>
<p>Enable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--connect-timeout</code> <em>value</em></p>
<p>Set the <code>connect-timeout</code> setting.</p>
</li>
<li>
<p><code>--cores</code> <em>value</em></p>
<p>Set the <code>cores</code> setting.</p>
</li>
<li>
<p><code>--diff-hook</code> <em>value</em></p>
<p>Set the <code>diff-hook</code> setting.</p>
</li>
<li>
<p><code>--download-attempts</code> <em>value</em></p>
<p>Set the <code>download-attempts</code> setting.</p>
</li>
<li>
<p><code>--download-speed</code> <em>value</em></p>
<p>Set the <code>download-speed</code> setting.</p>
</li>
<li>
<p><code>--eval-cache</code></p>
<p>Enable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--experimental-features</code> <em>value</em></p>
<p>Set the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-access-tokens</code> <em>value</em></p>
<p>Append to the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-impure-host-deps</code> <em>value</em></p>
<p>Append to the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-uris</code> <em>value</em></p>
<p>Append to the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-users</code> <em>value</em></p>
<p>Append to the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--extra-experimental-features</code> <em>value</em></p>
<p>Append to the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-extra-platforms</code> <em>value</em></p>
<p>Append to the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-hashed-mirrors</code> <em>value</em></p>
<p>Append to the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--extra-ignored-acls</code> <em>value</em></p>
<p>Append to the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--extra-nix-path</code> <em>value</em></p>
<p>Append to the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--extra-platforms</code> <em>value</em></p>
<p>Set the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-plugin-files</code> <em>value</em></p>
<p>Append to the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--extra-sandbox-paths</code> <em>value</em></p>
<p>Append to the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--extra-secret-key-files</code> <em>value</em></p>
<p>Append to the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--extra-substituters</code> <em>value</em></p>
<p>Append to the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-system-features</code> <em>value</em></p>
<p>Append to the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-public-keys</code> <em>value</em></p>
<p>Append to the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-substituters</code> <em>value</em></p>
<p>Append to the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-users</code> <em>value</em></p>
<p>Append to the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--fallback</code></p>
<p>Enable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--filter-syscalls</code></p>
<p>Enable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--flake-registry</code> <em>value</em></p>
<p>Set the <code>flake-registry</code> setting.</p>
</li>
<li>
<p><code>--fsync-metadata</code></p>
<p>Enable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--gc-reserved-space</code> <em>value</em></p>
<p>Set the <code>gc-reserved-space</code> setting.</p>
</li>
<li>
<p><code>--hashed-mirrors</code> <em>value</em></p>
<p>Set the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--http-connections</code> <em>value</em></p>
<p>Set the <code>http-connections</code> setting.</p>
</li>
<li>
<p><code>--http2</code></p>
<p>Enable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--id-count</code> <em>value</em></p>
<p>Set the <code>id-count</code> setting.</p>
</li>
<li>
<p><code>--ignore-try</code></p>
<p>Enable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--ignored-acls</code> <em>value</em></p>
<p>Set the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--impersonate-linux-26</code></p>
<p>Enable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--keep-build-log</code></p>
<p>Enable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--keep-derivations</code></p>
<p>Enable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-env-derivations</code></p>
<p>Enable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-failed</code></p>
<p>Enable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--keep-going</code></p>
<p>Enable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--keep-outputs</code></p>
<p>Enable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--log-lines</code> <em>value</em></p>
<p>Set the <code>log-lines</code> setting.</p>
</li>
<li>
<p><code>--max-build-log-size</code> <em>value</em></p>
<p>Set the <code>max-build-log-size</code> setting.</p>
</li>
<li>
<p><code>--max-free</code> <em>value</em></p>
<p>Set the <code>max-free</code> setting.</p>
</li>
<li>
<p><code>--max-jobs</code> <em>value</em></p>
<p>Set the <code>max-jobs</code> setting.</p>
</li>
<li>
<p><code>--max-silent-time</code> <em>value</em></p>
<p>Set the <code>max-silent-time</code> setting.</p>
</li>
<li>
<p><code>--min-free</code> <em>value</em></p>
<p>Set the <code>min-free</code> setting.</p>
</li>
<li>
<p><code>--min-free-check-interval</code> <em>value</em></p>
<p>Set the <code>min-free-check-interval</code> setting.</p>
</li>
<li>
<p><code>--nar-buffer-size</code> <em>value</em></p>
<p>Set the <code>nar-buffer-size</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-negative-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-negative-ttl</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-positive-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-positive-ttl</code> setting.</p>
</li>
<li>
<p><code>--netrc-file</code> <em>value</em></p>
<p>Set the <code>netrc-file</code> setting.</p>
</li>
<li>
<p><code>--nix-path</code> <em>value</em></p>
<p>Set the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--no-accept-flake-config</code></p>
<p>Disable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--no-allow-dirty</code></p>
<p>Disable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--no-allow-import-from-derivation</code></p>
<p>Disable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--no-allow-new-privileges</code></p>
<p>Disable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--no-allow-symlinked-store</code></p>
<p>Disable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--no-allow-unsafe-native-code-during-evaluation</code></p>
<p>Disable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--no-auto-allocate-uids</code></p>
<p>Disable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--no-auto-optimise-store</code></p>
<p>Disable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--no-builders-use-substitutes</code></p>
<p>Disable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--no-compress-build-log</code></p>
<p>Disable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-eval-cache</code></p>
<p>Disable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--no-fallback</code></p>
<p>Disable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--no-filter-syscalls</code></p>
<p>Disable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--no-fsync-metadata</code></p>
<p>Disable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--no-http2</code></p>
<p>Disable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--no-ignore-try</code></p>
<p>Disable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--no-impersonate-linux-26</code></p>
<p>Disable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--no-keep-build-log</code></p>
<p>Disable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-keep-derivations</code></p>
<p>Disable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-env-derivations</code></p>
<p>Disable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-failed</code></p>
<p>Disable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--no-keep-going</code></p>
<p>Disable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--no-keep-outputs</code></p>
<p>Disable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--no-preallocate-contents</code></p>
<p>Disable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--no-print-missing</code></p>
<p>Disable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--no-pure-eval</code></p>
<p>Disable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--no-require-sigs</code></p>
<p>Disable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--no-restrict-eval</code></p>
<p>Disable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--no-run-diff-hook</code></p>
<p>Disable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--no-sandbox</code></p>
<p>Disable sandboxing.</p>
</li>
<li>
<p><code>--no-sandbox-fallback</code></p>
<p>Disable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--no-show-trace</code></p>
<p>Disable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--no-substitute</code></p>
<p>Disable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--no-sync-before-registering</code></p>
<p>Disable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--no-trace-function-calls</code></p>
<p>Disable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--no-trace-verbose</code></p>
<p>Disable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--no-use-case-hack</code></p>
<p>Disable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--no-use-cgroups</code></p>
<p>Disable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--no-use-registries</code></p>
<p>Disable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--no-use-sqlite-wal</code></p>
<p>Disable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--no-warn-dirty</code></p>
<p>Disable the <code>warn-dirty</code> setting.</p>
</li>
<li>
<p><code>--plugin-files</code> <em>value</em></p>
<p>Set the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--post-build-hook</code> <em>value</em></p>
<p>Set the <code>post-build-hook</code> setting.</p>
</li>
<li>
<p><code>--pre-build-hook</code> <em>value</em></p>
<p>Set the <code>pre-build-hook</code> setting.</p>
</li>
<li>
<p><code>--preallocate-contents</code></p>
<p>Enable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--print-missing</code></p>
<p>Enable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--pure-eval</code></p>
<p>Enable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--relaxed-sandbox</code></p>
<p>Enable sandboxing, but allow builds to disable it.</p>
</li>
<li>
<p><code>--require-sigs</code></p>
<p>Enable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--restrict-eval</code></p>
<p>Enable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--run-diff-hook</code></p>
<p>Enable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--sandbox</code></p>
<p>Enable sandboxing.</p>
</li>
<li>
<p><code>--sandbox-build-dir</code> <em>value</em></p>
<p>Set the <code>sandbox-build-dir</code> setting.</p>
</li>
<li>
<p><code>--sandbox-dev-shm-size</code> <em>value</em></p>
<p>Set the <code>sandbox-dev-shm-size</code> setting.</p>
</li>
<li>
<p><code>--sandbox-fallback</code></p>
<p>Enable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--sandbox-paths</code> <em>value</em></p>
<p>Set the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--secret-key-files</code> <em>value</em></p>
<p>Set the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--show-trace</code></p>
<p>Enable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--stalled-download-timeout</code> <em>value</em></p>
<p>Set the <code>stalled-download-timeout</code> setting.</p>
</li>
<li>
<p><code>--start-id</code> <em>value</em></p>
<p>Set the <code>start-id</code> setting.</p>
</li>
<li>
<p><code>--store</code> <em>value</em></p>
<p>Set the <code>store</code> setting.</p>
</li>
<li>
<p><code>--substitute</code></p>
<p>Enable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--substituters</code> <em>value</em></p>
<p>Set the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--sync-before-registering</code></p>
<p>Enable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--system</code> <em>value</em></p>
<p>Set the <code>system</code> setting.</p>
</li>
<li>
<p><code>--system-features</code> <em>value</em></p>
<p>Set the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--tarball-ttl</code> <em>value</em></p>
<p>Set the <code>tarball-ttl</code> setting.</p>
</li>
<li>
<p><code>--timeout</code> <em>value</em></p>
<p>Set the <code>timeout</code> setting.</p>
</li>
<li>
<p><code>--trace-function-calls</code></p>
<p>Enable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--trace-verbose</code></p>
<p>Enable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--trusted-public-keys</code> <em>value</em></p>
<p>Set the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--trusted-substituters</code> <em>value</em></p>
<p>Set the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--trusted-users</code> <em>value</em></p>
<p>Set the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--use-case-hack</code></p>
<p>Enable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--use-cgroups</code></p>
<p>Enable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--use-registries</code></p>
<p>Enable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--use-sqlite-wal</code></p>
<p>Enable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--user-agent-suffix</code> <em>value</em></p>
<p>Set the <code>user-agent-suffix</code> setting.</p>
</li>
<li>
<p><code>--warn-dirty</code></p>
<p>Enable the <code>warn-dirty</code> setting.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p><strong>Warning</strong> <br />
This program is <strong>experimental</strong> and its interface is subject to change.</p>
</blockquote>
<h1 id="name-80"><a class="header" href="#name-80">Name</a></h1>
<p><code>nix store delete</code> - delete paths from the Nix store</p>
<h1 id="synopsis-111"><a class="header" href="#synopsis-111">Synopsis</a></h1>
<p><code>nix store delete</code> [<em>option</em>...] <em>installables</em>...</p>
<h1 id="examples-75"><a class="header" href="#examples-75">Examples</a></h1>
<ul>
<li>
<p>Delete a specific store path:</p>
<pre><code class="language-console"># nix store delete /nix/store/yb5q57zxv6hgqql42d5r8b5k5mcq6kay-hello-2.10
</code></pre>
</li>
</ul>
<h1 id="description-96"><a class="header" href="#description-96">Description</a></h1>
<p>This command deletes the store paths specified by <em>installables</em>. ,
but only if it is safe to do so; that is, when the path is not
reachable from a root of the garbage collector. This means that you
can only delete paths that would also be deleted by <code>nix store gc</code>. Thus, <code>nix store delete</code> is a more targeted version of <code>nix store gc</code>.</p>
<p>With the option <code>--ignore-liveness</code>, reachability from the roots is
ignored. However, the path still won't be deleted if there are other
paths in the store that refer to it (i.e., depend on it).</p>
<h1 id="options-59"><a class="header" href="#options-59">Options</a></h1>
<ul>
<li>
<p><code>--ignore-liveness</code></p>
<p>Do not check whether the paths are reachable from a root.</p>
</li>
</ul>
<p><strong>Common evaluation options:</strong></p>
<ul>
<li>
<p><code>--arg</code> <em>name</em> <em>expr</em></p>
<p>Pass the value <em>expr</em> as the argument <em>name</em> to Nix functions.</p>
</li>
<li>
<p><code>--argstr</code> <em>name</em> <em>string</em></p>
<p>Pass the string <em>string</em> as the argument <em>name</em> to Nix functions.</p>
</li>
<li>
<p><code>--debugger</code></p>
<p>Start an interactive environment if evaluation fails.</p>
</li>
<li>
<p><code>--eval-store</code> <em>store-url</em></p>
<p>The Nix store to use for evaluations.</p>
</li>
<li>
<p><code>--impure</code></p>
<p>Allow access to mutable paths and repositories.</p>
</li>
<li>
<p><code>--include</code> / <code>-I</code> <em>path</em></p>
<p>Add <em>path</em> to the Nix search path. The Nix search path is
initialized from the colon-separated <a href="command-ref/new-cli/../../command-ref/env-common.html#env-NIX_PATH"><code>NIX_PATH</code></a> environment
variable, and is used to look up the location of Nix expressions using <a href="command-ref/new-cli/../../language/values.html#type-path">paths</a> enclosed in angle
brackets (i.e., <code>&lt;nixpkgs&gt;</code>).</p>
<p>For instance, passing</p>
<pre><code>-I /home/eelco/Dev
-I /etc/nixos
</code></pre>
<p>will cause Nix to look for paths relative to <code>/home/eelco/Dev</code> and
<code>/etc/nixos</code>, in that order. This is equivalent to setting the
<code>NIX_PATH</code> environment variable to</p>
<pre><code>/home/eelco/Dev:/etc/nixos
</code></pre>
<p>It is also possible to match paths against a prefix. For example,
passing</p>
<pre><code>-I nixpkgs=/home/eelco/Dev/nixpkgs-branch
-I /etc/nixos
</code></pre>
<p>will cause Nix to search for <code>&lt;nixpkgs/path&gt;</code> in
<code>/home/eelco/Dev/nixpkgs-branch/path</code> and <code>/etc/nixos/nixpkgs/path</code>.</p>
<p>If a path in the Nix search path starts with <code>http://</code> or <code>https://</code>,
it is interpreted as the URL of a tarball that will be downloaded and
unpacked to a temporary location. The tarball must consist of a single
top-level directory. For example, passing</p>
<pre><code>-I nixpkgs=https://github.com/NixOS/nixpkgs/archive/master.tar.gz
</code></pre>
<p>tells Nix to download and use the current contents of the <code>master</code>
branch in the <code>nixpkgs</code> repository.</p>
<p>The URLs of the tarballs from the official <code>nixos.org</code> channels
(see <a href="command-ref/new-cli/../nix-channel.html">the manual page for <code>nix-channel</code></a>) can be
abbreviated as <code>channel:&lt;channel-name&gt;</code>. For instance, the
following two flags are equivalent:</p>
<pre><code>-I nixpkgs=channel:nixos-21.05
-I nixpkgs=https://nixos.org/channels/nixos-21.05/nixexprs.tar.xz
</code></pre>
<p>You can also fetch source trees using <a href="command-ref/new-cli/./nix3-flake.html#url-like-syntax">flake URLs</a> and add them to the
search path. For instance,</p>
<pre><code>-I nixpkgs=flake:nixpkgs
</code></pre>
<p>specifies that the prefix <code>nixpkgs</code> shall refer to the source tree
downloaded from the <code>nixpkgs</code> entry in the flake registry. Similarly,</p>
<pre><code>-I nixpkgs=flake:github:NixOS/nixpkgs/nixos-22.05
</code></pre>
<p>makes <code>&lt;nixpkgs&gt;</code> refer to a particular branch of the
<code>NixOS/nixpkgs</code> repository on GitHub.</p>
</li>
<li>
<p><code>--override-flake</code> <em>original-ref</em> <em>resolved-ref</em></p>
<p>Override the flake registries, redirecting <em>original-ref</em> to <em>resolved-ref</em>.</p>
</li>
</ul>
<p><strong>Common flake-related options:</strong></p>
<ul>
<li>
<p><code>--commit-lock-file</code></p>
<p>Commit changes to the flake's lock file.</p>
</li>
<li>
<p><code>--inputs-from</code> <em>flake-url</em></p>
<p>Use the inputs of the specified flake as registry entries.</p>
</li>
<li>
<p><code>--no-registries</code></p>
<p>Don't allow lookups in the flake registries. This option is deprecated; use <code>--no-use-registries</code>.</p>
</li>
<li>
<p><code>--no-update-lock-file</code></p>
<p>Do not allow any updates to the flake's lock file.</p>
</li>
<li>
<p><code>--no-write-lock-file</code></p>
<p>Do not write the flake's newly generated lock file.</p>
</li>
<li>
<p><code>--override-input</code> <em>input-path</em> <em>flake-url</em></p>
<p>Override a specific flake input (e.g. <code>dwarffs/nixpkgs</code>). This implies <code>--no-write-lock-file</code>.</p>
</li>
<li>
<p><code>--recreate-lock-file</code></p>
<p>Recreate the flake's lock file from scratch.</p>
</li>
<li>
<p><code>--update-input</code> <em>input-path</em></p>
<p>Update a specific flake input (ignoring its previous entry in the lock file).</p>
</li>
</ul>
<p><strong>Logging-related options:</strong></p>
<ul>
<li>
<p><code>--debug</code></p>
<p>Set the logging verbosity level to 'debug'.</p>
</li>
<li>
<p><code>--log-format</code> <em>format</em></p>
<p>Set the format of log output; one of <code>raw</code>, <code>internal-json</code>, <code>bar</code> or <code>bar-with-logs</code>.</p>
</li>
<li>
<p><code>--print-build-logs</code> / <code>-L</code></p>
<p>Print full build logs on standard error.</p>
</li>
<li>
<p><code>--quiet</code></p>
<p>Decrease the logging verbosity level.</p>
</li>
<li>
<p><code>--verbose</code> / <code>-v</code></p>
<p>Increase the logging verbosity level.</p>
</li>
</ul>
<p><strong>Miscellaneous global options:</strong></p>
<ul>
<li>
<p><code>--help</code></p>
<p>Show usage information.</p>
</li>
<li>
<p><code>--offline</code></p>
<p>Disable substituters and consider all previously downloaded files up-to-date.</p>
</li>
<li>
<p><code>--option</code> <em>name</em> <em>value</em></p>
<p>Set the Nix configuration setting <em>name</em> to <em>value</em> (overriding <code>nix.conf</code>).</p>
</li>
<li>
<p><code>--refresh</code></p>
<p>Consider all previously downloaded files out-of-date.</p>
</li>
<li>
<p><code>--version</code></p>
<p>Show version information.</p>
</li>
</ul>
<p><strong>Options that change the interpretation of installables:</strong></p>
<ul>
<li>
<p><code>--all</code></p>
<p>Apply the operation to every store path.</p>
</li>
<li>
<p><code>--derivation</code></p>
<p>Operate on the <a href="command-ref/new-cli/../../glossary.html#gloss-store-derivation">store derivation</a> rather than its outputs.</p>
</li>
<li>
<p><code>--expr</code> <em>expr</em></p>
<p>Interpret installables as attribute paths relative to the Nix expression <em>expr</em>.</p>
</li>
<li>
<p><code>--file</code> / <code>-f</code> <em>file</em></p>
<p>Interpret installables as attribute paths relative to the Nix expression stored in <em>file</em>. If <em>file</em> is the character -, then a Nix expression will be read from standard input. Implies <code>--impure</code>.</p>
</li>
<li>
<p><code>--recursive</code> / <code>-r</code></p>
<p>Apply operation to closure of the specified paths.</p>
</li>
</ul>
<p><strong>Options to override configuration settings:</strong></p>
<ul>
<li>
<p><code>--accept-flake-config</code></p>
<p>Enable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--access-tokens</code> <em>value</em></p>
<p>Set the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--allow-dirty</code></p>
<p>Enable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--allow-import-from-derivation</code></p>
<p>Enable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--allow-new-privileges</code></p>
<p>Enable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--allow-symlinked-store</code></p>
<p>Enable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--allow-unsafe-native-code-during-evaluation</code></p>
<p>Enable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--allowed-impure-host-deps</code> <em>value</em></p>
<p>Set the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--allowed-uris</code> <em>value</em></p>
<p>Set the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--allowed-users</code> <em>value</em></p>
<p>Set the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--auto-allocate-uids</code></p>
<p>Enable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--auto-optimise-store</code></p>
<p>Enable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt</code> <em>value</em></p>
<p>Set the <code>bash-prompt</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-prefix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-prefix</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-suffix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-suffix</code> setting.</p>
</li>
<li>
<p><code>--build-hook</code> <em>value</em></p>
<p>Set the <code>build-hook</code> setting.</p>
</li>
<li>
<p><code>--build-poll-interval</code> <em>value</em></p>
<p>Set the <code>build-poll-interval</code> setting.</p>
</li>
<li>
<p><code>--build-users-group</code> <em>value</em></p>
<p>Set the <code>build-users-group</code> setting.</p>
</li>
<li>
<p><code>--builders</code> <em>value</em></p>
<p>Set the <code>builders</code> setting.</p>
</li>
<li>
<p><code>--builders-use-substitutes</code></p>
<p>Enable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--commit-lockfile-summary</code> <em>value</em></p>
<p>Set the <code>commit-lockfile-summary</code> setting.</p>
</li>
<li>
<p><code>--compress-build-log</code></p>
<p>Enable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--connect-timeout</code> <em>value</em></p>
<p>Set the <code>connect-timeout</code> setting.</p>
</li>
<li>
<p><code>--cores</code> <em>value</em></p>
<p>Set the <code>cores</code> setting.</p>
</li>
<li>
<p><code>--diff-hook</code> <em>value</em></p>
<p>Set the <code>diff-hook</code> setting.</p>
</li>
<li>
<p><code>--download-attempts</code> <em>value</em></p>
<p>Set the <code>download-attempts</code> setting.</p>
</li>
<li>
<p><code>--download-speed</code> <em>value</em></p>
<p>Set the <code>download-speed</code> setting.</p>
</li>
<li>
<p><code>--eval-cache</code></p>
<p>Enable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--experimental-features</code> <em>value</em></p>
<p>Set the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-access-tokens</code> <em>value</em></p>
<p>Append to the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-impure-host-deps</code> <em>value</em></p>
<p>Append to the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-uris</code> <em>value</em></p>
<p>Append to the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-users</code> <em>value</em></p>
<p>Append to the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--extra-experimental-features</code> <em>value</em></p>
<p>Append to the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-extra-platforms</code> <em>value</em></p>
<p>Append to the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-hashed-mirrors</code> <em>value</em></p>
<p>Append to the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--extra-ignored-acls</code> <em>value</em></p>
<p>Append to the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--extra-nix-path</code> <em>value</em></p>
<p>Append to the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--extra-platforms</code> <em>value</em></p>
<p>Set the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-plugin-files</code> <em>value</em></p>
<p>Append to the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--extra-sandbox-paths</code> <em>value</em></p>
<p>Append to the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--extra-secret-key-files</code> <em>value</em></p>
<p>Append to the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--extra-substituters</code> <em>value</em></p>
<p>Append to the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-system-features</code> <em>value</em></p>
<p>Append to the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-public-keys</code> <em>value</em></p>
<p>Append to the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-substituters</code> <em>value</em></p>
<p>Append to the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-users</code> <em>value</em></p>
<p>Append to the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--fallback</code></p>
<p>Enable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--filter-syscalls</code></p>
<p>Enable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--flake-registry</code> <em>value</em></p>
<p>Set the <code>flake-registry</code> setting.</p>
</li>
<li>
<p><code>--fsync-metadata</code></p>
<p>Enable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--gc-reserved-space</code> <em>value</em></p>
<p>Set the <code>gc-reserved-space</code> setting.</p>
</li>
<li>
<p><code>--hashed-mirrors</code> <em>value</em></p>
<p>Set the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--http-connections</code> <em>value</em></p>
<p>Set the <code>http-connections</code> setting.</p>
</li>
<li>
<p><code>--http2</code></p>
<p>Enable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--id-count</code> <em>value</em></p>
<p>Set the <code>id-count</code> setting.</p>
</li>
<li>
<p><code>--ignore-try</code></p>
<p>Enable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--ignored-acls</code> <em>value</em></p>
<p>Set the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--impersonate-linux-26</code></p>
<p>Enable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--keep-build-log</code></p>
<p>Enable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--keep-derivations</code></p>
<p>Enable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-env-derivations</code></p>
<p>Enable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-failed</code></p>
<p>Enable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--keep-going</code></p>
<p>Enable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--keep-outputs</code></p>
<p>Enable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--log-lines</code> <em>value</em></p>
<p>Set the <code>log-lines</code> setting.</p>
</li>
<li>
<p><code>--max-build-log-size</code> <em>value</em></p>
<p>Set the <code>max-build-log-size</code> setting.</p>
</li>
<li>
<p><code>--max-free</code> <em>value</em></p>
<p>Set the <code>max-free</code> setting.</p>
</li>
<li>
<p><code>--max-jobs</code> <em>value</em></p>
<p>Set the <code>max-jobs</code> setting.</p>
</li>
<li>
<p><code>--max-silent-time</code> <em>value</em></p>
<p>Set the <code>max-silent-time</code> setting.</p>
</li>
<li>
<p><code>--min-free</code> <em>value</em></p>
<p>Set the <code>min-free</code> setting.</p>
</li>
<li>
<p><code>--min-free-check-interval</code> <em>value</em></p>
<p>Set the <code>min-free-check-interval</code> setting.</p>
</li>
<li>
<p><code>--nar-buffer-size</code> <em>value</em></p>
<p>Set the <code>nar-buffer-size</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-negative-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-negative-ttl</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-positive-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-positive-ttl</code> setting.</p>
</li>
<li>
<p><code>--netrc-file</code> <em>value</em></p>
<p>Set the <code>netrc-file</code> setting.</p>
</li>
<li>
<p><code>--nix-path</code> <em>value</em></p>
<p>Set the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--no-accept-flake-config</code></p>
<p>Disable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--no-allow-dirty</code></p>
<p>Disable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--no-allow-import-from-derivation</code></p>
<p>Disable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--no-allow-new-privileges</code></p>
<p>Disable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--no-allow-symlinked-store</code></p>
<p>Disable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--no-allow-unsafe-native-code-during-evaluation</code></p>
<p>Disable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--no-auto-allocate-uids</code></p>
<p>Disable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--no-auto-optimise-store</code></p>
<p>Disable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--no-builders-use-substitutes</code></p>
<p>Disable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--no-compress-build-log</code></p>
<p>Disable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-eval-cache</code></p>
<p>Disable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--no-fallback</code></p>
<p>Disable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--no-filter-syscalls</code></p>
<p>Disable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--no-fsync-metadata</code></p>
<p>Disable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--no-http2</code></p>
<p>Disable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--no-ignore-try</code></p>
<p>Disable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--no-impersonate-linux-26</code></p>
<p>Disable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--no-keep-build-log</code></p>
<p>Disable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-keep-derivations</code></p>
<p>Disable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-env-derivations</code></p>
<p>Disable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-failed</code></p>
<p>Disable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--no-keep-going</code></p>
<p>Disable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--no-keep-outputs</code></p>
<p>Disable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--no-preallocate-contents</code></p>
<p>Disable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--no-print-missing</code></p>
<p>Disable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--no-pure-eval</code></p>
<p>Disable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--no-require-sigs</code></p>
<p>Disable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--no-restrict-eval</code></p>
<p>Disable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--no-run-diff-hook</code></p>
<p>Disable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--no-sandbox</code></p>
<p>Disable sandboxing.</p>
</li>
<li>
<p><code>--no-sandbox-fallback</code></p>
<p>Disable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--no-show-trace</code></p>
<p>Disable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--no-substitute</code></p>
<p>Disable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--no-sync-before-registering</code></p>
<p>Disable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--no-trace-function-calls</code></p>
<p>Disable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--no-trace-verbose</code></p>
<p>Disable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--no-use-case-hack</code></p>
<p>Disable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--no-use-cgroups</code></p>
<p>Disable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--no-use-registries</code></p>
<p>Disable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--no-use-sqlite-wal</code></p>
<p>Disable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--no-warn-dirty</code></p>
<p>Disable the <code>warn-dirty</code> setting.</p>
</li>
<li>
<p><code>--plugin-files</code> <em>value</em></p>
<p>Set the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--post-build-hook</code> <em>value</em></p>
<p>Set the <code>post-build-hook</code> setting.</p>
</li>
<li>
<p><code>--pre-build-hook</code> <em>value</em></p>
<p>Set the <code>pre-build-hook</code> setting.</p>
</li>
<li>
<p><code>--preallocate-contents</code></p>
<p>Enable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--print-missing</code></p>
<p>Enable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--pure-eval</code></p>
<p>Enable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--relaxed-sandbox</code></p>
<p>Enable sandboxing, but allow builds to disable it.</p>
</li>
<li>
<p><code>--require-sigs</code></p>
<p>Enable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--restrict-eval</code></p>
<p>Enable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--run-diff-hook</code></p>
<p>Enable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--sandbox</code></p>
<p>Enable sandboxing.</p>
</li>
<li>
<p><code>--sandbox-build-dir</code> <em>value</em></p>
<p>Set the <code>sandbox-build-dir</code> setting.</p>
</li>
<li>
<p><code>--sandbox-dev-shm-size</code> <em>value</em></p>
<p>Set the <code>sandbox-dev-shm-size</code> setting.</p>
</li>
<li>
<p><code>--sandbox-fallback</code></p>
<p>Enable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--sandbox-paths</code> <em>value</em></p>
<p>Set the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--secret-key-files</code> <em>value</em></p>
<p>Set the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--show-trace</code></p>
<p>Enable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--stalled-download-timeout</code> <em>value</em></p>
<p>Set the <code>stalled-download-timeout</code> setting.</p>
</li>
<li>
<p><code>--start-id</code> <em>value</em></p>
<p>Set the <code>start-id</code> setting.</p>
</li>
<li>
<p><code>--store</code> <em>value</em></p>
<p>Set the <code>store</code> setting.</p>
</li>
<li>
<p><code>--substitute</code></p>
<p>Enable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--substituters</code> <em>value</em></p>
<p>Set the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--sync-before-registering</code></p>
<p>Enable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--system</code> <em>value</em></p>
<p>Set the <code>system</code> setting.</p>
</li>
<li>
<p><code>--system-features</code> <em>value</em></p>
<p>Set the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--tarball-ttl</code> <em>value</em></p>
<p>Set the <code>tarball-ttl</code> setting.</p>
</li>
<li>
<p><code>--timeout</code> <em>value</em></p>
<p>Set the <code>timeout</code> setting.</p>
</li>
<li>
<p><code>--trace-function-calls</code></p>
<p>Enable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--trace-verbose</code></p>
<p>Enable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--trusted-public-keys</code> <em>value</em></p>
<p>Set the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--trusted-substituters</code> <em>value</em></p>
<p>Set the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--trusted-users</code> <em>value</em></p>
<p>Set the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--use-case-hack</code></p>
<p>Enable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--use-cgroups</code></p>
<p>Enable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--use-registries</code></p>
<p>Enable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--use-sqlite-wal</code></p>
<p>Enable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--user-agent-suffix</code> <em>value</em></p>
<p>Set the <code>user-agent-suffix</code> setting.</p>
</li>
<li>
<p><code>--warn-dirty</code></p>
<p>Enable the <code>warn-dirty</code> setting.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p><strong>Warning</strong> <br />
This program is <strong>experimental</strong> and its interface is subject to change.</p>
</blockquote>
<h1 id="name-81"><a class="header" href="#name-81">Name</a></h1>
<p><code>nix store diff-closures</code> - show what packages and versions were added and removed between two closures</p>
<h1 id="synopsis-112"><a class="header" href="#synopsis-112">Synopsis</a></h1>
<p><code>nix store diff-closures</code> [<em>option</em>...] <em>before</em> <em>after</em></p>
<h1 id="examples-76"><a class="header" href="#examples-76">Examples</a></h1>
<ul>
<li>
<p>Show what got added and removed between two versions of the NixOS
system profile:</p>
<pre><code class="language-console"># nix store diff-closures /nix/var/nix/profiles/system-655-link /nix/var/nix/profiles/system-658-link
acpi-call: 2020-04-07-5.8.16 → 2020-04-07-5.8.18
baloo-widgets: 20.08.1 → 20.08.2
bluez-qt: +12.6 KiB
dolphin: 20.08.1 → 20.08.2, +13.9 KiB
kdeconnect: 20.08.2 → ∅, -6597.8 KiB
kdeconnect-kde: ∅ → 20.08.2, +6599.7 KiB
…
</code></pre>
</li>
</ul>
<h1 id="description-97"><a class="header" href="#description-97">Description</a></h1>
<p>This command shows the differences between the two closures <em>before</em>
and <em>after</em> with respect to the addition, removal, or version change
of packages, as well as changes in store path sizes.</p>
<p>For each package name in the two closures (where a package name is
defined as the name component of a store path excluding the version),
if there is a change in the set of versions of the package, or a
change in the size of the store paths of more than 8 KiB, it prints a
line like this:</p>
<pre><code class="language-console">dolphin: 20.08.1 → 20.08.2, +13.9 KiB
</code></pre>
<p>No size change is shown if it's below the threshold. If the package
does not exist in either the <em>before</em> or <em>after</em> closures, it is
represented using <code>∅</code> (empty set) on the appropriate side of the
arrow. If a package has an empty version string, the version is
rendered as <code>ε</code> (epsilon).</p>
<p>There may be multiple versions of a package in each closure. In that
case, only the changed versions are shown. Thus,</p>
<pre><code class="language-console">libfoo: 1.2, 1.3 → 1.4
</code></pre>
<p>leaves open the possibility that there are other versions (e.g. <code>1.1</code>)
that exist in both closures.</p>
<h1 id="options-60"><a class="header" href="#options-60">Options</a></h1>
<p><strong>Common evaluation options:</strong></p>
<ul>
<li>
<p><code>--arg</code> <em>name</em> <em>expr</em></p>
<p>Pass the value <em>expr</em> as the argument <em>name</em> to Nix functions.</p>
</li>
<li>
<p><code>--argstr</code> <em>name</em> <em>string</em></p>
<p>Pass the string <em>string</em> as the argument <em>name</em> to Nix functions.</p>
</li>
<li>
<p><code>--debugger</code></p>
<p>Start an interactive environment if evaluation fails.</p>
</li>
<li>
<p><code>--eval-store</code> <em>store-url</em></p>
<p>The Nix store to use for evaluations.</p>
</li>
<li>
<p><code>--impure</code></p>
<p>Allow access to mutable paths and repositories.</p>
</li>
<li>
<p><code>--include</code> / <code>-I</code> <em>path</em></p>
<p>Add <em>path</em> to the Nix search path. The Nix search path is
initialized from the colon-separated <a href="command-ref/new-cli/../../command-ref/env-common.html#env-NIX_PATH"><code>NIX_PATH</code></a> environment
variable, and is used to look up the location of Nix expressions using <a href="command-ref/new-cli/../../language/values.html#type-path">paths</a> enclosed in angle
brackets (i.e., <code>&lt;nixpkgs&gt;</code>).</p>
<p>For instance, passing</p>
<pre><code>-I /home/eelco/Dev
-I /etc/nixos
</code></pre>
<p>will cause Nix to look for paths relative to <code>/home/eelco/Dev</code> and
<code>/etc/nixos</code>, in that order. This is equivalent to setting the
<code>NIX_PATH</code> environment variable to</p>
<pre><code>/home/eelco/Dev:/etc/nixos
</code></pre>
<p>It is also possible to match paths against a prefix. For example,
passing</p>
<pre><code>-I nixpkgs=/home/eelco/Dev/nixpkgs-branch
-I /etc/nixos
</code></pre>
<p>will cause Nix to search for <code>&lt;nixpkgs/path&gt;</code> in
<code>/home/eelco/Dev/nixpkgs-branch/path</code> and <code>/etc/nixos/nixpkgs/path</code>.</p>
<p>If a path in the Nix search path starts with <code>http://</code> or <code>https://</code>,
it is interpreted as the URL of a tarball that will be downloaded and
unpacked to a temporary location. The tarball must consist of a single
top-level directory. For example, passing</p>
<pre><code>-I nixpkgs=https://github.com/NixOS/nixpkgs/archive/master.tar.gz
</code></pre>
<p>tells Nix to download and use the current contents of the <code>master</code>
branch in the <code>nixpkgs</code> repository.</p>
<p>The URLs of the tarballs from the official <code>nixos.org</code> channels
(see <a href="command-ref/new-cli/../nix-channel.html">the manual page for <code>nix-channel</code></a>) can be
abbreviated as <code>channel:&lt;channel-name&gt;</code>. For instance, the
following two flags are equivalent:</p>
<pre><code>-I nixpkgs=channel:nixos-21.05
-I nixpkgs=https://nixos.org/channels/nixos-21.05/nixexprs.tar.xz
</code></pre>
<p>You can also fetch source trees using <a href="command-ref/new-cli/./nix3-flake.html#url-like-syntax">flake URLs</a> and add them to the
search path. For instance,</p>
<pre><code>-I nixpkgs=flake:nixpkgs
</code></pre>
<p>specifies that the prefix <code>nixpkgs</code> shall refer to the source tree
downloaded from the <code>nixpkgs</code> entry in the flake registry. Similarly,</p>
<pre><code>-I nixpkgs=flake:github:NixOS/nixpkgs/nixos-22.05
</code></pre>
<p>makes <code>&lt;nixpkgs&gt;</code> refer to a particular branch of the
<code>NixOS/nixpkgs</code> repository on GitHub.</p>
</li>
<li>
<p><code>--override-flake</code> <em>original-ref</em> <em>resolved-ref</em></p>
<p>Override the flake registries, redirecting <em>original-ref</em> to <em>resolved-ref</em>.</p>
</li>
</ul>
<p><strong>Common flake-related options:</strong></p>
<ul>
<li>
<p><code>--commit-lock-file</code></p>
<p>Commit changes to the flake's lock file.</p>
</li>
<li>
<p><code>--inputs-from</code> <em>flake-url</em></p>
<p>Use the inputs of the specified flake as registry entries.</p>
</li>
<li>
<p><code>--no-registries</code></p>
<p>Don't allow lookups in the flake registries. This option is deprecated; use <code>--no-use-registries</code>.</p>
</li>
<li>
<p><code>--no-update-lock-file</code></p>
<p>Do not allow any updates to the flake's lock file.</p>
</li>
<li>
<p><code>--no-write-lock-file</code></p>
<p>Do not write the flake's newly generated lock file.</p>
</li>
<li>
<p><code>--override-input</code> <em>input-path</em> <em>flake-url</em></p>
<p>Override a specific flake input (e.g. <code>dwarffs/nixpkgs</code>). This implies <code>--no-write-lock-file</code>.</p>
</li>
<li>
<p><code>--recreate-lock-file</code></p>
<p>Recreate the flake's lock file from scratch.</p>
</li>
<li>
<p><code>--update-input</code> <em>input-path</em></p>
<p>Update a specific flake input (ignoring its previous entry in the lock file).</p>
</li>
</ul>
<p><strong>Logging-related options:</strong></p>
<ul>
<li>
<p><code>--debug</code></p>
<p>Set the logging verbosity level to 'debug'.</p>
</li>
<li>
<p><code>--log-format</code> <em>format</em></p>
<p>Set the format of log output; one of <code>raw</code>, <code>internal-json</code>, <code>bar</code> or <code>bar-with-logs</code>.</p>
</li>
<li>
<p><code>--print-build-logs</code> / <code>-L</code></p>
<p>Print full build logs on standard error.</p>
</li>
<li>
<p><code>--quiet</code></p>
<p>Decrease the logging verbosity level.</p>
</li>
<li>
<p><code>--verbose</code> / <code>-v</code></p>
<p>Increase the logging verbosity level.</p>
</li>
</ul>
<p><strong>Miscellaneous global options:</strong></p>
<ul>
<li>
<p><code>--help</code></p>
<p>Show usage information.</p>
</li>
<li>
<p><code>--offline</code></p>
<p>Disable substituters and consider all previously downloaded files up-to-date.</p>
</li>
<li>
<p><code>--option</code> <em>name</em> <em>value</em></p>
<p>Set the Nix configuration setting <em>name</em> to <em>value</em> (overriding <code>nix.conf</code>).</p>
</li>
<li>
<p><code>--refresh</code></p>
<p>Consider all previously downloaded files out-of-date.</p>
</li>
<li>
<p><code>--version</code></p>
<p>Show version information.</p>
</li>
</ul>
<p><strong>Options that change the interpretation of installables:</strong></p>
<ul>
<li>
<p><code>--derivation</code></p>
<p>Operate on the <a href="command-ref/new-cli/../../glossary.html#gloss-store-derivation">store derivation</a> rather than its outputs.</p>
</li>
<li>
<p><code>--expr</code> <em>expr</em></p>
<p>Interpret installables as attribute paths relative to the Nix expression <em>expr</em>.</p>
</li>
<li>
<p><code>--file</code> / <code>-f</code> <em>file</em></p>
<p>Interpret installables as attribute paths relative to the Nix expression stored in <em>file</em>. If <em>file</em> is the character -, then a Nix expression will be read from standard input. Implies <code>--impure</code>.</p>
</li>
</ul>
<p><strong>Options to override configuration settings:</strong></p>
<ul>
<li>
<p><code>--accept-flake-config</code></p>
<p>Enable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--access-tokens</code> <em>value</em></p>
<p>Set the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--allow-dirty</code></p>
<p>Enable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--allow-import-from-derivation</code></p>
<p>Enable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--allow-new-privileges</code></p>
<p>Enable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--allow-symlinked-store</code></p>
<p>Enable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--allow-unsafe-native-code-during-evaluation</code></p>
<p>Enable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--allowed-impure-host-deps</code> <em>value</em></p>
<p>Set the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--allowed-uris</code> <em>value</em></p>
<p>Set the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--allowed-users</code> <em>value</em></p>
<p>Set the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--auto-allocate-uids</code></p>
<p>Enable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--auto-optimise-store</code></p>
<p>Enable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt</code> <em>value</em></p>
<p>Set the <code>bash-prompt</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-prefix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-prefix</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-suffix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-suffix</code> setting.</p>
</li>
<li>
<p><code>--build-hook</code> <em>value</em></p>
<p>Set the <code>build-hook</code> setting.</p>
</li>
<li>
<p><code>--build-poll-interval</code> <em>value</em></p>
<p>Set the <code>build-poll-interval</code> setting.</p>
</li>
<li>
<p><code>--build-users-group</code> <em>value</em></p>
<p>Set the <code>build-users-group</code> setting.</p>
</li>
<li>
<p><code>--builders</code> <em>value</em></p>
<p>Set the <code>builders</code> setting.</p>
</li>
<li>
<p><code>--builders-use-substitutes</code></p>
<p>Enable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--commit-lockfile-summary</code> <em>value</em></p>
<p>Set the <code>commit-lockfile-summary</code> setting.</p>
</li>
<li>
<p><code>--compress-build-log</code></p>
<p>Enable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--connect-timeout</code> <em>value</em></p>
<p>Set the <code>connect-timeout</code> setting.</p>
</li>
<li>
<p><code>--cores</code> <em>value</em></p>
<p>Set the <code>cores</code> setting.</p>
</li>
<li>
<p><code>--diff-hook</code> <em>value</em></p>
<p>Set the <code>diff-hook</code> setting.</p>
</li>
<li>
<p><code>--download-attempts</code> <em>value</em></p>
<p>Set the <code>download-attempts</code> setting.</p>
</li>
<li>
<p><code>--download-speed</code> <em>value</em></p>
<p>Set the <code>download-speed</code> setting.</p>
</li>
<li>
<p><code>--eval-cache</code></p>
<p>Enable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--experimental-features</code> <em>value</em></p>
<p>Set the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-access-tokens</code> <em>value</em></p>
<p>Append to the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-impure-host-deps</code> <em>value</em></p>
<p>Append to the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-uris</code> <em>value</em></p>
<p>Append to the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-users</code> <em>value</em></p>
<p>Append to the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--extra-experimental-features</code> <em>value</em></p>
<p>Append to the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-extra-platforms</code> <em>value</em></p>
<p>Append to the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-hashed-mirrors</code> <em>value</em></p>
<p>Append to the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--extra-ignored-acls</code> <em>value</em></p>
<p>Append to the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--extra-nix-path</code> <em>value</em></p>
<p>Append to the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--extra-platforms</code> <em>value</em></p>
<p>Set the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-plugin-files</code> <em>value</em></p>
<p>Append to the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--extra-sandbox-paths</code> <em>value</em></p>
<p>Append to the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--extra-secret-key-files</code> <em>value</em></p>
<p>Append to the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--extra-substituters</code> <em>value</em></p>
<p>Append to the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-system-features</code> <em>value</em></p>
<p>Append to the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-public-keys</code> <em>value</em></p>
<p>Append to the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-substituters</code> <em>value</em></p>
<p>Append to the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-users</code> <em>value</em></p>
<p>Append to the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--fallback</code></p>
<p>Enable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--filter-syscalls</code></p>
<p>Enable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--flake-registry</code> <em>value</em></p>
<p>Set the <code>flake-registry</code> setting.</p>
</li>
<li>
<p><code>--fsync-metadata</code></p>
<p>Enable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--gc-reserved-space</code> <em>value</em></p>
<p>Set the <code>gc-reserved-space</code> setting.</p>
</li>
<li>
<p><code>--hashed-mirrors</code> <em>value</em></p>
<p>Set the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--http-connections</code> <em>value</em></p>
<p>Set the <code>http-connections</code> setting.</p>
</li>
<li>
<p><code>--http2</code></p>
<p>Enable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--id-count</code> <em>value</em></p>
<p>Set the <code>id-count</code> setting.</p>
</li>
<li>
<p><code>--ignore-try</code></p>
<p>Enable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--ignored-acls</code> <em>value</em></p>
<p>Set the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--impersonate-linux-26</code></p>
<p>Enable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--keep-build-log</code></p>
<p>Enable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--keep-derivations</code></p>
<p>Enable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-env-derivations</code></p>
<p>Enable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-failed</code></p>
<p>Enable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--keep-going</code></p>
<p>Enable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--keep-outputs</code></p>
<p>Enable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--log-lines</code> <em>value</em></p>
<p>Set the <code>log-lines</code> setting.</p>
</li>
<li>
<p><code>--max-build-log-size</code> <em>value</em></p>
<p>Set the <code>max-build-log-size</code> setting.</p>
</li>
<li>
<p><code>--max-free</code> <em>value</em></p>
<p>Set the <code>max-free</code> setting.</p>
</li>
<li>
<p><code>--max-jobs</code> <em>value</em></p>
<p>Set the <code>max-jobs</code> setting.</p>
</li>
<li>
<p><code>--max-silent-time</code> <em>value</em></p>
<p>Set the <code>max-silent-time</code> setting.</p>
</li>
<li>
<p><code>--min-free</code> <em>value</em></p>
<p>Set the <code>min-free</code> setting.</p>
</li>
<li>
<p><code>--min-free-check-interval</code> <em>value</em></p>
<p>Set the <code>min-free-check-interval</code> setting.</p>
</li>
<li>
<p><code>--nar-buffer-size</code> <em>value</em></p>
<p>Set the <code>nar-buffer-size</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-negative-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-negative-ttl</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-positive-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-positive-ttl</code> setting.</p>
</li>
<li>
<p><code>--netrc-file</code> <em>value</em></p>
<p>Set the <code>netrc-file</code> setting.</p>
</li>
<li>
<p><code>--nix-path</code> <em>value</em></p>
<p>Set the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--no-accept-flake-config</code></p>
<p>Disable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--no-allow-dirty</code></p>
<p>Disable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--no-allow-import-from-derivation</code></p>
<p>Disable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--no-allow-new-privileges</code></p>
<p>Disable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--no-allow-symlinked-store</code></p>
<p>Disable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--no-allow-unsafe-native-code-during-evaluation</code></p>
<p>Disable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--no-auto-allocate-uids</code></p>
<p>Disable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--no-auto-optimise-store</code></p>
<p>Disable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--no-builders-use-substitutes</code></p>
<p>Disable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--no-compress-build-log</code></p>
<p>Disable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-eval-cache</code></p>
<p>Disable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--no-fallback</code></p>
<p>Disable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--no-filter-syscalls</code></p>
<p>Disable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--no-fsync-metadata</code></p>
<p>Disable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--no-http2</code></p>
<p>Disable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--no-ignore-try</code></p>
<p>Disable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--no-impersonate-linux-26</code></p>
<p>Disable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--no-keep-build-log</code></p>
<p>Disable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-keep-derivations</code></p>
<p>Disable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-env-derivations</code></p>
<p>Disable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-failed</code></p>
<p>Disable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--no-keep-going</code></p>
<p>Disable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--no-keep-outputs</code></p>
<p>Disable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--no-preallocate-contents</code></p>
<p>Disable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--no-print-missing</code></p>
<p>Disable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--no-pure-eval</code></p>
<p>Disable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--no-require-sigs</code></p>
<p>Disable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--no-restrict-eval</code></p>
<p>Disable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--no-run-diff-hook</code></p>
<p>Disable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--no-sandbox</code></p>
<p>Disable sandboxing.</p>
</li>
<li>
<p><code>--no-sandbox-fallback</code></p>
<p>Disable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--no-show-trace</code></p>
<p>Disable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--no-substitute</code></p>
<p>Disable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--no-sync-before-registering</code></p>
<p>Disable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--no-trace-function-calls</code></p>
<p>Disable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--no-trace-verbose</code></p>
<p>Disable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--no-use-case-hack</code></p>
<p>Disable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--no-use-cgroups</code></p>
<p>Disable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--no-use-registries</code></p>
<p>Disable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--no-use-sqlite-wal</code></p>
<p>Disable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--no-warn-dirty</code></p>
<p>Disable the <code>warn-dirty</code> setting.</p>
</li>
<li>
<p><code>--plugin-files</code> <em>value</em></p>
<p>Set the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--post-build-hook</code> <em>value</em></p>
<p>Set the <code>post-build-hook</code> setting.</p>
</li>
<li>
<p><code>--pre-build-hook</code> <em>value</em></p>
<p>Set the <code>pre-build-hook</code> setting.</p>
</li>
<li>
<p><code>--preallocate-contents</code></p>
<p>Enable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--print-missing</code></p>
<p>Enable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--pure-eval</code></p>
<p>Enable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--relaxed-sandbox</code></p>
<p>Enable sandboxing, but allow builds to disable it.</p>
</li>
<li>
<p><code>--require-sigs</code></p>
<p>Enable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--restrict-eval</code></p>
<p>Enable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--run-diff-hook</code></p>
<p>Enable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--sandbox</code></p>
<p>Enable sandboxing.</p>
</li>
<li>
<p><code>--sandbox-build-dir</code> <em>value</em></p>
<p>Set the <code>sandbox-build-dir</code> setting.</p>
</li>
<li>
<p><code>--sandbox-dev-shm-size</code> <em>value</em></p>
<p>Set the <code>sandbox-dev-shm-size</code> setting.</p>
</li>
<li>
<p><code>--sandbox-fallback</code></p>
<p>Enable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--sandbox-paths</code> <em>value</em></p>
<p>Set the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--secret-key-files</code> <em>value</em></p>
<p>Set the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--show-trace</code></p>
<p>Enable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--stalled-download-timeout</code> <em>value</em></p>
<p>Set the <code>stalled-download-timeout</code> setting.</p>
</li>
<li>
<p><code>--start-id</code> <em>value</em></p>
<p>Set the <code>start-id</code> setting.</p>
</li>
<li>
<p><code>--store</code> <em>value</em></p>
<p>Set the <code>store</code> setting.</p>
</li>
<li>
<p><code>--substitute</code></p>
<p>Enable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--substituters</code> <em>value</em></p>
<p>Set the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--sync-before-registering</code></p>
<p>Enable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--system</code> <em>value</em></p>
<p>Set the <code>system</code> setting.</p>
</li>
<li>
<p><code>--system-features</code> <em>value</em></p>
<p>Set the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--tarball-ttl</code> <em>value</em></p>
<p>Set the <code>tarball-ttl</code> setting.</p>
</li>
<li>
<p><code>--timeout</code> <em>value</em></p>
<p>Set the <code>timeout</code> setting.</p>
</li>
<li>
<p><code>--trace-function-calls</code></p>
<p>Enable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--trace-verbose</code></p>
<p>Enable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--trusted-public-keys</code> <em>value</em></p>
<p>Set the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--trusted-substituters</code> <em>value</em></p>
<p>Set the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--trusted-users</code> <em>value</em></p>
<p>Set the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--use-case-hack</code></p>
<p>Enable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--use-cgroups</code></p>
<p>Enable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--use-registries</code></p>
<p>Enable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--use-sqlite-wal</code></p>
<p>Enable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--user-agent-suffix</code> <em>value</em></p>
<p>Set the <code>user-agent-suffix</code> setting.</p>
</li>
<li>
<p><code>--warn-dirty</code></p>
<p>Enable the <code>warn-dirty</code> setting.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p><strong>Warning</strong> <br />
This program is <strong>experimental</strong> and its interface is subject to change.</p>
</blockquote>
<h1 id="name-82"><a class="header" href="#name-82">Name</a></h1>
<p><code>nix store dump-path</code> - serialise a store path to stdout in NAR format</p>
<h1 id="synopsis-113"><a class="header" href="#synopsis-113">Synopsis</a></h1>
<p><code>nix store dump-path</code> [<em>option</em>...] <em>installables</em>...</p>
<h1 id="examples-77"><a class="header" href="#examples-77">Examples</a></h1>
<ul>
<li>
<p>To get a NAR containing the GNU Hello package:</p>
<pre><code class="language-console"># nix store dump-path nixpkgs#hello &gt; hello.nar
</code></pre>
</li>
<li>
<p>To get a NAR from the binary cache https://cache.nixos.org/:</p>
<pre><code class="language-console"># nix store dump-path --store https://cache.nixos.org/ \
    /nix/store/7crrmih8c52r8fbnqb933dxrsp44md93-glibc-2.25 &gt; glibc.nar
</code></pre>
</li>
</ul>
<h1 id="description-98"><a class="header" href="#description-98">Description</a></h1>
<p>This command generates a NAR file containing the serialisation of the
store path <em>installable</em>. The NAR is written to standard output.</p>
<h1 id="options-61"><a class="header" href="#options-61">Options</a></h1>
<p><strong>Common evaluation options:</strong></p>
<ul>
<li>
<p><code>--arg</code> <em>name</em> <em>expr</em></p>
<p>Pass the value <em>expr</em> as the argument <em>name</em> to Nix functions.</p>
</li>
<li>
<p><code>--argstr</code> <em>name</em> <em>string</em></p>
<p>Pass the string <em>string</em> as the argument <em>name</em> to Nix functions.</p>
</li>
<li>
<p><code>--debugger</code></p>
<p>Start an interactive environment if evaluation fails.</p>
</li>
<li>
<p><code>--eval-store</code> <em>store-url</em></p>
<p>The Nix store to use for evaluations.</p>
</li>
<li>
<p><code>--impure</code></p>
<p>Allow access to mutable paths and repositories.</p>
</li>
<li>
<p><code>--include</code> / <code>-I</code> <em>path</em></p>
<p>Add <em>path</em> to the Nix search path. The Nix search path is
initialized from the colon-separated <a href="command-ref/new-cli/../../command-ref/env-common.html#env-NIX_PATH"><code>NIX_PATH</code></a> environment
variable, and is used to look up the location of Nix expressions using <a href="command-ref/new-cli/../../language/values.html#type-path">paths</a> enclosed in angle
brackets (i.e., <code>&lt;nixpkgs&gt;</code>).</p>
<p>For instance, passing</p>
<pre><code>-I /home/eelco/Dev
-I /etc/nixos
</code></pre>
<p>will cause Nix to look for paths relative to <code>/home/eelco/Dev</code> and
<code>/etc/nixos</code>, in that order. This is equivalent to setting the
<code>NIX_PATH</code> environment variable to</p>
<pre><code>/home/eelco/Dev:/etc/nixos
</code></pre>
<p>It is also possible to match paths against a prefix. For example,
passing</p>
<pre><code>-I nixpkgs=/home/eelco/Dev/nixpkgs-branch
-I /etc/nixos
</code></pre>
<p>will cause Nix to search for <code>&lt;nixpkgs/path&gt;</code> in
<code>/home/eelco/Dev/nixpkgs-branch/path</code> and <code>/etc/nixos/nixpkgs/path</code>.</p>
<p>If a path in the Nix search path starts with <code>http://</code> or <code>https://</code>,
it is interpreted as the URL of a tarball that will be downloaded and
unpacked to a temporary location. The tarball must consist of a single
top-level directory. For example, passing</p>
<pre><code>-I nixpkgs=https://github.com/NixOS/nixpkgs/archive/master.tar.gz
</code></pre>
<p>tells Nix to download and use the current contents of the <code>master</code>
branch in the <code>nixpkgs</code> repository.</p>
<p>The URLs of the tarballs from the official <code>nixos.org</code> channels
(see <a href="command-ref/new-cli/../nix-channel.html">the manual page for <code>nix-channel</code></a>) can be
abbreviated as <code>channel:&lt;channel-name&gt;</code>. For instance, the
following two flags are equivalent:</p>
<pre><code>-I nixpkgs=channel:nixos-21.05
-I nixpkgs=https://nixos.org/channels/nixos-21.05/nixexprs.tar.xz
</code></pre>
<p>You can also fetch source trees using <a href="command-ref/new-cli/./nix3-flake.html#url-like-syntax">flake URLs</a> and add them to the
search path. For instance,</p>
<pre><code>-I nixpkgs=flake:nixpkgs
</code></pre>
<p>specifies that the prefix <code>nixpkgs</code> shall refer to the source tree
downloaded from the <code>nixpkgs</code> entry in the flake registry. Similarly,</p>
<pre><code>-I nixpkgs=flake:github:NixOS/nixpkgs/nixos-22.05
</code></pre>
<p>makes <code>&lt;nixpkgs&gt;</code> refer to a particular branch of the
<code>NixOS/nixpkgs</code> repository on GitHub.</p>
</li>
<li>
<p><code>--override-flake</code> <em>original-ref</em> <em>resolved-ref</em></p>
<p>Override the flake registries, redirecting <em>original-ref</em> to <em>resolved-ref</em>.</p>
</li>
</ul>
<p><strong>Common flake-related options:</strong></p>
<ul>
<li>
<p><code>--commit-lock-file</code></p>
<p>Commit changes to the flake's lock file.</p>
</li>
<li>
<p><code>--inputs-from</code> <em>flake-url</em></p>
<p>Use the inputs of the specified flake as registry entries.</p>
</li>
<li>
<p><code>--no-registries</code></p>
<p>Don't allow lookups in the flake registries. This option is deprecated; use <code>--no-use-registries</code>.</p>
</li>
<li>
<p><code>--no-update-lock-file</code></p>
<p>Do not allow any updates to the flake's lock file.</p>
</li>
<li>
<p><code>--no-write-lock-file</code></p>
<p>Do not write the flake's newly generated lock file.</p>
</li>
<li>
<p><code>--override-input</code> <em>input-path</em> <em>flake-url</em></p>
<p>Override a specific flake input (e.g. <code>dwarffs/nixpkgs</code>). This implies <code>--no-write-lock-file</code>.</p>
</li>
<li>
<p><code>--recreate-lock-file</code></p>
<p>Recreate the flake's lock file from scratch.</p>
</li>
<li>
<p><code>--update-input</code> <em>input-path</em></p>
<p>Update a specific flake input (ignoring its previous entry in the lock file).</p>
</li>
</ul>
<p><strong>Logging-related options:</strong></p>
<ul>
<li>
<p><code>--debug</code></p>
<p>Set the logging verbosity level to 'debug'.</p>
</li>
<li>
<p><code>--log-format</code> <em>format</em></p>
<p>Set the format of log output; one of <code>raw</code>, <code>internal-json</code>, <code>bar</code> or <code>bar-with-logs</code>.</p>
</li>
<li>
<p><code>--print-build-logs</code> / <code>-L</code></p>
<p>Print full build logs on standard error.</p>
</li>
<li>
<p><code>--quiet</code></p>
<p>Decrease the logging verbosity level.</p>
</li>
<li>
<p><code>--verbose</code> / <code>-v</code></p>
<p>Increase the logging verbosity level.</p>
</li>
</ul>
<p><strong>Miscellaneous global options:</strong></p>
<ul>
<li>
<p><code>--help</code></p>
<p>Show usage information.</p>
</li>
<li>
<p><code>--offline</code></p>
<p>Disable substituters and consider all previously downloaded files up-to-date.</p>
</li>
<li>
<p><code>--option</code> <em>name</em> <em>value</em></p>
<p>Set the Nix configuration setting <em>name</em> to <em>value</em> (overriding <code>nix.conf</code>).</p>
</li>
<li>
<p><code>--refresh</code></p>
<p>Consider all previously downloaded files out-of-date.</p>
</li>
<li>
<p><code>--version</code></p>
<p>Show version information.</p>
</li>
</ul>
<p><strong>Options that change the interpretation of installables:</strong></p>
<ul>
<li>
<p><code>--all</code></p>
<p>Apply the operation to every store path.</p>
</li>
<li>
<p><code>--derivation</code></p>
<p>Operate on the <a href="command-ref/new-cli/../../glossary.html#gloss-store-derivation">store derivation</a> rather than its outputs.</p>
</li>
<li>
<p><code>--expr</code> <em>expr</em></p>
<p>Interpret installables as attribute paths relative to the Nix expression <em>expr</em>.</p>
</li>
<li>
<p><code>--file</code> / <code>-f</code> <em>file</em></p>
<p>Interpret installables as attribute paths relative to the Nix expression stored in <em>file</em>. If <em>file</em> is the character -, then a Nix expression will be read from standard input. Implies <code>--impure</code>.</p>
</li>
<li>
<p><code>--recursive</code> / <code>-r</code></p>
<p>Apply operation to closure of the specified paths.</p>
</li>
</ul>
<p><strong>Options to override configuration settings:</strong></p>
<ul>
<li>
<p><code>--accept-flake-config</code></p>
<p>Enable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--access-tokens</code> <em>value</em></p>
<p>Set the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--allow-dirty</code></p>
<p>Enable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--allow-import-from-derivation</code></p>
<p>Enable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--allow-new-privileges</code></p>
<p>Enable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--allow-symlinked-store</code></p>
<p>Enable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--allow-unsafe-native-code-during-evaluation</code></p>
<p>Enable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--allowed-impure-host-deps</code> <em>value</em></p>
<p>Set the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--allowed-uris</code> <em>value</em></p>
<p>Set the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--allowed-users</code> <em>value</em></p>
<p>Set the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--auto-allocate-uids</code></p>
<p>Enable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--auto-optimise-store</code></p>
<p>Enable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt</code> <em>value</em></p>
<p>Set the <code>bash-prompt</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-prefix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-prefix</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-suffix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-suffix</code> setting.</p>
</li>
<li>
<p><code>--build-hook</code> <em>value</em></p>
<p>Set the <code>build-hook</code> setting.</p>
</li>
<li>
<p><code>--build-poll-interval</code> <em>value</em></p>
<p>Set the <code>build-poll-interval</code> setting.</p>
</li>
<li>
<p><code>--build-users-group</code> <em>value</em></p>
<p>Set the <code>build-users-group</code> setting.</p>
</li>
<li>
<p><code>--builders</code> <em>value</em></p>
<p>Set the <code>builders</code> setting.</p>
</li>
<li>
<p><code>--builders-use-substitutes</code></p>
<p>Enable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--commit-lockfile-summary</code> <em>value</em></p>
<p>Set the <code>commit-lockfile-summary</code> setting.</p>
</li>
<li>
<p><code>--compress-build-log</code></p>
<p>Enable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--connect-timeout</code> <em>value</em></p>
<p>Set the <code>connect-timeout</code> setting.</p>
</li>
<li>
<p><code>--cores</code> <em>value</em></p>
<p>Set the <code>cores</code> setting.</p>
</li>
<li>
<p><code>--diff-hook</code> <em>value</em></p>
<p>Set the <code>diff-hook</code> setting.</p>
</li>
<li>
<p><code>--download-attempts</code> <em>value</em></p>
<p>Set the <code>download-attempts</code> setting.</p>
</li>
<li>
<p><code>--download-speed</code> <em>value</em></p>
<p>Set the <code>download-speed</code> setting.</p>
</li>
<li>
<p><code>--eval-cache</code></p>
<p>Enable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--experimental-features</code> <em>value</em></p>
<p>Set the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-access-tokens</code> <em>value</em></p>
<p>Append to the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-impure-host-deps</code> <em>value</em></p>
<p>Append to the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-uris</code> <em>value</em></p>
<p>Append to the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-users</code> <em>value</em></p>
<p>Append to the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--extra-experimental-features</code> <em>value</em></p>
<p>Append to the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-extra-platforms</code> <em>value</em></p>
<p>Append to the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-hashed-mirrors</code> <em>value</em></p>
<p>Append to the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--extra-ignored-acls</code> <em>value</em></p>
<p>Append to the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--extra-nix-path</code> <em>value</em></p>
<p>Append to the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--extra-platforms</code> <em>value</em></p>
<p>Set the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-plugin-files</code> <em>value</em></p>
<p>Append to the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--extra-sandbox-paths</code> <em>value</em></p>
<p>Append to the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--extra-secret-key-files</code> <em>value</em></p>
<p>Append to the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--extra-substituters</code> <em>value</em></p>
<p>Append to the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-system-features</code> <em>value</em></p>
<p>Append to the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-public-keys</code> <em>value</em></p>
<p>Append to the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-substituters</code> <em>value</em></p>
<p>Append to the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-users</code> <em>value</em></p>
<p>Append to the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--fallback</code></p>
<p>Enable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--filter-syscalls</code></p>
<p>Enable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--flake-registry</code> <em>value</em></p>
<p>Set the <code>flake-registry</code> setting.</p>
</li>
<li>
<p><code>--fsync-metadata</code></p>
<p>Enable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--gc-reserved-space</code> <em>value</em></p>
<p>Set the <code>gc-reserved-space</code> setting.</p>
</li>
<li>
<p><code>--hashed-mirrors</code> <em>value</em></p>
<p>Set the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--http-connections</code> <em>value</em></p>
<p>Set the <code>http-connections</code> setting.</p>
</li>
<li>
<p><code>--http2</code></p>
<p>Enable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--id-count</code> <em>value</em></p>
<p>Set the <code>id-count</code> setting.</p>
</li>
<li>
<p><code>--ignore-try</code></p>
<p>Enable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--ignored-acls</code> <em>value</em></p>
<p>Set the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--impersonate-linux-26</code></p>
<p>Enable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--keep-build-log</code></p>
<p>Enable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--keep-derivations</code></p>
<p>Enable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-env-derivations</code></p>
<p>Enable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-failed</code></p>
<p>Enable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--keep-going</code></p>
<p>Enable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--keep-outputs</code></p>
<p>Enable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--log-lines</code> <em>value</em></p>
<p>Set the <code>log-lines</code> setting.</p>
</li>
<li>
<p><code>--max-build-log-size</code> <em>value</em></p>
<p>Set the <code>max-build-log-size</code> setting.</p>
</li>
<li>
<p><code>--max-free</code> <em>value</em></p>
<p>Set the <code>max-free</code> setting.</p>
</li>
<li>
<p><code>--max-jobs</code> <em>value</em></p>
<p>Set the <code>max-jobs</code> setting.</p>
</li>
<li>
<p><code>--max-silent-time</code> <em>value</em></p>
<p>Set the <code>max-silent-time</code> setting.</p>
</li>
<li>
<p><code>--min-free</code> <em>value</em></p>
<p>Set the <code>min-free</code> setting.</p>
</li>
<li>
<p><code>--min-free-check-interval</code> <em>value</em></p>
<p>Set the <code>min-free-check-interval</code> setting.</p>
</li>
<li>
<p><code>--nar-buffer-size</code> <em>value</em></p>
<p>Set the <code>nar-buffer-size</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-negative-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-negative-ttl</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-positive-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-positive-ttl</code> setting.</p>
</li>
<li>
<p><code>--netrc-file</code> <em>value</em></p>
<p>Set the <code>netrc-file</code> setting.</p>
</li>
<li>
<p><code>--nix-path</code> <em>value</em></p>
<p>Set the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--no-accept-flake-config</code></p>
<p>Disable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--no-allow-dirty</code></p>
<p>Disable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--no-allow-import-from-derivation</code></p>
<p>Disable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--no-allow-new-privileges</code></p>
<p>Disable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--no-allow-symlinked-store</code></p>
<p>Disable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--no-allow-unsafe-native-code-during-evaluation</code></p>
<p>Disable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--no-auto-allocate-uids</code></p>
<p>Disable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--no-auto-optimise-store</code></p>
<p>Disable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--no-builders-use-substitutes</code></p>
<p>Disable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--no-compress-build-log</code></p>
<p>Disable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-eval-cache</code></p>
<p>Disable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--no-fallback</code></p>
<p>Disable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--no-filter-syscalls</code></p>
<p>Disable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--no-fsync-metadata</code></p>
<p>Disable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--no-http2</code></p>
<p>Disable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--no-ignore-try</code></p>
<p>Disable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--no-impersonate-linux-26</code></p>
<p>Disable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--no-keep-build-log</code></p>
<p>Disable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-keep-derivations</code></p>
<p>Disable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-env-derivations</code></p>
<p>Disable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-failed</code></p>
<p>Disable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--no-keep-going</code></p>
<p>Disable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--no-keep-outputs</code></p>
<p>Disable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--no-preallocate-contents</code></p>
<p>Disable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--no-print-missing</code></p>
<p>Disable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--no-pure-eval</code></p>
<p>Disable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--no-require-sigs</code></p>
<p>Disable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--no-restrict-eval</code></p>
<p>Disable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--no-run-diff-hook</code></p>
<p>Disable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--no-sandbox</code></p>
<p>Disable sandboxing.</p>
</li>
<li>
<p><code>--no-sandbox-fallback</code></p>
<p>Disable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--no-show-trace</code></p>
<p>Disable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--no-substitute</code></p>
<p>Disable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--no-sync-before-registering</code></p>
<p>Disable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--no-trace-function-calls</code></p>
<p>Disable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--no-trace-verbose</code></p>
<p>Disable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--no-use-case-hack</code></p>
<p>Disable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--no-use-cgroups</code></p>
<p>Disable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--no-use-registries</code></p>
<p>Disable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--no-use-sqlite-wal</code></p>
<p>Disable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--no-warn-dirty</code></p>
<p>Disable the <code>warn-dirty</code> setting.</p>
</li>
<li>
<p><code>--plugin-files</code> <em>value</em></p>
<p>Set the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--post-build-hook</code> <em>value</em></p>
<p>Set the <code>post-build-hook</code> setting.</p>
</li>
<li>
<p><code>--pre-build-hook</code> <em>value</em></p>
<p>Set the <code>pre-build-hook</code> setting.</p>
</li>
<li>
<p><code>--preallocate-contents</code></p>
<p>Enable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--print-missing</code></p>
<p>Enable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--pure-eval</code></p>
<p>Enable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--relaxed-sandbox</code></p>
<p>Enable sandboxing, but allow builds to disable it.</p>
</li>
<li>
<p><code>--require-sigs</code></p>
<p>Enable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--restrict-eval</code></p>
<p>Enable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--run-diff-hook</code></p>
<p>Enable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--sandbox</code></p>
<p>Enable sandboxing.</p>
</li>
<li>
<p><code>--sandbox-build-dir</code> <em>value</em></p>
<p>Set the <code>sandbox-build-dir</code> setting.</p>
</li>
<li>
<p><code>--sandbox-dev-shm-size</code> <em>value</em></p>
<p>Set the <code>sandbox-dev-shm-size</code> setting.</p>
</li>
<li>
<p><code>--sandbox-fallback</code></p>
<p>Enable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--sandbox-paths</code> <em>value</em></p>
<p>Set the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--secret-key-files</code> <em>value</em></p>
<p>Set the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--show-trace</code></p>
<p>Enable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--stalled-download-timeout</code> <em>value</em></p>
<p>Set the <code>stalled-download-timeout</code> setting.</p>
</li>
<li>
<p><code>--start-id</code> <em>value</em></p>
<p>Set the <code>start-id</code> setting.</p>
</li>
<li>
<p><code>--store</code> <em>value</em></p>
<p>Set the <code>store</code> setting.</p>
</li>
<li>
<p><code>--substitute</code></p>
<p>Enable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--substituters</code> <em>value</em></p>
<p>Set the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--sync-before-registering</code></p>
<p>Enable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--system</code> <em>value</em></p>
<p>Set the <code>system</code> setting.</p>
</li>
<li>
<p><code>--system-features</code> <em>value</em></p>
<p>Set the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--tarball-ttl</code> <em>value</em></p>
<p>Set the <code>tarball-ttl</code> setting.</p>
</li>
<li>
<p><code>--timeout</code> <em>value</em></p>
<p>Set the <code>timeout</code> setting.</p>
</li>
<li>
<p><code>--trace-function-calls</code></p>
<p>Enable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--trace-verbose</code></p>
<p>Enable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--trusted-public-keys</code> <em>value</em></p>
<p>Set the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--trusted-substituters</code> <em>value</em></p>
<p>Set the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--trusted-users</code> <em>value</em></p>
<p>Set the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--use-case-hack</code></p>
<p>Enable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--use-cgroups</code></p>
<p>Enable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--use-registries</code></p>
<p>Enable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--use-sqlite-wal</code></p>
<p>Enable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--user-agent-suffix</code> <em>value</em></p>
<p>Set the <code>user-agent-suffix</code> setting.</p>
</li>
<li>
<p><code>--warn-dirty</code></p>
<p>Enable the <code>warn-dirty</code> setting.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p><strong>Warning</strong> <br />
This program is <strong>experimental</strong> and its interface is subject to change.</p>
</blockquote>
<h1 id="name-83"><a class="header" href="#name-83">Name</a></h1>
<p><code>nix store gc</code> - perform garbage collection on a Nix store</p>
<h1 id="synopsis-114"><a class="header" href="#synopsis-114">Synopsis</a></h1>
<p><code>nix store gc</code> [<em>option</em>...] </p>
<h1 id="examples-78"><a class="header" href="#examples-78">Examples</a></h1>
<ul>
<li>
<p>Delete unreachable paths in the Nix store:</p>
<pre><code class="language-console"># nix store gc
</code></pre>
</li>
<li>
<p>Delete up to 1 gigabyte of garbage:</p>
<pre><code class="language-console"># nix store gc --max 1G
</code></pre>
</li>
</ul>
<h1 id="description-99"><a class="header" href="#description-99">Description</a></h1>
<p>This command deletes unreachable paths in the Nix store.</p>
<h1 id="options-62"><a class="header" href="#options-62">Options</a></h1>
<ul>
<li>
<p><code>--dry-run</code></p>
<p>Show what this command would do without doing it.</p>
</li>
<li>
<p><code>--max</code> <em>n</em></p>
<p>Stop after freeing <em>n</em> bytes of disk space.</p>
</li>
</ul>
<p><strong>Logging-related options:</strong></p>
<ul>
<li>
<p><code>--debug</code></p>
<p>Set the logging verbosity level to 'debug'.</p>
</li>
<li>
<p><code>--log-format</code> <em>format</em></p>
<p>Set the format of log output; one of <code>raw</code>, <code>internal-json</code>, <code>bar</code> or <code>bar-with-logs</code>.</p>
</li>
<li>
<p><code>--print-build-logs</code> / <code>-L</code></p>
<p>Print full build logs on standard error.</p>
</li>
<li>
<p><code>--quiet</code></p>
<p>Decrease the logging verbosity level.</p>
</li>
<li>
<p><code>--verbose</code> / <code>-v</code></p>
<p>Increase the logging verbosity level.</p>
</li>
</ul>
<p><strong>Miscellaneous global options:</strong></p>
<ul>
<li>
<p><code>--help</code></p>
<p>Show usage information.</p>
</li>
<li>
<p><code>--offline</code></p>
<p>Disable substituters and consider all previously downloaded files up-to-date.</p>
</li>
<li>
<p><code>--option</code> <em>name</em> <em>value</em></p>
<p>Set the Nix configuration setting <em>name</em> to <em>value</em> (overriding <code>nix.conf</code>).</p>
</li>
<li>
<p><code>--refresh</code></p>
<p>Consider all previously downloaded files out-of-date.</p>
</li>
<li>
<p><code>--version</code></p>
<p>Show version information.</p>
</li>
</ul>
<p><strong>Options to override configuration settings:</strong></p>
<ul>
<li>
<p><code>--accept-flake-config</code></p>
<p>Enable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--access-tokens</code> <em>value</em></p>
<p>Set the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--allow-dirty</code></p>
<p>Enable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--allow-import-from-derivation</code></p>
<p>Enable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--allow-new-privileges</code></p>
<p>Enable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--allow-symlinked-store</code></p>
<p>Enable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--allow-unsafe-native-code-during-evaluation</code></p>
<p>Enable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--allowed-impure-host-deps</code> <em>value</em></p>
<p>Set the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--allowed-uris</code> <em>value</em></p>
<p>Set the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--allowed-users</code> <em>value</em></p>
<p>Set the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--auto-allocate-uids</code></p>
<p>Enable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--auto-optimise-store</code></p>
<p>Enable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt</code> <em>value</em></p>
<p>Set the <code>bash-prompt</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-prefix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-prefix</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-suffix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-suffix</code> setting.</p>
</li>
<li>
<p><code>--build-hook</code> <em>value</em></p>
<p>Set the <code>build-hook</code> setting.</p>
</li>
<li>
<p><code>--build-poll-interval</code> <em>value</em></p>
<p>Set the <code>build-poll-interval</code> setting.</p>
</li>
<li>
<p><code>--build-users-group</code> <em>value</em></p>
<p>Set the <code>build-users-group</code> setting.</p>
</li>
<li>
<p><code>--builders</code> <em>value</em></p>
<p>Set the <code>builders</code> setting.</p>
</li>
<li>
<p><code>--builders-use-substitutes</code></p>
<p>Enable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--commit-lockfile-summary</code> <em>value</em></p>
<p>Set the <code>commit-lockfile-summary</code> setting.</p>
</li>
<li>
<p><code>--compress-build-log</code></p>
<p>Enable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--connect-timeout</code> <em>value</em></p>
<p>Set the <code>connect-timeout</code> setting.</p>
</li>
<li>
<p><code>--cores</code> <em>value</em></p>
<p>Set the <code>cores</code> setting.</p>
</li>
<li>
<p><code>--diff-hook</code> <em>value</em></p>
<p>Set the <code>diff-hook</code> setting.</p>
</li>
<li>
<p><code>--download-attempts</code> <em>value</em></p>
<p>Set the <code>download-attempts</code> setting.</p>
</li>
<li>
<p><code>--download-speed</code> <em>value</em></p>
<p>Set the <code>download-speed</code> setting.</p>
</li>
<li>
<p><code>--eval-cache</code></p>
<p>Enable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--experimental-features</code> <em>value</em></p>
<p>Set the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-access-tokens</code> <em>value</em></p>
<p>Append to the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-impure-host-deps</code> <em>value</em></p>
<p>Append to the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-uris</code> <em>value</em></p>
<p>Append to the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-users</code> <em>value</em></p>
<p>Append to the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--extra-experimental-features</code> <em>value</em></p>
<p>Append to the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-extra-platforms</code> <em>value</em></p>
<p>Append to the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-hashed-mirrors</code> <em>value</em></p>
<p>Append to the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--extra-ignored-acls</code> <em>value</em></p>
<p>Append to the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--extra-nix-path</code> <em>value</em></p>
<p>Append to the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--extra-platforms</code> <em>value</em></p>
<p>Set the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-plugin-files</code> <em>value</em></p>
<p>Append to the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--extra-sandbox-paths</code> <em>value</em></p>
<p>Append to the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--extra-secret-key-files</code> <em>value</em></p>
<p>Append to the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--extra-substituters</code> <em>value</em></p>
<p>Append to the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-system-features</code> <em>value</em></p>
<p>Append to the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-public-keys</code> <em>value</em></p>
<p>Append to the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-substituters</code> <em>value</em></p>
<p>Append to the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-users</code> <em>value</em></p>
<p>Append to the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--fallback</code></p>
<p>Enable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--filter-syscalls</code></p>
<p>Enable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--flake-registry</code> <em>value</em></p>
<p>Set the <code>flake-registry</code> setting.</p>
</li>
<li>
<p><code>--fsync-metadata</code></p>
<p>Enable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--gc-reserved-space</code> <em>value</em></p>
<p>Set the <code>gc-reserved-space</code> setting.</p>
</li>
<li>
<p><code>--hashed-mirrors</code> <em>value</em></p>
<p>Set the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--http-connections</code> <em>value</em></p>
<p>Set the <code>http-connections</code> setting.</p>
</li>
<li>
<p><code>--http2</code></p>
<p>Enable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--id-count</code> <em>value</em></p>
<p>Set the <code>id-count</code> setting.</p>
</li>
<li>
<p><code>--ignore-try</code></p>
<p>Enable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--ignored-acls</code> <em>value</em></p>
<p>Set the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--impersonate-linux-26</code></p>
<p>Enable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--keep-build-log</code></p>
<p>Enable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--keep-derivations</code></p>
<p>Enable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-env-derivations</code></p>
<p>Enable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-failed</code></p>
<p>Enable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--keep-going</code></p>
<p>Enable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--keep-outputs</code></p>
<p>Enable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--log-lines</code> <em>value</em></p>
<p>Set the <code>log-lines</code> setting.</p>
</li>
<li>
<p><code>--max-build-log-size</code> <em>value</em></p>
<p>Set the <code>max-build-log-size</code> setting.</p>
</li>
<li>
<p><code>--max-free</code> <em>value</em></p>
<p>Set the <code>max-free</code> setting.</p>
</li>
<li>
<p><code>--max-jobs</code> <em>value</em></p>
<p>Set the <code>max-jobs</code> setting.</p>
</li>
<li>
<p><code>--max-silent-time</code> <em>value</em></p>
<p>Set the <code>max-silent-time</code> setting.</p>
</li>
<li>
<p><code>--min-free</code> <em>value</em></p>
<p>Set the <code>min-free</code> setting.</p>
</li>
<li>
<p><code>--min-free-check-interval</code> <em>value</em></p>
<p>Set the <code>min-free-check-interval</code> setting.</p>
</li>
<li>
<p><code>--nar-buffer-size</code> <em>value</em></p>
<p>Set the <code>nar-buffer-size</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-negative-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-negative-ttl</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-positive-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-positive-ttl</code> setting.</p>
</li>
<li>
<p><code>--netrc-file</code> <em>value</em></p>
<p>Set the <code>netrc-file</code> setting.</p>
</li>
<li>
<p><code>--nix-path</code> <em>value</em></p>
<p>Set the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--no-accept-flake-config</code></p>
<p>Disable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--no-allow-dirty</code></p>
<p>Disable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--no-allow-import-from-derivation</code></p>
<p>Disable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--no-allow-new-privileges</code></p>
<p>Disable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--no-allow-symlinked-store</code></p>
<p>Disable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--no-allow-unsafe-native-code-during-evaluation</code></p>
<p>Disable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--no-auto-allocate-uids</code></p>
<p>Disable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--no-auto-optimise-store</code></p>
<p>Disable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--no-builders-use-substitutes</code></p>
<p>Disable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--no-compress-build-log</code></p>
<p>Disable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-eval-cache</code></p>
<p>Disable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--no-fallback</code></p>
<p>Disable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--no-filter-syscalls</code></p>
<p>Disable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--no-fsync-metadata</code></p>
<p>Disable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--no-http2</code></p>
<p>Disable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--no-ignore-try</code></p>
<p>Disable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--no-impersonate-linux-26</code></p>
<p>Disable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--no-keep-build-log</code></p>
<p>Disable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-keep-derivations</code></p>
<p>Disable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-env-derivations</code></p>
<p>Disable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-failed</code></p>
<p>Disable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--no-keep-going</code></p>
<p>Disable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--no-keep-outputs</code></p>
<p>Disable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--no-preallocate-contents</code></p>
<p>Disable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--no-print-missing</code></p>
<p>Disable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--no-pure-eval</code></p>
<p>Disable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--no-require-sigs</code></p>
<p>Disable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--no-restrict-eval</code></p>
<p>Disable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--no-run-diff-hook</code></p>
<p>Disable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--no-sandbox</code></p>
<p>Disable sandboxing.</p>
</li>
<li>
<p><code>--no-sandbox-fallback</code></p>
<p>Disable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--no-show-trace</code></p>
<p>Disable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--no-substitute</code></p>
<p>Disable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--no-sync-before-registering</code></p>
<p>Disable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--no-trace-function-calls</code></p>
<p>Disable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--no-trace-verbose</code></p>
<p>Disable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--no-use-case-hack</code></p>
<p>Disable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--no-use-cgroups</code></p>
<p>Disable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--no-use-registries</code></p>
<p>Disable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--no-use-sqlite-wal</code></p>
<p>Disable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--no-warn-dirty</code></p>
<p>Disable the <code>warn-dirty</code> setting.</p>
</li>
<li>
<p><code>--plugin-files</code> <em>value</em></p>
<p>Set the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--post-build-hook</code> <em>value</em></p>
<p>Set the <code>post-build-hook</code> setting.</p>
</li>
<li>
<p><code>--pre-build-hook</code> <em>value</em></p>
<p>Set the <code>pre-build-hook</code> setting.</p>
</li>
<li>
<p><code>--preallocate-contents</code></p>
<p>Enable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--print-missing</code></p>
<p>Enable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--pure-eval</code></p>
<p>Enable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--relaxed-sandbox</code></p>
<p>Enable sandboxing, but allow builds to disable it.</p>
</li>
<li>
<p><code>--require-sigs</code></p>
<p>Enable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--restrict-eval</code></p>
<p>Enable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--run-diff-hook</code></p>
<p>Enable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--sandbox</code></p>
<p>Enable sandboxing.</p>
</li>
<li>
<p><code>--sandbox-build-dir</code> <em>value</em></p>
<p>Set the <code>sandbox-build-dir</code> setting.</p>
</li>
<li>
<p><code>--sandbox-dev-shm-size</code> <em>value</em></p>
<p>Set the <code>sandbox-dev-shm-size</code> setting.</p>
</li>
<li>
<p><code>--sandbox-fallback</code></p>
<p>Enable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--sandbox-paths</code> <em>value</em></p>
<p>Set the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--secret-key-files</code> <em>value</em></p>
<p>Set the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--show-trace</code></p>
<p>Enable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--stalled-download-timeout</code> <em>value</em></p>
<p>Set the <code>stalled-download-timeout</code> setting.</p>
</li>
<li>
<p><code>--start-id</code> <em>value</em></p>
<p>Set the <code>start-id</code> setting.</p>
</li>
<li>
<p><code>--store</code> <em>value</em></p>
<p>Set the <code>store</code> setting.</p>
</li>
<li>
<p><code>--substitute</code></p>
<p>Enable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--substituters</code> <em>value</em></p>
<p>Set the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--sync-before-registering</code></p>
<p>Enable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--system</code> <em>value</em></p>
<p>Set the <code>system</code> setting.</p>
</li>
<li>
<p><code>--system-features</code> <em>value</em></p>
<p>Set the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--tarball-ttl</code> <em>value</em></p>
<p>Set the <code>tarball-ttl</code> setting.</p>
</li>
<li>
<p><code>--timeout</code> <em>value</em></p>
<p>Set the <code>timeout</code> setting.</p>
</li>
<li>
<p><code>--trace-function-calls</code></p>
<p>Enable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--trace-verbose</code></p>
<p>Enable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--trusted-public-keys</code> <em>value</em></p>
<p>Set the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--trusted-substituters</code> <em>value</em></p>
<p>Set the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--trusted-users</code> <em>value</em></p>
<p>Set the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--use-case-hack</code></p>
<p>Enable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--use-cgroups</code></p>
<p>Enable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--use-registries</code></p>
<p>Enable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--use-sqlite-wal</code></p>
<p>Enable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--user-agent-suffix</code> <em>value</em></p>
<p>Set the <code>user-agent-suffix</code> setting.</p>
</li>
<li>
<p><code>--warn-dirty</code></p>
<p>Enable the <code>warn-dirty</code> setting.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p><strong>Warning</strong> <br />
This program is <strong>experimental</strong> and its interface is subject to change.</p>
</blockquote>
<h1 id="name-84"><a class="header" href="#name-84">Name</a></h1>
<p><code>nix store ls</code> - show information about a path in the Nix store</p>
<h1 id="synopsis-115"><a class="header" href="#synopsis-115">Synopsis</a></h1>
<p><code>nix store ls</code> [<em>option</em>...] <em>path</em></p>
<h1 id="examples-79"><a class="header" href="#examples-79">Examples</a></h1>
<ul>
<li>
<p>To list the contents of a store path in a binary cache:</p>
<pre><code class="language-console"># nix store ls --store https://cache.nixos.org/ -lR /nix/store/0i2jd68mp5g6h2sa5k9c85rb80sn8hi9-hello-2.10
dr-xr-xr-x                    0 ./bin
-r-xr-xr-x                38184 ./bin/hello
dr-xr-xr-x                    0 ./share
…
</code></pre>
</li>
<li>
<p>To show information about a specific file in a binary cache:</p>
<pre><code class="language-console"># nix store ls --store https://cache.nixos.org/ -l /nix/store/0i2jd68mp5g6h2sa5k9c85rb80sn8hi9-hello-2.10/bin/hello
-r-xr-xr-x                38184 hello
</code></pre>
</li>
</ul>
<h1 id="description-100"><a class="header" href="#description-100">Description</a></h1>
<p>This command shows information about <em>path</em> in a Nix store. <em>path</em> can
be a top-level store path or any file inside a store path.</p>
<h1 id="options-63"><a class="header" href="#options-63">Options</a></h1>
<ul>
<li>
<p><code>--directory</code> / <code>-d</code></p>
<p>Show directories rather than their contents.</p>
</li>
<li>
<p><code>--json</code></p>
<p>Produce output in JSON format, suitable for consumption by another program.</p>
</li>
<li>
<p><code>--long</code> / <code>-l</code></p>
<p>Show detailed file information.</p>
</li>
<li>
<p><code>--recursive</code> / <code>-R</code></p>
<p>List subdirectories recursively.</p>
</li>
</ul>
<p><strong>Logging-related options:</strong></p>
<ul>
<li>
<p><code>--debug</code></p>
<p>Set the logging verbosity level to 'debug'.</p>
</li>
<li>
<p><code>--log-format</code> <em>format</em></p>
<p>Set the format of log output; one of <code>raw</code>, <code>internal-json</code>, <code>bar</code> or <code>bar-with-logs</code>.</p>
</li>
<li>
<p><code>--print-build-logs</code> / <code>-L</code></p>
<p>Print full build logs on standard error.</p>
</li>
<li>
<p><code>--quiet</code></p>
<p>Decrease the logging verbosity level.</p>
</li>
<li>
<p><code>--verbose</code> / <code>-v</code></p>
<p>Increase the logging verbosity level.</p>
</li>
</ul>
<p><strong>Miscellaneous global options:</strong></p>
<ul>
<li>
<p><code>--help</code></p>
<p>Show usage information.</p>
</li>
<li>
<p><code>--offline</code></p>
<p>Disable substituters and consider all previously downloaded files up-to-date.</p>
</li>
<li>
<p><code>--option</code> <em>name</em> <em>value</em></p>
<p>Set the Nix configuration setting <em>name</em> to <em>value</em> (overriding <code>nix.conf</code>).</p>
</li>
<li>
<p><code>--refresh</code></p>
<p>Consider all previously downloaded files out-of-date.</p>
</li>
<li>
<p><code>--version</code></p>
<p>Show version information.</p>
</li>
</ul>
<p><strong>Options to override configuration settings:</strong></p>
<ul>
<li>
<p><code>--accept-flake-config</code></p>
<p>Enable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--access-tokens</code> <em>value</em></p>
<p>Set the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--allow-dirty</code></p>
<p>Enable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--allow-import-from-derivation</code></p>
<p>Enable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--allow-new-privileges</code></p>
<p>Enable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--allow-symlinked-store</code></p>
<p>Enable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--allow-unsafe-native-code-during-evaluation</code></p>
<p>Enable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--allowed-impure-host-deps</code> <em>value</em></p>
<p>Set the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--allowed-uris</code> <em>value</em></p>
<p>Set the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--allowed-users</code> <em>value</em></p>
<p>Set the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--auto-allocate-uids</code></p>
<p>Enable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--auto-optimise-store</code></p>
<p>Enable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt</code> <em>value</em></p>
<p>Set the <code>bash-prompt</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-prefix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-prefix</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-suffix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-suffix</code> setting.</p>
</li>
<li>
<p><code>--build-hook</code> <em>value</em></p>
<p>Set the <code>build-hook</code> setting.</p>
</li>
<li>
<p><code>--build-poll-interval</code> <em>value</em></p>
<p>Set the <code>build-poll-interval</code> setting.</p>
</li>
<li>
<p><code>--build-users-group</code> <em>value</em></p>
<p>Set the <code>build-users-group</code> setting.</p>
</li>
<li>
<p><code>--builders</code> <em>value</em></p>
<p>Set the <code>builders</code> setting.</p>
</li>
<li>
<p><code>--builders-use-substitutes</code></p>
<p>Enable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--commit-lockfile-summary</code> <em>value</em></p>
<p>Set the <code>commit-lockfile-summary</code> setting.</p>
</li>
<li>
<p><code>--compress-build-log</code></p>
<p>Enable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--connect-timeout</code> <em>value</em></p>
<p>Set the <code>connect-timeout</code> setting.</p>
</li>
<li>
<p><code>--cores</code> <em>value</em></p>
<p>Set the <code>cores</code> setting.</p>
</li>
<li>
<p><code>--diff-hook</code> <em>value</em></p>
<p>Set the <code>diff-hook</code> setting.</p>
</li>
<li>
<p><code>--download-attempts</code> <em>value</em></p>
<p>Set the <code>download-attempts</code> setting.</p>
</li>
<li>
<p><code>--download-speed</code> <em>value</em></p>
<p>Set the <code>download-speed</code> setting.</p>
</li>
<li>
<p><code>--eval-cache</code></p>
<p>Enable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--experimental-features</code> <em>value</em></p>
<p>Set the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-access-tokens</code> <em>value</em></p>
<p>Append to the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-impure-host-deps</code> <em>value</em></p>
<p>Append to the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-uris</code> <em>value</em></p>
<p>Append to the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-users</code> <em>value</em></p>
<p>Append to the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--extra-experimental-features</code> <em>value</em></p>
<p>Append to the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-extra-platforms</code> <em>value</em></p>
<p>Append to the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-hashed-mirrors</code> <em>value</em></p>
<p>Append to the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--extra-ignored-acls</code> <em>value</em></p>
<p>Append to the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--extra-nix-path</code> <em>value</em></p>
<p>Append to the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--extra-platforms</code> <em>value</em></p>
<p>Set the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-plugin-files</code> <em>value</em></p>
<p>Append to the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--extra-sandbox-paths</code> <em>value</em></p>
<p>Append to the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--extra-secret-key-files</code> <em>value</em></p>
<p>Append to the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--extra-substituters</code> <em>value</em></p>
<p>Append to the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-system-features</code> <em>value</em></p>
<p>Append to the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-public-keys</code> <em>value</em></p>
<p>Append to the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-substituters</code> <em>value</em></p>
<p>Append to the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-users</code> <em>value</em></p>
<p>Append to the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--fallback</code></p>
<p>Enable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--filter-syscalls</code></p>
<p>Enable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--flake-registry</code> <em>value</em></p>
<p>Set the <code>flake-registry</code> setting.</p>
</li>
<li>
<p><code>--fsync-metadata</code></p>
<p>Enable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--gc-reserved-space</code> <em>value</em></p>
<p>Set the <code>gc-reserved-space</code> setting.</p>
</li>
<li>
<p><code>--hashed-mirrors</code> <em>value</em></p>
<p>Set the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--http-connections</code> <em>value</em></p>
<p>Set the <code>http-connections</code> setting.</p>
</li>
<li>
<p><code>--http2</code></p>
<p>Enable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--id-count</code> <em>value</em></p>
<p>Set the <code>id-count</code> setting.</p>
</li>
<li>
<p><code>--ignore-try</code></p>
<p>Enable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--ignored-acls</code> <em>value</em></p>
<p>Set the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--impersonate-linux-26</code></p>
<p>Enable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--keep-build-log</code></p>
<p>Enable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--keep-derivations</code></p>
<p>Enable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-env-derivations</code></p>
<p>Enable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-failed</code></p>
<p>Enable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--keep-going</code></p>
<p>Enable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--keep-outputs</code></p>
<p>Enable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--log-lines</code> <em>value</em></p>
<p>Set the <code>log-lines</code> setting.</p>
</li>
<li>
<p><code>--max-build-log-size</code> <em>value</em></p>
<p>Set the <code>max-build-log-size</code> setting.</p>
</li>
<li>
<p><code>--max-free</code> <em>value</em></p>
<p>Set the <code>max-free</code> setting.</p>
</li>
<li>
<p><code>--max-jobs</code> <em>value</em></p>
<p>Set the <code>max-jobs</code> setting.</p>
</li>
<li>
<p><code>--max-silent-time</code> <em>value</em></p>
<p>Set the <code>max-silent-time</code> setting.</p>
</li>
<li>
<p><code>--min-free</code> <em>value</em></p>
<p>Set the <code>min-free</code> setting.</p>
</li>
<li>
<p><code>--min-free-check-interval</code> <em>value</em></p>
<p>Set the <code>min-free-check-interval</code> setting.</p>
</li>
<li>
<p><code>--nar-buffer-size</code> <em>value</em></p>
<p>Set the <code>nar-buffer-size</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-negative-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-negative-ttl</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-positive-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-positive-ttl</code> setting.</p>
</li>
<li>
<p><code>--netrc-file</code> <em>value</em></p>
<p>Set the <code>netrc-file</code> setting.</p>
</li>
<li>
<p><code>--nix-path</code> <em>value</em></p>
<p>Set the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--no-accept-flake-config</code></p>
<p>Disable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--no-allow-dirty</code></p>
<p>Disable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--no-allow-import-from-derivation</code></p>
<p>Disable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--no-allow-new-privileges</code></p>
<p>Disable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--no-allow-symlinked-store</code></p>
<p>Disable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--no-allow-unsafe-native-code-during-evaluation</code></p>
<p>Disable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--no-auto-allocate-uids</code></p>
<p>Disable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--no-auto-optimise-store</code></p>
<p>Disable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--no-builders-use-substitutes</code></p>
<p>Disable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--no-compress-build-log</code></p>
<p>Disable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-eval-cache</code></p>
<p>Disable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--no-fallback</code></p>
<p>Disable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--no-filter-syscalls</code></p>
<p>Disable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--no-fsync-metadata</code></p>
<p>Disable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--no-http2</code></p>
<p>Disable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--no-ignore-try</code></p>
<p>Disable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--no-impersonate-linux-26</code></p>
<p>Disable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--no-keep-build-log</code></p>
<p>Disable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-keep-derivations</code></p>
<p>Disable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-env-derivations</code></p>
<p>Disable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-failed</code></p>
<p>Disable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--no-keep-going</code></p>
<p>Disable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--no-keep-outputs</code></p>
<p>Disable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--no-preallocate-contents</code></p>
<p>Disable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--no-print-missing</code></p>
<p>Disable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--no-pure-eval</code></p>
<p>Disable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--no-require-sigs</code></p>
<p>Disable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--no-restrict-eval</code></p>
<p>Disable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--no-run-diff-hook</code></p>
<p>Disable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--no-sandbox</code></p>
<p>Disable sandboxing.</p>
</li>
<li>
<p><code>--no-sandbox-fallback</code></p>
<p>Disable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--no-show-trace</code></p>
<p>Disable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--no-substitute</code></p>
<p>Disable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--no-sync-before-registering</code></p>
<p>Disable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--no-trace-function-calls</code></p>
<p>Disable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--no-trace-verbose</code></p>
<p>Disable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--no-use-case-hack</code></p>
<p>Disable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--no-use-cgroups</code></p>
<p>Disable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--no-use-registries</code></p>
<p>Disable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--no-use-sqlite-wal</code></p>
<p>Disable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--no-warn-dirty</code></p>
<p>Disable the <code>warn-dirty</code> setting.</p>
</li>
<li>
<p><code>--plugin-files</code> <em>value</em></p>
<p>Set the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--post-build-hook</code> <em>value</em></p>
<p>Set the <code>post-build-hook</code> setting.</p>
</li>
<li>
<p><code>--pre-build-hook</code> <em>value</em></p>
<p>Set the <code>pre-build-hook</code> setting.</p>
</li>
<li>
<p><code>--preallocate-contents</code></p>
<p>Enable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--print-missing</code></p>
<p>Enable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--pure-eval</code></p>
<p>Enable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--relaxed-sandbox</code></p>
<p>Enable sandboxing, but allow builds to disable it.</p>
</li>
<li>
<p><code>--require-sigs</code></p>
<p>Enable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--restrict-eval</code></p>
<p>Enable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--run-diff-hook</code></p>
<p>Enable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--sandbox</code></p>
<p>Enable sandboxing.</p>
</li>
<li>
<p><code>--sandbox-build-dir</code> <em>value</em></p>
<p>Set the <code>sandbox-build-dir</code> setting.</p>
</li>
<li>
<p><code>--sandbox-dev-shm-size</code> <em>value</em></p>
<p>Set the <code>sandbox-dev-shm-size</code> setting.</p>
</li>
<li>
<p><code>--sandbox-fallback</code></p>
<p>Enable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--sandbox-paths</code> <em>value</em></p>
<p>Set the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--secret-key-files</code> <em>value</em></p>
<p>Set the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--show-trace</code></p>
<p>Enable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--stalled-download-timeout</code> <em>value</em></p>
<p>Set the <code>stalled-download-timeout</code> setting.</p>
</li>
<li>
<p><code>--start-id</code> <em>value</em></p>
<p>Set the <code>start-id</code> setting.</p>
</li>
<li>
<p><code>--store</code> <em>value</em></p>
<p>Set the <code>store</code> setting.</p>
</li>
<li>
<p><code>--substitute</code></p>
<p>Enable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--substituters</code> <em>value</em></p>
<p>Set the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--sync-before-registering</code></p>
<p>Enable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--system</code> <em>value</em></p>
<p>Set the <code>system</code> setting.</p>
</li>
<li>
<p><code>--system-features</code> <em>value</em></p>
<p>Set the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--tarball-ttl</code> <em>value</em></p>
<p>Set the <code>tarball-ttl</code> setting.</p>
</li>
<li>
<p><code>--timeout</code> <em>value</em></p>
<p>Set the <code>timeout</code> setting.</p>
</li>
<li>
<p><code>--trace-function-calls</code></p>
<p>Enable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--trace-verbose</code></p>
<p>Enable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--trusted-public-keys</code> <em>value</em></p>
<p>Set the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--trusted-substituters</code> <em>value</em></p>
<p>Set the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--trusted-users</code> <em>value</em></p>
<p>Set the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--use-case-hack</code></p>
<p>Enable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--use-cgroups</code></p>
<p>Enable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--use-registries</code></p>
<p>Enable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--use-sqlite-wal</code></p>
<p>Enable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--user-agent-suffix</code> <em>value</em></p>
<p>Set the <code>user-agent-suffix</code> setting.</p>
</li>
<li>
<p><code>--warn-dirty</code></p>
<p>Enable the <code>warn-dirty</code> setting.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p><strong>Warning</strong> <br />
This program is <strong>experimental</strong> and its interface is subject to change.</p>
</blockquote>
<h1 id="name-85"><a class="header" href="#name-85">Name</a></h1>
<p><code>nix store make-content-addressed</code> - rewrite a path or closure to content-addressed form</p>
<h1 id="synopsis-116"><a class="header" href="#synopsis-116">Synopsis</a></h1>
<p><code>nix store make-content-addressed</code> [<em>option</em>...] <em>installables</em>...</p>
<h1 id="examples-80"><a class="header" href="#examples-80">Examples</a></h1>
<ul>
<li>
<p>Create a content-addressed representation of the closure of GNU Hello:</p>
<pre><code class="language-console"># nix store make-content-addressed nixpkgs#hello
…
rewrote '/nix/store/v5sv61sszx301i0x6xysaqzla09nksnd-hello-2.10' to '/nix/store/5skmmcb9svys5lj3kbsrjg7vf2irid63-hello-2.10'
</code></pre>
<p>Since the resulting paths are content-addressed, they are always
trusted and don't need signatures to copied to another store:</p>
<pre><code class="language-console"># nix copy --to /tmp/nix --trusted-public-keys '' /nix/store/5skmmcb9svys5lj3kbsrjg7vf2irid63-hello-2.10
</code></pre>
<p>By contrast, the original closure is input-addressed, so it does
need signatures to be trusted:</p>
<pre><code class="language-console"># nix copy --to /tmp/nix --trusted-public-keys '' nixpkgs#hello
cannot add path '/nix/store/zy9wbxwcygrwnh8n2w9qbbcr6zk87m26-libunistring-0.9.10' because it lacks a signature by a trusted key
</code></pre>
</li>
<li>
<p>Create a content-addressed representation of the current NixOS
system closure:</p>
<pre><code class="language-console"># nix store make-content-addressed /run/current-system
</code></pre>
</li>
</ul>
<h1 id="description-101"><a class="header" href="#description-101">Description</a></h1>
<p>This command converts the closure of the store paths specified by
<em>installables</em> to content-addressed form. Nix store paths are usually
<em>input-addressed</em>, meaning that the hash part of the store path is
computed from the contents of the derivation (i.e., the build-time
dependency graph). Input-addressed paths need to be signed by a
trusted key if you want to import them into a store, because we need
to trust that the contents of the path were actually built by the
derivation.</p>
<p>By contrast, in a <em>content-addressed</em> path, the hash part is computed
from the contents of the path. This allows the contents of the path to
be verified without any additional information such as
signatures. This means that a command like</p>
<pre><code class="language-console"># nix store build /nix/store/5skmmcb9svys5lj3kbsrjg7vf2irid63-hello-2.10 \
    --substituters https://my-cache.example.org
</code></pre>
<p>will succeed even if the binary cache <code>https://my-cache.example.org</code>
doesn't present any signatures.</p>
<h1 id="options-64"><a class="header" href="#options-64">Options</a></h1>
<ul>
<li>
<p><code>--from</code> <em>store-uri</em></p>
<p>URL of the source Nix store.</p>
</li>
<li>
<p><code>--json</code></p>
<p>Produce output in JSON format, suitable for consumption by another program.</p>
</li>
<li>
<p><code>--to</code> <em>store-uri</em></p>
<p>URL of the destination Nix store.</p>
</li>
</ul>
<p><strong>Common evaluation options:</strong></p>
<ul>
<li>
<p><code>--arg</code> <em>name</em> <em>expr</em></p>
<p>Pass the value <em>expr</em> as the argument <em>name</em> to Nix functions.</p>
</li>
<li>
<p><code>--argstr</code> <em>name</em> <em>string</em></p>
<p>Pass the string <em>string</em> as the argument <em>name</em> to Nix functions.</p>
</li>
<li>
<p><code>--debugger</code></p>
<p>Start an interactive environment if evaluation fails.</p>
</li>
<li>
<p><code>--eval-store</code> <em>store-url</em></p>
<p>The Nix store to use for evaluations.</p>
</li>
<li>
<p><code>--impure</code></p>
<p>Allow access to mutable paths and repositories.</p>
</li>
<li>
<p><code>--include</code> / <code>-I</code> <em>path</em></p>
<p>Add <em>path</em> to the Nix search path. The Nix search path is
initialized from the colon-separated <a href="command-ref/new-cli/../../command-ref/env-common.html#env-NIX_PATH"><code>NIX_PATH</code></a> environment
variable, and is used to look up the location of Nix expressions using <a href="command-ref/new-cli/../../language/values.html#type-path">paths</a> enclosed in angle
brackets (i.e., <code>&lt;nixpkgs&gt;</code>).</p>
<p>For instance, passing</p>
<pre><code>-I /home/eelco/Dev
-I /etc/nixos
</code></pre>
<p>will cause Nix to look for paths relative to <code>/home/eelco/Dev</code> and
<code>/etc/nixos</code>, in that order. This is equivalent to setting the
<code>NIX_PATH</code> environment variable to</p>
<pre><code>/home/eelco/Dev:/etc/nixos
</code></pre>
<p>It is also possible to match paths against a prefix. For example,
passing</p>
<pre><code>-I nixpkgs=/home/eelco/Dev/nixpkgs-branch
-I /etc/nixos
</code></pre>
<p>will cause Nix to search for <code>&lt;nixpkgs/path&gt;</code> in
<code>/home/eelco/Dev/nixpkgs-branch/path</code> and <code>/etc/nixos/nixpkgs/path</code>.</p>
<p>If a path in the Nix search path starts with <code>http://</code> or <code>https://</code>,
it is interpreted as the URL of a tarball that will be downloaded and
unpacked to a temporary location. The tarball must consist of a single
top-level directory. For example, passing</p>
<pre><code>-I nixpkgs=https://github.com/NixOS/nixpkgs/archive/master.tar.gz
</code></pre>
<p>tells Nix to download and use the current contents of the <code>master</code>
branch in the <code>nixpkgs</code> repository.</p>
<p>The URLs of the tarballs from the official <code>nixos.org</code> channels
(see <a href="command-ref/new-cli/../nix-channel.html">the manual page for <code>nix-channel</code></a>) can be
abbreviated as <code>channel:&lt;channel-name&gt;</code>. For instance, the
following two flags are equivalent:</p>
<pre><code>-I nixpkgs=channel:nixos-21.05
-I nixpkgs=https://nixos.org/channels/nixos-21.05/nixexprs.tar.xz
</code></pre>
<p>You can also fetch source trees using <a href="command-ref/new-cli/./nix3-flake.html#url-like-syntax">flake URLs</a> and add them to the
search path. For instance,</p>
<pre><code>-I nixpkgs=flake:nixpkgs
</code></pre>
<p>specifies that the prefix <code>nixpkgs</code> shall refer to the source tree
downloaded from the <code>nixpkgs</code> entry in the flake registry. Similarly,</p>
<pre><code>-I nixpkgs=flake:github:NixOS/nixpkgs/nixos-22.05
</code></pre>
<p>makes <code>&lt;nixpkgs&gt;</code> refer to a particular branch of the
<code>NixOS/nixpkgs</code> repository on GitHub.</p>
</li>
<li>
<p><code>--override-flake</code> <em>original-ref</em> <em>resolved-ref</em></p>
<p>Override the flake registries, redirecting <em>original-ref</em> to <em>resolved-ref</em>.</p>
</li>
</ul>
<p><strong>Common flake-related options:</strong></p>
<ul>
<li>
<p><code>--commit-lock-file</code></p>
<p>Commit changes to the flake's lock file.</p>
</li>
<li>
<p><code>--inputs-from</code> <em>flake-url</em></p>
<p>Use the inputs of the specified flake as registry entries.</p>
</li>
<li>
<p><code>--no-registries</code></p>
<p>Don't allow lookups in the flake registries. This option is deprecated; use <code>--no-use-registries</code>.</p>
</li>
<li>
<p><code>--no-update-lock-file</code></p>
<p>Do not allow any updates to the flake's lock file.</p>
</li>
<li>
<p><code>--no-write-lock-file</code></p>
<p>Do not write the flake's newly generated lock file.</p>
</li>
<li>
<p><code>--override-input</code> <em>input-path</em> <em>flake-url</em></p>
<p>Override a specific flake input (e.g. <code>dwarffs/nixpkgs</code>). This implies <code>--no-write-lock-file</code>.</p>
</li>
<li>
<p><code>--recreate-lock-file</code></p>
<p>Recreate the flake's lock file from scratch.</p>
</li>
<li>
<p><code>--update-input</code> <em>input-path</em></p>
<p>Update a specific flake input (ignoring its previous entry in the lock file).</p>
</li>
</ul>
<p><strong>Logging-related options:</strong></p>
<ul>
<li>
<p><code>--debug</code></p>
<p>Set the logging verbosity level to 'debug'.</p>
</li>
<li>
<p><code>--log-format</code> <em>format</em></p>
<p>Set the format of log output; one of <code>raw</code>, <code>internal-json</code>, <code>bar</code> or <code>bar-with-logs</code>.</p>
</li>
<li>
<p><code>--print-build-logs</code> / <code>-L</code></p>
<p>Print full build logs on standard error.</p>
</li>
<li>
<p><code>--quiet</code></p>
<p>Decrease the logging verbosity level.</p>
</li>
<li>
<p><code>--verbose</code> / <code>-v</code></p>
<p>Increase the logging verbosity level.</p>
</li>
</ul>
<p><strong>Miscellaneous global options:</strong></p>
<ul>
<li>
<p><code>--help</code></p>
<p>Show usage information.</p>
</li>
<li>
<p><code>--offline</code></p>
<p>Disable substituters and consider all previously downloaded files up-to-date.</p>
</li>
<li>
<p><code>--option</code> <em>name</em> <em>value</em></p>
<p>Set the Nix configuration setting <em>name</em> to <em>value</em> (overriding <code>nix.conf</code>).</p>
</li>
<li>
<p><code>--refresh</code></p>
<p>Consider all previously downloaded files out-of-date.</p>
</li>
<li>
<p><code>--version</code></p>
<p>Show version information.</p>
</li>
</ul>
<p><strong>Options that change the interpretation of installables:</strong></p>
<ul>
<li>
<p><code>--all</code></p>
<p>Apply the operation to every store path.</p>
</li>
<li>
<p><code>--derivation</code></p>
<p>Operate on the <a href="command-ref/new-cli/../../glossary.html#gloss-store-derivation">store derivation</a> rather than its outputs.</p>
</li>
<li>
<p><code>--expr</code> <em>expr</em></p>
<p>Interpret installables as attribute paths relative to the Nix expression <em>expr</em>.</p>
</li>
<li>
<p><code>--file</code> / <code>-f</code> <em>file</em></p>
<p>Interpret installables as attribute paths relative to the Nix expression stored in <em>file</em>. If <em>file</em> is the character -, then a Nix expression will be read from standard input. Implies <code>--impure</code>.</p>
</li>
<li>
<p><code>--recursive</code> / <code>-r</code></p>
<p>Apply operation to closure of the specified paths.</p>
</li>
</ul>
<p><strong>Options to override configuration settings:</strong></p>
<ul>
<li>
<p><code>--accept-flake-config</code></p>
<p>Enable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--access-tokens</code> <em>value</em></p>
<p>Set the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--allow-dirty</code></p>
<p>Enable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--allow-import-from-derivation</code></p>
<p>Enable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--allow-new-privileges</code></p>
<p>Enable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--allow-symlinked-store</code></p>
<p>Enable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--allow-unsafe-native-code-during-evaluation</code></p>
<p>Enable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--allowed-impure-host-deps</code> <em>value</em></p>
<p>Set the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--allowed-uris</code> <em>value</em></p>
<p>Set the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--allowed-users</code> <em>value</em></p>
<p>Set the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--auto-allocate-uids</code></p>
<p>Enable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--auto-optimise-store</code></p>
<p>Enable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt</code> <em>value</em></p>
<p>Set the <code>bash-prompt</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-prefix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-prefix</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-suffix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-suffix</code> setting.</p>
</li>
<li>
<p><code>--build-hook</code> <em>value</em></p>
<p>Set the <code>build-hook</code> setting.</p>
</li>
<li>
<p><code>--build-poll-interval</code> <em>value</em></p>
<p>Set the <code>build-poll-interval</code> setting.</p>
</li>
<li>
<p><code>--build-users-group</code> <em>value</em></p>
<p>Set the <code>build-users-group</code> setting.</p>
</li>
<li>
<p><code>--builders</code> <em>value</em></p>
<p>Set the <code>builders</code> setting.</p>
</li>
<li>
<p><code>--builders-use-substitutes</code></p>
<p>Enable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--commit-lockfile-summary</code> <em>value</em></p>
<p>Set the <code>commit-lockfile-summary</code> setting.</p>
</li>
<li>
<p><code>--compress-build-log</code></p>
<p>Enable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--connect-timeout</code> <em>value</em></p>
<p>Set the <code>connect-timeout</code> setting.</p>
</li>
<li>
<p><code>--cores</code> <em>value</em></p>
<p>Set the <code>cores</code> setting.</p>
</li>
<li>
<p><code>--diff-hook</code> <em>value</em></p>
<p>Set the <code>diff-hook</code> setting.</p>
</li>
<li>
<p><code>--download-attempts</code> <em>value</em></p>
<p>Set the <code>download-attempts</code> setting.</p>
</li>
<li>
<p><code>--download-speed</code> <em>value</em></p>
<p>Set the <code>download-speed</code> setting.</p>
</li>
<li>
<p><code>--eval-cache</code></p>
<p>Enable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--experimental-features</code> <em>value</em></p>
<p>Set the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-access-tokens</code> <em>value</em></p>
<p>Append to the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-impure-host-deps</code> <em>value</em></p>
<p>Append to the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-uris</code> <em>value</em></p>
<p>Append to the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-users</code> <em>value</em></p>
<p>Append to the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--extra-experimental-features</code> <em>value</em></p>
<p>Append to the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-extra-platforms</code> <em>value</em></p>
<p>Append to the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-hashed-mirrors</code> <em>value</em></p>
<p>Append to the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--extra-ignored-acls</code> <em>value</em></p>
<p>Append to the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--extra-nix-path</code> <em>value</em></p>
<p>Append to the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--extra-platforms</code> <em>value</em></p>
<p>Set the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-plugin-files</code> <em>value</em></p>
<p>Append to the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--extra-sandbox-paths</code> <em>value</em></p>
<p>Append to the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--extra-secret-key-files</code> <em>value</em></p>
<p>Append to the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--extra-substituters</code> <em>value</em></p>
<p>Append to the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-system-features</code> <em>value</em></p>
<p>Append to the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-public-keys</code> <em>value</em></p>
<p>Append to the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-substituters</code> <em>value</em></p>
<p>Append to the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-users</code> <em>value</em></p>
<p>Append to the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--fallback</code></p>
<p>Enable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--filter-syscalls</code></p>
<p>Enable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--flake-registry</code> <em>value</em></p>
<p>Set the <code>flake-registry</code> setting.</p>
</li>
<li>
<p><code>--fsync-metadata</code></p>
<p>Enable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--gc-reserved-space</code> <em>value</em></p>
<p>Set the <code>gc-reserved-space</code> setting.</p>
</li>
<li>
<p><code>--hashed-mirrors</code> <em>value</em></p>
<p>Set the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--http-connections</code> <em>value</em></p>
<p>Set the <code>http-connections</code> setting.</p>
</li>
<li>
<p><code>--http2</code></p>
<p>Enable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--id-count</code> <em>value</em></p>
<p>Set the <code>id-count</code> setting.</p>
</li>
<li>
<p><code>--ignore-try</code></p>
<p>Enable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--ignored-acls</code> <em>value</em></p>
<p>Set the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--impersonate-linux-26</code></p>
<p>Enable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--keep-build-log</code></p>
<p>Enable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--keep-derivations</code></p>
<p>Enable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-env-derivations</code></p>
<p>Enable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-failed</code></p>
<p>Enable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--keep-going</code></p>
<p>Enable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--keep-outputs</code></p>
<p>Enable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--log-lines</code> <em>value</em></p>
<p>Set the <code>log-lines</code> setting.</p>
</li>
<li>
<p><code>--max-build-log-size</code> <em>value</em></p>
<p>Set the <code>max-build-log-size</code> setting.</p>
</li>
<li>
<p><code>--max-free</code> <em>value</em></p>
<p>Set the <code>max-free</code> setting.</p>
</li>
<li>
<p><code>--max-jobs</code> <em>value</em></p>
<p>Set the <code>max-jobs</code> setting.</p>
</li>
<li>
<p><code>--max-silent-time</code> <em>value</em></p>
<p>Set the <code>max-silent-time</code> setting.</p>
</li>
<li>
<p><code>--min-free</code> <em>value</em></p>
<p>Set the <code>min-free</code> setting.</p>
</li>
<li>
<p><code>--min-free-check-interval</code> <em>value</em></p>
<p>Set the <code>min-free-check-interval</code> setting.</p>
</li>
<li>
<p><code>--nar-buffer-size</code> <em>value</em></p>
<p>Set the <code>nar-buffer-size</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-negative-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-negative-ttl</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-positive-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-positive-ttl</code> setting.</p>
</li>
<li>
<p><code>--netrc-file</code> <em>value</em></p>
<p>Set the <code>netrc-file</code> setting.</p>
</li>
<li>
<p><code>--nix-path</code> <em>value</em></p>
<p>Set the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--no-accept-flake-config</code></p>
<p>Disable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--no-allow-dirty</code></p>
<p>Disable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--no-allow-import-from-derivation</code></p>
<p>Disable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--no-allow-new-privileges</code></p>
<p>Disable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--no-allow-symlinked-store</code></p>
<p>Disable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--no-allow-unsafe-native-code-during-evaluation</code></p>
<p>Disable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--no-auto-allocate-uids</code></p>
<p>Disable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--no-auto-optimise-store</code></p>
<p>Disable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--no-builders-use-substitutes</code></p>
<p>Disable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--no-compress-build-log</code></p>
<p>Disable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-eval-cache</code></p>
<p>Disable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--no-fallback</code></p>
<p>Disable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--no-filter-syscalls</code></p>
<p>Disable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--no-fsync-metadata</code></p>
<p>Disable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--no-http2</code></p>
<p>Disable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--no-ignore-try</code></p>
<p>Disable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--no-impersonate-linux-26</code></p>
<p>Disable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--no-keep-build-log</code></p>
<p>Disable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-keep-derivations</code></p>
<p>Disable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-env-derivations</code></p>
<p>Disable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-failed</code></p>
<p>Disable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--no-keep-going</code></p>
<p>Disable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--no-keep-outputs</code></p>
<p>Disable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--no-preallocate-contents</code></p>
<p>Disable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--no-print-missing</code></p>
<p>Disable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--no-pure-eval</code></p>
<p>Disable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--no-require-sigs</code></p>
<p>Disable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--no-restrict-eval</code></p>
<p>Disable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--no-run-diff-hook</code></p>
<p>Disable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--no-sandbox</code></p>
<p>Disable sandboxing.</p>
</li>
<li>
<p><code>--no-sandbox-fallback</code></p>
<p>Disable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--no-show-trace</code></p>
<p>Disable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--no-substitute</code></p>
<p>Disable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--no-sync-before-registering</code></p>
<p>Disable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--no-trace-function-calls</code></p>
<p>Disable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--no-trace-verbose</code></p>
<p>Disable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--no-use-case-hack</code></p>
<p>Disable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--no-use-cgroups</code></p>
<p>Disable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--no-use-registries</code></p>
<p>Disable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--no-use-sqlite-wal</code></p>
<p>Disable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--no-warn-dirty</code></p>
<p>Disable the <code>warn-dirty</code> setting.</p>
</li>
<li>
<p><code>--plugin-files</code> <em>value</em></p>
<p>Set the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--post-build-hook</code> <em>value</em></p>
<p>Set the <code>post-build-hook</code> setting.</p>
</li>
<li>
<p><code>--pre-build-hook</code> <em>value</em></p>
<p>Set the <code>pre-build-hook</code> setting.</p>
</li>
<li>
<p><code>--preallocate-contents</code></p>
<p>Enable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--print-missing</code></p>
<p>Enable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--pure-eval</code></p>
<p>Enable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--relaxed-sandbox</code></p>
<p>Enable sandboxing, but allow builds to disable it.</p>
</li>
<li>
<p><code>--require-sigs</code></p>
<p>Enable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--restrict-eval</code></p>
<p>Enable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--run-diff-hook</code></p>
<p>Enable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--sandbox</code></p>
<p>Enable sandboxing.</p>
</li>
<li>
<p><code>--sandbox-build-dir</code> <em>value</em></p>
<p>Set the <code>sandbox-build-dir</code> setting.</p>
</li>
<li>
<p><code>--sandbox-dev-shm-size</code> <em>value</em></p>
<p>Set the <code>sandbox-dev-shm-size</code> setting.</p>
</li>
<li>
<p><code>--sandbox-fallback</code></p>
<p>Enable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--sandbox-paths</code> <em>value</em></p>
<p>Set the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--secret-key-files</code> <em>value</em></p>
<p>Set the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--show-trace</code></p>
<p>Enable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--stalled-download-timeout</code> <em>value</em></p>
<p>Set the <code>stalled-download-timeout</code> setting.</p>
</li>
<li>
<p><code>--start-id</code> <em>value</em></p>
<p>Set the <code>start-id</code> setting.</p>
</li>
<li>
<p><code>--store</code> <em>value</em></p>
<p>Set the <code>store</code> setting.</p>
</li>
<li>
<p><code>--substitute</code></p>
<p>Enable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--substituters</code> <em>value</em></p>
<p>Set the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--sync-before-registering</code></p>
<p>Enable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--system</code> <em>value</em></p>
<p>Set the <code>system</code> setting.</p>
</li>
<li>
<p><code>--system-features</code> <em>value</em></p>
<p>Set the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--tarball-ttl</code> <em>value</em></p>
<p>Set the <code>tarball-ttl</code> setting.</p>
</li>
<li>
<p><code>--timeout</code> <em>value</em></p>
<p>Set the <code>timeout</code> setting.</p>
</li>
<li>
<p><code>--trace-function-calls</code></p>
<p>Enable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--trace-verbose</code></p>
<p>Enable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--trusted-public-keys</code> <em>value</em></p>
<p>Set the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--trusted-substituters</code> <em>value</em></p>
<p>Set the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--trusted-users</code> <em>value</em></p>
<p>Set the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--use-case-hack</code></p>
<p>Enable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--use-cgroups</code></p>
<p>Enable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--use-registries</code></p>
<p>Enable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--use-sqlite-wal</code></p>
<p>Enable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--user-agent-suffix</code> <em>value</em></p>
<p>Set the <code>user-agent-suffix</code> setting.</p>
</li>
<li>
<p><code>--warn-dirty</code></p>
<p>Enable the <code>warn-dirty</code> setting.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p><strong>Warning</strong> <br />
This program is <strong>experimental</strong> and its interface is subject to change.</p>
</blockquote>
<h1 id="name-86"><a class="header" href="#name-86">Name</a></h1>
<p><code>nix store optimise</code> - replace identical files in the store by hard links</p>
<h1 id="synopsis-117"><a class="header" href="#synopsis-117">Synopsis</a></h1>
<p><code>nix store optimise</code> [<em>option</em>...] </p>
<h1 id="examples-81"><a class="header" href="#examples-81">Examples</a></h1>
<ul>
<li>
<p>Optimise the Nix store:</p>
<pre><code class="language-console">nix store optimise
</code></pre>
</li>
</ul>
<h1 id="description-102"><a class="header" href="#description-102">Description</a></h1>
<p>This command deduplicates the Nix store: it scans the store for
regular files with identical contents, and replaces them with hard
links to a single instance.</p>
<p>Note that you can also set <code>auto-optimise-store</code> to <code>true</code> in
<code>nix.conf</code> to perform this optimisation incrementally whenever a new
path is added to the Nix store. To make this efficient, Nix maintains
a content-addressed index of all the files in the Nix store in the
directory <code>/nix/store/.links/</code>.</p>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p><strong>Warning</strong> <br />
This program is <strong>experimental</strong> and its interface is subject to change.</p>
</blockquote>
<h1 id="name-87"><a class="header" href="#name-87">Name</a></h1>
<p><code>nix store path-from-hash-part</code> - get a store path from its hash part</p>
<h1 id="synopsis-118"><a class="header" href="#synopsis-118">Synopsis</a></h1>
<p><code>nix store path-from-hash-part</code> [<em>option</em>...] <em>hash-part</em></p>
<h1 id="examples-82"><a class="header" href="#examples-82">Examples</a></h1>
<ul>
<li>
<p>Return the full store path with the given hash part:</p>
<pre><code class="language-console"># nix store path-from-hash-part --store https://cache.nixos.org/ 0i2jd68mp5g6h2sa5k9c85rb80sn8hi9
/nix/store/0i2jd68mp5g6h2sa5k9c85rb80sn8hi9-hello-2.10
</code></pre>
</li>
</ul>
<h1 id="description-103"><a class="header" href="#description-103">Description</a></h1>
<p>Given the hash part of a store path (that is, the 32 characters
following <code>/nix/store/</code>), return the full store path. This is
primarily useful in the implementation of binary caches, where a
request for a <code>.narinfo</code> file only supplies the hash part
(e.g. <code>https://cache.nixos.org/0i2jd68mp5g6h2sa5k9c85rb80sn8hi9.narinfo</code>).</p>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p><strong>Warning</strong> <br />
This program is <strong>experimental</strong> and its interface is subject to change.</p>
</blockquote>
<h1 id="name-88"><a class="header" href="#name-88">Name</a></h1>
<p><code>nix store ping</code> - test whether a store can be accessed</p>
<h1 id="synopsis-119"><a class="header" href="#synopsis-119">Synopsis</a></h1>
<p><code>nix store ping</code> [<em>option</em>...] </p>
<h1 id="examples-83"><a class="header" href="#examples-83">Examples</a></h1>
<ul>
<li>
<p>Test whether connecting to a remote Nix store via SSH works:</p>
<pre><code class="language-console"># nix store ping --store ssh://mac1
</code></pre>
</li>
<li>
<p>Test whether a URL is a valid binary cache:</p>
<pre><code class="language-console"># nix store ping --store https://cache.nixos.org
</code></pre>
</li>
<li>
<p>Test whether the Nix daemon is up and running:</p>
<pre><code class="language-console"># nix store ping --store daemon
</code></pre>
</li>
</ul>
<h1 id="description-104"><a class="header" href="#description-104">Description</a></h1>
<p>This command tests whether a particular Nix store (specified by the
argument <code>--store</code> <em>url</em>) can be accessed. What this means is
dependent on the type of the store. For instance, for an SSH store it
means that Nix can connect to the specified machine.</p>
<p>If the command succeeds, Nix returns a exit code of 0 and does not
print any output.</p>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p><strong>Warning</strong> <br />
This program is <strong>experimental</strong> and its interface is subject to change.</p>
</blockquote>
<h1 id="name-89"><a class="header" href="#name-89">Name</a></h1>
<p><code>nix store prefetch-file</code> - download a file into the Nix store</p>
<h1 id="synopsis-120"><a class="header" href="#synopsis-120">Synopsis</a></h1>
<p><code>nix store prefetch-file</code> [<em>option</em>...] <em>url</em></p>
<h1 id="examples-84"><a class="header" href="#examples-84">Examples</a></h1>
<ul>
<li>
<p>Download a file to the Nix store:</p>
<pre><code class="language-console"># nix store prefetch-file https://releases.nixos.org/nix/nix-2.3.10/nix-2.3.10.tar.xz
Downloaded 'https://releases.nixos.org/nix/nix-2.3.10/nix-2.3.10.tar.xz' to
'/nix/store/vbdbi42hgnc4h7pyqzp6h2yf77kw93aw-source' (hash
'sha256-qKheVd5D0BervxMDbt+1hnTKE2aRWC8XCAwc0SeHt6s=').
</code></pre>
</li>
<li>
<p>Download a file and get the SHA-512 hash:</p>
<pre><code class="language-console"># nix store prefetch-file --json --hash-type sha512 \
    https://releases.nixos.org/nix/nix-2.3.10/nix-2.3.10.tar.xz \
  | jq -r .hash
sha512-6XJxfym0TNH9knxeH4ZOvns6wElFy3uahunl2hJgovACCMEMXSy42s69zWVyGJALXTI+86tpDJGlIcAySEKBbA==
</code></pre>
</li>
</ul>
<h1 id="description-105"><a class="header" href="#description-105">Description</a></h1>
<p>This command downloads the file <em>url</em> to the Nix store. It prints out
the resulting store path and the cryptographic hash of the contents of
the file.</p>
<p>The name component of the store path defaults to the last component of
<em>url</em>, but this can be overridden using <code>--name</code>.</p>
<h1 id="options-65"><a class="header" href="#options-65">Options</a></h1>
<ul>
<li>
<p><code>--executable</code></p>
<p>Make the resulting file executable. Note that this causes the resulting hash to be a NAR hash rather than a flat file hash.</p>
</li>
<li>
<p><code>--expected-hash</code> <em>hash</em></p>
<p>The expected hash of the file.</p>
</li>
<li>
<p><code>--hash-type</code> <em>hash-algo</em></p>
<p>hash algorithm ('md5', 'sha1', 'sha256', or 'sha512')</p>
</li>
<li>
<p><code>--json</code></p>
<p>Produce output in JSON format, suitable for consumption by another program.</p>
</li>
<li>
<p><code>--name</code> <em>name</em></p>
<p>Override the name component of the resulting store path. It defaults to the base name of <em>url</em>.</p>
</li>
</ul>
<p><strong>Logging-related options:</strong></p>
<ul>
<li>
<p><code>--debug</code></p>
<p>Set the logging verbosity level to 'debug'.</p>
</li>
<li>
<p><code>--log-format</code> <em>format</em></p>
<p>Set the format of log output; one of <code>raw</code>, <code>internal-json</code>, <code>bar</code> or <code>bar-with-logs</code>.</p>
</li>
<li>
<p><code>--print-build-logs</code> / <code>-L</code></p>
<p>Print full build logs on standard error.</p>
</li>
<li>
<p><code>--quiet</code></p>
<p>Decrease the logging verbosity level.</p>
</li>
<li>
<p><code>--verbose</code> / <code>-v</code></p>
<p>Increase the logging verbosity level.</p>
</li>
</ul>
<p><strong>Miscellaneous global options:</strong></p>
<ul>
<li>
<p><code>--help</code></p>
<p>Show usage information.</p>
</li>
<li>
<p><code>--offline</code></p>
<p>Disable substituters and consider all previously downloaded files up-to-date.</p>
</li>
<li>
<p><code>--option</code> <em>name</em> <em>value</em></p>
<p>Set the Nix configuration setting <em>name</em> to <em>value</em> (overriding <code>nix.conf</code>).</p>
</li>
<li>
<p><code>--refresh</code></p>
<p>Consider all previously downloaded files out-of-date.</p>
</li>
<li>
<p><code>--version</code></p>
<p>Show version information.</p>
</li>
</ul>
<p><strong>Options to override configuration settings:</strong></p>
<ul>
<li>
<p><code>--accept-flake-config</code></p>
<p>Enable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--access-tokens</code> <em>value</em></p>
<p>Set the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--allow-dirty</code></p>
<p>Enable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--allow-import-from-derivation</code></p>
<p>Enable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--allow-new-privileges</code></p>
<p>Enable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--allow-symlinked-store</code></p>
<p>Enable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--allow-unsafe-native-code-during-evaluation</code></p>
<p>Enable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--allowed-impure-host-deps</code> <em>value</em></p>
<p>Set the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--allowed-uris</code> <em>value</em></p>
<p>Set the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--allowed-users</code> <em>value</em></p>
<p>Set the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--auto-allocate-uids</code></p>
<p>Enable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--auto-optimise-store</code></p>
<p>Enable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt</code> <em>value</em></p>
<p>Set the <code>bash-prompt</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-prefix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-prefix</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-suffix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-suffix</code> setting.</p>
</li>
<li>
<p><code>--build-hook</code> <em>value</em></p>
<p>Set the <code>build-hook</code> setting.</p>
</li>
<li>
<p><code>--build-poll-interval</code> <em>value</em></p>
<p>Set the <code>build-poll-interval</code> setting.</p>
</li>
<li>
<p><code>--build-users-group</code> <em>value</em></p>
<p>Set the <code>build-users-group</code> setting.</p>
</li>
<li>
<p><code>--builders</code> <em>value</em></p>
<p>Set the <code>builders</code> setting.</p>
</li>
<li>
<p><code>--builders-use-substitutes</code></p>
<p>Enable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--commit-lockfile-summary</code> <em>value</em></p>
<p>Set the <code>commit-lockfile-summary</code> setting.</p>
</li>
<li>
<p><code>--compress-build-log</code></p>
<p>Enable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--connect-timeout</code> <em>value</em></p>
<p>Set the <code>connect-timeout</code> setting.</p>
</li>
<li>
<p><code>--cores</code> <em>value</em></p>
<p>Set the <code>cores</code> setting.</p>
</li>
<li>
<p><code>--diff-hook</code> <em>value</em></p>
<p>Set the <code>diff-hook</code> setting.</p>
</li>
<li>
<p><code>--download-attempts</code> <em>value</em></p>
<p>Set the <code>download-attempts</code> setting.</p>
</li>
<li>
<p><code>--download-speed</code> <em>value</em></p>
<p>Set the <code>download-speed</code> setting.</p>
</li>
<li>
<p><code>--eval-cache</code></p>
<p>Enable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--experimental-features</code> <em>value</em></p>
<p>Set the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-access-tokens</code> <em>value</em></p>
<p>Append to the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-impure-host-deps</code> <em>value</em></p>
<p>Append to the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-uris</code> <em>value</em></p>
<p>Append to the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-users</code> <em>value</em></p>
<p>Append to the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--extra-experimental-features</code> <em>value</em></p>
<p>Append to the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-extra-platforms</code> <em>value</em></p>
<p>Append to the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-hashed-mirrors</code> <em>value</em></p>
<p>Append to the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--extra-ignored-acls</code> <em>value</em></p>
<p>Append to the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--extra-nix-path</code> <em>value</em></p>
<p>Append to the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--extra-platforms</code> <em>value</em></p>
<p>Set the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-plugin-files</code> <em>value</em></p>
<p>Append to the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--extra-sandbox-paths</code> <em>value</em></p>
<p>Append to the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--extra-secret-key-files</code> <em>value</em></p>
<p>Append to the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--extra-substituters</code> <em>value</em></p>
<p>Append to the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-system-features</code> <em>value</em></p>
<p>Append to the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-public-keys</code> <em>value</em></p>
<p>Append to the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-substituters</code> <em>value</em></p>
<p>Append to the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-users</code> <em>value</em></p>
<p>Append to the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--fallback</code></p>
<p>Enable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--filter-syscalls</code></p>
<p>Enable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--flake-registry</code> <em>value</em></p>
<p>Set the <code>flake-registry</code> setting.</p>
</li>
<li>
<p><code>--fsync-metadata</code></p>
<p>Enable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--gc-reserved-space</code> <em>value</em></p>
<p>Set the <code>gc-reserved-space</code> setting.</p>
</li>
<li>
<p><code>--hashed-mirrors</code> <em>value</em></p>
<p>Set the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--http-connections</code> <em>value</em></p>
<p>Set the <code>http-connections</code> setting.</p>
</li>
<li>
<p><code>--http2</code></p>
<p>Enable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--id-count</code> <em>value</em></p>
<p>Set the <code>id-count</code> setting.</p>
</li>
<li>
<p><code>--ignore-try</code></p>
<p>Enable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--ignored-acls</code> <em>value</em></p>
<p>Set the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--impersonate-linux-26</code></p>
<p>Enable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--keep-build-log</code></p>
<p>Enable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--keep-derivations</code></p>
<p>Enable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-env-derivations</code></p>
<p>Enable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-failed</code></p>
<p>Enable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--keep-going</code></p>
<p>Enable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--keep-outputs</code></p>
<p>Enable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--log-lines</code> <em>value</em></p>
<p>Set the <code>log-lines</code> setting.</p>
</li>
<li>
<p><code>--max-build-log-size</code> <em>value</em></p>
<p>Set the <code>max-build-log-size</code> setting.</p>
</li>
<li>
<p><code>--max-free</code> <em>value</em></p>
<p>Set the <code>max-free</code> setting.</p>
</li>
<li>
<p><code>--max-jobs</code> <em>value</em></p>
<p>Set the <code>max-jobs</code> setting.</p>
</li>
<li>
<p><code>--max-silent-time</code> <em>value</em></p>
<p>Set the <code>max-silent-time</code> setting.</p>
</li>
<li>
<p><code>--min-free</code> <em>value</em></p>
<p>Set the <code>min-free</code> setting.</p>
</li>
<li>
<p><code>--min-free-check-interval</code> <em>value</em></p>
<p>Set the <code>min-free-check-interval</code> setting.</p>
</li>
<li>
<p><code>--nar-buffer-size</code> <em>value</em></p>
<p>Set the <code>nar-buffer-size</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-negative-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-negative-ttl</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-positive-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-positive-ttl</code> setting.</p>
</li>
<li>
<p><code>--netrc-file</code> <em>value</em></p>
<p>Set the <code>netrc-file</code> setting.</p>
</li>
<li>
<p><code>--nix-path</code> <em>value</em></p>
<p>Set the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--no-accept-flake-config</code></p>
<p>Disable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--no-allow-dirty</code></p>
<p>Disable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--no-allow-import-from-derivation</code></p>
<p>Disable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--no-allow-new-privileges</code></p>
<p>Disable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--no-allow-symlinked-store</code></p>
<p>Disable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--no-allow-unsafe-native-code-during-evaluation</code></p>
<p>Disable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--no-auto-allocate-uids</code></p>
<p>Disable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--no-auto-optimise-store</code></p>
<p>Disable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--no-builders-use-substitutes</code></p>
<p>Disable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--no-compress-build-log</code></p>
<p>Disable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-eval-cache</code></p>
<p>Disable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--no-fallback</code></p>
<p>Disable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--no-filter-syscalls</code></p>
<p>Disable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--no-fsync-metadata</code></p>
<p>Disable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--no-http2</code></p>
<p>Disable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--no-ignore-try</code></p>
<p>Disable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--no-impersonate-linux-26</code></p>
<p>Disable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--no-keep-build-log</code></p>
<p>Disable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-keep-derivations</code></p>
<p>Disable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-env-derivations</code></p>
<p>Disable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-failed</code></p>
<p>Disable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--no-keep-going</code></p>
<p>Disable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--no-keep-outputs</code></p>
<p>Disable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--no-preallocate-contents</code></p>
<p>Disable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--no-print-missing</code></p>
<p>Disable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--no-pure-eval</code></p>
<p>Disable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--no-require-sigs</code></p>
<p>Disable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--no-restrict-eval</code></p>
<p>Disable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--no-run-diff-hook</code></p>
<p>Disable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--no-sandbox</code></p>
<p>Disable sandboxing.</p>
</li>
<li>
<p><code>--no-sandbox-fallback</code></p>
<p>Disable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--no-show-trace</code></p>
<p>Disable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--no-substitute</code></p>
<p>Disable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--no-sync-before-registering</code></p>
<p>Disable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--no-trace-function-calls</code></p>
<p>Disable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--no-trace-verbose</code></p>
<p>Disable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--no-use-case-hack</code></p>
<p>Disable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--no-use-cgroups</code></p>
<p>Disable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--no-use-registries</code></p>
<p>Disable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--no-use-sqlite-wal</code></p>
<p>Disable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--no-warn-dirty</code></p>
<p>Disable the <code>warn-dirty</code> setting.</p>
</li>
<li>
<p><code>--plugin-files</code> <em>value</em></p>
<p>Set the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--post-build-hook</code> <em>value</em></p>
<p>Set the <code>post-build-hook</code> setting.</p>
</li>
<li>
<p><code>--pre-build-hook</code> <em>value</em></p>
<p>Set the <code>pre-build-hook</code> setting.</p>
</li>
<li>
<p><code>--preallocate-contents</code></p>
<p>Enable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--print-missing</code></p>
<p>Enable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--pure-eval</code></p>
<p>Enable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--relaxed-sandbox</code></p>
<p>Enable sandboxing, but allow builds to disable it.</p>
</li>
<li>
<p><code>--require-sigs</code></p>
<p>Enable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--restrict-eval</code></p>
<p>Enable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--run-diff-hook</code></p>
<p>Enable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--sandbox</code></p>
<p>Enable sandboxing.</p>
</li>
<li>
<p><code>--sandbox-build-dir</code> <em>value</em></p>
<p>Set the <code>sandbox-build-dir</code> setting.</p>
</li>
<li>
<p><code>--sandbox-dev-shm-size</code> <em>value</em></p>
<p>Set the <code>sandbox-dev-shm-size</code> setting.</p>
</li>
<li>
<p><code>--sandbox-fallback</code></p>
<p>Enable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--sandbox-paths</code> <em>value</em></p>
<p>Set the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--secret-key-files</code> <em>value</em></p>
<p>Set the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--show-trace</code></p>
<p>Enable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--stalled-download-timeout</code> <em>value</em></p>
<p>Set the <code>stalled-download-timeout</code> setting.</p>
</li>
<li>
<p><code>--start-id</code> <em>value</em></p>
<p>Set the <code>start-id</code> setting.</p>
</li>
<li>
<p><code>--store</code> <em>value</em></p>
<p>Set the <code>store</code> setting.</p>
</li>
<li>
<p><code>--substitute</code></p>
<p>Enable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--substituters</code> <em>value</em></p>
<p>Set the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--sync-before-registering</code></p>
<p>Enable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--system</code> <em>value</em></p>
<p>Set the <code>system</code> setting.</p>
</li>
<li>
<p><code>--system-features</code> <em>value</em></p>
<p>Set the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--tarball-ttl</code> <em>value</em></p>
<p>Set the <code>tarball-ttl</code> setting.</p>
</li>
<li>
<p><code>--timeout</code> <em>value</em></p>
<p>Set the <code>timeout</code> setting.</p>
</li>
<li>
<p><code>--trace-function-calls</code></p>
<p>Enable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--trace-verbose</code></p>
<p>Enable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--trusted-public-keys</code> <em>value</em></p>
<p>Set the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--trusted-substituters</code> <em>value</em></p>
<p>Set the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--trusted-users</code> <em>value</em></p>
<p>Set the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--use-case-hack</code></p>
<p>Enable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--use-cgroups</code></p>
<p>Enable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--use-registries</code></p>
<p>Enable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--use-sqlite-wal</code></p>
<p>Enable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--user-agent-suffix</code> <em>value</em></p>
<p>Set the <code>user-agent-suffix</code> setting.</p>
</li>
<li>
<p><code>--warn-dirty</code></p>
<p>Enable the <code>warn-dirty</code> setting.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p><strong>Warning</strong> <br />
This program is <strong>experimental</strong> and its interface is subject to change.</p>
</blockquote>
<h1 id="name-90"><a class="header" href="#name-90">Name</a></h1>
<p><code>nix store repair</code> - repair store paths</p>
<h1 id="synopsis-121"><a class="header" href="#synopsis-121">Synopsis</a></h1>
<p><code>nix store repair</code> [<em>option</em>...] <em>installables</em>...</p>
<h1 id="examples-85"><a class="header" href="#examples-85">Examples</a></h1>
<ul>
<li>
<p>Repair a store path, after determining that it is corrupt:</p>
<pre><code class="language-console"># nix store verify /nix/store/yb5q57zxv6hgqql42d5r8b5k5mcq6kay-hello-2.10
path '/nix/store/yb5q57zxv6hgqql42d5r8b5k5mcq6kay-hello-2.10' was
modified! expected hash
'sha256:1hd5vnh6xjk388gdk841vflicy8qv7qzj2hb7xlyh8lpb43j921l', got
'sha256:1a25lf78x5wi6pfkrxalf0n13kdaca0bqmjqnp7wfjza2qz5ssgl'

# nix store repair /nix/store/yb5q57zxv6hgqql42d5r8b5k5mcq6kay-hello-2.10
</code></pre>
</li>
</ul>
<h1 id="description-106"><a class="header" href="#description-106">Description</a></h1>
<p>This command attempts to &quot;repair&quot; the store paths specified by
<em>installables</em> by redownloading them using the available
substituters. If no substitutes are available, then repair is not
possible.</p>
<blockquote>
<p><strong>Warning</strong></p>
<p>During repair, there is a very small time window during which the old
path (if it exists) is moved out of the way and replaced with the new
path. If repair is interrupted in between, then the system may be left
in a broken state (e.g., if the path contains a critical system
component like the GNU C Library).</p>
</blockquote>
<h1 id="options-66"><a class="header" href="#options-66">Options</a></h1>
<p><strong>Common evaluation options:</strong></p>
<ul>
<li>
<p><code>--arg</code> <em>name</em> <em>expr</em></p>
<p>Pass the value <em>expr</em> as the argument <em>name</em> to Nix functions.</p>
</li>
<li>
<p><code>--argstr</code> <em>name</em> <em>string</em></p>
<p>Pass the string <em>string</em> as the argument <em>name</em> to Nix functions.</p>
</li>
<li>
<p><code>--debugger</code></p>
<p>Start an interactive environment if evaluation fails.</p>
</li>
<li>
<p><code>--eval-store</code> <em>store-url</em></p>
<p>The Nix store to use for evaluations.</p>
</li>
<li>
<p><code>--impure</code></p>
<p>Allow access to mutable paths and repositories.</p>
</li>
<li>
<p><code>--include</code> / <code>-I</code> <em>path</em></p>
<p>Add <em>path</em> to the Nix search path. The Nix search path is
initialized from the colon-separated <a href="command-ref/new-cli/../../command-ref/env-common.html#env-NIX_PATH"><code>NIX_PATH</code></a> environment
variable, and is used to look up the location of Nix expressions using <a href="command-ref/new-cli/../../language/values.html#type-path">paths</a> enclosed in angle
brackets (i.e., <code>&lt;nixpkgs&gt;</code>).</p>
<p>For instance, passing</p>
<pre><code>-I /home/eelco/Dev
-I /etc/nixos
</code></pre>
<p>will cause Nix to look for paths relative to <code>/home/eelco/Dev</code> and
<code>/etc/nixos</code>, in that order. This is equivalent to setting the
<code>NIX_PATH</code> environment variable to</p>
<pre><code>/home/eelco/Dev:/etc/nixos
</code></pre>
<p>It is also possible to match paths against a prefix. For example,
passing</p>
<pre><code>-I nixpkgs=/home/eelco/Dev/nixpkgs-branch
-I /etc/nixos
</code></pre>
<p>will cause Nix to search for <code>&lt;nixpkgs/path&gt;</code> in
<code>/home/eelco/Dev/nixpkgs-branch/path</code> and <code>/etc/nixos/nixpkgs/path</code>.</p>
<p>If a path in the Nix search path starts with <code>http://</code> or <code>https://</code>,
it is interpreted as the URL of a tarball that will be downloaded and
unpacked to a temporary location. The tarball must consist of a single
top-level directory. For example, passing</p>
<pre><code>-I nixpkgs=https://github.com/NixOS/nixpkgs/archive/master.tar.gz
</code></pre>
<p>tells Nix to download and use the current contents of the <code>master</code>
branch in the <code>nixpkgs</code> repository.</p>
<p>The URLs of the tarballs from the official <code>nixos.org</code> channels
(see <a href="command-ref/new-cli/../nix-channel.html">the manual page for <code>nix-channel</code></a>) can be
abbreviated as <code>channel:&lt;channel-name&gt;</code>. For instance, the
following two flags are equivalent:</p>
<pre><code>-I nixpkgs=channel:nixos-21.05
-I nixpkgs=https://nixos.org/channels/nixos-21.05/nixexprs.tar.xz
</code></pre>
<p>You can also fetch source trees using <a href="command-ref/new-cli/./nix3-flake.html#url-like-syntax">flake URLs</a> and add them to the
search path. For instance,</p>
<pre><code>-I nixpkgs=flake:nixpkgs
</code></pre>
<p>specifies that the prefix <code>nixpkgs</code> shall refer to the source tree
downloaded from the <code>nixpkgs</code> entry in the flake registry. Similarly,</p>
<pre><code>-I nixpkgs=flake:github:NixOS/nixpkgs/nixos-22.05
</code></pre>
<p>makes <code>&lt;nixpkgs&gt;</code> refer to a particular branch of the
<code>NixOS/nixpkgs</code> repository on GitHub.</p>
</li>
<li>
<p><code>--override-flake</code> <em>original-ref</em> <em>resolved-ref</em></p>
<p>Override the flake registries, redirecting <em>original-ref</em> to <em>resolved-ref</em>.</p>
</li>
</ul>
<p><strong>Common flake-related options:</strong></p>
<ul>
<li>
<p><code>--commit-lock-file</code></p>
<p>Commit changes to the flake's lock file.</p>
</li>
<li>
<p><code>--inputs-from</code> <em>flake-url</em></p>
<p>Use the inputs of the specified flake as registry entries.</p>
</li>
<li>
<p><code>--no-registries</code></p>
<p>Don't allow lookups in the flake registries. This option is deprecated; use <code>--no-use-registries</code>.</p>
</li>
<li>
<p><code>--no-update-lock-file</code></p>
<p>Do not allow any updates to the flake's lock file.</p>
</li>
<li>
<p><code>--no-write-lock-file</code></p>
<p>Do not write the flake's newly generated lock file.</p>
</li>
<li>
<p><code>--override-input</code> <em>input-path</em> <em>flake-url</em></p>
<p>Override a specific flake input (e.g. <code>dwarffs/nixpkgs</code>). This implies <code>--no-write-lock-file</code>.</p>
</li>
<li>
<p><code>--recreate-lock-file</code></p>
<p>Recreate the flake's lock file from scratch.</p>
</li>
<li>
<p><code>--update-input</code> <em>input-path</em></p>
<p>Update a specific flake input (ignoring its previous entry in the lock file).</p>
</li>
</ul>
<p><strong>Logging-related options:</strong></p>
<ul>
<li>
<p><code>--debug</code></p>
<p>Set the logging verbosity level to 'debug'.</p>
</li>
<li>
<p><code>--log-format</code> <em>format</em></p>
<p>Set the format of log output; one of <code>raw</code>, <code>internal-json</code>, <code>bar</code> or <code>bar-with-logs</code>.</p>
</li>
<li>
<p><code>--print-build-logs</code> / <code>-L</code></p>
<p>Print full build logs on standard error.</p>
</li>
<li>
<p><code>--quiet</code></p>
<p>Decrease the logging verbosity level.</p>
</li>
<li>
<p><code>--verbose</code> / <code>-v</code></p>
<p>Increase the logging verbosity level.</p>
</li>
</ul>
<p><strong>Miscellaneous global options:</strong></p>
<ul>
<li>
<p><code>--help</code></p>
<p>Show usage information.</p>
</li>
<li>
<p><code>--offline</code></p>
<p>Disable substituters and consider all previously downloaded files up-to-date.</p>
</li>
<li>
<p><code>--option</code> <em>name</em> <em>value</em></p>
<p>Set the Nix configuration setting <em>name</em> to <em>value</em> (overriding <code>nix.conf</code>).</p>
</li>
<li>
<p><code>--refresh</code></p>
<p>Consider all previously downloaded files out-of-date.</p>
</li>
<li>
<p><code>--version</code></p>
<p>Show version information.</p>
</li>
</ul>
<p><strong>Options that change the interpretation of installables:</strong></p>
<ul>
<li>
<p><code>--all</code></p>
<p>Apply the operation to every store path.</p>
</li>
<li>
<p><code>--derivation</code></p>
<p>Operate on the <a href="command-ref/new-cli/../../glossary.html#gloss-store-derivation">store derivation</a> rather than its outputs.</p>
</li>
<li>
<p><code>--expr</code> <em>expr</em></p>
<p>Interpret installables as attribute paths relative to the Nix expression <em>expr</em>.</p>
</li>
<li>
<p><code>--file</code> / <code>-f</code> <em>file</em></p>
<p>Interpret installables as attribute paths relative to the Nix expression stored in <em>file</em>. If <em>file</em> is the character -, then a Nix expression will be read from standard input. Implies <code>--impure</code>.</p>
</li>
<li>
<p><code>--recursive</code> / <code>-r</code></p>
<p>Apply operation to closure of the specified paths.</p>
</li>
</ul>
<p><strong>Options to override configuration settings:</strong></p>
<ul>
<li>
<p><code>--accept-flake-config</code></p>
<p>Enable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--access-tokens</code> <em>value</em></p>
<p>Set the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--allow-dirty</code></p>
<p>Enable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--allow-import-from-derivation</code></p>
<p>Enable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--allow-new-privileges</code></p>
<p>Enable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--allow-symlinked-store</code></p>
<p>Enable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--allow-unsafe-native-code-during-evaluation</code></p>
<p>Enable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--allowed-impure-host-deps</code> <em>value</em></p>
<p>Set the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--allowed-uris</code> <em>value</em></p>
<p>Set the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--allowed-users</code> <em>value</em></p>
<p>Set the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--auto-allocate-uids</code></p>
<p>Enable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--auto-optimise-store</code></p>
<p>Enable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt</code> <em>value</em></p>
<p>Set the <code>bash-prompt</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-prefix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-prefix</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-suffix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-suffix</code> setting.</p>
</li>
<li>
<p><code>--build-hook</code> <em>value</em></p>
<p>Set the <code>build-hook</code> setting.</p>
</li>
<li>
<p><code>--build-poll-interval</code> <em>value</em></p>
<p>Set the <code>build-poll-interval</code> setting.</p>
</li>
<li>
<p><code>--build-users-group</code> <em>value</em></p>
<p>Set the <code>build-users-group</code> setting.</p>
</li>
<li>
<p><code>--builders</code> <em>value</em></p>
<p>Set the <code>builders</code> setting.</p>
</li>
<li>
<p><code>--builders-use-substitutes</code></p>
<p>Enable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--commit-lockfile-summary</code> <em>value</em></p>
<p>Set the <code>commit-lockfile-summary</code> setting.</p>
</li>
<li>
<p><code>--compress-build-log</code></p>
<p>Enable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--connect-timeout</code> <em>value</em></p>
<p>Set the <code>connect-timeout</code> setting.</p>
</li>
<li>
<p><code>--cores</code> <em>value</em></p>
<p>Set the <code>cores</code> setting.</p>
</li>
<li>
<p><code>--diff-hook</code> <em>value</em></p>
<p>Set the <code>diff-hook</code> setting.</p>
</li>
<li>
<p><code>--download-attempts</code> <em>value</em></p>
<p>Set the <code>download-attempts</code> setting.</p>
</li>
<li>
<p><code>--download-speed</code> <em>value</em></p>
<p>Set the <code>download-speed</code> setting.</p>
</li>
<li>
<p><code>--eval-cache</code></p>
<p>Enable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--experimental-features</code> <em>value</em></p>
<p>Set the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-access-tokens</code> <em>value</em></p>
<p>Append to the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-impure-host-deps</code> <em>value</em></p>
<p>Append to the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-uris</code> <em>value</em></p>
<p>Append to the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-users</code> <em>value</em></p>
<p>Append to the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--extra-experimental-features</code> <em>value</em></p>
<p>Append to the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-extra-platforms</code> <em>value</em></p>
<p>Append to the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-hashed-mirrors</code> <em>value</em></p>
<p>Append to the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--extra-ignored-acls</code> <em>value</em></p>
<p>Append to the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--extra-nix-path</code> <em>value</em></p>
<p>Append to the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--extra-platforms</code> <em>value</em></p>
<p>Set the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-plugin-files</code> <em>value</em></p>
<p>Append to the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--extra-sandbox-paths</code> <em>value</em></p>
<p>Append to the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--extra-secret-key-files</code> <em>value</em></p>
<p>Append to the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--extra-substituters</code> <em>value</em></p>
<p>Append to the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-system-features</code> <em>value</em></p>
<p>Append to the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-public-keys</code> <em>value</em></p>
<p>Append to the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-substituters</code> <em>value</em></p>
<p>Append to the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-users</code> <em>value</em></p>
<p>Append to the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--fallback</code></p>
<p>Enable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--filter-syscalls</code></p>
<p>Enable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--flake-registry</code> <em>value</em></p>
<p>Set the <code>flake-registry</code> setting.</p>
</li>
<li>
<p><code>--fsync-metadata</code></p>
<p>Enable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--gc-reserved-space</code> <em>value</em></p>
<p>Set the <code>gc-reserved-space</code> setting.</p>
</li>
<li>
<p><code>--hashed-mirrors</code> <em>value</em></p>
<p>Set the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--http-connections</code> <em>value</em></p>
<p>Set the <code>http-connections</code> setting.</p>
</li>
<li>
<p><code>--http2</code></p>
<p>Enable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--id-count</code> <em>value</em></p>
<p>Set the <code>id-count</code> setting.</p>
</li>
<li>
<p><code>--ignore-try</code></p>
<p>Enable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--ignored-acls</code> <em>value</em></p>
<p>Set the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--impersonate-linux-26</code></p>
<p>Enable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--keep-build-log</code></p>
<p>Enable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--keep-derivations</code></p>
<p>Enable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-env-derivations</code></p>
<p>Enable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-failed</code></p>
<p>Enable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--keep-going</code></p>
<p>Enable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--keep-outputs</code></p>
<p>Enable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--log-lines</code> <em>value</em></p>
<p>Set the <code>log-lines</code> setting.</p>
</li>
<li>
<p><code>--max-build-log-size</code> <em>value</em></p>
<p>Set the <code>max-build-log-size</code> setting.</p>
</li>
<li>
<p><code>--max-free</code> <em>value</em></p>
<p>Set the <code>max-free</code> setting.</p>
</li>
<li>
<p><code>--max-jobs</code> <em>value</em></p>
<p>Set the <code>max-jobs</code> setting.</p>
</li>
<li>
<p><code>--max-silent-time</code> <em>value</em></p>
<p>Set the <code>max-silent-time</code> setting.</p>
</li>
<li>
<p><code>--min-free</code> <em>value</em></p>
<p>Set the <code>min-free</code> setting.</p>
</li>
<li>
<p><code>--min-free-check-interval</code> <em>value</em></p>
<p>Set the <code>min-free-check-interval</code> setting.</p>
</li>
<li>
<p><code>--nar-buffer-size</code> <em>value</em></p>
<p>Set the <code>nar-buffer-size</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-negative-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-negative-ttl</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-positive-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-positive-ttl</code> setting.</p>
</li>
<li>
<p><code>--netrc-file</code> <em>value</em></p>
<p>Set the <code>netrc-file</code> setting.</p>
</li>
<li>
<p><code>--nix-path</code> <em>value</em></p>
<p>Set the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--no-accept-flake-config</code></p>
<p>Disable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--no-allow-dirty</code></p>
<p>Disable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--no-allow-import-from-derivation</code></p>
<p>Disable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--no-allow-new-privileges</code></p>
<p>Disable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--no-allow-symlinked-store</code></p>
<p>Disable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--no-allow-unsafe-native-code-during-evaluation</code></p>
<p>Disable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--no-auto-allocate-uids</code></p>
<p>Disable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--no-auto-optimise-store</code></p>
<p>Disable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--no-builders-use-substitutes</code></p>
<p>Disable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--no-compress-build-log</code></p>
<p>Disable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-eval-cache</code></p>
<p>Disable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--no-fallback</code></p>
<p>Disable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--no-filter-syscalls</code></p>
<p>Disable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--no-fsync-metadata</code></p>
<p>Disable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--no-http2</code></p>
<p>Disable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--no-ignore-try</code></p>
<p>Disable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--no-impersonate-linux-26</code></p>
<p>Disable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--no-keep-build-log</code></p>
<p>Disable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-keep-derivations</code></p>
<p>Disable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-env-derivations</code></p>
<p>Disable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-failed</code></p>
<p>Disable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--no-keep-going</code></p>
<p>Disable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--no-keep-outputs</code></p>
<p>Disable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--no-preallocate-contents</code></p>
<p>Disable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--no-print-missing</code></p>
<p>Disable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--no-pure-eval</code></p>
<p>Disable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--no-require-sigs</code></p>
<p>Disable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--no-restrict-eval</code></p>
<p>Disable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--no-run-diff-hook</code></p>
<p>Disable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--no-sandbox</code></p>
<p>Disable sandboxing.</p>
</li>
<li>
<p><code>--no-sandbox-fallback</code></p>
<p>Disable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--no-show-trace</code></p>
<p>Disable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--no-substitute</code></p>
<p>Disable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--no-sync-before-registering</code></p>
<p>Disable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--no-trace-function-calls</code></p>
<p>Disable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--no-trace-verbose</code></p>
<p>Disable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--no-use-case-hack</code></p>
<p>Disable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--no-use-cgroups</code></p>
<p>Disable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--no-use-registries</code></p>
<p>Disable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--no-use-sqlite-wal</code></p>
<p>Disable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--no-warn-dirty</code></p>
<p>Disable the <code>warn-dirty</code> setting.</p>
</li>
<li>
<p><code>--plugin-files</code> <em>value</em></p>
<p>Set the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--post-build-hook</code> <em>value</em></p>
<p>Set the <code>post-build-hook</code> setting.</p>
</li>
<li>
<p><code>--pre-build-hook</code> <em>value</em></p>
<p>Set the <code>pre-build-hook</code> setting.</p>
</li>
<li>
<p><code>--preallocate-contents</code></p>
<p>Enable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--print-missing</code></p>
<p>Enable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--pure-eval</code></p>
<p>Enable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--relaxed-sandbox</code></p>
<p>Enable sandboxing, but allow builds to disable it.</p>
</li>
<li>
<p><code>--require-sigs</code></p>
<p>Enable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--restrict-eval</code></p>
<p>Enable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--run-diff-hook</code></p>
<p>Enable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--sandbox</code></p>
<p>Enable sandboxing.</p>
</li>
<li>
<p><code>--sandbox-build-dir</code> <em>value</em></p>
<p>Set the <code>sandbox-build-dir</code> setting.</p>
</li>
<li>
<p><code>--sandbox-dev-shm-size</code> <em>value</em></p>
<p>Set the <code>sandbox-dev-shm-size</code> setting.</p>
</li>
<li>
<p><code>--sandbox-fallback</code></p>
<p>Enable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--sandbox-paths</code> <em>value</em></p>
<p>Set the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--secret-key-files</code> <em>value</em></p>
<p>Set the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--show-trace</code></p>
<p>Enable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--stalled-download-timeout</code> <em>value</em></p>
<p>Set the <code>stalled-download-timeout</code> setting.</p>
</li>
<li>
<p><code>--start-id</code> <em>value</em></p>
<p>Set the <code>start-id</code> setting.</p>
</li>
<li>
<p><code>--store</code> <em>value</em></p>
<p>Set the <code>store</code> setting.</p>
</li>
<li>
<p><code>--substitute</code></p>
<p>Enable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--substituters</code> <em>value</em></p>
<p>Set the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--sync-before-registering</code></p>
<p>Enable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--system</code> <em>value</em></p>
<p>Set the <code>system</code> setting.</p>
</li>
<li>
<p><code>--system-features</code> <em>value</em></p>
<p>Set the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--tarball-ttl</code> <em>value</em></p>
<p>Set the <code>tarball-ttl</code> setting.</p>
</li>
<li>
<p><code>--timeout</code> <em>value</em></p>
<p>Set the <code>timeout</code> setting.</p>
</li>
<li>
<p><code>--trace-function-calls</code></p>
<p>Enable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--trace-verbose</code></p>
<p>Enable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--trusted-public-keys</code> <em>value</em></p>
<p>Set the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--trusted-substituters</code> <em>value</em></p>
<p>Set the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--trusted-users</code> <em>value</em></p>
<p>Set the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--use-case-hack</code></p>
<p>Enable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--use-cgroups</code></p>
<p>Enable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--use-registries</code></p>
<p>Enable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--use-sqlite-wal</code></p>
<p>Enable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--user-agent-suffix</code> <em>value</em></p>
<p>Set the <code>user-agent-suffix</code> setting.</p>
</li>
<li>
<p><code>--warn-dirty</code></p>
<p>Enable the <code>warn-dirty</code> setting.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p><strong>Warning</strong> <br />
This program is <strong>experimental</strong> and its interface is subject to change.</p>
</blockquote>
<h1 id="name-91"><a class="header" href="#name-91">Name</a></h1>
<p><code>nix store sign</code> - sign store paths</p>
<h1 id="synopsis-122"><a class="header" href="#synopsis-122">Synopsis</a></h1>
<p><code>nix store sign</code> [<em>option</em>...] <em>installables</em>...</p>
<h1 id="options-67"><a class="header" href="#options-67">Options</a></h1>
<ul>
<li>
<p><code>--key-file</code> / <code>-k</code> <em>file</em></p>
<p>File containing the secret signing key.</p>
</li>
</ul>
<p><strong>Common evaluation options:</strong></p>
<ul>
<li>
<p><code>--arg</code> <em>name</em> <em>expr</em></p>
<p>Pass the value <em>expr</em> as the argument <em>name</em> to Nix functions.</p>
</li>
<li>
<p><code>--argstr</code> <em>name</em> <em>string</em></p>
<p>Pass the string <em>string</em> as the argument <em>name</em> to Nix functions.</p>
</li>
<li>
<p><code>--debugger</code></p>
<p>Start an interactive environment if evaluation fails.</p>
</li>
<li>
<p><code>--eval-store</code> <em>store-url</em></p>
<p>The Nix store to use for evaluations.</p>
</li>
<li>
<p><code>--impure</code></p>
<p>Allow access to mutable paths and repositories.</p>
</li>
<li>
<p><code>--include</code> / <code>-I</code> <em>path</em></p>
<p>Add <em>path</em> to the Nix search path. The Nix search path is
initialized from the colon-separated <a href="command-ref/new-cli/../../command-ref/env-common.html#env-NIX_PATH"><code>NIX_PATH</code></a> environment
variable, and is used to look up the location of Nix expressions using <a href="command-ref/new-cli/../../language/values.html#type-path">paths</a> enclosed in angle
brackets (i.e., <code>&lt;nixpkgs&gt;</code>).</p>
<p>For instance, passing</p>
<pre><code>-I /home/eelco/Dev
-I /etc/nixos
</code></pre>
<p>will cause Nix to look for paths relative to <code>/home/eelco/Dev</code> and
<code>/etc/nixos</code>, in that order. This is equivalent to setting the
<code>NIX_PATH</code> environment variable to</p>
<pre><code>/home/eelco/Dev:/etc/nixos
</code></pre>
<p>It is also possible to match paths against a prefix. For example,
passing</p>
<pre><code>-I nixpkgs=/home/eelco/Dev/nixpkgs-branch
-I /etc/nixos
</code></pre>
<p>will cause Nix to search for <code>&lt;nixpkgs/path&gt;</code> in
<code>/home/eelco/Dev/nixpkgs-branch/path</code> and <code>/etc/nixos/nixpkgs/path</code>.</p>
<p>If a path in the Nix search path starts with <code>http://</code> or <code>https://</code>,
it is interpreted as the URL of a tarball that will be downloaded and
unpacked to a temporary location. The tarball must consist of a single
top-level directory. For example, passing</p>
<pre><code>-I nixpkgs=https://github.com/NixOS/nixpkgs/archive/master.tar.gz
</code></pre>
<p>tells Nix to download and use the current contents of the <code>master</code>
branch in the <code>nixpkgs</code> repository.</p>
<p>The URLs of the tarballs from the official <code>nixos.org</code> channels
(see <a href="command-ref/new-cli/../nix-channel.html">the manual page for <code>nix-channel</code></a>) can be
abbreviated as <code>channel:&lt;channel-name&gt;</code>. For instance, the
following two flags are equivalent:</p>
<pre><code>-I nixpkgs=channel:nixos-21.05
-I nixpkgs=https://nixos.org/channels/nixos-21.05/nixexprs.tar.xz
</code></pre>
<p>You can also fetch source trees using <a href="command-ref/new-cli/./nix3-flake.html#url-like-syntax">flake URLs</a> and add them to the
search path. For instance,</p>
<pre><code>-I nixpkgs=flake:nixpkgs
</code></pre>
<p>specifies that the prefix <code>nixpkgs</code> shall refer to the source tree
downloaded from the <code>nixpkgs</code> entry in the flake registry. Similarly,</p>
<pre><code>-I nixpkgs=flake:github:NixOS/nixpkgs/nixos-22.05
</code></pre>
<p>makes <code>&lt;nixpkgs&gt;</code> refer to a particular branch of the
<code>NixOS/nixpkgs</code> repository on GitHub.</p>
</li>
<li>
<p><code>--override-flake</code> <em>original-ref</em> <em>resolved-ref</em></p>
<p>Override the flake registries, redirecting <em>original-ref</em> to <em>resolved-ref</em>.</p>
</li>
</ul>
<p><strong>Common flake-related options:</strong></p>
<ul>
<li>
<p><code>--commit-lock-file</code></p>
<p>Commit changes to the flake's lock file.</p>
</li>
<li>
<p><code>--inputs-from</code> <em>flake-url</em></p>
<p>Use the inputs of the specified flake as registry entries.</p>
</li>
<li>
<p><code>--no-registries</code></p>
<p>Don't allow lookups in the flake registries. This option is deprecated; use <code>--no-use-registries</code>.</p>
</li>
<li>
<p><code>--no-update-lock-file</code></p>
<p>Do not allow any updates to the flake's lock file.</p>
</li>
<li>
<p><code>--no-write-lock-file</code></p>
<p>Do not write the flake's newly generated lock file.</p>
</li>
<li>
<p><code>--override-input</code> <em>input-path</em> <em>flake-url</em></p>
<p>Override a specific flake input (e.g. <code>dwarffs/nixpkgs</code>). This implies <code>--no-write-lock-file</code>.</p>
</li>
<li>
<p><code>--recreate-lock-file</code></p>
<p>Recreate the flake's lock file from scratch.</p>
</li>
<li>
<p><code>--update-input</code> <em>input-path</em></p>
<p>Update a specific flake input (ignoring its previous entry in the lock file).</p>
</li>
</ul>
<p><strong>Logging-related options:</strong></p>
<ul>
<li>
<p><code>--debug</code></p>
<p>Set the logging verbosity level to 'debug'.</p>
</li>
<li>
<p><code>--log-format</code> <em>format</em></p>
<p>Set the format of log output; one of <code>raw</code>, <code>internal-json</code>, <code>bar</code> or <code>bar-with-logs</code>.</p>
</li>
<li>
<p><code>--print-build-logs</code> / <code>-L</code></p>
<p>Print full build logs on standard error.</p>
</li>
<li>
<p><code>--quiet</code></p>
<p>Decrease the logging verbosity level.</p>
</li>
<li>
<p><code>--verbose</code> / <code>-v</code></p>
<p>Increase the logging verbosity level.</p>
</li>
</ul>
<p><strong>Miscellaneous global options:</strong></p>
<ul>
<li>
<p><code>--help</code></p>
<p>Show usage information.</p>
</li>
<li>
<p><code>--offline</code></p>
<p>Disable substituters and consider all previously downloaded files up-to-date.</p>
</li>
<li>
<p><code>--option</code> <em>name</em> <em>value</em></p>
<p>Set the Nix configuration setting <em>name</em> to <em>value</em> (overriding <code>nix.conf</code>).</p>
</li>
<li>
<p><code>--refresh</code></p>
<p>Consider all previously downloaded files out-of-date.</p>
</li>
<li>
<p><code>--version</code></p>
<p>Show version information.</p>
</li>
</ul>
<p><strong>Options that change the interpretation of installables:</strong></p>
<ul>
<li>
<p><code>--all</code></p>
<p>Apply the operation to every store path.</p>
</li>
<li>
<p><code>--derivation</code></p>
<p>Operate on the <a href="command-ref/new-cli/../../glossary.html#gloss-store-derivation">store derivation</a> rather than its outputs.</p>
</li>
<li>
<p><code>--expr</code> <em>expr</em></p>
<p>Interpret installables as attribute paths relative to the Nix expression <em>expr</em>.</p>
</li>
<li>
<p><code>--file</code> / <code>-f</code> <em>file</em></p>
<p>Interpret installables as attribute paths relative to the Nix expression stored in <em>file</em>. If <em>file</em> is the character -, then a Nix expression will be read from standard input. Implies <code>--impure</code>.</p>
</li>
<li>
<p><code>--recursive</code> / <code>-r</code></p>
<p>Apply operation to closure of the specified paths.</p>
</li>
</ul>
<p><strong>Options to override configuration settings:</strong></p>
<ul>
<li>
<p><code>--accept-flake-config</code></p>
<p>Enable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--access-tokens</code> <em>value</em></p>
<p>Set the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--allow-dirty</code></p>
<p>Enable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--allow-import-from-derivation</code></p>
<p>Enable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--allow-new-privileges</code></p>
<p>Enable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--allow-symlinked-store</code></p>
<p>Enable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--allow-unsafe-native-code-during-evaluation</code></p>
<p>Enable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--allowed-impure-host-deps</code> <em>value</em></p>
<p>Set the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--allowed-uris</code> <em>value</em></p>
<p>Set the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--allowed-users</code> <em>value</em></p>
<p>Set the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--auto-allocate-uids</code></p>
<p>Enable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--auto-optimise-store</code></p>
<p>Enable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt</code> <em>value</em></p>
<p>Set the <code>bash-prompt</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-prefix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-prefix</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-suffix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-suffix</code> setting.</p>
</li>
<li>
<p><code>--build-hook</code> <em>value</em></p>
<p>Set the <code>build-hook</code> setting.</p>
</li>
<li>
<p><code>--build-poll-interval</code> <em>value</em></p>
<p>Set the <code>build-poll-interval</code> setting.</p>
</li>
<li>
<p><code>--build-users-group</code> <em>value</em></p>
<p>Set the <code>build-users-group</code> setting.</p>
</li>
<li>
<p><code>--builders</code> <em>value</em></p>
<p>Set the <code>builders</code> setting.</p>
</li>
<li>
<p><code>--builders-use-substitutes</code></p>
<p>Enable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--commit-lockfile-summary</code> <em>value</em></p>
<p>Set the <code>commit-lockfile-summary</code> setting.</p>
</li>
<li>
<p><code>--compress-build-log</code></p>
<p>Enable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--connect-timeout</code> <em>value</em></p>
<p>Set the <code>connect-timeout</code> setting.</p>
</li>
<li>
<p><code>--cores</code> <em>value</em></p>
<p>Set the <code>cores</code> setting.</p>
</li>
<li>
<p><code>--diff-hook</code> <em>value</em></p>
<p>Set the <code>diff-hook</code> setting.</p>
</li>
<li>
<p><code>--download-attempts</code> <em>value</em></p>
<p>Set the <code>download-attempts</code> setting.</p>
</li>
<li>
<p><code>--download-speed</code> <em>value</em></p>
<p>Set the <code>download-speed</code> setting.</p>
</li>
<li>
<p><code>--eval-cache</code></p>
<p>Enable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--experimental-features</code> <em>value</em></p>
<p>Set the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-access-tokens</code> <em>value</em></p>
<p>Append to the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-impure-host-deps</code> <em>value</em></p>
<p>Append to the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-uris</code> <em>value</em></p>
<p>Append to the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-users</code> <em>value</em></p>
<p>Append to the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--extra-experimental-features</code> <em>value</em></p>
<p>Append to the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-extra-platforms</code> <em>value</em></p>
<p>Append to the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-hashed-mirrors</code> <em>value</em></p>
<p>Append to the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--extra-ignored-acls</code> <em>value</em></p>
<p>Append to the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--extra-nix-path</code> <em>value</em></p>
<p>Append to the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--extra-platforms</code> <em>value</em></p>
<p>Set the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-plugin-files</code> <em>value</em></p>
<p>Append to the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--extra-sandbox-paths</code> <em>value</em></p>
<p>Append to the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--extra-secret-key-files</code> <em>value</em></p>
<p>Append to the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--extra-substituters</code> <em>value</em></p>
<p>Append to the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-system-features</code> <em>value</em></p>
<p>Append to the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-public-keys</code> <em>value</em></p>
<p>Append to the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-substituters</code> <em>value</em></p>
<p>Append to the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-users</code> <em>value</em></p>
<p>Append to the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--fallback</code></p>
<p>Enable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--filter-syscalls</code></p>
<p>Enable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--flake-registry</code> <em>value</em></p>
<p>Set the <code>flake-registry</code> setting.</p>
</li>
<li>
<p><code>--fsync-metadata</code></p>
<p>Enable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--gc-reserved-space</code> <em>value</em></p>
<p>Set the <code>gc-reserved-space</code> setting.</p>
</li>
<li>
<p><code>--hashed-mirrors</code> <em>value</em></p>
<p>Set the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--http-connections</code> <em>value</em></p>
<p>Set the <code>http-connections</code> setting.</p>
</li>
<li>
<p><code>--http2</code></p>
<p>Enable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--id-count</code> <em>value</em></p>
<p>Set the <code>id-count</code> setting.</p>
</li>
<li>
<p><code>--ignore-try</code></p>
<p>Enable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--ignored-acls</code> <em>value</em></p>
<p>Set the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--impersonate-linux-26</code></p>
<p>Enable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--keep-build-log</code></p>
<p>Enable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--keep-derivations</code></p>
<p>Enable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-env-derivations</code></p>
<p>Enable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-failed</code></p>
<p>Enable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--keep-going</code></p>
<p>Enable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--keep-outputs</code></p>
<p>Enable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--log-lines</code> <em>value</em></p>
<p>Set the <code>log-lines</code> setting.</p>
</li>
<li>
<p><code>--max-build-log-size</code> <em>value</em></p>
<p>Set the <code>max-build-log-size</code> setting.</p>
</li>
<li>
<p><code>--max-free</code> <em>value</em></p>
<p>Set the <code>max-free</code> setting.</p>
</li>
<li>
<p><code>--max-jobs</code> <em>value</em></p>
<p>Set the <code>max-jobs</code> setting.</p>
</li>
<li>
<p><code>--max-silent-time</code> <em>value</em></p>
<p>Set the <code>max-silent-time</code> setting.</p>
</li>
<li>
<p><code>--min-free</code> <em>value</em></p>
<p>Set the <code>min-free</code> setting.</p>
</li>
<li>
<p><code>--min-free-check-interval</code> <em>value</em></p>
<p>Set the <code>min-free-check-interval</code> setting.</p>
</li>
<li>
<p><code>--nar-buffer-size</code> <em>value</em></p>
<p>Set the <code>nar-buffer-size</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-negative-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-negative-ttl</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-positive-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-positive-ttl</code> setting.</p>
</li>
<li>
<p><code>--netrc-file</code> <em>value</em></p>
<p>Set the <code>netrc-file</code> setting.</p>
</li>
<li>
<p><code>--nix-path</code> <em>value</em></p>
<p>Set the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--no-accept-flake-config</code></p>
<p>Disable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--no-allow-dirty</code></p>
<p>Disable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--no-allow-import-from-derivation</code></p>
<p>Disable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--no-allow-new-privileges</code></p>
<p>Disable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--no-allow-symlinked-store</code></p>
<p>Disable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--no-allow-unsafe-native-code-during-evaluation</code></p>
<p>Disable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--no-auto-allocate-uids</code></p>
<p>Disable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--no-auto-optimise-store</code></p>
<p>Disable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--no-builders-use-substitutes</code></p>
<p>Disable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--no-compress-build-log</code></p>
<p>Disable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-eval-cache</code></p>
<p>Disable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--no-fallback</code></p>
<p>Disable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--no-filter-syscalls</code></p>
<p>Disable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--no-fsync-metadata</code></p>
<p>Disable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--no-http2</code></p>
<p>Disable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--no-ignore-try</code></p>
<p>Disable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--no-impersonate-linux-26</code></p>
<p>Disable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--no-keep-build-log</code></p>
<p>Disable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-keep-derivations</code></p>
<p>Disable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-env-derivations</code></p>
<p>Disable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-failed</code></p>
<p>Disable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--no-keep-going</code></p>
<p>Disable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--no-keep-outputs</code></p>
<p>Disable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--no-preallocate-contents</code></p>
<p>Disable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--no-print-missing</code></p>
<p>Disable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--no-pure-eval</code></p>
<p>Disable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--no-require-sigs</code></p>
<p>Disable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--no-restrict-eval</code></p>
<p>Disable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--no-run-diff-hook</code></p>
<p>Disable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--no-sandbox</code></p>
<p>Disable sandboxing.</p>
</li>
<li>
<p><code>--no-sandbox-fallback</code></p>
<p>Disable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--no-show-trace</code></p>
<p>Disable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--no-substitute</code></p>
<p>Disable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--no-sync-before-registering</code></p>
<p>Disable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--no-trace-function-calls</code></p>
<p>Disable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--no-trace-verbose</code></p>
<p>Disable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--no-use-case-hack</code></p>
<p>Disable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--no-use-cgroups</code></p>
<p>Disable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--no-use-registries</code></p>
<p>Disable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--no-use-sqlite-wal</code></p>
<p>Disable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--no-warn-dirty</code></p>
<p>Disable the <code>warn-dirty</code> setting.</p>
</li>
<li>
<p><code>--plugin-files</code> <em>value</em></p>
<p>Set the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--post-build-hook</code> <em>value</em></p>
<p>Set the <code>post-build-hook</code> setting.</p>
</li>
<li>
<p><code>--pre-build-hook</code> <em>value</em></p>
<p>Set the <code>pre-build-hook</code> setting.</p>
</li>
<li>
<p><code>--preallocate-contents</code></p>
<p>Enable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--print-missing</code></p>
<p>Enable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--pure-eval</code></p>
<p>Enable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--relaxed-sandbox</code></p>
<p>Enable sandboxing, but allow builds to disable it.</p>
</li>
<li>
<p><code>--require-sigs</code></p>
<p>Enable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--restrict-eval</code></p>
<p>Enable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--run-diff-hook</code></p>
<p>Enable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--sandbox</code></p>
<p>Enable sandboxing.</p>
</li>
<li>
<p><code>--sandbox-build-dir</code> <em>value</em></p>
<p>Set the <code>sandbox-build-dir</code> setting.</p>
</li>
<li>
<p><code>--sandbox-dev-shm-size</code> <em>value</em></p>
<p>Set the <code>sandbox-dev-shm-size</code> setting.</p>
</li>
<li>
<p><code>--sandbox-fallback</code></p>
<p>Enable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--sandbox-paths</code> <em>value</em></p>
<p>Set the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--secret-key-files</code> <em>value</em></p>
<p>Set the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--show-trace</code></p>
<p>Enable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--stalled-download-timeout</code> <em>value</em></p>
<p>Set the <code>stalled-download-timeout</code> setting.</p>
</li>
<li>
<p><code>--start-id</code> <em>value</em></p>
<p>Set the <code>start-id</code> setting.</p>
</li>
<li>
<p><code>--store</code> <em>value</em></p>
<p>Set the <code>store</code> setting.</p>
</li>
<li>
<p><code>--substitute</code></p>
<p>Enable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--substituters</code> <em>value</em></p>
<p>Set the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--sync-before-registering</code></p>
<p>Enable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--system</code> <em>value</em></p>
<p>Set the <code>system</code> setting.</p>
</li>
<li>
<p><code>--system-features</code> <em>value</em></p>
<p>Set the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--tarball-ttl</code> <em>value</em></p>
<p>Set the <code>tarball-ttl</code> setting.</p>
</li>
<li>
<p><code>--timeout</code> <em>value</em></p>
<p>Set the <code>timeout</code> setting.</p>
</li>
<li>
<p><code>--trace-function-calls</code></p>
<p>Enable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--trace-verbose</code></p>
<p>Enable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--trusted-public-keys</code> <em>value</em></p>
<p>Set the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--trusted-substituters</code> <em>value</em></p>
<p>Set the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--trusted-users</code> <em>value</em></p>
<p>Set the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--use-case-hack</code></p>
<p>Enable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--use-cgroups</code></p>
<p>Enable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--use-registries</code></p>
<p>Enable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--use-sqlite-wal</code></p>
<p>Enable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--user-agent-suffix</code> <em>value</em></p>
<p>Set the <code>user-agent-suffix</code> setting.</p>
</li>
<li>
<p><code>--warn-dirty</code></p>
<p>Enable the <code>warn-dirty</code> setting.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p><strong>Warning</strong> <br />
This program is <strong>experimental</strong> and its interface is subject to change.</p>
</blockquote>
<h1 id="name-92"><a class="header" href="#name-92">Name</a></h1>
<p><code>nix store verify</code> - verify the integrity of store paths</p>
<h1 id="synopsis-123"><a class="header" href="#synopsis-123">Synopsis</a></h1>
<p><code>nix store verify</code> [<em>option</em>...] <em>installables</em>...</p>
<h1 id="examples-86"><a class="header" href="#examples-86">Examples</a></h1>
<ul>
<li>
<p>Verify the entire Nix store:</p>
<pre><code class="language-console"># nix store verify --all
</code></pre>
</li>
<li>
<p>Check whether each path in the closure of Firefox has at least 2
signatures:</p>
<pre><code class="language-console"># nix store verify -r -n2 --no-contents $(type -p firefox)
</code></pre>
</li>
<li>
<p>Verify a store path in the binary cache <code>https://cache.nixos.org/</code>:</p>
<pre><code class="language-console"># nix store verify --store https://cache.nixos.org/ \
    /nix/store/v5sv61sszx301i0x6xysaqzla09nksnd-hello-2.10
</code></pre>
</li>
</ul>
<h1 id="description-107"><a class="header" href="#description-107">Description</a></h1>
<p>This command verifies the integrity of the store paths <em>installables</em>,
or, if <code>--all</code> is given, the entire Nix store. For each path, it
checks that</p>
<ul>
<li>
<p>its contents match the NAR hash recorded in the Nix database; and</p>
</li>
<li>
<p>it is <em>trusted</em>, that is, it is signed by at least one trusted
signing key, is content-addressed, or is built locally (&quot;ultimately
trusted&quot;).</p>
</li>
</ul>
<h1 id="exit-status"><a class="header" href="#exit-status">Exit status</a></h1>
<p>The exit status of this command is the sum of the following values:</p>
<ul>
<li>
<p><strong>1</strong> if any path is corrupted (i.e. its contents don't match the
recorded NAR hash).</p>
</li>
<li>
<p><strong>2</strong> if any path is untrusted.</p>
</li>
<li>
<p><strong>4</strong> if any path couldn't be verified for any other reason (such as
an I/O error).</p>
</li>
</ul>
<h1 id="options-68"><a class="header" href="#options-68">Options</a></h1>
<ul>
<li>
<p><code>--no-contents</code></p>
<p>Do not verify the contents of each store path.</p>
</li>
<li>
<p><code>--no-trust</code></p>
<p>Do not verify whether each store path is trusted.</p>
</li>
<li>
<p><code>--sigs-needed</code> / <code>-n</code> <em>n</em></p>
<p>Require that each path is signed by at least <em>n</em> different keys.</p>
</li>
<li>
<p><code>--substituter</code> / <code>-s</code> <em>store-uri</em></p>
<p>Use signatures from the specified store.</p>
</li>
</ul>
<p><strong>Common evaluation options:</strong></p>
<ul>
<li>
<p><code>--arg</code> <em>name</em> <em>expr</em></p>
<p>Pass the value <em>expr</em> as the argument <em>name</em> to Nix functions.</p>
</li>
<li>
<p><code>--argstr</code> <em>name</em> <em>string</em></p>
<p>Pass the string <em>string</em> as the argument <em>name</em> to Nix functions.</p>
</li>
<li>
<p><code>--debugger</code></p>
<p>Start an interactive environment if evaluation fails.</p>
</li>
<li>
<p><code>--eval-store</code> <em>store-url</em></p>
<p>The Nix store to use for evaluations.</p>
</li>
<li>
<p><code>--impure</code></p>
<p>Allow access to mutable paths and repositories.</p>
</li>
<li>
<p><code>--include</code> / <code>-I</code> <em>path</em></p>
<p>Add <em>path</em> to the Nix search path. The Nix search path is
initialized from the colon-separated <a href="command-ref/new-cli/../../command-ref/env-common.html#env-NIX_PATH"><code>NIX_PATH</code></a> environment
variable, and is used to look up the location of Nix expressions using <a href="command-ref/new-cli/../../language/values.html#type-path">paths</a> enclosed in angle
brackets (i.e., <code>&lt;nixpkgs&gt;</code>).</p>
<p>For instance, passing</p>
<pre><code>-I /home/eelco/Dev
-I /etc/nixos
</code></pre>
<p>will cause Nix to look for paths relative to <code>/home/eelco/Dev</code> and
<code>/etc/nixos</code>, in that order. This is equivalent to setting the
<code>NIX_PATH</code> environment variable to</p>
<pre><code>/home/eelco/Dev:/etc/nixos
</code></pre>
<p>It is also possible to match paths against a prefix. For example,
passing</p>
<pre><code>-I nixpkgs=/home/eelco/Dev/nixpkgs-branch
-I /etc/nixos
</code></pre>
<p>will cause Nix to search for <code>&lt;nixpkgs/path&gt;</code> in
<code>/home/eelco/Dev/nixpkgs-branch/path</code> and <code>/etc/nixos/nixpkgs/path</code>.</p>
<p>If a path in the Nix search path starts with <code>http://</code> or <code>https://</code>,
it is interpreted as the URL of a tarball that will be downloaded and
unpacked to a temporary location. The tarball must consist of a single
top-level directory. For example, passing</p>
<pre><code>-I nixpkgs=https://github.com/NixOS/nixpkgs/archive/master.tar.gz
</code></pre>
<p>tells Nix to download and use the current contents of the <code>master</code>
branch in the <code>nixpkgs</code> repository.</p>
<p>The URLs of the tarballs from the official <code>nixos.org</code> channels
(see <a href="command-ref/new-cli/../nix-channel.html">the manual page for <code>nix-channel</code></a>) can be
abbreviated as <code>channel:&lt;channel-name&gt;</code>. For instance, the
following two flags are equivalent:</p>
<pre><code>-I nixpkgs=channel:nixos-21.05
-I nixpkgs=https://nixos.org/channels/nixos-21.05/nixexprs.tar.xz
</code></pre>
<p>You can also fetch source trees using <a href="command-ref/new-cli/./nix3-flake.html#url-like-syntax">flake URLs</a> and add them to the
search path. For instance,</p>
<pre><code>-I nixpkgs=flake:nixpkgs
</code></pre>
<p>specifies that the prefix <code>nixpkgs</code> shall refer to the source tree
downloaded from the <code>nixpkgs</code> entry in the flake registry. Similarly,</p>
<pre><code>-I nixpkgs=flake:github:NixOS/nixpkgs/nixos-22.05
</code></pre>
<p>makes <code>&lt;nixpkgs&gt;</code> refer to a particular branch of the
<code>NixOS/nixpkgs</code> repository on GitHub.</p>
</li>
<li>
<p><code>--override-flake</code> <em>original-ref</em> <em>resolved-ref</em></p>
<p>Override the flake registries, redirecting <em>original-ref</em> to <em>resolved-ref</em>.</p>
</li>
</ul>
<p><strong>Common flake-related options:</strong></p>
<ul>
<li>
<p><code>--commit-lock-file</code></p>
<p>Commit changes to the flake's lock file.</p>
</li>
<li>
<p><code>--inputs-from</code> <em>flake-url</em></p>
<p>Use the inputs of the specified flake as registry entries.</p>
</li>
<li>
<p><code>--no-registries</code></p>
<p>Don't allow lookups in the flake registries. This option is deprecated; use <code>--no-use-registries</code>.</p>
</li>
<li>
<p><code>--no-update-lock-file</code></p>
<p>Do not allow any updates to the flake's lock file.</p>
</li>
<li>
<p><code>--no-write-lock-file</code></p>
<p>Do not write the flake's newly generated lock file.</p>
</li>
<li>
<p><code>--override-input</code> <em>input-path</em> <em>flake-url</em></p>
<p>Override a specific flake input (e.g. <code>dwarffs/nixpkgs</code>). This implies <code>--no-write-lock-file</code>.</p>
</li>
<li>
<p><code>--recreate-lock-file</code></p>
<p>Recreate the flake's lock file from scratch.</p>
</li>
<li>
<p><code>--update-input</code> <em>input-path</em></p>
<p>Update a specific flake input (ignoring its previous entry in the lock file).</p>
</li>
</ul>
<p><strong>Logging-related options:</strong></p>
<ul>
<li>
<p><code>--debug</code></p>
<p>Set the logging verbosity level to 'debug'.</p>
</li>
<li>
<p><code>--log-format</code> <em>format</em></p>
<p>Set the format of log output; one of <code>raw</code>, <code>internal-json</code>, <code>bar</code> or <code>bar-with-logs</code>.</p>
</li>
<li>
<p><code>--print-build-logs</code> / <code>-L</code></p>
<p>Print full build logs on standard error.</p>
</li>
<li>
<p><code>--quiet</code></p>
<p>Decrease the logging verbosity level.</p>
</li>
<li>
<p><code>--verbose</code> / <code>-v</code></p>
<p>Increase the logging verbosity level.</p>
</li>
</ul>
<p><strong>Miscellaneous global options:</strong></p>
<ul>
<li>
<p><code>--help</code></p>
<p>Show usage information.</p>
</li>
<li>
<p><code>--offline</code></p>
<p>Disable substituters and consider all previously downloaded files up-to-date.</p>
</li>
<li>
<p><code>--option</code> <em>name</em> <em>value</em></p>
<p>Set the Nix configuration setting <em>name</em> to <em>value</em> (overriding <code>nix.conf</code>).</p>
</li>
<li>
<p><code>--refresh</code></p>
<p>Consider all previously downloaded files out-of-date.</p>
</li>
<li>
<p><code>--version</code></p>
<p>Show version information.</p>
</li>
</ul>
<p><strong>Options that change the interpretation of installables:</strong></p>
<ul>
<li>
<p><code>--all</code></p>
<p>Apply the operation to every store path.</p>
</li>
<li>
<p><code>--derivation</code></p>
<p>Operate on the <a href="command-ref/new-cli/../../glossary.html#gloss-store-derivation">store derivation</a> rather than its outputs.</p>
</li>
<li>
<p><code>--expr</code> <em>expr</em></p>
<p>Interpret installables as attribute paths relative to the Nix expression <em>expr</em>.</p>
</li>
<li>
<p><code>--file</code> / <code>-f</code> <em>file</em></p>
<p>Interpret installables as attribute paths relative to the Nix expression stored in <em>file</em>. If <em>file</em> is the character -, then a Nix expression will be read from standard input. Implies <code>--impure</code>.</p>
</li>
<li>
<p><code>--recursive</code> / <code>-r</code></p>
<p>Apply operation to closure of the specified paths.</p>
</li>
</ul>
<p><strong>Options to override configuration settings:</strong></p>
<ul>
<li>
<p><code>--accept-flake-config</code></p>
<p>Enable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--access-tokens</code> <em>value</em></p>
<p>Set the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--allow-dirty</code></p>
<p>Enable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--allow-import-from-derivation</code></p>
<p>Enable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--allow-new-privileges</code></p>
<p>Enable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--allow-symlinked-store</code></p>
<p>Enable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--allow-unsafe-native-code-during-evaluation</code></p>
<p>Enable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--allowed-impure-host-deps</code> <em>value</em></p>
<p>Set the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--allowed-uris</code> <em>value</em></p>
<p>Set the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--allowed-users</code> <em>value</em></p>
<p>Set the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--auto-allocate-uids</code></p>
<p>Enable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--auto-optimise-store</code></p>
<p>Enable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt</code> <em>value</em></p>
<p>Set the <code>bash-prompt</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-prefix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-prefix</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-suffix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-suffix</code> setting.</p>
</li>
<li>
<p><code>--build-hook</code> <em>value</em></p>
<p>Set the <code>build-hook</code> setting.</p>
</li>
<li>
<p><code>--build-poll-interval</code> <em>value</em></p>
<p>Set the <code>build-poll-interval</code> setting.</p>
</li>
<li>
<p><code>--build-users-group</code> <em>value</em></p>
<p>Set the <code>build-users-group</code> setting.</p>
</li>
<li>
<p><code>--builders</code> <em>value</em></p>
<p>Set the <code>builders</code> setting.</p>
</li>
<li>
<p><code>--builders-use-substitutes</code></p>
<p>Enable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--commit-lockfile-summary</code> <em>value</em></p>
<p>Set the <code>commit-lockfile-summary</code> setting.</p>
</li>
<li>
<p><code>--compress-build-log</code></p>
<p>Enable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--connect-timeout</code> <em>value</em></p>
<p>Set the <code>connect-timeout</code> setting.</p>
</li>
<li>
<p><code>--cores</code> <em>value</em></p>
<p>Set the <code>cores</code> setting.</p>
</li>
<li>
<p><code>--diff-hook</code> <em>value</em></p>
<p>Set the <code>diff-hook</code> setting.</p>
</li>
<li>
<p><code>--download-attempts</code> <em>value</em></p>
<p>Set the <code>download-attempts</code> setting.</p>
</li>
<li>
<p><code>--download-speed</code> <em>value</em></p>
<p>Set the <code>download-speed</code> setting.</p>
</li>
<li>
<p><code>--eval-cache</code></p>
<p>Enable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--experimental-features</code> <em>value</em></p>
<p>Set the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-access-tokens</code> <em>value</em></p>
<p>Append to the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-impure-host-deps</code> <em>value</em></p>
<p>Append to the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-uris</code> <em>value</em></p>
<p>Append to the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-users</code> <em>value</em></p>
<p>Append to the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--extra-experimental-features</code> <em>value</em></p>
<p>Append to the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-extra-platforms</code> <em>value</em></p>
<p>Append to the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-hashed-mirrors</code> <em>value</em></p>
<p>Append to the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--extra-ignored-acls</code> <em>value</em></p>
<p>Append to the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--extra-nix-path</code> <em>value</em></p>
<p>Append to the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--extra-platforms</code> <em>value</em></p>
<p>Set the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-plugin-files</code> <em>value</em></p>
<p>Append to the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--extra-sandbox-paths</code> <em>value</em></p>
<p>Append to the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--extra-secret-key-files</code> <em>value</em></p>
<p>Append to the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--extra-substituters</code> <em>value</em></p>
<p>Append to the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-system-features</code> <em>value</em></p>
<p>Append to the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-public-keys</code> <em>value</em></p>
<p>Append to the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-substituters</code> <em>value</em></p>
<p>Append to the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-users</code> <em>value</em></p>
<p>Append to the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--fallback</code></p>
<p>Enable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--filter-syscalls</code></p>
<p>Enable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--flake-registry</code> <em>value</em></p>
<p>Set the <code>flake-registry</code> setting.</p>
</li>
<li>
<p><code>--fsync-metadata</code></p>
<p>Enable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--gc-reserved-space</code> <em>value</em></p>
<p>Set the <code>gc-reserved-space</code> setting.</p>
</li>
<li>
<p><code>--hashed-mirrors</code> <em>value</em></p>
<p>Set the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--http-connections</code> <em>value</em></p>
<p>Set the <code>http-connections</code> setting.</p>
</li>
<li>
<p><code>--http2</code></p>
<p>Enable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--id-count</code> <em>value</em></p>
<p>Set the <code>id-count</code> setting.</p>
</li>
<li>
<p><code>--ignore-try</code></p>
<p>Enable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--ignored-acls</code> <em>value</em></p>
<p>Set the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--impersonate-linux-26</code></p>
<p>Enable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--keep-build-log</code></p>
<p>Enable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--keep-derivations</code></p>
<p>Enable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-env-derivations</code></p>
<p>Enable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-failed</code></p>
<p>Enable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--keep-going</code></p>
<p>Enable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--keep-outputs</code></p>
<p>Enable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--log-lines</code> <em>value</em></p>
<p>Set the <code>log-lines</code> setting.</p>
</li>
<li>
<p><code>--max-build-log-size</code> <em>value</em></p>
<p>Set the <code>max-build-log-size</code> setting.</p>
</li>
<li>
<p><code>--max-free</code> <em>value</em></p>
<p>Set the <code>max-free</code> setting.</p>
</li>
<li>
<p><code>--max-jobs</code> <em>value</em></p>
<p>Set the <code>max-jobs</code> setting.</p>
</li>
<li>
<p><code>--max-silent-time</code> <em>value</em></p>
<p>Set the <code>max-silent-time</code> setting.</p>
</li>
<li>
<p><code>--min-free</code> <em>value</em></p>
<p>Set the <code>min-free</code> setting.</p>
</li>
<li>
<p><code>--min-free-check-interval</code> <em>value</em></p>
<p>Set the <code>min-free-check-interval</code> setting.</p>
</li>
<li>
<p><code>--nar-buffer-size</code> <em>value</em></p>
<p>Set the <code>nar-buffer-size</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-negative-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-negative-ttl</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-positive-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-positive-ttl</code> setting.</p>
</li>
<li>
<p><code>--netrc-file</code> <em>value</em></p>
<p>Set the <code>netrc-file</code> setting.</p>
</li>
<li>
<p><code>--nix-path</code> <em>value</em></p>
<p>Set the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--no-accept-flake-config</code></p>
<p>Disable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--no-allow-dirty</code></p>
<p>Disable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--no-allow-import-from-derivation</code></p>
<p>Disable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--no-allow-new-privileges</code></p>
<p>Disable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--no-allow-symlinked-store</code></p>
<p>Disable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--no-allow-unsafe-native-code-during-evaluation</code></p>
<p>Disable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--no-auto-allocate-uids</code></p>
<p>Disable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--no-auto-optimise-store</code></p>
<p>Disable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--no-builders-use-substitutes</code></p>
<p>Disable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--no-compress-build-log</code></p>
<p>Disable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-eval-cache</code></p>
<p>Disable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--no-fallback</code></p>
<p>Disable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--no-filter-syscalls</code></p>
<p>Disable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--no-fsync-metadata</code></p>
<p>Disable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--no-http2</code></p>
<p>Disable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--no-ignore-try</code></p>
<p>Disable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--no-impersonate-linux-26</code></p>
<p>Disable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--no-keep-build-log</code></p>
<p>Disable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-keep-derivations</code></p>
<p>Disable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-env-derivations</code></p>
<p>Disable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-failed</code></p>
<p>Disable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--no-keep-going</code></p>
<p>Disable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--no-keep-outputs</code></p>
<p>Disable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--no-preallocate-contents</code></p>
<p>Disable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--no-print-missing</code></p>
<p>Disable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--no-pure-eval</code></p>
<p>Disable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--no-require-sigs</code></p>
<p>Disable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--no-restrict-eval</code></p>
<p>Disable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--no-run-diff-hook</code></p>
<p>Disable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--no-sandbox</code></p>
<p>Disable sandboxing.</p>
</li>
<li>
<p><code>--no-sandbox-fallback</code></p>
<p>Disable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--no-show-trace</code></p>
<p>Disable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--no-substitute</code></p>
<p>Disable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--no-sync-before-registering</code></p>
<p>Disable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--no-trace-function-calls</code></p>
<p>Disable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--no-trace-verbose</code></p>
<p>Disable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--no-use-case-hack</code></p>
<p>Disable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--no-use-cgroups</code></p>
<p>Disable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--no-use-registries</code></p>
<p>Disable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--no-use-sqlite-wal</code></p>
<p>Disable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--no-warn-dirty</code></p>
<p>Disable the <code>warn-dirty</code> setting.</p>
</li>
<li>
<p><code>--plugin-files</code> <em>value</em></p>
<p>Set the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--post-build-hook</code> <em>value</em></p>
<p>Set the <code>post-build-hook</code> setting.</p>
</li>
<li>
<p><code>--pre-build-hook</code> <em>value</em></p>
<p>Set the <code>pre-build-hook</code> setting.</p>
</li>
<li>
<p><code>--preallocate-contents</code></p>
<p>Enable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--print-missing</code></p>
<p>Enable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--pure-eval</code></p>
<p>Enable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--relaxed-sandbox</code></p>
<p>Enable sandboxing, but allow builds to disable it.</p>
</li>
<li>
<p><code>--require-sigs</code></p>
<p>Enable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--restrict-eval</code></p>
<p>Enable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--run-diff-hook</code></p>
<p>Enable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--sandbox</code></p>
<p>Enable sandboxing.</p>
</li>
<li>
<p><code>--sandbox-build-dir</code> <em>value</em></p>
<p>Set the <code>sandbox-build-dir</code> setting.</p>
</li>
<li>
<p><code>--sandbox-dev-shm-size</code> <em>value</em></p>
<p>Set the <code>sandbox-dev-shm-size</code> setting.</p>
</li>
<li>
<p><code>--sandbox-fallback</code></p>
<p>Enable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--sandbox-paths</code> <em>value</em></p>
<p>Set the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--secret-key-files</code> <em>value</em></p>
<p>Set the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--show-trace</code></p>
<p>Enable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--stalled-download-timeout</code> <em>value</em></p>
<p>Set the <code>stalled-download-timeout</code> setting.</p>
</li>
<li>
<p><code>--start-id</code> <em>value</em></p>
<p>Set the <code>start-id</code> setting.</p>
</li>
<li>
<p><code>--store</code> <em>value</em></p>
<p>Set the <code>store</code> setting.</p>
</li>
<li>
<p><code>--substitute</code></p>
<p>Enable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--substituters</code> <em>value</em></p>
<p>Set the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--sync-before-registering</code></p>
<p>Enable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--system</code> <em>value</em></p>
<p>Set the <code>system</code> setting.</p>
</li>
<li>
<p><code>--system-features</code> <em>value</em></p>
<p>Set the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--tarball-ttl</code> <em>value</em></p>
<p>Set the <code>tarball-ttl</code> setting.</p>
</li>
<li>
<p><code>--timeout</code> <em>value</em></p>
<p>Set the <code>timeout</code> setting.</p>
</li>
<li>
<p><code>--trace-function-calls</code></p>
<p>Enable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--trace-verbose</code></p>
<p>Enable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--trusted-public-keys</code> <em>value</em></p>
<p>Set the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--trusted-substituters</code> <em>value</em></p>
<p>Set the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--trusted-users</code> <em>value</em></p>
<p>Set the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--use-case-hack</code></p>
<p>Enable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--use-cgroups</code></p>
<p>Enable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--use-registries</code></p>
<p>Enable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--use-sqlite-wal</code></p>
<p>Enable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--user-agent-suffix</code> <em>value</em></p>
<p>Set the <code>user-agent-suffix</code> setting.</p>
</li>
<li>
<p><code>--warn-dirty</code></p>
<p>Enable the <code>warn-dirty</code> setting.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p><strong>Warning</strong> <br />
This program is <strong>experimental</strong> and its interface is subject to change.</p>
</blockquote>
<h1 id="name-93"><a class="header" href="#name-93">Name</a></h1>
<p><code>nix upgrade-nix</code> - upgrade Nix to the stable version declared in Nixpkgs</p>
<h1 id="synopsis-124"><a class="header" href="#synopsis-124">Synopsis</a></h1>
<p><code>nix upgrade-nix</code> [<em>option</em>...] </p>
<h1 id="examples-87"><a class="header" href="#examples-87">Examples</a></h1>
<ul>
<li>
<p>Upgrade Nix to the stable version declared in Nixpkgs:</p>
<pre><code class="language-console"># nix upgrade-nix
</code></pre>
</li>
<li>
<p>Upgrade Nix in a specific profile:</p>
<pre><code class="language-console"># nix upgrade-nix -p /nix/var/nix/profiles/per-user/alice/profile
</code></pre>
</li>
</ul>
<h1 id="description-108"><a class="header" href="#description-108">Description</a></h1>
<p>This command upgrades Nix to the stable version declared in Nixpkgs.
This stable version is defined in <a href="https://github.com/NixOS/nixpkgs/raw/master/nixos/modules/installer/tools/nix-fallback-paths.nix">nix-fallback-paths.nix</a>
and updated manually. It may not always be the latest tagged release.</p>
<p>By default, it locates the directory containing the <code>nix</code> binary in the <code>$PATH</code>
environment variable. If that directory is a Nix profile, it will
upgrade the <code>nix</code> package in that profile to the latest stable binary
release.</p>
<p>You cannot use this command to upgrade Nix in the system profile of a
NixOS system (that is, if <code>nix</code> is found in <code>/run/current-system</code>).</p>
<h1 id="options-69"><a class="header" href="#options-69">Options</a></h1>
<ul>
<li>
<p><code>--dry-run</code></p>
<p>Show what this command would do without doing it.</p>
</li>
<li>
<p><code>--nix-store-paths-url</code> <em>url</em></p>
<p>The URL of the file that contains the store paths of the latest Nix release.</p>
</li>
<li>
<p><code>--profile</code> / <code>-p</code> <em>profile-dir</em></p>
<p>The path to the Nix profile to upgrade.</p>
</li>
</ul>
<p><strong>Logging-related options:</strong></p>
<ul>
<li>
<p><code>--debug</code></p>
<p>Set the logging verbosity level to 'debug'.</p>
</li>
<li>
<p><code>--log-format</code> <em>format</em></p>
<p>Set the format of log output; one of <code>raw</code>, <code>internal-json</code>, <code>bar</code> or <code>bar-with-logs</code>.</p>
</li>
<li>
<p><code>--print-build-logs</code> / <code>-L</code></p>
<p>Print full build logs on standard error.</p>
</li>
<li>
<p><code>--quiet</code></p>
<p>Decrease the logging verbosity level.</p>
</li>
<li>
<p><code>--verbose</code> / <code>-v</code></p>
<p>Increase the logging verbosity level.</p>
</li>
</ul>
<p><strong>Miscellaneous global options:</strong></p>
<ul>
<li>
<p><code>--help</code></p>
<p>Show usage information.</p>
</li>
<li>
<p><code>--offline</code></p>
<p>Disable substituters and consider all previously downloaded files up-to-date.</p>
</li>
<li>
<p><code>--option</code> <em>name</em> <em>value</em></p>
<p>Set the Nix configuration setting <em>name</em> to <em>value</em> (overriding <code>nix.conf</code>).</p>
</li>
<li>
<p><code>--refresh</code></p>
<p>Consider all previously downloaded files out-of-date.</p>
</li>
<li>
<p><code>--version</code></p>
<p>Show version information.</p>
</li>
</ul>
<p><strong>Options to override configuration settings:</strong></p>
<ul>
<li>
<p><code>--accept-flake-config</code></p>
<p>Enable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--access-tokens</code> <em>value</em></p>
<p>Set the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--allow-dirty</code></p>
<p>Enable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--allow-import-from-derivation</code></p>
<p>Enable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--allow-new-privileges</code></p>
<p>Enable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--allow-symlinked-store</code></p>
<p>Enable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--allow-unsafe-native-code-during-evaluation</code></p>
<p>Enable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--allowed-impure-host-deps</code> <em>value</em></p>
<p>Set the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--allowed-uris</code> <em>value</em></p>
<p>Set the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--allowed-users</code> <em>value</em></p>
<p>Set the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--auto-allocate-uids</code></p>
<p>Enable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--auto-optimise-store</code></p>
<p>Enable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt</code> <em>value</em></p>
<p>Set the <code>bash-prompt</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-prefix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-prefix</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-suffix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-suffix</code> setting.</p>
</li>
<li>
<p><code>--build-hook</code> <em>value</em></p>
<p>Set the <code>build-hook</code> setting.</p>
</li>
<li>
<p><code>--build-poll-interval</code> <em>value</em></p>
<p>Set the <code>build-poll-interval</code> setting.</p>
</li>
<li>
<p><code>--build-users-group</code> <em>value</em></p>
<p>Set the <code>build-users-group</code> setting.</p>
</li>
<li>
<p><code>--builders</code> <em>value</em></p>
<p>Set the <code>builders</code> setting.</p>
</li>
<li>
<p><code>--builders-use-substitutes</code></p>
<p>Enable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--commit-lockfile-summary</code> <em>value</em></p>
<p>Set the <code>commit-lockfile-summary</code> setting.</p>
</li>
<li>
<p><code>--compress-build-log</code></p>
<p>Enable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--connect-timeout</code> <em>value</em></p>
<p>Set the <code>connect-timeout</code> setting.</p>
</li>
<li>
<p><code>--cores</code> <em>value</em></p>
<p>Set the <code>cores</code> setting.</p>
</li>
<li>
<p><code>--diff-hook</code> <em>value</em></p>
<p>Set the <code>diff-hook</code> setting.</p>
</li>
<li>
<p><code>--download-attempts</code> <em>value</em></p>
<p>Set the <code>download-attempts</code> setting.</p>
</li>
<li>
<p><code>--download-speed</code> <em>value</em></p>
<p>Set the <code>download-speed</code> setting.</p>
</li>
<li>
<p><code>--eval-cache</code></p>
<p>Enable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--experimental-features</code> <em>value</em></p>
<p>Set the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-access-tokens</code> <em>value</em></p>
<p>Append to the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-impure-host-deps</code> <em>value</em></p>
<p>Append to the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-uris</code> <em>value</em></p>
<p>Append to the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-users</code> <em>value</em></p>
<p>Append to the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--extra-experimental-features</code> <em>value</em></p>
<p>Append to the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-extra-platforms</code> <em>value</em></p>
<p>Append to the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-hashed-mirrors</code> <em>value</em></p>
<p>Append to the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--extra-ignored-acls</code> <em>value</em></p>
<p>Append to the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--extra-nix-path</code> <em>value</em></p>
<p>Append to the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--extra-platforms</code> <em>value</em></p>
<p>Set the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-plugin-files</code> <em>value</em></p>
<p>Append to the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--extra-sandbox-paths</code> <em>value</em></p>
<p>Append to the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--extra-secret-key-files</code> <em>value</em></p>
<p>Append to the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--extra-substituters</code> <em>value</em></p>
<p>Append to the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-system-features</code> <em>value</em></p>
<p>Append to the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-public-keys</code> <em>value</em></p>
<p>Append to the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-substituters</code> <em>value</em></p>
<p>Append to the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-users</code> <em>value</em></p>
<p>Append to the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--fallback</code></p>
<p>Enable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--filter-syscalls</code></p>
<p>Enable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--flake-registry</code> <em>value</em></p>
<p>Set the <code>flake-registry</code> setting.</p>
</li>
<li>
<p><code>--fsync-metadata</code></p>
<p>Enable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--gc-reserved-space</code> <em>value</em></p>
<p>Set the <code>gc-reserved-space</code> setting.</p>
</li>
<li>
<p><code>--hashed-mirrors</code> <em>value</em></p>
<p>Set the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--http-connections</code> <em>value</em></p>
<p>Set the <code>http-connections</code> setting.</p>
</li>
<li>
<p><code>--http2</code></p>
<p>Enable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--id-count</code> <em>value</em></p>
<p>Set the <code>id-count</code> setting.</p>
</li>
<li>
<p><code>--ignore-try</code></p>
<p>Enable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--ignored-acls</code> <em>value</em></p>
<p>Set the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--impersonate-linux-26</code></p>
<p>Enable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--keep-build-log</code></p>
<p>Enable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--keep-derivations</code></p>
<p>Enable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-env-derivations</code></p>
<p>Enable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-failed</code></p>
<p>Enable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--keep-going</code></p>
<p>Enable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--keep-outputs</code></p>
<p>Enable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--log-lines</code> <em>value</em></p>
<p>Set the <code>log-lines</code> setting.</p>
</li>
<li>
<p><code>--max-build-log-size</code> <em>value</em></p>
<p>Set the <code>max-build-log-size</code> setting.</p>
</li>
<li>
<p><code>--max-free</code> <em>value</em></p>
<p>Set the <code>max-free</code> setting.</p>
</li>
<li>
<p><code>--max-jobs</code> <em>value</em></p>
<p>Set the <code>max-jobs</code> setting.</p>
</li>
<li>
<p><code>--max-silent-time</code> <em>value</em></p>
<p>Set the <code>max-silent-time</code> setting.</p>
</li>
<li>
<p><code>--min-free</code> <em>value</em></p>
<p>Set the <code>min-free</code> setting.</p>
</li>
<li>
<p><code>--min-free-check-interval</code> <em>value</em></p>
<p>Set the <code>min-free-check-interval</code> setting.</p>
</li>
<li>
<p><code>--nar-buffer-size</code> <em>value</em></p>
<p>Set the <code>nar-buffer-size</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-negative-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-negative-ttl</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-positive-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-positive-ttl</code> setting.</p>
</li>
<li>
<p><code>--netrc-file</code> <em>value</em></p>
<p>Set the <code>netrc-file</code> setting.</p>
</li>
<li>
<p><code>--nix-path</code> <em>value</em></p>
<p>Set the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--no-accept-flake-config</code></p>
<p>Disable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--no-allow-dirty</code></p>
<p>Disable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--no-allow-import-from-derivation</code></p>
<p>Disable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--no-allow-new-privileges</code></p>
<p>Disable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--no-allow-symlinked-store</code></p>
<p>Disable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--no-allow-unsafe-native-code-during-evaluation</code></p>
<p>Disable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--no-auto-allocate-uids</code></p>
<p>Disable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--no-auto-optimise-store</code></p>
<p>Disable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--no-builders-use-substitutes</code></p>
<p>Disable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--no-compress-build-log</code></p>
<p>Disable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-eval-cache</code></p>
<p>Disable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--no-fallback</code></p>
<p>Disable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--no-filter-syscalls</code></p>
<p>Disable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--no-fsync-metadata</code></p>
<p>Disable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--no-http2</code></p>
<p>Disable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--no-ignore-try</code></p>
<p>Disable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--no-impersonate-linux-26</code></p>
<p>Disable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--no-keep-build-log</code></p>
<p>Disable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-keep-derivations</code></p>
<p>Disable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-env-derivations</code></p>
<p>Disable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-failed</code></p>
<p>Disable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--no-keep-going</code></p>
<p>Disable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--no-keep-outputs</code></p>
<p>Disable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--no-preallocate-contents</code></p>
<p>Disable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--no-print-missing</code></p>
<p>Disable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--no-pure-eval</code></p>
<p>Disable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--no-require-sigs</code></p>
<p>Disable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--no-restrict-eval</code></p>
<p>Disable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--no-run-diff-hook</code></p>
<p>Disable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--no-sandbox</code></p>
<p>Disable sandboxing.</p>
</li>
<li>
<p><code>--no-sandbox-fallback</code></p>
<p>Disable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--no-show-trace</code></p>
<p>Disable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--no-substitute</code></p>
<p>Disable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--no-sync-before-registering</code></p>
<p>Disable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--no-trace-function-calls</code></p>
<p>Disable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--no-trace-verbose</code></p>
<p>Disable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--no-use-case-hack</code></p>
<p>Disable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--no-use-cgroups</code></p>
<p>Disable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--no-use-registries</code></p>
<p>Disable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--no-use-sqlite-wal</code></p>
<p>Disable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--no-warn-dirty</code></p>
<p>Disable the <code>warn-dirty</code> setting.</p>
</li>
<li>
<p><code>--plugin-files</code> <em>value</em></p>
<p>Set the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--post-build-hook</code> <em>value</em></p>
<p>Set the <code>post-build-hook</code> setting.</p>
</li>
<li>
<p><code>--pre-build-hook</code> <em>value</em></p>
<p>Set the <code>pre-build-hook</code> setting.</p>
</li>
<li>
<p><code>--preallocate-contents</code></p>
<p>Enable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--print-missing</code></p>
<p>Enable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--pure-eval</code></p>
<p>Enable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--relaxed-sandbox</code></p>
<p>Enable sandboxing, but allow builds to disable it.</p>
</li>
<li>
<p><code>--require-sigs</code></p>
<p>Enable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--restrict-eval</code></p>
<p>Enable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--run-diff-hook</code></p>
<p>Enable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--sandbox</code></p>
<p>Enable sandboxing.</p>
</li>
<li>
<p><code>--sandbox-build-dir</code> <em>value</em></p>
<p>Set the <code>sandbox-build-dir</code> setting.</p>
</li>
<li>
<p><code>--sandbox-dev-shm-size</code> <em>value</em></p>
<p>Set the <code>sandbox-dev-shm-size</code> setting.</p>
</li>
<li>
<p><code>--sandbox-fallback</code></p>
<p>Enable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--sandbox-paths</code> <em>value</em></p>
<p>Set the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--secret-key-files</code> <em>value</em></p>
<p>Set the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--show-trace</code></p>
<p>Enable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--stalled-download-timeout</code> <em>value</em></p>
<p>Set the <code>stalled-download-timeout</code> setting.</p>
</li>
<li>
<p><code>--start-id</code> <em>value</em></p>
<p>Set the <code>start-id</code> setting.</p>
</li>
<li>
<p><code>--store</code> <em>value</em></p>
<p>Set the <code>store</code> setting.</p>
</li>
<li>
<p><code>--substitute</code></p>
<p>Enable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--substituters</code> <em>value</em></p>
<p>Set the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--sync-before-registering</code></p>
<p>Enable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--system</code> <em>value</em></p>
<p>Set the <code>system</code> setting.</p>
</li>
<li>
<p><code>--system-features</code> <em>value</em></p>
<p>Set the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--tarball-ttl</code> <em>value</em></p>
<p>Set the <code>tarball-ttl</code> setting.</p>
</li>
<li>
<p><code>--timeout</code> <em>value</em></p>
<p>Set the <code>timeout</code> setting.</p>
</li>
<li>
<p><code>--trace-function-calls</code></p>
<p>Enable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--trace-verbose</code></p>
<p>Enable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--trusted-public-keys</code> <em>value</em></p>
<p>Set the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--trusted-substituters</code> <em>value</em></p>
<p>Set the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--trusted-users</code> <em>value</em></p>
<p>Set the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--use-case-hack</code></p>
<p>Enable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--use-cgroups</code></p>
<p>Enable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--use-registries</code></p>
<p>Enable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--use-sqlite-wal</code></p>
<p>Enable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--user-agent-suffix</code> <em>value</em></p>
<p>Set the <code>user-agent-suffix</code> setting.</p>
</li>
<li>
<p><code>--warn-dirty</code></p>
<p>Enable the <code>warn-dirty</code> setting.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p><strong>Warning</strong> <br />
This program is <strong>experimental</strong> and its interface is subject to change.</p>
</blockquote>
<h1 id="name-94"><a class="header" href="#name-94">Name</a></h1>
<p><code>nix why-depends</code> - show why a package has another package in its closure</p>
<h1 id="synopsis-125"><a class="header" href="#synopsis-125">Synopsis</a></h1>
<p><code>nix why-depends</code> [<em>option</em>...] <em>package</em> <em>dependency</em></p>
<h1 id="examples-88"><a class="header" href="#examples-88">Examples</a></h1>
<ul>
<li>
<p>Show one path through the dependency graph leading from Hello to
Glibc:</p>
<pre><code class="language-console"># nix why-depends nixpkgs#hello nixpkgs#glibc
/nix/store/v5sv61sszx301i0x6xysaqzla09nksnd-hello-2.10
└───bin/hello: …...................../nix/store/9l06v7fc38c1x3r2iydl15ksgz0ysb82-glibc-2.32/lib/ld-linux-x86-64.…
    → /nix/store/9l06v7fc38c1x3r2iydl15ksgz0ysb82-glibc-2.32
</code></pre>
</li>
<li>
<p>Show all files and paths in the dependency graph leading from
Thunderbird to libX11:</p>
<pre><code class="language-console"># nix why-depends --all nixpkgs#thunderbird nixpkgs#xorg.libX11
/nix/store/qfc8729nzpdln1h0hvi1ziclsl3m84sr-thunderbird-78.5.1
├───lib/thunderbird/libxul.so: …6wrw-libxcb-1.14/lib:/nix/store/adzfjjh8w25vdr0xdx9x16ah4f5rqrw5-libX11-1.7.0/lib:/nix/store/ssf…
│   → /nix/store/adzfjjh8w25vdr0xdx9x16ah4f5rqrw5-libX11-1.7.0
├───lib/thunderbird/libxul.so: …pxyc-libXt-1.2.0/lib:/nix/store/1qj29ipxl2fyi2b13l39hdircq17gnk0-libXdamage-1.1.5/lib:/nix/store…
│   → /nix/store/1qj29ipxl2fyi2b13l39hdircq17gnk0-libXdamage-1.1.5
│   ├───lib/libXdamage.so.1.1.0: …-libXfixes-5.0.3/lib:/nix/store/adzfjjh8w25vdr0xdx9x16ah4f5rqrw5-libX11-1.7.0/lib:/nix/store/9l0…
│   │   → /nix/store/adzfjjh8w25vdr0xdx9x16ah4f5rqrw5-libX11-1.7.0
…
</code></pre>
</li>
<li>
<p>Show why Glibc depends on itself:</p>
<pre><code class="language-console"># nix why-depends nixpkgs#glibc nixpkgs#glibc
/nix/store/9df65igwjmf2wbw0gbrrgair6piqjgmi-glibc-2.31
└───lib/ld-2.31.so: …che       Do not use /nix/store/9df65igwjmf2wbw0gbrrgair6piqjgmi-glibc-2.31/etc/ld.so.cache.  --…
    → /nix/store/9df65igwjmf2wbw0gbrrgair6piqjgmi-glibc-2.31
</code></pre>
</li>
<li>
<p>Show why Geeqie has a build-time dependency on <code>systemd</code>:</p>
<pre><code class="language-console"># nix why-depends --derivation nixpkgs#geeqie nixpkgs#systemd
/nix/store/drrpq2fqlrbj98bmazrnww7hm1in3wgj-geeqie-1.4.drv
└───/: …atch.drv&quot;,[&quot;out&quot;]),(&quot;/nix/store/qzh8dyq3lfbk3i1acbp7x9wh3il2imiv-gtk+3-3.24.21.drv&quot;,[&quot;dev&quot;]),(&quot;/…
    → /nix/store/qzh8dyq3lfbk3i1acbp7x9wh3il2imiv-gtk+3-3.24.21.drv
    └───/: …16.0.drv&quot;,[&quot;dev&quot;]),(&quot;/nix/store/8kp79fyslf3z4m3dpvlh6w46iaadz5c2-cups-2.3.3.drv&quot;,[&quot;dev&quot;]),(&quot;/nix…
        → /nix/store/8kp79fyslf3z4m3dpvlh6w46iaadz5c2-cups-2.3.3.drv
        └───/: ….3.1.drv&quot;,[&quot;out&quot;]),(&quot;/nix/store/yd3ihapyi5wbz1kjacq9dbkaq5v5hqjg-systemd-246.4.drv&quot;,[&quot;dev&quot;]),(&quot;/…
            → /nix/store/yd3ihapyi5wbz1kjacq9dbkaq5v5hqjg-systemd-246.4.drv
</code></pre>
</li>
</ul>
<h1 id="description-109"><a class="header" href="#description-109">Description</a></h1>
<p>Nix automatically determines potential runtime dependencies between
store paths by scanning for the <em>hash parts</em> of store paths. For
instance, if there exists a store path
<code>/nix/store/9df65igwjmf2wbw0gbrrgair6piqjgmi-glibc-2.31</code>, and a file
inside another store path contains the string <code>9df65igw…</code>, then the
latter store path <em>refers</em> to the former, and thus might need it at
runtime. Nix always maintains the existence of the transitive closure
of a store path under the references relationship; it is therefore not
possible to install a store path without having all of its references
present.</p>
<p>Sometimes Nix packages end up with unexpected runtime dependencies;
for instance, a reference to a compiler might accidentally end up in a
binary, causing the former to be in the latter's closure. This kind of
<em>closure size bloat</em> is undesirable.</p>
<p><code>nix why-depends</code> allows you to diagnose the cause of such issues. It
shows why the store path <em>package</em> depends on the store path
<em>dependency</em>, by showing a shortest sequence in the references graph
from the former to the latter. Also, for each node along this path, it
shows a file fragment containing a reference to the next store path in
the sequence.</p>
<p>To show why derivation <em>package</em> has a build-time rather than runtime
dependency on derivation <em>dependency</em>, use <code>--derivation</code>.</p>
<h1 id="options-70"><a class="header" href="#options-70">Options</a></h1>
<ul>
<li>
<p><code>--all</code> / <code>-a</code></p>
<p>Show all edges in the dependency graph leading from <em>package</em> to <em>dependency</em>, rather than just a shortest path.</p>
</li>
<li>
<p><code>--precise</code></p>
<p>For each edge in the dependency graph, show the files in the parent that cause the dependency.</p>
</li>
</ul>
<p><strong>Common evaluation options:</strong></p>
<ul>
<li>
<p><code>--arg</code> <em>name</em> <em>expr</em></p>
<p>Pass the value <em>expr</em> as the argument <em>name</em> to Nix functions.</p>
</li>
<li>
<p><code>--argstr</code> <em>name</em> <em>string</em></p>
<p>Pass the string <em>string</em> as the argument <em>name</em> to Nix functions.</p>
</li>
<li>
<p><code>--debugger</code></p>
<p>Start an interactive environment if evaluation fails.</p>
</li>
<li>
<p><code>--eval-store</code> <em>store-url</em></p>
<p>The Nix store to use for evaluations.</p>
</li>
<li>
<p><code>--impure</code></p>
<p>Allow access to mutable paths and repositories.</p>
</li>
<li>
<p><code>--include</code> / <code>-I</code> <em>path</em></p>
<p>Add <em>path</em> to the Nix search path. The Nix search path is
initialized from the colon-separated <a href="command-ref/new-cli/../../command-ref/env-common.html#env-NIX_PATH"><code>NIX_PATH</code></a> environment
variable, and is used to look up the location of Nix expressions using <a href="command-ref/new-cli/../../language/values.html#type-path">paths</a> enclosed in angle
brackets (i.e., <code>&lt;nixpkgs&gt;</code>).</p>
<p>For instance, passing</p>
<pre><code>-I /home/eelco/Dev
-I /etc/nixos
</code></pre>
<p>will cause Nix to look for paths relative to <code>/home/eelco/Dev</code> and
<code>/etc/nixos</code>, in that order. This is equivalent to setting the
<code>NIX_PATH</code> environment variable to</p>
<pre><code>/home/eelco/Dev:/etc/nixos
</code></pre>
<p>It is also possible to match paths against a prefix. For example,
passing</p>
<pre><code>-I nixpkgs=/home/eelco/Dev/nixpkgs-branch
-I /etc/nixos
</code></pre>
<p>will cause Nix to search for <code>&lt;nixpkgs/path&gt;</code> in
<code>/home/eelco/Dev/nixpkgs-branch/path</code> and <code>/etc/nixos/nixpkgs/path</code>.</p>
<p>If a path in the Nix search path starts with <code>http://</code> or <code>https://</code>,
it is interpreted as the URL of a tarball that will be downloaded and
unpacked to a temporary location. The tarball must consist of a single
top-level directory. For example, passing</p>
<pre><code>-I nixpkgs=https://github.com/NixOS/nixpkgs/archive/master.tar.gz
</code></pre>
<p>tells Nix to download and use the current contents of the <code>master</code>
branch in the <code>nixpkgs</code> repository.</p>
<p>The URLs of the tarballs from the official <code>nixos.org</code> channels
(see <a href="command-ref/new-cli/../nix-channel.html">the manual page for <code>nix-channel</code></a>) can be
abbreviated as <code>channel:&lt;channel-name&gt;</code>. For instance, the
following two flags are equivalent:</p>
<pre><code>-I nixpkgs=channel:nixos-21.05
-I nixpkgs=https://nixos.org/channels/nixos-21.05/nixexprs.tar.xz
</code></pre>
<p>You can also fetch source trees using <a href="command-ref/new-cli/./nix3-flake.html#url-like-syntax">flake URLs</a> and add them to the
search path. For instance,</p>
<pre><code>-I nixpkgs=flake:nixpkgs
</code></pre>
<p>specifies that the prefix <code>nixpkgs</code> shall refer to the source tree
downloaded from the <code>nixpkgs</code> entry in the flake registry. Similarly,</p>
<pre><code>-I nixpkgs=flake:github:NixOS/nixpkgs/nixos-22.05
</code></pre>
<p>makes <code>&lt;nixpkgs&gt;</code> refer to a particular branch of the
<code>NixOS/nixpkgs</code> repository on GitHub.</p>
</li>
<li>
<p><code>--override-flake</code> <em>original-ref</em> <em>resolved-ref</em></p>
<p>Override the flake registries, redirecting <em>original-ref</em> to <em>resolved-ref</em>.</p>
</li>
</ul>
<p><strong>Common flake-related options:</strong></p>
<ul>
<li>
<p><code>--commit-lock-file</code></p>
<p>Commit changes to the flake's lock file.</p>
</li>
<li>
<p><code>--inputs-from</code> <em>flake-url</em></p>
<p>Use the inputs of the specified flake as registry entries.</p>
</li>
<li>
<p><code>--no-registries</code></p>
<p>Don't allow lookups in the flake registries. This option is deprecated; use <code>--no-use-registries</code>.</p>
</li>
<li>
<p><code>--no-update-lock-file</code></p>
<p>Do not allow any updates to the flake's lock file.</p>
</li>
<li>
<p><code>--no-write-lock-file</code></p>
<p>Do not write the flake's newly generated lock file.</p>
</li>
<li>
<p><code>--override-input</code> <em>input-path</em> <em>flake-url</em></p>
<p>Override a specific flake input (e.g. <code>dwarffs/nixpkgs</code>). This implies <code>--no-write-lock-file</code>.</p>
</li>
<li>
<p><code>--recreate-lock-file</code></p>
<p>Recreate the flake's lock file from scratch.</p>
</li>
<li>
<p><code>--update-input</code> <em>input-path</em></p>
<p>Update a specific flake input (ignoring its previous entry in the lock file).</p>
</li>
</ul>
<p><strong>Logging-related options:</strong></p>
<ul>
<li>
<p><code>--debug</code></p>
<p>Set the logging verbosity level to 'debug'.</p>
</li>
<li>
<p><code>--log-format</code> <em>format</em></p>
<p>Set the format of log output; one of <code>raw</code>, <code>internal-json</code>, <code>bar</code> or <code>bar-with-logs</code>.</p>
</li>
<li>
<p><code>--print-build-logs</code> / <code>-L</code></p>
<p>Print full build logs on standard error.</p>
</li>
<li>
<p><code>--quiet</code></p>
<p>Decrease the logging verbosity level.</p>
</li>
<li>
<p><code>--verbose</code> / <code>-v</code></p>
<p>Increase the logging verbosity level.</p>
</li>
</ul>
<p><strong>Miscellaneous global options:</strong></p>
<ul>
<li>
<p><code>--help</code></p>
<p>Show usage information.</p>
</li>
<li>
<p><code>--offline</code></p>
<p>Disable substituters and consider all previously downloaded files up-to-date.</p>
</li>
<li>
<p><code>--option</code> <em>name</em> <em>value</em></p>
<p>Set the Nix configuration setting <em>name</em> to <em>value</em> (overriding <code>nix.conf</code>).</p>
</li>
<li>
<p><code>--refresh</code></p>
<p>Consider all previously downloaded files out-of-date.</p>
</li>
<li>
<p><code>--version</code></p>
<p>Show version information.</p>
</li>
</ul>
<p><strong>Options that change the interpretation of installables:</strong></p>
<ul>
<li>
<p><code>--derivation</code></p>
<p>Operate on the <a href="command-ref/new-cli/../../glossary.html#gloss-store-derivation">store derivation</a> rather than its outputs.</p>
</li>
<li>
<p><code>--expr</code> <em>expr</em></p>
<p>Interpret installables as attribute paths relative to the Nix expression <em>expr</em>.</p>
</li>
<li>
<p><code>--file</code> / <code>-f</code> <em>file</em></p>
<p>Interpret installables as attribute paths relative to the Nix expression stored in <em>file</em>. If <em>file</em> is the character -, then a Nix expression will be read from standard input. Implies <code>--impure</code>.</p>
</li>
</ul>
<p><strong>Options to override configuration settings:</strong></p>
<ul>
<li>
<p><code>--accept-flake-config</code></p>
<p>Enable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--access-tokens</code> <em>value</em></p>
<p>Set the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--allow-dirty</code></p>
<p>Enable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--allow-import-from-derivation</code></p>
<p>Enable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--allow-new-privileges</code></p>
<p>Enable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--allow-symlinked-store</code></p>
<p>Enable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--allow-unsafe-native-code-during-evaluation</code></p>
<p>Enable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--allowed-impure-host-deps</code> <em>value</em></p>
<p>Set the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--allowed-uris</code> <em>value</em></p>
<p>Set the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--allowed-users</code> <em>value</em></p>
<p>Set the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--auto-allocate-uids</code></p>
<p>Enable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--auto-optimise-store</code></p>
<p>Enable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt</code> <em>value</em></p>
<p>Set the <code>bash-prompt</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-prefix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-prefix</code> setting.</p>
</li>
<li>
<p><code>--bash-prompt-suffix</code> <em>value</em></p>
<p>Set the <code>bash-prompt-suffix</code> setting.</p>
</li>
<li>
<p><code>--build-hook</code> <em>value</em></p>
<p>Set the <code>build-hook</code> setting.</p>
</li>
<li>
<p><code>--build-poll-interval</code> <em>value</em></p>
<p>Set the <code>build-poll-interval</code> setting.</p>
</li>
<li>
<p><code>--build-users-group</code> <em>value</em></p>
<p>Set the <code>build-users-group</code> setting.</p>
</li>
<li>
<p><code>--builders</code> <em>value</em></p>
<p>Set the <code>builders</code> setting.</p>
</li>
<li>
<p><code>--builders-use-substitutes</code></p>
<p>Enable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--commit-lockfile-summary</code> <em>value</em></p>
<p>Set the <code>commit-lockfile-summary</code> setting.</p>
</li>
<li>
<p><code>--compress-build-log</code></p>
<p>Enable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--connect-timeout</code> <em>value</em></p>
<p>Set the <code>connect-timeout</code> setting.</p>
</li>
<li>
<p><code>--cores</code> <em>value</em></p>
<p>Set the <code>cores</code> setting.</p>
</li>
<li>
<p><code>--diff-hook</code> <em>value</em></p>
<p>Set the <code>diff-hook</code> setting.</p>
</li>
<li>
<p><code>--download-attempts</code> <em>value</em></p>
<p>Set the <code>download-attempts</code> setting.</p>
</li>
<li>
<p><code>--download-speed</code> <em>value</em></p>
<p>Set the <code>download-speed</code> setting.</p>
</li>
<li>
<p><code>--eval-cache</code></p>
<p>Enable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--experimental-features</code> <em>value</em></p>
<p>Set the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-access-tokens</code> <em>value</em></p>
<p>Append to the <code>access-tokens</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-impure-host-deps</code> <em>value</em></p>
<p>Append to the <code>allowed-impure-host-deps</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-uris</code> <em>value</em></p>
<p>Append to the <code>allowed-uris</code> setting.</p>
</li>
<li>
<p><code>--extra-allowed-users</code> <em>value</em></p>
<p>Append to the <code>allowed-users</code> setting.</p>
</li>
<li>
<p><code>--extra-experimental-features</code> <em>value</em></p>
<p>Append to the <code>experimental-features</code> setting.</p>
</li>
<li>
<p><code>--extra-extra-platforms</code> <em>value</em></p>
<p>Append to the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-hashed-mirrors</code> <em>value</em></p>
<p>Append to the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--extra-ignored-acls</code> <em>value</em></p>
<p>Append to the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--extra-nix-path</code> <em>value</em></p>
<p>Append to the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--extra-platforms</code> <em>value</em></p>
<p>Set the <code>extra-platforms</code> setting.</p>
</li>
<li>
<p><code>--extra-plugin-files</code> <em>value</em></p>
<p>Append to the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--extra-sandbox-paths</code> <em>value</em></p>
<p>Append to the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--extra-secret-key-files</code> <em>value</em></p>
<p>Append to the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--extra-substituters</code> <em>value</em></p>
<p>Append to the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-system-features</code> <em>value</em></p>
<p>Append to the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-public-keys</code> <em>value</em></p>
<p>Append to the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-substituters</code> <em>value</em></p>
<p>Append to the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--extra-trusted-users</code> <em>value</em></p>
<p>Append to the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--fallback</code></p>
<p>Enable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--filter-syscalls</code></p>
<p>Enable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--flake-registry</code> <em>value</em></p>
<p>Set the <code>flake-registry</code> setting.</p>
</li>
<li>
<p><code>--fsync-metadata</code></p>
<p>Enable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--gc-reserved-space</code> <em>value</em></p>
<p>Set the <code>gc-reserved-space</code> setting.</p>
</li>
<li>
<p><code>--hashed-mirrors</code> <em>value</em></p>
<p>Set the <code>hashed-mirrors</code> setting.</p>
</li>
<li>
<p><code>--http-connections</code> <em>value</em></p>
<p>Set the <code>http-connections</code> setting.</p>
</li>
<li>
<p><code>--http2</code></p>
<p>Enable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--id-count</code> <em>value</em></p>
<p>Set the <code>id-count</code> setting.</p>
</li>
<li>
<p><code>--ignore-try</code></p>
<p>Enable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--ignored-acls</code> <em>value</em></p>
<p>Set the <code>ignored-acls</code> setting.</p>
</li>
<li>
<p><code>--impersonate-linux-26</code></p>
<p>Enable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--keep-build-log</code></p>
<p>Enable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--keep-derivations</code></p>
<p>Enable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-env-derivations</code></p>
<p>Enable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--keep-failed</code></p>
<p>Enable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--keep-going</code></p>
<p>Enable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--keep-outputs</code></p>
<p>Enable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--log-lines</code> <em>value</em></p>
<p>Set the <code>log-lines</code> setting.</p>
</li>
<li>
<p><code>--max-build-log-size</code> <em>value</em></p>
<p>Set the <code>max-build-log-size</code> setting.</p>
</li>
<li>
<p><code>--max-free</code> <em>value</em></p>
<p>Set the <code>max-free</code> setting.</p>
</li>
<li>
<p><code>--max-jobs</code> <em>value</em></p>
<p>Set the <code>max-jobs</code> setting.</p>
</li>
<li>
<p><code>--max-silent-time</code> <em>value</em></p>
<p>Set the <code>max-silent-time</code> setting.</p>
</li>
<li>
<p><code>--min-free</code> <em>value</em></p>
<p>Set the <code>min-free</code> setting.</p>
</li>
<li>
<p><code>--min-free-check-interval</code> <em>value</em></p>
<p>Set the <code>min-free-check-interval</code> setting.</p>
</li>
<li>
<p><code>--nar-buffer-size</code> <em>value</em></p>
<p>Set the <code>nar-buffer-size</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-negative-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-negative-ttl</code> setting.</p>
</li>
<li>
<p><code>--narinfo-cache-positive-ttl</code> <em>value</em></p>
<p>Set the <code>narinfo-cache-positive-ttl</code> setting.</p>
</li>
<li>
<p><code>--netrc-file</code> <em>value</em></p>
<p>Set the <code>netrc-file</code> setting.</p>
</li>
<li>
<p><code>--nix-path</code> <em>value</em></p>
<p>Set the <code>nix-path</code> setting.</p>
</li>
<li>
<p><code>--no-accept-flake-config</code></p>
<p>Disable the <code>accept-flake-config</code> setting.</p>
</li>
<li>
<p><code>--no-allow-dirty</code></p>
<p>Disable the <code>allow-dirty</code> setting.</p>
</li>
<li>
<p><code>--no-allow-import-from-derivation</code></p>
<p>Disable the <code>allow-import-from-derivation</code> setting.</p>
</li>
<li>
<p><code>--no-allow-new-privileges</code></p>
<p>Disable the <code>allow-new-privileges</code> setting.</p>
</li>
<li>
<p><code>--no-allow-symlinked-store</code></p>
<p>Disable the <code>allow-symlinked-store</code> setting.</p>
</li>
<li>
<p><code>--no-allow-unsafe-native-code-during-evaluation</code></p>
<p>Disable the <code>allow-unsafe-native-code-during-evaluation</code> setting.</p>
</li>
<li>
<p><code>--no-auto-allocate-uids</code></p>
<p>Disable the <code>auto-allocate-uids</code> setting.</p>
</li>
<li>
<p><code>--no-auto-optimise-store</code></p>
<p>Disable the <code>auto-optimise-store</code> setting.</p>
</li>
<li>
<p><code>--no-builders-use-substitutes</code></p>
<p>Disable the <code>builders-use-substitutes</code> setting.</p>
</li>
<li>
<p><code>--no-compress-build-log</code></p>
<p>Disable the <code>compress-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-eval-cache</code></p>
<p>Disable the <code>eval-cache</code> setting.</p>
</li>
<li>
<p><code>--no-fallback</code></p>
<p>Disable the <code>fallback</code> setting.</p>
</li>
<li>
<p><code>--no-filter-syscalls</code></p>
<p>Disable the <code>filter-syscalls</code> setting.</p>
</li>
<li>
<p><code>--no-fsync-metadata</code></p>
<p>Disable the <code>fsync-metadata</code> setting.</p>
</li>
<li>
<p><code>--no-http2</code></p>
<p>Disable the <code>http2</code> setting.</p>
</li>
<li>
<p><code>--no-ignore-try</code></p>
<p>Disable the <code>ignore-try</code> setting.</p>
</li>
<li>
<p><code>--no-impersonate-linux-26</code></p>
<p>Disable the <code>impersonate-linux-26</code> setting.</p>
</li>
<li>
<p><code>--no-keep-build-log</code></p>
<p>Disable the <code>keep-build-log</code> setting.</p>
</li>
<li>
<p><code>--no-keep-derivations</code></p>
<p>Disable the <code>keep-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-env-derivations</code></p>
<p>Disable the <code>keep-env-derivations</code> setting.</p>
</li>
<li>
<p><code>--no-keep-failed</code></p>
<p>Disable the <code>keep-failed</code> setting.</p>
</li>
<li>
<p><code>--no-keep-going</code></p>
<p>Disable the <code>keep-going</code> setting.</p>
</li>
<li>
<p><code>--no-keep-outputs</code></p>
<p>Disable the <code>keep-outputs</code> setting.</p>
</li>
<li>
<p><code>--no-preallocate-contents</code></p>
<p>Disable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--no-print-missing</code></p>
<p>Disable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--no-pure-eval</code></p>
<p>Disable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--no-require-sigs</code></p>
<p>Disable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--no-restrict-eval</code></p>
<p>Disable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--no-run-diff-hook</code></p>
<p>Disable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--no-sandbox</code></p>
<p>Disable sandboxing.</p>
</li>
<li>
<p><code>--no-sandbox-fallback</code></p>
<p>Disable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--no-show-trace</code></p>
<p>Disable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--no-substitute</code></p>
<p>Disable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--no-sync-before-registering</code></p>
<p>Disable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--no-trace-function-calls</code></p>
<p>Disable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--no-trace-verbose</code></p>
<p>Disable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--no-use-case-hack</code></p>
<p>Disable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--no-use-cgroups</code></p>
<p>Disable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--no-use-registries</code></p>
<p>Disable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--no-use-sqlite-wal</code></p>
<p>Disable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--no-warn-dirty</code></p>
<p>Disable the <code>warn-dirty</code> setting.</p>
</li>
<li>
<p><code>--plugin-files</code> <em>value</em></p>
<p>Set the <code>plugin-files</code> setting.</p>
</li>
<li>
<p><code>--post-build-hook</code> <em>value</em></p>
<p>Set the <code>post-build-hook</code> setting.</p>
</li>
<li>
<p><code>--pre-build-hook</code> <em>value</em></p>
<p>Set the <code>pre-build-hook</code> setting.</p>
</li>
<li>
<p><code>--preallocate-contents</code></p>
<p>Enable the <code>preallocate-contents</code> setting.</p>
</li>
<li>
<p><code>--print-missing</code></p>
<p>Enable the <code>print-missing</code> setting.</p>
</li>
<li>
<p><code>--pure-eval</code></p>
<p>Enable the <code>pure-eval</code> setting.</p>
</li>
<li>
<p><code>--relaxed-sandbox</code></p>
<p>Enable sandboxing, but allow builds to disable it.</p>
</li>
<li>
<p><code>--require-sigs</code></p>
<p>Enable the <code>require-sigs</code> setting.</p>
</li>
<li>
<p><code>--restrict-eval</code></p>
<p>Enable the <code>restrict-eval</code> setting.</p>
</li>
<li>
<p><code>--run-diff-hook</code></p>
<p>Enable the <code>run-diff-hook</code> setting.</p>
</li>
<li>
<p><code>--sandbox</code></p>
<p>Enable sandboxing.</p>
</li>
<li>
<p><code>--sandbox-build-dir</code> <em>value</em></p>
<p>Set the <code>sandbox-build-dir</code> setting.</p>
</li>
<li>
<p><code>--sandbox-dev-shm-size</code> <em>value</em></p>
<p>Set the <code>sandbox-dev-shm-size</code> setting.</p>
</li>
<li>
<p><code>--sandbox-fallback</code></p>
<p>Enable the <code>sandbox-fallback</code> setting.</p>
</li>
<li>
<p><code>--sandbox-paths</code> <em>value</em></p>
<p>Set the <code>sandbox-paths</code> setting.</p>
</li>
<li>
<p><code>--secret-key-files</code> <em>value</em></p>
<p>Set the <code>secret-key-files</code> setting.</p>
</li>
<li>
<p><code>--show-trace</code></p>
<p>Enable the <code>show-trace</code> setting.</p>
</li>
<li>
<p><code>--stalled-download-timeout</code> <em>value</em></p>
<p>Set the <code>stalled-download-timeout</code> setting.</p>
</li>
<li>
<p><code>--start-id</code> <em>value</em></p>
<p>Set the <code>start-id</code> setting.</p>
</li>
<li>
<p><code>--store</code> <em>value</em></p>
<p>Set the <code>store</code> setting.</p>
</li>
<li>
<p><code>--substitute</code></p>
<p>Enable the <code>substitute</code> setting.</p>
</li>
<li>
<p><code>--substituters</code> <em>value</em></p>
<p>Set the <code>substituters</code> setting.</p>
</li>
<li>
<p><code>--sync-before-registering</code></p>
<p>Enable the <code>sync-before-registering</code> setting.</p>
</li>
<li>
<p><code>--system</code> <em>value</em></p>
<p>Set the <code>system</code> setting.</p>
</li>
<li>
<p><code>--system-features</code> <em>value</em></p>
<p>Set the <code>system-features</code> setting.</p>
</li>
<li>
<p><code>--tarball-ttl</code> <em>value</em></p>
<p>Set the <code>tarball-ttl</code> setting.</p>
</li>
<li>
<p><code>--timeout</code> <em>value</em></p>
<p>Set the <code>timeout</code> setting.</p>
</li>
<li>
<p><code>--trace-function-calls</code></p>
<p>Enable the <code>trace-function-calls</code> setting.</p>
</li>
<li>
<p><code>--trace-verbose</code></p>
<p>Enable the <code>trace-verbose</code> setting.</p>
</li>
<li>
<p><code>--trusted-public-keys</code> <em>value</em></p>
<p>Set the <code>trusted-public-keys</code> setting.</p>
</li>
<li>
<p><code>--trusted-substituters</code> <em>value</em></p>
<p>Set the <code>trusted-substituters</code> setting.</p>
</li>
<li>
<p><code>--trusted-users</code> <em>value</em></p>
<p>Set the <code>trusted-users</code> setting.</p>
</li>
<li>
<p><code>--use-case-hack</code></p>
<p>Enable the <code>use-case-hack</code> setting.</p>
</li>
<li>
<p><code>--use-cgroups</code></p>
<p>Enable the <code>use-cgroups</code> setting.</p>
</li>
<li>
<p><code>--use-registries</code></p>
<p>Enable the <code>use-registries</code> setting.</p>
</li>
<li>
<p><code>--use-sqlite-wal</code></p>
<p>Enable the <code>use-sqlite-wal</code> setting.</p>
</li>
<li>
<p><code>--user-agent-suffix</code> <em>value</em></p>
<p>Set the <code>user-agent-suffix</code> setting.</p>
</li>
<li>
<p><code>--warn-dirty</code></p>
<p>Enable the <code>warn-dirty</code> setting.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="files-2"><a class="header" href="#files-2">Files</a></h1>
<p>This section lists configuration files that you can use when you work
with Nix.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="name-95"><a class="header" href="#name-95">Name</a></h1>
<p><code>nix.conf</code> - Nix configuration file</p>
<h1 id="description-110"><a class="header" href="#description-110">Description</a></h1>
<p>By default Nix reads settings from the following places:</p>
<ul>
<li>
<p>The system-wide configuration file <code>sysconfdir/nix/nix.conf</code> (i.e.
<code>/etc/nix/nix.conf</code> on most systems), or <code>$NIX_CONF_DIR/nix.conf</code> if
<code>NIX_CONF_DIR</code> is set. Values loaded in this file are not forwarded
to the Nix daemon. The client assumes that the daemon has already
loaded them.</p>
</li>
<li>
<p>If <code>NIX_USER_CONF_FILES</code> is set, then each path separated by <code>:</code>
will be loaded in reverse order.</p>
<p>Otherwise it will look for <code>nix/nix.conf</code> files in <code>XDG_CONFIG_DIRS</code>
and <code>XDG_CONFIG_HOME</code>. If unset, <code>XDG_CONFIG_DIRS</code> defaults to
<code>/etc/xdg</code>, and <code>XDG_CONFIG_HOME</code> defaults to <code>$HOME/.config</code>
as per <a href="https://specifications.freedesktop.org/basedir-spec/basedir-spec-latest.html">XDG Base Directory Specification</a>.</p>
</li>
<li>
<p>If <code>NIX_CONFIG</code> is set, its contents is treated as the contents of
a configuration file.</p>
</li>
</ul>
<p>The configuration files consist of <code>name = value</code> pairs, one per
line. Other files can be included with a line like <code>include path</code>,
where <em>path</em> is interpreted relative to the current conf file and a
missing file is an error unless <code>!include</code> is used instead. Comments
start with a <code>#</code> character. Here is an example configuration file:</p>
<pre><code>keep-outputs = true       # Nice for developers
keep-derivations = true   # Idem
</code></pre>
<p>You can override settings on the command line using the <code>--option</code>
flag, e.g. <code>--option keep-outputs false</code>. Every configuration setting
also has a corresponding command line flag, e.g. <code>--max-jobs 16</code>; for
Boolean settings, there are two flags to enable or disable the setting
(e.g. <code>--keep-failed</code> and <code>--no-keep-failed</code>).</p>
<p>A configuration setting usually overrides any previous value. However,
you can prefix the name of the setting by <code>extra-</code> to <em>append</em> to the
previous value. For instance,</p>
<pre><code>substituters = a b
extra-substituters = c d
</code></pre>
<p>defines the <code>substituters</code> setting to be <code>a b c d</code>. This is also
available as a command line flag (e.g. <code>--extra-substituters</code>).</p>
<p>The following settings are currently available:</p>
<ul>
<li>
<p><span id="conf-accept-flake-config"><a href="command-ref/conf-file.html#conf-accept-flake-config"><code>accept-flake-config</code></a></span></p>
<p>Whether to accept nix configuration from a flake without prompting.</p>
<p><strong>Default:</strong> <code>false</code></p>
</li>
<li>
<p><span id="conf-access-tokens"><a href="command-ref/conf-file.html#conf-access-tokens"><code>access-tokens</code></a></span></p>
<p>Access tokens used to access protected GitHub, GitLab, or
other locations requiring token-based authentication.</p>
<p>Access tokens are specified as a string made up of
space-separated <code>host=token</code> values.  The specific token
used is selected by matching the <code>host</code> portion against the
&quot;host&quot; specification of the input. The actual use of the
<code>token</code> value is determined by the type of resource being
accessed:</p>
<ul>
<li>
<p>Github: the token value is the OAUTH-TOKEN string obtained
as the Personal Access Token from the Github server (see
https://docs.github.com/en/developers/apps/building-oauth-apps/authorizing-oauth-apps).</p>
</li>
<li>
<p>Gitlab: the token value is either the OAuth2 token or the
Personal Access Token (these are different types tokens
for gitlab, see
https://docs.gitlab.com/12.10/ee/api/README.html#authentication).
The <code>token</code> value should be <code>type:tokenstring</code> where
<code>type</code> is either <code>OAuth2</code> or <code>PAT</code> to indicate which type
of token is being specified.</p>
</li>
</ul>
<p>Example <code>~/.config/nix/nix.conf</code>:</p>
<pre><code>access-tokens = github.com=23ac...b289 gitlab.mycompany.com=PAT:A123Bp_Cd..EfG gitlab.com=OAuth2:1jklw3jk
</code></pre>
<p>Example <code>~/code/flake.nix</code>:</p>
<pre><code class="language-nix">input.foo = {
  type = &quot;gitlab&quot;;
  host = &quot;gitlab.mycompany.com&quot;;
  owner = &quot;mycompany&quot;;
  repo = &quot;pro&quot;;
};
</code></pre>
<p>This example specifies three tokens, one each for accessing
github.com, gitlab.mycompany.com, and sourceforge.net.</p>
<p>The <code>input.foo</code> uses the &quot;gitlab&quot; fetcher, which might
requires specifying the token type along with the token
value.</p>
<p><strong>Default:</strong> <em>empty</em></p>
</li>
<li>
<p><span id="conf-allow-dirty"><a href="command-ref/conf-file.html#conf-allow-dirty"><code>allow-dirty</code></a></span></p>
<p>Whether to allow dirty Git/Mercurial trees.</p>
<p><strong>Default:</strong> <code>true</code></p>
</li>
<li>
<p><span id="conf-allow-import-from-derivation"><a href="command-ref/conf-file.html#conf-allow-import-from-derivation"><code>allow-import-from-derivation</code></a></span></p>
<p>By default, Nix allows you to <code>import</code> from a derivation, allowing
building at evaluation time. With this option set to false, Nix will
throw an error when evaluating an expression that uses this feature,
allowing users to ensure their evaluation will not require any
builds to take place.</p>
<p><strong>Default:</strong> <code>true</code></p>
</li>
<li>
<p><span id="conf-allow-new-privileges"><a href="command-ref/conf-file.html#conf-allow-new-privileges"><code>allow-new-privileges</code></a></span></p>
<p>(Linux-specific.) By default, builders on Linux cannot acquire new
privileges by calling setuid/setgid programs or programs that have
file capabilities. For example, programs such as <code>sudo</code> or <code>ping</code>
will fail. (Note that in sandbox builds, no such programs are
available unless you bind-mount them into the sandbox via the
<code>sandbox-paths</code> option.) You can allow the use of such programs by
enabling this option. This is impure and usually undesirable, but
may be useful in certain scenarios (e.g. to spin up containers or
set up userspace network interfaces in tests).</p>
<p><strong>Default:</strong> <code>false</code></p>
</li>
<li>
<p><span id="conf-allow-symlinked-store"><a href="command-ref/conf-file.html#conf-allow-symlinked-store"><code>allow-symlinked-store</code></a></span></p>
<p>If set to <code>true</code>, Nix will stop complaining if the store directory
(typically /nix/store) contains symlink components.</p>
<p>This risks making some builds &quot;impure&quot; because builders sometimes
&quot;canonicalise&quot; paths by resolving all symlink components. Problems
occur if those builds are then deployed to machines where /nix/store
resolves to a different location from that of the build machine. You
can enable this setting if you are sure you're not going to do that.</p>
<p><strong>Default:</strong> <code>false</code></p>
</li>
<li>
<p><span id="conf-allow-unsafe-native-code-during-evaluation"><a href="command-ref/conf-file.html#conf-allow-unsafe-native-code-during-evaluation"><code>allow-unsafe-native-code-during-evaluation</code></a></span></p>
<p>Whether builtin functions that allow executing native code should be enabled.</p>
<p><strong>Default:</strong> <code>false</code></p>
</li>
<li>
<p><span id="conf-allowed-impure-host-deps"><a href="command-ref/conf-file.html#conf-allowed-impure-host-deps"><code>allowed-impure-host-deps</code></a></span></p>
<p>Which prefixes to allow derivations to ask for access to (primarily for Darwin).</p>
<p><strong>Default:</strong> <em>empty</em></p>
</li>
<li>
<p><span id="conf-allowed-uris"><a href="command-ref/conf-file.html#conf-allowed-uris"><code>allowed-uris</code></a></span></p>
<p>A list of URI prefixes to which access is allowed in restricted
evaluation mode. For example, when set to
<code>https://github.com/NixOS</code>, builtin functions such as <code>fetchGit</code> are
allowed to access <code>https://github.com/NixOS/patchelf.git</code>.</p>
<p><strong>Default:</strong> <em>empty</em></p>
</li>
<li>
<p><span id="conf-allowed-users"><a href="command-ref/conf-file.html#conf-allowed-users"><code>allowed-users</code></a></span></p>
<p>A list of names of users (separated by whitespace) that are allowed
to connect to the Nix daemon. As with the <code>trusted-users</code> option,
you can specify groups by prefixing them with <code>@</code>. Also, you can
allow all users by specifying <code>*</code>. The default is <code>*</code>.</p>
<p>Note that trusted users are always allowed to connect.</p>
<p><strong>Default:</strong> <code>*</code></p>
</li>
<li>
<p><span id="conf-auto-allocate-uids"><a href="command-ref/conf-file.html#conf-auto-allocate-uids"><code>auto-allocate-uids</code></a></span></p>
<p>Whether to select UIDs for builds automatically, instead of using the
users in <code>build-users-group</code>.</p>
<p>UIDs are allocated starting at 872415232 (0x34000000) on Linux and 56930 on macOS.</p>
<blockquote>
<p><strong>Warning</strong>
This is an experimental feature.</p>
</blockquote>
<p>To enable it, add the following to <a href="command-ref/conf-file.html#"><code>nix.conf</code></a>:</p>
<pre><code>extra-experimental-features = auto-allocate-uids
auto-allocate-uids = true
</code></pre>
<p><strong>Default:</strong> <code>false</code></p>
</li>
<li>
<p><span id="conf-auto-optimise-store"><a href="command-ref/conf-file.html#conf-auto-optimise-store"><code>auto-optimise-store</code></a></span></p>
<p>If set to <code>true</code>, Nix automatically detects files in the store
that have identical contents, and replaces them with hard links to
a single copy. This saves disk space. If set to <code>false</code> (the
default), you can still run <code>nix-store --optimise</code> to get rid of
duplicate files.</p>
<p><strong>Default:</strong> <code>false</code></p>
</li>
<li>
<p><span id="conf-bash-prompt"><a href="command-ref/conf-file.html#conf-bash-prompt"><code>bash-prompt</code></a></span></p>
<p>The bash prompt (<code>PS1</code>) in <code>nix develop</code> shells.</p>
<p><strong>Default:</strong> <em>empty</em></p>
</li>
<li>
<p><span id="conf-bash-prompt-prefix"><a href="command-ref/conf-file.html#conf-bash-prompt-prefix"><code>bash-prompt-prefix</code></a></span></p>
<p>Prefix prepended to the <code>PS1</code> environment variable in <code>nix develop</code> shells.</p>
<p><strong>Default:</strong> <em>empty</em></p>
</li>
<li>
<p><span id="conf-bash-prompt-suffix"><a href="command-ref/conf-file.html#conf-bash-prompt-suffix"><code>bash-prompt-suffix</code></a></span></p>
<p>Suffix appended to the <code>PS1</code> environment variable in <code>nix develop</code> shells.</p>
<p><strong>Default:</strong> <em>empty</em></p>
</li>
<li>
<p><span id="conf-build-hook"><a href="command-ref/conf-file.html#conf-build-hook"><code>build-hook</code></a></span></p>
<p>The path of the helper program that executes builds to remote machines.</p>
<p><strong>Default:</strong> <em>empty</em></p>
</li>
<li>
<p><span id="conf-build-poll-interval"><a href="command-ref/conf-file.html#conf-build-poll-interval"><code>build-poll-interval</code></a></span></p>
<p>How often (in seconds) to poll for locks.</p>
<p><strong>Default:</strong> <code>5</code></p>
</li>
<li>
<p><span id="conf-build-users-group"><a href="command-ref/conf-file.html#conf-build-users-group"><code>build-users-group</code></a></span></p>
<p>This options specifies the Unix group containing the Nix build user
accounts. In multi-user Nix installations, builds should not be
performed by the Nix account since that would allow users to
arbitrarily modify the Nix store and database by supplying specially
crafted builders; and they cannot be performed by the calling user
since that would allow him/her to influence the build result.</p>
<p>Therefore, if this option is non-empty and specifies a valid group,
builds will be performed under the user accounts that are a member
of the group specified here (as listed in <code>/etc/group</code>). Those user
accounts should not be used for any other purpose!</p>
<p>Nix will never run two builds under the same user account at the
same time. This is to prevent an obvious security hole: a malicious
user writing a Nix expression that modifies the build result of a
legitimate Nix expression being built by another user. Therefore it
is good to have as many Nix build user accounts as you can spare.
(Remember: uids are cheap.)</p>
<p>The build users should have permission to create files in the Nix
store, but not delete them. Therefore, <code>/nix/store</code> should be owned
by the Nix account, its group should be the group specified here,
and its mode should be <code>1775</code>.</p>
<p>If the build users group is empty, builds will be performed under
the uid of the Nix process (that is, the uid of the caller if
<code>NIX_REMOTE</code> is empty, the uid under which the Nix daemon runs if
<code>NIX_REMOTE</code> is <code>daemon</code>). Obviously, this should not be used in
multi-user settings with untrusted users.</p>
<p>Defaults to <code>nixbld</code> when running as root, <em>empty</em> otherwise.</p>
<p><strong>Default:</strong> <em>machine-specific</em></p>
</li>
<li>
<p><span id="conf-builders"><a href="command-ref/conf-file.html#conf-builders"><code>builders</code></a></span></p>
<p>A semicolon-separated list of build machines.
For the exact format and examples, see <a href="command-ref/../advanced-topics/distributed-builds.html">the manual chapter on remote builds</a></p>
<p><strong>Default:</strong> <code>@/dummy/machines</code></p>
</li>
<li>
<p><span id="conf-builders-use-substitutes"><a href="command-ref/conf-file.html#conf-builders-use-substitutes"><code>builders-use-substitutes</code></a></span></p>
<p>If set to <code>true</code>, Nix will instruct remote build machines to use
their own binary substitutes if available. In practical terms, this
means that remote hosts will fetch as many build dependencies as
possible from their own substitutes (e.g, from <code>cache.nixos.org</code>),
instead of waiting for this host to upload them all. This can
drastically reduce build times if the network connection between
this computer and the remote build host is slow.</p>
<p><strong>Default:</strong> <code>false</code></p>
</li>
<li>
<p><span id="conf-commit-lockfile-summary"><a href="command-ref/conf-file.html#conf-commit-lockfile-summary"><code>commit-lockfile-summary</code></a></span></p>
<p>The commit summary to use when committing changed flake lock files. If
empty, the summary is generated based on the action performed.</p>
<p><strong>Default:</strong> <em>empty</em></p>
</li>
<li>
<p><span id="conf-compress-build-log"><a href="command-ref/conf-file.html#conf-compress-build-log"><code>compress-build-log</code></a></span></p>
<p>If set to <code>true</code> (the default), build logs written to
<code>/nix/var/log/nix/drvs</code> will be compressed on the fly using bzip2.
Otherwise, they will not be compressed.</p>
<p><strong>Default:</strong> <code>true</code></p>
<p><strong>Deprecated alias:</strong> <code>build-compress-log</code></p>
</li>
<li>
<p><span id="conf-connect-timeout"><a href="command-ref/conf-file.html#conf-connect-timeout"><code>connect-timeout</code></a></span></p>
<p>The timeout (in seconds) for establishing connections in the
binary cache substituter. It corresponds to <code>curl</code>’s
<code>--connect-timeout</code> option. A value of 0 means no limit.</p>
<p><strong>Default:</strong> <code>0</code></p>
</li>
<li>
<p><span id="conf-cores"><a href="command-ref/conf-file.html#conf-cores"><code>cores</code></a></span></p>
<p>Sets the value of the <code>NIX_BUILD_CORES</code> environment variable in the
invocation of builders. Builders can use this variable at their
discretion to control the maximum amount of parallelism. For
instance, in Nixpkgs, if the derivation attribute
<code>enableParallelBuilding</code> is set to <code>true</code>, the builder passes the
<code>-jN</code> flag to GNU Make. It can be overridden using the <code>--cores</code>
command line switch and defaults to <code>1</code>. The value <code>0</code> means that
the builder should use all available CPU cores in the system.</p>
<p><strong>Default:</strong> <em>machine-specific</em></p>
<p><strong>Deprecated alias:</strong> <code>build-cores</code></p>
</li>
<li>
<p><span id="conf-diff-hook"><a href="command-ref/conf-file.html#conf-diff-hook"><code>diff-hook</code></a></span></p>
<p>Absolute path to an executable capable of diffing build
results. The hook is executed if <code>run-diff-hook</code> is true, and the
output of a build is known to not be the same. This program is not
executed to determine if two results are the same.</p>
<p>The diff hook is executed by the same user and group who ran the
build. However, the diff hook does not have write access to the
store path just built.</p>
<p>The diff hook program receives three parameters:</p>
<ol>
<li>
<p>A path to the previous build's results</p>
</li>
<li>
<p>A path to the current build's results</p>
</li>
<li>
<p>The path to the build's derivation</p>
</li>
<li>
<p>The path to the build's scratch directory. This directory will
exist only if the build was run with <code>--keep-failed</code>.</p>
</li>
</ol>
<p>The stderr and stdout output from the diff hook will not be
displayed to the user. Instead, it will print to the nix-daemon's
log.</p>
<p>When using the Nix daemon, <code>diff-hook</code> must be set in the <code>nix.conf</code>
configuration file, and cannot be passed at the command line.</p>
<p><strong>Default:</strong> <em>empty</em></p>
</li>
<li>
<p><span id="conf-download-attempts"><a href="command-ref/conf-file.html#conf-download-attempts"><code>download-attempts</code></a></span></p>
<p>How often Nix will attempt to download a file before giving up.</p>
<p><strong>Default:</strong> <code>5</code></p>
</li>
<li>
<p><span id="conf-download-speed"><a href="command-ref/conf-file.html#conf-download-speed"><code>download-speed</code></a></span></p>
<p>Specify the maximum transfer rate in kilobytes per second you want
Nix to use for downloads.</p>
<p><strong>Default:</strong> <code>0</code></p>
</li>
<li>
<p><span id="conf-eval-cache"><a href="command-ref/conf-file.html#conf-eval-cache"><code>eval-cache</code></a></span></p>
<p>Whether to use the flake evaluation cache.</p>
<p><strong>Default:</strong> <code>true</code></p>
</li>
<li>
<p><span id="conf-experimental-features"><a href="command-ref/conf-file.html#conf-experimental-features"><code>experimental-features</code></a></span></p>
<p>Experimental Nix features to enable.</p>
<p><strong>Default:</strong> <em>empty</em></p>
</li>
<li>
<p><span id="conf-extra-platforms"><a href="command-ref/conf-file.html#conf-extra-platforms"><code>extra-platforms</code></a></span></p>
<p>Platforms other than the native one which this machine is capable of
building for. This can be useful for supporting additional
architectures on compatible machines: i686-linux can be built on
x86_64-linux machines (and the default for this setting reflects
this); armv7 is backwards-compatible with armv6 and armv5tel; some
aarch64 machines can also natively run 32-bit ARM code; and
qemu-user may be used to support non-native platforms (though this
may be slow and buggy). Most values for this are not enabled by
default because build systems will often misdetect the target
platform and generate incompatible code, so you may wish to
cross-check the results of using this option against proper
natively-built versions of your derivations.</p>
<p><strong>Default:</strong> <em>machine-specific</em></p>
</li>
<li>
<p><span id="conf-fallback"><a href="command-ref/conf-file.html#conf-fallback"><code>fallback</code></a></span></p>
<p>If set to <code>true</code>, Nix will fall back to building from source if a
binary substitute fails. This is equivalent to the <code>--fallback</code>
flag. The default is <code>false</code>.</p>
<p><strong>Default:</strong> <code>false</code></p>
<p><strong>Deprecated alias:</strong> <code>build-fallback</code></p>
</li>
<li>
<p><span id="conf-filter-syscalls"><a href="command-ref/conf-file.html#conf-filter-syscalls"><code>filter-syscalls</code></a></span></p>
<p>Whether to prevent certain dangerous system calls, such as
creation of setuid/setgid files or adding ACLs or extended
attributes. Only disable this if you're aware of the
security implications.</p>
<p><strong>Default:</strong> <code>true</code></p>
</li>
<li>
<p><span id="conf-flake-registry"><a href="command-ref/conf-file.html#conf-flake-registry"><code>flake-registry</code></a></span></p>
<p>Path or URI of the global flake registry.</p>
<p>When empty, disables the global flake registry.</p>
<p><strong>Default:</strong> <code>https://channels.nixos.org/flake-registry.json</code></p>
</li>
<li>
<p><span id="conf-fsync-metadata"><a href="command-ref/conf-file.html#conf-fsync-metadata"><code>fsync-metadata</code></a></span></p>
<p>If set to <code>true</code>, changes to the Nix store metadata (in
<code>/nix/var/nix/db</code>) are synchronously flushed to disk. This improves
robustness in case of system crashes, but reduces performance. The
default is <code>true</code>.</p>
<p><strong>Default:</strong> <code>true</code></p>
</li>
<li>
<p><span id="conf-gc-reserved-space"><a href="command-ref/conf-file.html#conf-gc-reserved-space"><code>gc-reserved-space</code></a></span></p>
<p>Amount of reserved disk space for the garbage collector.</p>
<p><strong>Default:</strong> <code>8388608</code></p>
</li>
<li>
<p><span id="conf-hashed-mirrors"><a href="command-ref/conf-file.html#conf-hashed-mirrors"><code>hashed-mirrors</code></a></span></p>
<p>A list of web servers used by <code>builtins.fetchurl</code> to obtain files by
hash. The default is <code>http://tarballs.nixos.org/</code>. Given a hash type
<em>ht</em> and a base-16 hash <em>h</em>, Nix will try to download the file from
<em>hashed-mirror</em>/<em>ht</em>/<em>h</em>. This allows files to be downloaded even if
they have disappeared from their original URI. For example, given
the default mirror <code>http://tarballs.nixos.org/</code>, when building the
derivation</p>
<pre><code class="language-nix">builtins.fetchurl {
  url = &quot;https://example.org/foo-1.2.3.tar.xz&quot;;
  sha256 = &quot;2c26b46b68ffc68ff99b453c1d30413413422d706483bfa0f98a5e886266e7ae&quot;;
}
</code></pre>
<p>Nix will attempt to download this file from
<code>http://tarballs.nixos.org/sha256/2c26b46b68ffc68ff99b453c1d30413413422d706483bfa0f98a5e886266e7ae</code>
first. If it is not available there, if will try the original URI.</p>
<p><strong>Default:</strong> <em>empty</em></p>
</li>
<li>
<p><span id="conf-http-connections"><a href="command-ref/conf-file.html#conf-http-connections"><code>http-connections</code></a></span></p>
<p>The maximum number of parallel TCP connections used to fetch
files from binary caches and by other downloads. It defaults
to 25. 0 means no limit.</p>
<p><strong>Default:</strong> <code>25</code></p>
<p><strong>Deprecated alias:</strong> <code>binary-caches-parallel-connections</code></p>
</li>
<li>
<p><span id="conf-http2"><a href="command-ref/conf-file.html#conf-http2"><code>http2</code></a></span></p>
<p>Whether to enable HTTP/2 support.</p>
<p><strong>Default:</strong> <code>true</code></p>
</li>
<li>
<p><span id="conf-id-count"><a href="command-ref/conf-file.html#conf-id-count"><code>id-count</code></a></span></p>
<p>The number of UIDs/GIDs to use for dynamic ID allocation.</p>
<p><strong>Default:</strong> <code>8388608</code></p>
</li>
<li>
<p><span id="conf-ignore-try"><a href="command-ref/conf-file.html#conf-ignore-try"><code>ignore-try</code></a></span></p>
<p>If set to true, ignore exceptions inside 'tryEval' calls when evaluating nix expressions in
debug mode (using the --debugger flag). By default the debugger will pause on all exceptions.</p>
<p><strong>Default:</strong> <code>false</code></p>
</li>
<li>
<p><span id="conf-ignored-acls"><a href="command-ref/conf-file.html#conf-ignored-acls"><code>ignored-acls</code></a></span></p>
<p>A list of ACLs that should be ignored, normally Nix attempts to
remove all ACLs from files and directories in the Nix store, but
some ACLs like <code>security.selinux</code> or <code>system.nfs4_acl</code> can't be
removed even by root. Therefore it's best to just ignore them.</p>
<p><strong>Default:</strong> <code>security.csm security.selinux system.nfs4_acl</code></p>
</li>
<li>
<p><span id="conf-impersonate-linux-26"><a href="command-ref/conf-file.html#conf-impersonate-linux-26"><code>impersonate-linux-26</code></a></span></p>
<p>Whether to impersonate a Linux 2.6 machine on newer kernels.</p>
<p><strong>Default:</strong> <code>false</code></p>
<p><strong>Deprecated alias:</strong> <code>build-impersonate-linux-26</code></p>
</li>
<li>
<p><span id="conf-keep-build-log"><a href="command-ref/conf-file.html#conf-keep-build-log"><code>keep-build-log</code></a></span></p>
<p>If set to <code>true</code> (the default), Nix will write the build log of a
derivation (i.e. the standard output and error of its builder) to
the directory <code>/nix/var/log/nix/drvs</code>. The build log can be
retrieved using the command <code>nix-store -l path</code>.</p>
<p><strong>Default:</strong> <code>true</code></p>
<p><strong>Deprecated alias:</strong> <code>build-keep-log</code></p>
</li>
<li>
<p><span id="conf-keep-derivations"><a href="command-ref/conf-file.html#conf-keep-derivations"><code>keep-derivations</code></a></span></p>
<p>If <code>true</code> (default), the garbage collector will keep the derivations
from which non-garbage store paths were built. If <code>false</code>, they will
be deleted unless explicitly registered as a root (or reachable from
other roots).</p>
<p>Keeping derivation around is useful for querying and traceability
(e.g., it allows you to ask with what dependencies or options a
store path was built), so by default this option is on. Turn it off
to save a bit of disk space (or a lot if <code>keep-outputs</code> is also
turned on).</p>
<p><strong>Default:</strong> <code>true</code></p>
<p><strong>Deprecated alias:</strong> <code>gc-keep-derivations</code></p>
</li>
<li>
<p><span id="conf-keep-env-derivations"><a href="command-ref/conf-file.html#conf-keep-env-derivations"><code>keep-env-derivations</code></a></span></p>
<p>If <code>false</code> (default), derivations are not stored in Nix user
environments. That is, the derivations of any build-time-only
dependencies may be garbage-collected.</p>
<p>If <code>true</code>, when you add a Nix derivation to a user environment, the
path of the derivation is stored in the user environment. Thus, the
derivation will not be garbage-collected until the user environment
generation is deleted (<code>nix-env --delete-generations</code>). To prevent
build-time-only dependencies from being collected, you should also
turn on <code>keep-outputs</code>.</p>
<p>The difference between this option and <code>keep-derivations</code> is that
this one is “sticky”: it applies to any user environment created
while this option was enabled, while <code>keep-derivations</code> only applies
at the moment the garbage collector is run.</p>
<p><strong>Default:</strong> <code>false</code></p>
<p><strong>Deprecated alias:</strong> <code>env-keep-derivations</code></p>
</li>
<li>
<p><span id="conf-keep-failed"><a href="command-ref/conf-file.html#conf-keep-failed"><code>keep-failed</code></a></span></p>
<p>Whether to keep temporary directories of failed builds.</p>
<p><strong>Default:</strong> <code>false</code></p>
</li>
<li>
<p><span id="conf-keep-going"><a href="command-ref/conf-file.html#conf-keep-going"><code>keep-going</code></a></span></p>
<p>Whether to keep building derivations when another build fails.</p>
<p><strong>Default:</strong> <code>false</code></p>
</li>
<li>
<p><span id="conf-keep-outputs"><a href="command-ref/conf-file.html#conf-keep-outputs"><code>keep-outputs</code></a></span></p>
<p>If <code>true</code>, the garbage collector will keep the outputs of
non-garbage derivations. If <code>false</code> (default), outputs will be
deleted unless they are GC roots themselves (or reachable from other
roots).</p>
<p>In general, outputs must be registered as roots separately. However,
even if the output of a derivation is registered as a root, the
collector will still delete store paths that are used only at build
time (e.g., the C compiler, or source tarballs downloaded from the
network). To prevent it from doing so, set this option to <code>true</code>.</p>
<p><strong>Default:</strong> <code>false</code></p>
<p><strong>Deprecated alias:</strong> <code>gc-keep-outputs</code></p>
</li>
<li>
<p><span id="conf-log-lines"><a href="command-ref/conf-file.html#conf-log-lines"><code>log-lines</code></a></span></p>
<p>The number of lines of the tail of the log to show if a build fails.</p>
<p><strong>Default:</strong> <code>10</code></p>
</li>
<li>
<p><span id="conf-max-build-log-size"><a href="command-ref/conf-file.html#conf-max-build-log-size"><code>max-build-log-size</code></a></span></p>
<p>This option defines the maximum number of bytes that a builder can
write to its stdout/stderr. If the builder exceeds this limit, it’s
killed. A value of <code>0</code> (the default) means that there is no limit.</p>
<p><strong>Default:</strong> <code>0</code></p>
<p><strong>Deprecated alias:</strong> <code>build-max-log-size</code></p>
</li>
<li>
<p><span id="conf-max-free"><a href="command-ref/conf-file.html#conf-max-free"><code>max-free</code></a></span></p>
<p>When a garbage collection is triggered by the <code>min-free</code> option, it
stops as soon as <code>max-free</code> bytes are available. The default is
infinity (i.e. delete all garbage).</p>
<p><strong>Default:</strong> <code>-1</code></p>
</li>
<li>
<p><span id="conf-max-jobs"><a href="command-ref/conf-file.html#conf-max-jobs"><code>max-jobs</code></a></span></p>
<p>This option defines the maximum number of jobs that Nix will try to
build in parallel. The default is <code>1</code>. The special value <code>auto</code>
causes Nix to use the number of CPUs in your system. <code>0</code> is useful
when using remote builders to prevent any local builds (except for
<code>preferLocalBuild</code> derivation attribute which executes locally
regardless). It can be overridden using the <code>--max-jobs</code> (<code>-j</code>)
command line switch.</p>
<p><strong>Default:</strong> <code>1</code></p>
<p><strong>Deprecated alias:</strong> <code>build-max-jobs</code></p>
</li>
<li>
<p><span id="conf-max-silent-time"><a href="command-ref/conf-file.html#conf-max-silent-time"><code>max-silent-time</code></a></span></p>
<p>This option defines the maximum number of seconds that a builder can
go without producing any data on standard output or standard error.
This is useful (for instance in an automated build system) to catch
builds that are stuck in an infinite loop, or to catch remote builds
that are hanging due to network problems. It can be overridden using
the <code>--max-silent-time</code> command line switch.</p>
<p>The value <code>0</code> means that there is no timeout. This is also the
default.</p>
<p><strong>Default:</strong> <code>0</code></p>
<p><strong>Deprecated alias:</strong> <code>build-max-silent-time</code></p>
</li>
<li>
<p><span id="conf-min-free"><a href="command-ref/conf-file.html#conf-min-free"><code>min-free</code></a></span></p>
<p>When free disk space in <code>/nix/store</code> drops below <code>min-free</code> during a
build, Nix performs a garbage-collection until <code>max-free</code> bytes are
available or there is no more garbage. A value of <code>0</code> (the default)
disables this feature.</p>
<p><strong>Default:</strong> <code>0</code></p>
</li>
<li>
<p><span id="conf-min-free-check-interval"><a href="command-ref/conf-file.html#conf-min-free-check-interval"><code>min-free-check-interval</code></a></span></p>
<p>Number of seconds between checking free disk space.</p>
<p><strong>Default:</strong> <code>5</code></p>
</li>
<li>
<p><span id="conf-nar-buffer-size"><a href="command-ref/conf-file.html#conf-nar-buffer-size"><code>nar-buffer-size</code></a></span></p>
<p>Maximum size of NARs before spilling them to disk.</p>
<p><strong>Default:</strong> <code>33554432</code></p>
</li>
<li>
<p><span id="conf-narinfo-cache-negative-ttl"><a href="command-ref/conf-file.html#conf-narinfo-cache-negative-ttl"><code>narinfo-cache-negative-ttl</code></a></span></p>
<p>The TTL in seconds for negative lookups. If a store path is queried
from a substituter but was not found, there will be a negative
lookup cached in the local disk cache database for the specified
duration.</p>
<p><strong>Default:</strong> <code>3600</code></p>
</li>
<li>
<p><span id="conf-narinfo-cache-positive-ttl"><a href="command-ref/conf-file.html#conf-narinfo-cache-positive-ttl"><code>narinfo-cache-positive-ttl</code></a></span></p>
<p>The TTL in seconds for positive lookups. If a store path is queried
from a substituter, the result of the query will be cached in the
local disk cache database including some of the NAR metadata. The
default TTL is a month, setting a shorter TTL for positive lookups
can be useful for binary caches that have frequent garbage
collection, in which case having a more frequent cache invalidation
would prevent trying to pull the path again and failing with a hash
mismatch if the build isn't reproducible.</p>
<p><strong>Default:</strong> <code>2592000</code></p>
</li>
<li>
<p><span id="conf-netrc-file"><a href="command-ref/conf-file.html#conf-netrc-file"><code>netrc-file</code></a></span></p>
<p>If set to an absolute path to a <code>netrc</code> file, Nix will use the HTTP
authentication credentials in this file when trying to download from
a remote host through HTTP or HTTPS. Defaults to
<code>$NIX_CONF_DIR/netrc</code>.</p>
<p>The <code>netrc</code> file consists of a list of accounts in the following
format:</p>
<pre><code>machine my-machine
login my-username
password my-password
</code></pre>
<p>For the exact syntax, see <a href="https://ec.haxx.se/usingcurl-netrc.html">the <code>curl</code>
documentation</a>.</p>
<blockquote>
<p><strong>Note</strong></p>
<p>This must be an absolute path, and <code>~</code> is not resolved. For
example, <code>~/.netrc</code> won't resolve to your home directory's
<code>.netrc</code>.</p>
</blockquote>
<p><strong>Default:</strong> <code>/dummy/netrc</code></p>
</li>
<li>
<p><span id="conf-nix-path"><a href="command-ref/conf-file.html#conf-nix-path"><code>nix-path</code></a></span></p>
<p>List of directories to be searched for <code>&lt;...&gt;</code> file references.</p>
<p><strong>Default:</strong> <em>empty</em></p>
</li>
<li>
<p><span id="conf-plugin-files"><a href="command-ref/conf-file.html#conf-plugin-files"><code>plugin-files</code></a></span></p>
<p>A list of plugin files to be loaded by Nix. Each of these files will
be dlopened by Nix, allowing them to affect execution through static
initialization. In particular, these plugins may construct static
instances of RegisterPrimOp to add new primops or constants to the
expression language, RegisterStoreImplementation to add new store
implementations, RegisterCommand to add new subcommands to the <code>nix</code>
command, and RegisterSetting to add new nix config settings. See the
constructors for those types for more details.</p>
<p>Warning! These APIs are inherently unstable and may change from
release to release.</p>
<p>Since these files are loaded into the same address space as Nix
itself, they must be DSOs compatible with the instance of Nix
running at the time (i.e. compiled against the same headers, not
linked to any incompatible libraries). They should not be linked to
any Nix libs directly, as those will be available already at load
time.</p>
<p>If an entry in the list is a directory, all files in the directory
are loaded as plugins (non-recursively).</p>
<p><strong>Default:</strong> <em>empty</em></p>
</li>
<li>
<p><span id="conf-post-build-hook"><a href="command-ref/conf-file.html#conf-post-build-hook"><code>post-build-hook</code></a></span></p>
<p>Optional. The path to a program to execute after each build.</p>
<p>This option is only settable in the global <code>nix.conf</code>, or on the
command line by trusted users.</p>
<p>When using the nix-daemon, the daemon executes the hook as <code>root</code>.
If the nix-daemon is not involved, the hook runs as the user
executing the nix-build.</p>
<ul>
<li>
<p>The hook executes after an evaluation-time build.</p>
</li>
<li>
<p>The hook does not execute on substituted paths.</p>
</li>
<li>
<p>The hook's output always goes to the user's terminal.</p>
</li>
<li>
<p>If the hook fails, the build succeeds but no further builds
execute.</p>
</li>
<li>
<p>The hook executes synchronously, and blocks other builds from
progressing while it runs.</p>
</li>
</ul>
<p>The program executes with no arguments. The program's environment
contains the following environment variables:</p>
<ul>
<li>
<p><code>DRV_PATH</code>
The derivation for the built paths.</p>
<p>Example:
<code>/nix/store/5nihn1a7pa8b25l9zafqaqibznlvvp3f-bash-4.4-p23.drv</code></p>
</li>
<li>
<p><code>OUT_PATHS</code>
Output paths of the built derivation, separated by a space
character.</p>
<p>Example:
<code>/nix/store/zf5lbh336mnzf1nlswdn11g4n2m8zh3g-bash-4.4-p23-dev /nix/store/rjxwxwv1fpn9wa2x5ssk5phzwlcv4mna-bash-4.4-p23-doc /nix/store/6bqvbzjkcp9695dq0dpl5y43nvy37pq1-bash-4.4-p23-info /nix/store/r7fng3kk3vlpdlh2idnrbn37vh4imlj2-bash-4.4-p23-man /nix/store/xfghy8ixrhz3kyy6p724iv3cxji088dx-bash-4.4-p23</code>.</p>
</li>
</ul>
<p><strong>Default:</strong> <em>empty</em></p>
</li>
<li>
<p><span id="conf-pre-build-hook"><a href="command-ref/conf-file.html#conf-pre-build-hook"><code>pre-build-hook</code></a></span></p>
<p>If set, the path to a program that can set extra derivation-specific
settings for this system. This is used for settings that can't be
captured by the derivation model itself and are too variable between
different versions of the same system to be hard-coded into nix.</p>
<p>The hook is passed the derivation path and, if sandboxes are
enabled, the sandbox directory. It can then modify the sandbox and
send a series of commands to modify various settings to stdout. The
currently recognized commands are:</p>
<ul>
<li><code>extra-sandbox-paths</code><br />
Pass a list of files and directories to be included in the
sandbox for this build. One entry per line, terminated by an
empty line. Entries have the same format as <code>sandbox-paths</code>.</li>
</ul>
<p><strong>Default:</strong> <em>empty</em></p>
</li>
<li>
<p><span id="conf-preallocate-contents"><a href="command-ref/conf-file.html#conf-preallocate-contents"><code>preallocate-contents</code></a></span></p>
<p>Whether to preallocate files when writing objects with known size.</p>
<p><strong>Default:</strong> <code>false</code></p>
</li>
<li>
<p><span id="conf-print-missing"><a href="command-ref/conf-file.html#conf-print-missing"><code>print-missing</code></a></span></p>
<p>Whether to print what paths need to be built or downloaded.</p>
<p><strong>Default:</strong> <code>true</code></p>
</li>
<li>
<p><span id="conf-pure-eval"><a href="command-ref/conf-file.html#conf-pure-eval"><code>pure-eval</code></a></span></p>
<p>Whether to restrict file system and network access to files specified by cryptographic hash.</p>
<p><strong>Default:</strong> <code>false</code></p>
</li>
<li>
<p><span id="conf-require-sigs"><a href="command-ref/conf-file.html#conf-require-sigs"><code>require-sigs</code></a></span></p>
<p>If set to <code>true</code> (the default), any non-content-addressed path added
or copied to the Nix store (e.g. when substituting from a binary
cache) must have a signature by a trusted key. A trusted key is one
listed in <code>trusted-public-keys</code>, or a public key counterpart to a
private key stored in a file listed in <code>secret-key-files</code>.</p>
<p>Set to <code>false</code> to disable signature checking and trust all
non-content-addressed paths unconditionally.</p>
<p>(Content-addressed paths are inherently trustworthy and thus
unaffected by this configuration option.)</p>
<p><strong>Default:</strong> <code>true</code></p>
</li>
<li>
<p><span id="conf-restrict-eval"><a href="command-ref/conf-file.html#conf-restrict-eval"><code>restrict-eval</code></a></span></p>
<p>If set to <code>true</code>, the Nix evaluator will not allow access to any
files outside of the Nix search path (as set via the <code>NIX_PATH</code>
environment variable or the <code>-I</code> option), or to URIs outside of
<code>allowed-uri</code>. The default is <code>false</code>.</p>
<p><strong>Default:</strong> <code>false</code></p>
</li>
<li>
<p><span id="conf-run-diff-hook"><a href="command-ref/conf-file.html#conf-run-diff-hook"><code>run-diff-hook</code></a></span></p>
<p>If true, enable the execution of the <code>diff-hook</code> program.</p>
<p>When using the Nix daemon, <code>run-diff-hook</code> must be set in the
<code>nix.conf</code> configuration file, and cannot be passed at the command
line.</p>
<p><strong>Default:</strong> <code>false</code></p>
</li>
<li>
<p><span id="conf-sandbox"><a href="command-ref/conf-file.html#conf-sandbox"><code>sandbox</code></a></span></p>
<p>If set to <code>true</code>, builds will be performed in a <em>sandboxed
environment</em>, i.e., they’re isolated from the normal file system
hierarchy and will only see their dependencies in the Nix store,
the temporary build directory, private versions of <code>/proc</code>,
<code>/dev</code>, <code>/dev/shm</code> and <code>/dev/pts</code> (on Linux), and the paths
configured with the <code>sandbox-paths</code> option. This is useful to
prevent undeclared dependencies on files in directories such as
<code>/usr/bin</code>. In addition, on Linux, builds run in private PID,
mount, network, IPC and UTS namespaces to isolate them from other
processes in the system (except that fixed-output derivations do
not run in private network namespace to ensure they can access the
network).</p>
<p>Currently, sandboxing only work on Linux and macOS. The use of a
sandbox requires that Nix is run as root (so you should use the
“build users” feature to perform the actual builds under different
users than root).</p>
<p>If this option is set to <code>relaxed</code>, then fixed-output derivations
and derivations that have the <code>__noChroot</code> attribute set to <code>true</code>
do not run in sandboxes.</p>
<p>The default is <code>true</code> on Linux and <code>false</code> on all other platforms.</p>
<p><strong>Default:</strong> <code>true</code></p>
<p><strong>Deprecated alias:</strong> <code>build-use-chroot</code>, <code>build-use-sandbox</code></p>
</li>
<li>
<p><span id="conf-sandbox-build-dir"><a href="command-ref/conf-file.html#conf-sandbox-build-dir"><code>sandbox-build-dir</code></a></span></p>
<p>The build directory inside the sandbox.</p>
<p><strong>Default:</strong> <code>/build</code></p>
</li>
<li>
<p><span id="conf-sandbox-dev-shm-size"><a href="command-ref/conf-file.html#conf-sandbox-dev-shm-size"><code>sandbox-dev-shm-size</code></a></span></p>
<p>This option determines the maximum size of the <code>tmpfs</code> filesystem
mounted on <code>/dev/shm</code> in Linux sandboxes. For the format, see the
description of the <code>size</code> option of <code>tmpfs</code> in mount8. The default
is <code>50%</code>.</p>
<p><strong>Default:</strong> <code>50%</code></p>
</li>
<li>
<p><span id="conf-sandbox-fallback"><a href="command-ref/conf-file.html#conf-sandbox-fallback"><code>sandbox-fallback</code></a></span></p>
<p>Whether to disable sandboxing when the kernel doesn't allow it.</p>
<p><strong>Default:</strong> <code>true</code></p>
</li>
<li>
<p><span id="conf-sandbox-paths"><a href="command-ref/conf-file.html#conf-sandbox-paths"><code>sandbox-paths</code></a></span></p>
<p>A list of paths bind-mounted into Nix sandbox environments. You can
use the syntax <code>target=source</code> to mount a path in a different
location in the sandbox; for instance, <code>/bin=/nix-bin</code> will mount
the path <code>/nix-bin</code> as <code>/bin</code> inside the sandbox. If <em>source</em> is
followed by <code>?</code>, then it is not an error if <em>source</em> does not exist;
for example, <code>/dev/nvidiactl?</code> specifies that <code>/dev/nvidiactl</code> will
only be mounted in the sandbox if it exists in the host filesystem.</p>
<p>If the source is in the Nix store, then its closure will be added to
the sandbox as well.</p>
<p>Depending on how Nix was built, the default value for this option
may be empty or provide <code>/bin/sh</code> as a bind-mount of <code>bash</code>.</p>
<p><strong>Default:</strong> <em>empty</em></p>
<p><strong>Deprecated alias:</strong> <code>build-chroot-dirs</code>, <code>build-sandbox-paths</code></p>
</li>
<li>
<p><span id="conf-secret-key-files"><a href="command-ref/conf-file.html#conf-secret-key-files"><code>secret-key-files</code></a></span></p>
<p>A whitespace-separated list of files containing secret (private)
keys. These are used to sign locally-built paths. They can be
generated using <code>nix-store --generate-binary-cache-key</code>. The
corresponding public key can be distributed to other users, who
can add it to <code>trusted-public-keys</code> in their <code>nix.conf</code>.</p>
<p><strong>Default:</strong> <em>empty</em></p>
</li>
<li>
<p><span id="conf-show-trace"><a href="command-ref/conf-file.html#conf-show-trace"><code>show-trace</code></a></span></p>
<p>Whether Nix should print out a stack trace in case of Nix
expression evaluation errors.</p>
<p><strong>Default:</strong> <code>false</code></p>
</li>
<li>
<p><span id="conf-stalled-download-timeout"><a href="command-ref/conf-file.html#conf-stalled-download-timeout"><code>stalled-download-timeout</code></a></span></p>
<p>The timeout (in seconds) for receiving data from servers
during download. Nix cancels idle downloads after this
timeout's duration.</p>
<p><strong>Default:</strong> <code>300</code></p>
</li>
<li>
<p><span id="conf-start-id"><a href="command-ref/conf-file.html#conf-start-id"><code>start-id</code></a></span></p>
<p>The first UID and GID to use for dynamic ID allocation.</p>
<p><strong>Default:</strong> <code>872415232</code></p>
</li>
<li>
<p><span id="conf-store"><a href="command-ref/conf-file.html#conf-store"><code>store</code></a></span></p>
<p>The default Nix store to use.</p>
<p><strong>Default:</strong> <code>auto</code></p>
</li>
<li>
<p><span id="conf-substitute"><a href="command-ref/conf-file.html#conf-substitute"><code>substitute</code></a></span></p>
<p>If set to <code>true</code> (default), Nix will use binary substitutes if
available. This option can be disabled to force building from
source.</p>
<p><strong>Default:</strong> <code>true</code></p>
<p><strong>Deprecated alias:</strong> <code>build-use-substitutes</code></p>
</li>
<li>
<p><span id="conf-substituters"><a href="command-ref/conf-file.html#conf-substituters"><code>substituters</code></a></span></p>
<p>A list of URLs of substituters, separated by whitespace. Substituters
are tried based on their Priority value, which each substituter can set
independently. Lower value means higher priority.
The default is <code>https://cache.nixos.org</code>, with a Priority of 40.</p>
<p>Nix will copy a store path from a remote store only if one
of the following is true:</p>
<ul>
<li>the store object is signed by one of the <a href="command-ref/conf-file.html#conf-trusted-public-keys"><code>trusted-public-keys</code></a></li>
<li>the substituter is in the <a href="command-ref/conf-file.html#conf-trusted-substituters"><code>trusted-substituters</code></a> list</li>
<li>the <a href="command-ref/conf-file.html#conf-require-sigs"><code>require-sigs</code></a> option has been set to <code>false</code></li>
<li>the store object is <a href="command-ref/../glossary.html#gloss-output-addressed-store-object">output-addressed</a></li>
</ul>
<p><strong>Default:</strong> <code>https://cache.nixos.org/</code></p>
<p><strong>Deprecated alias:</strong> <code>binary-caches</code></p>
</li>
<li>
<p><span id="conf-sync-before-registering"><a href="command-ref/conf-file.html#conf-sync-before-registering"><code>sync-before-registering</code></a></span></p>
<p>Whether to call <code>sync()</code> before registering a path as valid.</p>
<p><strong>Default:</strong> <code>false</code></p>
</li>
<li>
<p><span id="conf-system"><a href="command-ref/conf-file.html#conf-system"><code>system</code></a></span></p>
<p>This option specifies the canonical Nix system name of the current
installation, such as <code>i686-linux</code> or <code>x86_64-darwin</code>. Nix can only
build derivations whose <code>system</code> attribute equals the value
specified here. In general, it never makes sense to modify this
value from its default, since you can use it to ‘lie’ about the
platform you are building on (e.g., perform a Mac OS build on a
Linux machine; the result would obviously be wrong). It only makes
sense if the Nix binaries can run on multiple platforms, e.g.,
‘universal binaries’ that run on <code>x86_64-linux</code> and <code>i686-linux</code>.</p>
<p>It defaults to the canonical Nix system name detected by <code>configure</code>
at build time.</p>
<p><strong>Default:</strong> <code>x86_64-linux</code></p>
</li>
<li>
<p><span id="conf-system-features"><a href="command-ref/conf-file.html#conf-system-features"><code>system-features</code></a></span></p>
<p>A set of system “features” supported by this machine, e.g. <code>kvm</code>.
Derivations can express a dependency on such features through the
derivation attribute <code>requiredSystemFeatures</code>. For example, the
attribute</p>
<pre><code>requiredSystemFeatures = [ &quot;kvm&quot; ];
</code></pre>
<p>ensures that the derivation can only be built on a machine with the
<code>kvm</code> feature.</p>
<p>This setting by default includes <code>kvm</code> if <code>/dev/kvm</code> is accessible,
and the pseudo-features <code>nixos-test</code>, <code>benchmark</code> and <code>big-parallel</code>
that are used in Nixpkgs to route builds to specific machines.</p>
<p><strong>Default:</strong> <em>machine-specific</em></p>
</li>
<li>
<p><span id="conf-tarball-ttl"><a href="command-ref/conf-file.html#conf-tarball-ttl"><code>tarball-ttl</code></a></span></p>
<p>The number of seconds a downloaded tarball is considered fresh. If
the cached tarball is stale, Nix will check whether it is still up
to date using the ETag header. Nix will download a new version if
the ETag header is unsupported, or the cached ETag doesn't match.</p>
<p>Setting the TTL to <code>0</code> forces Nix to always check if the tarball is
up to date.</p>
<p>Nix caches tarballs in <code>$XDG_CACHE_HOME/nix/tarballs</code>.</p>
<p>Files fetched via <code>NIX_PATH</code>, <code>fetchGit</code>, <code>fetchMercurial</code>,
<code>fetchTarball</code>, and <code>fetchurl</code> respect this TTL.</p>
<p><strong>Default:</strong> <code>3600</code></p>
</li>
<li>
<p><span id="conf-timeout"><a href="command-ref/conf-file.html#conf-timeout"><code>timeout</code></a></span></p>
<p>This option defines the maximum number of seconds that a builder can
run. This is useful (for instance in an automated build system) to
catch builds that are stuck in an infinite loop but keep writing to
their standard output or standard error. It can be overridden using
the <code>--timeout</code> command line switch.</p>
<p>The value <code>0</code> means that there is no timeout. This is also the
default.</p>
<p><strong>Default:</strong> <code>0</code></p>
<p><strong>Deprecated alias:</strong> <code>build-timeout</code></p>
</li>
<li>
<p><span id="conf-trace-function-calls"><a href="command-ref/conf-file.html#conf-trace-function-calls"><code>trace-function-calls</code></a></span></p>
<p>If set to <code>true</code>, the Nix evaluator will trace every function call.
Nix will print a log message at the &quot;vomit&quot; level for every function
entrance and function exit.</p>
<pre><code>function-trace entered undefined position at 1565795816999559622
function-trace exited undefined position at 1565795816999581277
function-trace entered /nix/store/.../example.nix:226:41 at 1565795253249935150
function-trace exited /nix/store/.../example.nix:226:41 at 1565795253249941684
</code></pre>
<p>The <code>undefined position</code> means the function call is a builtin.</p>
<p>Use the <code>contrib/stack-collapse.py</code> script distributed with the Nix
source code to convert the trace logs in to a format suitable for
<code>flamegraph.pl</code>.</p>
<p><strong>Default:</strong> <code>false</code></p>
</li>
<li>
<p><span id="conf-trace-verbose"><a href="command-ref/conf-file.html#conf-trace-verbose"><code>trace-verbose</code></a></span></p>
<p>Whether <code>builtins.traceVerbose</code> should trace its first argument when evaluated.</p>
<p><strong>Default:</strong> <code>false</code></p>
</li>
<li>
<p><span id="conf-trusted-public-keys"><a href="command-ref/conf-file.html#conf-trusted-public-keys"><code>trusted-public-keys</code></a></span></p>
<p>A whitespace-separated list of public keys. When paths are copied
from another Nix store (such as a binary cache), they must be
signed with one of these keys. For example:
<code>cache.nixos.org-1:6NCHdD59X431o0gWypbMrAURkbJ16ZPMQFGspcDShjY= hydra.nixos.org-1:CNHJZBh9K4tP3EKF6FkkgeVYsS3ohTl+oS0Qa8bezVs=</code>.</p>
<p><strong>Default:</strong> <code>cache.nixos.org-1:6NCHdD59X431o0gWypbMrAURkbJ16ZPMQFGspcDShjY=</code></p>
<p><strong>Deprecated alias:</strong> <code>binary-cache-public-keys</code></p>
</li>
<li>
<p><span id="conf-trusted-substituters"><a href="command-ref/conf-file.html#conf-trusted-substituters"><code>trusted-substituters</code></a></span></p>
<p>A list of URLs of substituters, separated by whitespace. These are
not used by default, but can be enabled by users of the Nix daemon
by specifying <code>--option substituters urls</code> on the command
line. Unprivileged users are only allowed to pass a subset of the
URLs listed in <code>substituters</code> and <code>trusted-substituters</code>.</p>
<p><strong>Default:</strong> <em>empty</em></p>
<p><strong>Deprecated alias:</strong> <code>trusted-binary-caches</code></p>
</li>
<li>
<p><span id="conf-trusted-users"><a href="command-ref/conf-file.html#conf-trusted-users"><code>trusted-users</code></a></span></p>
<p>A list of names of users (separated by whitespace) that have
additional rights when connecting to the Nix daemon, such as the
ability to specify additional binary caches, or to import unsigned
NARs. You can also specify groups by prefixing them with <code>@</code>; for
instance, <code>@wheel</code> means all users in the <code>wheel</code> group. The default
is <code>root</code>.</p>
<blockquote>
<p><strong>Warning</strong></p>
<p>Adding a user to <code>trusted-users</code> is essentially equivalent to
giving that user root access to the system. For example, the user
can set <code>sandbox-paths</code> and thereby obtain read access to
directories that are otherwise inacessible to them.</p>
</blockquote>
<p><strong>Default:</strong> <code>root</code></p>
</li>
<li>
<p><span id="conf-use-case-hack"><a href="command-ref/conf-file.html#conf-use-case-hack"><code>use-case-hack</code></a></span></p>
<p>Whether to enable a Darwin-specific hack for dealing with file name collisions.</p>
<p><strong>Default:</strong> <code>false</code></p>
</li>
<li>
<p><span id="conf-use-cgroups"><a href="command-ref/conf-file.html#conf-use-cgroups"><code>use-cgroups</code></a></span></p>
<p>Whether to execute builds inside cgroups.
This is only supported on Linux.</p>
<p>Cgroups are required and enabled automatically for derivations
that require the <code>uid-range</code> system feature.</p>
<blockquote>
<p><strong>Warning</strong>
This is an experimental feature.</p>
</blockquote>
<p>To enable it, add the following to <a href="command-ref/conf-file.html#"><code>nix.conf</code></a>:</p>
<pre><code>extra-experimental-features = cgroups
use-cgroups = true
</code></pre>
<p><strong>Default:</strong> <code>false</code></p>
</li>
<li>
<p><span id="conf-use-registries"><a href="command-ref/conf-file.html#conf-use-registries"><code>use-registries</code></a></span></p>
<p>Whether to use flake registries to resolve flake references.</p>
<p><strong>Default:</strong> <code>true</code></p>
</li>
<li>
<p><span id="conf-use-sqlite-wal"><a href="command-ref/conf-file.html#conf-use-sqlite-wal"><code>use-sqlite-wal</code></a></span></p>
<p>Whether SQLite should use WAL mode.</p>
<p><strong>Default:</strong> <code>true</code></p>
</li>
<li>
<p><span id="conf-user-agent-suffix"><a href="command-ref/conf-file.html#conf-user-agent-suffix"><code>user-agent-suffix</code></a></span></p>
<p>String appended to the user agent in HTTP requests.</p>
<p><strong>Default:</strong> <em>empty</em></p>
</li>
<li>
<p><span id="conf-warn-dirty"><a href="command-ref/conf-file.html#conf-warn-dirty"><code>warn-dirty</code></a></span></p>
<p>Whether to warn about dirty Git/Mercurial trees.</p>
<p><strong>Default:</strong> <code>true</code></p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="architecture"><a class="header" href="#architecture">Architecture</a></h1>
<p>This chapter describes how Nix works.
It should help users understand why Nix behaves as it does, and it should help developers understand how to modify Nix and how to write similar tools.</p>
<h2 id="overview-1"><a class="header" href="#overview-1">Overview</a></h2>
<p>Nix consists of <a href="https://en.m.wikipedia.org/wiki/Multitier_architecture#Layers">hierarchical layers</a>.</p>
<p>The following <a href="https://en.m.wikipedia.org/wiki/Concept_map">concept map</a> shows its main components (rectangles), the objects they operate on (rounded rectangles), and their interactions (connecting phrases):</p>
<pre><code>
   .----------------.
   | Nix expression |----------.
   '----------------'          |
           |              passed to
           |                   |
+----------|-------------------|--------------------------------+
| Nix      |                   V                                |
|          |      +-------------------------+                   |
|          |      | commmand line interface |------.            |
|          |      +-------------------------+      |            |
|          |                   |                   |            |
|    evaluated by            calls              manages         |
|          |                   |                   |            |
|          |                   V                   |            |
|          |         +--------------------+        |            |
|          '--------&gt;| language evaluator |        |            |
|                    +--------------------+        |            |
|                              |                   |            |
|                           produces               |            |
|                              |                   V            |
| +----------------------------|------------------------------+ |
| | store                      |                              | |
| |            referenced by   V       builds                 | |
| | .-------------.      .------------.      .--------------. | |
| | | build input |-----&gt;| build plan |-----&gt;| build result | | |
| | '-------------'      '------------'      '--------------' | |
| +-------------------------------------------------|---------+ |
+---------------------------------------------------|-----------+
                                                    |
                                              represented as
                                                    |
                                                    V
                                            .---------------.
                                            |     file      |
                                            '---------------'
</code></pre>
<p>At the top is the <a href="architecture/../command-ref/command-ref.html">command line interface</a> that drives the underlying layers.</p>
<p>The <a href="architecture/../language/index.html">Nix language</a> evaluator transforms Nix expressions into self-contained <em>build plans</em>, which are used to derive <em>build results</em> from referenced <em>build inputs</em>.</p>
<p>The command line interface and Nix expressions are what users deal with most.</p>
<blockquote>
<p><strong>Note</strong>
The Nix language itself does not have a notion of <em>packages</em> or <em>configurations</em>.
As far as we are concerned here, the inputs and results of a build plan are just data.</p>
</blockquote>
<p>Underlying the command line interface and the Nix language evaluator is the <a href="architecture/../glossary.html#gloss-store">Nix store</a>, a mechanism to keep track of build plans, data, and references between them.
It can also execute build plans to produce new data, which are made available to the operating system as files.</p>
<p>A build plan itself is a series of <em>build tasks</em>, together with their build inputs.</p>
<blockquote>
<p><strong>Important</strong>
A build task in Nix is called <a href="architecture/../glossary.html#gloss-derivation">derivation</a>.</p>
</blockquote>
<p>Each build task has a special build input executed as <em>build instructions</em> in order to perform the build.
The result of a build task can be input to another build task.</p>
<p>The following <a href="https://en.m.wikipedia.org/wiki/Data-flow_diagram">data flow diagram</a> shows a build plan for illustration.
Build inputs used as instructions to a build task are marked accordingly:</p>
<pre><code>+--------------------------------------------------------------------+
| build plan                                                         |
|                                                                    |
| .-------------.                                                    |
| | build input |---------.                                          |
| '-------------'         |                                          |
|                    instructions                                    |
|                         |                                          |
|                         v                                          |
| .-------------.    .----------.                                    |
| | build input |--&gt;( build task )-------.                           |
| '-------------'    '----------'        |                           |
|                                  instructions                      |
|                                        |                           |
|                                        v                           |
| .-------------.                  .----------.     .--------------. |
| | build input |---------.       ( build task )---&gt;| build result | |
| '-------------'         |        '----------'     '--------------' |
|                    instructions        ^                           |
|                         |              |                           |
|                         v              |                           |
| .-------------.    .----------.        |                           |
| | build input |--&gt;( build task )-------'                           |
| '-------------'    '----------'                                    |
|                         ^                                          |
|                         |                                          |
|                         |                                          |
| .-------------.         |                                          |
| | build input |---------'                                          |
| '-------------'                                                    |
|                                                                    |
+--------------------------------------------------------------------+
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="glossary"><a class="header" href="#glossary">Glossary</a></h1>
<ul>
<li>
<p><a href="glossary.html#gloss-derivation" id="gloss-derivation">derivation</a><br />
A description of a build task. The result of a derivation is a
store object. Derivations are typically specified in Nix expressions
using the <a href="./language/derivations.html"><code>derivation</code> primitive</a>. These are
translated into low-level <em>store derivations</em> (implicitly by
<code>nix-env</code> and <code>nix-build</code>, or explicitly by <code>nix-instantiate</code>).</p>
</li>
<li>
<p><a href="glossary.html#gloss-store-derivation" id="gloss-store-derivation">store derivation</a><br />
A <a href="glossary.html#gloss-derivation">derivation</a> represented as a <code>.drv</code> file in the <a href="glossary.html#gloss-store">store</a>.
It has a <a href="glossary.html#gloss-store-path">store path</a>, like any <a href="glossary.html#gloss-store-object">store object</a>.</p>
<p>Example: <code>/nix/store/g946hcz4c8mdvq2g8vxx42z51qb71rvp-git-2.38.1.drv</code></p>
<p>See <a href="./command-ref/new-cli/nix3-show-derivation.html"><code>nix show-derivation</code></a> (experimental) for displaying the contents of store derivations.</p>
</li>
<li>
<p><a href="glossary.html#gloss-content-addressed-derivation" id="gloss-content-addressed-derivation">content-addressed derivation</a><br />
A derivation which has the
<a href="./language/advanced-attributes.html#adv-attr-__contentAddressed"><code>__contentAddressed</code></a>
attribute set to <code>true</code>.</p>
</li>
<li>
<p><a href="glossary.html#gloss-fixed-output-derivation" id="gloss-fixed-output-derivation">fixed-output derivation</a><br />
A derivation which includes the
<a href="./language/advanced-attributes.html#adv-attr-outputHash"><code>outputHash</code></a> attribute.</p>
</li>
<li>
<p><a href="glossary.html#gloss-store" id="gloss-store">store</a><br />
The location in the file system where store objects live. Typically
<code>/nix/store</code>.</p>
<p>From   the  perspective   of   the  location   where  Nix   is
invoked, the  Nix store can be  referred to
as a &quot;<em>local</em>&quot; or a &quot;<em>remote</em>&quot; one:</p>
<ul>
<li>
<p>A <em>local  store</em> exists  on the filesystem of
the machine where Nix is  invoked. You can use other
local stores  by passing  the <code>--store</code> flag  to the
<code>nix</code> command.  Local stores can be used for building derivations.</p>
</li>
<li>
<p>A  <em>remote store</em>  exists  anywhere  other than  the
local  filesystem. One  example is  the <code>/nix/store</code>
directory on another machine,  accessed via <code>ssh</code> or
served by the <code>nix-serve</code> Perl script.</p>
</li>
</ul>
</li>
<li>
<p><a href="glossary.html#gloss-chroot-store" id="gloss-chroot-store">chroot store</a><br />
A local store whose canonical path is anything other than <code>/nix/store</code>.</p>
</li>
<li>
<p><a href="glossary.html#gloss-binary-cache" id="gloss-binary-cache">binary cache</a><br />
A <em>binary cache</em> is a Nix store which uses a different format: its
metadata and signatures are kept in <code>.narinfo</code> files rather than in a
Nix database.  This different format simplifies serving store objects
over the network, but cannot host builds.  Examples of binary caches
include S3 buckets and the <a href="https://cache.nixos.org">NixOS binary
cache</a>.</p>
</li>
<li>
<p><a href="glossary.html#gloss-store-path" id="gloss-store-path">store path</a><br />
The location of a <a href="glossary.html#gloss-store-object">store object</a> in the file system, i.e., an
immediate child of the Nix store directory.</p>
<p>Example: <code>/nix/store/a040m110amc4h71lds2jmr8qrkj2jhxd-git-2.38.1</code></p>
</li>
<li>
<p><a href="glossary.html#gloss-store-object" id="gloss-store-object">store object</a><br />
A file that is an immediate child of the Nix store directory. These
can be regular files, but also entire directory trees. Store objects
can be sources (objects copied from outside of the store),
derivation outputs (objects produced by running a build task), or
derivations (files describing a build task).</p>
</li>
<li>
<p><a href="glossary.html#gloss-input-addressed-store-object" id="gloss-input-addressed-store-object">input-addressed store object</a><br />
A store object produced by building a
non-<a href="glossary.html#gloss-content-addressed-derivation">content-addressed</a>,
non-<a href="glossary.html#gloss-fixed-output-derivation">fixed-output</a>
derivation.</p>
</li>
<li>
<p><a href="glossary.html#gloss-output-addressed-store-object" id="gloss-output-addressed-store-object">output-addressed store object</a><br />
A store object whose store path hashes its content.  This
includes derivations, the outputs of
<a href="glossary.html#gloss-content-addressed-derivation">content-addressed derivations</a>,
and the outputs of
<a href="glossary.html#gloss-fixed-output-derivation">fixed-output derivations</a>.</p>
</li>
<li>
<p><a href="glossary.html#gloss-substitute" id="gloss-substitute">substitute</a><br />
A substitute is a command invocation stored in the Nix database that
describes how to build a store object, bypassing the normal build
mechanism (i.e., derivations). Typically, the substitute builds the
store object by downloading a pre-built version of the store object
from some server.</p>
</li>
<li>
<p><a href="glossary.html#gloss-substituter" id="gloss-substituter">substituter</a><br />
A <em>substituter</em> is an additional store from which Nix will
copy store objects it doesn't have.  For details, see the
<a href="./command-ref/conf-file.html#conf-substituters"><code>substituters</code> option</a>.</p>
</li>
<li>
<p><a href="glossary.html#gloss-purity" id="gloss-purity">purity</a><br />
The assumption that equal Nix derivations when run always produce
the same output. This cannot be guaranteed in general (e.g., a
builder can rely on external inputs such as the network or the
system time) but the Nix model assumes it.</p>
</li>
<li>
<p><a href="glossary.html#gloss-nix-expression" id="gloss-nix-expression">Nix expression</a><br />
A high-level description of software packages and compositions
thereof. Deploying software using Nix entails writing Nix
expressions for your packages. Nix expressions are translated to
derivations that are stored in the Nix store. These derivations can
then be built.</p>
</li>
<li>
<p><a href="glossary.html#gloss-reference" id="gloss-reference">reference</a><br />
A store path <code>P</code> is said to have a reference to a store path <code>Q</code> if
the store object at <code>P</code> contains the path <code>Q</code> somewhere. The
<em>references</em> of a store path are the set of store paths to which it
has a reference.</p>
<p>A derivation can reference other derivations and sources (but not
output paths), whereas an output path only references other output
paths.</p>
</li>
<li>
<p><a href="glossary.html#gloss-reachable" id="gloss-reachable">reachable</a><br />
A store path <code>Q</code> is reachable from another store path <code>P</code> if <code>Q</code>
is in the <em>closure</em> of the <em>references</em> relation.</p>
</li>
<li>
<p><a href="glossary.html#gloss-closure" id="gloss-closure">closure</a><br />
The closure of a store path is the set of store paths that are
directly or indirectly “reachable” from that store path; that is,
it’s the closure of the path under the <em>references</em> relation. For
a package, the closure of its derivation is equivalent to the
build-time dependencies, while the closure of its output path is
equivalent to its runtime dependencies. For correct deployment it
is necessary to deploy whole closures, since otherwise at runtime
files could be missing. The command <code>nix-store -qR</code> prints out
closures of store paths.</p>
<p>As an example, if the store object at path <code>P</code> contains a reference
to path <code>Q</code>, then <code>Q</code> is in the closure of <code>P</code>. Further, if <code>Q</code>
references <code>R</code> then <code>R</code> is also in the closure of <code>P</code>.</p>
</li>
<li>
<p><a href="glossary.html#gloss-output-path" id="gloss-output-path">output path</a><br />
A <a href="glossary.html#gloss-store-path">store path</a> produced by a <a href="glossary.html#gloss-derivation">derivation</a>.</p>
</li>
<li>
<p><a href="glossary.html#gloss-deriver" id="gloss-deriver">deriver</a><br />
The deriver of an <em>output path</em> is the store
derivation that built it.</p>
</li>
<li>
<p><a href="glossary.html#gloss-validity" id="gloss-validity">validity</a><br />
A store path is considered <em>valid</em> if it exists in the file system,
is listed in the Nix database as being valid, and if all paths in
its closure are also valid.</p>
</li>
<li>
<p><a href="glossary.html#gloss-user-env" id="gloss-user-env">user environment</a><br />
An automatically generated store object that consists of a set of
symlinks to “active” applications, i.e., other store paths. These
are generated automatically by
<a href="./command-ref/nix-env.html"><code>nix-env</code></a>. See <em>profiles</em>.</p>
</li>
<li>
<p><a href="glossary.html#gloss-profile" id="gloss-profile">profile</a><br />
A symlink to the current <em>user environment</em> of a user, e.g.,
<code>/nix/var/nix/profiles/default</code>.</p>
</li>
<li>
<p><a href="glossary.html#gloss-nar" id="gloss-nar">NAR</a><br />
A <em>N</em>ix <em>AR</em>chive. This is a serialisation of a path in the Nix
store. It can contain regular files, directories and symbolic
links.  NARs are generated and unpacked using <code>nix-store --dump</code>
and <code>nix-store --restore</code>.</p>
</li>
<li>
<p><a href="glossary.html#gloss-emtpy-set" id="gloss-emtpy-set"><code>∅</code></a><br />
The empty set symbol. In the context of profile history, this denotes a package is not present in a particular version of the profile.</p>
</li>
<li>
<p><a href="glossary.html#gloss-epsilon" id="gloss-epsilon"><code>ε</code></a><br />
The epsilon symbol. In the context of a package, this means the version is empty. More precisely, the derivation does not have a version attribute.</p>
</li>
<li>
<p><a href="glossary.html#gloss-string-interpolation" id="gloss-string-interpolation">string interpolation</a><br />
Expanding expressions enclosed in <code>${ }</code> within a <a href="./language/values.html#type-string">string</a>, <a href="./language/values.html#type-path">path</a>, or <a href="./language/values.html#attribute-set">attribute name</a>.</p>
<p>See <a href="./language/string-interpolation.html">String interpolation</a> for details.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contributing"><a class="header" href="#contributing">Contributing</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="hacking"><a class="header" href="#hacking">Hacking</a></h1>
<p>This section provides some notes on how to hack on Nix. To get the
latest version of Nix from GitHub:</p>
<pre><code class="language-console">$ git clone https://github.com/NixOS/nix.git
$ cd nix
</code></pre>
<p>To build Nix for the current operating system/architecture use</p>
<pre><code class="language-console">$ nix-build
</code></pre>
<p>or if you have a flake-enabled nix:</p>
<pre><code class="language-console">$ nix build
</code></pre>
<p>This will build <code>defaultPackage</code> attribute defined in the <code>flake.nix</code>
file. To build for other platforms add one of the following suffixes to
it: aarch64-linux, i686-linux, x86_64-darwin, x86_64-linux. i.e.</p>
<pre><code class="language-console">$ nix-build -A defaultPackage.x86_64-linux
</code></pre>
<p>To build all dependencies and start a shell in which all environment
variables are set up so that those dependencies can be found:</p>
<pre><code class="language-console">$ nix-shell
</code></pre>
<p>or if you have a flake-enabled nix:</p>
<pre><code class="language-console">$ nix develop
</code></pre>
<p>To get a shell with a different compilation environment (e.g. stdenv,
gccStdenv, clangStdenv, clang11Stdenv, ccacheStdenv):</p>
<pre><code class="language-console">$ nix-shell -A devShells.x86_64-linux.clang11StdenvPackages
</code></pre>
<p>or if you have a flake-enabled nix:</p>
<pre><code class="language-console">$ nix develop .#clang11StdenvPackages
</code></pre>
<p>Note: you can use <code>ccacheStdenv</code> to drastically improve rebuild
time. By default, ccache keeps artifacts in <code>~/.cache/ccache/</code>.</p>
<p>To build Nix itself in this shell:</p>
<pre><code class="language-console">[nix-shell]$ ./bootstrap.sh
[nix-shell]$ ./configure $configureFlags --prefix=$(pwd)/outputs/out
[nix-shell]$ make -j $NIX_BUILD_CORES
</code></pre>
<p>To install it in <code>$(pwd)/outputs</code> and test it:</p>
<pre><code class="language-console">[nix-shell]$ make install
[nix-shell]$ make installcheck -j $NIX_BUILD_CORES
[nix-shell]$ ./outputs/out/bin/nix --version
nix (Nix) 3.0
</code></pre>
<p>If you have a flakes-enabled Nix you can replace:</p>
<pre><code class="language-console">$ nix-shell
</code></pre>
<p>by:</p>
<pre><code class="language-console">$ nix develop
</code></pre>
<h2 id="running-tests"><a class="header" href="#running-tests">Running tests</a></h2>
<h3 id="unit-tests"><a class="header" href="#unit-tests">Unit-tests</a></h3>
<p>The unit-tests for each Nix library (<code>libexpr</code>, <code>libstore</code>, etc..) are defined
under <code>src/{library_name}/tests</code> using the
<a href="https://google.github.io/googletest/">googletest</a> framework.</p>
<p>You can run the whole testsuite with <code>make check</code>, or the tests for a specific component with <code>make libfoo-tests_RUN</code>. Finer-grained filtering is also possible using the <a href="https://google.github.io/googletest/advanced.html#running-a-subset-of-the-tests">--gtest_filter</a> command-line option.</p>
<h3 id="functional-tests"><a class="header" href="#functional-tests">Functional tests</a></h3>
<p>The functional tests reside under the <code>tests</code> directory and are listed in <code>tests/local.mk</code>.
Each test is a bash script.</p>
<p>The whole test suite can be run with:</p>
<pre><code class="language-shell-session">$ make install &amp;&amp; make installcheck
ran test tests/foo.sh... [PASS]
ran test tests/bar.sh... [PASS]
...
</code></pre>
<p>Individual tests can be run with <code>make</code>:</p>
<pre><code class="language-shell-session">$ make tests/${testName}.sh.test
ran test tests/${testName}.sh... [PASS]
</code></pre>
<p>or without <code>make</code>:</p>
<pre><code class="language-shell-session">$ ./mk/run-test.sh tests/${testName}.sh
ran test tests/${testName}.sh... [PASS]
</code></pre>
<p>To see the complete output, one can also run:</p>
<pre><code class="language-shell-session">$ ./mk/debug-test.sh tests/${testName}.sh
+ foo
output from foo
+ bar
output from bar
...
</code></pre>
<p>The test script will then be traced with <code>set -x</code> and the output displayed as it happens, regardless of whether the test succeeds or fails.</p>
<h4 id="debugging-failing-functional-tests"><a class="header" href="#debugging-failing-functional-tests">Debugging failing functional tests</a></h4>
<p>When a functional test fails, it usually does so somewhere in the middle of the script.</p>
<p>To figure out what's wrong, it is convenient to run the test regularly up to the failing <code>nix</code> command, and then run that command with a debugger like GDB.</p>
<p>For example, if the script looks like:</p>
<pre><code class="language-bash">foo
nix blah blub
bar
</code></pre>
<p>edit it like so:</p>
<pre><code class="language-diff"> foo
-nix blah blub
+gdb --args nix blah blub
 bar
</code></pre>
<p>Then, running the test with <code>./mk/debug-test.sh</code> will drop you into GDB once the script reaches that point:</p>
<pre><code class="language-shell-session">$ ./mk/debug-test.sh tests/${testName}.sh
...
+ gdb blash blub
GNU gdb (GDB) 12.1
...
(gdb)
</code></pre>
<p>One can debug the Nix invocation in all the usual ways.
For example, enter <code>run</code> to start the Nix invocation.</p>
<h3 id="integration-tests"><a class="header" href="#integration-tests">Integration tests</a></h3>
<p>The integration tests are defined in the Nix flake under the <code>hydraJobs.tests</code> attribute.
These tests include everything that needs to interact with external services or run Nix in a non-trivial distributed setup.
Because these tests are expensive and require more than what the standard github-actions setup provides, they only run on the master branch (on <a href="https://hydra.nixos.org/jobset/nix/master">https://hydra.nixos.org/jobset/nix/master</a>).</p>
<p>You can run them manually with <code>nix build .#hydraJobs.tests.{testName}</code> or <code>nix-build -A hydraJobs.tests.{testName}</code></p>
<h3 id="installer-tests"><a class="header" href="#installer-tests">Installer tests</a></h3>
<p>After a one-time setup, the Nix repository's GitHub Actions continuous integration (CI) workflow can test the installer each time you push to a branch.</p>
<p>Creating a Cachix cache for your installer tests and adding its authorization token to GitHub enables <a href="https://github.com/NixOS/nix/blob/88a45d6149c0e304f6eb2efcc2d7a4d0d569f8af/.github/workflows/ci.yml#L50-L91">two installer-specific jobs in the CI workflow</a>:</p>
<ul>
<li>
<p>The <code>installer</code> job generates installers for the platforms below and uploads them to your Cachix cache:</p>
<ul>
<li><code>x86_64-linux</code></li>
<li><code>armv6l-linux</code></li>
<li><code>armv7l-linux</code></li>
<li><code>x86_64-darwin</code></li>
</ul>
</li>
<li>
<p>The <code>installer_test</code> job (which runs on <code>ubuntu-latest</code> and <code>macos-latest</code>) will try to install Nix with the cached installer and run a trivial Nix command.</p>
</li>
</ul>
<h4 id="one-time-setup"><a class="header" href="#one-time-setup">One-time setup</a></h4>
<ol>
<li>Have a GitHub account with a fork of the <a href="https://github.com/NixOS/nix">Nix repository</a>.</li>
<li>At cachix.org:
<ul>
<li>Create or log in to an account.</li>
<li>Create a Cachix cache using the format <code>&lt;github-username&gt;-nix-install-tests</code>.</li>
<li>Navigate to the new cache &gt; Settings &gt; Auth Tokens.</li>
<li>Generate a new Cachix auth token and copy the generated value.</li>
</ul>
</li>
<li>At github.com:
<ul>
<li>Navigate to your Nix fork &gt; Settings &gt; Secrets &gt; Actions &gt; New repository secret.</li>
<li>Name the secret <code>CACHIX_AUTH_TOKEN</code>.</li>
<li>Paste the copied value of the Cachix cache auth token.</li>
</ul>
</li>
</ol>
<h4 id="using-the-ci-generated-installer-for-manual-testing"><a class="header" href="#using-the-ci-generated-installer-for-manual-testing">Using the CI-generated installer for manual testing</a></h4>
<p>After the CI run completes, you can check the output to extract the installer URL:</p>
<ol>
<li>
<p>Click into the detailed view of the CI run.</p>
</li>
<li>
<p>Click into any <code>installer_test</code> run (the URL you're here to extract will be the same in all of them).</p>
</li>
<li>
<p>Click into the <code>Run cachix/install-nix-action@v...</code> step and click the detail triangle next to the first log line (it will also be <code>Run cachix/install-nix-action@v...</code>)</p>
</li>
<li>
<p>Copy the value of <code>install_url</code></p>
</li>
<li>
<p>To generate an install command, plug this <code>install_url</code> and your GitHub username into this template:</p>
<pre><code class="language-console">sh &lt;(curl -L &lt;install_url&gt;) --tarball-url-prefix https://&lt;github-username&gt;-nix-install-tests.cachix.org/serve
</code></pre>
</li>
</ol>
<!-- #### Manually generating test installers

There's obviously a manual way to do this, and it's still the only way for
platforms that lack GA runners.

I did do this back in Fall 2020 (before the GA approach encouraged here). I'll
sketch what I recall in case it encourages someone to fill in detail, but: I
didn't know what I was doing at the time and had to fumble/ask around a lot--
so I don't want to uphold any of it as "right". It may have been dumb or
the _hard_ way from the getgo. Fundamentals may have changed since.

Here's the build command I used to do this on and for x86_64-darwin:
nix build --out-link /tmp/foo ".#checks.x86_64-darwin.binaryTarball"

I used the stable out-link to make it easier to script the next steps:
link=$(readlink /tmp/foo)
cp $link/*-darwin.tar.xz ~/somewheres

I've lost the last steps and am just going from memory:

From here, I think I had to extract and modify the `install` script to point
it at this tarball (which I scped to my own site, but it might make more sense
to just share them locally). I extracted this script once and then just
search/replaced in it for each new build.

The installer now supports a `--tarball-url-prefix` flag which _may_ have
solved this need?
-->
<h3 id="checking-links-in-the-manual"><a class="header" href="#checking-links-in-the-manual">Checking links in the manual</a></h3>
<p>The build checks for broken internal links.
This happens late in the process, so <code>nix build</code> is not suitable for iterating.
To build the manual incrementally, run:</p>
<pre><code class="language-console">make html -j $NIX_BUILD_CORES
</code></pre>
<p>In order to reflect changes to the <a href="https://github.com/NixOS/nix/blob/master/doc/manual/local.mk">Makefile</a>, clear all generated files before re-building:</p>
<pre><code class="language-console">rm $(git ls-files doc/manual/ -o | grep -F '.md') &amp;&amp; rmdir doc/manual/src/command-ref/new-cli &amp;&amp; make html -j $NIX_BUILD_CORES
</code></pre>
<p><a href="https://github.com/Michael-F-Bryan/mdbook-linkcheck"><code>mdbook-linkcheck</code></a> does not implement checking <a href="https://en.m.wikipedia.org/wiki/URI_fragment">URI fragments</a> yet.</p>
<h4 id="docroot-variable"><a class="header" href="#docroot-variable"><code>@docroot@</code> variable</a></h4>
<p><code>@docroot@</code> provides a base path for links that occur in reusable snippets or other documentation that doesn't have a base path of its own.</p>
<p>If a broken link occurs in a snippet that was inserted into multiple generated files in different directories, use <code>@docroot@</code> to reference the <code>doc/manual/src</code> directory.</p>
<p>If the <code>@docroot@</code> literal appears in an error message from the <code>mdbook-linkcheck</code> tool, the <code>@docroot@</code> replacement needs to be applied to the generated source file that mentions it.
See existing <code>@docroot@</code> logic in the <a href="https://github.com/NixOS/nix/blob/master/doc/manual/local.mk">Makefile</a>.
Regular markdown files used for the manual have a base path of their own and they can use relative paths instead of <code>@docroot@</code>.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="cli-guideline"><a class="header" href="#cli-guideline">CLI guideline</a></h1>
<h2 id="goals"><a class="header" href="#goals">Goals</a></h2>
<p>Purpose of this document is to provide a clear direction to <strong>help design
delightful command line</strong> experience. This document contains guidelines to
follow to ensure a consistent and approachable user experience.</p>
<h2 id="overview-2"><a class="header" href="#overview-2">Overview</a></h2>
<p><code>nix</code> command provides a single entry to a number of sub-commands that help
<strong>developers and system administrators</strong> in the life-cycle of a software
project. We particularly need to pay special attention to help and assist new
users of Nix.</p>
<h1 id="naming-the-commands"><a class="header" href="#naming-the-commands">Naming the <code>COMMANDS</code></a></h1>
<p>Words matter. Naming is an important part of the usability. Users will be
interacting with Nix on a regular basis so we should <strong>name things for ease of
understanding</strong>.</p>
<p>We recommend following the <a href="https://en.wikipedia.org/wiki/Principle_of_least_astonishment">Principle of Least
Astonishment</a>.
This means that you should <strong>never use acronyms or abbreviations</strong> unless they
are commonly used in other tools (e.g. <code>nix init</code>). And if the command name is
too long (&gt; 10-12 characters) then shortening it makes sense (e.g.
“prioritization” → “priority”).</p>
<p>Commands should <strong>follow a noun-verb dialogue</strong>. Although noun-verb formatting
seems backwards from a speaking perspective (i.e. <code>nix store copy</code> vs. <code>nix copy store</code>) it allows us to organize commands the same way users think about
completing an action (the group first, then the command).</p>
<h2 id="naming-rules"><a class="header" href="#naming-rules">Naming rules</a></h2>
<p>Rules are there to guide you by limiting your options. But not everything can
fit the rules all the time. In those cases document the exceptions in <a href="contributing/cli-guideline.html#appendix-1-commands-naming-exceptions">Appendix
1: Commands naming exceptions</a> and
provide reason. The rules want to force a Nix developer to look, not just at
the command at hand, but also the command in a full context alongside other
<code>nix</code> commands.</p>
<pre><code class="language-shell">$ nix [&lt;GROUP&gt;] &lt;COMMAND&gt; [&lt;ARGUMENTS&gt;] [&lt;OPTIONS&gt;]
</code></pre>
<ul>
<li><code>GROUP</code>, <code>COMMAND</code>, <code>ARGUMENTS</code> and <code>OPTIONS</code> should be lowercase and in a
singular form.</li>
<li><code>GROUP</code> should be a  <strong>NOUN</strong>.</li>
<li><code>COMMAND</code> should be a <strong>VERB</strong>.</li>
<li><code>ARGUMENTS</code> and <code>OPTIONS</code> are discussed in <a href="contributing/cli-guideline.html#input"><em>Input</em> section</a>.</li>
</ul>
<h2 id="classification"><a class="header" href="#classification">Classification</a></h2>
<p>Some commands are more important, some less. While we want all of our commands
to be perfect we can only spend limited amount of time testing and improving
them.</p>
<p>This classification tries to separate commands in 3 categories in terms of
their importance in regards to the new users. Users who are likely to be
impacted the most by bad user experience.</p>
<ul>
<li>
<p><strong>Main commands</strong></p>
<p>Commands used for our main use cases and most likely used by new users. We
expect attention to details, such as:</p>
<ul>
<li>Proper use of <a href="contributing/cli-guideline.html#colors">colors</a>, <a href="contributing/cli-guideline.html#special-unicode-characters">emojis</a>
and <a href="contributing/cli-guideline.html#text-alignment">aligning of text</a>.</li>
<li><a href="contributing/cli-guideline.html#shell-completion">Autocomplete</a> of options.</li>
<li>Show <a href="contributing/cli-guideline.html#next-steps">next possible steps</a>.</li>
<li>Showing some <a href="contributing/cli-guideline.html#educate-the-user">“tips”</a> when running logs running tasks
(eg. building / downloading) in order to teach users interesting bits of
Nix ecosystem.</li>
<li><a href="contributing/cli-guideline.html#help-is-essential">Help pages</a> to be as good as we can write them
pointing to external documentation and tutorials for more.</li>
</ul>
<p>Examples of such commands: <code>nix init</code>, <code>nix develop</code>, <code>nix build</code>, <code>nix run</code>,
...</p>
</li>
<li>
<p><strong>Infrequently used commands</strong></p>
<p>From infrequently used commands we expect less attention to details, but
still some:</p>
<ul>
<li>Proper use of <a href="contributing/cli-guideline.html#colors">colors</a>, <a href="contributing/cli-guideline.html#special-unicode-characters">emojis</a>
and <a href="contributing/cli-guideline.html#text-alignment">aligning of text</a>.</li>
<li><a href="contributing/cli-guideline.html#shell-completion">Autocomplete</a> of options.</li>
</ul>
<p>Examples of such commands: <code>nix doctor</code>, <code>nix edit</code>, <code>nix eval</code>, ...</p>
</li>
<li>
<p><strong>Utility and scripting commands</strong></p>
<p>Commands that expose certain internal functionality of <code>nix</code>, mostly used by
other scripts.</p>
<ul>
<li><a href="contributing/cli-guideline.html#shell-completion">Autocomplete</a> of options.</li>
</ul>
<p>Examples of such commands: <code>nix store copy</code>, <code>nix hash base16</code>, <code>nix store ping</code>, ...</p>
</li>
</ul>
<h1 id="help-is-essential"><a class="header" href="#help-is-essential">Help is essential</a></h1>
<p>Help should be built into your command line so that new users can gradually
discover new features when they need them.</p>
<h2 id="looking-for-help"><a class="header" href="#looking-for-help">Looking for help</a></h2>
<p>Since there is no standard way how user will look for help we rely on ways help
is provided by commonly used tools. As a guide for this we took <code>git</code> and
whenever in doubt look at it as a preferred direction.</p>
<p>The rules are:</p>
<ul>
<li>Help is shown by using <code>--help</code> or <code>help</code> command (eg <code>nix</code> <code>--``help</code> or
<code>nix help</code>).</li>
<li>For non-COMMANDs (eg. <code>nix</code> <code>--``help</code> and <code>nix store</code> <code>--``help</code>) we <strong>show
a summary</strong> of most common use cases. Summary is presented on the STDOUT
without any use of PAGER.</li>
<li>For COMMANDs (eg. <code>nix init</code> <code>--``help</code> or <code>nix help init</code>) we display the
man page of that command. By default the PAGER is used (as in <code>git</code>).</li>
<li>At the end of either summary or man page there should be an URL pointing to
an online version of more detailed documentation.</li>
<li>The structure of summaries and man pages should be the same as in <code>git</code>.</li>
</ul>
<h2 id="anticipate-where-help-is-needed"><a class="header" href="#anticipate-where-help-is-needed">Anticipate where help is needed</a></h2>
<p>Even better then requiring the user to search for help is to anticipate and
predict when user might need it. Either because the lack of discoverability,
typo in the input or simply taking the opportunity to teach the user of
interesting - but less visible - details.</p>
<h3 id="shell-completion"><a class="header" href="#shell-completion">Shell completion</a></h3>
<p>This type of help is most common and almost expected by users. We need to
<strong>provide the best shell completion</strong> for <code>bash</code>, <code>zsh</code> and <code>fish</code>.</p>
<p>Completion needs to be <strong>context aware</strong>, this mean when a user types:</p>
<pre><code class="language-shell">$ nix build n&lt;TAB&gt;
</code></pre>
<p>we need to display a list of flakes starting with <code>n</code>.</p>
<h3 id="wrong-input"><a class="header" href="#wrong-input">Wrong input</a></h3>
<p>As we all know we humans make mistakes, all the time. When a typo - intentional
or unintentional - is made, we should prompt for closest possible options or
point to the documentation which would educate user to not make the same
errors. Here are few examples:</p>
<p>In first example we prompt the user for typing wrong command name:</p>
<pre><code class="language-shell">$ nix int
------------------------------------------------------------------------
  Error! Command `int` not found.
------------------------------------------------------------------------
  Did you mean:
    |&gt; nix init
    |&gt; nix input
</code></pre>
<p>Sometimes users will make mistake either because of a typo or simply because of
lack of discoverability. Our handling of this cases needs to be context
sensitive.</p>
<pre><code class="language-shell">$ nix init --template=template#pyton
------------------------------------------------------------------------
  Error! Template `template#pyton` not found.
------------------------------------------------------------------------
Initializing Nix project at `/path/to/here`.
      Select a template for you new project:
          |&gt; template#python
             template#python-pip
             template#python-poetry
</code></pre>
<h3 id="next-steps"><a class="header" href="#next-steps">Next steps</a></h3>
<p>It can be invaluable to newcomers to show what a possible next steps and what
is the usual development workflow with Nix. For example:</p>
<pre><code class="language-shell">$ nix init --template=template#python
Initializing project `template#python`
          in `/home/USER/dev/new-project`

  Next steps
    |&gt; nix develop   -- to enter development environment
    |&gt; nix build     -- to build your project
</code></pre>
<h3 id="educate-the-user"><a class="header" href="#educate-the-user">Educate the user</a></h3>
<p>We should take any opportunity to <strong>educate users</strong>, but at the same time we
must <strong>be very very careful to not annoy users</strong>. There is a thin line between
being helpful and being annoying.</p>
<p>An example of educating users might be to provide <em>Tips</em> in places where they
are waiting.</p>
<pre><code class="language-shell">$ nix build
    Started building my-project 1.2.3
 Downloaded python3.8-poetry 1.2.3 in 5.3 seconds
 Downloaded python3.8-requests 1.2.3 in 5.3 seconds
------------------------------------------------------------------------
      Press `v` to increase logs verbosity
         |&gt; `?` to see other options
------------------------------------------------------------------------
      Learn something new with every build...
         |&gt; See last logs of a build with `nix log --last` command.
------------------------------------------------------------------------
  Evaluated my-project 1.2.3 in 14.43 seconds
Downloading [12 / 200]
         |&gt; firefox 1.2.3 [#########&gt;       ] 10Mb/s | 2min left
   Building [2 / 20]
         |&gt; glibc 1.2.3 -&gt; buildPhase: &lt;last log line&gt;
------------------------------------------------------------------------
</code></pre>
<p>Now <strong>Learn</strong> part of the output is where you educate users. You should only
show it when you know that a build will take some time and not annoy users of
the builds that take only few seconds.</p>
<p>Every feature like this should go through an intensive review and testing to
collect as much feedback as possible and to fine tune every little detail. If
done right this can be an awesome features beginners and advance users will
love, but if not done perfectly it will annoy users and leave bad impression.</p>
<h1 id="input"><a class="header" href="#input">Input</a></h1>
<p>Input to a command is provided via <code>ARGUMENTS</code> and <code>OPTIONS</code>.</p>
<p><code>ARGUMENTS</code> represent a required input for a function. When choosing to use
<code>ARGUMENTS</code> over <code>OPTIONS</code> please be aware of the downsides that come with it:</p>
<ul>
<li>User will need to remember the order of <code>ARGUMENTS</code>. This is not a problem if
there is only one <code>ARGUMENT</code>.</li>
<li>With <code>OPTIONS</code> it is possible to provide much better auto completion.</li>
<li>With <code>OPTIONS</code> it is possible to provide much better error message.</li>
<li>Using <code>OPTIONS</code> it will mean there is a little bit more typing.</li>
</ul>
<p>We don’t discourage the use of <code>ARGUMENTS</code>, but simply want to make every
developer consider the downsides and choose wisely.</p>
<h2 id="naming-the-options"><a class="header" href="#naming-the-options">Naming the <code>OPTIONS</code></a></h2>
<p>The only naming convention - apart from the ones mentioned in Naming the
<code>COMMANDS</code> section is how flags are named.</p>
<p>Flags are a type of <code>OPTION</code> that represent an option that can be turned ON of
OFF. We can say <strong>flags are boolean type of</strong> <code>**OPTION**</code>.</p>
<p>Here are few examples of flag <code>OPTIONS</code>:</p>
<ul>
<li><code>--colors</code> vs. <code>--no-colors</code> (showing colors in the output)</li>
<li><code>--emojis</code> vs. <code>--no-emojis</code> (showing emojis in the output)</li>
</ul>
<h2 id="prompt-when-input-not-provided"><a class="header" href="#prompt-when-input-not-provided">Prompt when input not provided</a></h2>
<p>For <em>main commands</em> (as <a href="contributing/cli-guideline.html#classification">per classification</a>) we want command
to improve the discoverability of possible input. A new user will most likely
not know which <code>ARGUMENTS</code> and <code>OPTIONS</code> are required or which values are
possible for those options.</p>
<p>In case the user does not provide the input or they provide wrong input,
rather than show the error, prompt a user with an option to find and select
correct input (see examples).</p>
<p>Prompting is of course not required when TTY is not attached to STDIN. This
would mean that scripts won't need to handle prompt, but rather handle errors.</p>
<p>A place to use prompt and provide user with interactive select</p>
<pre><code class="language-shell">$ nix init
Initializing Nix project at `/path/to/here`.
      Select a template for you new project:
          |&gt; py
             template#python-pip
             template#python-poetry
             [ Showing 2 templates from 1345 templates ]
</code></pre>
<p>Another great place to add prompts are <strong>confirmation dialogues for dangerous
actions</strong>. For example when adding new substitutor via <code>OPTIONS</code> or via
<code>flake.nix</code> we should prompt - for the first time - and let user review what is
going to happen.</p>
<pre><code class="language-shell">$ nix build --option substitutors https://cache.example.org
------------------------------------------------------------------------
  Warning! A security related question needs to be answered.
------------------------------------------------------------------------
  The following substitutors will be used to in `my-project`:
    - https://cache.example.org

  Do you allow `my-project` to use above mentioned substitutors?
    [y/N] |&gt; y
</code></pre>
<h1 id="output"><a class="header" href="#output">Output</a></h1>
<p>Terminal output can be quite limiting in many ways. Which should force us to
think about the experience even more. As with every design the output is a
compromise between being terse and being verbose, between showing help to
beginners and annoying advance users. For this it is important that we know
what are the priorities.</p>
<p>Nix command line should be first and foremost written with beginners in mind.
But users won't stay beginners for long and what was once useful might quickly
become annoying. There is no golden rule that we can give in this guideline
that would make it easier how to draw a line and find best compromise.</p>
<p>What we would encourage is to <strong>build prototypes</strong>, do some <strong>user testing</strong>
and collect <strong>feedback</strong>. Then repeat the cycle few times.</p>
<p>First design the <em>happy path</em> and only after your iron it out, continue to work
on <strong>edge cases</strong> (handling and displaying errors, changes of the output by
certain <code>OPTIONS</code>, etc…)</p>
<h2 id="follow-best-practices"><a class="header" href="#follow-best-practices">Follow best practices</a></h2>
<p>Needless to say we Nix must be a good citizen and follow best practices in
command line.</p>
<p>In short: <strong>STDOUT is for output, STDERR is for (human) messaging.</strong></p>
<p>STDOUT and STDERR provide a way for you to output messages to the user while
also allowing them to redirect content to a file. For example:</p>
<pre><code class="language-shell">$ nix build &gt; build.txt
------------------------------------------------------------------------
  Error! Attribute `bin` missing at (1:94) from string.
------------------------------------------------------------------------

  1| with import &lt;nixpkgs&gt; { }; (pkgs.runCommandCC or pkgs.runCommand) &quot;shell&quot; { buildInputs = [ (surge.bin) ]; } &quot;&quot;
</code></pre>
<p>Because this warning is on STDERR, it doesn’t end up in the file.</p>
<p>But not everything on STDERR is an error though. For example, you can run <code>nix build</code> and collect logs in a file while still seeing the progress.</p>
<pre><code>$ nix build &gt; build.txt
  Evaluated 1234 files in 1.2 seconds
 Downloaded python3.8-poetry 1.2.3 in 5.3 seconds
 Downloaded python3.8-requests 1.2.3 in 5.3 seconds
------------------------------------------------------------------------
      Press `v` to increase logs verbosity
         |&gt; `?` to see other options
------------------------------------------------------------------------
      Learn something new with every build...
         |&gt; See last logs of a build with `nix log --last` command.
------------------------------------------------------------------------
  Evaluated my-project 1.2.3 in 14.43 seconds
Downloading [12 / 200]
         |&gt; firefox 1.2.3 [#########&gt;       ] 10Mb/s | 2min left
   Building [2 / 20]
         |&gt; glibc 1.2.3 -&gt; buildPhase: &lt;last log line&gt;
------------------------------------------------------------------------
</code></pre>
<h2 id="errors-wip"><a class="header" href="#errors-wip">Errors (WIP)</a></h2>
<p><strong>TODO</strong>: Once we have implementation for the <em>happy path</em> then we will think
how to present errors.</p>
<h2 id="not-only-for-humans"><a class="header" href="#not-only-for-humans">Not only for humans</a></h2>
<p>Terse, machine-readable output formats can also be useful but shouldn’t get in
the way of making beautiful CLI output. When needed, commands should offer a
<code>--json</code> flag to allow users to easily parse and script the CLI.</p>
<p>When TTY is not detected on STDOUT we should remove all design elements (no
colors, no emojis and using ASCII instead of Unicode symbols). The same should
happen when TTY is not detected on STDERR. We should not display progress /
status section, but only print warnings and errors.</p>
<h2 id="dialog-with-the-user"><a class="header" href="#dialog-with-the-user">Dialog with the user</a></h2>
<p>CLIs don't always make it clear when an action has taken place. For every
action a user performs, your CLI should provide an equal and appropriate
reaction, clearly highlighting the what just happened. For example:</p>
<pre><code class="language-shell">$ nix build
 Downloaded python3.8-poetry 1.2.3 in 5.3 seconds
 Downloaded python3.8-requests 1.2.3 in 5.3 seconds
...
   Success! You have successfully built my-project.
$
</code></pre>
<p>Above command clearly states that command successfully completed. And in case
of <code>nix build</code>, which is a command that might take some time to complete, it is
equally important to also show that a command started.</p>
<h2 id="text-alignment"><a class="header" href="#text-alignment">Text alignment</a></h2>
<p>Text alignment is the number one design element that will present all of the
Nix commands as a family and not as separate tools glued together.</p>
<p>The format we should follow is:</p>
<pre><code class="language-shell">$ nix COMMAND
   VERB_1 NOUN and other words
  VERB__1 NOUN and other words
       |&gt; Some details
</code></pre>
<p>Few rules that we can extract from above example:</p>
<ul>
<li>Each line should start at least with one space.</li>
<li>First word should be a VERB and must be aligned to the right.</li>
<li>Second word should be a NOUN and must be aligned to the left.</li>
<li>If you can not find a good VERB / NOUN pair, don’t worry make it as
understandable to the user as possible.</li>
<li>More details of each line can be provided by <code>|&gt;</code> character which is serving
as the first word when aligning the text</li>
</ul>
<p>Don’t forget you should also test your terminal output with colors and emojis
off (<code>--no-colors --no-emojis</code>).</p>
<h2 id="dim--bright"><a class="header" href="#dim--bright">Dim / Bright</a></h2>
<p>After comparing few terminals with different color schemes we would <strong>recommend
to avoid using dimmed text</strong>. The difference from the rest of the text is very
little in many terminal and color scheme combinations. Sometimes the difference
is not even notable, therefore relying on it wouldn’t make much sense.</p>
<p><strong>The bright text is much better supported</strong> across terminals and color
schemes. Most of the time the difference is perceived as if the bright text
would be bold.</p>
<h2 id="colors"><a class="header" href="#colors">Colors</a></h2>
<p>Humans are already conditioned by society to attach certain meaning to certain
colors. While the meaning is not universal, a simple collection of colors is
used to represent basic emotions.</p>
<p>Colors that can be used in output</p>
<ul>
<li>Red = error, danger, stop</li>
<li>Green = success, good</li>
<li>Yellow/Orange = proceed with caution, warning, in progress</li>
<li>Blue/Magenta = stability, calm</li>
</ul>
<p>While colors are nice, when command line is used by machines (in automation
scripts) you want to remove the colors. There should be a global <code>--no-colors</code>
option that would remove the colors.</p>
<h2 id="special-unicode-characters"><a class="header" href="#special-unicode-characters">Special (Unicode) characters</a></h2>
<p>Most of the terminal have good support for Unicode characters and you should
use them in your output by default. But always have a backup solution that is
implemented only with ASCII characters and will be used when <code>--ascii</code> option
is going to be passed in. Please make sure that you test your output also
without Unicode characters</p>
<p>More they showing all the different Unicode characters it is important to
<strong>establish common set of characters</strong> that we use for certain situations.</p>
<h2 id="emojis"><a class="header" href="#emojis">Emojis</a></h2>
<p>Emojis help channel emotions even better than text, colors and special
characters.</p>
<p>We recommend <strong>keeping the set of emojis to a minimum</strong>. This will enable each
emoji to stand out more.</p>
<p>As not everybody is happy about emojis we should provide an <code>--no-emojis</code>
option to disable them. Please make sure that you test your output also without
emojis.</p>
<h2 id="tables"><a class="header" href="#tables">Tables</a></h2>
<p>All commands that are listing certain data can be implemented in some sort of a
table. It’s important that each row of your output is a single ‘entry’ of data.
Never output table borders. It’s noisy and a huge pain for parsing using other
tools such as <code>grep</code>.</p>
<p>Be mindful of the screen width. Only show a few columns by default with the
table header, for more the table can be manipulated by the following options:</p>
<ul>
<li><code>--no-headers</code>: Show column headers by default but allow to hide them.</li>
<li><code>--columns</code>: Comma-separated list of column names to add.</li>
<li><code>--sort</code>: Allow sorting by column. Allow inverse and multi-column sort as well.</li>
</ul>
<h2 id="interactive-output"><a class="header" href="#interactive-output">Interactive output</a></h2>
<p>Interactive output was selected to be able to strike the balance between
beginners and advance users. While the default output will target beginners it
can, with a few key strokes, be changed into and advance introspection tool.</p>
<h3 id="progress"><a class="header" href="#progress">Progress</a></h3>
<p>For longer running commands we should provide and overview the progress.
This is shown best in <code>nix build</code> example:</p>
<pre><code class="language-shell">$ nix build
    Started building my-project 1.2.3
 Downloaded python3.8-poetry 1.2.3 in 5.3 seconds
 Downloaded python3.8-requests 1.2.3 in 5.3 seconds
------------------------------------------------------------------------
      Press `v` to increase logs verbosity
         |&gt; `?` to see other options
------------------------------------------------------------------------
      Learn something new with every build...
         |&gt; See last logs of a build with `nix log --last` command.
------------------------------------------------------------------------
  Evaluated my-project 1.2.3 in 14.43 seconds
Downloading [12 / 200]
         |&gt; firefox 1.2.3 [#########&gt;       ] 10Mb/s | 2min left
   Building [2 / 20]
         |&gt; glibc 1.2.3 -&gt; buildPhase: &lt;last log line&gt;
------------------------------------------------------------------------
</code></pre>
<h3 id="search"><a class="header" href="#search">Search</a></h3>
<p>Use a <code>fzf</code> like fuzzy search when there are multiple options to choose from.</p>
<pre><code class="language-shell">$ nix init
Initializing Nix project at `/path/to/here`.
      Select a template for you new project:
          |&gt; py
             template#python-pip
             template#python-poetry
             [ Showing 2 templates from 1345 templates ]
</code></pre>
<h3 id="prompt"><a class="header" href="#prompt">Prompt</a></h3>
<p>In some situations we need to prompt the user and inform the user about what is
going to happen.</p>
<pre><code class="language-shell">$ nix build --option substitutors https://cache.example.org
------------------------------------------------------------------------
  Warning! A security related question needs to be answered.
------------------------------------------------------------------------
  The following substitutors will be used to in `my-project`:
    - https://cache.example.org

  Do you allow `my-project` to use above mentioned substitutors?
    [y/N] |&gt; y
</code></pre>
<h2 id="verbosity"><a class="header" href="#verbosity">Verbosity</a></h2>
<p>There are many ways that you can control verbosity.</p>
<p>Verbosity levels are:</p>
<ul>
<li><code>ERROR</code> (level 0)</li>
<li><code>WARN</code> (level 1)</li>
<li><code>NOTICE</code> (level 2)</li>
<li><code>INFO</code> (level 3)</li>
<li><code>TALKATIVE</code> (level 4)</li>
<li><code>CHATTY</code> (level 5)</li>
<li><code>DEBUG</code> (level 6)</li>
<li><code>VOMIT</code> (level 7)</li>
</ul>
<p>The default level that the command starts is <code>ERROR</code>. The simplest way to
increase the verbosity by stacking <code>-v</code> option (eg: <code>-vvv == level 3 == INFO</code>).
There are also two shortcuts, <code>--debug</code> to run in <code>DEBUG</code> verbosity level and
<code>--quiet</code> to run in <code>ERROR</code> verbosity level.</p>
<hr />
<h1 id="appendix-1-commands-naming-exceptions"><a class="header" href="#appendix-1-commands-naming-exceptions">Appendix 1: Commands naming exceptions</a></h1>
<p><code>nix init</code> and <code>nix repl</code> are well established</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="nix-release-notes"><a class="header" href="#nix-release-notes">Nix Release Notes</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="release-213-2023-01-17"><a class="header" href="#release-213-2023-01-17">Release 2.13 (2023-01-17)</a></h1>
<ul>
<li>
<p>The <code>repeat</code> and <code>enforce-determinism</code> options have been removed
since they had been broken under many circumstances for a long time.</p>
</li>
<li>
<p>You can now use <a href="release-notes/../command-ref/new-cli/nix3-flake.html#flake-references">flake references</a> in the <a href="release-notes/../command-ref/main-commands.html">old command line interface</a>, e.g.</p>
<pre><code class="language-shell-session"># nix-build flake:nixpkgs -A hello
# nix-build -I nixpkgs=flake:github:NixOS/nixpkgs/nixos-22.05 \
    '&lt;nixpkgs&gt;' -A hello
# NIX_PATH=nixpkgs=flake:nixpkgs nix-build '&lt;nixpkgs&gt;' -A hello
</code></pre>
</li>
<li>
<p>Instead of &quot;antiquotation&quot;, the more common term <a href="release-notes/../language/string-interpolation.html">string interpolation</a> is now used consistently.
Historical release notes were not changed.</p>
</li>
<li>
<p>Allow explicitly selecting outputs in a store derivation installable, just like we can do with other sorts of installables.
For example,</p>
<pre><code class="language-shell-session"># nix build /nix/store/gzaflydcr6sb3567hap9q6srzx8ggdgg-glibc-2.33-78.drv^dev
</code></pre>
<p>now works just as</p>
<pre><code class="language-shell-session"># nix build nixpkgs#glibc^dev
</code></pre>
<p>does already.</p>
</li>
<li>
<p>On Linux, <code>nix develop</code> now sets the
<a href="https://man7.org/linux/man-pages/man2/personality.2.html"><em>personality</em></a>
for the development shell in the same way as the actual build of the
derivation. This makes shells for <code>i686-linux</code> derivations work
correctly on <code>x86_64-linux</code>.</p>
</li>
<li>
<p>You can now disable the global flake registry by setting the <code>flake-registry</code>
configuration option to an empty string. The same can be achieved at runtime with
<code>--flake-registry &quot;&quot;</code>.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="release-212-2022-12-06"><a class="header" href="#release-212-2022-12-06">Release 2.12 (2022-12-06)</a></h1>
<ul>
<li>
<p>On Linux, Nix can now run builds in a user namespace where they run
as root (UID 0) and have 65,536 UIDs available.</p>
<!-- FIXME: move this to its own section about system features -->
<p>This is primarily useful for running containers such as <code>systemd-nspawn</code>
inside a Nix build. For an example, see <a href="https://github.com/NixOS/nix/blob/67bcb99700a0da1395fa063d7c6586740b304598/tests/systemd-nspawn.nix."><code>tests/systemd-nspawn/nix</code></a>.</p>
<p>A build can enable this by setting the derivation attribute:</p>
<pre><code>requiredSystemFeatures = [ &quot;uid-range&quot; ];
</code></pre>
<p>The <code>uid-range</code> <a href="release-notes/../command-ref/conf-file.html#conf-system-features">system feature</a> requires the <a href="release-notes/../command-ref/conf-file.html#conf-auto-allocate-uids"><code>auto-allocate-uids</code></a>
setting to be enabled.</p>
</li>
<li>
<p>Nix can now automatically pick UIDs for builds, removing the need to
create <code>nixbld*</code> user accounts. See <a href="release-notes/../command-ref/conf-file.html#conf-auto-allocate-uids"><code>auto-allocate-uids</code></a>.</p>
</li>
<li>
<p>On Linux, Nix has experimental support for running builds inside a
cgroup. See
<a href="release-notes/../command-ref/conf-file.html#conf-use-cgroups"><code>use-cgroups</code></a>.</p>
</li>
<li>
<p><code>&lt;nix/fetchurl.nix&gt;</code> now accepts an additional argument <code>impure</code> which
defaults to <code>false</code>.  If it is set to <code>true</code>, the <code>hash</code> and <code>sha256</code>
arguments will be ignored and the resulting derivation will have
<code>__impure</code> set to <code>true</code>, making it an impure derivation.</p>
</li>
<li>
<p>If <code>builtins.readFile</code> is called on a file with context, then only
the parts of the context that appear in the content of the file are
retained.  This avoids a lot of spurious errors where strings end up
having a context just because they are read from a store path
(<a href="https://github.com/NixOS/nix/pull/7260">#7260</a>).</p>
</li>
<li>
<p><code>nix build --json</code> now prints some statistics about top-level
derivations, such as CPU statistics when cgroups are enabled.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="release-211-2022-08-24"><a class="header" href="#release-211-2022-08-24">Release 2.11 (2022-08-24)</a></h1>
<ul>
<li><code>nix copy</code> now copies the store paths in parallel as much as possible (again).
This doesn't apply for the <code>daemon</code> and <code>ssh-ng</code> stores which copy everything
in one batch to avoid latencies issues.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="release-210-2022-07-11"><a class="header" href="#release-210-2022-07-11">Release 2.10 (2022-07-11)</a></h1>
<ul>
<li>
<p><code>nix repl</code> now takes installables on the command line, unifying the usage
with other commands that use <code>--file</code> and <code>--expr</code>. Primary breaking change
is for the common usage of <code>nix repl '&lt;nixpkgs&gt;'</code> which can be recovered with
<code>nix repl --file '&lt;nixpkgs&gt;'</code> or <code>nix repl --expr 'import &lt;nixpkgs&gt;{}'</code>.</p>
<p>This is currently guarded by the <code>repl-flake</code> experimental feature.</p>
</li>
<li>
<p>A new function <code>builtins.traceVerbose</code> is available. It is similar
to <code>builtins.trace</code> if the <code>trace-verbose</code> setting is set to true,
and it is a no-op otherwise.</p>
</li>
<li>
<p><code>nix search</code> has a new flag <code>--exclude</code> to filter out packages.</p>
</li>
<li>
<p>On Linux, if <code>/nix</code> doesn't exist and cannot be created and you're
not running as root, Nix will automatically use
<code>~/.local/share/nix/root</code> as a chroot store. This enables non-root
users to download the statically linked Nix binary and have it work
out of the box, e.g.</p>
<pre><code># ~/nix run nixpkgs#hello
warning: '/nix' does not exists, so Nix will use '/home/ubuntu/.local/share/nix/root' as a chroot store
Hello, world!
</code></pre>
</li>
<li>
<p><code>flake-registry.json</code> is now fetched from <code>channels.nixos.org</code>.</p>
</li>
<li>
<p>Nix can now be built with LTO by passing <code>--enable-lto</code> to <code>configure</code>.
LTO is currently only supported when building with GCC.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="release-29-2022-05-30"><a class="header" href="#release-29-2022-05-30">Release 2.9 (2022-05-30)</a></h1>
<ul>
<li>
<p>Running Nix with the new <code>--debugger</code> flag will cause it to start a
repl session if an exception is thrown during evaluation, or if
<code>builtins.break</code> is called.  From there you can inspect the values
of variables and evaluate Nix expressions.  In debug mode, the
following new repl commands are available:</p>
<pre><code>:env          Show env stack
:bt           Show trace stack
:st           Show current trace
:st &lt;idx&gt;     Change to another trace in the stack
:c            Go until end of program, exception, or builtins.break().
:s            Go one step
</code></pre>
<p>Read more about the debugger
<a href="https://www.zknotes.com/note/5970">here</a>.</p>
</li>
<li>
<p>Nix now provides better integration with zsh's <code>run-help</code>
feature. It is now included in the Nix installation in the form of
an autoloadable shell function, <code>run-help-nix</code>. It picks up Nix
subcommands from the currently typed in command and directs the user
to the associated man pages.</p>
</li>
<li>
<p><code>nix repl</code> has a new build-and-link (<code>:bl</code>) command that builds a
derivation while creating GC root symlinks.</p>
</li>
<li>
<p>The path produced by <code>builtins.toFile</code> is now allowed to be imported
or read even with restricted evaluation. Note that this will not
work with a read-only store.</p>
</li>
<li>
<p><code>nix build</code> has a new <code>--print-out-paths</code> flag to print the
resulting output paths.  This matches the default behaviour of
<code>nix-build</code>.</p>
</li>
<li>
<p>You can now specify which outputs of a derivation <code>nix</code> should
operate on using the syntax <code>installable^outputs</code>,
e.g. <code>nixpkgs#glibc^dev,static</code> or <code>nixpkgs#glibc^*</code>. By default,
<code>nix</code> will use the outputs specified by the derivation's
<code>meta.outputsToInstall</code> attribute if it exists, or all outputs
otherwise.</p>
</li>
<li>
<p><code>builtins.fetchTree</code> (and flake inputs) can now be used to fetch
plain files over the <code>http(s)</code> and <code>file</code> protocols in addition to
directory tarballs.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="release-28-2022-04-19"><a class="header" href="#release-28-2022-04-19">Release 2.8 (2022-04-19)</a></h1>
<ul>
<li>
<p>New experimental command: <code>nix fmt</code>, which applies a formatter
defined by the <code>formatter.&lt;system&gt;</code> flake output to the Nix
expressions in a flake.</p>
</li>
<li>
<p>Various Nix commands can now read expressions from standard input
using <code>--file -</code>.</p>
</li>
<li>
<p>New experimental builtin function <code>builtins.fetchClosure</code> that
copies a closure from a binary cache at evaluation time and rewrites
it to content-addressed form (if it isn't already). Like
<code>builtins.storePath</code>, this allows importing pre-built store paths;
the difference is that it doesn't require the user to configure
binary caches and trusted public keys.</p>
<p>This function is only available if you enable the experimental
feature <code>fetch-closure</code>.</p>
</li>
<li>
<p>New experimental feature: <em>impure derivations</em>. These are
derivations that can produce a different result every time they're
built. Here is an example:</p>
<pre><code class="language-nix">stdenv.mkDerivation {
  name = &quot;impure&quot;;
  __impure = true; # marks this derivation as impure
  buildCommand = &quot;date &gt; $out&quot;;
}
</code></pre>
<p>Running <code>nix build</code> twice on this expression will build the
derivation twice, producing two different content-addressed store
paths. Like fixed-output derivations, impure derivations have access
to the network. Only fixed-output derivations and impure derivations
can depend on an impure derivation.</p>
</li>
<li>
<p><code>nix store make-content-addressable</code> has been renamed to <code>nix store make-content-addressed</code>.</p>
</li>
<li>
<p>The <code>nixosModule</code> flake output attribute has been renamed consistent
with the <code>.default</code> renames in Nix 2.7.</p>
<ul>
<li><code>nixosModule</code> → <code>nixosModules.default</code></li>
</ul>
<p>As before, the old output will continue to work, but <code>nix flake check</code> will
issue a warning about it.</p>
</li>
<li>
<p><code>nix run</code> is now stricter in what it accepts: members of the <code>apps</code>
flake output are now required to be apps (as defined in <a href="https://nixos.org/manual/nix/stable/command-ref/new-cli/nix3-run.html#apps">the
manual</a>),
and members of <code>packages</code> or <code>legacyPackages</code> must be derivations
(not apps).</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="release-27-2022-03-07"><a class="header" href="#release-27-2022-03-07">Release 2.7 (2022-03-07)</a></h1>
<ul>
<li>
<p>Nix will now make some helpful suggestions when you mistype
something on the command line. For instance, if you type <code>nix build nixpkgs#thunderbrd</code>, it will suggest <code>thunderbird</code>.</p>
</li>
<li>
<p>A number of &quot;default&quot; flake output attributes have been
renamed. These are:</p>
<ul>
<li><code>defaultPackage.&lt;system&gt;</code> → <code>packages.&lt;system&gt;.default</code></li>
<li><code>defaultApps.&lt;system&gt;</code> → <code>apps.&lt;system&gt;.default</code></li>
<li><code>defaultTemplate</code> → <code>templates.default</code></li>
<li><code>defaultBundler.&lt;system&gt;</code> → <code>bundlers.&lt;system&gt;.default</code></li>
<li><code>overlay</code> → <code>overlays.default</code></li>
<li><code>devShell.&lt;system&gt;</code> → <code>devShells.&lt;system&gt;.default</code></li>
</ul>
<p>The old flake output attributes still work, but <code>nix flake check</code>
will warn about them.</p>
</li>
<li>
<p>Breaking API change: <code>nix bundle</code> now supports bundlers of the form
<code>bundler.&lt;system&gt;.&lt;name&gt;= derivation: another-derivation;</code>. This
supports additional functionality to inspect evaluation information
during bundling. A new
<a href="https://github.com/NixOS/bundlers">repository</a> has various bundlers
implemented.</p>
</li>
<li>
<p><code>nix store ping</code> now reports the version of the remote Nix daemon.</p>
</li>
<li>
<p><code>nix flake {init,new}</code> now display information about which files have been
created.</p>
</li>
<li>
<p>Templates can now define a <code>welcomeText</code> attribute, which is printed out by
<code>nix flake {init,new} --template &lt;template&gt;</code>.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="release-26-2022-01-24"><a class="header" href="#release-26-2022-01-24">Release 2.6 (2022-01-24)</a></h1>
<ul>
<li>The Nix CLI now searches for a <code>flake.nix</code> up until the root of the current
Git repository or a filesystem boundary rather than just in the current
directory.</li>
<li>The TOML parser used by <code>builtins.fromTOML</code> has been replaced by <a href="https://github.com/ToruNiina/toml11">a
more compliant one</a>.</li>
<li>Added <code>:st</code>/<code>:show-trace</code> commands to <code>nix repl</code>, which are used to
set or toggle display of error traces.</li>
<li>New builtin function <code>builtins.zipAttrsWith</code> with the same
functionality as <code>lib.zipAttrsWith</code> from Nixpkgs, but much more
efficient.</li>
<li>New command <code>nix store copy-log</code> to copy build logs from one store
to another.</li>
<li>The <code>commit-lockfile-summary</code> option can be set to a non-empty
string to override the commit summary used when commiting an updated
lockfile.  This may be used in conjunction with the <code>nixConfig</code>
attribute in <code>flake.nix</code> to better conform to repository
conventions.</li>
<li><code>docker run -ti nixos/nix:master</code> will place you in the Docker
container with the latest version of Nix from the <code>master</code> branch.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="release-25-2021-12-13"><a class="header" href="#release-25-2021-12-13">Release 2.5 (2021-12-13)</a></h1>
<ul>
<li>
<p>The garbage collector no longer blocks new builds, so the message
<code>waiting for the big garbage collector lock...</code> is a thing of the
past.</p>
</li>
<li>
<p>Binary cache stores now have a setting <code>compression-level</code>.</p>
</li>
<li>
<p><code>nix develop</code> now has a flag <code>--unpack</code> to run <code>unpackPhase</code>.</p>
</li>
<li>
<p>Lists can now be compared lexicographically using the <code>&lt;</code> operator.</p>
</li>
<li>
<p>New built-in function: <code>builtins.groupBy</code>, with the same functionality as
Nixpkgs' <code>lib.groupBy</code>, but faster.</p>
</li>
<li>
<p><code>nix repl</code> now has a <code>:log</code> command.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="release-24-2021-11-01"><a class="header" href="#release-24-2021-11-01">Release 2.4 (2021-11-01)</a></h1>
<p>This is the first release in more than two years and is the result of
more than 2800 commits from 195 contributors since release 2.3.</p>
<h2 id="highlights"><a class="header" href="#highlights">Highlights</a></h2>
<ul>
<li>
<p>Nix's <strong>error messages</strong> have been improved a lot. For instance,
evaluation errors now point out the location of the error:</p>
<pre><code>$ nix build
error: undefined variable 'bzip3'

       at /nix/store/449lv242z0zsgwv95a8124xi11sp419f-source/flake.nix:88:13:

           87|           [ curl
           88|             bzip3 xz brotli editline
             |             ^
           89|             openssl sqlite
</code></pre>
</li>
<li>
<p>The <strong><code>nix</code> command</strong> has seen a lot of work and is now almost at
feature parity with the old command-line interface (the <code>nix-*</code>
commands). It aims to be <a href="release-notes/../contributing/cli-guideline.html">more modern, consistent and pleasant to
use</a> than the old CLI. It is still
marked as experimental but its interface should not change much
anymore in future releases.</p>
</li>
<li>
<p><strong>Flakes</strong> are a new format to package Nix-based projects in a more
discoverable, composable, consistent and reproducible way. A flake
is just a repository or tarball containing a file named <code>flake.nix</code>
that specifies dependencies on other flakes and returns any Nix
assets such as packages, Nixpkgs overlays, NixOS modules or CI
tests. The new <code>nix</code> CLI is primarily based around flakes; for
example, a command like <code>nix run nixpkgs#hello</code> runs the <code>hello</code>
application from the <code>nixpkgs</code> flake.</p>
<p>Flakes are currently marked as experimental. For an introduction,
see <a href="https://www.tweag.io/blog/2020-05-25-flakes/">this blog
post</a>. For detailed
information about flake syntax and semantics, see the <a href="release-notes/../command-ref/new-cli/nix3-flake.html"><code>nix flake</code>
manual page</a>.</p>
</li>
<li>
<p>Nix's store can now be <strong>content-addressed</strong>, meaning that the hash
component of a store path is the hash of the path's
contents. Previously Nix could only build <strong>input-addressed</strong> store
paths, where the hash is computed from the derivation dependency
graph. Content-addressing allows deduplication, early cutoff in
build systems, and unprivileged closure copying. This is still <a href="https://discourse.nixos.org/t/content-addressed-nix-call-for-testers/12881">an
experimental
feature</a>.</p>
</li>
<li>
<p>The Nix manual has been converted into Markdown, making it easier to
contribute. In addition, every <code>nix</code> subcommand now has a manual
page, documenting every option.</p>
</li>
<li>
<p>A new setting that allows <strong>experimental features</strong> to be enabled
selectively. This allows us to merge unstable features into Nix more
quickly and do more frequent releases.</p>
</li>
</ul>
<h2 id="other-features"><a class="header" href="#other-features">Other features</a></h2>
<ul>
<li>
<p>There are many new <code>nix</code> subcommands:</p>
<ul>
<li>
<p><code>nix develop</code> is intended to replace <code>nix-shell</code>. It has a number
of new features:</p>
<ul>
<li>
<p>It automatically sets the output environment variables (such as
<code>$out</code>) to writable locations (such as <code>./outputs/out</code>).</p>
</li>
<li>
<p>It can store the environment in a profile. This is useful for
offline work.</p>
</li>
<li>
<p>It can run specific phases directly. For instance, <code>nix develop --build</code> runs <code>buildPhase</code>.</p>
</li>
</ul>
<ul>
<li>It allows dependencies in the Nix store to be &quot;redirected&quot; to
arbitrary directories using the <code>--redirect</code> flag. This is
useful if you want to hack on a package <em>and</em> some of its
dependencies at the same time.</li>
</ul>
</li>
<li>
<p><code>nix print-dev-env</code> prints the environment variables and bash
functions defined by a derivation. This is useful for users of
other shells than bash (especially with <code>--json</code>).</p>
</li>
<li>
<p><code>nix shell</code> was previously named <code>nix run</code> and is intended to
replace <code>nix-shell -p</code>, but without the <code>stdenv</code> overhead. It
simply starts a shell where some packages have been added to
<code>$PATH</code>.</p>
</li>
<li>
<p><code>nix run</code> (not to be confused with the old subcommand that has
been renamed to <code>nix shell</code>) runs an &quot;app&quot;, a flake output that
specifies a command to run, or an eponymous program from a
package. For example, <code>nix run nixpkgs#hello</code> runs the <code>hello</code>
program from the <code>hello</code> package in <code>nixpkgs</code>.</p>
</li>
<li>
<p><code>nix flake</code> is the container for flake-related operations, such as
creating a new flake, querying the contents of a flake or updating
flake lock files.</p>
</li>
<li>
<p><code>nix registry</code> allows you to query and update the flake registry,
which maps identifiers such as <code>nixpkgs</code> to concrete flake URLs.</p>
</li>
<li>
<p><code>nix profile</code> is intended to replace <code>nix-env</code>. Its main advantage
is that it keeps track of the provenance of installed packages
(e.g. exactly which flake version a package came from). It also
has some helpful subcommands:</p>
<ul>
<li>
<p><code>nix profile history</code> shows what packages were added, upgraded
or removed between each version of a profile.</p>
</li>
<li>
<p><code>nix profile diff-closures</code> shows the changes between the
closures of each version of a profile. This allows you to
discover the addition or removal of dependencies or size
changes.</p>
</li>
</ul>
<p><strong>Warning</strong>: after a profile has been updated using <code>nix profile</code>,
it is no longer usable with <code>nix-env</code>.</p>
</li>
<li>
<p><code>nix store diff-closures</code> shows the differences between the
closures of two store paths in terms of the versions and sizes of
dependencies in the closures.</p>
</li>
<li>
<p><code>nix store make-content-addressable</code> rewrites an arbitrary closure
to make it content-addressed. Such paths can be copied into other
stores without requiring signatures.</p>
</li>
<li>
<p><code>nix bundle</code> uses the <a href="https://github.com/matthewbauer/nix-bundle"><code>nix-bundle</code>
program</a> to convert a
closure into a self-extracting executable.</p>
</li>
<li>
<p>Various other replacements for the old CLI, e.g. <code>nix store gc</code>,
<code>nix store delete</code>, <code>nix store repair</code>, <code>nix nar dump-path</code>, <code>nix store prefetch-file</code>, <code>nix store prefetch-tarball</code>, <code>nix key</code> and
<code>nix daemon</code>.</p>
</li>
</ul>
</li>
<li>
<p>Nix now has an <strong>evaluation cache</strong> for flake outputs. For example,
a second invocation of the command <code>nix run nixpkgs#firefox</code> will
not need to evaluate the <code>firefox</code> attribute because it's already in
the evaluation cache. This is made possible by the hermetic
evaluation model of flakes.</p>
</li>
<li>
<p>The new <code>--offline</code> flag disables substituters and causes all
locally cached tarballs and repositories to be considered
up-to-date.</p>
</li>
<li>
<p>The new <code>--refresh</code> flag causes all locally cached tarballs and
repositories to be considered out-of-date.</p>
</li>
<li>
<p>Many <code>nix</code> subcommands now have a <code>--json</code> option to produce
machine-readable output.</p>
</li>
<li>
<p><code>nix repl</code> has a new <code>:doc</code> command to show documentation about
builtin functions (e.g. <code>:doc builtins.map</code>).</p>
</li>
<li>
<p>Binary cache stores now have an option <code>index-debug-info</code> to create
an index of DWARF debuginfo files for use by
<a href="https://github.com/edolstra/dwarffs"><code>dwarffs</code></a>.</p>
</li>
<li>
<p>To support flakes, Nix now has an extensible mechanism for fetching
source trees. Currently it has the following backends:</p>
<ul>
<li>
<p>Git repositories</p>
</li>
<li>
<p>Mercurial repositories</p>
</li>
<li>
<p>GitHub and GitLab repositories (an optimisation for faster
fetching than Git)</p>
</li>
<li>
<p>Tarballs</p>
</li>
<li>
<p>Arbitrary directories</p>
</li>
</ul>
<p>The fetcher infrastructure is exposed via flake input specifications
and via the <code>fetchTree</code> built-in.</p>
</li>
<li>
<p><strong>Languages changes</strong>: the only new language feature is that you can
now have antiquotations in paths, e.g. <code>./${foo}</code> instead of <code>./. + foo</code>.</p>
</li>
<li>
<p><strong>New built-in functions</strong>:</p>
<ul>
<li>
<p><code>builtins.fetchTree</code> allows fetching a source tree using any
backends supported by the fetcher infrastructure. It subsumes the
functionality of existing built-ins like <code>fetchGit</code>,
<code>fetchMercurial</code> and <code>fetchTarball</code>.</p>
</li>
<li>
<p><code>builtins.getFlake</code> fetches a flake and returns its output
attributes. This function should not be used inside flakes! Use
flake inputs instead.</p>
</li>
<li>
<p><code>builtins.floor</code> and <code>builtins.ceil</code> round a floating-point number
down and up, respectively.</p>
</li>
</ul>
</li>
<li>
<p>Experimental support for recursive Nix. This means that Nix
derivations can now call Nix to build other derivations. This is not
in a stable state yet and not well
<a href="https://github.com/NixOS/nix/commit/c4d7c76b641d82b2696fef73ce0ac160043c18da">documented</a>.</p>
</li>
<li>
<p>The new experimental feature <code>no-url-literals</code> disables URL
literals. This helps to implement <a href="https://github.com/NixOS/rfcs/pull/45">RFC
45</a>.</p>
</li>
<li>
<p>Nix now uses <code>libarchive</code> to decompress and unpack tarballs and zip
files, so <code>tar</code> is no longer required.</p>
</li>
<li>
<p>The priority of substituters can now be overridden using the
<code>priority</code> substituter setting (e.g. <code>--substituters 'http://cache.nixos.org?priority=100 daemon?priority=10'</code>).</p>
</li>
<li>
<p><code>nix edit</code> now supports non-derivation attributes, e.g. <code>nix edit .#nixosConfigurations.bla</code>.</p>
</li>
<li>
<p>The <code>nix</code> command now provides command line completion for <code>bash</code>,
<code>zsh</code> and <code>fish</code>. Since the support for getting completions is built
into <code>nix</code>, it's easy to add support for other shells.</p>
</li>
<li>
<p>The new <code>--log-format</code> flag selects what Nix's output looks like. It
defaults to a terse progress indicator. There is a new
<code>internal-json</code> output format for use by other programs.</p>
</li>
<li>
<p><code>nix eval</code> has a new <code>--apply</code> flag that applies a function to the
evaluation result.</p>
</li>
<li>
<p><code>nix eval</code> has a new <code>--write-to</code> flag that allows it to write a
nested attribute set of string leaves to a corresponding directory
tree.</p>
</li>
<li>
<p>Memory improvements: many operations that add paths to the store or
copy paths between stores now run in constant memory.</p>
</li>
<li>
<p>Many <code>nix</code> commands now support the flag <code>--derivation</code> to operate
on a <code>.drv</code> file itself instead of its outputs.</p>
</li>
<li>
<p>There is a new store called <code>dummy://</code> that does not support
building or adding paths. This is useful if you want to use the Nix
evaluator but don't have a Nix store.</p>
</li>
<li>
<p>The <code>ssh-ng://</code> store now allows substituting paths on the remote,
as <code>ssh://</code> already did.</p>
</li>
<li>
<p>When auto-calling a function with an ellipsis, all arguments are now
passed.</p>
</li>
<li>
<p>New <code>nix-shell</code> features:</p>
<ul>
<li>
<p>It preserves the <code>PS1</code> environment variable if
<code>NIX_SHELL_PRESERVE_PROMPT</code> is set.</p>
</li>
<li>
<p>With <code>-p</code>, it passes any <code>--arg</code>s as Nixpkgs arguments.</p>
</li>
<li>
<p>Support for structured attributes.</p>
</li>
</ul>
</li>
<li>
<p><code>nix-prefetch-url</code> has a new <code>--executable</code> flag.</p>
</li>
<li>
<p>On <code>x86_64</code> systems, <a href="https://lwn.net/Articles/844831/"><code>x86_64</code> microarchitecture
levels</a> are mapped to additional
system types (e.g. <code>x86_64-v1-linux</code>).</p>
</li>
<li>
<p>The new <code>--eval-store</code> flag allows you to use a different store for
evaluation than for building or storing the build result. This is
primarily useful when you want to query whether something exists in
a read-only store, such as a binary cache:</p>
<pre><code># nix path-info --json --store https://cache.nixos.org \
  --eval-store auto nixpkgs#hello
</code></pre>
<p>(Here <code>auto</code> indicates the local store.)</p>
</li>
<li>
<p>The Nix daemon has a new low-latency mechanism for copying
closures. This is useful when building on remote stores such as
<code>ssh-ng://</code>.</p>
</li>
<li>
<p>Plugins can now register <code>nix</code> subcommands.</p>
</li>
<li>
<p>The <code>--indirect</code> flag to <code>nix-store --add-root</code> has become a no-op.
<code>--add-root</code> will always generate indirect GC roots from now on.</p>
</li>
</ul>
<h2 id="incompatible-changes"><a class="header" href="#incompatible-changes">Incompatible changes</a></h2>
<ul>
<li>
<p>The <code>nix</code> command is now marked as an experimental feature. This
means that you need to add</p>
<pre><code>experimental-features = nix-command
</code></pre>
<p>to your <code>nix.conf</code> if you want to use it, or pass
<code>--extra-experimental-features nix-command</code> on the command line.</p>
</li>
<li>
<p>The <code>nix</code> command no longer has a syntax for referring to packages
in a channel. This means that the following no longer works:</p>
<pre><code class="language-console">nix build nixpkgs.hello # Nix 2.3
</code></pre>
<p>Instead, you can either use the <code>#</code> syntax to select a package from
a flake, e.g.</p>
<pre><code class="language-console">nix build nixpkgs#hello
</code></pre>
<p>Or, if you want to use the <code>nixpkgs</code> channel in the <code>NIX_PATH</code>
environment variable:</p>
<pre><code class="language-console">nix build -f '&lt;nixpkgs&gt;' hello
</code></pre>
</li>
<li>
<p>The old <code>nix run</code> has been renamed to <code>nix shell</code>, while there is a
new <code>nix run</code> that runs a default command. So instead of</p>
<pre><code class="language-console">nix run nixpkgs.hello -c hello # Nix 2.3
</code></pre>
<p>you should use</p>
<pre><code class="language-console">nix shell nixpkgs#hello -c hello
</code></pre>
<p>or just</p>
<pre><code class="language-console">nix run nixpkgs#hello
</code></pre>
<p>if the command you want to run has the same name as the package.</p>
</li>
<li>
<p>It is now an error to modify the <code>plugin-files</code> setting via a
command-line flag that appears after the first non-flag argument to
any command, including a subcommand to <code>nix</code>. For example,
<code>nix-instantiate default.nix --plugin-files &quot;&quot;</code> must now become
<code>nix-instantiate --plugin-files &quot;&quot; default.nix</code>.</p>
</li>
<li>
<p>We no longer release source tarballs. If you want to build from
source, please build from the tags in the Git repository.</p>
</li>
</ul>
<h2 id="contributors"><a class="header" href="#contributors">Contributors</a></h2>
<p>This release has contributions from
Adam Höse,
Albert Safin,
Alex Kovar,
Alex Zero,
Alexander Bantyev,
Alexandre Esteves,
Alyssa Ross,
Anatole Lucet,
Anders Kaseorg,
Andreas Rammhold,
Antoine Eiche,
Antoine Martin,
Arnout Engelen,
Arthur Gautier,
aszlig,
Ben Burdette,
Benjamin Hipple,
Bernardo Meurer,
Björn Gohla,
Bjørn Forsman,
Bob van der Linden,
Brian Leung,
Brian McKenna,
Brian Wignall,
Bruce Toll,
Bryan Richter,
Calle Rosenquist,
Calvin Loncaric,
Carlo Nucera,
Carlos D'Agostino,
Chaz Schlarp,
Christian Höppner,
Christian Kampka,
Chua Hou,
Chuck,
Cole Helbling,
Daiderd Jordan,
Dan Callahan,
Dani,
Daniel Fitzpatrick,
Danila Fedorin,
Daniël de Kok,
Danny Bautista,
DavHau,
David McFarland,
Dima,
Domen Kožar,
Dominik Schrempf,
Dominique Martinet,
dramforever,
Dustin DeWeese,
edef,
Eelco Dolstra,
Ellie Hermaszewska,
Emilio Karakey,
Emily,
Eric Culp,
Ersin Akinci,
Fabian Möller,
Farid Zakaria,
Federico Pellegrin,
Finn Behrens,
Florian Franzen,
Félix Baylac-Jacqué,
Gabriella Gonzalez,
Geoff Reedy,
Georges Dubus,
Graham Christensen,
Greg Hale,
Greg Price,
Gregor Kleen,
Gregory Hale,
Griffin Smith,
Guillaume Bouchard,
Harald van Dijk,
illustris,
Ivan Zvonimir Horvat,
Jade,
Jake Waksbaum,
jakobrs,
James Ottaway,
Jan Tojnar,
Janne Heß,
Jaroslavas Pocepko,
Jarrett Keifer,
Jeremy Schlatter,
Joachim Breitner,
Joe Pea,
John Ericson,
Jonathan Ringer,
Josef Kemetmüller,
Joseph Lucas,
Jude Taylor,
Julian Stecklina,
Julien Tanguy,
Jörg Thalheim,
Kai Wohlfahrt,
keke,
Keshav Kini,
Kevin Quick,
Kevin Stock,
Kjetil Orbekk,
Krzysztof Gogolewski,
kvtb,
Lars Mühmel,
Leonhard Markert,
Lily Ballard,
Linus Heckemann,
Lorenzo Manacorda,
Lucas Desgouilles,
Lucas Franceschino,
Lucas Hoffmann,
Luke Granger-Brown,
Madeline Haraj,
Marwan Aljubeh,
Mat Marini,
Mateusz Piotrowski,
Matthew Bauer,
Matthew Kenigsberg,
Mauricio Scheffer,
Maximilian Bosch,
Michael Adler,
Michael Bishop,
Michael Fellinger,
Michael Forney,
Michael Reilly,
mlatus,
Mykola Orliuk,
Nathan van Doorn,
Naïm Favier,
ng0,
Nick Van den Broeck,
Nicolas Stig124 Formichella,
Niels Egberts,
Niklas Hambüchen,
Nikola Knezevic,
oxalica,
p01arst0rm,
Pamplemousse,
Patrick Hilhorst,
Paul Opiyo,
Pavol Rusnak,
Peter Kolloch,
Philipp Bartsch,
Philipp Middendorf,
Piotr Szubiakowski,
Profpatsch,
Puck Meerburg,
Ricardo M. Correia,
Rickard Nilsson,
Robert Hensing,
Robin Gloster,
Rodrigo,
Rok Garbas,
Ronnie Ebrin,
Rovanion Luckey,
Ryan Burns,
Ryan Mulligan,
Ryne Everett,
Sam Doshi,
Sam Lidder,
Samir Talwar,
Samuel Dionne-Riel,
Sebastian Ullrich,
Sergei Trofimovich,
Sevan Janiyan,
Shao Cheng,
Shea Levy,
Silvan Mosberger,
Stefan Frijters,
Stefan Jaax,
sternenseemann,
Steven Shaw,
Stéphan Kochen,
SuperSandro2000,
Suraj Barkale,
Taeer Bar-Yam,
Thomas Churchman,
Théophane Hufschmitt,
Timothy DeHerrera,
Timothy Klim,
Tobias Möst,
Tobias Pflug,
Tom Bereknyei,
Travis A. Everett,
Ujjwal Jain,
Vladimír Čunát,
Wil Taylor,
Will Dietz,
Yaroslav Bolyukin,
Yestin L. Harrison,
YI,
Yorick van Pelt,
Yuriy Taraday and
zimbatm.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="release-23-2019-09-04"><a class="header" href="#release-23-2019-09-04">Release 2.3 (2019-09-04)</a></h1>
<p>This is primarily a bug fix release. However, it makes some incompatible
changes:</p>
<ul>
<li>Nix now uses BSD file locks instead of POSIX file locks. Because of
this, you should not use Nix 2.3 and previous releases at the same
time on a Nix store.</li>
</ul>
<p>It also has the following changes:</p>
<ul>
<li>
<p><code>builtins.fetchGit</code>'s <code>ref</code> argument now allows specifying an
absolute remote ref. Nix will automatically prefix <code>ref</code> with
<code>refs/heads</code> only if <code>ref</code> doesn't already begin with <code>refs/</code>.</p>
</li>
<li>
<p>The installer now enables sandboxing by default on Linux when the
system has the necessary kernel support.</p>
</li>
<li>
<p>The <code>max-jobs</code> setting now defaults to 1.</p>
</li>
<li>
<p>New builtin functions: <code>builtins.isPath</code>, <code>builtins.hashFile</code>.</p>
</li>
<li>
<p>The <code>nix</code> command has a new <code>--print-build-logs</code> (<code>-L</code>) flag to
print build log output to stderr, rather than showing the last log
line in the progress bar. To distinguish between concurrent builds,
log lines are prefixed by the name of the package.</p>
</li>
<li>
<p>Builds are now executed in a pseudo-terminal, and the <code>TERM</code>
environment variable is set to <code>xterm-256color</code>. This allows many
programs (e.g. <code>gcc</code>, <code>clang</code>, <code>cmake</code>) to print colorized log
output.</p>
</li>
<li>
<p>Add <code>--no-net</code> convenience flag. This flag disables substituters;
sets the <code>tarball-ttl</code> setting to infinity (ensuring that any
previously downloaded files are considered current); and disables
retrying downloads and sets the connection timeout to the minimum.
This flag is enabled automatically if there are no configured
non-loopback network interfaces.</p>
</li>
<li>
<p>Add a <code>post-build-hook</code> setting to run a program after a build has
succeeded.</p>
</li>
<li>
<p>Add a <code>trace-function-calls</code> setting to log the duration of Nix
function calls to stderr.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="release-22-2019-01-11"><a class="header" href="#release-22-2019-01-11">Release 2.2 (2019-01-11)</a></h1>
<p>This is primarily a bug fix release. It also has the following changes:</p>
<ul>
<li>
<p>In derivations that use structured attributes (i.e. that specify set
the <code>__structuredAttrs</code> attribute to <code>true</code> to cause all attributes
to be passed to the builder in JSON format), you can now specify
closure checks per output, e.g.:</p>
<pre><code>outputChecks.&quot;out&quot; = {
  # The closure of 'out' must not be larger than 256 MiB.
  maxClosureSize = 256 * 1024 * 1024;

  # It must not refer to C compiler or to the 'dev' output.
  disallowedRequisites = [ stdenv.cc &quot;dev&quot; ];
};

outputChecks.&quot;dev&quot; = {
  # The 'dev' output must not be larger than 128 KiB.
  maxSize = 128 * 1024;
};
</code></pre>
</li>
<li>
<p>The derivation attribute <code>requiredSystemFeatures</code> is now enforced
for local builds, and not just to route builds to remote builders.
The supported features of a machine can be specified through the
configuration setting <code>system-features</code>.</p>
<p>By default, <code>system-features</code> includes <code>kvm</code> if <code>/dev/kvm</code> exists.
For compatibility, it also includes the pseudo-features
<code>nixos-test</code>, <code>benchmark</code> and <code>big-parallel</code> which are used by
Nixpkgs to route builds to particular Hydra build machines.</p>
</li>
<li>
<p>Sandbox builds are now enabled by default on Linux.</p>
</li>
<li>
<p>The new command <code>nix doctor</code> shows potential issues with your Nix
installation.</p>
</li>
<li>
<p>The <code>fetchGit</code> builtin function now uses a caching scheme that puts
different remote repositories in distinct local repositories, rather
than a single shared repository. This may require more disk space
but is faster.</p>
</li>
<li>
<p>The <code>dirOf</code> builtin function now works on relative paths.</p>
</li>
<li>
<p>Nix now supports <a href="https://www.w3.org/TR/SRI/">SRI hashes</a>, allowing
the hash algorithm and hash to be specified in a single string. For
example, you can write:</p>
<pre><code>import &lt;nix/fetchurl.nix&gt; {
  url = https://nixos.org/releases/nix/nix-2.1.3/nix-2.1.3.tar.xz;
  hash = &quot;sha256-XSLa0FjVyADWWhFfkZ2iKTjFDda6mMXjoYMXLRSYQKQ=&quot;;
};
</code></pre>
<p>instead of</p>
<pre><code>import &lt;nix/fetchurl.nix&gt; {
  url = https://nixos.org/releases/nix/nix-2.1.3/nix-2.1.3.tar.xz;
  sha256 = &quot;5d22dad058d5c800d65a115f919da22938c50dd6ba98c5e3a183172d149840a4&quot;;
};
</code></pre>
<p>In fixed-output derivations, the <code>outputHashAlgo</code> attribute is no
longer mandatory if <code>outputHash</code> specifies the hash.</p>
<p><code>nix hash-file</code> and <code>nix hash-path</code> now print hashes in SRI format by default. They also use
SHA-256 by default instead of SHA-512 because that's what we use
most of the time in Nixpkgs.</p>
</li>
<li>
<p>Integers are now 64 bits on all platforms.</p>
</li>
<li>
<p>The evaluator now prints profiling statistics (enabled via the
<code>NIX_SHOW_STATS</code> and <code>NIX_COUNT_CALLS</code> environment variables) in
JSON format.</p>
</li>
<li>
<p>The option <code>--xml</code> in <code>nix-store --query</code> has been removed. Instead, there now is an option
<code>--graphml</code> to output the dependency graph in GraphML format.</p>
</li>
<li>
<p>All <code>nix-*</code> commands are now symlinks to <code>nix</code>. This saves a bit of
disk space.</p>
</li>
<li>
<p><code>nix repl</code> now uses <code>libeditline</code> or <code>libreadline</code>.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="release-21-2018-09-02"><a class="header" href="#release-21-2018-09-02">Release 2.1 (2018-09-02)</a></h1>
<p>This is primarily a bug fix release. It also reduces memory consumption
in certain situations. In addition, it has the following new features:</p>
<ul>
<li>
<p>The Nix installer will no longer default to the Multi-User
installation for macOS. You can still instruct the installer to
run in multi-user mode.</p>
</li>
<li>
<p>The Nix installer now supports performing a Multi-User
installation for Linux computers which are running systemd. You
can select a Multi-User installation by passing the <code>--daemon</code>
flag to the installer: <code>sh &lt;(curl -L https://nixos.org/nix/install) --daemon</code>.</p>
<p>The multi-user installer cannot handle systems with SELinux. If
your system has SELinux enabled, you can force the installer to
run in single-user mode.</p>
</li>
<li>
<p>New builtin functions: <code>builtins.bitAnd</code>, <code>builtins.bitOr</code>,
<code>builtins.bitXor</code>, <code>builtins.fromTOML</code>, <code>builtins.concatMap</code>,
<code>builtins.mapAttrs</code>.</p>
</li>
<li>
<p>The S3 binary cache store now supports uploading NARs larger than 5
GiB.</p>
</li>
<li>
<p>The S3 binary cache store now supports uploading to S3-compatible
services with the <code>endpoint</code> option.</p>
</li>
<li>
<p>The flag <code>--fallback</code> is no longer required to recover from
disappeared NARs in binary caches.</p>
</li>
<li>
<p><code>nix-daemon</code> now respects <code>--store</code>.</p>
</li>
<li>
<p><code>nix run</code> now respects <code>nix-support/propagated-user-env-packages</code>.</p>
</li>
</ul>
<p>This release has contributions from Adrien Devresse, Aleksandr Pashkov,
Alexandre Esteves, Amine Chikhaoui, Andrew Dunham, Asad Saeeduddin,
aszlig, Ben Challenor, Ben Gamari, Benjamin Hipple, Bogdan Seniuc, Corey
O'Connor, Daiderd Jordan, Daniel Peebles, Daniel Poelzleithner, Danylo
Hlynskyi, Dmitry Kalinkin, Domen Kožar, Doug Beardsley, Eelco Dolstra,
Erik Arvstedt, Félix Baylac-Jacqué, Gleb Peregud, Graham Christensen,
Guillaume Maudoux, Ivan Kozik, John Arnold, Justin Humm, Linus
Heckemann, Lorenzo Manacorda, Matthew Justin Bauer, Matthew O'Gorman,
Maximilian Bosch, Michael Bishop, Michael Fiano, Michael Mercier,
Michael Raskin, Michael Weiss, Nicolas Dudebout, Peter Simons, Ryan
Trinkle, Samuel Dionne-Riel, Sean Seefried, Shea Levy, Symphorien Gibol,
Tim Engler, Tim Sears, Tuomas Tynkkynen, volth, Will Dietz, Yorick van
Pelt and zimbatm.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="release-20-2018-02-22"><a class="header" href="#release-20-2018-02-22">Release 2.0 (2018-02-22)</a></h1>
<p>The following incompatible changes have been made:</p>
<ul>
<li>
<p>The manifest-based substituter mechanism
(<code>download-using-manifests</code>) has been
<a href="https://github.com/NixOS/nix/commit/867967265b80946dfe1db72d40324b4f9af988ed">removed</a>.
It has been superseded by the binary cache substituter mechanism
since several years. As a result, the following programs have been
removed:</p>
<ul>
<li>
<p><code>nix-pull</code></p>
</li>
<li>
<p><code>nix-generate-patches</code></p>
</li>
<li>
<p><code>bsdiff</code></p>
</li>
<li>
<p><code>bspatch</code></p>
</li>
</ul>
</li>
<li>
<p>The “copy from other stores” substituter mechanism
(<code>copy-from-other-stores</code> and the <code>NIX_OTHER_STORES</code> environment
variable) has been removed. It was primarily used by the NixOS
installer to copy available paths from the installation medium. The
replacement is to use a chroot store as a substituter (e.g.
<code>--substituters /mnt</code>), or to build into a chroot store (e.g.
<code>--store /mnt --substituters /</code>).</p>
</li>
<li>
<p>The command <code>nix-push</code> has been removed as part of the effort to
eliminate Nix's dependency on Perl. You can use <code>nix copy</code> instead,
e.g. <code>nix copy --to file:///tmp/my-binary-cache paths…</code></p>
</li>
<li>
<p>The “nested” log output feature (<code>--log-type pretty</code>) has been removed. As a result, <code>nix-log2xml</code> was also
removed.</p>
</li>
<li>
<p>OpenSSL-based signing has been
<a href="https://github.com/NixOS/nix/commit/f435f8247553656774dd1b2c88e9de5d59cab203">removed</a>.
This feature was never well-supported. A better alternative is
provided by the <code>secret-key-files</code> and <code>trusted-public-keys</code>
options.</p>
</li>
<li>
<p>Failed build caching has been
<a href="https://github.com/NixOS/nix/commit/8cffec84859cec8b610a2a22ab0c4d462a9351ff">removed</a>.
This feature was introduced to support the Hydra continuous build
system, but Hydra no longer uses it.</p>
</li>
<li>
<p><code>nix-mode.el</code> has been removed from Nix. It is now <a href="https://github.com/NixOS/nix-mode">a separate
repository</a> and can be installed
through the MELPA package repository.</p>
</li>
</ul>
<p>This release has the following new features:</p>
<ul>
<li>
<p>It introduces a new command named <code>nix</code>, which is intended to
eventually replace all <code>nix-*</code> commands with a more consistent and
better designed user interface. It currently provides replacements
for some (but not all) of the functionality provided by <code>nix-store</code>,
<code>nix-build</code>, <code>nix-shell -p</code>, <code>nix-env -qa</code>, <code>nix-instantiate --eval</code>, <code>nix-push</code> and <code>nix-copy-closure</code>. It has the following
major features:</p>
<ul>
<li>
<p>Unlike the legacy commands, it has a consistent way to refer to
packages and package-like arguments (like store paths). For
example, the following commands all copy the GNU Hello package
to a remote machine:</p>
<pre><code>nix copy --to ssh://machine nixpkgs.hello

nix copy --to ssh://machine /nix/store/0i2jd68mp5g6h2sa5k9c85rb80sn8hi9-hello-2.10

nix copy --to ssh://machine '(with import &lt;nixpkgs&gt; {}; hello)'
</code></pre>
<p>By contrast, <code>nix-copy-closure</code> only accepted store paths as
arguments.</p>
</li>
<li>
<p>It is self-documenting: <code>--help</code> shows all available
command-line arguments. If <code>--help</code> is given after a subcommand,
it shows examples for that subcommand. <code>nix --help-config</code> shows all configuration options.</p>
</li>
<li>
<p>It is much less verbose. By default, it displays a single-line
progress indicator that shows how many packages are left to be
built or downloaded, and (if there are running builds) the most
recent line of builder output. If a build fails, it shows the
last few lines of builder output. The full build log can be
retrieved using <code>nix log</code>.</p>
</li>
<li>
<p>It
<a href="https://github.com/NixOS/nix/commit/b8283773bd64d7da6859ed520ee19867742a03ba">provides</a>
all <code>nix.conf</code> configuration options as command line flags. For
example, instead of <code>--option http-connections 100</code> you can write <code>--http-connections 100</code>.
Boolean options can be written as <code>--foo</code> or <code>--no-foo</code> (e.g.
<code>--no-auto-optimise-store</code>).</p>
</li>
<li>
<p>Many subcommands have a <code>--json</code> flag to write results to stdout
in JSON format.</p>
</li>
</ul>
<blockquote>
<p><strong>Warning</strong></p>
<p>Please note that the <code>nix</code> command is a work in progress and the
interface is subject to change.</p>
</blockquote>
<p>It provides the following high-level (“porcelain”) subcommands:</p>
<ul>
<li>
<p><code>nix build</code> is a replacement for <code>nix-build</code>.</p>
</li>
<li>
<p><code>nix run</code> executes a command in an environment in which the
specified packages are available. It is (roughly) a replacement
for <code>nix-shell -p</code>. Unlike that command, it does not execute the command in a
shell, and has a flag (<code>-c</code>) that specifies the unquoted command
line to be executed.</p>
<p>It is particularly useful in conjunction with chroot stores,
allowing Linux users who do not have permission to install Nix
in <code>/nix/store</code> to still use binary substitutes that assume
<code>/nix/store</code>. For example,</p>
<pre><code>nix run --store ~/my-nix nixpkgs.hello -c hello --greeting 'Hi everybody!'
</code></pre>
<p>downloads (or if not substitutes are available, builds) the GNU
Hello package into <code>~/my-nix/nix/store</code>, then runs <code>hello</code> in a
mount namespace where <code>~/my-nix/nix/store</code> is mounted onto
<code>/nix/store</code>.</p>
</li>
<li>
<p><code>nix search</code> replaces <code>nix-env -qa</code>. It searches the available packages for occurrences of a
search string in the attribute name, package name or
description. Unlike <code>nix-env -qa</code>, it has a cache to speed up
subsequent searches.</p>
</li>
<li>
<p><code>nix copy</code> copies paths between arbitrary Nix stores,
generalising <code>nix-copy-closure</code> and <code>nix-push</code>.</p>
</li>
<li>
<p><code>nix repl</code> replaces the external program <code>nix-repl</code>. It provides
an interactive environment for evaluating and building Nix
expressions. Note that it uses <code>linenoise-ng</code> instead of GNU
Readline.</p>
</li>
<li>
<p><code>nix upgrade-nix</code> upgrades Nix to the latest stable version.
This requires that Nix is installed in a profile. (Thus it won’t
work on NixOS, or if it’s installed outside of the Nix store.)</p>
</li>
<li>
<p><code>nix verify</code> checks whether store paths are unmodified and/or
“trusted” (see below). It replaces <code>nix-store --verify</code> and
<code>nix-store --verify-path</code>.</p>
</li>
<li>
<p><code>nix log</code> shows the build log of a package or path. If the
build log is not available locally, it will try to obtain it
from the configured substituters (such as
<a href="https://cache.nixos.org/">cache.nixos.org</a>, which now
provides build logs).</p>
</li>
<li>
<p><code>nix edit</code> opens the source code of a package in your editor.</p>
</li>
<li>
<p><code>nix eval</code> replaces <code>nix-instantiate --eval</code>.</p>
</li>
<li>
<p><code>nix why-depends</code> shows why one store path has another in its
closure. This is primarily useful to finding the causes of
closure bloat. For example,</p>
<pre><code>nix why-depends nixpkgs.vlc nixpkgs.libdrm.dev
</code></pre>
<p>shows a chain of files and fragments of file contents that cause
the VLC package to have the “dev” output of <code>libdrm</code> in its
closure — an undesirable situation.</p>
</li>
<li>
<p><code>nix path-info</code> shows information about store paths, replacing
<code>nix-store -q</code>. A useful feature is the option <code>--closure-size</code>
(<code>-S</code>). For example, the following command show the closure
sizes of every path in the current NixOS system closure, sorted
by size:</p>
<pre><code>nix path-info -rS /run/current-system | sort -nk2
</code></pre>
</li>
<li>
<p><code>nix optimise-store</code> replaces <code>nix-store --optimise</code>. The main
difference is that it has a progress indicator.</p>
</li>
</ul>
<p>A number of low-level (“plumbing”) commands are also available:</p>
<ul>
<li>
<p><code>nix ls-store</code> and <code>nix ls-nar</code> list the contents of a store path or NAR file. The
former is primarily useful in conjunction with remote stores,
e.g.</p>
<pre><code>nix ls-store --store https://cache.nixos.org/ -lR /nix/store/0i2jd68mp5g6h2sa5k9c85rb80sn8hi9-hello-2.10
</code></pre>
<p>lists the contents of path in a binary cache.</p>
</li>
<li>
<p><code>nix cat-store</code> and <code>nix cat-nar</code> allow extracting a file from a store path or NAR file.</p>
</li>
<li>
<p><code>nix dump-path</code> writes the contents of a store path to stdout in
NAR format. This replaces <code>nix-store --dump</code>.</p>
</li>
<li>
<p><code>nix show-derivation</code> displays a store derivation in JSON format.
This is an alternative to <code>pp-aterm</code>.</p>
</li>
<li>
<p><code>nix add-to-store</code> replaces <code>nix-store --add</code>.</p>
</li>
<li>
<p><code>nix sign-paths</code> signs store paths.</p>
</li>
<li>
<p><code>nix copy-sigs</code> copies signatures from one store to another.</p>
</li>
<li>
<p><code>nix show-config</code> shows all configuration options and their
current values.</p>
</li>
</ul>
</li>
<li>
<p>The store abstraction that Nix has had for a long time to support
store access via the Nix daemon has been extended
significantly. In particular, substituters (which used to be
external programs such as <code>download-from-binary-cache</code>) are now
subclasses of the abstract <code>Store</code> class. This allows many Nix
commands to operate on such store types. For example, <code>nix path-info</code> shows information about paths in your local Nix store,
while <code>nix path-info --store https://cache.nixos.org/</code> shows
information about paths in the specified binary cache. Similarly,
<code>nix-copy-closure</code>, <code>nix-push</code> and substitution are all instances
of the general notion of copying paths between different kinds of
Nix stores.</p>
<p>Stores are specified using an URI-like syntax, e.g.
<a href="https://cache.nixos.org/">https://cache.nixos.org/</a> or <a href="ssh://machine">ssh://machine</a>. The following store
types are supported:</p>
<ul>
<li>
<p><code>LocalStore</code> (stori URI <code>local</code> or an absolute path) and the
misnamed <code>RemoteStore</code> (<code>daemon</code>) provide access to a local Nix
store, the latter via the Nix daemon. You can use <code>auto</code> or the
empty string to auto-select a local or daemon store depending on
whether you have write permission to the Nix store. It is no
longer necessary to set the <code>NIX_REMOTE</code> environment variable to
use the Nix daemon.</p>
<p>As noted above, <code>LocalStore</code> now supports chroot builds,
allowing the “physical” location of the Nix store (e.g.
<code>/home/alice/nix/store</code>) to differ from its “logical” location
(typically <code>/nix/store</code>). This allows non-root users to use Nix
while still getting the benefits from prebuilt binaries from
<a href="https://cache.nixos.org/">cache.nixos.org</a>.</p>
</li>
<li>
<p><code>BinaryCacheStore</code> is the abstract superclass of all binary
cache stores. It supports writing build logs and NAR content
listings in JSON format.</p>
</li>
<li>
<p><code>HttpBinaryCacheStore</code> (<code>http://</code>, <code>https://</code>) supports binary
caches via HTTP or HTTPS. If the server supports <code>PUT</code> requests,
it supports uploading store paths via commands such as <code>nix copy</code>.</p>
</li>
<li>
<p><code>LocalBinaryCacheStore</code> (<code>file://</code>) supports binary caches in
the local filesystem.</p>
</li>
<li>
<p><code>S3BinaryCacheStore</code> (<code>s3://</code>) supports binary caches stored in
Amazon S3, if enabled at compile time.</p>
</li>
<li>
<p><code>LegacySSHStore</code> (<code>ssh://</code>) is used to implement remote builds
and <code>nix-copy-closure</code>.</p>
</li>
<li>
<p><code>SSHStore</code> (<code>ssh-ng://</code>) supports arbitrary Nix operations on a
remote machine via the same protocol used by <code>nix-daemon</code>.</p>
</li>
</ul>
</li>
<li>
<p>Security has been improved in various ways:</p>
<ul>
<li>
<p>Nix now stores signatures for local store paths. When paths are
copied between stores (e.g., copied from a binary cache to a
local store), signatures are propagated.</p>
<p>Locally-built paths are signed automatically using the secret
keys specified by the <code>secret-key-files</code> store option.
Secret/public key pairs can be generated using <code>nix-store --generate-binary-cache-key</code>.</p>
<p>In addition, locally-built store paths are marked as “ultimately
trusted”, but this bit is not propagated when paths are copied
between stores.</p>
</li>
<li>
<p>Content-addressable store paths no longer require signatures —
they can be imported into a store by unprivileged users even if
they lack signatures.</p>
</li>
<li>
<p>The command <code>nix verify</code> checks whether the specified paths are
trusted, i.e., have a certain number of trusted signatures, are
ultimately trusted, or are content-addressed.</p>
</li>
<li>
<p>Substitutions from binary caches
<a href="https://github.com/NixOS/nix/commit/ecbc3fedd3d5bdc5a0e1a0a51b29062f2874ac8b">now</a>
require signatures by default. This was already the case on
NixOS.</p>
</li>
<li>
<p>In Linux sandbox builds, we
<a href="https://github.com/NixOS/nix/commit/eba840c8a13b465ace90172ff76a0db2899ab11b">now</a>
use <code>/build</code> instead of <code>/tmp</code> as the temporary build directory.
This fixes potential security problems when a build accidentally
stores its <code>TMPDIR</code> in some security-sensitive place, such as an
RPATH.</p>
</li>
</ul>
</li>
<li>
<p><em>Pure evaluation mode</em>. With the <code>--pure-eval</code> flag, Nix enables a
variant of the existing restricted evaluation mode that forbids
access to anything that could cause different evaluations of the
same command line arguments to produce a different result. This
includes builtin functions such as <code>builtins.getEnv</code>, but more
importantly, <em>all</em> filesystem or network access unless a content
hash or commit hash is specified. For example, calls to
<code>builtins.fetchGit</code> are only allowed if a <code>rev</code> attribute is
specified.</p>
<p>The goal of this feature is to enable true reproducibility and
traceability of builds (including NixOS system configurations) at
the evaluation level. For example, in the future, <code>nixos-rebuild</code>
might build configurations from a Nix expression in a Git repository
in pure mode. That expression might fetch other repositories such as
Nixpkgs via <code>builtins.fetchGit</code>. The commit hash of the top-level
repository then uniquely identifies a running system, and, in
conjunction with that repository, allows it to be reproduced or
modified.</p>
</li>
<li>
<p>There are several new features to support binary reproducibility
(i.e. to help ensure that multiple builds of the same derivation
produce exactly the same output). When <code>enforce-determinism</code> is set
to <code>false</code>, it’s <a href="https://github.com/NixOS/nix/commit/8bdf83f936adae6f2c907a6d2541e80d4120f051">no
longer</a>
a fatal error if build rounds produce different output. Also, a hook
named <code>diff-hook</code> is
<a href="https://github.com/NixOS/nix/commit/9a313469a4bdea2d1e8df24d16289dc2a172a169">provided</a>
to allow you to run tools such as <code>diffoscope</code> when build rounds
produce different output.</p>
</li>
<li>
<p>Configuring remote builds is a lot easier now. Provided you are not
using the Nix daemon, you can now just specify a remote build
machine on the command line, e.g. <code>--option builders 'ssh://my-mac x86_64-darwin'</code>. The environment variable
<code>NIX_BUILD_HOOK</code> has been removed and is no longer needed. The
environment variable <code>NIX_REMOTE_SYSTEMS</code> is still supported for
compatibility, but it is also possible to specify builders in
<code>nix.conf</code> by setting the option <code>builders = @path</code>.</p>
</li>
<li>
<p>If a fixed-output derivation produces a result with an incorrect
hash, the output path is moved to the location corresponding to the
actual hash and registered as valid. Thus, a subsequent build of the
fixed-output derivation with the correct hash is unnecessary.</p>
</li>
<li>
<p><code>nix-shell</code>
<a href="https://github.com/NixOS/nix/commit/ea59f39326c8e9dc42dfed4bcbf597fbce58797c">now</a>
sets the <code>IN_NIX_SHELL</code> environment variable during evaluation and
in the shell itself. This can be used to perform different actions
depending on whether you’re in a Nix shell or in a regular build.
Nixpkgs provides <code>lib.inNixShell</code> to check this variable during
evaluation.</p>
</li>
<li>
<p><code>NIX_PATH</code> is now lazy, so URIs in the path are only downloaded if
they are needed for evaluation.</p>
</li>
<li>
<p>You can now use <code>channel:</code> as a short-hand for
<a href="https://nixos.org/channels//nixexprs.tar.xz">https://nixos.org/channels//nixexprs.tar.xz</a>. For example,
<code>nix-build channel:nixos-15.09 -A hello</code> will build the GNU Hello
package from the <code>nixos-15.09</code> channel. In the future, this may
use Git to fetch updates more efficiently.</p>
</li>
<li>
<p>When <code>--no-build-output</code> is given, the last 10 lines of the build
log will be shown if a build fails.</p>
</li>
<li>
<p>Networking has been improved:</p>
<ul>
<li>
<p>HTTP/2 is now supported. This makes binary cache lookups <a href="https://github.com/NixOS/nix/commit/90ad02bf626b885a5dd8967894e2eafc953bdf92">much
more
efficient</a>.</p>
</li>
<li>
<p>We now retry downloads on many HTTP errors, making binary caches
substituters more resilient to temporary failures.</p>
</li>
<li>
<p>HTTP credentials can now be configured via the standard <code>netrc</code>
mechanism.</p>
</li>
<li>
<p>If S3 support is enabled at compile time, <a href="s3://">s3://</a> URIs are
<a href="https://github.com/NixOS/nix/commit/9ff9c3f2f80ba4108e9c945bbfda2c64735f987b">supported</a>
in all places where Nix allows URIs.</p>
</li>
<li>
<p>Brotli compression is now supported. In particular,
<a href="https://cache.nixos.org/">cache.nixos.org</a> build logs are now compressed
using Brotli.</p>
</li>
</ul>
</li>
<li>
<p><code>nix-env</code>
<a href="https://github.com/NixOS/nix/commit/b0cb11722626e906a73f10dd9a0c9eea29faf43a">now</a>
ignores packages with bad derivation names (in particular those
starting with a digit or containing a dot).</p>
</li>
<li>
<p>Many configuration options have been renamed, either because they
were unnecessarily verbose (e.g. <code>build-use-sandbox</code> is now just
<code>sandbox</code>) or to reflect generalised behaviour (e.g. <code>binary-caches</code>
is now <code>substituters</code> because it allows arbitrary store URIs). The
old names are still supported for compatibility.</p>
</li>
<li>
<p>The <code>max-jobs</code> option can
<a href="https://github.com/NixOS/nix/commit/7251d048fa812d2551b7003bc9f13a8f5d4c95a5">now</a>
be set to <code>auto</code> to use the number of CPUs in the system.</p>
</li>
<li>
<p>Hashes can
<a href="https://github.com/NixOS/nix/commit/c0015e87af70f539f24d2aa2bc224a9d8b84276b">now</a>
be specified in base-64 format, in addition to base-16 and the
non-standard base-32.</p>
</li>
<li>
<p><code>nix-shell</code> now uses <code>bashInteractive</code> from Nixpkgs, rather than the
<code>bash</code> command that happens to be in the caller’s <code>PATH</code>. This is
especially important on macOS where the <code>bash</code> provided by the
system is seriously outdated and cannot execute <code>stdenv</code>’s setup
script.</p>
</li>
<li>
<p>Nix can now automatically trigger a garbage collection if free disk
space drops below a certain level during a build. This is configured
using the <code>min-free</code> and <code>max-free</code> options.</p>
</li>
<li>
<p><code>nix-store -q --roots</code> and <code>nix-store --gc --print-roots</code> now show
temporary and in-memory roots.</p>
</li>
<li>
<p>Nix can now be extended with plugins. See the documentation of the
<code>plugin-files</code> option for more details.</p>
</li>
</ul>
<p>The Nix language has the following new features:</p>
<ul>
<li>
<p>It supports floating point numbers. They are based on the C++
<code>float</code> type and are supported by the existing numerical operators.
Export and import to and from JSON and XML works, too.</p>
</li>
<li>
<p>Derivation attributes can now reference the outputs of the
derivation using the <code>placeholder</code> builtin function. For example,
the attribute</p>
<pre><code>configureFlags = &quot;--prefix=${placeholder &quot;out&quot;} --includedir=${placeholder &quot;dev&quot;}&quot;;
</code></pre>
<p>will cause the <code>configureFlags</code> environment variable to contain the
actual store paths corresponding to the <code>out</code> and <code>dev</code> outputs.</p>
</li>
</ul>
<p>The following builtin functions are new or extended:</p>
<ul>
<li>
<p><code>builtins.fetchGit</code> allows Git repositories to be fetched at
evaluation time. Thus it differs from the <code>fetchgit</code> function in
Nixpkgs, which fetches at build time and cannot be used to fetch Nix
expressions during evaluation. A typical use case is to import
external NixOS modules from your configuration, e.g.</p>
<pre><code>imports = [ (builtins.fetchGit https://github.com/edolstra/dwarffs + &quot;/module.nix&quot;) ];
</code></pre>
</li>
<li>
<p>Similarly, <code>builtins.fetchMercurial</code> allows you to fetch Mercurial
repositories.</p>
</li>
<li>
<p><code>builtins.path</code> generalises <code>builtins.filterSource</code> and path
literals (e.g. <code>./foo</code>). It allows specifying a store path name that
differs from the source path name (e.g. <code>builtins.path { path = ./foo; name = &quot;bar&quot;; }</code>) and also supports filtering out unwanted files.</p>
</li>
<li>
<p><code>builtins.fetchurl</code> and <code>builtins.fetchTarball</code> now support <code>sha256</code>
and <code>name</code> attributes.</p>
</li>
<li>
<p><code>builtins.split</code> splits a string using a POSIX extended regular
expression as the separator.</p>
</li>
<li>
<p><code>builtins.partition</code> partitions the elements of a list into two
lists, depending on a Boolean predicate.</p>
</li>
<li>
<p><code>&lt;nix/fetchurl.nix&gt;</code> now uses the content-addressable tarball cache
at <a href="http://tarballs.nixos.org/">http://tarballs.nixos.org/</a>, just like <code>fetchurl</code> in Nixpkgs.
(f2682e6e18a76ecbfb8a12c17e3a0ca15c084197)</p>
</li>
<li>
<p>In restricted and pure evaluation mode, builtin functions that
download from the network (such as <code>fetchGit</code>) are permitted to
fetch underneath a list of URI prefixes specified in the option
<code>allowed-uris</code>.</p>
</li>
</ul>
<p>The Nix build environment has the following changes:</p>
<ul>
<li>
<p>Values such as Booleans, integers, (nested) lists and attribute sets
can
<a href="https://github.com/NixOS/nix/commit/6de33a9c675b187437a2e1abbcb290981a89ecb1">now</a>
be passed to builders in a non-lossy way. If the special attribute
<code>__structuredAttrs</code> is set to <code>true</code>, the other derivation
attributes are serialised in JSON format and made available to the
builder via the file <code>.attrs.json</code> in the builder’s temporary
directory. This obviates the need for <code>passAsFile</code> since JSON files
have no size restrictions, unlike process environments.</p>
<p><a href="https://github.com/NixOS/nix/commit/2d5b1b24bf70a498e4c0b378704cfdb6471cc699">As a convenience to Bash
builders</a>,
Nix writes a script named <code>.attrs.sh</code> to the builder’s directory
that initialises shell variables corresponding to all attributes
that are representable in Bash. This includes non-nested
(associative) arrays. For example, the attribute <code>hardening.format = true</code> ends up as the Bash associative array element
<code>${hardening[format]}</code>.</p>
</li>
<li>
<p>Builders can
<a href="https://github.com/NixOS/nix/commit/88e6bb76de5564b3217be9688677d1c89101b2a3">now</a>
communicate what build phase they are in by writing messages to the
file descriptor specified in <code>NIX_LOG_FD</code>. The current phase is
shown by the <code>nix</code> progress indicator.</p>
</li>
<li>
<p>In Linux sandbox builds, we
<a href="https://github.com/NixOS/nix/commit/a2d92bb20e82a0957067ede60e91fab256948b41">now</a>
provide a default <code>/bin/sh</code> (namely <code>ash</code> from BusyBox).</p>
</li>
<li>
<p>In structured attribute mode, <code>exportReferencesGraph</code>
<a href="https://github.com/NixOS/nix/commit/c2b0d8749f7e77afc1c4b3e8dd36b7ee9720af4a">exports</a>
extended information about closures in JSON format. In particular,
it includes the sizes and hashes of paths. This is primarily useful
for NixOS image builders.</p>
</li>
<li>
<p>Builds are
<a href="https://github.com/NixOS/nix/commit/21948deed99a3295e4d5666e027a6ca42dc00b40">now</a>
killed as soon as Nix receives EOF on the builder’s stdout or
stderr. This fixes a bug that allowed builds to hang Nix
indefinitely, regardless of timeouts.</p>
</li>
<li>
<p>The <code>sandbox-paths</code> configuration option can now specify optional
paths by appending a <code>?</code>, e.g. <code>/dev/nvidiactl?</code> will bind-mount
<code>/dev/nvidiactl</code> only if it exists.</p>
</li>
<li>
<p>On Linux, builds are now executed in a user namespace with UID 1000
and GID 100.</p>
</li>
</ul>
<p>A number of significant internal changes were made:</p>
<ul>
<li>
<p>Nix no longer depends on Perl and all Perl components have been
rewritten in C++ or removed. The Perl bindings that used to be part
of Nix have been moved to a separate package, <code>nix-perl</code>.</p>
</li>
<li>
<p>All <code>Store</code> classes are now thread-safe. <code>RemoteStore</code> supports
multiple concurrent connections to the daemon. This is primarily
useful in multi-threaded programs such as <code>hydra-queue-runner</code>.</p>
</li>
</ul>
<p>This release has contributions from Adrien Devresse, Alexander Ried,
Alex Cruice, Alexey Shmalko, AmineChikhaoui, Andy Wingo, Aneesh Agrawal,
Anthony Cowley, Armijn Hemel, aszlig, Ben Gamari, Benjamin Hipple,
Benjamin Staffin, Benno Fünfstück, Bjørn Forsman, Brian McKenna, Charles
Strahan, Chase Adams, Chris Martin, Christian Theune, Chris Warburton,
Daiderd Jordan, Dan Connolly, Daniel Peebles, Dan Peebles, davidak,
David McFarland, Dmitry Kalinkin, Domen Kožar, Eelco Dolstra, Emery
Hemingway, Eric Litak, Eric Wolf, Fabian Schmitthenner, Frederik
Rietdijk, Gabriel Gonzalez, Giorgio Gallo, Graham Christensen, Guillaume
Maudoux, Harmen, Iavael, James Broadhead, James Earl Douglas, Janus
Troelsen, Jeremy Shaw, Joachim Schiele, Joe Hermaszewski, Joel Moberg,
Johannes 'fish' Ziemke, Jörg Thalheim, Jude Taylor, kballou, Keshav
Kini, Kjetil Orbekk, Langston Barrett, Linus Heckemann, Ludovic Courtès,
Manav Rathi, Marc Scholten, Markus Hauck, Matt Audesse, Matthew Bauer,
Matthias Beyer, Matthieu Coudron, N1X, Nathan Zadoks, Neil Mayhew,
Nicolas B. Pierron, Niklas Hambüchen, Nikolay Amiantov, Ole Jørgen
Brønner, Orivej Desh, Peter Simons, Peter Stuart, Pyry Jahkola, regnat,
Renzo Carbonara, Rhys, Robert Vollmert, Scott Olson, Scott R. Parish,
Sergei Trofimovich, Shea Levy, Sheena Artrip, Spencer Baugh, Stefan
Junker, Susan Potter, Thomas Tuegel, Timothy Allen, Tristan Hume, Tuomas
Tynkkynen, tv, Tyson Whitehead, Vladimír Čunát, Will Dietz, wmertens,
Wout Mertens, zimbatm and Zoran Plesivčak.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="release-11110-2017-06-12"><a class="header" href="#release-11110-2017-06-12">Release 1.11.10 (2017-06-12)</a></h1>
<p>This release fixes a security bug in Nix’s “build user” build isolation
mechanism. Previously, Nix builders had the ability to create setuid
binaries owned by a <code>nixbld</code> user. Such a binary could then be used by
an attacker to assume a <code>nixbld</code> identity and interfere with subsequent
builds running under the same UID.</p>
<p>To prevent this issue, Nix now disallows builders to create setuid and
setgid binaries. On Linux, this is done using a seccomp BPF filter. Note
that this imposes a small performance penalty (e.g. 1% when building GNU
Hello). Using seccomp, we now also prevent the creation of extended
attributes and POSIX ACLs since these cannot be represented in the NAR
format and (in the case of POSIX ACLs) allow bypassing regular Nix store
permissions. On macOS, the restriction is implemented using the existing
sandbox mechanism, which now uses a minimal “allow all except the
creation of setuid/setgid binaries” profile when regular sandboxing is
disabled. On other platforms, the “build user” mechanism is now
disabled.</p>
<p>Thanks go to Linus Heckemann for discovering and reporting this bug.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="release-111-2016-01-19"><a class="header" href="#release-111-2016-01-19">Release 1.11 (2016-01-19)</a></h1>
<p>This is primarily a bug fix release. It also has a number of new
features:</p>
<ul>
<li>
<p><code>nix-prefetch-url</code> can now download URLs specified in a Nix
expression. For example,</p>
<pre><code>$ nix-prefetch-url -A hello.src
</code></pre>
<p>will prefetch the file specified by the <code>fetchurl</code> call in the
attribute <code>hello.src</code> from the Nix expression in the current
directory, and print the cryptographic hash of the resulting file on
stdout. This differs from <code>nix-build -A hello.src</code> in that it doesn't verify the hash, and is thus useful
when you’re updating a Nix expression.</p>
<p>You can also prefetch the result of functions that unpack a tarball,
such as <code>fetchFromGitHub</code>. For example:</p>
<pre><code>$ nix-prefetch-url --unpack https://github.com/NixOS/patchelf/archive/0.8.tar.gz
</code></pre>
<p>or from a Nix expression:</p>
<pre><code>$ nix-prefetch-url -A nix-repl.src
</code></pre>
</li>
<li>
<p>The builtin function <code>&lt;nix/fetchurl.nix&gt;</code> now supports downloading
and unpacking NARs. This removes the need to have multiple downloads
in the Nixpkgs stdenv bootstrap process (like a separate busybox
binary for Linux, or curl/mkdir/sh/bzip2 for Darwin). Now all those
files can be combined into a single NAR, optionally compressed using
<code>xz</code>.</p>
</li>
<li>
<p>Nix now supports SHA-512 hashes for verifying fixed-output
derivations, and in <code>builtins.hashString</code>.</p>
</li>
<li>
<p>The new flag <code>--option build-repeat N</code> will cause every build to be executed <em>N</em>+1 times. If the build
output differs between any round, the build is rejected, and the
output paths are not registered as valid. This is primarily useful
to verify build determinism. (We already had a <code>--check</code> option to
repeat a previously succeeded build. However, with <code>--check</code>,
non-deterministic builds are registered in the DB. Preventing that
is useful for Hydra to ensure that non-deterministic builds don't
end up getting published to the binary cache.)</p>
</li>
<li>
<p>The options <code>--check</code> and <code>--option build-repeat N</code>, if they detect a difference between two runs of the
same derivation and <code>-K</code> is given, will make the output of the other
run available under <code>store-path-check</code>. This makes it easier to
investigate the non-determinism using tools like <code>diffoscope</code>, e.g.,</p>
<pre><code>$ nix-build pkgs/stdenv/linux -A stage1.pkgs.zlib --check -K
error: derivation ‘/nix/store/l54i8wlw2265…-zlib-1.2.8.drv’ may not
be deterministic: output ‘/nix/store/11a27shh6n2i…-zlib-1.2.8’
differs from ‘/nix/store/11a27shh6n2i…-zlib-1.2.8-check’

$ diffoscope /nix/store/11a27shh6n2i…-zlib-1.2.8 /nix/store/11a27shh6n2i…-zlib-1.2.8-check
…
├── lib/libz.a
│   ├── metadata
│   │ @@ -1,15 +1,15 @@
│   │ -rw-r--r-- 30001/30000   3096 Jan 12 15:20 2016 adler32.o
…
│   │ +rw-r--r-- 30001/30000   3096 Jan 12 15:28 2016 adler32.o
…
</code></pre>
</li>
<li>
<p>Improved FreeBSD support.</p>
</li>
<li>
<p><code>nix-env -qa --xml --meta</code> now prints license information.</p>
</li>
<li>
<p>The maximum number of parallel TCP connections that the binary cache
substituter will use has been decreased from 150 to 25. This should
prevent upsetting some broken NAT routers, and also improves
performance.</p>
</li>
<li>
<p>All &quot;chroot&quot;-containing strings got renamed to &quot;sandbox&quot;. In
particular, some Nix options got renamed, but the old names are
still accepted as lower-priority aliases.</p>
</li>
</ul>
<p>This release has contributions from Anders Claesson, Anthony Cowley,
Bjørn Forsman, Brian McKenna, Danny Wilson, davidak, Eelco Dolstra,
Fabian Schmitthenner, FrankHB, Ilya Novoselov, janus, Jim Garrison, John
Ericson, Jude Taylor, Ludovic Courtès, Manuel Jacob, Mathnerd314, Pascal
Wittmann, Peter Simons, Philip Potter, Preston Bennes, Rommel M.
Martinez, Sander van der Burg, Shea Levy, Tim Cuthbertson, Tuomas
Tynkkynen, Utku Demir and Vladimír Čunát.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="release-110-2015-09-03"><a class="header" href="#release-110-2015-09-03">Release 1.10 (2015-09-03)</a></h1>
<p>This is primarily a bug fix release. It also has a number of new
features:</p>
<ul>
<li>
<p>A number of builtin functions have been added to reduce
Nixpkgs/NixOS evaluation time and memory consumption: <code>all</code>, <code>any</code>,
<code>concatStringsSep</code>, <code>foldl’</code>, <code>genList</code>, <code>replaceStrings</code>, <code>sort</code>.</p>
</li>
<li>
<p>The garbage collector is more robust when the disk is full.</p>
</li>
<li>
<p>Nix supports a new API for building derivations that doesn’t require
a <code>.drv</code> file to be present on disk; it only requires an in-memory
representation of the derivation. This is used by the Hydra
continuous build system to make remote builds more efficient.</p>
</li>
<li>
<p>The function <code>&lt;nix/fetchurl.nix&gt;</code> now uses a <em>builtin</em> builder (i.e.
it doesn’t require starting an external process; the download is
performed by Nix itself). This ensures that derivation paths don’t
change when Nix is upgraded, and obviates the need for ugly hacks to
support chroot execution.</p>
</li>
<li>
<p><code>--version -v</code> now prints some configuration information, in
particular what compile-time optional features are enabled, and the
paths of various directories.</p>
</li>
<li>
<p>Build users have their supplementary groups set correctly.</p>
</li>
</ul>
<p>This release has contributions from Eelco Dolstra, Guillaume Maudoux,
Iwan Aucamp, Jaka Hudoklin, Kirill Elagin, Ludovic Courtès, Manolis
Ragkousis, Nicolas B. Pierron and Shea Levy.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="release-19-2015-06-12"><a class="header" href="#release-19-2015-06-12">Release 1.9 (2015-06-12)</a></h1>
<p>In addition to the usual bug fixes, this release has the following new
features:</p>
<ul>
<li>
<p>Signed binary cache support. You can enable signature checking by
adding the following to <code>nix.conf</code>:</p>
<pre><code>signed-binary-caches = *
binary-cache-public-keys = cache.nixos.org-1:6NCHdD59X431o0gWypbMrAURkbJ16ZPMQFGspcDShjY=
</code></pre>
<p>This will prevent Nix from downloading any binary from the cache
that is not signed by one of the keys listed in
<code>binary-cache-public-keys</code>.</p>
<p>Signature checking is only supported if you built Nix with the
<code>libsodium</code> package.</p>
<p>Note that while Nix has had experimental support for signed binary
caches since version 1.7, this release changes the signature format
in a backwards-incompatible way.</p>
</li>
<li>
<p>Automatic downloading of Nix expression tarballs. In various places,
you can now specify the URL of a tarball containing Nix expressions
(such as Nixpkgs), which will be downloaded and unpacked
automatically. For example:</p>
<ul>
<li>
<p>In <code>nix-env</code>:</p>
<pre><code>$ nix-env -f https://github.com/NixOS/nixpkgs-channels/archive/nixos-14.12.tar.gz -iA firefox
</code></pre>
<p>This installs Firefox from the latest tested and built revision
of the NixOS 14.12 channel.</p>
</li>
<li>
<p>In <code>nix-build</code> and <code>nix-shell</code>:</p>
<pre><code>$ nix-build https://github.com/NixOS/nixpkgs/archive/master.tar.gz -A hello
</code></pre>
<p>This builds GNU Hello from the latest revision of the Nixpkgs
master branch.</p>
</li>
<li>
<p>In the Nix search path (as specified via <code>NIX_PATH</code> or <code>-I</code>).
For example, to start a shell containing the Pan package from a
specific version of Nixpkgs:</p>
<pre><code>$ nix-shell -p pan -I nixpkgs=https://github.com/NixOS/nixpkgs-channels/archive/8a3eea054838b55aca962c3fbde9c83c102b8bf2.tar.gz
</code></pre>
</li>
<li>
<p>In <code>nixos-rebuild</code> (on NixOS):</p>
<pre><code>$ nixos-rebuild test -I nixpkgs=https://github.com/NixOS/nixpkgs-channels/archive/nixos-unstable.tar.gz
</code></pre>
</li>
<li>
<p>In Nix expressions, via the new builtin function <code>fetchTarball</code>:</p>
<pre><code>with import (fetchTarball https://github.com/NixOS/nixpkgs-channels/archive/nixos-14.12.tar.gz) {}; …
</code></pre>
<p>(This is not allowed in restricted mode.)</p>
</li>
</ul>
</li>
<li>
<p><code>nix-shell</code> improvements:</p>
<ul>
<li>
<p><code>nix-shell</code> now has a flag <code>--run</code> to execute a command in the
<code>nix-shell</code> environment, e.g. <code>nix-shell --run make</code>. This is
like the existing <code>--command</code> flag, except that it uses a
non-interactive shell (ensuring that hitting Ctrl-C won’t drop
you into the child shell).</p>
</li>
<li>
<p><code>nix-shell</code> can now be used as a <code>#!</code>-interpreter. This allows
you to write scripts that dynamically fetch their own
dependencies. For example, here is a Haskell script that, when
invoked, first downloads GHC and the Haskell packages on which
it depends:</p>
<pre><code>#! /usr/bin/env nix-shell
#! nix-shell -i runghc -p haskellPackages.ghc haskellPackages.HTTP

import Network.HTTP

main = do
  resp &lt;- Network.HTTP.simpleHTTP (getRequest &quot;http://nixos.org/&quot;)
  body &lt;- getResponseBody resp
  print (take 100 body)
</code></pre>
<p>Of course, the dependencies are cached in the Nix store, so the
second invocation of this script will be much faster.</p>
</li>
</ul>
</li>
<li>
<p>Chroot improvements:</p>
<ul>
<li>
<p>Chroot builds are now supported on Mac OS X (using its sandbox
mechanism).</p>
</li>
<li>
<p>If chroots are enabled, they are now used for all derivations,
including fixed-output derivations (such as <code>fetchurl</code>). The
latter do have network access, but can no longer access the host
filesystem. If you need the old behaviour, you can set the
option <code>build-use-chroot</code> to <code>relaxed</code>.</p>
</li>
<li>
<p>On Linux, if chroots are enabled, builds are performed in a
private PID namespace once again. (This functionality was lost
in Nix 1.8.)</p>
</li>
<li>
<p>Store paths listed in <code>build-chroot-dirs</code> are now automatically
expanded to their closure. For instance, if you want
<code>/nix/store/…-bash/bin/sh</code> mounted in your chroot as <code>/bin/sh</code>,
you only need to say <code>build-chroot-dirs = /bin/sh=/nix/store/…-bash/bin/sh</code>; it is no longer necessary to
specify the dependencies of Bash.</p>
</li>
</ul>
</li>
<li>
<p>The new derivation attribute <code>passAsFile</code> allows you to specify that
the contents of derivation attributes should be passed via files
rather than environment variables. This is useful if you need to
pass very long strings that exceed the size limit of the
environment. The Nixpkgs function <code>writeTextFile</code> uses this.</p>
</li>
<li>
<p>You can now use <code>~</code> in Nix file names to refer to your home
directory, e.g. <code>import ~/.nixpkgs/config.nix</code>.</p>
</li>
<li>
<p>Nix has a new option <code>restrict-eval</code> that allows limiting what paths
the Nix evaluator has access to. By passing <code>--option restrict-eval true</code> to Nix, the evaluator will throw an exception if an attempt is
made to access any file outside of the Nix search path. This is
primarily intended for Hydra to ensure that a Hydra jobset only
refers to its declared inputs (and is therefore reproducible).</p>
</li>
<li>
<p><code>nix-env</code> now only creates a new “generation” symlink in
<code>/nix/var/nix/profiles</code> if something actually changed.</p>
</li>
<li>
<p>The environment variable <code>NIX_PAGER</code> can now be set to override
<code>PAGER</code>. You can set it to <code>cat</code> to disable paging for Nix commands
only.</p>
</li>
<li>
<p>Failing <code>&lt;...&gt;</code> lookups now show position information.</p>
</li>
<li>
<p>Improved Boehm GC use: we disabled scanning for interior pointers,
which should reduce the “<code>Repeated allocation of very large block</code>” warnings and associated retention
of memory.</p>
</li>
</ul>
<p>This release has contributions from aszlig, Benjamin Staffin, Charles
Strahan, Christian Theune, Daniel Hahler, Danylo Hlynskyi Daniel
Peebles, Dan Peebles, Domen Kožar, Eelco Dolstra, Harald van Dijk, Hoang
Xuan Phu, Jaka Hudoklin, Jeff Ramnani, j-keck, Linquize, Luca Bruno,
Michael Merickel, Oliver Dunkl, Rob Vermaas, Rok Garbas, Shea Levy,
Tobias Geerinckx-Rice and William A. Kennington III.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="release-18-2014-12-14"><a class="header" href="#release-18-2014-12-14">Release 1.8 (2014-12-14)</a></h1>
<ul>
<li>
<p>Breaking change: to address a race condition, the remote build hook
mechanism now uses <code>nix-store --serve</code> on the remote machine. This requires build slaves to be
updated to Nix 1.8.</p>
</li>
<li>
<p>Nix now uses HTTPS instead of HTTP to access the default binary
cache, <code>cache.nixos.org</code>.</p>
</li>
<li>
<p><code>nix-env</code> selectors are now regular expressions. For instance, you
can do</p>
<pre><code>$ nix-env -qa '.*zip.*'
</code></pre>
<p>to query all packages with a name containing <code>zip</code>.</p>
</li>
<li>
<p><code>nix-store --read-log</code> can now fetch remote build logs. If a build
log is not available locally, then ‘nix-store -l’ will now try to
download it from the servers listed in the ‘log-servers’ option in
nix.conf. For instance, if you have the configuration option</p>
<pre><code>log-servers = http://hydra.nixos.org/log
</code></pre>
<p>then it will try to get logs from <code>http://hydra.nixos.org/log/base name of the store path</code>. This allows you to do things like:</p>
<pre><code>$ nix-store -l $(which xterm)
</code></pre>
<p>and get a log even if <code>xterm</code> wasn't built locally.</p>
</li>
<li>
<p>New builtin functions: <code>attrValues</code>, <code>deepSeq</code>, <code>fromJSON</code>,
<code>readDir</code>, <code>seq</code>.</p>
</li>
<li>
<p><code>nix-instantiate --eval</code> now has a <code>--json</code> flag to print the
resulting value in JSON format.</p>
</li>
<li>
<p><code>nix-copy-closure</code> now uses <code>nix-store --serve</code> on the remote side
to send or receive closures. This fixes a race condition between
<code>nix-copy-closure</code> and the garbage collector.</p>
</li>
<li>
<p>Derivations can specify the new special attribute
<code>allowedRequisites</code>, which has a similar meaning to
<code>allowedReferences</code>. But instead of only enforcing to explicitly
specify the immediate references, it requires the derivation to
specify all the dependencies recursively (hence the name,
requisites) that are used by the resulting output.</p>
</li>
<li>
<p>On Mac OS X, Nix now handles case collisions when importing closures
from case-sensitive file systems. This is mostly useful for running
NixOps on Mac OS X.</p>
</li>
<li>
<p>The Nix daemon has new configuration options <code>allowed-users</code>
(specifying the users and groups that are allowed to connect to the
daemon) and <code>trusted-users</code> (specifying the users and groups that
can perform privileged operations like specifying untrusted binary
caches).</p>
</li>
<li>
<p>The configuration option <code>build-cores</code> now defaults to the number of
available CPU cores.</p>
</li>
<li>
<p>Build users are now used by default when Nix is invoked as root.
This prevents builds from accidentally running as root.</p>
</li>
<li>
<p>Nix now includes systemd units and Upstart jobs.</p>
</li>
<li>
<p>Speed improvements to <code>nix-store --optimise</code>.</p>
</li>
<li>
<p>Language change: the <code>==</code> operator now ignores string contexts (the
“dependencies” of a string).</p>
</li>
<li>
<p>Nix now filters out Nix-specific ANSI escape sequences on standard
error. They are supposed to be invisible, but some terminals show
them anyway.</p>
</li>
<li>
<p>Various commands now automatically pipe their output into the pager
as specified by the <code>PAGER</code> environment variable.</p>
</li>
<li>
<p>Several improvements to reduce memory consumption in the evaluator.</p>
</li>
</ul>
<p>This release has contributions from Adam Szkoda, Aristid Breitkreuz, Bob
van der Linden, Charles Strahan, darealshinji, Eelco Dolstra, Gergely
Risko, Joel Taylor, Ludovic Courtès, Marko Durkovic, Mikey Ariel, Paul
Colomiets, Ricardo M. Correia, Ricky Elrod, Robert Helgesson, Rob
Vermaas, Russell O'Connor, Shea Levy, Shell Turner, Sönke Hahn, Steve
Purcell, Vladimír Čunát and Wout Mertens.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="release-17-2014-04-11"><a class="header" href="#release-17-2014-04-11">Release 1.7 (2014-04-11)</a></h1>
<p>In addition to the usual bug fixes, this release has the following new
features:</p>
<ul>
<li>
<p>Antiquotation is now allowed inside of quoted attribute names (e.g.
<code>set.&quot;${foo}&quot;</code>). In the case where the attribute name is just a
single antiquotation, the quotes can be dropped (e.g. the above
example can be written <code>set.${foo}</code>). If an attribute name inside of
a set declaration evaluates to <code>null</code> (e.g. <code>{ ${null} = false; }</code>),
then that attribute is not added to the set.</p>
</li>
<li>
<p>Experimental support for cryptographically signed binary caches. See
<a href="https://github.com/NixOS/nix/commit/0fdf4da0e979f992db75cc17376e455ddc5a96d8">the commit for
details</a>.</p>
</li>
<li>
<p>An experimental new substituter, <code>download-via-ssh</code>, that fetches
binaries from remote machines via SSH. Specifying the flags
<code>--option use-ssh-substituter true --option ssh-substituter-hosts user@hostname</code> will cause Nix to download binaries from the
specified machine, if it has them.</p>
</li>
<li>
<p><code>nix-store -r</code> and <code>nix-build</code> have a new flag, <code>--check</code>, that
builds a previously built derivation again, and prints an error
message if the output is not exactly the same. This helps to verify
whether a derivation is truly deterministic. For example:</p>
<pre><code>$ nix-build '&lt;nixpkgs&gt;' -A patchelf
…
$ nix-build '&lt;nixpkgs&gt;' -A patchelf --check
…
error: derivation `/nix/store/1ipvxs…-patchelf-0.6' may not be deterministic:
  hash mismatch in output `/nix/store/4pc1dm…-patchelf-0.6.drv'
</code></pre>
</li>
<li>
<p>The <code>nix-instantiate</code> flags <code>--eval-only</code> and <code>--parse-only</code> have
been renamed to <code>--eval</code> and <code>--parse</code>, respectively.</p>
</li>
<li>
<p><code>nix-instantiate</code>, <code>nix-build</code> and <code>nix-shell</code> now have a flag
<code>--expr</code> (or <code>-E</code>) that allows you to specify the expression to be
evaluated as a command line argument. For instance, <code>nix-instantiate --eval -E '1 + 2'</code> will print <code>3</code>.</p>
</li>
<li>
<p><code>nix-shell</code> improvements:</p>
<ul>
<li>
<p>It has a new flag, <code>--packages</code> (or <code>-p</code>), that sets up a build
environment containing the specified packages from Nixpkgs. For
example, the command</p>
<pre><code>$ nix-shell -p sqlite xorg.libX11 hello
</code></pre>
<p>will start a shell in which the given packages are present.</p>
</li>
<li>
<p>It now uses <code>shell.nix</code> as the default expression, falling back
to <code>default.nix</code> if the former doesn’t exist. This makes it
convenient to have a <code>shell.nix</code> in your project to set up a
nice development environment.</p>
</li>
<li>
<p>It evaluates the derivation attribute <code>shellHook</code>, if set. Since
<code>stdenv</code> does not normally execute this hook, it allows you to
do <code>nix-shell</code>-specific setup.</p>
</li>
<li>
<p>It preserves the user’s timezone setting.</p>
</li>
</ul>
</li>
<li>
<p>In chroots, Nix now sets up a <code>/dev</code> containing only a minimal set
of devices (such as <code>/dev/null</code>). Note that it only does this if you
<em>don’t</em> have <code>/dev</code> listed in your <code>build-chroot-dirs</code> setting;
otherwise, it will bind-mount the <code>/dev</code> from outside the chroot.</p>
<p>Similarly, if you don’t have <code>/dev/pts</code> listed in
<code>build-chroot-dirs</code>, Nix will mount a private <code>devpts</code> filesystem on
the chroot’s <code>/dev/pts</code>.</p>
</li>
<li>
<p>New built-in function: <code>builtins.toJSON</code>, which returns a JSON
representation of a value.</p>
</li>
<li>
<p><code>nix-env -q</code> has a new flag <code>--json</code> to print a JSON representation
of the installed or available packages.</p>
</li>
<li>
<p><code>nix-env</code> now supports meta attributes with more complex values,
such as attribute sets.</p>
</li>
<li>
<p>The <code>-A</code> flag now allows attribute names with dots in them, e.g.</p>
<pre><code>$ nix-instantiate --eval '&lt;nixos&gt;' -A 'config.systemd.units.&quot;nscd.service&quot;.text'
</code></pre>
</li>
<li>
<p>The <code>--max-freed</code> option to <code>nix-store --gc</code> now accepts a unit
specifier. For example, <code>nix-store --gc --max-freed 1G</code> will free up to 1 gigabyte of disk space.</p>
</li>
<li>
<p><code>nix-collect-garbage</code> has a new flag <code>--delete-older-than</code> <em>N</em><code>d</code>,
which deletes all user environment generations older than <em>N</em> days.
Likewise, <code>nix-env --delete-generations</code> accepts a <em>N</em><code>d</code> age limit.</p>
</li>
<li>
<p>Nix now heuristically detects whether a build failure was due to a
disk-full condition. In that case, the build is not flagged as
“permanently failed”. This is mostly useful for Hydra, which needs
to distinguish between permanent and transient build failures.</p>
</li>
<li>
<p>There is a new symbol <code>__curPos</code> that expands to an attribute set
containing its file name and line and column numbers, e.g. <code>{ file = &quot;foo.nix&quot;; line = 10; column = 5; }</code>. There also is a new builtin function,
<code>unsafeGetAttrPos</code>, that returns the position of an attribute. This
is used by Nixpkgs to provide location information in error
messages, e.g.</p>
<pre><code>$ nix-build '&lt;nixpkgs&gt;' -A libreoffice --argstr system x86_64-darwin
error: the package ‘libreoffice-4.0.5.2’ in ‘.../applications/office/libreoffice/default.nix:263’
  is not supported on ‘x86_64-darwin’
</code></pre>
</li>
<li>
<p>The garbage collector is now more concurrent with other Nix
processes because it releases certain locks earlier.</p>
</li>
<li>
<p>The binary tarball installer has been improved. You can now install
Nix by running:</p>
<pre><code>$ bash &lt;(curl -L https://nixos.org/nix/install)
</code></pre>
</li>
<li>
<p>More evaluation errors include position information. For instance,
selecting a missing attribute will print something like</p>
<pre><code>error: attribute `nixUnstabl' missing, at /etc/nixos/configurations/misc/eelco/mandark.nix:216:15
</code></pre>
</li>
<li>
<p>The command <code>nix-setuid-helper</code> is gone.</p>
</li>
<li>
<p>Nix no longer uses Automake, but instead has a non-recursive, GNU
Make-based build system.</p>
</li>
<li>
<p>All installed libraries now have the prefix <code>libnix</code>. In particular,
this gets rid of <code>libutil</code>, which could clash with libraries with
the same name from other packages.</p>
</li>
<li>
<p>Nix now requires a compiler that supports C++11.</p>
</li>
</ul>
<p>This release has contributions from Danny Wilson, Domen Kožar, Eelco
Dolstra, Ian-Woo Kim, Ludovic Courtès, Maxim Ivanov, Petr Rockai,
Ricardo M. Correia and Shea Levy.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="release-161-2013-10-28"><a class="header" href="#release-161-2013-10-28">Release 1.6.1 (2013-10-28)</a></h1>
<p>This is primarily a bug fix release. Changes of interest are:</p>
<ul>
<li>
<p>Nix 1.6 accidentally changed the semantics of antiquoted paths in
strings, such as <code>&quot;${/foo}/bar&quot;</code>. This release reverts to the Nix
1.5.3 behaviour.</p>
</li>
<li>
<p>Previously, Nix optimised expressions such as <code>&quot;${expr}&quot;</code> to <em>expr</em>.
Thus it neither checked whether <em>expr</em> could be coerced to a string,
nor applied such coercions. This meant that <code>&quot;${123}&quot;</code> evaluatued to
<code>123</code>, and <code>&quot;${./foo}&quot;</code> evaluated to <code>./foo</code> (even though <code>&quot;${./foo} &quot;</code> evaluates to <code>&quot;/nix/store/hash-foo &quot;</code>). Nix now checks the type
of antiquoted expressions and applies coercions.</p>
</li>
<li>
<p>Nix now shows the exact position of undefined variables. In
particular, undefined variable errors in a <code>with</code> previously didn't
show <em>any</em> position information, so this makes it a lot easier to
fix such errors.</p>
</li>
<li>
<p>Undefined variables are now treated consistently. Previously, the
<code>tryEval</code> function would catch undefined variables inside a <code>with</code>
but not outside. Now <code>tryEval</code> never catches undefined variables.</p>
</li>
<li>
<p>Bash completion in <code>nix-shell</code> now works correctly.</p>
</li>
<li>
<p>Stack traces are less verbose: they no longer show calls to builtin
functions and only show a single line for each derivation on the
call stack.</p>
</li>
<li>
<p>New built-in function: <code>builtins.typeOf</code>, which returns the type of
its argument as a string.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="release-16-2013-09-10"><a class="header" href="#release-16-2013-09-10">Release 1.6 (2013-09-10)</a></h1>
<p>In addition to the usual bug fixes, this release has several new
features:</p>
<ul>
<li>
<p>The command <code>nix-build --run-env</code> has been renamed to <code>nix-shell</code>.</p>
</li>
<li>
<p><code>nix-shell</code> now sources <code>$stdenv/setup</code> <em>inside</em> the interactive
shell, rather than in a parent shell. This ensures that shell
functions defined by <code>stdenv</code> can be used in the interactive shell.</p>
</li>
<li>
<p><code>nix-shell</code> has a new flag <code>--pure</code> to clear the environment, so you
get an environment that more closely corresponds to the “real” Nix
build.</p>
</li>
<li>
<p><code>nix-shell</code> now sets the shell prompt (<code>PS1</code>) to ensure that Nix
shells are distinguishable from your regular shells.</p>
</li>
<li>
<p><code>nix-env</code> no longer requires a <code>*</code> argument to match all packages,
so <code>nix-env -qa</code> is equivalent to <code>nix-env -qa '*'</code>.</p>
</li>
<li>
<p><code>nix-env -i</code> has a new flag <code>--remove-all</code> (<code>-r</code>) to remove all
previous packages from the profile. This makes it easier to do
declarative package management similar to NixOS’s
<code>environment.systemPackages</code>. For instance, if you have a
specification <code>my-packages.nix</code> like this:</p>
<pre><code>with import &lt;nixpkgs&gt; {};
[ thunderbird
  geeqie
  ...
]
</code></pre>
<p>then after any change to this file, you can run:</p>
<pre><code>$ nix-env -f my-packages.nix -ir
</code></pre>
<p>to update your profile to match the specification.</p>
</li>
<li>
<p>The ‘<code>with</code>’ language construct is now more lazy. It only evaluates
its argument if a variable might actually refer to an attribute in
the argument. For instance, this now works:</p>
<pre><code>let
  pkgs = with pkgs; { foo = &quot;old&quot;; bar = foo; } // overrides;
  overrides = { foo = &quot;new&quot;; };
in pkgs.bar
</code></pre>
<p>This evaluates to <code>&quot;new&quot;</code>, while previously it gave an “infinite
recursion” error.</p>
</li>
<li>
<p>Nix now has proper integer arithmetic operators. For instance, you
can write <code>x + y</code> instead of <code>builtins.add x y</code>, or <code>x &lt; y</code> instead of <code>builtins.lessThan x y</code>. The comparison operators also
work on strings.</p>
</li>
<li>
<p>On 64-bit systems, Nix integers are now 64 bits rather than 32 bits.</p>
</li>
<li>
<p>When using the Nix daemon, the <code>nix-daemon</code> worker process now runs
on the same CPU as the client, on systems that support setting CPU
affinity. This gives a significant speedup on some systems.</p>
</li>
<li>
<p>If a stack overflow occurs in the Nix evaluator, you now get a
proper error message (rather than “Segmentation fault”) on some
systems.</p>
</li>
<li>
<p>In addition to directories, you can now bind-mount regular files in
chroots through the (now misnamed) option <code>build-chroot-dirs</code>.</p>
</li>
</ul>
<p>This release has contributions from Domen Kožar, Eelco Dolstra, Florian
Friesdorf, Gergely Risko, Ivan Kozik, Ludovic Courtès and Shea Levy.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="release-152-2013-05-13"><a class="header" href="#release-152-2013-05-13">Release 1.5.2 (2013-05-13)</a></h1>
<p>This is primarily a bug fix release. It has contributions from Eelco
Dolstra, Lluís Batlle i Rossell and Shea Levy.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="release-15-2013-02-27"><a class="header" href="#release-15-2013-02-27">Release 1.5 (2013-02-27)</a></h1>
<p>This is a brown paper bag release to fix a regression introduced by the
hard link security fix in 1.4.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="release-14-2013-02-26"><a class="header" href="#release-14-2013-02-26">Release 1.4 (2013-02-26)</a></h1>
<p>This release fixes a security bug in multi-user operation. It was
possible for derivations to cause the mode of files outside of the Nix
store to be changed to 444 (read-only but world-readable) by creating
hard links to those files
(<a href="https://github.com/NixOS/nix/commit/5526a282b5b44e9296e61e07d7d2626a79141ac4">details</a>).</p>
<p>There are also the following improvements:</p>
<ul>
<li>
<p>New built-in function: <code>builtins.hashString</code>.</p>
</li>
<li>
<p>Build logs are now stored in <code>/nix/var/log/nix/drvs/XX/</code>, where <em>XX</em>
is the first two characters of the derivation. This is useful on
machines that keep a lot of build logs (such as Hydra servers).</p>
</li>
<li>
<p>The function <code>corepkgs/fetchurl</code> can now make the downloaded file
executable. This will allow getting rid of all bootstrap binaries in
the Nixpkgs source tree.</p>
</li>
<li>
<p>Language change: The expression <code>&quot;${./path} ...&quot;</code> now evaluates to a string instead of a path.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="release-13-2013-01-04"><a class="header" href="#release-13-2013-01-04">Release 1.3 (2013-01-04)</a></h1>
<p>This is primarily a bug fix release. When this version is first run on
Linux, it removes any immutable bits from the Nix store and increases
the schema version of the Nix store. (The previous release removed
support for setting the immutable bit; this release clears any remaining
immutable bits to make certain operations more efficient.)</p>
<p>This release has contributions from Eelco Dolstra and Stuart
Pernsteiner.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="release-12-2012-12-06"><a class="header" href="#release-12-2012-12-06">Release 1.2 (2012-12-06)</a></h1>
<p>This release has the following improvements and changes:</p>
<ul>
<li>
<p>Nix has a new binary substituter mechanism: the <em>binary cache</em>. A
binary cache contains pre-built binaries of Nix packages. Whenever
Nix wants to build a missing Nix store path, it will check a set of
binary caches to see if any of them has a pre-built binary of that
path. The configuration setting <code>binary-caches</code> contains a list of
URLs of binary caches. For instance, doing</p>
<pre><code>$ nix-env -i thunderbird --option binary-caches http://cache.nixos.org
</code></pre>
<p>will install Thunderbird and its dependencies, using the available
pre-built binaries in <a href="http://cache.nixos.org">http://cache.nixos.org</a>. The main advantage
over the old “manifest”-based method of getting pre-built binaries
is that you don’t have to worry about your manifest being in sync
with the Nix expressions you’re installing from; i.e., you don’t
need to run <code>nix-pull</code> to update your manifest. It’s also more
scalable because you don’t need to redownload a giant manifest file
every time.</p>
<p>A Nix channel can provide a binary cache URL that will be used
automatically if you subscribe to that channel. If you use the
Nixpkgs or NixOS channels (<a href="http://nixos.org/channels">http://nixos.org/channels</a>) you
automatically get the cache <a href="http://cache.nixos.org">http://cache.nixos.org</a>.</p>
<p>Binary caches are created using <code>nix-push</code>. For details on the
operation and format of binary caches, see the <code>nix-push</code> manpage.
More details are provided in <a href="https://nixos.org/nix-dev/2012-September/009826.html">this nix-dev
posting</a>.</p>
</li>
<li>
<p>Multiple output support should now be usable. A derivation can
declare that it wants to produce multiple store paths by saying
something like</p>
<pre><code>outputs = [ &quot;lib&quot; &quot;headers&quot; &quot;doc&quot; ];
</code></pre>
<p>This will cause Nix to pass the intended store path of each output
to the builder through the environment variables <code>lib</code>, <code>headers</code>
and <code>doc</code>. Other packages can refer to a specific output by
referring to <code>pkg.output</code>, e.g.</p>
<pre><code>buildInputs = [ pkg.lib pkg.headers ];
</code></pre>
<p>If you install a package with multiple outputs using <code>nix-env</code>, each
output path will be symlinked into the user environment.</p>
</li>
<li>
<p>Dashes are now valid as part of identifiers and attribute names.</p>
</li>
<li>
<p>The new operation <code>nix-store --repair-path</code> allows corrupted or
missing store paths to be repaired by redownloading them. <code>nix-store --verify --check-contents --repair</code> will scan and repair all paths in the Nix store.
Similarly, <code>nix-env</code>, <code>nix-build</code>, <code>nix-instantiate</code> and <code>nix-store --realise</code> have a <code>--repair</code> flag to detect and fix bad paths by
rebuilding or redownloading them.</p>
</li>
<li>
<p>Nix no longer sets the immutable bit on files in the Nix store.
Instead, the recommended way to guard the Nix store against
accidental modification on Linux is to make it a read-only bind
mount, like this:</p>
<pre><code>$ mount --bind /nix/store /nix/store
$ mount -o remount,ro,bind /nix/store
</code></pre>
<p>Nix will automatically make <code>/nix/store</code> writable as needed (using a
private mount namespace) to allow modifications.</p>
</li>
<li>
<p>Store optimisation (replacing identical files in the store with hard
links) can now be done automatically every time a path is added to
the store. This is enabled by setting the configuration option
<code>auto-optimise-store</code> to <code>true</code> (disabled by default).</p>
</li>
<li>
<p>Nix now supports <code>xz</code> compression for NARs in addition to <code>bzip2</code>.
It compresses about 30% better on typical archives and decompresses
about twice as fast.</p>
</li>
<li>
<p>Basic Nix expression evaluation profiling: setting the environment
variable <code>NIX_COUNT_CALLS</code> to <code>1</code> will cause Nix to print how many
times each primop or function was executed.</p>
</li>
<li>
<p>New primops: <code>concatLists</code>, <code>elem</code>, <code>elemAt</code> and <code>filter</code>.</p>
</li>
<li>
<p>The command <code>nix-copy-closure</code> has a new flag <code>--use-substitutes</code>
(<code>-s</code>) to download missing paths on the target machine using the
substitute mechanism.</p>
</li>
<li>
<p>The command <code>nix-worker</code> has been renamed to <code>nix-daemon</code>. Support
for running the Nix worker in “slave” mode has been removed.</p>
</li>
<li>
<p>The <code>--help</code> flag of every Nix command now invokes <code>man</code>.</p>
</li>
<li>
<p>Chroot builds are now supported on systemd machines.</p>
</li>
</ul>
<p>This release has contributions from Eelco Dolstra, Florian Friesdorf,
Mats Erik Andersson and Shea Levy.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="release-11-2012-07-18"><a class="header" href="#release-11-2012-07-18">Release 1.1 (2012-07-18)</a></h1>
<p>This release has the following improvements:</p>
<ul>
<li>
<p>On Linux, when doing a chroot build, Nix now uses various namespace
features provided by the Linux kernel to improve build isolation.
Namely:</p>
<ul>
<li>
<p>The private network namespace ensures that builders cannot talk
to the outside world (or vice versa): each build only sees a
private loopback interface. This also means that two concurrent
builds can listen on the same port (e.g. as part of a test)
without conflicting with each other.</p>
</li>
<li>
<p>The PID namespace causes each build to start as PID 1. Processes
outside of the chroot are not visible to those on the inside. On
the other hand, processes inside the chroot <em>are</em> visible from
the outside (though with different PIDs).</p>
</li>
<li>
<p>The IPC namespace prevents the builder from communicating with
outside processes using SysV IPC mechanisms (shared memory,
message queues, semaphores). It also ensures that all IPC
objects are destroyed when the builder exits.</p>
</li>
<li>
<p>The UTS namespace ensures that builders see a hostname of
<code>localhost</code> rather than the actual hostname.</p>
</li>
<li>
<p>The private mount namespace was already used by Nix to ensure
that the bind-mounts used to set up the chroot are cleaned up
automatically.</p>
</li>
</ul>
</li>
<li>
<p>Build logs are now compressed using <code>bzip2</code>. The command <code>nix-store -l</code> decompresses them on the fly. This can be disabled by setting
the option <code>build-compress-log</code> to <code>false</code>.</p>
</li>
<li>
<p>The creation of build logs in <code>/nix/var/log/nix/drvs</code> can be
disabled by setting the new option <code>build-keep-log</code> to <code>false</code>. This
is useful, for instance, for Hydra build machines.</p>
</li>
<li>
<p>Nix now reserves some space in <code>/nix/var/nix/db/reserved</code> to ensure
that the garbage collector can run successfully if the disk is full.
This is necessary because SQLite transactions fail if the disk is
full.</p>
</li>
<li>
<p>Added a basic <code>fetchurl</code> function. This is not intended to replace
the <code>fetchurl</code> in Nixpkgs, but is useful for bootstrapping; e.g., it
will allow us to get rid of the bootstrap binaries in the Nixpkgs
source tree and download them instead. You can use it by doing
<code>import &lt;nix/fetchurl.nix&gt; { url = url; sha256 = &quot;hash&quot;; }</code>. (Shea Levy)</p>
</li>
<li>
<p>Improved RPM spec file. (Michel Alexandre Salim)</p>
</li>
<li>
<p>Support for on-demand socket-based activation in the Nix daemon with
<code>systemd</code>.</p>
</li>
<li>
<p>Added a manpage for nix.conf5.</p>
</li>
<li>
<p>When using the Nix daemon, the <code>-s</code> flag in <code>nix-env -qa</code> is now
much faster.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="release-10-2012-05-11"><a class="header" href="#release-10-2012-05-11">Release 1.0 (2012-05-11)</a></h1>
<p>There have been numerous improvements and bug fixes since the previous
release. Here are the most significant:</p>
<ul>
<li>
<p>Nix can now optionally use the Boehm garbage collector. This
significantly reduces the Nix evaluator’s memory footprint,
especially when evaluating large NixOS system configurations. It can
be enabled using the <code>--enable-gc</code> configure option.</p>
</li>
<li>
<p>Nix now uses SQLite for its database. This is faster and more
flexible than the old <em>ad hoc</em> format. SQLite is also used to cache
the manifests in <code>/nix/var/nix/manifests</code>, resulting in a
significant speedup.</p>
</li>
<li>
<p>Nix now has an search path for expressions. The search path is set
using the environment variable <code>NIX_PATH</code> and the <code>-I</code> command line
option. In Nix expressions, paths between angle brackets are used to
specify files that must be looked up in the search path. For
instance, the expression <code>&lt;nixpkgs/default.nix&gt;</code> looks for a file
<code>nixpkgs/default.nix</code> relative to every element in the search path.</p>
</li>
<li>
<p>The new command <code>nix-build --run-env</code> builds all dependencies of a
derivation, then starts a shell in an environment containing all
variables from the derivation. This is useful for reproducing the
environment of a derivation for development.</p>
</li>
<li>
<p>The new command <code>nix-store --verify-path</code> verifies that the contents
of a store path have not changed.</p>
</li>
<li>
<p>The new command <code>nix-store --print-env</code> prints out the environment
of a derivation in a format that can be evaluated by a shell.</p>
</li>
<li>
<p>Attribute names can now be arbitrary strings. For instance, you can
write <code>{ &quot;foo-1.2&quot; = …; &quot;bla bla&quot; = …; }.&quot;bla bla&quot;</code>.</p>
</li>
<li>
<p>Attribute selection can now provide a default value using the <code>or</code>
operator. For instance, the expression <code>x.y.z or e</code> evaluates to the
attribute <code>x.y.z</code> if it exists, and <code>e</code> otherwise.</p>
</li>
<li>
<p>The right-hand side of the <code>?</code> operator can now be an attribute
path, e.g., <code>attrs ? a.b.c</code>.</p>
</li>
<li>
<p>On Linux, Nix will now make files in the Nix store immutable on
filesystems that support it. This prevents accidental modification
of files in the store by the root user.</p>
</li>
<li>
<p>Nix has preliminary support for derivations with multiple outputs.
This is useful because it allows parts of a package to be deployed
and garbage-collected separately. For instance, development parts of
a package such as header files or static libraries would typically
not be part of the closure of an application, resulting in reduced
disk usage and installation time.</p>
</li>
<li>
<p>The Nix store garbage collector is faster and holds the global lock
for a shorter amount of time.</p>
</li>
<li>
<p>The option <code>--timeout</code> (corresponding to the configuration setting
<code>build-timeout</code>) allows you to set an absolute timeout on builds —
if a build runs for more than the given number of seconds, it is
terminated. This is useful for recovering automatically from builds
that are stuck in an infinite loop but keep producing output, and
for which <code>--max-silent-time</code> is ineffective.</p>
</li>
<li>
<p>Nix development has moved to GitHub
(<a href="https://github.com/NixOS/nix">https://github.com/NixOS/nix</a>).</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="release-016-2010-08-17"><a class="header" href="#release-016-2010-08-17">Release 0.16 (2010-08-17)</a></h1>
<p>This release has the following improvements:</p>
<ul>
<li>
<p>The Nix expression evaluator is now much faster in most cases:
typically, <a href="http://www.mail-archive.com/nix-dev@cs.uu.nl/msg04113.html">3 to 8 times compared to the old
implementation</a>.
It also uses less memory. It no longer depends on the ATerm library.</p>
</li>
<li>
<p>Support for configurable parallelism inside builders. Build scripts
have always had the ability to perform multiple build actions in
parallel (for instance, by running <code>make -j 2</code>), but this was not desirable because the number of actions to be
performed in parallel was not configurable. Nix now has an option
<code>--cores N</code> as well as a configuration setting <code>build-cores = N</code> that causes the environment variable <code>NIX_BUILD_CORES</code> to be set
to <em>N</em> when the builder is invoked. The builder can use this at its
discretion to perform a parallel build, e.g., by calling <code>make -j N</code>. In Nixpkgs, this can be enabled on a per-package basis by
setting the derivation attribute <code>enableParallelBuilding</code> to <code>true</code>.</p>
</li>
<li>
<p><code>nix-store -q</code> now supports XML output through the <code>--xml</code> flag.</p>
</li>
<li>
<p>Several bug fixes.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="release-015-2010-03-17"><a class="header" href="#release-015-2010-03-17">Release 0.15 (2010-03-17)</a></h1>
<p>This is a bug-fix release. Among other things, it fixes building on Mac
OS X (Snow Leopard), and improves the contents of <code>/etc/passwd</code> and
<code>/etc/group</code> in <code>chroot</code> builds.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="release-014-2010-02-04"><a class="header" href="#release-014-2010-02-04">Release 0.14 (2010-02-04)</a></h1>
<p>This release has the following improvements:</p>
<ul>
<li>
<p>The garbage collector now starts deleting garbage much faster than
before. It no longer determines liveness of all paths in the store,
but does so on demand.</p>
</li>
<li>
<p>Added a new operation, <code>nix-store --query --roots</code>, that shows the garbage collector roots that directly or
indirectly point to the given store paths.</p>
</li>
<li>
<p>Removed support for converting Berkeley DB-based Nix databases to
the new schema.</p>
</li>
<li>
<p>Removed the <code>--use-atime</code> and <code>--max-atime</code> garbage collector
options. They were not very useful in practice.</p>
</li>
<li>
<p>On Windows, Nix now requires Cygwin 1.7.x.</p>
</li>
<li>
<p>A few bug fixes.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="release-013-2009-11-05"><a class="header" href="#release-013-2009-11-05">Release 0.13 (2009-11-05)</a></h1>
<p>This is primarily a bug fix release. It has some new features:</p>
<ul>
<li>
<p>Syntactic sugar for writing nested attribute sets. Instead of</p>
<pre><code>{
  foo = {
    bar = 123;
    xyzzy = true;
  };
  a = { b = { c = &quot;d&quot;; }; };
}
</code></pre>
<p>you can write</p>
<pre><code>{
  foo.bar = 123;
  foo.xyzzy = true;
  a.b.c = &quot;d&quot;;
}
</code></pre>
<p>This is useful, for instance, in NixOS configuration files.</p>
</li>
<li>
<p>Support for Nix channels generated by Hydra, the Nix-based
continuous build system. (Hydra generates NAR archives on the fly,
so the size and hash of these archives isn’t known in advance.)</p>
</li>
<li>
<p>Support <code>i686-linux</code> builds directly on <code>x86_64-linux</code> Nix
installations. This is implemented using the <code>personality()</code>
syscall, which causes <code>uname</code> to return <code>i686</code> in child processes.</p>
</li>
<li>
<p>Various improvements to the <code>chroot</code> support. Building in a <code>chroot</code>
works quite well now.</p>
</li>
<li>
<p>Nix no longer blocks if it tries to build a path and another process
is already building the same path. Instead it tries to build another
buildable path first. This improves parallelism.</p>
</li>
<li>
<p>Support for large (&gt; 4 GiB) files in NAR archives.</p>
</li>
<li>
<p>Various (performance) improvements to the remote build mechanism.</p>
</li>
<li>
<p>New primops: <code>builtins.addErrorContext</code> (to add a string to stack
traces — useful for debugging), <code>builtins.isBool</code>,
<code>builtins.isString</code>, <code>builtins.isInt</code>, <code>builtins.intersectAttrs</code>.</p>
</li>
<li>
<p>OpenSolaris support (Sander van der Burg).</p>
</li>
<li>
<p>Stack traces are no longer displayed unless the <code>--show-trace</code>
option is used.</p>
</li>
<li>
<p>The scoping rules for <code>inherit (e) ...</code> in recursive attribute sets have changed. The expression
<em>e</em> can now refer to the attributes defined in the containing set.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="release-012-2008-11-20"><a class="header" href="#release-012-2008-11-20">Release 0.12 (2008-11-20)</a></h1>
<ul>
<li>
<p>Nix no longer uses Berkeley DB to store Nix store metadata. The
principal advantages of the new storage scheme are: it works
properly over decent implementations of NFS (allowing Nix stores to
be shared between multiple machines); no recovery is needed when a
Nix process crashes; no write access is needed for read-only
operations; no more running out of Berkeley DB locks on certain
operations.</p>
<p>You still need to compile Nix with Berkeley DB support if you want
Nix to automatically convert your old Nix store to the new schema.
If you don’t need this, you can build Nix with the <code>configure</code>
option <code>--disable-old-db-compat</code>.</p>
<p>After the automatic conversion to the new schema, you can delete the
old Berkeley DB files:</p>
<pre><code>$ cd /nix/var/nix/db
$ rm __db* log.* derivers references referrers reserved validpaths DB_CONFIG
</code></pre>
<p>The new metadata is stored in the directories <code>/nix/var/nix/db/info</code>
and <code>/nix/var/nix/db/referrer</code>. Though the metadata is stored in
human-readable plain-text files, they are not intended to be
human-editable, as Nix is rather strict about the format.</p>
<p>The new storage schema may or may not require less disk space than
the Berkeley DB environment, mostly depending on the cluster size of
your file system. With 1 KiB clusters (which seems to be the <code>ext3</code>
default nowadays) it usually takes up much less space.</p>
</li>
<li>
<p>There is a new substituter that copies paths directly from other
(remote) Nix stores mounted somewhere in the filesystem. For
instance, you can speed up an installation by mounting some remote
Nix store that already has the packages in question via NFS or
<code>sshfs</code>. The environment variable <code>NIX_OTHER_STORES</code> specifies the
locations of the remote Nix directories, e.g. <code>/mnt/remote-fs/nix</code>.</p>
</li>
<li>
<p>New <code>nix-store</code> operations <code>--dump-db</code> and <code>--load-db</code> to dump and
reload the Nix database.</p>
</li>
<li>
<p>The garbage collector has a number of new options to allow only some
of the garbage to be deleted. The option <code>--max-freed N</code> tells the
collector to stop after at least <em>N</em> bytes have been deleted. The
option <code>--max-links N</code> tells it to stop after the link count on <code>/nix/store</code> has dropped
below <em>N</em>. This is useful for very large Nix stores on filesystems
with a 32000 subdirectories limit (like <code>ext3</code>). The option
<code>--use-atime</code> causes store paths to be deleted in order of ascending
last access time. This allows non-recently used stuff to be deleted.
The option <code>--max-atime time</code> specifies an upper limit to the last
accessed time of paths that may be deleted. For instance,</p>
<pre><code>    $ nix-store --gc -v --max-atime $(date +%s -d &quot;2 months ago&quot;)
</code></pre>
<p>deletes everything that hasn’t been accessed in two months.</p>
</li>
<li>
<p><code>nix-env</code> now uses optimistic profile locking when performing an
operation like installing or upgrading, instead of setting an
exclusive lock on the profile. This allows multiple <code>nix-env -i / -u / -e</code> operations on the same profile in parallel. If a <code>nix-env</code>
operation sees at the end that the profile was changed in the
meantime by another process, it will just restart. This is generally
cheap because the build results are still in the Nix store.</p>
</li>
<li>
<p>The option <code>--dry-run</code> is now supported by <code>nix-store -r</code> and
<code>nix-build</code>.</p>
</li>
<li>
<p>The information previously shown by <code>--dry-run</code> (i.e., which
derivations will be built and which paths will be substituted) is
now always shown by <code>nix-env</code>, <code>nix-store -r</code> and <code>nix-build</code>. The
total download size of substitutable paths is now also shown. For
instance, a build will show something like</p>
<pre><code>the following derivations will be built:
  /nix/store/129sbxnk5n466zg6r1qmq1xjv9zymyy7-activate-configuration.sh.drv
  /nix/store/7mzy971rdm8l566ch8hgxaf89x7lr7ik-upstart-jobs.drv
  ...
the following paths will be downloaded/copied (30.02 MiB):
  /nix/store/4m8pvgy2dcjgppf5b4cj5l6wyshjhalj-samba-3.2.4
  /nix/store/7h1kwcj29ip8vk26rhmx6bfjraxp0g4l-libunwind-0.98.6
  ...
</code></pre>
</li>
<li>
<p>Language features:</p>
<ul>
<li>
<p>@-patterns as in Haskell. For instance, in a function definition</p>
<pre><code>f = args @ {x, y, z}: ...;
</code></pre>
<p><code>args</code> refers to the argument as a whole, which is further
pattern-matched against the attribute set pattern <code>{x, y, z}</code>.</p>
</li>
<li>
<p>“<code>...</code>” (ellipsis) patterns. An attribute set pattern can now
say <code>...</code> at the end of the attribute name list to specify that
the function takes <em>at least</em> the listed attributes, while
ignoring additional attributes. For instance,</p>
<pre><code>{stdenv, fetchurl, fuse, ...}: ...
</code></pre>
<p>defines a function that accepts any attribute set that includes
at least the three listed attributes.</p>
</li>
<li>
<p>New primops: <code>builtins.parseDrvName</code> (split a package name
string like <code>&quot;nix-0.12pre12876&quot;</code> into its name and version
components, e.g. <code>&quot;nix&quot;</code> and <code>&quot;0.12pre12876&quot;</code>),
<code>builtins.compareVersions</code> (compare two version strings using
the same algorithm that <code>nix-env</code> uses), <code>builtins.length</code>
(efficiently compute the length of a list), <code>builtins.mul</code>
(integer multiplication), <code>builtins.div</code> (integer division).</p>
</li>
</ul>
</li>
<li>
<p><code>nix-prefetch-url</code> now supports <code>mirror://</code> URLs, provided that the
environment variable <code>NIXPKGS_ALL</code> points at a Nixpkgs tree.</p>
</li>
<li>
<p>Removed the commands <code>nix-pack-closure</code> and <code>nix-unpack-closure</code>.
You can do almost the same thing but much more efficiently by doing
<code>nix-store --export $(nix-store -qR paths) &gt; closure</code> and <code>nix-store --import &lt; closure</code>.</p>
</li>
<li>
<p>Lots of bug fixes, including a big performance bug in the handling
of <code>with</code>-expressions.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="release-011-2007-12-31"><a class="header" href="#release-011-2007-12-31">Release 0.11 (2007-12-31)</a></h1>
<p>Nix 0.11 has many improvements over the previous stable release. The
most important improvement is secure multi-user support. It also
features many usability enhancements and language extensions, many of
them prompted by NixOS, the purely functional Linux distribution based
on Nix. Here is an (incomplete) list:</p>
<ul>
<li>
<p>Secure multi-user support. A single Nix store can now be shared
between multiple (possible untrusted) users. This is an important
feature for NixOS, where it allows non-root users to install
software. The old setuid method for sharing a store between multiple
users has been removed. Details for setting up a multi-user store
can be found in the manual.</p>
</li>
<li>
<p>The new command <code>nix-copy-closure</code> gives you an easy and efficient
way to exchange software between machines. It copies the missing
parts of the closure of a set of store path to or from a remote
machine via <code>ssh</code>.</p>
</li>
<li>
<p>A new kind of string literal: strings between double single-quotes
(<code>''</code>) have indentation “intelligently” removed. This allows large
strings (such as shell scripts or configuration file fragments in
NixOS) to cleanly follow the indentation of the surrounding
expression. It also requires much less escaping, since <code>''</code> is less
common in most languages than <code>&quot;</code>.</p>
</li>
<li>
<p><code>nix-env</code> <code>--set</code> modifies the current generation of a profile so
that it contains exactly the specified derivation, and nothing else.
For example, <code>nix-env -p /nix/var/nix/profiles/browser --set firefox</code> lets the profile named <code>browser</code> contain just Firefox.</p>
</li>
<li>
<p><code>nix-env</code> now maintains meta-information about installed packages in
profiles. The meta-information is the contents of the <code>meta</code>
attribute of derivations, such as <code>description</code> or <code>homepage</code>. The
command <code>nix-env -q --xml --meta</code> shows all meta-information.</p>
</li>
<li>
<p><code>nix-env</code> now uses the <code>meta.priority</code> attribute of derivations to
resolve filename collisions between packages. Lower priority values
denote a higher priority. For instance, the GCC wrapper package and
the Binutils package in Nixpkgs both have a file <code>bin/ld</code>, so
previously if you tried to install both you would get a collision.
Now, on the other hand, the GCC wrapper declares a higher priority
than Binutils, so the former’s <code>bin/ld</code> is symlinked in the user
environment.</p>
</li>
<li>
<p><code>nix-env -i / -u</code>: instead of breaking package ties by version,
break them by priority and version number. That is, if there are
multiple packages with the same name, then pick the package with the
highest priority, and only use the version if there are multiple
packages with the same priority.</p>
<p>This makes it possible to mark specific versions/variant in Nixpkgs
more or less desirable than others. A typical example would be a
beta version of some package (e.g., <code>gcc-4.2.0rc1</code>) which should not
be installed even though it is the highest version, except when it
is explicitly selected (e.g., <code>nix-env -i gcc-4.2.0rc1</code>).</p>
</li>
<li>
<p><code>nix-env --set-flag</code> allows meta attributes of installed packages to
be modified. There are several attributes that can be usefully
modified, because they affect the behaviour of <code>nix-env</code> or the user
environment build script:</p>
<ul>
<li>
<p><code>meta.priority</code> can be changed to resolve filename clashes (see
above).</p>
</li>
<li>
<p><code>meta.keep</code> can be set to <code>true</code> to prevent the package from
being upgraded or replaced. Useful if you want to hang on to an
older version of a package.</p>
</li>
<li>
<p><code>meta.active</code> can be set to <code>false</code> to “disable” the package.
That is, no symlinks will be generated to the files of the
package, but it remains part of the profile (so it won’t be
garbage-collected). Set it back to <code>true</code> to re-enable the
package.</p>
</li>
</ul>
</li>
<li>
<p><code>nix-env -q</code> now has a flag <code>--prebuilt-only</code> (<code>-b</code>) that causes
<code>nix-env</code> to show only those derivations whose output is already in
the Nix store or that can be substituted (i.e., downloaded from
somewhere). In other words, it shows the packages that can be
installed “quickly”, i.e., don’t need to be built from source. The
<code>-b</code> flag is also available in <code>nix-env -i</code> and <code>nix-env -u</code> to
filter out derivations for which no pre-built binary is available.</p>
</li>
<li>
<p>The new option <code>--argstr</code> (in <code>nix-env</code>, <code>nix-instantiate</code> and
<code>nix-build</code>) is like <code>--arg</code>, except that the value is a string. For
example, <code>--argstr system i686-linux</code> is equivalent to <code>--arg system &quot;i686-linux&quot;</code> (note that <code>--argstr</code> prevents annoying quoting
around shell arguments).</p>
</li>
<li>
<p><code>nix-store</code> has a new operation <code>--read-log</code> (<code>-l</code>) <code>paths</code> that
shows the build log of the given paths.</p>
</li>
<li>
<p>Nix now uses Berkeley DB 4.5. The database is upgraded
automatically, but you should be careful not to use old versions of
Nix that still use Berkeley DB 4.4.</p>
</li>
<li>
<p>The option <code>--max-silent-time</code> (corresponding to the configuration
setting <code>build-max-silent-time</code>) allows you to set a timeout on
builds — if a build produces no output on <code>stdout</code> or <code>stderr</code> for
the given number of seconds, it is terminated. This is useful for
recovering automatically from builds that are stuck in an infinite
loop.</p>
</li>
<li>
<p><code>nix-channel</code>: each subscribed channel is its own attribute in the
top-level expression generated for the channel. This allows
disambiguation (e.g. <code>nix-env -i -A nixpkgs_unstable.firefox</code>).</p>
</li>
<li>
<p>The substitutes table has been removed from the database. This makes
operations such as <code>nix-pull</code> and <code>nix-channel --update</code> much, much
faster.</p>
</li>
<li>
<p><code>nix-pull</code> now supports bzip2-compressed manifests. This speeds up
channels.</p>
</li>
<li>
<p><code>nix-prefetch-url</code> now has a limited form of caching. This is used
by <code>nix-channel</code> to prevent unnecessary downloads when the channel
hasn’t changed.</p>
</li>
<li>
<p><code>nix-prefetch-url</code> now by default computes the SHA-256 hash of the
file instead of the MD5 hash. In calls to <code>fetchurl</code> you should pass
the <code>sha256</code> attribute instead of <code>md5</code>. You can pass either a
hexadecimal or a base-32 encoding of the hash.</p>
</li>
<li>
<p>Nix can now perform builds in an automatically generated “chroot”.
This prevents a builder from accessing stuff outside of the Nix
store, and thus helps ensure purity. This is an experimental
feature.</p>
</li>
<li>
<p>The new command <code>nix-store --optimise</code> reduces Nix store disk space usage by finding identical
files in the store and hard-linking them to each other. It typically
reduces the size of the store by something like 25-35%.</p>
</li>
<li>
<p><code>~/.nix-defexpr</code> can now be a directory, in which case the Nix
expressions in that directory are combined into an attribute set,
with the file names used as the names of the attributes. The command
<code>nix-env --import</code> (which set the <code>~/.nix-defexpr</code> symlink) is removed.</p>
</li>
<li>
<p>Derivations can specify the new special attribute
<code>allowedReferences</code> to enforce that the references in the output of
a derivation are a subset of a declared set of paths. For example,
if <code>allowedReferences</code> is an empty list, then the output must not
have any references. This is used in NixOS to check that generated
files such as initial ramdisks for booting Linux don’t have any
dependencies.</p>
</li>
<li>
<p>The new attribute <code>exportReferencesGraph</code> allows builders access to
the references graph of their inputs. This is used in NixOS for
tasks such as generating ISO-9660 images that contain a Nix store
populated with the closure of certain paths.</p>
</li>
<li>
<p>Fixed-output derivations (like <code>fetchurl</code>) can define the attribute
<code>impureEnvVars</code> to allow external environment variables to be passed
to builders. This is used in Nixpkgs to support proxy configuration,
among other things.</p>
</li>
<li>
<p>Several new built-in functions: <code>builtins.attrNames</code>,
<code>builtins.filterSource</code>, <code>builtins.isAttrs</code>, <code>builtins.isFunction</code>,
<code>builtins.listToAttrs</code>, <code>builtins.stringLength</code>, <code>builtins.sub</code>,
<code>builtins.substring</code>, <code>throw</code>, <code>builtins.trace</code>,
<code>builtins.readFile</code>.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="release-0101-2006-10-11"><a class="header" href="#release-0101-2006-10-11">Release 0.10.1 (2006-10-11)</a></h1>
<p>This release fixes two somewhat obscure bugs that occur when evaluating
Nix expressions that are stored inside the Nix store (<code>NIX-67</code>). These
do not affect most users.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="release-010-2006-10-06"><a class="header" href="#release-010-2006-10-06">Release 0.10 (2006-10-06)</a></h1>
<blockquote>
<p><strong>Note</strong></p>
<p>This version of Nix uses Berkeley DB 4.4 instead of 4.3. The database
is upgraded automatically, but you should be careful not to use old
versions of Nix that still use Berkeley DB 4.3. In particular, if you
use a Nix installed through Nix, you should run</p>
<pre><code>$ nix-store --clear-substitutes
</code></pre>
<p>first.</p>
</blockquote>
<blockquote>
<p><strong>Warning</strong></p>
<p>Also, the database schema has changed slighted to fix a performance
issue (see below). When you run any Nix 0.10 command for the first
time, the database will be upgraded automatically. This is
irreversible.</p>
</blockquote>
<ul>
<li>
<p><code>nix-env</code> usability improvements:</p>
<ul>
<li>
<p>An option <code>--compare-versions</code> (or <code>-c</code>) has been added to
<code>nix-env --query</code> to allow you to compare installed versions of packages
to available versions, or vice versa. An easy way to see if you
are up to date with what’s in your subscribed channels is
<code>nix-env -qc \*</code>.</p>
</li>
<li>
<p><code>nix-env --query</code> now takes as arguments a list of package names
about which to show information, just like <code>--install</code>, etc.:
for example, <code>nix-env -q gcc</code>. Note that to show all
derivations, you need to specify <code>\*</code>.</p>
</li>
<li>
<p><code>nix-env -i pkgname</code> will now install the highest available version of
<em>pkgname</em>, rather than installing all available versions (which
would probably give collisions) (<code>NIX-31</code>).</p>
</li>
<li>
<p><code>nix-env (-i|-u) --dry-run</code> now shows exactly which missing
paths will be built or substituted.</p>
</li>
<li>
<p><code>nix-env -qa --description</code> shows human-readable descriptions of
packages, provided that they have a <code>meta.description</code> attribute
(which most packages in Nixpkgs don’t have yet).</p>
</li>
</ul>
</li>
<li>
<p>New language features:</p>
<ul>
<li>
<p>Reference scanning (which happens after each build) is much
faster and takes a constant amount of memory.</p>
</li>
<li>
<p>String interpolation. Expressions like</p>
<pre><code>&quot;--with-freetype2-library=&quot; + freetype + &quot;/lib&quot;
</code></pre>
<p>can now be written as</p>
<pre><code>&quot;--with-freetype2-library=${freetype}/lib&quot;
</code></pre>
<p>You can write arbitrary expressions within <code>${...}</code>, not just
identifiers.</p>
</li>
<li>
<p>Multi-line string literals.</p>
</li>
<li>
<p>String concatenations can now involve derivations, as in the
example <code>&quot;--with-freetype2-library=&quot; + freetype + &quot;/lib&quot;</code>. This was not previously possible because
we need to register that a derivation that uses such a string is
dependent on <code>freetype</code>. The evaluator now properly propagates
this information. Consequently, the subpath operator (<code>~</code>) has
been deprecated.</p>
</li>
<li>
<p>Default values of function arguments can now refer to other
function arguments; that is, all arguments are in scope in the
default values (<code>NIX-45</code>).</p>
</li>
<li>
<p>Lots of new built-in primitives, such as functions for list
manipulation and integer arithmetic. See the manual for a
complete list. All primops are now available in the set
<code>builtins</code>, allowing one to test for the availability of primop
in a backwards-compatible way.</p>
</li>
<li>
<p>Real let-expressions: <code>let x = ...; ... z = ...; in ...</code>.</p>
</li>
</ul>
</li>
<li>
<p>New commands <code>nix-pack-closure</code> and <code>nix-unpack-closure</code> than can be
used to easily transfer a store path with all its dependencies to
another machine. Very convenient whenever you have some package on
your machine and you want to copy it somewhere else.</p>
</li>
<li>
<p>XML support:</p>
<ul>
<li>
<p><code>nix-env -q --xml</code> prints the installed or available packages in
an XML representation for easy processing by other tools.</p>
</li>
<li>
<p><code>nix-instantiate --eval-only --xml</code> prints an XML representation of the resulting term. (The
new flag <code>--strict</code> forces ‘deep’ evaluation of the result,
i.e., list elements and attributes are evaluated recursively.)</p>
</li>
<li>
<p>In Nix expressions, the primop <code>builtins.toXML</code> converts a term
to an XML representation. This is primarily useful for passing
structured information to builders.</p>
</li>
</ul>
</li>
<li>
<p>You can now unambiguously specify which derivation to build or
install in <code>nix-env</code>, <code>nix-instantiate</code> and <code>nix-build</code> using the
<code>--attr</code> / <code>-A</code> flags, which takes an attribute name as argument.
(Unlike symbolic package names such as <code>subversion-1.4.0</code>, attribute
names in an attribute set are unique.) For instance, a quick way to
perform a test build of a package in Nixpkgs is <code>nix-build pkgs/top-level/all-packages.nix -A foo</code>. <code>nix-env -q --attr</code> shows the attribute names corresponding to each derivation.</p>
</li>
<li>
<p>If the top-level Nix expression used by <code>nix-env</code>, <code>nix-instantiate</code>
or <code>nix-build</code> evaluates to a function whose arguments all have
default values, the function will be called automatically. Also, the
new command-line switch <code>--arg name value</code> can be used to specify function arguments on the command
line.</p>
</li>
<li>
<p><code>nix-install-package --url URL</code> allows a package to be installed directly from the given URL.</p>
</li>
<li>
<p>Nix now works behind an HTTP proxy server; just set the standard
environment variables <code>http_proxy</code>, <code>https_proxy</code>, <code>ftp_proxy</code> or
<code>all_proxy</code> appropriately. Functions such as <code>fetchurl</code> in Nixpkgs
also respect these variables.</p>
</li>
<li>
<p><code>nix-build -o symlink</code> allows the symlink to the build result to be named
something other than <code>result</code>.</p>
</li>
<li>
<p>Platform support:</p>
<ul>
<li>
<p>Support for 64-bit platforms, provided a <a href="http://bugzilla.sen.cwi.nl:8080/show_bug.cgi?id=606">suitably patched ATerm
library</a> is
used. Also, files larger than 2 GiB are now supported.</p>
</li>
<li>
<p>Added support for Cygwin (Windows, <code>i686-cygwin</code>), Mac OS X on
Intel (<code>i686-darwin</code>) and Linux on PowerPC (<code>powerpc-linux</code>).</p>
</li>
<li>
<p>Users of SMP and multicore machines will appreciate that the
number of builds to be performed in parallel can now be
specified in the configuration file in the <code>build-max-jobs</code>
setting.</p>
</li>
</ul>
</li>
<li>
<p>Garbage collector improvements:</p>
<ul>
<li>
<p>Open files (such as running programs) are now used as roots of
the garbage collector. This prevents programs that have been
uninstalled from being garbage collected while they are still
running. The script that detects these additional runtime roots
(<code>find-runtime-roots.pl</code>) is inherently system-specific, but it
should work on Linux and on all platforms that have the <code>lsof</code>
utility.</p>
</li>
<li>
<p><code>nix-store --gc</code> (a.k.a. <code>nix-collect-garbage</code>) prints out the
number of bytes freed on standard output. <code>nix-store --gc --print-dead</code> shows how many bytes would be freed by an
actual garbage collection.</p>
</li>
<li>
<p><code>nix-collect-garbage -d</code> removes all old generations of <em>all</em>
profiles before calling the actual garbage collector (<code>nix-store --gc</code>). This is an easy way to get rid of all old packages in
the Nix store.</p>
</li>
<li>
<p><code>nix-store</code> now has an operation <code>--delete</code> to delete specific
paths from the Nix store. It won’t delete reachable
(non-garbage) paths unless <code>--ignore-liveness</code> is specified.</p>
</li>
</ul>
</li>
<li>
<p>Berkeley DB 4.4’s process registry feature is used to recover from
crashed Nix processes.</p>
</li>
<li>
<p>A performance issue has been fixed with the <code>referer</code> table, which
stores the inverse of the <code>references</code> table (i.e., it tells you
what store paths refer to a given path). Maintaining this table
could take a quadratic amount of time, as well as a quadratic amount
of Berkeley DB log file space (in particular when running the
garbage collector) (<code>NIX-23</code>).</p>
</li>
<li>
<p>Nix now catches the <code>TERM</code> and <code>HUP</code> signals in addition to the
<code>INT</code> signal. So you can now do a <code>killall nix-store</code> without triggering a database recovery.</p>
</li>
<li>
<p><code>bsdiff</code> updated to version 4.3.</p>
</li>
<li>
<p>Substantial performance improvements in expression evaluation and
<code>nix-env -qa</code>, all thanks to <a href="http://valgrind.org/">Valgrind</a>.
Memory use has been reduced by a factor 8 or so. Big speedup by
memoisation of path hashing.</p>
</li>
<li>
<p>Lots of bug fixes, notably:</p>
<ul>
<li>
<p>Make sure that the garbage collector can run successfully when
the disk is full (<code>NIX-18</code>).</p>
</li>
<li>
<p><code>nix-env</code> now locks the profile to prevent races between
concurrent <code>nix-env</code> operations on the same profile (<code>NIX-7</code>).</p>
</li>
<li>
<p>Removed misleading messages from <code>nix-env -i</code> (e.g.,
<code>installing `foo'</code> followed by <code>uninstalling `foo'</code>) (<code>NIX-17</code>).</p>
</li>
</ul>
</li>
<li>
<p>Nix source distributions are a lot smaller now since we no longer
include a full copy of the Berkeley DB source distribution (but only
the bits we need).</p>
</li>
<li>
<p>Header files are now installed so that external programs can use the
Nix libraries.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="release-092-2005-09-21"><a class="header" href="#release-092-2005-09-21">Release 0.9.2 (2005-09-21)</a></h1>
<p>This bug fix release fixes two problems on Mac OS X:</p>
<ul>
<li>
<p>If Nix was linked against statically linked versions of the ATerm or
Berkeley DB library, there would be dynamic link errors at runtime.</p>
</li>
<li>
<p><code>nix-pull</code> and <code>nix-push</code> intermittently failed due to race
conditions involving pipes and child processes with error messages
such as <code>open2: open(GLOB(0x180b2e4), &gt;&amp;=9) failed: Bad file descriptor at /nix/bin/nix-pull line 77</code> (issue <code>NIX-14</code>).</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="release-091-2005-09-20"><a class="header" href="#release-091-2005-09-20">Release 0.9.1 (2005-09-20)</a></h1>
<p>This bug fix release addresses a problem with the ATerm library when the
<code>--with-aterm</code> flag in <code>configure</code> was <em>not</em> used.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="release-09-2005-09-16"><a class="header" href="#release-09-2005-09-16">Release 0.9 (2005-09-16)</a></h1>
<p>NOTE: this version of Nix uses Berkeley DB 4.3 instead of 4.2. The
database is upgraded automatically, but you should be careful not to use
old versions of Nix that still use Berkeley DB 4.2. In particular, if
you use a Nix installed through Nix, you should run</p>
<pre><code>$ nix-store --clear-substitutes
</code></pre>
<p>first.</p>
<ul>
<li>
<p>Unpacking of patch sequences is much faster now since we no longer
do redundant unpacking and repacking of intermediate paths.</p>
</li>
<li>
<p>Nix now uses Berkeley DB 4.3.</p>
</li>
<li>
<p>The <code>derivation</code> primitive is lazier. Attributes of dependent
derivations can mutually refer to each other (as long as there are
no data dependencies on the <code>outPath</code> and <code>drvPath</code> attributes
computed by <code>derivation</code>).</p>
<p>For example, the expression <code>derivation attrs</code> now evaluates to (essentially)</p>
<pre><code>attrs // {
  type = &quot;derivation&quot;;
  outPath = derivation! attrs;
  drvPath = derivation! attrs;
}
</code></pre>
<p>where <code>derivation!</code> is a primop that does the actual derivation
instantiation (i.e., it does what <code>derivation</code> used to do). The
advantage is that it allows commands such as <code>nix-env -qa</code> and
<code>nix-env -i</code> to be much faster since they no longer need to
instantiate all derivations, just the <code>name</code> attribute.</p>
<p>Also, it allows derivations to cyclically reference each other, for
example,</p>
<pre><code>webServer = derivation {
  ...
  hostName = &quot;svn.cs.uu.nl&quot;;
  services = [svnService];
};
 
svnService = derivation {
  ...
  hostName = webServer.hostName;
};
</code></pre>
<p>Previously, this would yield a black hole (infinite recursion).</p>
</li>
<li>
<p><code>nix-build</code> now defaults to using <code>./default.nix</code> if no Nix
expression is specified.</p>
</li>
<li>
<p><code>nix-instantiate</code>, when applied to a Nix expression that evaluates
to a function, will call the function automatically if all its
arguments have defaults.</p>
</li>
<li>
<p>Nix now uses libtool to build dynamic libraries. This reduces the
size of executables.</p>
</li>
<li>
<p>A new list concatenation operator <code>++</code>. For example, <code>[1 2 3] ++ [4 5 6]</code> evaluates to <code>[1 2 3 4 5 6]</code>.</p>
</li>
<li>
<p>Some currently undocumented primops to support low-level build
management using Nix (i.e., using Nix as a Make replacement). See
the commit messages for <code>r3578</code> and <code>r3580</code>.</p>
</li>
<li>
<p>Various bug fixes and performance improvements.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="release-081-2005-04-13"><a class="header" href="#release-081-2005-04-13">Release 0.8.1 (2005-04-13)</a></h1>
<p>This is a bug fix release.</p>
<ul>
<li>
<p>Patch downloading was broken.</p>
</li>
<li>
<p>The garbage collector would not delete paths that had references
from invalid (but substitutable) paths.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="release-08-2005-04-11"><a class="header" href="#release-08-2005-04-11">Release 0.8 (2005-04-11)</a></h1>
<p>NOTE: the hashing scheme in Nix 0.8 changed (as detailed below). As a
result, <code>nix-pull</code> manifests and channels built for Nix 0.7 and below
will not work anymore. However, the Nix expression language has not
changed, so you can still build from source. Also, existing user
environments continue to work. Nix 0.8 will automatically upgrade the
database schema of previous installations when it is first run.</p>
<p>If you get the error message</p>
<pre><code>you have an old-style manifest `/nix/var/nix/manifests/[...]'; please
delete it
</code></pre>
<p>you should delete previously downloaded manifests:</p>
<pre><code>$ rm /nix/var/nix/manifests/*
</code></pre>
<p>If <code>nix-channel</code> gives the error message</p>
<pre><code>manifest `http://catamaran.labs.cs.uu.nl/dist/nix/channels/[channel]/MANIFEST'
is too old (i.e., for Nix &lt;= 0.7)
</code></pre>
<p>then you should unsubscribe from the offending channel (<code>nix-channel --remove URL</code>; leave out <code>/MANIFEST</code>), and subscribe to the same URL, with
<code>channels</code> replaced by <code>channels-v3</code> (e.g.,
<a href="http://catamaran.labs.cs.uu.nl/dist/nix/channels-v3/nixpkgs-unstable">http://catamaran.labs.cs.uu.nl/dist/nix/channels-v3/nixpkgs-unstable</a>).</p>
<p>Nix 0.8 has the following improvements:</p>
<ul>
<li>
<p>The cryptographic hashes used in store paths are now 160 bits long,
but encoded in base-32 so that they are still only 32 characters
long (e.g.,
<code>/nix/store/csw87wag8bqlqk7ipllbwypb14xainap-atk-1.9.0</code>). (This is
actually a 160 bit truncation of a SHA-256 hash.)</p>
</li>
<li>
<p>Big cleanups and simplifications of the basic store semantics. The
notion of “closure store expressions” is gone (and so is the notion
of “successors”); the file system references of a store path are now
just stored in the database.</p>
<p>For instance, given any store path, you can query its closure:</p>
<pre><code>$ nix-store -qR $(which firefox)
... lots of paths ...
</code></pre>
<p>Also, Nix now remembers for each store path the derivation that
built it (the “deriver”):</p>
<pre><code>$ nix-store -qR $(which firefox)
/nix/store/4b0jx7vq80l9aqcnkszxhymsf1ffa5jd-firefox-1.0.1.drv
</code></pre>
<p>So to see the build-time dependencies, you can do</p>
<pre><code>$ nix-store -qR $(nix-store -qd $(which firefox))
</code></pre>
<p>or, in a nicer format:</p>
<pre><code>$ nix-store -q --tree $(nix-store -qd $(which firefox))
</code></pre>
<p>File system references are also stored in reverse. For instance, you
can query all paths that directly or indirectly use a certain Glibc:</p>
<pre><code>$ nix-store -q --referrers-closure \
    /nix/store/8lz9yc6zgmc0vlqmn2ipcpkjlmbi51vv-glibc-2.3.4
</code></pre>
</li>
<li>
<p>The concept of fixed-output derivations has been formalised.
Previously, functions such as <code>fetchurl</code> in Nixpkgs used a hack
(namely, explicitly specifying a store path hash) to prevent changes
to, say, the URL of the file from propagating upwards through the
dependency graph, causing rebuilds of everything. This can now be
done cleanly by specifying the <code>outputHash</code> and <code>outputHashAlgo</code>
attributes. Nix itself checks that the content of the output has the
specified hash. (This is important for maintaining certain
invariants necessary for future work on secure shared stores.)</p>
</li>
<li>
<p>One-click installation :-) It is now possible to install any
top-level component in Nixpkgs directly, through the web — see,
e.g., <a href="http://catamaran.labs.cs.uu.nl/dist/nixpkgs-0.8/">http://catamaran.labs.cs.uu.nl/dist/nixpkgs-0.8/</a>. All you
have to do is associate <code>/nix/bin/nix-install-package</code> with the MIME
type <code>application/nix-package</code> (or the extension <code>.nixpkg</code>), and
clicking on a package link will cause it to be installed, with all
appropriate dependencies. If you just want to install some specific
application, this is easier than subscribing to a channel.</p>
</li>
<li>
<p><code>nix-store -r PATHS</code> now builds all the derivations PATHS in parallel. Previously
it did them sequentially (though exploiting possible parallelism
between subderivations). This is nice for build farms.</p>
</li>
<li>
<p><code>nix-channel</code> has new operations <code>--list</code> and <code>--remove</code>.</p>
</li>
<li>
<p>New ways of installing components into user environments:</p>
<ul>
<li>
<p>Copy from another user environment:</p>
<pre><code>$ nix-env -i --from-profile .../other-profile firefox
</code></pre>
</li>
<li>
<p>Install a store derivation directly (bypassing the Nix
expression language entirely):</p>
<pre><code>$ nix-env -i /nix/store/z58v41v21xd3...-aterm-2.3.1.drv
</code></pre>
<p>(This is used to implement <code>nix-install-package</code>, which is
therefore immune to evolution in the Nix expression language.)</p>
</li>
<li>
<p>Install an already built store path directly:</p>
<pre><code>$ nix-env -i /nix/store/hsyj5pbn0d9i...-aterm-2.3.1
</code></pre>
</li>
<li>
<p>Install the result of a Nix expression specified as a
command-line argument:</p>
<pre><code>$ nix-env -f .../i686-linux.nix -i -E 'x: x.firefoxWrapper'
</code></pre>
<p>The difference with the normal installation mode is that <code>-E</code>
does not use the <code>name</code> attributes of derivations. Therefore,
this can be used to disambiguate multiple derivations with the
same name.</p>
</li>
</ul>
</li>
<li>
<p>A hash of the contents of a store path is now stored in the database
after a successful build. This allows you to check whether store
paths have been tampered with: <code>nix-store --verify --check-contents</code>.</p>
</li>
<li>
<p>Implemented a concurrent garbage collector. It is now always safe to
run the garbage collector, even if other Nix operations are
happening simultaneously.</p>
<p>However, there can still be GC races if you use <code>nix-instantiate</code>
and <code>nix-store --realise</code> directly to build things. To prevent races, use the
<code>--add-root</code> flag of those commands.</p>
</li>
<li>
<p>The garbage collector now finally deletes paths in the right order
(i.e., topologically sorted under the “references” relation), thus
making it safe to interrupt the collector without risking a store
that violates the closure invariant.</p>
</li>
<li>
<p>Likewise, the substitute mechanism now downloads files in the right
order, thus preserving the closure invariant at all times.</p>
</li>
<li>
<p>The result of <code>nix-build</code> is now registered as a root of the garbage
collector. If the <code>./result</code> link is deleted, the GC root disappears
automatically.</p>
</li>
<li>
<p>The behaviour of the garbage collector can be changed globally by
setting options in <code>/nix/etc/nix/nix.conf</code>.</p>
<ul>
<li>
<p><code>gc-keep-derivations</code> specifies whether deriver links should be
followed when searching for live paths.</p>
</li>
<li>
<p><code>gc-keep-outputs</code> specifies whether outputs of derivations
should be followed when searching for live paths.</p>
</li>
<li>
<p><code>env-keep-derivations</code> specifies whether user environments
should store the paths of derivations when they are added (thus
keeping the derivations alive).</p>
</li>
</ul>
</li>
<li>
<p>New <code>nix-env</code> query flags <code>--drv-path</code> and <code>--out-path</code>.</p>
</li>
<li>
<p><code>fetchurl</code> allows SHA-1 and SHA-256 in addition to MD5. Just specify
the attribute <code>sha1</code> or <code>sha256</code> instead of <code>md5</code>.</p>
</li>
<li>
<p>Manual updates.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="release-07-2005-01-12"><a class="header" href="#release-07-2005-01-12">Release 0.7 (2005-01-12)</a></h1>
<ul>
<li>
<p>Binary patching. When upgrading components using pre-built binaries
(through nix-pull / nix-channel), Nix can automatically download and
apply binary patches to already installed components instead of full
downloads. Patching is “smart”: if there is a <em>sequence</em> of patches
to an installed component, Nix will use it. Patches are currently
generated automatically between Nixpkgs (pre-)releases.</p>
</li>
<li>
<p>Simplifications to the substitute mechanism.</p>
</li>
<li>
<p>Nix-pull now stores downloaded manifests in
<code>/nix/var/nix/manifests</code>.</p>
</li>
<li>
<p>Metadata on files in the Nix store is canonicalised after builds:
the last-modified timestamp is set to 0 (00:00:00 1/1/1970), the
mode is set to 0444 or 0555 (readable and possibly executable by
all; setuid/setgid bits are dropped), and the group is set to the
default. This ensures that the result of a build and an installation
through a substitute is the same; and that timestamp dependencies
are revealed.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="release-06-2004-11-14"><a class="header" href="#release-06-2004-11-14">Release 0.6 (2004-11-14)</a></h1>
<ul>
<li>
<p>Rewrite of the normalisation engine.</p>
<ul>
<li>
<p>Multiple builds can now be performed in parallel (option <code>-j</code>).</p>
</li>
<li>
<p>Distributed builds. Nix can now call a shell script to forward
builds to Nix installations on remote machines, which may or may
not be of the same platform type.</p>
</li>
<li>
<p>Option <code>--fallback</code> allows recovery from broken substitutes.</p>
</li>
<li>
<p>Option <code>--keep-going</code> causes building of other (unaffected)
derivations to continue if one failed.</p>
</li>
</ul>
</li>
<li>
<p>Improvements to the garbage collector (i.e., it should actually work
now).</p>
</li>
<li>
<p>Setuid Nix installations allow a Nix store to be shared among
multiple users.</p>
</li>
<li>
<p>Substitute registration is much faster now.</p>
</li>
<li>
<p>A utility <code>nix-build</code> to build a Nix expression and create a symlink
to the result int the current directory; useful for testing Nix
derivations.</p>
</li>
<li>
<p>Manual updates.</p>
</li>
<li>
<p><code>nix-env</code> changes:</p>
<ul>
<li>
<p>Derivations for other platforms are filtered out (which can be
overridden using <code>--system-filter</code>).</p>
</li>
<li>
<p><code>--install</code> by default now uninstall previous derivations with
the same name.</p>
</li>
<li>
<p><code>--upgrade</code> allows upgrading to a specific version.</p>
</li>
<li>
<p>New operation <code>--delete-generations</code> to remove profile
generations (necessary for effective garbage collection).</p>
</li>
<li>
<p>Nicer output (sorted, columnised).</p>
</li>
</ul>
</li>
<li>
<p>More sensible verbosity levels all around (builder output is now
shown always, unless <code>-Q</code> is given).</p>
</li>
<li>
<p>Nix expression language changes:</p>
<ul>
<li>
<p>New language construct: <code>with E1; E2</code> brings all attributes defined in the attribute set <em>E1</em> in
scope in <em>E2</em>.</p>
</li>
<li>
<p>Added a <code>map</code> function.</p>
</li>
<li>
<p>Various new operators (e.g., string concatenation).</p>
</li>
</ul>
</li>
<li>
<p>Expression evaluation is much faster.</p>
</li>
<li>
<p>An Emacs mode for editing Nix expressions (with syntax highlighting
and indentation) has been added.</p>
</li>
<li>
<p>Many bug fixes.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="release-05-and-earlier"><a class="header" href="#release-05-and-earlier">Release 0.5 and earlier</a></h1>
<p>Please refer to the Subversion commit log messages.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->
        <script src="redirects.js"></script>

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </div>
    </body>
</html>
