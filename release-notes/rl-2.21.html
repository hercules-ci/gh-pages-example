<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Release 2.21 (2024-03-11) - Nix Reference Manual</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../custom.css">

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../introduction.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="../quick-start.html"><strong aria-hidden="true">2.</strong> Quick Start</a></li><li class="chapter-item expanded "><a href="../installation/index.html"><strong aria-hidden="true">3.</strong> Installation</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../installation/supported-platforms.html"><strong aria-hidden="true">3.1.</strong> Supported Platforms</a></li><li class="chapter-item expanded "><a href="../installation/installing-binary.html"><strong aria-hidden="true">3.2.</strong> Installing a Binary Distribution</a></li><li class="chapter-item expanded "><a href="../installation/installing-source.html"><strong aria-hidden="true">3.3.</strong> Installing Nix from Source</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../installation/prerequisites-source.html"><strong aria-hidden="true">3.3.1.</strong> Prerequisites</a></li><li class="chapter-item expanded "><a href="../installation/obtaining-source.html"><strong aria-hidden="true">3.3.2.</strong> Obtaining a Source Distribution</a></li><li class="chapter-item expanded "><a href="../installation/building-source.html"><strong aria-hidden="true">3.3.3.</strong> Building Nix from Source</a></li></ol></li><li class="chapter-item expanded "><a href="../installation/installing-docker.html"><strong aria-hidden="true">3.4.</strong> Using Nix within Docker</a></li><li class="chapter-item expanded "><a href="../installation/nix-security.html"><strong aria-hidden="true">3.5.</strong> Security</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../installation/single-user.html"><strong aria-hidden="true">3.5.1.</strong> Single-User Mode</a></li><li class="chapter-item expanded "><a href="../installation/multi-user.html"><strong aria-hidden="true">3.5.2.</strong> Multi-User Mode</a></li></ol></li><li class="chapter-item expanded "><a href="../installation/env-variables.html"><strong aria-hidden="true">3.6.</strong> Environment Variables</a></li><li class="chapter-item expanded "><a href="../installation/upgrading.html"><strong aria-hidden="true">3.7.</strong> Upgrading Nix</a></li><li class="chapter-item expanded "><a href="../installation/uninstall.html"><strong aria-hidden="true">3.8.</strong> Uninstalling Nix</a></li></ol></li><li class="chapter-item expanded "><a href="../store/index.html"><strong aria-hidden="true">4.</strong> Nix Store</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../store/file-system-object.html"><strong aria-hidden="true">4.1.</strong> File System Object</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../store/file-system-object/content-address.html"><strong aria-hidden="true">4.1.1.</strong> Content-Addressing File System Objects</a></li></ol></li><li class="chapter-item expanded "><a href="../store/store-object.html"><strong aria-hidden="true">4.2.</strong> Store Object</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../store/store-object/content-address.html"><strong aria-hidden="true">4.2.1.</strong> Content-Addressing Store Objects</a></li></ol></li><li class="chapter-item expanded "><a href="../store/store-path.html"><strong aria-hidden="true">4.3.</strong> Store Path</a></li><li class="chapter-item expanded "><a href="../store/types/index.html"><strong aria-hidden="true">4.4.</strong> Store Types</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../store/types/dummy-store.html"><strong aria-hidden="true">4.4.1.</strong> Dummy Store</a></li><li class="chapter-item expanded "><a href="../store/types/experimental-local-overlay-store.html"><strong aria-hidden="true">4.4.2.</strong> Experimental Local Overlay Store</a></li><li class="chapter-item expanded "><a href="../store/types/experimental-ssh-store.html"><strong aria-hidden="true">4.4.3.</strong> Experimental SSH Store</a></li><li class="chapter-item expanded "><a href="../store/types/experimental-ssh-store-with-filesystem-mounted.html"><strong aria-hidden="true">4.4.4.</strong> Experimental SSH Store with filesystem mounted</a></li><li class="chapter-item expanded "><a href="../store/types/http-binary-cache-store.html"><strong aria-hidden="true">4.4.5.</strong> HTTP Binary Cache Store</a></li><li class="chapter-item expanded "><a href="../store/types/local-binary-cache-store.html"><strong aria-hidden="true">4.4.6.</strong> Local Binary Cache Store</a></li><li class="chapter-item expanded "><a href="../store/types/local-daemon-store.html"><strong aria-hidden="true">4.4.7.</strong> Local Daemon Store</a></li><li class="chapter-item expanded "><a href="../store/types/local-store.html"><strong aria-hidden="true">4.4.8.</strong> Local Store</a></li><li class="chapter-item expanded "><a href="../store/types/s3-binary-cache-store.html"><strong aria-hidden="true">4.4.9.</strong> S3 Binary Cache Store</a></li><li class="chapter-item expanded "><a href="../store/types/ssh-store.html"><strong aria-hidden="true">4.4.10.</strong> SSH Store</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../language/index.html"><strong aria-hidden="true">5.</strong> Nix Language</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../language/types.html"><strong aria-hidden="true">5.1.</strong> Data Types</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../language/string-context.html"><strong aria-hidden="true">5.1.1.</strong> String context</a></li></ol></li><li class="chapter-item expanded "><a href="../language/syntax.html"><strong aria-hidden="true">5.2.</strong> Syntax and semantics</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../language/identifiers.html"><strong aria-hidden="true">5.2.1.</strong> Identifiers</a></li><li class="chapter-item expanded "><a href="../language/scope.html"><strong aria-hidden="true">5.2.2.</strong> Scoping rules</a></li><li class="chapter-item expanded "><a href="../language/string-interpolation.html"><strong aria-hidden="true">5.2.3.</strong> String interpolation</a></li><li class="chapter-item expanded "><a href="../language/constructs/lookup-path.html"><strong aria-hidden="true">5.2.4.</strong> Lookup path</a></li></ol></li><li class="chapter-item expanded "><a href="../language/operators.html"><strong aria-hidden="true">5.3.</strong> Operators</a></li><li class="chapter-item expanded "><a href="../language/builtins.html"><strong aria-hidden="true">5.4.</strong> Built-ins</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../language/derivations.html"><strong aria-hidden="true">5.4.1.</strong> Derivations</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../language/advanced-attributes.html"><strong aria-hidden="true">5.4.1.1.</strong> Advanced Attributes</a></li><li class="chapter-item expanded "><a href="../language/import-from-derivation.html"><strong aria-hidden="true">5.4.1.2.</strong> Import From Derivation</a></li></ol></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../package-management/index.html"><strong aria-hidden="true">6.</strong> Package Management</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../package-management/profiles.html"><strong aria-hidden="true">6.1.</strong> Profiles</a></li><li class="chapter-item expanded "><a href="../package-management/garbage-collection.html"><strong aria-hidden="true">6.2.</strong> Garbage Collection</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../package-management/garbage-collector-roots.html"><strong aria-hidden="true">6.2.1.</strong> Garbage Collector Roots</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../advanced-topics/index.html"><strong aria-hidden="true">7.</strong> Advanced Topics</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../package-management/sharing-packages.html"><strong aria-hidden="true">7.1.</strong> Sharing Packages Between Machines</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../package-management/binary-cache-substituter.html"><strong aria-hidden="true">7.1.1.</strong> Serving a Nix store via HTTP</a></li><li class="chapter-item expanded "><a href="../package-management/ssh-substituter.html"><strong aria-hidden="true">7.1.2.</strong> Serving a Nix store via SSH</a></li></ol></li><li class="chapter-item expanded "><a href="../advanced-topics/distributed-builds.html"><strong aria-hidden="true">7.2.</strong> Remote Builds</a></li><li class="chapter-item expanded "><a href="../advanced-topics/cores-vs-jobs.html"><strong aria-hidden="true">7.3.</strong> Tuning Cores and Jobs</a></li><li class="chapter-item expanded "><a href="../advanced-topics/diff-hook.html"><strong aria-hidden="true">7.4.</strong> Verifying Build Reproducibility</a></li><li class="chapter-item expanded "><a href="../advanced-topics/post-build-hook.html"><strong aria-hidden="true">7.5.</strong> Using the post-build-hook</a></li></ol></li><li class="chapter-item expanded "><a href="../command-ref/index.html"><strong aria-hidden="true">8.</strong> Command Reference</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../command-ref/opt-common.html"><strong aria-hidden="true">8.1.</strong> Common Options</a></li><li class="chapter-item expanded "><a href="../command-ref/env-common.html"><strong aria-hidden="true">8.2.</strong> Common Environment Variables</a></li><li class="chapter-item expanded "><a href="../command-ref/main-commands.html"><strong aria-hidden="true">8.3.</strong> Main Commands</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../command-ref/nix-build.html"><strong aria-hidden="true">8.3.1.</strong> nix-build</a></li><li class="chapter-item expanded "><a href="../command-ref/nix-shell.html"><strong aria-hidden="true">8.3.2.</strong> nix-shell</a></li><li class="chapter-item expanded "><a href="../command-ref/nix-store.html"><strong aria-hidden="true">8.3.3.</strong> nix-store</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../command-ref/nix-store/add-fixed.html"><strong aria-hidden="true">8.3.3.1.</strong> nix-store --add-fixed</a></li><li class="chapter-item expanded "><a href="../command-ref/nix-store/add.html"><strong aria-hidden="true">8.3.3.2.</strong> nix-store --add</a></li><li class="chapter-item expanded "><a href="../command-ref/nix-store/delete.html"><strong aria-hidden="true">8.3.3.3.</strong> nix-store --delete</a></li><li class="chapter-item expanded "><a href="../command-ref/nix-store/dump-db.html"><strong aria-hidden="true">8.3.3.4.</strong> nix-store --dump-db</a></li><li class="chapter-item expanded "><a href="../command-ref/nix-store/dump.html"><strong aria-hidden="true">8.3.3.5.</strong> nix-store --dump</a></li><li class="chapter-item expanded "><a href="../command-ref/nix-store/export.html"><strong aria-hidden="true">8.3.3.6.</strong> nix-store --export</a></li><li class="chapter-item expanded "><a href="../command-ref/nix-store/gc.html"><strong aria-hidden="true">8.3.3.7.</strong> nix-store --gc</a></li><li class="chapter-item expanded "><a href="../command-ref/nix-store/generate-binary-cache-key.html"><strong aria-hidden="true">8.3.3.8.</strong> nix-store --generate-binary-cache-key</a></li><li class="chapter-item expanded "><a href="../command-ref/nix-store/import.html"><strong aria-hidden="true">8.3.3.9.</strong> nix-store --import</a></li><li class="chapter-item expanded "><a href="../command-ref/nix-store/load-db.html"><strong aria-hidden="true">8.3.3.10.</strong> nix-store --load-db</a></li><li class="chapter-item expanded "><a href="../command-ref/nix-store/optimise.html"><strong aria-hidden="true">8.3.3.11.</strong> nix-store --optimise</a></li><li class="chapter-item expanded "><a href="../command-ref/nix-store/print-env.html"><strong aria-hidden="true">8.3.3.12.</strong> nix-store --print-env</a></li><li class="chapter-item expanded "><a href="../command-ref/nix-store/query.html"><strong aria-hidden="true">8.3.3.13.</strong> nix-store --query</a></li><li class="chapter-item expanded "><a href="../command-ref/nix-store/read-log.html"><strong aria-hidden="true">8.3.3.14.</strong> nix-store --read-log</a></li><li class="chapter-item expanded "><a href="../command-ref/nix-store/realise.html"><strong aria-hidden="true">8.3.3.15.</strong> nix-store --realise</a></li><li class="chapter-item expanded "><a href="../command-ref/nix-store/repair-path.html"><strong aria-hidden="true">8.3.3.16.</strong> nix-store --repair-path</a></li><li class="chapter-item expanded "><a href="../command-ref/nix-store/restore.html"><strong aria-hidden="true">8.3.3.17.</strong> nix-store --restore</a></li><li class="chapter-item expanded "><a href="../command-ref/nix-store/serve.html"><strong aria-hidden="true">8.3.3.18.</strong> nix-store --serve</a></li><li class="chapter-item expanded "><a href="../command-ref/nix-store/verify-path.html"><strong aria-hidden="true">8.3.3.19.</strong> nix-store --verify-path</a></li><li class="chapter-item expanded "><a href="../command-ref/nix-store/verify.html"><strong aria-hidden="true">8.3.3.20.</strong> nix-store --verify</a></li></ol></li><li class="chapter-item expanded "><a href="../command-ref/nix-env.html"><strong aria-hidden="true">8.3.4.</strong> nix-env</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../command-ref/nix-env/delete-generations.html"><strong aria-hidden="true">8.3.4.1.</strong> nix-env --delete-generations</a></li><li class="chapter-item expanded "><a href="../command-ref/nix-env/install.html"><strong aria-hidden="true">8.3.4.2.</strong> nix-env --install</a></li><li class="chapter-item expanded "><a href="../command-ref/nix-env/list-generations.html"><strong aria-hidden="true">8.3.4.3.</strong> nix-env --list-generations</a></li><li class="chapter-item expanded "><a href="../command-ref/nix-env/query.html"><strong aria-hidden="true">8.3.4.4.</strong> nix-env --query</a></li><li class="chapter-item expanded "><a href="../command-ref/nix-env/rollback.html"><strong aria-hidden="true">8.3.4.5.</strong> nix-env --rollback</a></li><li class="chapter-item expanded "><a href="../command-ref/nix-env/set-flag.html"><strong aria-hidden="true">8.3.4.6.</strong> nix-env --set-flag</a></li><li class="chapter-item expanded "><a href="../command-ref/nix-env/set.html"><strong aria-hidden="true">8.3.4.7.</strong> nix-env --set</a></li><li class="chapter-item expanded "><a href="../command-ref/nix-env/switch-generation.html"><strong aria-hidden="true">8.3.4.8.</strong> nix-env --switch-generation</a></li><li class="chapter-item expanded "><a href="../command-ref/nix-env/switch-profile.html"><strong aria-hidden="true">8.3.4.9.</strong> nix-env --switch-profile</a></li><li class="chapter-item expanded "><a href="../command-ref/nix-env/uninstall.html"><strong aria-hidden="true">8.3.4.10.</strong> nix-env --uninstall</a></li><li class="chapter-item expanded "><a href="../command-ref/nix-env/upgrade.html"><strong aria-hidden="true">8.3.4.11.</strong> nix-env --upgrade</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../command-ref/utilities.html"><strong aria-hidden="true">8.4.</strong> Utilities</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../command-ref/nix-channel.html"><strong aria-hidden="true">8.4.1.</strong> nix-channel</a></li><li class="chapter-item expanded "><a href="../command-ref/nix-collect-garbage.html"><strong aria-hidden="true">8.4.2.</strong> nix-collect-garbage</a></li><li class="chapter-item expanded "><a href="../command-ref/nix-copy-closure.html"><strong aria-hidden="true">8.4.3.</strong> nix-copy-closure</a></li><li class="chapter-item expanded "><a href="../command-ref/nix-daemon.html"><strong aria-hidden="true">8.4.4.</strong> nix-daemon</a></li><li class="chapter-item expanded "><a href="../command-ref/nix-hash.html"><strong aria-hidden="true">8.4.5.</strong> nix-hash</a></li><li class="chapter-item expanded "><a href="../command-ref/nix-instantiate.html"><strong aria-hidden="true">8.4.6.</strong> nix-instantiate</a></li><li class="chapter-item expanded "><a href="../command-ref/nix-prefetch-url.html"><strong aria-hidden="true">8.4.7.</strong> nix-prefetch-url</a></li></ol></li><li class="chapter-item expanded "><a href="../command-ref/experimental-commands.html"><strong aria-hidden="true">8.5.</strong> Experimental Commands</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix.html"><strong aria-hidden="true">8.5.1.</strong> nix</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-build.html"><strong aria-hidden="true">8.5.2.</strong> nix build</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-bundle.html"><strong aria-hidden="true">8.5.3.</strong> nix bundle</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-config.html"><strong aria-hidden="true">8.5.4.</strong> nix config</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-config-check.html"><strong aria-hidden="true">8.5.5.</strong> nix config check</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-config-show.html"><strong aria-hidden="true">8.5.6.</strong> nix config show</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-copy.html"><strong aria-hidden="true">8.5.7.</strong> nix copy</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-daemon.html"><strong aria-hidden="true">8.5.8.</strong> nix daemon</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-derivation.html"><strong aria-hidden="true">8.5.9.</strong> nix derivation</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-derivation-add.html"><strong aria-hidden="true">8.5.10.</strong> nix derivation add</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-derivation-show.html"><strong aria-hidden="true">8.5.11.</strong> nix derivation show</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-develop.html"><strong aria-hidden="true">8.5.12.</strong> nix develop</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-edit.html"><strong aria-hidden="true">8.5.13.</strong> nix edit</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-env.html"><strong aria-hidden="true">8.5.14.</strong> nix env</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-env-shell.html"><strong aria-hidden="true">8.5.15.</strong> nix env shell</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-eval.html"><strong aria-hidden="true">8.5.16.</strong> nix eval</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-flake.html"><strong aria-hidden="true">8.5.17.</strong> nix flake</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-flake-archive.html"><strong aria-hidden="true">8.5.18.</strong> nix flake archive</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-flake-check.html"><strong aria-hidden="true">8.5.19.</strong> nix flake check</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-flake-clone.html"><strong aria-hidden="true">8.5.20.</strong> nix flake clone</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-flake-info.html"><strong aria-hidden="true">8.5.21.</strong> nix flake info</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-flake-init.html"><strong aria-hidden="true">8.5.22.</strong> nix flake init</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-flake-lock.html"><strong aria-hidden="true">8.5.23.</strong> nix flake lock</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-flake-metadata.html"><strong aria-hidden="true">8.5.24.</strong> nix flake metadata</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-flake-new.html"><strong aria-hidden="true">8.5.25.</strong> nix flake new</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-flake-prefetch.html"><strong aria-hidden="true">8.5.26.</strong> nix flake prefetch</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-flake-show.html"><strong aria-hidden="true">8.5.27.</strong> nix flake show</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-flake-update.html"><strong aria-hidden="true">8.5.28.</strong> nix flake update</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-fmt.html"><strong aria-hidden="true">8.5.29.</strong> nix fmt</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-hash.html"><strong aria-hidden="true">8.5.30.</strong> nix hash</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-hash-convert.html"><strong aria-hidden="true">8.5.31.</strong> nix hash convert</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-hash-file.html"><strong aria-hidden="true">8.5.32.</strong> nix hash file</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-hash-path.html"><strong aria-hidden="true">8.5.33.</strong> nix hash path</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-hash-to-base16.html"><strong aria-hidden="true">8.5.34.</strong> nix hash to-base16</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-hash-to-base32.html"><strong aria-hidden="true">8.5.35.</strong> nix hash to-base32</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-hash-to-base64.html"><strong aria-hidden="true">8.5.36.</strong> nix hash to-base64</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-hash-to-sri.html"><strong aria-hidden="true">8.5.37.</strong> nix hash to-sri</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-help.html"><strong aria-hidden="true">8.5.38.</strong> nix help</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-help-stores.html"><strong aria-hidden="true">8.5.39.</strong> nix help-stores</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-key.html"><strong aria-hidden="true">8.5.40.</strong> nix key</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-key-convert-secret-to-public.html"><strong aria-hidden="true">8.5.41.</strong> nix key convert-secret-to-public</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-key-generate-secret.html"><strong aria-hidden="true">8.5.42.</strong> nix key generate-secret</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-log.html"><strong aria-hidden="true">8.5.43.</strong> nix log</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-nar.html"><strong aria-hidden="true">8.5.44.</strong> nix nar</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-nar-cat.html"><strong aria-hidden="true">8.5.45.</strong> nix nar cat</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-nar-dump-path.html"><strong aria-hidden="true">8.5.46.</strong> nix nar dump-path</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-nar-ls.html"><strong aria-hidden="true">8.5.47.</strong> nix nar ls</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-nar-pack.html"><strong aria-hidden="true">8.5.48.</strong> nix nar pack</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-path-info.html"><strong aria-hidden="true">8.5.49.</strong> nix path-info</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-print-dev-env.html"><strong aria-hidden="true">8.5.50.</strong> nix print-dev-env</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-profile.html"><strong aria-hidden="true">8.5.51.</strong> nix profile</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-profile-diff-closures.html"><strong aria-hidden="true">8.5.52.</strong> nix profile diff-closures</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-profile-history.html"><strong aria-hidden="true">8.5.53.</strong> nix profile history</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-profile-install.html"><strong aria-hidden="true">8.5.54.</strong> nix profile install</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-profile-list.html"><strong aria-hidden="true">8.5.55.</strong> nix profile list</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-profile-remove.html"><strong aria-hidden="true">8.5.56.</strong> nix profile remove</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-profile-rollback.html"><strong aria-hidden="true">8.5.57.</strong> nix profile rollback</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-profile-upgrade.html"><strong aria-hidden="true">8.5.58.</strong> nix profile upgrade</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-profile-wipe-history.html"><strong aria-hidden="true">8.5.59.</strong> nix profile wipe-history</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-realisation.html"><strong aria-hidden="true">8.5.60.</strong> nix realisation</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-realisation-info.html"><strong aria-hidden="true">8.5.61.</strong> nix realisation info</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-registry.html"><strong aria-hidden="true">8.5.62.</strong> nix registry</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-registry-add.html"><strong aria-hidden="true">8.5.63.</strong> nix registry add</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-registry-list.html"><strong aria-hidden="true">8.5.64.</strong> nix registry list</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-registry-pin.html"><strong aria-hidden="true">8.5.65.</strong> nix registry pin</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-registry-remove.html"><strong aria-hidden="true">8.5.66.</strong> nix registry remove</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-repl.html"><strong aria-hidden="true">8.5.67.</strong> nix repl</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-run.html"><strong aria-hidden="true">8.5.68.</strong> nix run</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-search.html"><strong aria-hidden="true">8.5.69.</strong> nix search</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-store.html"><strong aria-hidden="true">8.5.70.</strong> nix store</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-store-add.html"><strong aria-hidden="true">8.5.71.</strong> nix store add</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-store-add-file.html"><strong aria-hidden="true">8.5.72.</strong> nix store add-file</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-store-add-path.html"><strong aria-hidden="true">8.5.73.</strong> nix store add-path</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-store-cat.html"><strong aria-hidden="true">8.5.74.</strong> nix store cat</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-store-copy-log.html"><strong aria-hidden="true">8.5.75.</strong> nix store copy-log</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-store-copy-sigs.html"><strong aria-hidden="true">8.5.76.</strong> nix store copy-sigs</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-store-delete.html"><strong aria-hidden="true">8.5.77.</strong> nix store delete</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-store-diff-closures.html"><strong aria-hidden="true">8.5.78.</strong> nix store diff-closures</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-store-dump-path.html"><strong aria-hidden="true">8.5.79.</strong> nix store dump-path</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-store-gc.html"><strong aria-hidden="true">8.5.80.</strong> nix store gc</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-store-info.html"><strong aria-hidden="true">8.5.81.</strong> nix store info</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-store-ls.html"><strong aria-hidden="true">8.5.82.</strong> nix store ls</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-store-make-content-addressed.html"><strong aria-hidden="true">8.5.83.</strong> nix store make-content-addressed</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-store-optimise.html"><strong aria-hidden="true">8.5.84.</strong> nix store optimise</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-store-path-from-hash-part.html"><strong aria-hidden="true">8.5.85.</strong> nix store path-from-hash-part</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-store-ping.html"><strong aria-hidden="true">8.5.86.</strong> nix store ping</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-store-prefetch-file.html"><strong aria-hidden="true">8.5.87.</strong> nix store prefetch-file</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-store-repair.html"><strong aria-hidden="true">8.5.88.</strong> nix store repair</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-store-sign.html"><strong aria-hidden="true">8.5.89.</strong> nix store sign</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-store-verify.html"><strong aria-hidden="true">8.5.90.</strong> nix store verify</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-upgrade-nix.html"><strong aria-hidden="true">8.5.91.</strong> nix upgrade-nix</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-why-depends.html"><strong aria-hidden="true">8.5.92.</strong> nix why-depends</a></li></ol></li><li class="chapter-item expanded "><a href="../command-ref/files.html"><strong aria-hidden="true">8.6.</strong> Files</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../command-ref/conf-file.html"><strong aria-hidden="true">8.6.1.</strong> nix.conf</a></li><li class="chapter-item expanded "><a href="../command-ref/files/profiles.html"><strong aria-hidden="true">8.6.2.</strong> Profiles</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../command-ref/files/manifest.nix.html"><strong aria-hidden="true">8.6.2.1.</strong> manifest.nix</a></li><li class="chapter-item expanded "><a href="../command-ref/files/manifest.json.html"><strong aria-hidden="true">8.6.2.2.</strong> manifest.json</a></li></ol></li><li class="chapter-item expanded "><a href="../command-ref/files/channels.html"><strong aria-hidden="true">8.6.3.</strong> Channels</a></li><li class="chapter-item expanded "><a href="../command-ref/files/default-nix-expression.html"><strong aria-hidden="true">8.6.4.</strong> Default Nix expression</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../architecture/architecture.html"><strong aria-hidden="true">9.</strong> Architecture and Design</a></li><li class="chapter-item expanded "><a href="../protocols/index.html"><strong aria-hidden="true">10.</strong> Formats and Protocols</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../protocols/json/index.html"><strong aria-hidden="true">10.1.</strong> JSON Formats</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../protocols/json/store-object-info.html"><strong aria-hidden="true">10.1.1.</strong> Store Object Info</a></li><li class="chapter-item expanded "><a href="../protocols/json/derivation.html"><strong aria-hidden="true">10.1.2.</strong> Derivation</a></li></ol></li><li class="chapter-item expanded "><a href="../protocols/tarball-fetcher.html"><strong aria-hidden="true">10.2.</strong> Serving Tarball Flakes</a></li><li class="chapter-item expanded "><a href="../protocols/store-path.html"><strong aria-hidden="true">10.3.</strong> Store Path Specification</a></li><li class="chapter-item expanded "><a href="../protocols/nix-archive.html"><strong aria-hidden="true">10.4.</strong> Nix Archive (NAR) Format</a></li><li class="chapter-item expanded "><a href="../protocols/derivation-aterm.html"><strong aria-hidden="true">10.5.</strong> Derivation "ATerm" file format</a></li></ol></li><li class="chapter-item expanded "><a href="../c-api.html"><strong aria-hidden="true">11.</strong> C API</a></li><li class="chapter-item expanded "><a href="../glossary.html"><strong aria-hidden="true">12.</strong> Glossary</a></li><li class="chapter-item expanded "><a href="../development/index.html"><strong aria-hidden="true">13.</strong> Development</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../development/building.html"><strong aria-hidden="true">13.1.</strong> Building</a></li><li class="chapter-item expanded "><a href="../development/testing.html"><strong aria-hidden="true">13.2.</strong> Testing</a></li><li class="chapter-item expanded "><a href="../development/documentation.html"><strong aria-hidden="true">13.3.</strong> Documentation</a></li><li class="chapter-item expanded "><a href="../development/cli-guideline.html"><strong aria-hidden="true">13.4.</strong> CLI guideline</a></li><li class="chapter-item expanded "><a href="../development/json-guideline.html"><strong aria-hidden="true">13.5.</strong> JSON guideline</a></li><li class="chapter-item expanded "><a href="../development/cxx.html"><strong aria-hidden="true">13.6.</strong> C++ style guide</a></li><li class="chapter-item expanded "><a href="../development/experimental-features.html"><strong aria-hidden="true">13.7.</strong> Experimental Features</a></li><li class="chapter-item expanded "><a href="../development/contributing.html"><strong aria-hidden="true">13.8.</strong> Contributing</a></li></ol></li><li class="chapter-item expanded "><a href="../release-notes/index.html"><strong aria-hidden="true">14.</strong> Releases</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../release-notes/rl-2.24.html"><strong aria-hidden="true">14.1.</strong> Release 2.24 (2024-07-31)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-2.23.html"><strong aria-hidden="true">14.2.</strong> Release 2.23 (2024-06-03)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-2.22.html"><strong aria-hidden="true">14.3.</strong> Release 2.22 (2024-04-23)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-2.21.html" class="active"><strong aria-hidden="true">14.4.</strong> Release 2.21 (2024-03-11)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-2.20.html"><strong aria-hidden="true">14.5.</strong> Release 2.20 (2024-01-29)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-2.19.html"><strong aria-hidden="true">14.6.</strong> Release 2.19 (2023-11-17)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-2.18.html"><strong aria-hidden="true">14.7.</strong> Release 2.18 (2023-09-20)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-2.17.html"><strong aria-hidden="true">14.8.</strong> Release 2.17 (2023-07-24)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-2.16.html"><strong aria-hidden="true">14.9.</strong> Release 2.16 (2023-05-31)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-2.15.html"><strong aria-hidden="true">14.10.</strong> Release 2.15 (2023-04-11)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-2.14.html"><strong aria-hidden="true">14.11.</strong> Release 2.14 (2023-02-28)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-2.13.html"><strong aria-hidden="true">14.12.</strong> Release 2.13 (2023-01-17)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-2.12.html"><strong aria-hidden="true">14.13.</strong> Release 2.12 (2022-12-06)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-2.11.html"><strong aria-hidden="true">14.14.</strong> Release 2.11 (2022-08-25)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-2.10.html"><strong aria-hidden="true">14.15.</strong> Release 2.10 (2022-07-11)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-2.9.html"><strong aria-hidden="true">14.16.</strong> Release 2.9 (2022-05-30)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-2.8.html"><strong aria-hidden="true">14.17.</strong> Release 2.8 (2022-04-19)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-2.7.html"><strong aria-hidden="true">14.18.</strong> Release 2.7 (2022-03-07)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-2.6.html"><strong aria-hidden="true">14.19.</strong> Release 2.6 (2022-01-24)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-2.5.html"><strong aria-hidden="true">14.20.</strong> Release 2.5 (2021-12-13)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-2.4.html"><strong aria-hidden="true">14.21.</strong> Release 2.4 (2021-11-01)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-2.3.html"><strong aria-hidden="true">14.22.</strong> Release 2.3 (2019-09-04)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-2.2.html"><strong aria-hidden="true">14.23.</strong> Release 2.2 (2019-01-11)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-2.1.html"><strong aria-hidden="true">14.24.</strong> Release 2.1 (2018-09-02)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-2.0.html"><strong aria-hidden="true">14.25.</strong> Release 2.0 (2018-02-22)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-1.11.10.html"><strong aria-hidden="true">14.26.</strong> Release 1.11.10 (2017-06-12)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-1.11.html"><strong aria-hidden="true">14.27.</strong> Release 1.11 (2016-01-19)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-1.10.html"><strong aria-hidden="true">14.28.</strong> Release 1.10 (2015-09-03)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-1.9.html"><strong aria-hidden="true">14.29.</strong> Release 1.9 (2015-06-12)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-1.8.html"><strong aria-hidden="true">14.30.</strong> Release 1.8 (2014-12-14)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-1.7.html"><strong aria-hidden="true">14.31.</strong> Release 1.7 (2014-04-11)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-1.6.1.html"><strong aria-hidden="true">14.32.</strong> Release 1.6.1 (2013-10-28)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-1.6.html"><strong aria-hidden="true">14.33.</strong> Release 1.6 (2013-09-10)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-1.5.2.html"><strong aria-hidden="true">14.34.</strong> Release 1.5.2 (2013-05-13)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-1.5.html"><strong aria-hidden="true">14.35.</strong> Release 1.5 (2013-02-27)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-1.4.html"><strong aria-hidden="true">14.36.</strong> Release 1.4 (2013-02-26)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-1.3.html"><strong aria-hidden="true">14.37.</strong> Release 1.3 (2013-01-04)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-1.2.html"><strong aria-hidden="true">14.38.</strong> Release 1.2 (2012-12-06)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-1.1.html"><strong aria-hidden="true">14.39.</strong> Release 1.1 (2012-07-18)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-1.0.html"><strong aria-hidden="true">14.40.</strong> Release 1.0 (2012-05-11)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-0.16.html"><strong aria-hidden="true">14.41.</strong> Release 0.16 (2010-08-17)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-0.15.html"><strong aria-hidden="true">14.42.</strong> Release 0.15 (2010-03-17)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-0.14.html"><strong aria-hidden="true">14.43.</strong> Release 0.14 (2010-02-04)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-0.13.html"><strong aria-hidden="true">14.44.</strong> Release 0.13 (2009-11-05)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-0.12.html"><strong aria-hidden="true">14.45.</strong> Release 0.12 (2008-11-20)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-0.11.html"><strong aria-hidden="true">14.46.</strong> Release 0.11 (2007-12-31)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-0.10.1.html"><strong aria-hidden="true">14.47.</strong> Release 0.10.1 (2006-10-11)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-0.10.html"><strong aria-hidden="true">14.48.</strong> Release 0.10 (2006-10-06)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-0.9.2.html"><strong aria-hidden="true">14.49.</strong> Release 0.9.2 (2005-09-21)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-0.9.1.html"><strong aria-hidden="true">14.50.</strong> Release 0.9.1 (2005-09-20)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-0.9.html"><strong aria-hidden="true">14.51.</strong> Release 0.9 (2005-09-16)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-0.8.1.html"><strong aria-hidden="true">14.52.</strong> Release 0.8.1 (2005-04-13)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-0.8.html"><strong aria-hidden="true">14.53.</strong> Release 0.8 (2005-04-11)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-0.7.html"><strong aria-hidden="true">14.54.</strong> Release 0.7 (2005-01-12)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-0.6.html"><strong aria-hidden="true">14.55.</strong> Release 0.6 (2004-11-14)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-0.5.html"><strong aria-hidden="true">14.56.</strong> Release 0.5 and earlier</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Nix Reference Manual</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/NixOS/nix" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/NixOS/nix/tree/master/doc/manual/src/release-notes/rl-2.21.md" title="Suggest an edit" aria-label="Suggest an edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="release-2210-2024-03-11"><a class="header" href="#release-2210-2024-03-11">Release 2.21.0 (2024-03-11)</a></h1>
<ul>
<li>
<p>Fix a fixed-output derivation sandbox escape (CVE-2024-27297)</p>
<p>Cooperating Nix derivations could send file descriptors to files in the Nix
store to each other via Unix domain sockets in the abstract namespace. This
allowed one derivation to modify the output of the other derivation, after Nix
has registered the path as "valid" and immutable in the Nix database.
In particular, this allowed the output of fixed-output derivations to be
modified from their expected content.</p>
<p>This isn't the case any more.</p>
</li>
<li>
<p>CLI options <code>--arg-from-file</code> and <code>--arg-from-stdin</code> <a href="https://github.com/NixOS/nix/pull/10122">#10122</a></p>
<p>The new CLI option <code>--arg-from-file</code> <em>name</em> <em>path</em> passes the contents
of file <em>path</em> as a string value via the function argument <em>name</em> to a
Nix expression. Similarly, the new option <code>--arg-from-stdin</code> <em>name</em>
reads the contents of the string from standard input.</p>
</li>
<li>
<p>Concise error printing in <code>nix repl</code> <a href="https://github.com/NixOS/nix/pull/9928">#9928</a></p>
<p>Previously, if an element of a list or attribute set threw an error while
evaluating, <code>nix repl</code> would print the entire error (including source location
information) inline. This output was clumsy and difficult to parse:</p>
<pre><code>nix-repl&gt; { err = builtins.throw "uh oh!"; }
{ err = «error:
       … while calling the 'throw' builtin
         at «string»:1:9:
            1| { err = builtins.throw "uh oh!"; }
             |         ^

       error: uh oh!»; }
</code></pre>
<p>Now, only the error message is displayed, making the output much more readable.</p>
<pre><code>nix-repl&gt; { err = builtins.throw "uh oh!"; }
{ err = «error: uh oh!»; }
</code></pre>
<p>However, if the whole expression being evaluated throws an error, source
locations and (if applicable) a stack trace are printed, just like you'd expect:</p>
<pre><code>nix-repl&gt; builtins.throw "uh oh!"
error:
       … while calling the 'throw' builtin
         at «string»:1:1:
            1| builtins.throw "uh oh!"
             | ^

       error: uh oh!
</code></pre>
</li>
<li>
<p><code>--debugger</code> can now access bindings from <code>let</code> expressions <a href="https://github.com/NixOS/nix/issues/8827">#8827</a> <a href="https://github.com/NixOS/nix/pull/9918">#9918</a></p>
<p>Breakpoints and errors in the bindings of a <code>let</code> expression can now access
those bindings in the debugger. Previously, only the body of <code>let</code> expressions
could access those bindings.</p>
</li>
<li>
<p>Enter the <code>--debugger</code> when <code>builtins.trace</code> is called if <code>debugger-on-trace</code> is set <a href="https://github.com/NixOS/nix/pull/9914">#9914</a></p>
<p>If the <code>debugger-on-trace</code> option is set and <code>--debugger</code> is given,
<code>builtins.trace</code> calls will behave similarly to <code>builtins.break</code> and will enter
the debug REPL. This is useful for determining where warnings are being emitted
from.</p>
</li>
<li>
<p>Debugger prints source position information <a href="https://github.com/NixOS/nix/pull/9913">#9913</a></p>
<p>The <code>--debugger</code> now prints source location information, instead of the
pointers of source location information. Before:</p>
<pre><code>nix-repl&gt; :bt
0: while evaluating the attribute 'python311.pythonForBuild.pkgs'
0x600001522598
</code></pre>
<p>After:</p>
<pre><code>0: while evaluating the attribute 'python311.pythonForBuild.pkgs'
/nix/store/hg65h51xnp74ikahns9hyf3py5mlbbqq-source/overrides/default.nix:132:27

   131|
   132|       bootstrappingBase = pkgs.${self.python.pythonAttr}.pythonForBuild.pkgs;
      |                           ^
   133|     in
</code></pre>
</li>
<li>
<p>The <code>--debugger</code> will start more reliably in <code>let</code> expressions and function calls <a href="https://github.com/NixOS/nix/issues/6649">#6649</a> <a href="https://github.com/NixOS/nix/pull/9917">#9917</a></p>
<p>Previously, if you attempted to evaluate this file with the debugger:</p>
<pre><code class="language-nix">let
  a = builtins.trace "before inner break" (
    builtins.break "hello"
  );
  b = builtins.trace "before outer break" (
    builtins.break a
  );
in
  b
</code></pre>
<p>Nix would correctly enter the debugger at <code>builtins.break a</code>, but if you asked
it to <code>:continue</code>, it would skip over the <code>builtins.break "hello"</code> expression
entirely.</p>
<p>Now, Nix will correctly enter the debugger at both breakpoints.</p>
</li>
<li>
<p>Nested debuggers are no longer supported <a href="https://github.com/NixOS/nix/pull/9920">#9920</a></p>
<p>Previously, evaluating an expression that throws an error in the debugger would
enter a second, nested debugger:</p>
<pre><code>nix-repl&gt; builtins.throw "what"
error: what


Starting REPL to allow you to inspect the current state of the evaluator.

Welcome to Nix 2.18.1. Type :? for help.

nix-repl&gt;
</code></pre>
<p>Now, it just prints the error message like <code>nix repl</code>:</p>
<pre><code>nix-repl&gt; builtins.throw "what"
error:
       … while calling the 'throw' builtin
         at «string»:1:1:
            1| builtins.throw "what"
             | ^

       error: what
</code></pre>
</li>
<li>
<p>Consistent order of function arguments in printed expressions <a href="https://github.com/NixOS/nix/pull/9874">#9874</a></p>
<p>Function arguments are now printed in lexicographic order rather than the internal, creation-time based symbol order.</p>
</li>
<li>
<p>Fix duplicate attribute error positions for <code>inherit</code> <a href="https://github.com/NixOS/nix/pull/9874">#9874</a></p>
<p>When an <code>inherit</code> caused a duplicate attribute error the position of the error was not reported correctly, placing the error with the inherit itself or at the start of the bindings block instead of the offending attribute name.</p>
</li>
<li>
<p><code>inherit (x) ...</code> evaluates <code>x</code> only once <a href="https://github.com/NixOS/nix/pull/9847">#9847</a></p>
<p><code>inherit (x) a b ...</code> now evaluates the expression <code>x</code> only once for all inherited attributes rather than once for each inherited attribute.
This does not usually have a measurable impact, but side-effects (such as <code>builtins.trace</code>) would be duplicated and expensive expressions (such as derivations) could cause a measurable slowdown.</p>
</li>
<li>
<p>Store paths are allowed to start with <code>.</code> <a href="https://github.com/NixOS/nix/issues/912">#912</a> <a href="https://github.com/NixOS/nix/pull/9091">#9091</a> <a href="https://github.com/NixOS/nix/pull/9095">#9095</a> <a href="https://github.com/NixOS/nix/pull/9120">#9120</a> <a href="https://github.com/NixOS/nix/pull/9121">#9121</a> <a href="https://github.com/NixOS/nix/pull/9122">#9122</a> <a href="https://github.com/NixOS/nix/pull/9130">#9130</a> <a href="https://github.com/NixOS/nix/pull/9219">#9219</a> <a href="https://github.com/NixOS/nix/pull/9224">#9224</a> <a href="https://github.com/NixOS/nix/pull/9867">#9867</a></p>
<p>Leading periods were allowed by accident in Nix 2.4. The Nix team has considered this to be a bug, but this behavior has since been relied on by users, leading to unnecessary difficulties.
From now on, leading periods are supported. The names <code>.</code> and <code>..</code> are disallowed, as well as those starting with <code>.-</code> or <code>..-</code>.</p>
<p>Nix versions that denied leading periods are documented <a href="https://github.com/NixOS/nix/issues/912#issuecomment-1919583286">in the issue</a>.</p>
</li>
<li>
<p><code>nix repl</code> pretty-prints values <a href="https://github.com/NixOS/nix/pull/9931">#9931</a></p>
<p><code>nix repl</code> will now pretty-print values:</p>
<pre><code>{
  attrs = {
    a = {
      b = {
        c = { };
      };
    };
  };
  list = [ 1 ];
  list' = [
    1
    2
    3
  ];
}
</code></pre>
</li>
<li>
<p>Introduction of <code>--regex</code> and <code>--all</code> in <code>nix profile remove</code> and <code>nix profile upgrade</code> <a href="https://github.com/NixOS/nix/pull/10166">#10166</a></p>
<p>Previously the command-line arguments for <code>nix profile remove</code> and <code>nix profile upgrade</code> matched the package entries using regular expression.
For instance:</p>
<pre><code>nix profile remove '.*vim.*'
</code></pre>
<p>This would remove all packages that contain <code>vim</code> in their name.</p>
<p>In most cases, only singular package names were used to remove and upgrade packages. Mixing this with regular expressions sometimes lead to unintended behavior. For instance, <code>python3.1</code> could match <code>python311</code>.</p>
<p>To avoid unintended behavior, the arguments are now only matching exact names.</p>
<p>Matching using regular expressions is still possible by using the new <code>--regex</code> flag:</p>
<pre><code>nix profile remove --regex '.*vim.*'
</code></pre>
<p>One of the most useful cases for using regular expressions was to upgrade all packages. This was previously accomplished by:</p>
<pre><code>nix profile upgrade '.*'
</code></pre>
<p>With the introduction of the <code>--all</code> flag, this now becomes more straightforward:</p>
<pre><code>nix profile upgrade --all
</code></pre>
</li>
<li>
<p>Visual clutter in <code>--debugger</code> is reduced <a href="https://github.com/NixOS/nix/pull/9919">#9919</a></p>
<p>Before:</p>
<pre><code>info: breakpoint reached


Starting REPL to allow you to inspect the current state of the evaluator.

Welcome to Nix 2.20.0pre20231222_dirty. Type :? for help.

nix-repl&gt; :continue
error: uh oh


Starting REPL to allow you to inspect the current state of the evaluator.

Welcome to Nix 2.20.0pre20231222_dirty. Type :? for help.

nix-repl&gt;
</code></pre>
<p>After:</p>
<pre><code>info: breakpoint reached

Nix 2.20.0pre20231222_dirty debugger
Type :? for help.
nix-repl&gt; :continue
error: uh oh

nix-repl&gt;
</code></pre>
</li>
<li>
<p>Cycle detection in <code>nix repl</code> is simpler and more reliable <a href="https://github.com/NixOS/nix/issues/8672">#8672</a> <a href="https://github.com/NixOS/nix/pull/9926">#9926</a></p>
<p>The cycle detection in <code>nix repl</code>, <code>nix eval</code>, <code>builtins.trace</code>, and everywhere
else values are printed is now simpler and matches the cycle detection in
<code>nix-instantiate --eval</code> output.</p>
<p>Before:</p>
<pre><code>nix eval --expr 'let self = { inherit self; }; in self'
{ self = { self = «repeated»; }; }
</code></pre>
<p>After:</p>
<pre><code>{ self = «repeated»; }
</code></pre>
</li>
<li>
<p>In the debugger, <code>while evaluating the attribute</code> errors now include position information <a href="https://github.com/NixOS/nix/pull/9915">#9915</a></p>
<p>Before:</p>
<pre><code>0: while evaluating the attribute 'python311.pythonForBuild.pkgs'
0x600001522598
</code></pre>
<p>After:</p>
<pre><code>0: while evaluating the attribute 'python311.pythonForBuild.pkgs'
/nix/store/hg65h51xnp74ikahns9hyf3py5mlbbqq-source/overrides/default.nix:132:27

   131|
   132|       bootstrappingBase = pkgs.${self.python.pythonAttr}.pythonForBuild.pkgs;
      |                           ^
   133|     in
</code></pre>
</li>
<li>
<p>Stack size is increased on macOS <a href="https://github.com/NixOS/nix/pull/9860">#9860</a></p>
<p>Previously, Nix would set the stack size to 64MiB on Linux, but would leave the
stack size set to the default (approximately 8KiB) on macOS. Now, the stack
size is correctly set to 64MiB on macOS as well, which should reduce stack
overflow segfaults in deeply-recursive Nix expressions.</p>
</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../release-notes/rl-2.22.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../release-notes/rl-2.20.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../release-notes/rl-2.22.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../release-notes/rl-2.20.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->
        <script src="../redirects.js"></script>


    </div>
    </body>
</html>
