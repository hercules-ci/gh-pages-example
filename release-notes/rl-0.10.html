<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Release 0.10 (2006-10-06) - Nix 2.28.3 Reference Manual</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="../highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="../tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../custom.css">


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "../";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Nix 2.28.3 Reference Manual</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/NixOS/nix" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/NixOS/nix/tree/master/doc/manual/source/release-notes/rl-0.10.md" title="Suggest an edit" aria-label="Suggest an edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="release-010-2006-10-06"><a class="header" href="#release-010-2006-10-06">Release 0.10 (2006-10-06)</a></h1>
<blockquote>
<p><strong>Note</strong></p>
<p>This version of Nix uses Berkeley DB 4.4 instead of 4.3. The database
is upgraded automatically, but you should be careful not to use old
versions of Nix that still use Berkeley DB 4.3. In particular, if you
use a Nix installed through Nix, you should run</p>
<pre><code>$ nix-store --clear-substitutes
</code></pre>
<p>first.</p>
</blockquote>
<blockquote>
<p><strong>Warning</strong></p>
<p>Also, the database schema has changed slighted to fix a performance
issue (see below). When you run any Nix 0.10 command for the first
time, the database will be upgraded automatically. This is
irreversible.</p>
</blockquote>
<ul>
<li>
<p><code>nix-env</code> usability improvements:</p>
<ul>
<li>
<p>An option <code>--compare-versions</code> (or <code>-c</code>) has been added to
<code>nix-env                                                 --query</code> to allow you to compare installed versions of packages
to available versions, or vice versa. An easy way to see if you
are up to date with what’s in your subscribed channels is
<code>nix-env -qc \*</code>.</p>
</li>
<li>
<p><code>nix-env --query</code> now takes as arguments a list of package names
about which to show information, just like <code>--install</code>, etc.:
for example, <code>nix-env -q gcc</code>. Note that to show all
derivations, you need to specify <code>\*</code>.</p>
</li>
<li>
<p><code>nix-env -i                                                 pkgname</code> will now install the highest available version of
<em>pkgname</em>, rather than installing all available versions (which
would probably give collisions) (<code>NIX-31</code>).</p>
</li>
<li>
<p><code>nix-env (-i|-u) --dry-run</code> now shows exactly which missing
paths will be built or substituted.</p>
</li>
<li>
<p><code>nix-env -qa --description</code> shows human-readable descriptions of
packages, provided that they have a <code>meta.description</code> attribute
(which most packages in Nixpkgs don’t have yet).</p>
</li>
</ul>
</li>
<li>
<p>New language features:</p>
<ul>
<li>
<p>Reference scanning (which happens after each build) is much
faster and takes a constant amount of memory.</p>
</li>
<li>
<p>String interpolation. Expressions like</p>
<pre><code>"--with-freetype2-library=" + freetype + "/lib"
</code></pre>
<p>can now be written as</p>
<pre><code>"--with-freetype2-library=${freetype}/lib"
</code></pre>
<p>You can write arbitrary expressions within <code>${...}</code>, not just
identifiers.</p>
</li>
<li>
<p>Multi-line string literals.</p>
</li>
<li>
<p>String concatenations can now involve derivations, as in the
example <code>"--with-freetype2-library="                                                 + freetype + "/lib"</code>. This was not previously possible because
we need to register that a derivation that uses such a string is
dependent on <code>freetype</code>. The evaluator now properly propagates
this information. Consequently, the subpath operator (<code>~</code>) has
been deprecated.</p>
</li>
<li>
<p>Default values of function arguments can now refer to other
function arguments; that is, all arguments are in scope in the
default values (<code>NIX-45</code>).</p>
</li>
<li>
<p>Lots of new built-in primitives, such as functions for list
manipulation and integer arithmetic. See the manual for a
complete list. All primops are now available in the set
<code>builtins</code>, allowing one to test for the availability of primop
in a backwards-compatible way.</p>
</li>
<li>
<p>Real let-expressions: <code>let x = ...;                                                 ... z = ...; in ...</code>.</p>
</li>
</ul>
</li>
<li>
<p>New commands <code>nix-pack-closure</code> and <code>nix-unpack-closure</code> than can be
used to easily transfer a store path with all its dependencies to
another machine. Very convenient whenever you have some package on
your machine and you want to copy it somewhere else.</p>
</li>
<li>
<p>XML support:</p>
<ul>
<li>
<p><code>nix-env -q --xml</code> prints the installed or available packages in
an XML representation for easy processing by other tools.</p>
</li>
<li>
<p><code>nix-instantiate --eval-only                                                 --xml</code> prints an XML representation of the resulting term. (The
new flag <code>--strict</code> forces ‘deep’ evaluation of the result,
i.e., list elements and attributes are evaluated recursively.)</p>
</li>
<li>
<p>In Nix expressions, the primop <code>builtins.toXML</code> converts a term
to an XML representation. This is primarily useful for passing
structured information to builders.</p>
</li>
</ul>
</li>
<li>
<p>You can now unambiguously specify which derivation to build or
install in <code>nix-env</code>, <code>nix-instantiate</code> and <code>nix-build</code> using the
<code>--attr</code> / <code>-A</code> flags, which takes an attribute name as argument.
(Unlike symbolic package names such as <code>subversion-1.4.0</code>, attribute
names in an attribute set are unique.) For instance, a quick way to
perform a test build of a package in Nixpkgs is <code>nix-build         pkgs/top-level/all-packages.nix -A         foo</code>. <code>nix-env -q         --attr</code> shows the attribute names corresponding to each derivation.</p>
</li>
<li>
<p>If the top-level Nix expression used by <code>nix-env</code>, <code>nix-instantiate</code>
or <code>nix-build</code> evaluates to a function whose arguments all have
default values, the function will be called automatically. Also, the
new command-line switch <code>--arg         name         value</code> can be used to specify function arguments on the command
line.</p>
</li>
<li>
<p><code>nix-install-package --url         URL</code> allows a package to be installed directly from the given URL.</p>
</li>
<li>
<p>Nix now works behind an HTTP proxy server; just set the standard
environment variables <code>http_proxy</code>, <code>https_proxy</code>, <code>ftp_proxy</code> or
<code>all_proxy</code> appropriately. Functions such as <code>fetchurl</code> in Nixpkgs
also respect these variables.</p>
</li>
<li>
<p><code>nix-build -o         symlink</code> allows the symlink to the build result to be named
something other than <code>result</code>.</p>
</li>
<li>
<p>Platform support:</p>
<ul>
<li>
<p>Support for 64-bit platforms, provided a <a href="http://bugzilla.sen.cwi.nl:8080/show_bug.cgi?id=606">suitably patched ATerm
library</a> is
used. Also, files larger than 2 GiB are now supported.</p>
</li>
<li>
<p>Added support for Cygwin (Windows, <code>i686-cygwin</code>), Mac OS X on
Intel (<code>i686-darwin</code>) and Linux on PowerPC (<code>powerpc-linux</code>).</p>
</li>
<li>
<p>Users of SMP and multicore machines will appreciate that the
number of builds to be performed in parallel can now be
specified in the configuration file in the <code>build-max-jobs</code>
setting.</p>
</li>
</ul>
</li>
<li>
<p>Garbage collector improvements:</p>
<ul>
<li>
<p>Open files (such as running programs) are now used as roots of
the garbage collector. This prevents programs that have been
uninstalled from being garbage collected while they are still
running. The script that detects these additional runtime roots
(<code>find-runtime-roots.pl</code>) is inherently system-specific, but it
should work on Linux and on all platforms that have the <code>lsof</code>
utility.</p>
</li>
<li>
<p><code>nix-store --gc</code> (a.k.a. <code>nix-collect-garbage</code>) prints out the
number of bytes freed on standard output. <code>nix-store                                                 --gc --print-dead</code> shows how many bytes would be freed by an
actual garbage collection.</p>
</li>
<li>
<p><code>nix-collect-garbage -d</code> removes all old generations of <em>all</em>
profiles before calling the actual garbage collector (<code>nix-store                                                 --gc</code>). This is an easy way to get rid of all old packages in
the Nix store.</p>
</li>
<li>
<p><code>nix-store</code> now has an operation <code>--delete</code> to delete specific
paths from the Nix store. It won’t delete reachable
(non-garbage) paths unless <code>--ignore-liveness</code> is specified.</p>
</li>
</ul>
</li>
<li>
<p>Berkeley DB 4.4’s process registry feature is used to recover from
crashed Nix processes.</p>
</li>
<li>
<p>A performance issue has been fixed with the <code>referer</code> table, which
stores the inverse of the <code>references</code> table (i.e., it tells you
what store paths refer to a given path). Maintaining this table
could take a quadratic amount of time, as well as a quadratic amount
of Berkeley DB log file space (in particular when running the
garbage collector) (<code>NIX-23</code>).</p>
</li>
<li>
<p>Nix now catches the <code>TERM</code> and <code>HUP</code> signals in addition to the
<code>INT</code> signal. So you can now do a <code>killall         nix-store</code> without triggering a database recovery.</p>
</li>
<li>
<p><code>bsdiff</code> updated to version 4.3.</p>
</li>
<li>
<p>Substantial performance improvements in expression evaluation and
<code>nix-env -qa</code>, all thanks to <a href="http://valgrind.org/">Valgrind</a>.
Memory use has been reduced by a factor 8 or so. Big speedup by
memoisation of path hashing.</p>
</li>
<li>
<p>Lots of bug fixes, notably:</p>
<ul>
<li>
<p>Make sure that the garbage collector can run successfully when
the disk is full (<code>NIX-18</code>).</p>
</li>
<li>
<p><code>nix-env</code> now locks the profile to prevent races between
concurrent <code>nix-env</code> operations on the same profile (<code>NIX-7</code>).</p>
</li>
<li>
<p>Removed misleading messages from <code>nix-env -i</code> (e.g.,
<code>installing                                                 `foo'</code> followed by <code>uninstalling                                                 `foo'</code>) (<code>NIX-17</code>).</p>
</li>
</ul>
</li>
<li>
<p>Nix source distributions are a lot smaller now since we no longer
include a full copy of the Berkeley DB source distribution (but only
the bits we need).</p>
</li>
<li>
<p>Header files are now installed so that external programs can use the
Nix libraries.</p>
</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../release-notes/rl-0.10.1.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../release-notes/rl-0.9.2.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../release-notes/rl-0.10.1.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../release-notes/rl-0.9.2.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->
        <script src="../redirects.js"></script>


    </div>
    </body>
</html>
