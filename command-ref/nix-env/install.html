<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>nix-env --install - Nix 2.31.2+2 Reference Manual</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../../favicon-de23e50b.svg">
        <link rel="shortcut icon" href="../../favicon-8114d1fc.png">
        <link rel="stylesheet" href="../../css/variables-8adf115d.css">
        <link rel="stylesheet" href="../../css/general-2459343d.css">
        <link rel="stylesheet" href="../../css/chrome-ae938929.css">
        <link rel="stylesheet" href="../../css/print-9e4910d8.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../fonts/fonts-9644e21d.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="mdbook-highlight-css" href="../../highlight-493f70e1.css">
        <link rel="stylesheet" id="mdbook-tomorrow-night-css" href="../../tomorrow-night-4c0ae647.css">
        <link rel="stylesheet" id="mdbook-ayu-highlight-css" href="../../ayu-highlight-3fdfc3ac.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../../custom-80d08c7f.css">


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "../../";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "../../searchindex-1b44a9cb.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../../toc-711a10f4.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="mdbook-body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="mdbook-sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("mdbook-sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="mdbook-sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../../toc.html"></iframe>
            </noscript>
            <div id="mdbook-sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="mdbook-page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="mdbook-menu-bar-hover-placeholder"></div>
                <div id="mdbook-menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="mdbook-sidebar-toggle" class="icon-button" for="mdbook-sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="mdbook-sidebar">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M0 96C0 78.3 14.3 64 32 64H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H416c17.7 0 32 14.3 32 32z"/></svg></span>
                        </label>
                        <button id="mdbook-theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="mdbook-theme-list">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M371.3 367.1c27.3-3.9 51.9-19.4 67.2-42.9L600.2 74.1c12.6-19.5 9.4-45.3-7.6-61.2S549.7-4.4 531.1 9.6L294.4 187.2c-24 18-38.2 46.1-38.4 76.1L371.3 367.1zm-19.6 25.4l-116-104.4C175.9 290.3 128 339.6 128 400c0 3.9 .2 7.8 .6 11.6c1.8 17.5-10.2 36.4-27.8 36.4H96c-17.7 0-32 14.3-32 32s14.3 32 32 32H240c61.9 0 112-50.1 112-112c0-2.5-.1-5-.2-7.5z"/></svg></span>
                        </button>
                        <ul id="mdbook-theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-ayu">Ayu</button></li>
                        </ul>
                        <button id="mdbook-search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="mdbook-searchbar">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352c79.5 0 144-64.5 144-144s-64.5-144-144-144S64 128.5 64 208s64.5 144 144 144z"/></svg></span>
                        </button>
                    </div>

                    <h1 class="menu-title">Nix 2.31.2+2 Reference Manual</h1>

                    <div class="right-buttons">
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <span class=fa-svg id="print-button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M128 0C92.7 0 64 28.7 64 64v96h64V64H354.7L384 93.3V160h64V93.3c0-17-6.7-33.3-18.7-45.3L400 18.7C388 6.7 371.7 0 354.7 0H128zM384 352v32 64H128V384 368 352H384zm64 32h32c17.7 0 32-14.3 32-32V256c0-35.3-28.7-64-64-64H64c-35.3 0-64 28.7-64 64v96c0 17.7 14.3 32 32 32H64v64c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V384zm-16-88c-13.3 0-24-10.7-24-24s10.7-24 24-24s24 10.7 24 24s-10.7 24-24 24z"/></svg></span>
                        </a>
                        <a href="https://github.com/NixOS/nix" title="Git repository" aria-label="Git repository">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></span>
                        </a>
                        <a href="https://github.com/NixOS/nix/tree/master/doc/manual/source/command-ref/nix-env/install.md" title="Suggest an edit" aria-label="Suggest an edit" rel="edit">
                            <span class=fa-svg id="git-edit-button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M421.7 220.3l-11.3 11.3-22.6 22.6-205 205c-6.6 6.6-14.8 11.5-23.8 14.1L30.8 511c-8.4 2.5-17.5 .2-23.7-6.1S-1.5 489.7 1 481.2L38.7 353.1c2.6-9 7.5-17.2 14.1-23.8l205-205 22.6-22.6 11.3-11.3 33.9 33.9 62.1 62.1 33.9 33.9zM96 353.9l-9.3 9.3c-.9 .9-1.6 2.1-2 3.4l-25.3 86 86-25.3c1.3-.4 2.5-1.1 3.4-2l9.3-9.3H112c-8.8 0-16-7.2-16-16V353.9zM453.3 19.3l39.4 39.4c25 25 25 65.5 0 90.5l-14.5 14.5-22.6 22.6-11.3 11.3-33.9-33.9-62.1-62.1L314.3 67.7l11.3-11.3 22.6-22.6 14.5-14.5c25-25 65.5-25 90.5 0z"/></svg></span>
                        </a>

                    </div>
                </div>

                <div id="mdbook-search-wrapper" class="hidden">
                    <form id="mdbook-searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="mdbook-searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="mdbook-searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <span class=fa-svg id="fa-spin"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M304 48c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zm0 416c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zM48 304c26.5 0 48-21.5 48-48s-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48zm464-48c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zM142.9 437c18.7-18.7 18.7-49.1 0-67.9s-49.1-18.7-67.9 0s-18.7 49.1 0 67.9s49.1 18.7 67.9 0zm0-294.2c18.7-18.7 18.7-49.1 0-67.9S93.7 56.2 75 75s-18.7 49.1 0 67.9s49.1 18.7 67.9 0zM369.1 437c18.7 18.7 49.1 18.7 67.9 0s18.7-49.1 0-67.9s-49.1-18.7-67.9 0s-18.7 49.1 0 67.9z"/></svg></span>
                            </div>
                        </div>
                    </form>
                    <div id="mdbook-searchresults-outer" class="searchresults-outer hidden">
                        <div id="mdbook-searchresults-header" class="searchresults-header"></div>
                        <ul id="mdbook-searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('mdbook-sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('mdbook-sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#mdbook-sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="mdbook-content" class="content">
                    <main>
                        <h1 id="name"><a class="header" href="#name">Name</a></h1>
<p><code>nix-env --install</code> - add packages to user environment</p>
<h1 id="synopsis"><a class="header" href="#synopsis">Synopsis</a></h1>
<p><code>nix-env</code> {<code>--install</code> | <code>-i</code>} <em>args…</em>
[{<code>--prebuilt-only</code> | <code>-b</code>}]
[{<code>--attr</code> | <code>-A</code>}]
[<code>--from-expression</code>] [<code>-E</code>]
[<code>--from-profile</code> <em>path</em>]
[<code>--preserve-installed</code> | <code>-P</code>]
[<code>--remove-all</code> | <code>-r</code>]
[<code>--priority</code> <em>priority</em>]</p>
<h1 id="description"><a class="header" href="#description">Description</a></h1>
<p>The <code>--install</code> operation creates a new user environment.
It is based on the current generation of the active <a href="../../command-ref/files/profiles.html">profile</a>, to which a set of <a href="../../store/store-path.html">store paths</a> described by <em>args</em> is added.</p>
<p>The arguments <em>args</em> map to store paths in a number of possible ways:</p>
<ul>
<li>
<p>By default, <em>args</em> is a set of names denoting derivations in the <a href="../../command-ref/files/default-nix-expression.html">default Nix expression</a>.
These are <a href="../../glossary.html#gloss-realise">realised</a>, and the resulting output paths are installed.
Currently installed derivations with a name equal to the name of a derivation being added are removed unless the option <code>--preserve-installed</code> is specified.</p>
<p>If there are multiple derivations matching a name in <em>args</em> that
have the same name (e.g., <code>gcc-3.3.6</code> and <code>gcc-4.1.1</code>), then the
derivation with the highest <em>priority</em> is used. A derivation can
define a priority by declaring the <code>meta.priority</code> attribute. This
attribute should be a number, with a higher value denoting a lower
priority. The default priority is <code>5</code>.</p>
<p>If there are multiple matching derivations with the same priority,
then the derivation with the highest version will be installed.</p>
<p>You can force the installation of multiple derivations with the same
name by being specific about the versions. For instance, <code>nix-env --install gcc-3.3.6 gcc-4.1.1</code> will install both version of GCC (and will
probably cause a user environment conflict!).</p>
</li>
<li>
<p>If <a href="#opt-attr"><code>--attr</code></a> / <code>-A</code> is specified, the arguments are <em>attribute paths</em> that select attributes from the <a href="../../command-ref/files/default-nix-expression.html">default Nix expression</a>.
This is faster than using derivation names and unambiguous.
Show the attribute paths of available packages with <a href="./query.html"><code>nix-env --query</code></a>:</p>
<pre><code class="language-console">nix-env --query --available --attr-path
</code></pre>
</li>
<li>
<p>If <code>--from-profile</code> <em>path</em> is given, <em>args</em> is a set of names
denoting installed <a href="../../store/store-path.html">store paths</a> in the profile <em>path</em>. This is an
easy way to copy user environment elements from one profile to
another.</p>
</li>
<li>
<p>If <code>--from-expression</code> is given, <em>args</em> are <a href="../../language/syntax.html#functions">Nix language functions</a> that are called with the <a href="../../command-ref/files/default-nix-expression.html">default Nix expression</a> as their single argument.
The derivations returned by those function calls are installed.
This allows derivations to be specified in an unambiguous way, which is necessary if there are multiple derivations with the same name.</p>
</li>
<li>
<p>If <code>--priority</code> <em>priority</em> is given, the priority of the derivations being installed is set to <em>priority</em>.
This can be used to override the priority of the derivations being installed.
This is useful if <em>args</em> are <a href="../../store/store-path.html">store paths</a>, which don’t have any priority information.</p>
</li>
<li>
<p>If <em>args</em> are <a href="../../store/store-path.html">store paths</a> that point to <a href="../../glossary.html#gloss-store-derivation">store derivations</a>, then those store derivations are <a href="../../glossary.html#gloss-realise">realised</a>, and the resulting output paths are installed.</p>
</li>
<li>
<p>If <em>args</em> are <a href="../../store/store-path.html">store paths</a> that do not point to store derivations, then these are <a href="../../glossary.html#gloss-realise">realised</a> and installed.</p>
</li>
<li>
<p>By default all <a href="../../language/derivations.html#attr-outputs">outputs</a> are installed for each <a href="../../glossary.html#gloss-store-derivation">store derivation</a>.
This can be overridden by adding a <code>meta.outputsToInstall</code> attribute on the derivation listing a subset of the output names.</p>
<p>Example:</p>
<p>The file <code>example.nix</code> defines a derivation with two outputs <code>foo</code> and <code>bar</code>, each containing a file.</p>
<pre><code class="language-nix"># example.nix
let
  pkgs = import &lt;nixpkgs&gt; {};
  command = ''
    ${pkgs.coreutils}/bin/mkdir -p $foo $bar
    echo foo &gt; $foo/foo-file
    echo bar &gt; $bar/bar-file
  '';
in
derivation {
  name = "example";
  builder = "${pkgs.bash}/bin/bash";
  args = [ "-c" command ];
  outputs = [ "foo" "bar" ];
  system = builtins.currentSystem;
}
</code></pre>
<p>Installing from this Nix expression will make files from both outputs appear in the current profile.</p>
<pre><code class="language-console">$ nix-env --install --file example.nix
installing 'example'
$ ls ~/.nix-profile
foo-file
bar-file
manifest.nix
</code></pre>
<p>Adding <code>meta.outputsToInstall</code> to that derivation will make <code>nix-env</code> only install files from the specified outputs.</p>
<pre><code class="language-nix"># example-outputs.nix
import ./example.nix // { meta.outputsToInstall = [ "bar" ]; }
</code></pre>
<pre><code class="language-console">$ nix-env --install --file example-outputs.nix
installing 'example'
$ ls ~/.nix-profile
bar-file
manifest.nix
</code></pre>
</li>
</ul>
<h1 id="options"><a class="header" href="#options">Options</a></h1>
<ul>
<li>
<p><code>--prebuilt-only</code> / <code>-b</code></p>
<p>Use only derivations for which a substitute is registered, i.e.,
there is a pre-built binary available that can be downloaded in lieu
of building the derivation. Thus, no packages will be built from
source.</p>
</li>
<li>
<p><code>--preserve-installed</code> / <code>-P</code></p>
<p>Do not remove derivations with a name matching one of the
derivations being installed. Usually, trying to have two versions of
the same package installed in the same generation of a profile will
lead to an error in building the generation, due to file name
clashes between the two versions. However, this is not the case for
all packages.</p>
</li>
<li>
<p><code>--remove-all</code> / <code>-r</code></p>
<p>Remove all previously installed packages first. This is equivalent
to running <code>nix-env --uninstall '.*'</code> first, except that everything happens
in a single transaction.</p>
</li>
</ul>
<h1 id="options-1"><a class="header" href="#options-1">Options</a></h1>
<p>The following options are allowed for all <code>nix-env</code> operations, but may not always have an effect.</p>
<ul>
<li>
<p><code>--file</code> / <code>-f</code> <em>path</em></p>
<p>Specifies the Nix expression (designated below as the <em>active Nix
expression</em>) used by the <code>--install</code>, <code>--upgrade</code>, and <code>--query --available</code> operations to obtain derivations. The default is
<code>~/.nix-defexpr</code>.</p>
<p>If the argument starts with <code>http://</code> or <code>https://</code>, it is
interpreted as the URL of a tarball that will be downloaded and
unpacked to a temporary location. The tarball must include a single
top-level directory containing at least a file named <code>default.nix</code>.</p>
</li>
<li>
<p><code>--profile</code> / <code>-p</code> <em>path</em></p>
<p>Specifies the profile to be used by those operations that operate on
a profile (designated below as the <em>active profile</em>). A profile is a
sequence of user environments called <em>generations</em>, one of which is
the <em>current generation</em>.</p>
</li>
<li>
<p><code>--dry-run</code></p>
<p>For the <code>--install</code>, <code>--upgrade</code>, <code>--uninstall</code>,
<code>--switch-generation</code>, <code>--delete-generations</code> and <code>--rollback</code>
operations, this flag will cause <code>nix-env</code> to print what <em>would</em> be
done if this flag had not been specified, without actually doing it.</p>
<p><code>--dry-run</code> also prints out which paths will be
<a href="../../glossary.html">substituted</a> (i.e., downloaded) and which paths
will be built from source (because no substitute is available).</p>
</li>
<li>
<p><code>--system-filter</code> <em>system</em></p>
<p>By default, operations such as <code>--query --available</code> show derivations matching any platform. This option
allows you to use derivations for the specified platform <em>system</em>.</p>
</li>
</ul>
<!-- Some of the options documented here are hardcopied from
     src/libcmd/common-eval-args.cc
-->
<h1 id="common-options"><a class="header" href="#common-options">Common Options</a></h1>
<p>Most Nix commands accept the following command-line options:</p>
<ul>
<li>
<p><span id="opt-help"><a href="#opt-help"><code>--help</code></a></span></p>
<p>Prints out a summary of the command syntax and exits.</p>
</li>
<li>
<p><span id="opt-version"><a href="#opt-version"><code>--version</code></a></span></p>
<p>Prints out the Nix version number on standard output and exits.</p>
</li>
<li>
<p><span id="opt-verbose"><a href="#opt-verbose"><code>--verbose</code></a></span> / <code>-v</code></p>
<p>Increases the level of verbosity of diagnostic messages printed on standard error.
For each Nix operation, the information printed on standard output is well-defined;
any diagnostic information is printed on standard error, never on standard output.</p>
<p>This option may be specified repeatedly.
Currently, the following verbosity levels exist:</p>
<ul>
<li>
<p><code>0</code> “Errors only”</p>
<p>Only print messages explaining why the Nix invocation failed.</p>
</li>
<li>
<p><code>1</code> “Informational”</p>
<p>Print <em>useful</em> messages about what Nix is doing.
This is the default.</p>
</li>
<li>
<p><code>2</code> “Talkative”</p>
<p>Print more informational messages.</p>
</li>
<li>
<p><code>3</code> “Chatty”</p>
<p>Print even more informational messages.</p>
</li>
<li>
<p><code>4</code> “Debug”</p>
<p>Print debug information.</p>
</li>
<li>
<p><code>5</code> “Vomit”</p>
<p>Print vast amounts of debug information.</p>
</li>
</ul>
</li>
<li>
<p><span id="opt-quiet"><a href="#opt-quiet"><code>--quiet</code></a></span></p>
<p>Decreases the level of verbosity of diagnostic messages printed on standard error.
This is the inverse option to <code>-v</code> / <code>--verbose</code>.</p>
<p>This option may be specified repeatedly.
See the previous verbosity levels list.</p>
</li>
<li>
<p><span id="opt-log-format"><a href="#opt-log-format"><code>--log-format</code></a></span> <em>format</em></p>
<p>This option can be used to change the output of the log format, with <em>format</em> being one of:</p>
<ul>
<li>
<p><code>raw</code></p>
<p>This is the raw format, as outputted by nix-build.</p>
</li>
<li>
<p><code>internal-json</code></p>
<p>Outputs the logs in a structured manner.</p>
<blockquote>
<p><strong>Warning</strong></p>
<p>While the schema itself is relatively stable, the format of
the error-messages (namely of the <code>msg</code>-field) can change
between releases.</p>
</blockquote>
</li>
<li>
<p><code>bar</code></p>
<p>Only display a progress bar during the builds.</p>
</li>
<li>
<p><code>bar-with-logs</code></p>
<p>Display the raw logs, with the progress bar at the bottom.</p>
</li>
</ul>
</li>
<li>
<p><span id="opt-no-build-output"><a href="#opt-no-build-output"><code>--no-build-output</code></a></span> / <code>-Q</code></p>
<p>By default, output written by builders to standard output and standard error is echoed to the Nix command’s standard error.
This option suppresses this behaviour.
Note that the builder’s standard output and error are always written to a log file in <code>prefix/nix/var/log/nix</code>.</p>
</li>
<li>
<p><span id="opt-max-jobs"><a href="#opt-max-jobs"><code>--max-jobs</code></a></span> / <code>-j</code> <em>number</em></p>
<p>Sets the maximum number of build jobs that Nix will perform in parallel to the specified number.
Specify <code>auto</code> to use the number of CPUs in the system.
The default is specified by the <code>max-jobs</code> configuration setting, which itself defaults to <code>1</code>.
A higher value is useful on SMP systems or to exploit I/O latency.</p>
<p>Setting it to <code>0</code> disallows building on the local machine, which is useful when you want builds to happen only on remote builders.</p>
</li>
<li>
<p><span id="opt-cores"><a href="#opt-cores"><code>--cores</code></a></span></p>
<p>Sets the value of the <code>NIX_BUILD_CORES</code> environment variable in the invocation of builders.
Builders can use this variable at their discretion to control the maximum amount of parallelism.
For instance, in Nixpkgs, if the derivation attribute <code>enableParallelBuilding</code> is set to <code>true</code>, the builder passes the <code>-jN</code> flag to GNU Make.
It defaults to the value of the <code>cores</code> configuration setting, if set, or <code>1</code> otherwise.
The value <code>0</code> means that the builder should use all available CPU cores in the system.</p>
</li>
<li>
<p><span id="opt-max-silent-time"><a href="#opt-max-silent-time"><code>--max-silent-time</code></a></span></p>
<p>Sets the maximum number of seconds that a builder can go without producing any data on standard output or standard error.
The default is specified by the <code>max-silent-time</code> configuration setting.
<code>0</code> means no time-out.</p>
</li>
<li>
<p><span id="opt-timeout"><a href="#opt-timeout"><code>--timeout</code></a></span></p>
<p>Sets the maximum number of seconds that a builder can run.
The default is specified by the <code>timeout</code> configuration setting.
<code>0</code> means no timeout.</p>
</li>
<li>
<p><span id="opt-keep-going"><a href="#opt-keep-going"><code>--keep-going</code></a></span> / <code>-k</code></p>
<p>Keep going in case of failed builds, to the greatest extent possible.
That is, if building an input of some derivation fails, Nix will still build the other inputs, but not the derivation itself.
Without this option, Nix stops if any build fails (except for builds of substitutes), possibly killing builds in progress (in case of parallel or distributed builds).</p>
</li>
<li>
<p><span id="opt-keep-failed"><a href="#opt-keep-failed"><code>--keep-failed</code></a></span> / <code>-K</code></p>
<p>Specifies that in case of a build failure, the temporary directory (usually in <code>/tmp</code>) in which the build takes place should not be deleted.
The path of the build directory is printed as an informational message.</p>
</li>
<li>
<p><span id="opt-fallback"><a href="#opt-fallback"><code>--fallback</code></a></span></p>
<p>Whenever Nix attempts to build a derivation for which substitutes are known for each output path, but realising the output paths through the substitutes fails, fall back on building the derivation.</p>
<p>The most common scenario in which this is useful is when we have registered substitutes in order to perform binary distribution from, say, a network repository.
If the repository is down, the realisation of the derivation will fail.
When this option is specified, Nix will build the derivation instead.
Thus, installation from binaries falls back on installation from source.
This option is not the default since it is generally not desirable for a transient failure in obtaining the substitutes to lead to a full build from source (with the related consumption of resources).</p>
</li>
<li>
<p><span id="opt-readonly-mode"><a href="#opt-readonly-mode"><code>--readonly-mode</code></a></span></p>
<p>When this option is used, no attempt is made to open the Nix database.
Most Nix operations do need database access, so those operations will fail.</p>
</li>
<li>
<p><span id="opt-arg"><a href="#opt-arg"><code>--arg</code></a></span> <em>name</em> <em>value</em></p>
<p>This option is accepted by <code>nix-env</code>, <code>nix-instantiate</code>, <code>nix-shell</code> and <code>nix-build</code>.
When evaluating Nix expressions, the expression evaluator will automatically try to call functions that it encounters.
It can automatically call functions for which every argument has a <a href="../../language/syntax.html#functions">default value</a> (e.g., <code>{ argName ?  defaultValue }: ...</code>).</p>
<p>With <code>--arg</code>, you can also call functions that have arguments without a default value (or override a default value).
That is, if the evaluator encounters a function with an argument named <em>name</em>, it will call it with value <em>value</em>.</p>
<p>For instance, the top-level <code>default.nix</code> in Nixpkgs is actually a function:</p>
<pre><code class="language-nix">{ # The system (e.g., `i686-linux') for which to build the packages.
  system ? builtins.currentSystem
  ...
}: ...
</code></pre>
<p>So if you call this Nix expression (e.g., when you do <code>nix-env --install --attr pkgname</code>), the function will be called automatically using the value <a href="../../language/builtins.html"><code>builtins.currentSystem</code></a> for the <code>system</code> argument.
You can override this using <code>--arg</code>, e.g., <code>nix-env --install --attr pkgname --arg system \"i686-freebsd\"</code>.
(Note that since the argument is a Nix string literal, you have to escape the quotes.)</p>
</li>
<li>
<p><span id="opt-arg-from-file"><a href="#opt-arg-from-file"><code>--arg-from-file</code></a></span> <em>name</em> <em>path</em></p>
<p>Pass the contents of file <em>path</em> as the argument <em>name</em> to Nix functions.</p>
</li>
<li>
<p><span id="opt-arg-from-stdin"><a href="#opt-arg-from-stdin"><code>--arg-from-stdin</code></a></span> <em>name</em></p>
<p>Pass the contents of stdin as the argument <em>name</em> to Nix functions.</p>
</li>
<li>
<p><span id="opt-argstr"><a href="#opt-argstr"><code>--argstr</code></a></span> <em>name</em> <em>value</em></p>
<p>This option is like <code>--arg</code>, only the value is not a Nix expression but a string.
So instead of <code>--arg system \"i686-linux\"</code> (the outer quotes are to keep the shell happy) you can say <code>--argstr system i686-linux</code>.</p>
</li>
<li>
<p><span id="opt-attr"><a href="#opt-attr"><code>--attr</code></a></span> / <code>-A</code> <em>attrPath</em></p>
<p>Select an attribute from the top-level Nix expression being evaluated.
(<code>nix-env</code>, <code>nix-instantiate</code>, <code>nix-build</code> and <code>nix-shell</code> only.)
The <em>attribute path</em> <em>attrPath</em> is a sequence of attribute names separated by dots.
For instance, given a top-level Nix expression <em>e</em>, the attribute path <code>xorg.xorgserver</code> would cause the expression <code>e.xorg.xorgserver</code> to be used.
See <a href="../../command-ref/nix-env/install.html"><code>nix-env --install</code></a> for some concrete examples.</p>
<p>In addition to attribute names, you can also specify array indices.
For instance, the attribute path <code>foo.3.bar</code> selects the <code>bar</code>
attribute of the fourth element of the array in the <code>foo</code> attribute
of the top-level expression.</p>
</li>
<li>
<p><span id="opt-eval-store"><a href="#opt-eval-store"><code>--eval-store</code></a></span> <em>store-url</em></p>
<p>The <a href="../../store/types/index.html#store-url-format">URL to the Nix store</a> to use for evaluation, i.e. where to store derivations (<code>.drv</code> files) and inputs referenced by them.</p>
</li>
<li>
<p><span id="opt-expr"><a href="#opt-expr"><code>--expr</code></a></span> / <code>-E</code></p>
<p>Interpret the command line arguments as a list of Nix expressions to be parsed and evaluated, rather than as a list of file names of Nix expressions.
(<code>nix-instantiate</code>, <code>nix-build</code> and <code>nix-shell</code> only.)</p>
<p>For <code>nix-shell</code>, this option is commonly used to give you a shell in which you can build the packages returned by the expression.
If you want to get a shell which contain the <em>built</em> packages ready for use, give your expression to the <code>nix-shell --packages </code> convenience flag instead.</p>
</li>
<li>
<p><span id="opt-I"><a href="#opt-I"><code>-I</code> / <code>--include</code></a></span> <em>path</em></p>
<p>Add an entry to the list of search paths used to resolve <a href="../../language/constructs/lookup-path.html">lookup paths</a>.
This option may be given multiple times.</p>
<p>Paths added through <code>-I</code> take precedence over the <a href="../../command-ref/conf-file.html#conf-nix-path"><code>nix-path</code> configuration setting</a> and the <a href="../../command-ref/env-common.html#env-NIX_PATH"><code>NIX_PATH</code> environment variable</a>.</p>
</li>
<li>
<p><span id="opt-impure"><a href="#opt-impure"><code>--impure</code></a></span></p>
<p>Allow access to mutable paths and repositories.</p>
</li>
<li>
<p><span id="opt-option"><a href="#opt-option"><code>--option</code></a></span> <em>name</em> <em>value</em></p>
<p>Set the Nix configuration option <em>name</em> to <em>value</em>.
This overrides settings in the Nix configuration file (see nix.conf5).</p>
</li>
<li>
<p><span id="opt-repair"><a href="#opt-repair"><code>--repair</code></a></span></p>
<p>Fix corrupted or missing store paths by redownloading or rebuilding them.
Note that this is slow because it requires computing a cryptographic hash of the contents of every path in the closure of the build.
Also note the warning under <code>nix-store --repair-path</code>.</p>
</li>
</ul>
<blockquote>
<p><strong>Note</strong></p>
<p>See <a href="../../command-ref/conf-file.html#command-line-flags"><code>man nix.conf</code></a> for overriding configuration settings with command line flags.</p>
</blockquote>
<h1 id="environment-variables"><a class="header" href="#environment-variables">Environment variables</a></h1>
<ul>
<li>
<p><code>NIX_PROFILE</code></p>
<p>Location of the Nix profile. Defaults to the target of the symlink
<code>~/.nix-profile</code>, if it exists, or <code>/nix/var/nix/profiles/default</code>
otherwise.</p>
</li>
</ul>
<h1 id="common-environment-variables"><a class="header" href="#common-environment-variables">Common Environment Variables</a></h1>
<p>Most Nix commands interpret the following environment variables:</p>
<ul>
<li>
<p><span id="env-IN_NIX_SHELL"><a href="#env-IN_NIX_SHELL"><code>IN_NIX_SHELL</code></a></span></p>
<p>Indicator that tells if the current environment was set up by
<code>nix-shell</code>. It can have the values <code>pure</code> or <code>impure</code>.</p>
</li>
<li>
<p><span id="env-NIX_PATH"><a href="#env-NIX_PATH"><code>NIX_PATH</code></a></span></p>
<p>A colon-separated list of search path entries used to resolve <a href="../../language/constructs/lookup-path.html">lookup paths</a>.</p>
<p>This environment variable overrides the value of the <a href="../../command-ref/conf-file.html#conf-nix-path"><code>nix-path</code> configuration setting</a>.</p>
<p>It can be extended using the <a href="../../command-ref/opt-common.html#opt-I"><code>-I</code> option</a>.</p>
<blockquote>
<p><strong>Example</strong></p>
<pre><code class="language-bash">$ export NIX_PATH=`/home/eelco/Dev:nixos-config=/etc/nixos
</code></pre>
</blockquote>
<p>If <code>NIX_PATH</code> is set to an empty string, resolving search paths will always fail.</p>
<blockquote>
<p><strong>Example</strong></p>
<pre><code class="language-bash">$ NIX_PATH= nix-instantiate --eval '&lt;nixpkgs&gt;'
error: file 'nixpkgs' was not found in the Nix search path (add it using $NIX_PATH or -I)
</code></pre>
</blockquote>
</li>
<li>
<p><span id="env-NIX_IGNORE_SYMLINK_STORE"><a href="#env-NIX_IGNORE_SYMLINK_STORE"><code>NIX_IGNORE_SYMLINK_STORE</code></a></span></p>
<p>Normally, the Nix store directory (typically <code>/nix/store</code>) is not
allowed to contain any symlink components. This is to prevent
“impure” builds. Builders sometimes “canonicalise” paths by
resolving all symlink components. Thus, builds on different machines
(with <code>/nix/store</code> resolving to different locations) could yield
different results. This is generally not a problem, except when
builds are deployed to machines where <code>/nix/store</code> resolves
differently. If you are sure that you’re not going to do that, you
can set <code>NIX_IGNORE_SYMLINK_STORE</code> to <code>1</code>.</p>
<p>Note that if you’re symlinking the Nix store so that you can put it
on another file system than the root file system, on Linux you’re
better off using <code>bind</code> mount points, e.g.,</p>
<pre><code class="language-console">$ mkdir /nix
$ mount -o bind /mnt/otherdisk/nix /nix
</code></pre>
<p>Consult the mount 8 manual page for details.</p>
</li>
<li>
<p><span id="env-NIX_STORE_DIR"><a href="#env-NIX_STORE_DIR"><code>NIX_STORE_DIR</code></a></span></p>
<p>Overrides the location of the Nix store (default <code>prefix/store</code>).</p>
</li>
<li>
<p><span id="env-NIX_DATA_DIR"><a href="#env-NIX_DATA_DIR"><code>NIX_DATA_DIR</code></a></span></p>
<p>Overrides the location of the Nix static data directory (default
<code>prefix/share</code>).</p>
</li>
<li>
<p><span id="env-NIX_LOG_DIR"><a href="#env-NIX_LOG_DIR"><code>NIX_LOG_DIR</code></a></span></p>
<p>Overrides the location of the Nix log directory (default
<code>prefix/var/log/nix</code>).</p>
</li>
<li>
<p><span id="env-NIX_STATE_DIR"><a href="#env-NIX_STATE_DIR"><code>NIX_STATE_DIR</code></a></span></p>
<p>Overrides the location of the Nix state directory (default
<code>prefix/var/nix</code>).</p>
</li>
<li>
<p><span id="env-NIX_CONF_DIR"><a href="#env-NIX_CONF_DIR"><code>NIX_CONF_DIR</code></a></span></p>
<p>Overrides the location of the system Nix configuration directory
(default <code>sysconfdir/nix</code>, i.e. <code>/etc/nix</code> on most systems).</p>
</li>
<li>
<p><span id="env-NIX_CONFIG"><a href="#env-NIX_CONFIG"><code>NIX_CONFIG</code></a></span></p>
<p>Applies settings from Nix configuration from the environment.
The content is treated as if it was read from a Nix configuration file.
Settings are separated by the newline character.</p>
</li>
<li>
<p><span id="env-NIX_USER_CONF_FILES"><a href="#env-NIX_USER_CONF_FILES"><code>NIX_USER_CONF_FILES</code></a></span></p>
<p>Overrides the location of the Nix user configuration files to load from.</p>
<p>The default are the locations according to the <a href="https://specifications.freedesktop.org/basedir-spec/basedir-spec-latest.html">XDG Base Directory Specification</a>.
See the <a href="#xdg-base-directories">XDG Base Directories</a> sub-section for details.</p>
<p>The variable is treated as a list separated by the <code>:</code> token.</p>
</li>
<li>
<p><span id="env-TMPDIR"><a href="#env-TMPDIR"><code>TMPDIR</code></a></span></p>
<p>Use the specified directory to store temporary files. In particular,
this includes temporary build directories; these can take up
substantial amounts of disk space. The default is <code>/tmp</code>.</p>
</li>
<li>
<p><span id="env-NIX_REMOTE"><a href="#env-NIX_REMOTE"><code>NIX_REMOTE</code></a></span></p>
<p>This variable should be set to <code>daemon</code> if you want to use the Nix
daemon to execute Nix operations. This is necessary in <a href="../../installation/multi-user.html">multi-user
Nix installations</a>. If the Nix
daemon’s Unix socket is at some non-standard path, this variable
should be set to <code>unix://path/to/socket</code>. Otherwise, it should be
left unset.</p>
</li>
<li>
<p><span id="env-NIX_SHOW_STATS"><a href="#env-NIX_SHOW_STATS"><code>NIX_SHOW_STATS</code></a></span></p>
<p>If set to <code>1</code>, Nix will print some evaluation statistics, such as
the number of values allocated.</p>
</li>
<li>
<p><span id="env-NIX_COUNT_CALLS"><a href="#env-NIX_COUNT_CALLS"><code>NIX_COUNT_CALLS</code></a></span></p>
<p>If set to <code>1</code>, Nix will print how often functions were called during
Nix expression evaluation. This is useful for profiling your Nix
expressions.</p>
</li>
<li>
<p><span id="env-GC_INITIAL_HEAP_SIZE"><a href="#env-GC_INITIAL_HEAP_SIZE"><code>GC_INITIAL_HEAP_SIZE</code></a></span></p>
<p>If Nix has been configured to use the Boehm garbage collector, this
variable sets the initial size of the heap in bytes. It defaults to
384 MiB. Setting it to a low value reduces memory consumption, but
will increase runtime due to the overhead of garbage collection.</p>
</li>
</ul>
<h2 id="xdg-base-directories"><a class="header" href="#xdg-base-directories">XDG Base Directories</a></h2>
<p>Nix follows the <a href="https://specifications.freedesktop.org/basedir-spec/basedir-spec-latest.html">XDG Base Directory Specification</a>.</p>
<p>For backwards compatibility, Nix commands will follow the standard only when <a href="../../command-ref/conf-file.html#conf-use-xdg-base-directories"><code>use-xdg-base-directories</code></a> is enabled.
<a href="../../command-ref/new-cli/nix.html">New Nix commands</a> (experimental) conform to the standard by default.</p>
<p>The following environment variables are used to determine locations of various state and configuration files:</p>
<ul>
<li><a href="#env-XDG_CONFIG_HOME" id="env-XDG_CONFIG_HOME"><code>XDG_CONFIG_HOME</code></a> (default <code>~/.config</code>)</li>
<li><a href="#env-XDG_STATE_HOME" id="env-XDG_STATE_HOME"><code>XDG_STATE_HOME</code></a> (default <code>~/.local/state</code>)</li>
<li><a href="#env-XDG_CACHE_HOME" id="env-XDG_CACHE_HOME"><code>XDG_CACHE_HOME</code></a> (default <code>~/.cache</code>)</li>
</ul>
<p>In addition, setting the following environment variables overrides the XDG base directories:</p>
<ul>
<li><a href="#env-NIX_CONFIG_HOME" id="env-NIX_CONFIG_HOME"><code>NIX_CONFIG_HOME</code></a> (default <code>$XDG_CONFIG_HOME/nix</code>)</li>
<li><a href="#env-NIX_STATE_HOME" id="env-NIX_STATE_HOME"><code>NIX_STATE_HOME</code></a> (default <code>$XDG_STATE_HOME/nix</code>)</li>
<li><a href="#env-NIX_CACHE_HOME" id="env-NIX_CACHE_HOME"><code>NIX_CACHE_HOME</code></a> (default <code>$XDG_CACHE_HOME/nix</code>)</li>
</ul>
<p>When <a href="../../command-ref/conf-file.html#conf-use-xdg-base-directories"><code>use-xdg-base-directories</code></a> is enabled, the configuration directory is:</p>
<ol>
<li><code>$NIX_CONFIG_HOME</code>, if it is defined</li>
<li>Otherwise, <code>$XDG_CONFIG_HOME/nix</code>, if <code>XDG_CONFIG_HOME</code> is defined</li>
<li>Otherwise, <code>~/.config/nix</code>.</li>
</ol>
<p>Likewise for the state and cache directories.</p>
<h1 id="examples"><a class="header" href="#examples">Examples</a></h1>
<p>To install a package using a specific attribute path from the active Nix expression:</p>
<pre><code class="language-console">$ nix-env --install --attr gcc40mips
installing `gcc-4.0.2'
$ nix-env --install --attr xorg.xorgserver
installing `xorg-server-1.2.0'
</code></pre>
<p>To install a specific version of <code>gcc</code> using the derivation name:</p>
<pre><code class="language-console">$ nix-env --install gcc-3.3.2
installing `gcc-3.3.2'
uninstalling `gcc-3.1'
</code></pre>
<p>Using attribute path for selecting a package is preferred,
as it is much faster and there will not be multiple matches.</p>
<p>Note the previously installed version is removed, since
<code>--preserve-installed</code> was not specified.</p>
<p>To install an arbitrary version:</p>
<pre><code class="language-console">$ nix-env --install gcc
installing `gcc-3.3.2'
</code></pre>
<p>To install all derivations in the Nix expression <code>foo.nix</code>:</p>
<pre><code class="language-console">$ nix-env --file ~/foo.nix --install '.*'
</code></pre>
<p>To copy the store path with symbolic name <code>gcc</code> from another profile:</p>
<pre><code class="language-console">$ nix-env --install --from-profile /nix/var/nix/profiles/foo gcc
</code></pre>
<p>To install a specific <a href="../../glossary.html#gloss-store-derivation">store derivation</a> (typically created by
<code>nix-instantiate</code>):</p>
<pre><code class="language-console">$ nix-env --install /nix/store/fibjb1bfbpm5mrsxc4mh2d8n37sxh91i-gcc-3.4.3.drv
</code></pre>
<p>To install a specific output path:</p>
<pre><code class="language-console">$ nix-env --install /nix/store/y3cgx0xj1p4iv9x0pnnmdhr8iyg741vk-gcc-3.4.3
</code></pre>
<p>To install from a Nix expression specified on the command-line:</p>
<pre><code class="language-console">$ nix-env --file ./foo.nix --install --expr \
    'f: (f {system = "i686-linux";}).subversionWithJava'
</code></pre>
<p>I.e., this evaluates to <code>(f: (f {system = "i686-linux";}).subversionWithJava) (import ./foo.nix)</code>, thus selecting
the <code>subversionWithJava</code> attribute from the set returned by calling the
function defined in <code>./foo.nix</code>.</p>
<p>A dry-run tells you which paths will be downloaded or built from source:</p>
<pre><code class="language-console">$ nix-env --file '&lt;nixpkgs&gt;' --install --attr hello --dry-run
(dry run; not doing anything)
installing ‘hello-2.10’
this path will be fetched (0.04 MiB download, 0.19 MiB unpacked):
  /nix/store/wkhdf9jinag5750mqlax6z2zbwhqb76n-hello-2.10
  ...
</code></pre>
<p>To install Firefox from the latest revision in the Nixpkgs/NixOS 14.12
channel:</p>
<pre><code class="language-console">$ nix-env --file https://github.com/NixOS/nixpkgs/archive/nixos-14.12.tar.gz --install --attr firefox
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../command-ref/nix-env/delete-generations.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"/></svg></span>
                            </a>

                            <a rel="next prefetch" href="../../command-ref/nix-env/list-generations.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"/></svg></span>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../command-ref/nix-env/delete-generations.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"/></svg></span>
                    </a>

                    <a rel="next prefetch" href="../../command-ref/nix-env/list-generations.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"/></svg></span>
                    </a>
            </nav>

        </div>

        <template id=fa-eye><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM432 256c0 79.5-64.5 144-144 144s-144-64.5-144-144s64.5-144 144-144s144 64.5 144 144zM288 192c0 35.3-28.7 64-64 64c-11.5 0-22.3-3-31.6-8.4c-.2 2.8-.4 5.5-.4 8.4c0 53 43 96 96 96s96-43 96-96s-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6z"/></svg></span></template>
        <template id=fa-eye-slash><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M38.8 5.1C28.4-3.1 13.3-1.2 5.1 9.2S-1.2 34.7 9.2 42.9l592 464c10.4 8.2 25.5 6.3 33.7-4.1s6.3-25.5-4.1-33.7L525.6 386.7c39.6-40.6 66.4-86.1 79.9-118.4c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C465.5 68.8 400.8 32 320 32c-68.2 0-125 26.3-169.3 60.8L38.8 5.1zM223.1 149.5C248.6 126.2 282.7 112 320 112c79.5 0 144 64.5 144 144c0 24.9-6.3 48.3-17.4 68.7L408 294.5c5.2-11.8 8-24.8 8-38.5c0-53-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6c0 10.2-2.4 19.8-6.6 28.3l-90.3-70.8zm223.1 298L373 389.9c-16.4 6.5-34.3 10.1-53 10.1c-79.5 0-144-64.5-144-144c0-6.9 .5-13.6 1.4-20.2L83.1 161.5C60.3 191.2 44 220.8 34.5 243.7c-3.3 7.9-3.3 16.7 0 24.6c14.9 35.7 46.2 87.7 93 131.1C174.5 443.2 239.2 480 320 480c47.8 0 89.9-12.9 126.2-32.5z"/></svg></span></template>
        <template id=fa-copy><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M502.6 70.63l-61.25-61.25C435.4 3.371 427.2 0 418.7 0H255.1c-35.35 0-64 28.66-64 64l.0195 256C192 355.4 220.7 384 256 384h192c35.2 0 64-28.8 64-64V93.25C512 84.77 508.6 76.63 502.6 70.63zM464 320c0 8.836-7.164 16-16 16H255.1c-8.838 0-16-7.164-16-16L239.1 64.13c0-8.836 7.164-16 16-16h128L384 96c0 17.67 14.33 32 32 32h47.1V320zM272 448c0 8.836-7.164 16-16 16H63.1c-8.838 0-16-7.164-16-16L47.98 192.1c0-8.836 7.164-16 16-16H160V128H63.99c-35.35 0-64 28.65-64 64l.0098 256C.002 483.3 28.66 512 64 512h192c35.2 0 64-28.8 64-64v-32h-47.1L272 448z"/></svg></span></template>
        <template id=fa-play><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80V432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"/></svg></span></template>
        <template id=fa-clock-rotate-left><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M75 75L41 41C25.9 25.9 0 36.6 0 57.9V168c0 13.3 10.7 24 24 24H134.1c21.4 0 32.1-25.9 17-41l-30.8-30.8C155 85.5 203 64 256 64c106 0 192 86 192 192s-86 192-192 192c-40.8 0-78.6-12.7-109.7-34.4c-14.5-10.1-34.4-6.6-44.6 7.9s-6.6 34.4 7.9 44.6C151.2 495 201.7 512 256 512c141.4 0 256-114.6 256-256S397.4 0 256 0C185.3 0 121.3 28.7 75 75zm181 53c-13.3 0-24 10.7-24 24V256c0 6.4 2.5 12.5 7 17l72 72c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-65-65V152c0-13.3-10.7-24-24-24z"/></svg></span></template>



        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../elasticlunr-ef4e11c1.min.js"></script>
        <script src="../../mark-09e88c2c.min.js"></script>
        <script src="../../searcher-c2a407aa.js"></script>

        <script src="../../clipboard-1626706a.min.js"></script>
        <script src="../../highlight-862e895d.js"></script>
        <script src="../../book-a0b12cfe.js"></script>

        <!-- Custom JS scripts -->
        <script src="../../redirects-4afb32ee.js"></script>



    </div>
    </body>
</html>
