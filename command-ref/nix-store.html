<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>nix-store - Nix Reference Manual</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../custom.css">

    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../introduction.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="../quick-start.html"><strong aria-hidden="true">2.</strong> Quick Start</a></li><li class="chapter-item expanded "><a href="../installation/installation.html"><strong aria-hidden="true">3.</strong> Installation</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../installation/supported-platforms.html"><strong aria-hidden="true">3.1.</strong> Supported Platforms</a></li><li class="chapter-item expanded "><a href="../installation/installing-binary.html"><strong aria-hidden="true">3.2.</strong> Installing a Binary Distribution</a></li><li class="chapter-item expanded "><a href="../installation/installing-source.html"><strong aria-hidden="true">3.3.</strong> Installing Nix from Source</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../installation/prerequisites-source.html"><strong aria-hidden="true">3.3.1.</strong> Prerequisites</a></li><li class="chapter-item expanded "><a href="../installation/obtaining-source.html"><strong aria-hidden="true">3.3.2.</strong> Obtaining a Source Distribution</a></li><li class="chapter-item expanded "><a href="../installation/building-source.html"><strong aria-hidden="true">3.3.3.</strong> Building Nix from Source</a></li></ol></li><li class="chapter-item expanded "><a href="../installation/installing-docker.html"><strong aria-hidden="true">3.4.</strong> Using Nix within Docker</a></li><li class="chapter-item expanded "><a href="../installation/nix-security.html"><strong aria-hidden="true">3.5.</strong> Security</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../installation/single-user.html"><strong aria-hidden="true">3.5.1.</strong> Single-User Mode</a></li><li class="chapter-item expanded "><a href="../installation/multi-user.html"><strong aria-hidden="true">3.5.2.</strong> Multi-User Mode</a></li></ol></li><li class="chapter-item expanded "><a href="../installation/env-variables.html"><strong aria-hidden="true">3.6.</strong> Environment Variables</a></li><li class="chapter-item expanded "><a href="../installation/upgrading.html"><strong aria-hidden="true">3.7.</strong> Upgrading Nix</a></li></ol></li><li class="chapter-item expanded "><a href="../package-management/package-management.html"><strong aria-hidden="true">4.</strong> Package Management</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../package-management/basic-package-mgmt.html"><strong aria-hidden="true">4.1.</strong> Basic Package Management</a></li><li class="chapter-item expanded "><a href="../package-management/profiles.html"><strong aria-hidden="true">4.2.</strong> Profiles</a></li><li class="chapter-item expanded "><a href="../package-management/garbage-collection.html"><strong aria-hidden="true">4.3.</strong> Garbage Collection</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../package-management/garbage-collector-roots.html"><strong aria-hidden="true">4.3.1.</strong> Garbage Collector Roots</a></li></ol></li><li class="chapter-item expanded "><a href="../package-management/channels.html"><strong aria-hidden="true">4.4.</strong> Channels</a></li><li class="chapter-item expanded "><a href="../package-management/sharing-packages.html"><strong aria-hidden="true">4.5.</strong> Sharing Packages Between Machines</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../package-management/binary-cache-substituter.html"><strong aria-hidden="true">4.5.1.</strong> Serving a Nix store via HTTP</a></li><li class="chapter-item expanded "><a href="../package-management/copy-closure.html"><strong aria-hidden="true">4.5.2.</strong> Copying Closures via SSH</a></li><li class="chapter-item expanded "><a href="../package-management/ssh-substituter.html"><strong aria-hidden="true">4.5.3.</strong> Serving a Nix store via SSH</a></li><li class="chapter-item expanded "><a href="../package-management/s3-substituter.html"><strong aria-hidden="true">4.5.4.</strong> Serving a Nix store via S3</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../language/index.html"><strong aria-hidden="true">5.</strong> Nix Language</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../language/values.html"><strong aria-hidden="true">5.1.</strong> Data Types</a></li><li class="chapter-item expanded "><a href="../language/constructs.html"><strong aria-hidden="true">5.2.</strong> Language Constructs</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../language/string-interpolation.html"><strong aria-hidden="true">5.2.1.</strong> String interpolation</a></li></ol></li><li class="chapter-item expanded "><a href="../language/operators.html"><strong aria-hidden="true">5.3.</strong> Operators</a></li><li class="chapter-item expanded "><a href="../language/derivations.html"><strong aria-hidden="true">5.4.</strong> Derivations</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../language/advanced-attributes.html"><strong aria-hidden="true">5.4.1.</strong> Advanced Attributes</a></li></ol></li><li class="chapter-item expanded "><a href="../language/builtin-constants.html"><strong aria-hidden="true">5.5.</strong> Built-in Constants</a></li><li class="chapter-item expanded "><a href="../language/builtins.html"><strong aria-hidden="true">5.6.</strong> Built-in Functions</a></li></ol></li><li class="chapter-item expanded "><a href="../advanced-topics/advanced-topics.html"><strong aria-hidden="true">6.</strong> Advanced Topics</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../advanced-topics/distributed-builds.html"><strong aria-hidden="true">6.1.</strong> Remote Builds</a></li><li class="chapter-item expanded "><a href="../advanced-topics/cores-vs-jobs.html"><strong aria-hidden="true">6.2.</strong> Tuning Cores and Jobs</a></li><li class="chapter-item expanded "><a href="../advanced-topics/diff-hook.html"><strong aria-hidden="true">6.3.</strong> Verifying Build Reproducibility</a></li><li class="chapter-item expanded "><a href="../advanced-topics/post-build-hook.html"><strong aria-hidden="true">6.4.</strong> Using the post-build-hook</a></li></ol></li><li class="chapter-item expanded "><a href="../command-ref/command-ref.html"><strong aria-hidden="true">7.</strong> Command Reference</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../command-ref/opt-common.html"><strong aria-hidden="true">7.1.</strong> Common Options</a></li><li class="chapter-item expanded "><a href="../command-ref/env-common.html"><strong aria-hidden="true">7.2.</strong> Common Environment Variables</a></li><li class="chapter-item expanded "><a href="../command-ref/main-commands.html"><strong aria-hidden="true">7.3.</strong> Main Commands</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../command-ref/nix-env.html"><strong aria-hidden="true">7.3.1.</strong> nix-env</a></li><li class="chapter-item expanded "><a href="../command-ref/nix-build.html"><strong aria-hidden="true">7.3.2.</strong> nix-build</a></li><li class="chapter-item expanded "><a href="../command-ref/nix-shell.html"><strong aria-hidden="true">7.3.3.</strong> nix-shell</a></li><li class="chapter-item expanded "><a href="../command-ref/nix-store.html" class="active"><strong aria-hidden="true">7.3.4.</strong> nix-store</a></li></ol></li><li class="chapter-item expanded "><a href="../command-ref/utilities.html"><strong aria-hidden="true">7.4.</strong> Utilities</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../command-ref/nix-channel.html"><strong aria-hidden="true">7.4.1.</strong> nix-channel</a></li><li class="chapter-item expanded "><a href="../command-ref/nix-collect-garbage.html"><strong aria-hidden="true">7.4.2.</strong> nix-collect-garbage</a></li><li class="chapter-item expanded "><a href="../command-ref/nix-copy-closure.html"><strong aria-hidden="true">7.4.3.</strong> nix-copy-closure</a></li><li class="chapter-item expanded "><a href="../command-ref/nix-daemon.html"><strong aria-hidden="true">7.4.4.</strong> nix-daemon</a></li><li class="chapter-item expanded "><a href="../command-ref/nix-hash.html"><strong aria-hidden="true">7.4.5.</strong> nix-hash</a></li><li class="chapter-item expanded "><a href="../command-ref/nix-instantiate.html"><strong aria-hidden="true">7.4.6.</strong> nix-instantiate</a></li><li class="chapter-item expanded "><a href="../command-ref/nix-prefetch-url.html"><strong aria-hidden="true">7.4.7.</strong> nix-prefetch-url</a></li></ol></li><li class="chapter-item expanded "><a href="../command-ref/experimental-commands.html"><strong aria-hidden="true">7.5.</strong> Experimental Commands</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix.html"><strong aria-hidden="true">7.5.1.</strong> nix</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-build.html"><strong aria-hidden="true">7.5.2.</strong> nix build</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-bundle.html"><strong aria-hidden="true">7.5.3.</strong> nix bundle</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-copy.html"><strong aria-hidden="true">7.5.4.</strong> nix copy</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-daemon.html"><strong aria-hidden="true">7.5.5.</strong> nix daemon</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-describe-stores.html"><strong aria-hidden="true">7.5.6.</strong> nix describe-stores</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-develop.html"><strong aria-hidden="true">7.5.7.</strong> nix develop</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-doctor.html"><strong aria-hidden="true">7.5.8.</strong> nix doctor</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-edit.html"><strong aria-hidden="true">7.5.9.</strong> nix edit</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-eval.html"><strong aria-hidden="true">7.5.10.</strong> nix eval</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-flake.html"><strong aria-hidden="true">7.5.11.</strong> nix flake</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-flake-archive.html"><strong aria-hidden="true">7.5.12.</strong> nix flake archive</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-flake-check.html"><strong aria-hidden="true">7.5.13.</strong> nix flake check</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-flake-clone.html"><strong aria-hidden="true">7.5.14.</strong> nix flake clone</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-flake-info.html"><strong aria-hidden="true">7.5.15.</strong> nix flake info</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-flake-init.html"><strong aria-hidden="true">7.5.16.</strong> nix flake init</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-flake-lock.html"><strong aria-hidden="true">7.5.17.</strong> nix flake lock</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-flake-metadata.html"><strong aria-hidden="true">7.5.18.</strong> nix flake metadata</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-flake-new.html"><strong aria-hidden="true">7.5.19.</strong> nix flake new</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-flake-prefetch.html"><strong aria-hidden="true">7.5.20.</strong> nix flake prefetch</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-flake-show.html"><strong aria-hidden="true">7.5.21.</strong> nix flake show</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-flake-update.html"><strong aria-hidden="true">7.5.22.</strong> nix flake update</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-fmt.html"><strong aria-hidden="true">7.5.23.</strong> nix fmt</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-hash.html"><strong aria-hidden="true">7.5.24.</strong> nix hash</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-hash-file.html"><strong aria-hidden="true">7.5.25.</strong> nix hash file</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-hash-path.html"><strong aria-hidden="true">7.5.26.</strong> nix hash path</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-hash-to-base16.html"><strong aria-hidden="true">7.5.27.</strong> nix hash to-base16</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-hash-to-base32.html"><strong aria-hidden="true">7.5.28.</strong> nix hash to-base32</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-hash-to-base64.html"><strong aria-hidden="true">7.5.29.</strong> nix hash to-base64</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-hash-to-sri.html"><strong aria-hidden="true">7.5.30.</strong> nix hash to-sri</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-help.html"><strong aria-hidden="true">7.5.31.</strong> nix help</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-key.html"><strong aria-hidden="true">7.5.32.</strong> nix key</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-key-convert-secret-to-public.html"><strong aria-hidden="true">7.5.33.</strong> nix key convert-secret-to-public</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-key-generate-secret.html"><strong aria-hidden="true">7.5.34.</strong> nix key generate-secret</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-log.html"><strong aria-hidden="true">7.5.35.</strong> nix log</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-nar.html"><strong aria-hidden="true">7.5.36.</strong> nix nar</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-nar-cat.html"><strong aria-hidden="true">7.5.37.</strong> nix nar cat</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-nar-dump-path.html"><strong aria-hidden="true">7.5.38.</strong> nix nar dump-path</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-nar-ls.html"><strong aria-hidden="true">7.5.39.</strong> nix nar ls</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-path-info.html"><strong aria-hidden="true">7.5.40.</strong> nix path-info</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-print-dev-env.html"><strong aria-hidden="true">7.5.41.</strong> nix print-dev-env</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-profile.html"><strong aria-hidden="true">7.5.42.</strong> nix profile</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-profile-diff-closures.html"><strong aria-hidden="true">7.5.43.</strong> nix profile diff-closures</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-profile-history.html"><strong aria-hidden="true">7.5.44.</strong> nix profile history</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-profile-install.html"><strong aria-hidden="true">7.5.45.</strong> nix profile install</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-profile-list.html"><strong aria-hidden="true">7.5.46.</strong> nix profile list</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-profile-remove.html"><strong aria-hidden="true">7.5.47.</strong> nix profile remove</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-profile-rollback.html"><strong aria-hidden="true">7.5.48.</strong> nix profile rollback</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-profile-upgrade.html"><strong aria-hidden="true">7.5.49.</strong> nix profile upgrade</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-profile-wipe-history.html"><strong aria-hidden="true">7.5.50.</strong> nix profile wipe-history</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-realisation.html"><strong aria-hidden="true">7.5.51.</strong> nix realisation</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-realisation-info.html"><strong aria-hidden="true">7.5.52.</strong> nix realisation info</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-registry.html"><strong aria-hidden="true">7.5.53.</strong> nix registry</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-registry-add.html"><strong aria-hidden="true">7.5.54.</strong> nix registry add</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-registry-list.html"><strong aria-hidden="true">7.5.55.</strong> nix registry list</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-registry-pin.html"><strong aria-hidden="true">7.5.56.</strong> nix registry pin</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-registry-remove.html"><strong aria-hidden="true">7.5.57.</strong> nix registry remove</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-repl.html"><strong aria-hidden="true">7.5.58.</strong> nix repl</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-run.html"><strong aria-hidden="true">7.5.59.</strong> nix run</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-search.html"><strong aria-hidden="true">7.5.60.</strong> nix search</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-shell.html"><strong aria-hidden="true">7.5.61.</strong> nix shell</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-show-config.html"><strong aria-hidden="true">7.5.62.</strong> nix show-config</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-show-derivation.html"><strong aria-hidden="true">7.5.63.</strong> nix show-derivation</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-store.html"><strong aria-hidden="true">7.5.64.</strong> nix store</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-store-add-file.html"><strong aria-hidden="true">7.5.65.</strong> nix store add-file</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-store-add-path.html"><strong aria-hidden="true">7.5.66.</strong> nix store add-path</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-store-cat.html"><strong aria-hidden="true">7.5.67.</strong> nix store cat</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-store-copy-log.html"><strong aria-hidden="true">7.5.68.</strong> nix store copy-log</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-store-copy-sigs.html"><strong aria-hidden="true">7.5.69.</strong> nix store copy-sigs</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-store-delete.html"><strong aria-hidden="true">7.5.70.</strong> nix store delete</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-store-diff-closures.html"><strong aria-hidden="true">7.5.71.</strong> nix store diff-closures</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-store-dump-path.html"><strong aria-hidden="true">7.5.72.</strong> nix store dump-path</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-store-gc.html"><strong aria-hidden="true">7.5.73.</strong> nix store gc</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-store-ls.html"><strong aria-hidden="true">7.5.74.</strong> nix store ls</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-store-make-content-addressed.html"><strong aria-hidden="true">7.5.75.</strong> nix store make-content-addressed</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-store-optimise.html"><strong aria-hidden="true">7.5.76.</strong> nix store optimise</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-store-path-from-hash-part.html"><strong aria-hidden="true">7.5.77.</strong> nix store path-from-hash-part</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-store-ping.html"><strong aria-hidden="true">7.5.78.</strong> nix store ping</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-store-prefetch-file.html"><strong aria-hidden="true">7.5.79.</strong> nix store prefetch-file</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-store-repair.html"><strong aria-hidden="true">7.5.80.</strong> nix store repair</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-store-sign.html"><strong aria-hidden="true">7.5.81.</strong> nix store sign</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-store-verify.html"><strong aria-hidden="true">7.5.82.</strong> nix store verify</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-upgrade-nix.html"><strong aria-hidden="true">7.5.83.</strong> nix upgrade-nix</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-why-depends.html"><strong aria-hidden="true">7.5.84.</strong> nix why-depends</a></li></ol></li><li class="chapter-item expanded "><a href="../command-ref/files.html"><strong aria-hidden="true">7.6.</strong> Files</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../command-ref/conf-file.html"><strong aria-hidden="true">7.6.1.</strong> nix.conf</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../architecture/architecture.html"><strong aria-hidden="true">8.</strong> Architecture</a></li><li class="chapter-item expanded "><a href="../glossary.html"><strong aria-hidden="true">9.</strong> Glossary</a></li><li class="chapter-item expanded "><a href="../contributing/contributing.html"><strong aria-hidden="true">10.</strong> Contributing</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../contributing/hacking.html"><strong aria-hidden="true">10.1.</strong> Hacking</a></li><li class="chapter-item expanded "><a href="../contributing/cli-guideline.html"><strong aria-hidden="true">10.2.</strong> CLI guideline</a></li></ol></li><li class="chapter-item expanded "><a href="../release-notes/release-notes.html"><strong aria-hidden="true">11.</strong> Release Notes</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../release-notes/rl-2.13.html"><strong aria-hidden="true">11.1.</strong> Release 2.13 (2023-01-17)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-2.12.html"><strong aria-hidden="true">11.2.</strong> Release 2.12 (2022-12-06)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-2.11.html"><strong aria-hidden="true">11.3.</strong> Release 2.11 (2022-08-25)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-2.10.html"><strong aria-hidden="true">11.4.</strong> Release 2.10 (2022-07-11)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-2.9.html"><strong aria-hidden="true">11.5.</strong> Release 2.9 (2022-05-30)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-2.8.html"><strong aria-hidden="true">11.6.</strong> Release 2.8 (2022-04-19)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-2.7.html"><strong aria-hidden="true">11.7.</strong> Release 2.7 (2022-03-07)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-2.6.html"><strong aria-hidden="true">11.8.</strong> Release 2.6 (2022-01-24)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-2.5.html"><strong aria-hidden="true">11.9.</strong> Release 2.5 (2021-12-13)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-2.4.html"><strong aria-hidden="true">11.10.</strong> Release 2.4 (2021-11-01)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-2.3.html"><strong aria-hidden="true">11.11.</strong> Release 2.3 (2019-09-04)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-2.2.html"><strong aria-hidden="true">11.12.</strong> Release 2.2 (2019-01-11)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-2.1.html"><strong aria-hidden="true">11.13.</strong> Release 2.1 (2018-09-02)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-2.0.html"><strong aria-hidden="true">11.14.</strong> Release 2.0 (2018-02-22)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-1.11.10.html"><strong aria-hidden="true">11.15.</strong> Release 1.11.10 (2017-06-12)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-1.11.html"><strong aria-hidden="true">11.16.</strong> Release 1.11 (2016-01-19)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-1.10.html"><strong aria-hidden="true">11.17.</strong> Release 1.10 (2015-09-03)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-1.9.html"><strong aria-hidden="true">11.18.</strong> Release 1.9 (2015-06-12)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-1.8.html"><strong aria-hidden="true">11.19.</strong> Release 1.8 (2014-12-14)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-1.7.html"><strong aria-hidden="true">11.20.</strong> Release 1.7 (2014-04-11)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-1.6.1.html"><strong aria-hidden="true">11.21.</strong> Release 1.6.1 (2013-10-28)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-1.6.html"><strong aria-hidden="true">11.22.</strong> Release 1.6 (2013-09-10)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-1.5.2.html"><strong aria-hidden="true">11.23.</strong> Release 1.5.2 (2013-05-13)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-1.5.html"><strong aria-hidden="true">11.24.</strong> Release 1.5 (2013-02-27)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-1.4.html"><strong aria-hidden="true">11.25.</strong> Release 1.4 (2013-02-26)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-1.3.html"><strong aria-hidden="true">11.26.</strong> Release 1.3 (2013-01-04)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-1.2.html"><strong aria-hidden="true">11.27.</strong> Release 1.2 (2012-12-06)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-1.1.html"><strong aria-hidden="true">11.28.</strong> Release 1.1 (2012-07-18)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-1.0.html"><strong aria-hidden="true">11.29.</strong> Release 1.0 (2012-05-11)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-0.16.html"><strong aria-hidden="true">11.30.</strong> Release 0.16 (2010-08-17)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-0.15.html"><strong aria-hidden="true">11.31.</strong> Release 0.15 (2010-03-17)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-0.14.html"><strong aria-hidden="true">11.32.</strong> Release 0.14 (2010-02-04)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-0.13.html"><strong aria-hidden="true">11.33.</strong> Release 0.13 (2009-11-05)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-0.12.html"><strong aria-hidden="true">11.34.</strong> Release 0.12 (2008-11-20)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-0.11.html"><strong aria-hidden="true">11.35.</strong> Release 0.11 (2007-12-31)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-0.10.1.html"><strong aria-hidden="true">11.36.</strong> Release 0.10.1 (2006-10-11)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-0.10.html"><strong aria-hidden="true">11.37.</strong> Release 0.10 (2006-10-06)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-0.9.2.html"><strong aria-hidden="true">11.38.</strong> Release 0.9.2 (2005-09-21)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-0.9.1.html"><strong aria-hidden="true">11.39.</strong> Release 0.9.1 (2005-09-20)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-0.9.html"><strong aria-hidden="true">11.40.</strong> Release 0.9 (2005-09-16)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-0.8.1.html"><strong aria-hidden="true">11.41.</strong> Release 0.8.1 (2005-04-13)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-0.8.html"><strong aria-hidden="true">11.42.</strong> Release 0.8 (2005-04-11)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-0.7.html"><strong aria-hidden="true">11.43.</strong> Release 0.7 (2005-01-12)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-0.6.html"><strong aria-hidden="true">11.44.</strong> Release 0.6 (2004-11-14)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-0.5.html"><strong aria-hidden="true">11.45.</strong> Release 0.5 and earlier</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Nix Reference Manual</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/NixOS/nix" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/NixOS/nix/tree/master/doc/manual/src/command-ref/nix-store.md" title="Suggest an edit" aria-label="Suggest an edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="name"><a class="header" href="#name">Name</a></h1>
<p><code>nix-store</code> - manipulate or query the Nix store</p>
<h1 id="synopsis"><a class="header" href="#synopsis">Synopsis</a></h1>
<p><code>nix-store</code> <em>operation</em> [<em>options…</em>] [<em>arguments…</em>]
[<code>--option</code> <em>name</em> <em>value</em>]
[<code>--add-root</code> <em>path</em>]</p>
<h1 id="description"><a class="header" href="#description">Description</a></h1>
<p>The command <code>nix-store</code> performs primitive operations on the Nix store.
You generally do not need to run this command manually.</p>
<p><code>nix-store</code> takes exactly one <em>operation</em> flag which indicates the
subcommand to be performed. These are documented below.</p>
<h1 id="common-options"><a class="header" href="#common-options">Common options</a></h1>
<p>This section lists the options that are common to all operations. These
options are allowed for every subcommand, though they may not always
have an effect.</p>
<ul>
<li>
<p><span id="opt-add-root"><a href="#opt-add-root"><code>--add-root</code></a></span> <em>path</em></p>
<p>Causes the result of a realisation (<code>--realise</code> and
<code>--force-realise</code>) to be registered as a root of the garbage
collector. <em>path</em> will be created as a symlink to the resulting
store path. In addition, a uniquely named symlink to <em>path</em> will
be created in <code>/nix/var/nix/gcroots/auto/</code>. For instance,</p>
<pre><code class="language-console">$ nix-store --add-root /home/eelco/bla/result -r ...

$ ls -l /nix/var/nix/gcroots/auto
lrwxrwxrwx    1 ... 2005-03-13 21:10 dn54lcypm8f8... -&gt; /home/eelco/bla/result

$ ls -l /home/eelco/bla/result
lrwxrwxrwx    1 ... 2005-03-13 21:10 /home/eelco/bla/result -&gt; /nix/store/1r11343n6qd4...-f-spot-0.0.10
</code></pre>
<p>Thus, when <code>/home/eelco/bla/result</code> is removed, the GC root in the
<code>auto</code> directory becomes a dangling symlink and will be ignored by
the collector.</p>
<blockquote>
<p><strong>Warning</strong></p>
<p>Note that it is not possible to move or rename GC roots, since
the symlink in the <code>auto</code> directory will still point to the old
location.</p>
</blockquote>
<p>If there are multiple results, then multiple symlinks will be
created by sequentially numbering symlinks beyond the first one
(e.g., <code>foo</code>, <code>foo-2</code>, <code>foo-3</code>, and so on).</p>
</li>
</ul>
<h1 id="operation---realise"><a class="header" href="#operation---realise">Operation <code>--realise</code></a></h1>
<h2 id="synopsis-1"><a class="header" href="#synopsis-1">Synopsis</a></h2>
<p><code>nix-store</code> {<code>--realise</code> | <code>-r</code>} <em>paths…</em> [<code>--dry-run</code>]</p>
<h2 id="description-1"><a class="header" href="#description-1">Description</a></h2>
<p>The operation <code>--realise</code> essentially “builds” the specified store
paths. Realisation is a somewhat overloaded term:</p>
<ul>
<li>
<p>If the store path is a <em>derivation</em>, realisation ensures that the
output paths of the derivation are <a href="../glossary.html">valid</a> (i.e.,
the output path and its closure exist in the file system). This
can be done in several ways. First, it is possible that the
outputs are already valid, in which case we are done
immediately. Otherwise, there may be <a href="../glossary.html">substitutes</a>
that produce the outputs (e.g., by downloading them). Finally, the
outputs can be produced by running the build task described
by the derivation.</p>
</li>
<li>
<p>If the store path is not a derivation, realisation ensures that the
specified path is valid (i.e., it and its closure exist in the file
system). If the path is already valid, we are done immediately.
Otherwise, the path and any missing paths in its closure may be
produced through substitutes. If there are no (successful)
substitutes, realisation fails.</p>
</li>
</ul>
<p>The output path of each derivation is printed on standard output. (For
non-derivations argument, the argument itself is printed.)</p>
<p>The following flags are available:</p>
<ul>
<li>
<p><code>--dry-run</code><br />
Print on standard error a description of what packages would be
built or downloaded, without actually performing the operation.</p>
</li>
<li>
<p><code>--ignore-unknown</code><br />
If a non-derivation path does not have a substitute, then silently
ignore it.</p>
</li>
<li>
<p><code>--check</code><br />
This option allows you to check whether a derivation is
deterministic. It rebuilds the specified derivation and checks
whether the result is bitwise-identical with the existing outputs,
printing an error if that’s not the case. The outputs of the
specified derivation must already exist. When used with <code>-K</code>, if an
output path is not identical to the corresponding output from the
previous build, the new output path is left in
<code>/nix/store/name.check.</code></p>
</li>
</ul>
<p>Special exit codes:</p>
<ul>
<li>
<p><code>100</code><br />
Generic build failure, the builder process returned with a non-zero
exit code.</p>
</li>
<li>
<p><code>101</code><br />
Build timeout, the build was aborted because it did not complete
within the specified <code>timeout</code>.</p>
</li>
<li>
<p><code>102</code><br />
Hash mismatch, the build output was rejected because it does not
match the <a href="../language/advanced-attributes.html"><code>outputHash</code> attribute of the
derivation</a>.</p>
</li>
<li>
<p><code>104</code><br />
Not deterministic, the build succeeded in check mode but the
resulting output is not binary reproducible.</p>
</li>
</ul>
<p>With the <code>--keep-going</code> flag it's possible for multiple failures to
occur, in this case the 1xx status codes are or combined using binary
or.</p>
<pre><code>1100100
   ^^^^
   |||`- timeout
   ||`-- output hash mismatch
   |`--- build failure
   `---- not deterministic
</code></pre>
<h2 id="examples"><a class="header" href="#examples">Examples</a></h2>
<p>This operation is typically used to build <a href="../glossary.html#gloss-store-derivation">store derivation</a>s produced by
<a href="./nix-instantiate.html"><code>nix-instantiate</code></a>:</p>
<pre><code class="language-console">$ nix-store -r $(nix-instantiate ./test.nix)
/nix/store/31axcgrlbfsxzmfff1gyj1bf62hvkby2-aterm-2.3.1
</code></pre>
<p>This is essentially what <a href="nix-build.html"><code>nix-build</code></a> does.</p>
<p>To test whether a previously-built derivation is deterministic:</p>
<pre><code class="language-console">$ nix-build '&lt;nixpkgs&gt;' -A hello --check -K
</code></pre>
<p>Use <a href="#operation---read-log"><code>--read-log</code></a> to show the stderr and stdout of a build:</p>
<pre><code class="language-console">$ nix-store --read-log $(nix-instantiate ./test.nix)
</code></pre>
<h1 id="operation---serve"><a class="header" href="#operation---serve">Operation <code>--serve</code></a></h1>
<h2 id="synopsis-2"><a class="header" href="#synopsis-2">Synopsis</a></h2>
<p><code>nix-store</code> <code>--serve</code> [<code>--write</code>]</p>
<h2 id="description-2"><a class="header" href="#description-2">Description</a></h2>
<p>The operation <code>--serve</code> provides access to the Nix store over stdin and
stdout, and is intended to be used as a means of providing Nix store
access to a restricted ssh user.</p>
<p>The following flags are available:</p>
<ul>
<li><code>--write</code><br />
Allow the connected client to request the realization of
derivations. In effect, this can be used to make the host act as a
remote builder.</li>
</ul>
<h2 id="examples-1"><a class="header" href="#examples-1">Examples</a></h2>
<p>To turn a host into a build server, the <code>authorized_keys</code> file can be
used to provide build access to a given SSH public key:</p>
<pre><code class="language-console">$ cat &lt;&lt;EOF &gt;&gt;/root/.ssh/authorized_keys
command=&quot;nice -n20 nix-store --serve --write&quot; ssh-rsa AAAAB3NzaC1yc2EAAAA...
EOF
</code></pre>
<h1 id="operation---gc"><a class="header" href="#operation---gc">Operation <code>--gc</code></a></h1>
<h2 id="synopsis-3"><a class="header" href="#synopsis-3">Synopsis</a></h2>
<p><code>nix-store</code> <code>--gc</code> [<code>--print-roots</code> | <code>--print-live</code> | <code>--print-dead</code>] [<code>--max-freed</code> <em>bytes</em>]</p>
<h2 id="description-3"><a class="header" href="#description-3">Description</a></h2>
<p>Without additional flags, the operation <code>--gc</code> performs a garbage
collection on the Nix store. That is, all paths in the Nix store not
reachable via file system references from a set of “roots”, are deleted.</p>
<p>The following suboperations may be specified:</p>
<ul>
<li>
<p><code>--print-roots</code><br />
This operation prints on standard output the set of roots used by
the garbage collector.</p>
</li>
<li>
<p><code>--print-live</code><br />
This operation prints on standard output the set of “live” store
paths, which are all the store paths reachable from the roots. Live
paths should never be deleted, since that would break consistency —
it would become possible that applications are installed that
reference things that are no longer present in the store.</p>
</li>
<li>
<p><code>--print-dead</code><br />
This operation prints out on standard output the set of “dead” store
paths, which is just the opposite of the set of live paths: any path
in the store that is not live (with respect to the roots) is dead.</p>
</li>
</ul>
<p>By default, all unreachable paths are deleted. The following options
control what gets deleted and in what order:</p>
<ul>
<li><code>--max-freed</code> <em>bytes</em><br />
Keep deleting paths until at least <em>bytes</em> bytes have been deleted,
then stop. The argument <em>bytes</em> can be followed by the
multiplicative suffix <code>K</code>, <code>M</code>, <code>G</code> or <code>T</code>, denoting KiB, MiB, GiB
or TiB units.</li>
</ul>
<p>The behaviour of the collector is also influenced by the
<code>keep-outputs</code> and <code>keep-derivations</code> settings in the Nix
configuration file.</p>
<p>By default, the collector prints the total number of freed bytes when it
finishes (or when it is interrupted). With <code>--print-dead</code>, it prints the
number of bytes that would be freed.</p>
<h2 id="examples-2"><a class="header" href="#examples-2">Examples</a></h2>
<p>To delete all unreachable paths, just do:</p>
<pre><code class="language-console">$ nix-store --gc
deleting `/nix/store/kq82idx6g0nyzsp2s14gfsc38npai7lf-cairo-1.0.4.tar.gz.drv'
...
8825586 bytes freed (8.42 MiB)
</code></pre>
<p>To delete at least 100 MiBs of unreachable paths:</p>
<pre><code class="language-console">$ nix-store --gc --max-freed $((100 * 1024 * 1024))
</code></pre>
<h1 id="operation---delete"><a class="header" href="#operation---delete">Operation <code>--delete</code></a></h1>
<h2 id="synopsis-4"><a class="header" href="#synopsis-4">Synopsis</a></h2>
<p><code>nix-store</code> <code>--delete</code> [<code>--ignore-liveness</code>] <em>paths…</em></p>
<h2 id="description-4"><a class="header" href="#description-4">Description</a></h2>
<p>The operation <code>--delete</code> deletes the store paths <em>paths</em> from the Nix
store, but only if it is safe to do so; that is, when the path is not
reachable from a root of the garbage collector. This means that you can
only delete paths that would also be deleted by <code>nix-store --gc</code>. Thus,
<code>--delete</code> is a more targeted version of <code>--gc</code>.</p>
<p>With the option <code>--ignore-liveness</code>, reachability from the roots is
ignored. However, the path still won’t be deleted if there are other
paths in the store that refer to it (i.e., depend on it).</p>
<h2 id="example"><a class="header" href="#example">Example</a></h2>
<pre><code class="language-console">$ nix-store --delete /nix/store/zq0h41l75vlb4z45kzgjjmsjxvcv1qk7-mesa-6.4
0 bytes freed (0.00 MiB)
error: cannot delete path `/nix/store/zq0h41l75vlb4z45kzgjjmsjxvcv1qk7-mesa-6.4' since it is still alive
</code></pre>
<h1 id="operation---query"><a class="header" href="#operation---query">Operation <code>--query</code></a></h1>
<h2 id="synopsis-5"><a class="header" href="#synopsis-5">Synopsis</a></h2>
<p><code>nix-store</code> {<code>--query</code> | <code>-q</code>}
{<code>--outputs</code> | <code>--requisites</code> | <code>-R</code> | <code>--references</code> |
<code>--referrers</code> | <code>--referrers-closure</code> | <code>--deriver</code> | <code>-d</code> |
<code>--graph</code> | <code>--tree</code> | <code>--binding</code> <em>name</em> | <code>-b</code> <em>name</em> | <code>--hash</code> |
<code>--size</code> | <code>--roots</code>}
[<code>--use-output</code>] [<code>-u</code>] [<code>--force-realise</code>] [<code>-f</code>]
<em>paths…</em></p>
<h2 id="description-5"><a class="header" href="#description-5">Description</a></h2>
<p>The operation <code>--query</code> displays various bits of information about the
store paths . The queries are described below. At most one query can be
specified. The default query is <code>--outputs</code>.</p>
<p>The paths <em>paths</em> may also be symlinks from outside of the Nix store, to
the Nix store. In that case, the query is applied to the target of the
symlink.</p>
<h2 id="common-query-options"><a class="header" href="#common-query-options">Common query options</a></h2>
<ul>
<li>
<p><code>--use-output</code>; <code>-u</code><br />
For each argument to the query that is a <a href="../glossary.html#gloss-store-derivation">store derivation</a>, apply the
query to the output path of the derivation instead.</p>
</li>
<li>
<p><code>--force-realise</code>; <code>-f</code><br />
Realise each argument to the query first (see <a href="#operation---realise"><code>nix-store --realise</code></a>).</p>
</li>
</ul>
<h2 id="queries"><a class="header" href="#queries">Queries</a></h2>
<ul>
<li>
<p><code>--outputs</code><br />
Prints out the <a href="../glossary.html">output paths</a> of the store
derivations <em>paths</em>. These are the paths that will be produced when
the derivation is built.</p>
</li>
<li>
<p><code>--requisites</code>; <code>-R</code><br />
Prints out the <a href="../glossary.html">closure</a> of the store path <em>paths</em>.</p>
<p>This query has one option:</p>
<ul>
<li><code>--include-outputs</code>
Also include the existing output paths of <a href="../glossary.html#gloss-store-derivation">store derivation</a>s,
and their closures.</li>
</ul>
<p>This query can be used to implement various kinds of deployment. A
<em>source deployment</em> is obtained by distributing the closure of a
store derivation. A <em>binary deployment</em> is obtained by distributing
the closure of an output path. A <em>cache deployment</em> (combined
source/binary deployment, including binaries of build-time-only
dependencies) is obtained by distributing the closure of a store
derivation and specifying the option <code>--include-outputs</code>.</p>
</li>
<li>
<p><code>--references</code><br />
Prints the set of <a href="../glossary.html">references</a> of the store paths
<em>paths</em>, that is, their immediate dependencies. (For <em>all</em>
dependencies, use <code>--requisites</code>.)</p>
</li>
<li>
<p><code>--referrers</code><br />
Prints the set of <em>referrers</em> of the store paths <em>paths</em>, that is,
the store paths currently existing in the Nix store that refer to
one of <em>paths</em>. Note that contrary to the references, the set of
referrers is not constant; it can change as store paths are added or
removed.</p>
</li>
<li>
<p><code>--referrers-closure</code><br />
Prints the closure of the set of store paths <em>paths</em> under the
referrers relation; that is, all store paths that directly or
indirectly refer to one of <em>paths</em>. These are all the path currently
in the Nix store that are dependent on <em>paths</em>.</p>
</li>
<li>
<p><code>--deriver</code>; <code>-d</code><br />
Prints the <a href="../glossary.html">deriver</a> of the store paths <em>paths</em>. If
the path has no deriver (e.g., if it is a source file), or if the
deriver is not known (e.g., in the case of a binary-only
deployment), the string <code>unknown-deriver</code> is printed.</p>
</li>
<li>
<p><code>--graph</code><br />
Prints the references graph of the store paths <em>paths</em> in the format
of the <code>dot</code> tool of AT&amp;T's <a href="http://www.graphviz.org/">Graphviz
package</a>. This can be used to visualise
dependency graphs. To obtain a build-time dependency graph, apply
this to a store derivation. To obtain a runtime dependency graph,
apply it to an output path.</p>
</li>
<li>
<p><code>--tree</code><br />
Prints the references graph of the store paths <em>paths</em> as a nested
ASCII tree. References are ordered by descending closure size; this
tends to flatten the tree, making it more readable. The query only
recurses into a store path when it is first encountered; this
prevents a blowup of the tree representation of the graph.</p>
</li>
<li>
<p><code>--graphml</code><br />
Prints the references graph of the store paths <em>paths</em> in the
<a href="http://graphml.graphdrawing.org/">GraphML</a> file format. This can be
used to visualise dependency graphs. To obtain a build-time
dependency graph, apply this to a <a href="../glossary.html#gloss-store-derivation">store derivation</a>. To obtain a
runtime dependency graph, apply it to an output path.</p>
</li>
<li>
<p><code>--binding</code> <em>name</em>; <code>-b</code> <em>name</em><br />
Prints the value of the attribute <em>name</em> (i.e., environment
variable) of the <a href="../glossary.html#gloss-store-derivation">store derivation</a>s <em>paths</em>. It is an error for a
derivation to not have the specified attribute.</p>
</li>
<li>
<p><code>--hash</code><br />
Prints the SHA-256 hash of the contents of the store paths <em>paths</em>
(that is, the hash of the output of <code>nix-store --dump</code> on the given
paths). Since the hash is stored in the Nix database, this is a fast
operation.</p>
</li>
<li>
<p><code>--size</code><br />
Prints the size in bytes of the contents of the store paths <em>paths</em>
— to be precise, the size of the output of <code>nix-store --dump</code> on
the given paths. Note that the actual disk space required by the
store paths may be higher, especially on filesystems with large
cluster sizes.</p>
</li>
<li>
<p><code>--roots</code><br />
Prints the garbage collector roots that point, directly or
indirectly, at the store paths <em>paths</em>.</p>
</li>
</ul>
<h2 id="examples-3"><a class="header" href="#examples-3">Examples</a></h2>
<p>Print the closure (runtime dependencies) of the <code>svn</code> program in the
current user environment:</p>
<pre><code class="language-console">$ nix-store -qR $(which svn)
/nix/store/5mbglq5ldqld8sj57273aljwkfvj22mc-subversion-1.1.4
/nix/store/9lz9yc6zgmc0vlqmn2ipcpkjlmbi51vv-glibc-2.3.4
...
</code></pre>
<p>Print the build-time dependencies of <code>svn</code>:</p>
<pre><code class="language-console">$ nix-store -qR $(nix-store -qd $(which svn))
/nix/store/02iizgn86m42q905rddvg4ja975bk2i4-grep-2.5.1.tar.bz2.drv
/nix/store/07a2bzxmzwz5hp58nf03pahrv2ygwgs3-gcc-wrapper.sh
/nix/store/0ma7c9wsbaxahwwl04gbw3fcd806ski4-glibc-2.3.4.drv
... lots of other paths ...
</code></pre>
<p>The difference with the previous example is that we ask the closure of
the derivation (<code>-qd</code>), not the closure of the output path that contains
<code>svn</code>.</p>
<p>Show the build-time dependencies as a tree:</p>
<pre><code class="language-console">$ nix-store -q --tree $(nix-store -qd $(which svn))
/nix/store/7i5082kfb6yjbqdbiwdhhza0am2xvh6c-subversion-1.1.4.drv
+---/nix/store/d8afh10z72n8l1cr5w42366abiblgn54-builder.sh
+---/nix/store/fmzxmpjx2lh849ph0l36snfj9zdibw67-bash-3.0.drv
|   +---/nix/store/570hmhmx3v57605cqg9yfvvyh0nnb8k8-bash
|   +---/nix/store/p3srsbd8dx44v2pg6nbnszab5mcwx03v-builder.sh
...
</code></pre>
<p>Show all paths that depend on the same OpenSSL library as <code>svn</code>:</p>
<pre><code class="language-console">$ nix-store -q --referrers $(nix-store -q --binding openssl $(nix-store -qd $(which svn)))
/nix/store/23ny9l9wixx21632y2wi4p585qhva1q8-sylpheed-1.0.0
/nix/store/5mbglq5ldqld8sj57273aljwkfvj22mc-subversion-1.1.4
/nix/store/dpmvp969yhdqs7lm2r1a3gng7pyq6vy4-subversion-1.1.3
/nix/store/l51240xqsgg8a7yrbqdx1rfzyv6l26fx-lynx-2.8.5
</code></pre>
<p>Show all paths that directly or indirectly depend on the Glibc (C
library) used by <code>svn</code>:</p>
<pre><code class="language-console">$ nix-store -q --referrers-closure $(ldd $(which svn) | grep /libc.so | awk '{print $3}')
/nix/store/034a6h4vpz9kds5r6kzb9lhh81mscw43-libgnomeprintui-2.8.2
/nix/store/15l3yi0d45prm7a82pcrknxdh6nzmxza-gawk-3.1.4
...
</code></pre>
<p>Note that <code>ldd</code> is a command that prints out the dynamic libraries used
by an ELF executable.</p>
<p>Make a picture of the runtime dependency graph of the current user
environment:</p>
<pre><code class="language-console">$ nix-store -q --graph ~/.nix-profile | dot -Tps &gt; graph.ps
$ gv graph.ps
</code></pre>
<p>Show every garbage collector root that points to a store path that
depends on <code>svn</code>:</p>
<pre><code class="language-console">$ nix-store -q --roots $(which svn)
/nix/var/nix/profiles/default-81-link
/nix/var/nix/profiles/default-82-link
/nix/var/nix/profiles/per-user/eelco/profile-97-link
</code></pre>
<h1 id="operation---add"><a class="header" href="#operation---add">Operation <code>--add</code></a></h1>
<h2 id="synopsis-6"><a class="header" href="#synopsis-6">Synopsis</a></h2>
<p><code>nix-store</code> <code>--add</code> <em>paths…</em></p>
<h2 id="description-6"><a class="header" href="#description-6">Description</a></h2>
<p>The operation <code>--add</code> adds the specified paths to the Nix store. It
prints the resulting paths in the Nix store on standard output.</p>
<h2 id="example-1"><a class="header" href="#example-1">Example</a></h2>
<pre><code class="language-console">$ nix-store --add ./foo.c
/nix/store/m7lrha58ph6rcnv109yzx1nk1cj7k7zf-foo.c
</code></pre>
<h1 id="operation---add-fixed"><a class="header" href="#operation---add-fixed">Operation <code>--add-fixed</code></a></h1>
<h2 id="synopsis-7"><a class="header" href="#synopsis-7">Synopsis</a></h2>
<p><code>nix-store</code> <code>--add-fixed</code> [<code>--recursive</code>] <em>algorithm</em> <em>paths…</em></p>
<h2 id="description-7"><a class="header" href="#description-7">Description</a></h2>
<p>The operation <code>--add-fixed</code> adds the specified paths to the Nix store.
Unlike <code>--add</code> paths are registered using the specified hashing
algorithm, resulting in the same output path as a fixed-output
derivation. This can be used for sources that are not available from a
public url or broke since the download expression was written.</p>
<p>This operation has the following options:</p>
<ul>
<li><code>--recursive</code><br />
Use recursive instead of flat hashing mode, used when adding
directories to the store.</li>
</ul>
<h2 id="example-2"><a class="header" href="#example-2">Example</a></h2>
<pre><code class="language-console">$ nix-store --add-fixed sha256 ./hello-2.10.tar.gz
/nix/store/3x7dwzq014bblazs7kq20p9hyzz0qh8g-hello-2.10.tar.gz
</code></pre>
<h1 id="operation---verify"><a class="header" href="#operation---verify">Operation <code>--verify</code></a></h1>
<h2 id="synopsis-8"><a class="header" href="#synopsis-8">Synopsis</a></h2>
<p><code>nix-store</code> <code>--verify</code> [<code>--check-contents</code>] [<code>--repair</code>]</p>
<h2 id="description-8"><a class="header" href="#description-8">Description</a></h2>
<p>The operation <code>--verify</code> verifies the internal consistency of the Nix
database, and the consistency between the Nix database and the Nix
store. Any inconsistencies encountered are automatically repaired.
Inconsistencies are generally the result of the Nix store or database
being modified by non-Nix tools, or of bugs in Nix itself.</p>
<p>This operation has the following options:</p>
<ul>
<li>
<p><code>--check-contents</code><br />
Checks that the contents of every valid store path has not been
altered by computing a SHA-256 hash of the contents and comparing it
with the hash stored in the Nix database at build time. Paths that
have been modified are printed out. For large stores,
<code>--check-contents</code> is obviously quite slow.</p>
</li>
<li>
<p><code>--repair</code><br />
If any valid path is missing from the store, or (if
<code>--check-contents</code> is given) the contents of a valid path has been
modified, then try to repair the path by redownloading it. See
<code>nix-store --repair-path</code> for details.</p>
</li>
</ul>
<h1 id="operation---verify-path"><a class="header" href="#operation---verify-path">Operation <code>--verify-path</code></a></h1>
<h2 id="synopsis-9"><a class="header" href="#synopsis-9">Synopsis</a></h2>
<p><code>nix-store</code> <code>--verify-path</code> <em>paths…</em></p>
<h2 id="description-9"><a class="header" href="#description-9">Description</a></h2>
<p>The operation <code>--verify-path</code> compares the contents of the given store
paths to their cryptographic hashes stored in Nix’s database. For every
changed path, it prints a warning message. The exit status is 0 if no
path has changed, and 1 otherwise.</p>
<h2 id="example-3"><a class="header" href="#example-3">Example</a></h2>
<p>To verify the integrity of the <code>svn</code> command and all its dependencies:</p>
<pre><code class="language-console">$ nix-store --verify-path $(nix-store -qR $(which svn))
</code></pre>
<h1 id="operation---repair-path"><a class="header" href="#operation---repair-path">Operation <code>--repair-path</code></a></h1>
<h2 id="synopsis-10"><a class="header" href="#synopsis-10">Synopsis</a></h2>
<p><code>nix-store</code> <code>--repair-path</code> <em>paths…</em></p>
<h2 id="description-10"><a class="header" href="#description-10">Description</a></h2>
<p>The operation <code>--repair-path</code> attempts to “repair” the specified paths
by redownloading them using the available substituters. If no
substitutes are available, then repair is not possible.</p>
<blockquote>
<p><strong>Warning</strong></p>
<p>During repair, there is a very small time window during which the old
path (if it exists) is moved out of the way and replaced with the new
path. If repair is interrupted in between, then the system may be left
in a broken state (e.g., if the path contains a critical system
component like the GNU C Library).</p>
</blockquote>
<h2 id="example-4"><a class="header" href="#example-4">Example</a></h2>
<pre><code class="language-console">$ nix-store --verify-path /nix/store/dj7a81wsm1ijwwpkks3725661h3263p5-glibc-2.13
path `/nix/store/dj7a81wsm1ijwwpkks3725661h3263p5-glibc-2.13' was modified!
  expected hash `2db57715ae90b7e31ff1f2ecb8c12ec1cc43da920efcbe3b22763f36a1861588',
  got `481c5aa5483ebc97c20457bb8bca24deea56550d3985cda0027f67fe54b808e4'

$ nix-store --repair-path /nix/store/dj7a81wsm1ijwwpkks3725661h3263p5-glibc-2.13
fetching path `/nix/store/d7a81wsm1ijwwpkks3725661h3263p5-glibc-2.13'...
…
</code></pre>
<h1 id="operation---dump"><a class="header" href="#operation---dump">Operation <code>--dump</code></a></h1>
<h2 id="synopsis-11"><a class="header" href="#synopsis-11">Synopsis</a></h2>
<p><code>nix-store</code> <code>--dump</code> <em>path</em></p>
<h2 id="description-11"><a class="header" href="#description-11">Description</a></h2>
<p>The operation <code>--dump</code> produces a NAR (Nix ARchive) file containing the
contents of the file system tree rooted at <em>path</em>. The archive is
written to standard output.</p>
<p>A NAR archive is like a TAR or Zip archive, but it contains only the
information that Nix considers important. For instance, timestamps are
elided because all files in the Nix store have their timestamp set to 0
anyway. Likewise, all permissions are left out except for the execute
bit, because all files in the Nix store have 444 or 555 permission.</p>
<p>Also, a NAR archive is <em>canonical</em>, meaning that “equal” paths always
produce the same NAR archive. For instance, directory entries are
always sorted so that the actual on-disk order doesn’t influence the
result.  This means that the cryptographic hash of a NAR dump of a
path is usable as a fingerprint of the contents of the path. Indeed,
the hashes of store paths stored in Nix’s database (see <code>nix-store -q --hash</code>) are SHA-256 hashes of the NAR dump of each store path.</p>
<p>NAR archives support filenames of unlimited length and 64-bit file
sizes. They can contain regular files, directories, and symbolic links,
but not other types of files (such as device nodes).</p>
<p>A Nix archive can be unpacked using <code>nix-store --restore</code>.</p>
<h1 id="operation---restore"><a class="header" href="#operation---restore">Operation <code>--restore</code></a></h1>
<h2 id="synopsis-12"><a class="header" href="#synopsis-12">Synopsis</a></h2>
<p><code>nix-store</code> <code>--restore</code> <em>path</em></p>
<h2 id="description-12"><a class="header" href="#description-12">Description</a></h2>
<p>The operation <code>--restore</code> unpacks a NAR archive to <em>path</em>, which must
not already exist. The archive is read from standard input.</p>
<h1 id="operation---export"><a class="header" href="#operation---export">Operation <code>--export</code></a></h1>
<h2 id="synopsis-13"><a class="header" href="#synopsis-13">Synopsis</a></h2>
<p><code>nix-store</code> <code>--export</code> <em>paths…</em></p>
<h2 id="description-13"><a class="header" href="#description-13">Description</a></h2>
<p>The operation <code>--export</code> writes a serialisation of the specified store
paths to standard output in a format that can be imported into another
Nix store with <code>nix-store --import</code>. This is like <code>nix-store --dump</code>, except that the NAR archive produced by that command doesn’t
contain the necessary meta-information to allow it to be imported into
another Nix store (namely, the set of references of the path).</p>
<p>This command does not produce a <em>closure</em> of the specified paths, so if
a store path references other store paths that are missing in the target
Nix store, the import will fail. To copy a whole closure, do something
like:</p>
<pre><code class="language-console">$ nix-store --export $(nix-store -qR paths) &gt; out
</code></pre>
<p>To import the whole closure again, run:</p>
<pre><code class="language-console">$ nix-store --import &lt; out
</code></pre>
<h1 id="operation---import"><a class="header" href="#operation---import">Operation <code>--import</code></a></h1>
<h2 id="synopsis-14"><a class="header" href="#synopsis-14">Synopsis</a></h2>
<p><code>nix-store</code> <code>--import</code></p>
<h2 id="description-14"><a class="header" href="#description-14">Description</a></h2>
<p>The operation <code>--import</code> reads a serialisation of a set of store paths
produced by <code>nix-store --export</code> from standard input and adds those
store paths to the Nix store. Paths that already exist in the Nix store
are ignored. If a path refers to another path that doesn’t exist in the
Nix store, the import fails.</p>
<h1 id="operation---optimise"><a class="header" href="#operation---optimise">Operation <code>--optimise</code></a></h1>
<h2 id="synopsis-15"><a class="header" href="#synopsis-15">Synopsis</a></h2>
<p><code>nix-store</code> <code>--optimise</code></p>
<h2 id="description-15"><a class="header" href="#description-15">Description</a></h2>
<p>The operation <code>--optimise</code> reduces Nix store disk space usage by finding
identical files in the store and hard-linking them to each other. It
typically reduces the size of the store by something like 25-35%. Only
regular files and symlinks are hard-linked in this manner. Files are
considered identical when they have the same NAR archive serialisation:
that is, regular files must have the same contents and permission
(executable or non-executable), and symlinks must have the same
contents.</p>
<p>After completion, or when the command is interrupted, a report on the
achieved savings is printed on standard error.</p>
<p>Use <code>-vv</code> or <code>-vvv</code> to get some progress indication.</p>
<h2 id="example-5"><a class="header" href="#example-5">Example</a></h2>
<pre><code class="language-console">$ nix-store --optimise
hashing files in `/nix/store/qhqx7l2f1kmwihc9bnxs7rc159hsxnf3-gcc-4.1.1'
...
541838819 bytes (516.74 MiB) freed by hard-linking 54143 files;
there are 114486 files with equal contents out of 215894 files in total
</code></pre>
<h1 id="operation---read-log"><a class="header" href="#operation---read-log">Operation <code>--read-log</code></a></h1>
<h2 id="synopsis-16"><a class="header" href="#synopsis-16">Synopsis</a></h2>
<p><code>nix-store</code> {<code>--read-log</code> | <code>-l</code>} <em>paths…</em></p>
<h2 id="description-16"><a class="header" href="#description-16">Description</a></h2>
<p>The operation <code>--read-log</code> prints the build log of the specified store
paths on standard output. The build log is whatever the builder of a
derivation wrote to standard output and standard error. If a store path
is not a derivation, the deriver of the store path is used.</p>
<p>Build logs are kept in <code>/nix/var/log/nix/drvs</code>. However, there is no
guarantee that a build log is available for any particular store path.
For instance, if the path was downloaded as a pre-built binary through a
substitute, then the log is unavailable.</p>
<h2 id="example-6"><a class="header" href="#example-6">Example</a></h2>
<pre><code class="language-console">$ nix-store -l $(which ktorrent)
building /nix/store/dhc73pvzpnzxhdgpimsd9sw39di66ph1-ktorrent-2.2.1
unpacking sources
unpacking source archive /nix/store/p8n1jpqs27mgkjw07pb5269717nzf5f8-ktorrent-2.2.1.tar.gz
ktorrent-2.2.1/
ktorrent-2.2.1/NEWS
...
</code></pre>
<h1 id="operation---dump-db"><a class="header" href="#operation---dump-db">Operation <code>--dump-db</code></a></h1>
<h2 id="synopsis-17"><a class="header" href="#synopsis-17">Synopsis</a></h2>
<p><code>nix-store</code> <code>--dump-db</code> [<em>paths…</em>]</p>
<h2 id="description-17"><a class="header" href="#description-17">Description</a></h2>
<p>The operation <code>--dump-db</code> writes a dump of the Nix database to standard
output. It can be loaded into an empty Nix store using <code>--load-db</code>. This
is useful for making backups and when migrating to different database
schemas.</p>
<p>By default, <code>--dump-db</code> will dump the entire Nix database. When one or
more store paths is passed, only the subset of the Nix database for
those store paths is dumped. As with <code>--export</code>, the user is responsible
for passing all the store paths for a closure. See <code>--export</code> for an
example.</p>
<h1 id="operation---load-db"><a class="header" href="#operation---load-db">Operation <code>--load-db</code></a></h1>
<h2 id="synopsis-18"><a class="header" href="#synopsis-18">Synopsis</a></h2>
<p><code>nix-store</code> <code>--load-db</code></p>
<h2 id="description-18"><a class="header" href="#description-18">Description</a></h2>
<p>The operation <code>--load-db</code> reads a dump of the Nix database created by
<code>--dump-db</code> from standard input and loads it into the Nix database.</p>
<h1 id="operation---print-env"><a class="header" href="#operation---print-env">Operation <code>--print-env</code></a></h1>
<h2 id="synopsis-19"><a class="header" href="#synopsis-19">Synopsis</a></h2>
<p><code>nix-store</code> <code>--print-env</code> <em>drvpath</em></p>
<h2 id="description-19"><a class="header" href="#description-19">Description</a></h2>
<p>The operation <code>--print-env</code> prints out the environment of a derivation
in a format that can be evaluated by a shell. The command line arguments
of the builder are placed in the variable <code>_args</code>.</p>
<h2 id="example-7"><a class="header" href="#example-7">Example</a></h2>
<pre><code class="language-console">$ nix-store --print-env $(nix-instantiate '&lt;nixpkgs&gt;' -A firefox)
…
export src; src='/nix/store/plpj7qrwcz94z2psh6fchsi7s8yihc7k-firefox-12.0.source.tar.bz2'
export stdenv; stdenv='/nix/store/7c8asx3yfrg5dg1gzhzyq2236zfgibnn-stdenv'
export system; system='x86_64-linux'
export _args; _args='-e /nix/store/9krlzvny65gdc8s7kpb6lkx8cd02c25c-default-builder.sh'
</code></pre>
<h1 id="operation---generate-binary-cache-key"><a class="header" href="#operation---generate-binary-cache-key">Operation <code>--generate-binary-cache-key</code></a></h1>
<h2 id="synopsis-20"><a class="header" href="#synopsis-20">Synopsis</a></h2>
<p><code>nix-store</code> <code>--generate-binary-cache-key</code> <em>key-name</em> <em>secret-key-file</em> <em>public-key-file</em></p>
<h2 id="description-20"><a class="header" href="#description-20">Description</a></h2>
<p>This command generates an <a href="http://ed25519.cr.yp.to/">Ed25519 key pair</a>
that can be used to create a signed binary cache. It takes three
mandatory parameters:</p>
<ol>
<li>
<p>A key name, such as <code>cache.example.org-1</code>, that is used to look up
keys on the client when it verifies signatures. It can be anything,
but it’s suggested to use the host name of your cache (e.g.
<code>cache.example.org</code>) with a suffix denoting the number of the key
(to be incremented every time you need to revoke a key).</p>
</li>
<li>
<p>The file name where the secret key is to be stored.</p>
</li>
<li>
<p>The file name where the public key is to be stored.</p>
</li>
</ol>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../command-ref/nix-shell.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../command-ref/utilities.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../command-ref/nix-shell.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../command-ref/utilities.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->
        <script src="../redirects.js"></script>


    </div>
    </body>
</html>
