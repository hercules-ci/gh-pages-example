<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>nix-env - Nix Reference Manual</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../custom.css">

    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../introduction.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="../quick-start.html"><strong aria-hidden="true">2.</strong> Quick Start</a></li><li class="chapter-item expanded "><a href="../installation/installation.html"><strong aria-hidden="true">3.</strong> Installation</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../installation/supported-platforms.html"><strong aria-hidden="true">3.1.</strong> Supported Platforms</a></li><li class="chapter-item expanded "><a href="../installation/installing-binary.html"><strong aria-hidden="true">3.2.</strong> Installing a Binary Distribution</a></li><li class="chapter-item expanded "><a href="../installation/installing-source.html"><strong aria-hidden="true">3.3.</strong> Installing Nix from Source</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../installation/prerequisites-source.html"><strong aria-hidden="true">3.3.1.</strong> Prerequisites</a></li><li class="chapter-item expanded "><a href="../installation/obtaining-source.html"><strong aria-hidden="true">3.3.2.</strong> Obtaining a Source Distribution</a></li><li class="chapter-item expanded "><a href="../installation/building-source.html"><strong aria-hidden="true">3.3.3.</strong> Building Nix from Source</a></li></ol></li><li class="chapter-item expanded "><a href="../installation/installing-docker.html"><strong aria-hidden="true">3.4.</strong> Using Nix within Docker</a></li><li class="chapter-item expanded "><a href="../installation/nix-security.html"><strong aria-hidden="true">3.5.</strong> Security</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../installation/single-user.html"><strong aria-hidden="true">3.5.1.</strong> Single-User Mode</a></li><li class="chapter-item expanded "><a href="../installation/multi-user.html"><strong aria-hidden="true">3.5.2.</strong> Multi-User Mode</a></li></ol></li><li class="chapter-item expanded "><a href="../installation/env-variables.html"><strong aria-hidden="true">3.6.</strong> Environment Variables</a></li><li class="chapter-item expanded "><a href="../installation/upgrading.html"><strong aria-hidden="true">3.7.</strong> Upgrading Nix</a></li></ol></li><li class="chapter-item expanded "><a href="../package-management/package-management.html"><strong aria-hidden="true">4.</strong> Package Management</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../package-management/basic-package-mgmt.html"><strong aria-hidden="true">4.1.</strong> Basic Package Management</a></li><li class="chapter-item expanded "><a href="../package-management/profiles.html"><strong aria-hidden="true">4.2.</strong> Profiles</a></li><li class="chapter-item expanded "><a href="../package-management/garbage-collection.html"><strong aria-hidden="true">4.3.</strong> Garbage Collection</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../package-management/garbage-collector-roots.html"><strong aria-hidden="true">4.3.1.</strong> Garbage Collector Roots</a></li></ol></li><li class="chapter-item expanded "><a href="../package-management/channels.html"><strong aria-hidden="true">4.4.</strong> Channels</a></li><li class="chapter-item expanded "><a href="../package-management/sharing-packages.html"><strong aria-hidden="true">4.5.</strong> Sharing Packages Between Machines</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../package-management/binary-cache-substituter.html"><strong aria-hidden="true">4.5.1.</strong> Serving a Nix store via HTTP</a></li><li class="chapter-item expanded "><a href="../package-management/copy-closure.html"><strong aria-hidden="true">4.5.2.</strong> Copying Closures via SSH</a></li><li class="chapter-item expanded "><a href="../package-management/ssh-substituter.html"><strong aria-hidden="true">4.5.3.</strong> Serving a Nix store via SSH</a></li><li class="chapter-item expanded "><a href="../package-management/s3-substituter.html"><strong aria-hidden="true">4.5.4.</strong> Serving a Nix store via S3</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../language/index.html"><strong aria-hidden="true">5.</strong> Nix Language</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../language/values.html"><strong aria-hidden="true">5.1.</strong> Data Types</a></li><li class="chapter-item expanded "><a href="../language/constructs.html"><strong aria-hidden="true">5.2.</strong> Language Constructs</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../language/string-interpolation.html"><strong aria-hidden="true">5.2.1.</strong> String interpolation</a></li></ol></li><li class="chapter-item expanded "><a href="../language/operators.html"><strong aria-hidden="true">5.3.</strong> Operators</a></li><li class="chapter-item expanded "><a href="../language/derivations.html"><strong aria-hidden="true">5.4.</strong> Derivations</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../language/advanced-attributes.html"><strong aria-hidden="true">5.4.1.</strong> Advanced Attributes</a></li></ol></li><li class="chapter-item expanded "><a href="../language/builtin-constants.html"><strong aria-hidden="true">5.5.</strong> Built-in Constants</a></li><li class="chapter-item expanded "><a href="../language/builtins.html"><strong aria-hidden="true">5.6.</strong> Built-in Functions</a></li></ol></li><li class="chapter-item expanded "><a href="../advanced-topics/advanced-topics.html"><strong aria-hidden="true">6.</strong> Advanced Topics</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../advanced-topics/distributed-builds.html"><strong aria-hidden="true">6.1.</strong> Remote Builds</a></li><li class="chapter-item expanded "><a href="../advanced-topics/cores-vs-jobs.html"><strong aria-hidden="true">6.2.</strong> Tuning Cores and Jobs</a></li><li class="chapter-item expanded "><a href="../advanced-topics/diff-hook.html"><strong aria-hidden="true">6.3.</strong> Verifying Build Reproducibility</a></li><li class="chapter-item expanded "><a href="../advanced-topics/post-build-hook.html"><strong aria-hidden="true">6.4.</strong> Using the post-build-hook</a></li></ol></li><li class="chapter-item expanded "><a href="../command-ref/command-ref.html"><strong aria-hidden="true">7.</strong> Command Reference</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../command-ref/opt-common.html"><strong aria-hidden="true">7.1.</strong> Common Options</a></li><li class="chapter-item expanded "><a href="../command-ref/env-common.html"><strong aria-hidden="true">7.2.</strong> Common Environment Variables</a></li><li class="chapter-item expanded "><a href="../command-ref/main-commands.html"><strong aria-hidden="true">7.3.</strong> Main Commands</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../command-ref/nix-env.html" class="active"><strong aria-hidden="true">7.3.1.</strong> nix-env</a></li><li class="chapter-item expanded "><a href="../command-ref/nix-build.html"><strong aria-hidden="true">7.3.2.</strong> nix-build</a></li><li class="chapter-item expanded "><a href="../command-ref/nix-shell.html"><strong aria-hidden="true">7.3.3.</strong> nix-shell</a></li><li class="chapter-item expanded "><a href="../command-ref/nix-store.html"><strong aria-hidden="true">7.3.4.</strong> nix-store</a></li></ol></li><li class="chapter-item expanded "><a href="../command-ref/utilities.html"><strong aria-hidden="true">7.4.</strong> Utilities</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../command-ref/nix-channel.html"><strong aria-hidden="true">7.4.1.</strong> nix-channel</a></li><li class="chapter-item expanded "><a href="../command-ref/nix-collect-garbage.html"><strong aria-hidden="true">7.4.2.</strong> nix-collect-garbage</a></li><li class="chapter-item expanded "><a href="../command-ref/nix-copy-closure.html"><strong aria-hidden="true">7.4.3.</strong> nix-copy-closure</a></li><li class="chapter-item expanded "><a href="../command-ref/nix-daemon.html"><strong aria-hidden="true">7.4.4.</strong> nix-daemon</a></li><li class="chapter-item expanded "><a href="../command-ref/nix-hash.html"><strong aria-hidden="true">7.4.5.</strong> nix-hash</a></li><li class="chapter-item expanded "><a href="../command-ref/nix-instantiate.html"><strong aria-hidden="true">7.4.6.</strong> nix-instantiate</a></li><li class="chapter-item expanded "><a href="../command-ref/nix-prefetch-url.html"><strong aria-hidden="true">7.4.7.</strong> nix-prefetch-url</a></li></ol></li><li class="chapter-item expanded "><a href="../command-ref/experimental-commands.html"><strong aria-hidden="true">7.5.</strong> Experimental Commands</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix.html"><strong aria-hidden="true">7.5.1.</strong> nix</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-build.html"><strong aria-hidden="true">7.5.2.</strong> nix build</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-bundle.html"><strong aria-hidden="true">7.5.3.</strong> nix bundle</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-copy.html"><strong aria-hidden="true">7.5.4.</strong> nix copy</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-daemon.html"><strong aria-hidden="true">7.5.5.</strong> nix daemon</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-describe-stores.html"><strong aria-hidden="true">7.5.6.</strong> nix describe-stores</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-develop.html"><strong aria-hidden="true">7.5.7.</strong> nix develop</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-doctor.html"><strong aria-hidden="true">7.5.8.</strong> nix doctor</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-edit.html"><strong aria-hidden="true">7.5.9.</strong> nix edit</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-eval.html"><strong aria-hidden="true">7.5.10.</strong> nix eval</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-flake.html"><strong aria-hidden="true">7.5.11.</strong> nix flake</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-flake-archive.html"><strong aria-hidden="true">7.5.12.</strong> nix flake archive</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-flake-check.html"><strong aria-hidden="true">7.5.13.</strong> nix flake check</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-flake-clone.html"><strong aria-hidden="true">7.5.14.</strong> nix flake clone</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-flake-info.html"><strong aria-hidden="true">7.5.15.</strong> nix flake info</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-flake-init.html"><strong aria-hidden="true">7.5.16.</strong> nix flake init</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-flake-lock.html"><strong aria-hidden="true">7.5.17.</strong> nix flake lock</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-flake-metadata.html"><strong aria-hidden="true">7.5.18.</strong> nix flake metadata</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-flake-new.html"><strong aria-hidden="true">7.5.19.</strong> nix flake new</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-flake-prefetch.html"><strong aria-hidden="true">7.5.20.</strong> nix flake prefetch</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-flake-show.html"><strong aria-hidden="true">7.5.21.</strong> nix flake show</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-flake-update.html"><strong aria-hidden="true">7.5.22.</strong> nix flake update</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-fmt.html"><strong aria-hidden="true">7.5.23.</strong> nix fmt</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-hash.html"><strong aria-hidden="true">7.5.24.</strong> nix hash</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-hash-file.html"><strong aria-hidden="true">7.5.25.</strong> nix hash file</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-hash-path.html"><strong aria-hidden="true">7.5.26.</strong> nix hash path</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-hash-to-base16.html"><strong aria-hidden="true">7.5.27.</strong> nix hash to-base16</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-hash-to-base32.html"><strong aria-hidden="true">7.5.28.</strong> nix hash to-base32</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-hash-to-base64.html"><strong aria-hidden="true">7.5.29.</strong> nix hash to-base64</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-hash-to-sri.html"><strong aria-hidden="true">7.5.30.</strong> nix hash to-sri</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-help.html"><strong aria-hidden="true">7.5.31.</strong> nix help</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-key.html"><strong aria-hidden="true">7.5.32.</strong> nix key</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-key-convert-secret-to-public.html"><strong aria-hidden="true">7.5.33.</strong> nix key convert-secret-to-public</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-key-generate-secret.html"><strong aria-hidden="true">7.5.34.</strong> nix key generate-secret</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-log.html"><strong aria-hidden="true">7.5.35.</strong> nix log</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-nar.html"><strong aria-hidden="true">7.5.36.</strong> nix nar</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-nar-cat.html"><strong aria-hidden="true">7.5.37.</strong> nix nar cat</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-nar-dump-path.html"><strong aria-hidden="true">7.5.38.</strong> nix nar dump-path</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-nar-ls.html"><strong aria-hidden="true">7.5.39.</strong> nix nar ls</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-path-info.html"><strong aria-hidden="true">7.5.40.</strong> nix path-info</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-print-dev-env.html"><strong aria-hidden="true">7.5.41.</strong> nix print-dev-env</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-profile.html"><strong aria-hidden="true">7.5.42.</strong> nix profile</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-profile-diff-closures.html"><strong aria-hidden="true">7.5.43.</strong> nix profile diff-closures</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-profile-history.html"><strong aria-hidden="true">7.5.44.</strong> nix profile history</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-profile-install.html"><strong aria-hidden="true">7.5.45.</strong> nix profile install</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-profile-list.html"><strong aria-hidden="true">7.5.46.</strong> nix profile list</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-profile-remove.html"><strong aria-hidden="true">7.5.47.</strong> nix profile remove</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-profile-rollback.html"><strong aria-hidden="true">7.5.48.</strong> nix profile rollback</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-profile-upgrade.html"><strong aria-hidden="true">7.5.49.</strong> nix profile upgrade</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-profile-wipe-history.html"><strong aria-hidden="true">7.5.50.</strong> nix profile wipe-history</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-realisation.html"><strong aria-hidden="true">7.5.51.</strong> nix realisation</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-realisation-info.html"><strong aria-hidden="true">7.5.52.</strong> nix realisation info</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-registry.html"><strong aria-hidden="true">7.5.53.</strong> nix registry</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-registry-add.html"><strong aria-hidden="true">7.5.54.</strong> nix registry add</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-registry-list.html"><strong aria-hidden="true">7.5.55.</strong> nix registry list</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-registry-pin.html"><strong aria-hidden="true">7.5.56.</strong> nix registry pin</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-registry-remove.html"><strong aria-hidden="true">7.5.57.</strong> nix registry remove</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-repl.html"><strong aria-hidden="true">7.5.58.</strong> nix repl</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-run.html"><strong aria-hidden="true">7.5.59.</strong> nix run</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-search.html"><strong aria-hidden="true">7.5.60.</strong> nix search</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-shell.html"><strong aria-hidden="true">7.5.61.</strong> nix shell</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-show-config.html"><strong aria-hidden="true">7.5.62.</strong> nix show-config</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-show-derivation.html"><strong aria-hidden="true">7.5.63.</strong> nix show-derivation</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-store.html"><strong aria-hidden="true">7.5.64.</strong> nix store</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-store-add-file.html"><strong aria-hidden="true">7.5.65.</strong> nix store add-file</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-store-add-path.html"><strong aria-hidden="true">7.5.66.</strong> nix store add-path</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-store-cat.html"><strong aria-hidden="true">7.5.67.</strong> nix store cat</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-store-copy-log.html"><strong aria-hidden="true">7.5.68.</strong> nix store copy-log</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-store-copy-sigs.html"><strong aria-hidden="true">7.5.69.</strong> nix store copy-sigs</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-store-delete.html"><strong aria-hidden="true">7.5.70.</strong> nix store delete</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-store-diff-closures.html"><strong aria-hidden="true">7.5.71.</strong> nix store diff-closures</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-store-dump-path.html"><strong aria-hidden="true">7.5.72.</strong> nix store dump-path</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-store-gc.html"><strong aria-hidden="true">7.5.73.</strong> nix store gc</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-store-ls.html"><strong aria-hidden="true">7.5.74.</strong> nix store ls</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-store-make-content-addressed.html"><strong aria-hidden="true">7.5.75.</strong> nix store make-content-addressed</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-store-optimise.html"><strong aria-hidden="true">7.5.76.</strong> nix store optimise</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-store-path-from-hash-part.html"><strong aria-hidden="true">7.5.77.</strong> nix store path-from-hash-part</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-store-ping.html"><strong aria-hidden="true">7.5.78.</strong> nix store ping</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-store-prefetch-file.html"><strong aria-hidden="true">7.5.79.</strong> nix store prefetch-file</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-store-repair.html"><strong aria-hidden="true">7.5.80.</strong> nix store repair</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-store-sign.html"><strong aria-hidden="true">7.5.81.</strong> nix store sign</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-store-verify.html"><strong aria-hidden="true">7.5.82.</strong> nix store verify</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-upgrade-nix.html"><strong aria-hidden="true">7.5.83.</strong> nix upgrade-nix</a></li><li class="chapter-item expanded "><a href="../command-ref/new-cli/nix3-why-depends.html"><strong aria-hidden="true">7.5.84.</strong> nix why-depends</a></li></ol></li><li class="chapter-item expanded "><a href="../command-ref/files.html"><strong aria-hidden="true">7.6.</strong> Files</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../command-ref/conf-file.html"><strong aria-hidden="true">7.6.1.</strong> nix.conf</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../architecture/architecture.html"><strong aria-hidden="true">8.</strong> Architecture</a></li><li class="chapter-item expanded "><a href="../glossary.html"><strong aria-hidden="true">9.</strong> Glossary</a></li><li class="chapter-item expanded "><a href="../contributing/contributing.html"><strong aria-hidden="true">10.</strong> Contributing</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../contributing/hacking.html"><strong aria-hidden="true">10.1.</strong> Hacking</a></li><li class="chapter-item expanded "><a href="../contributing/cli-guideline.html"><strong aria-hidden="true">10.2.</strong> CLI guideline</a></li></ol></li><li class="chapter-item expanded "><a href="../release-notes/release-notes.html"><strong aria-hidden="true">11.</strong> Release Notes</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../release-notes/rl-2.13.html"><strong aria-hidden="true">11.1.</strong> Release 2.13 (2023-01-17)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-2.12.html"><strong aria-hidden="true">11.2.</strong> Release 2.12 (2022-12-06)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-2.11.html"><strong aria-hidden="true">11.3.</strong> Release 2.11 (2022-08-25)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-2.10.html"><strong aria-hidden="true">11.4.</strong> Release 2.10 (2022-07-11)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-2.9.html"><strong aria-hidden="true">11.5.</strong> Release 2.9 (2022-05-30)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-2.8.html"><strong aria-hidden="true">11.6.</strong> Release 2.8 (2022-04-19)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-2.7.html"><strong aria-hidden="true">11.7.</strong> Release 2.7 (2022-03-07)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-2.6.html"><strong aria-hidden="true">11.8.</strong> Release 2.6 (2022-01-24)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-2.5.html"><strong aria-hidden="true">11.9.</strong> Release 2.5 (2021-12-13)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-2.4.html"><strong aria-hidden="true">11.10.</strong> Release 2.4 (2021-11-01)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-2.3.html"><strong aria-hidden="true">11.11.</strong> Release 2.3 (2019-09-04)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-2.2.html"><strong aria-hidden="true">11.12.</strong> Release 2.2 (2019-01-11)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-2.1.html"><strong aria-hidden="true">11.13.</strong> Release 2.1 (2018-09-02)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-2.0.html"><strong aria-hidden="true">11.14.</strong> Release 2.0 (2018-02-22)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-1.11.10.html"><strong aria-hidden="true">11.15.</strong> Release 1.11.10 (2017-06-12)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-1.11.html"><strong aria-hidden="true">11.16.</strong> Release 1.11 (2016-01-19)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-1.10.html"><strong aria-hidden="true">11.17.</strong> Release 1.10 (2015-09-03)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-1.9.html"><strong aria-hidden="true">11.18.</strong> Release 1.9 (2015-06-12)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-1.8.html"><strong aria-hidden="true">11.19.</strong> Release 1.8 (2014-12-14)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-1.7.html"><strong aria-hidden="true">11.20.</strong> Release 1.7 (2014-04-11)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-1.6.1.html"><strong aria-hidden="true">11.21.</strong> Release 1.6.1 (2013-10-28)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-1.6.html"><strong aria-hidden="true">11.22.</strong> Release 1.6 (2013-09-10)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-1.5.2.html"><strong aria-hidden="true">11.23.</strong> Release 1.5.2 (2013-05-13)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-1.5.html"><strong aria-hidden="true">11.24.</strong> Release 1.5 (2013-02-27)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-1.4.html"><strong aria-hidden="true">11.25.</strong> Release 1.4 (2013-02-26)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-1.3.html"><strong aria-hidden="true">11.26.</strong> Release 1.3 (2013-01-04)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-1.2.html"><strong aria-hidden="true">11.27.</strong> Release 1.2 (2012-12-06)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-1.1.html"><strong aria-hidden="true">11.28.</strong> Release 1.1 (2012-07-18)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-1.0.html"><strong aria-hidden="true">11.29.</strong> Release 1.0 (2012-05-11)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-0.16.html"><strong aria-hidden="true">11.30.</strong> Release 0.16 (2010-08-17)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-0.15.html"><strong aria-hidden="true">11.31.</strong> Release 0.15 (2010-03-17)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-0.14.html"><strong aria-hidden="true">11.32.</strong> Release 0.14 (2010-02-04)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-0.13.html"><strong aria-hidden="true">11.33.</strong> Release 0.13 (2009-11-05)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-0.12.html"><strong aria-hidden="true">11.34.</strong> Release 0.12 (2008-11-20)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-0.11.html"><strong aria-hidden="true">11.35.</strong> Release 0.11 (2007-12-31)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-0.10.1.html"><strong aria-hidden="true">11.36.</strong> Release 0.10.1 (2006-10-11)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-0.10.html"><strong aria-hidden="true">11.37.</strong> Release 0.10 (2006-10-06)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-0.9.2.html"><strong aria-hidden="true">11.38.</strong> Release 0.9.2 (2005-09-21)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-0.9.1.html"><strong aria-hidden="true">11.39.</strong> Release 0.9.1 (2005-09-20)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-0.9.html"><strong aria-hidden="true">11.40.</strong> Release 0.9 (2005-09-16)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-0.8.1.html"><strong aria-hidden="true">11.41.</strong> Release 0.8.1 (2005-04-13)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-0.8.html"><strong aria-hidden="true">11.42.</strong> Release 0.8 (2005-04-11)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-0.7.html"><strong aria-hidden="true">11.43.</strong> Release 0.7 (2005-01-12)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-0.6.html"><strong aria-hidden="true">11.44.</strong> Release 0.6 (2004-11-14)</a></li><li class="chapter-item expanded "><a href="../release-notes/rl-0.5.html"><strong aria-hidden="true">11.45.</strong> Release 0.5 and earlier</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Nix Reference Manual</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/NixOS/nix" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/NixOS/nix/tree/master/doc/manual/src/command-ref/nix-env.md" title="Suggest an edit" aria-label="Suggest an edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="name"><a class="header" href="#name">Name</a></h1>
<p><code>nix-env</code> - manipulate or query Nix user environments</p>
<h1 id="synopsis"><a class="header" href="#synopsis">Synopsis</a></h1>
<p><code>nix-env</code>
[<code>--option</code> <em>name</em> <em>value</em>]
[<code>--arg</code> <em>name</em> <em>value</em>]
[<code>--argstr</code> <em>name</em> <em>value</em>]
[{<code>--file</code> | <code>-f</code>} <em>path</em>]
[{<code>--profile</code> | <code>-p</code>} *path(]
[<code>--system-filter</code> <em>system</em>]
[<code>--dry-run</code>]
<em>operation</em> [<em>options…</em>] [<em>arguments…</em>]</p>
<h1 id="description"><a class="header" href="#description">Description</a></h1>
<p>The command <code>nix-env</code> is used to manipulate Nix user environments. User
environments are sets of software packages available to a user at some
point in time. In other words, they are a synthesised view of the
programs available in the Nix store. There may be many user
environments: different users can have different environments, and
individual users can switch between different environments.</p>
<p><code>nix-env</code> takes exactly one <em>operation</em> flag which indicates the
subcommand to be performed. These are documented below.</p>
<h1 id="selectors"><a class="header" href="#selectors">Selectors</a></h1>
<p>Several commands, such as <code>nix-env -q</code> and <code>nix-env -i</code>, take a list of
arguments that specify the packages on which to operate. These are
extended regular expressions that must match the entire name of the
package. (For details on regular expressions, see <strong>regex</strong>(7).) The match is
case-sensitive. The regular expression can optionally be followed by a
dash and a version number; if omitted, any version of the package will
match. Here are some examples:</p>
<ul>
<li>
<p><code>firefox</code><br />
Matches the package name <code>firefox</code> and any version.</p>
</li>
<li>
<p><code>firefox-32.0</code><br />
Matches the package name <code>firefox</code> and version <code>32.0</code>.</p>
</li>
<li>
<p><code>gtk\\+</code><br />
Matches the package name <code>gtk+</code>. The <code>+</code> character must be escaped
using a backslash to prevent it from being interpreted as a
quantifier, and the backslash must be escaped in turn with another
backslash to ensure that the shell passes it on.</p>
</li>
<li>
<p><code>.\*</code><br />
Matches any package name. This is the default for most commands.</p>
</li>
<li>
<p><code>'.*zip.*'</code><br />
Matches any package name containing the string <code>zip</code>. Note the dots:
<code>'*zip*'</code> does not work, because in a regular expression, the
character <code>*</code> is interpreted as a quantifier.</p>
</li>
<li>
<p><code>'.*(firefox|chromium).*'</code><br />
Matches any package name containing the strings <code>firefox</code> or
<code>chromium</code>.</p>
</li>
</ul>
<h1 id="common-options"><a class="header" href="#common-options">Common options</a></h1>
<p>This section lists the options that are common to all operations. These
options are allowed for every subcommand, though they may not always
have an effect.</p>
<ul>
<li>
<p><code>--file</code> / <code>-f</code> <em>path</em><br />
Specifies the Nix expression (designated below as the <em>active Nix
expression</em>) used by the <code>--install</code>, <code>--upgrade</code>, and <code>--query --available</code> operations to obtain derivations. The default is
<code>~/.nix-defexpr</code>.</p>
<p>If the argument starts with <code>http://</code> or <code>https://</code>, it is
interpreted as the URL of a tarball that will be downloaded and
unpacked to a temporary location. The tarball must include a single
top-level directory containing at least a file named <code>default.nix</code>.</p>
</li>
<li>
<p><code>--profile</code> / <code>-p</code> <em>path</em><br />
Specifies the profile to be used by those operations that operate on
a profile (designated below as the <em>active profile</em>). A profile is a
sequence of user environments called <em>generations</em>, one of which is
the <em>current generation</em>.</p>
</li>
<li>
<p><code>--dry-run</code><br />
For the <code>--install</code>, <code>--upgrade</code>, <code>--uninstall</code>,
<code>--switch-generation</code>, <code>--delete-generations</code> and <code>--rollback</code>
operations, this flag will cause <code>nix-env</code> to print what <em>would</em> be
done if this flag had not been specified, without actually doing it.</p>
<p><code>--dry-run</code> also prints out which paths will be
<a href="../glossary.html">substituted</a> (i.e., downloaded) and which paths
will be built from source (because no substitute is available).</p>
</li>
<li>
<p><code>--system-filter</code> <em>system</em><br />
By default, operations such as <code>--query --available</code> show derivations matching any platform. This option
allows you to use derivations for the specified platform <em>system</em>.</p>
</li>
</ul>
<!-- end list -->
<h1 id="files"><a class="header" href="#files">Files</a></h1>
<ul>
<li>
<p><code>~/.nix-defexpr</code><br />
The source for the default Nix expressions used by the
<code>--install</code>, <code>--upgrade</code>, and <code>--query --available</code> operations to
obtain derivations. The <code>--file</code> option may be used to override
this default.</p>
<p>If <code>~/.nix-defexpr</code> is a file, it is loaded as a Nix expression. If
the expression is a set, it is used as the default Nix expression.
If the expression is a function, an empty set is passed as argument
and the return value is used as the default Nix expression.</p>
<p>If <code>~/.nix-defexpr</code> is a directory containing a <code>default.nix</code> file,
that file is loaded as in the above paragraph.</p>
<p>If <code>~/.nix-defexpr</code> is a directory without a <code>default.nix</code> file,
then its contents (both files and subdirectories) are loaded as Nix
expressions. The expressions are combined into a single set, each
expression under an attribute with the same name as the original
file or subdirectory.</p>
<p>For example, if <code>~/.nix-defexpr</code> contains two files, <code>foo.nix</code> and
<code>bar.nix</code>, then the default Nix expression will essentially be</p>
<pre><code class="language-nix">{
  foo = import ~/.nix-defexpr/foo.nix;
  bar = import ~/.nix-defexpr/bar.nix;
}
</code></pre>
<p>The file <code>manifest.nix</code> is always ignored. Subdirectories without a
<code>default.nix</code> file are traversed recursively in search of more Nix
expressions, but the names of these intermediate directories are not
added to the attribute paths of the default Nix expression.</p>
<p>The command <code>nix-channel</code> places symlinks to the downloaded Nix
expressions from each subscribed channel in this directory.</p>
</li>
<li>
<p><code>~/.nix-profile</code><br />
A symbolic link to the user's current profile. By default, this
symlink points to <code>prefix/var/nix/profiles/default</code>. The <code>PATH</code>
environment variable should include <code>~/.nix-profile/bin</code> for the
user environment to be visible to the user.</p>
</li>
</ul>
<h1 id="operation---install"><a class="header" href="#operation---install">Operation <code>--install</code></a></h1>
<h2 id="synopsis-1"><a class="header" href="#synopsis-1">Synopsis</a></h2>
<p><code>nix-env</code> {<code>--install</code> | <code>-i</code>} <em>args…</em>
[{<code>--prebuilt-only</code> | <code>-b</code>}]
[{<code>--attr</code> | <code>-A</code>}]
[<code>--from-expression</code>] [<code>-E</code>]
[<code>--from-profile</code> <em>path</em>]
[<code>--preserve-installed</code> | <code>-P</code>]
[<code>--remove-all</code> | <code>-r</code>]</p>
<h2 id="description-1"><a class="header" href="#description-1">Description</a></h2>
<p>The install operation creates a new user environment, based on the
current generation of the active profile, to which a set of store paths
described by <em>args</em> is added. The arguments <em>args</em> map to store paths in
a number of possible ways:</p>
<ul>
<li>
<p>By default, <em>args</em> is a set of derivation names denoting derivations
in the active Nix expression. These are realised, and the resulting
output paths are installed. Currently installed derivations with a
name equal to the name of a derivation being added are removed
unless the option <code>--preserve-installed</code> is specified.</p>
<p>If there are multiple derivations matching a name in <em>args</em> that
have the same name (e.g., <code>gcc-3.3.6</code> and <code>gcc-4.1.1</code>), then the
derivation with the highest <em>priority</em> is used. A derivation can
define a priority by declaring the <code>meta.priority</code> attribute. This
attribute should be a number, with a higher value denoting a lower
priority. The default priority is <code>0</code>.</p>
<p>If there are multiple matching derivations with the same priority,
then the derivation with the highest version will be installed.</p>
<p>You can force the installation of multiple derivations with the same
name by being specific about the versions. For instance, <code>nix-env -i gcc-3.3.6 gcc-4.1.1</code> will install both version of GCC (and will
probably cause a user environment conflict!).</p>
</li>
<li>
<p>If <code>--attr</code> (<code>-A</code>) is specified, the arguments are <em>attribute
paths</em> that select attributes from the top-level Nix
expression. This is faster than using derivation names and
unambiguous. To find out the attribute paths of available
packages, use <code>nix-env -qaP</code>.</p>
</li>
<li>
<p>If <code>--from-profile</code> <em>path</em> is given, <em>args</em> is a set of names
denoting installed store paths in the profile <em>path</em>. This is an
easy way to copy user environment elements from one profile to
another.</p>
</li>
<li>
<p>If <code>--from-expression</code> is given, <em>args</em> are Nix
<a href="../language/constructs.html#functions">functions</a>
that are called with the active Nix expression as their single
argument. The derivations returned by those function calls are
installed. This allows derivations to be specified in an
unambiguous way, which is necessary if there are multiple
derivations with the same name.</p>
</li>
<li>
<p>If <em>args</em> are <a href="../glossary.html#gloss-store-derivation">store derivation</a>s, then these are
<a href="nix-store.html#operation---realise">realised</a>, and the resulting output paths
are installed.</p>
</li>
<li>
<p>If <em>args</em> are store paths that are not store derivations, then these
are <a href="nix-store.html#operation---realise">realised</a> and installed.</p>
</li>
<li>
<p>By default all outputs are installed for each derivation. That can
be reduced by setting <code>meta.outputsToInstall</code>.</p>
</li>
</ul>
<h2 id="flags"><a class="header" href="#flags">Flags</a></h2>
<ul>
<li>
<p><code>--prebuilt-only</code> / <code>-b</code><br />
Use only derivations for which a substitute is registered, i.e.,
there is a pre-built binary available that can be downloaded in lieu
of building the derivation. Thus, no packages will be built from
source.</p>
</li>
<li>
<p><code>--preserve-installed</code>; <code>-P</code><br />
Do not remove derivations with a name matching one of the
derivations being installed. Usually, trying to have two versions of
the same package installed in the same generation of a profile will
lead to an error in building the generation, due to file name
clashes between the two versions. However, this is not the case for
all packages.</p>
</li>
<li>
<p><code>--remove-all</code>; <code>-r</code><br />
Remove all previously installed packages first. This is equivalent
to running <code>nix-env -e '.*'</code> first, except that everything happens
in a single transaction.</p>
</li>
</ul>
<h2 id="examples"><a class="header" href="#examples">Examples</a></h2>
<p>To install a package using a specific attribute path from the active Nix expression:</p>
<pre><code class="language-console">$ nix-env -iA gcc40mips
installing `gcc-4.0.2'
$ nix-env -iA xorg.xorgserver
installing `xorg-server-1.2.0'
</code></pre>
<p>To install a specific version of <code>gcc</code> using the derivation name:</p>
<pre><code class="language-console">$ nix-env --install gcc-3.3.2
installing `gcc-3.3.2'
uninstalling `gcc-3.1'
</code></pre>
<p>Using attribute path for selecting a package is preferred,
as it is much faster and there will not be multiple matches.</p>
<p>Note the previously installed version is removed, since
<code>--preserve-installed</code> was not specified.</p>
<p>To install an arbitrary version:</p>
<pre><code class="language-console">$ nix-env --install gcc
installing `gcc-3.3.2'
</code></pre>
<p>To install all derivations in the Nix expression <code>foo.nix</code>:</p>
<pre><code class="language-console">$ nix-env -f ~/foo.nix -i '.*'
</code></pre>
<p>To copy the store path with symbolic name <code>gcc</code> from another profile:</p>
<pre><code class="language-console">$ nix-env -i --from-profile /nix/var/nix/profiles/foo gcc
</code></pre>
<p>To install a specific <a href="../glossary.html#gloss-store-derivation">store derivation</a> (typically created by
<code>nix-instantiate</code>):</p>
<pre><code class="language-console">$ nix-env -i /nix/store/fibjb1bfbpm5mrsxc4mh2d8n37sxh91i-gcc-3.4.3.drv
</code></pre>
<p>To install a specific output path:</p>
<pre><code class="language-console">$ nix-env -i /nix/store/y3cgx0xj1p4iv9x0pnnmdhr8iyg741vk-gcc-3.4.3
</code></pre>
<p>To install from a Nix expression specified on the command-line:</p>
<pre><code class="language-console">$ nix-env -f ./foo.nix -i -E \
    'f: (f {system = &quot;i686-linux&quot;;}).subversionWithJava'
</code></pre>
<p>I.e., this evaluates to <code>(f: (f {system = &quot;i686-linux&quot;;}).subversionWithJava) (import ./foo.nix)</code>, thus selecting
the <code>subversionWithJava</code> attribute from the set returned by calling the
function defined in <code>./foo.nix</code>.</p>
<p>A dry-run tells you which paths will be downloaded or built from source:</p>
<pre><code class="language-console">$ nix-env -f '&lt;nixpkgs&gt;' -iA hello --dry-run
(dry run; not doing anything)
installing ‘hello-2.10’
this path will be fetched (0.04 MiB download, 0.19 MiB unpacked):
  /nix/store/wkhdf9jinag5750mqlax6z2zbwhqb76n-hello-2.10
  ...
</code></pre>
<p>To install Firefox from the latest revision in the Nixpkgs/NixOS 14.12
channel:</p>
<pre><code class="language-console">$ nix-env -f https://github.com/NixOS/nixpkgs/archive/nixos-14.12.tar.gz -iA firefox
</code></pre>
<h1 id="operation---upgrade"><a class="header" href="#operation---upgrade">Operation <code>--upgrade</code></a></h1>
<h2 id="synopsis-2"><a class="header" href="#synopsis-2">Synopsis</a></h2>
<p><code>nix-env</code> {<code>--upgrade</code> | <code>-u</code>} <em>args</em>
[<code>--lt</code> | <code>--leq</code> | <code>--eq</code> | <code>--always</code>]
[{<code>--prebuilt-only</code> | <code>-b</code>}]
[{<code>--attr</code> | <code>-A</code>}]
[<code>--from-expression</code>] [<code>-E</code>]
[<code>--from-profile</code> <em>path</em>]
[<code>--preserve-installed</code> | <code>-P</code>]</p>
<h2 id="description-2"><a class="header" href="#description-2">Description</a></h2>
<p>The upgrade operation creates a new user environment, based on the
current generation of the active profile, in which all store paths are
replaced for which there are newer versions in the set of paths
described by <em>args</em>. Paths for which there are no newer versions are
left untouched; this is not an error. It is also not an error if an
element of <em>args</em> matches no installed derivations.</p>
<p>For a description of how <em>args</em> is mapped to a set of store paths, see
<a href="#operation---install"><code>--install</code></a>. If <em>args</em> describes multiple
store paths with the same symbolic name, only the one with the highest
version is installed.</p>
<h2 id="flags-1"><a class="header" href="#flags-1">Flags</a></h2>
<ul>
<li>
<p><code>--lt</code><br />
Only upgrade a derivation to newer versions. This is the default.</p>
</li>
<li>
<p><code>--leq</code><br />
In addition to upgrading to newer versions, also “upgrade” to
derivations that have the same version. Version are not a unique
identification of a derivation, so there may be many derivations
that have the same version. This flag may be useful to force
“synchronisation” between the installed and available derivations.</p>
</li>
<li>
<p><code>--eq</code><br />
<em>Only</em> “upgrade” to derivations that have the same version. This may
not seem very useful, but it actually is, e.g., when there is a new
release of Nixpkgs and you want to replace installed applications
with the same versions built against newer dependencies (to reduce
the number of dependencies floating around on your system).</p>
</li>
<li>
<p><code>--always</code><br />
In addition to upgrading to newer versions, also “upgrade” to
derivations that have the same or a lower version. I.e., derivations
may actually be downgraded depending on what is available in the
active Nix expression.</p>
</li>
</ul>
<p>For the other flags, see <code>--install</code>.</p>
<h2 id="examples-1"><a class="header" href="#examples-1">Examples</a></h2>
<pre><code class="language-console">$ nix-env --upgrade -A nixpkgs.gcc
upgrading `gcc-3.3.1' to `gcc-3.4'
</code></pre>
<p>When there are no updates available, nothing will happen:</p>
<pre><code class="language-console">$ nix-env --upgrade -A nixpkgs.pan
</code></pre>
<p>Using <code>-A</code> is preferred when possible, as it is faster and unambiguous but
it is also possible to upgrade to a specific version by matching the derivation name:</p>
<pre><code class="language-console">$ nix-env -u gcc-3.3.2 --always
upgrading `gcc-3.4' to `gcc-3.3.2'
</code></pre>
<p>To try to upgrade everything
(matching packages based on the part of the derivation name without version):</p>
<pre><code class="language-console">$ nix-env -u
upgrading `hello-2.1.2' to `hello-2.1.3'
upgrading `mozilla-1.2' to `mozilla-1.4'
</code></pre>
<h2 id="versions"><a class="header" href="#versions">Versions</a></h2>
<p>The upgrade operation determines whether a derivation <code>y</code> is an upgrade
of a derivation <code>x</code> by looking at their respective <code>name</code> attributes.
The names (e.g., <code>gcc-3.3.1</code> are split into two parts: the package name
(<code>gcc</code>), and the version (<code>3.3.1</code>). The version part starts after the
first dash not followed by a letter. <code>y</code> is considered an upgrade of <code>x</code>
if their package names match, and the version of <code>y</code> is higher than that
of <code>x</code>.</p>
<p>The versions are compared by splitting them into contiguous components
of numbers and letters. E.g., <code>3.3.1pre5</code> is split into <code>[3, 3, 1, &quot;pre&quot;, 5]</code>. These lists are then compared lexicographically (from left
to right). Corresponding components <code>a</code> and <code>b</code> are compared as follows.
If they are both numbers, integer comparison is used. If <code>a</code> is an empty
string and <code>b</code> is a number, <code>a</code> is considered less than <code>b</code>. The special
string component <code>pre</code> (for <em>pre-release</em>) is considered to be less than
other components. String components are considered less than number
components. Otherwise, they are compared lexicographically (i.e., using
case-sensitive string comparison).</p>
<p>This is illustrated by the following examples:</p>
<pre><code>1.0 &lt; 2.3
2.1 &lt; 2.3
2.3 = 2.3
2.5 &gt; 2.3
3.1 &gt; 2.3
2.3.1 &gt; 2.3
2.3.1 &gt; 2.3a
2.3pre1 &lt; 2.3
2.3pre3 &lt; 2.3pre12
2.3a &lt; 2.3c
2.3pre1 &lt; 2.3c
2.3pre1 &lt; 2.3q
</code></pre>
<h1 id="operation---uninstall"><a class="header" href="#operation---uninstall">Operation <code>--uninstall</code></a></h1>
<h2 id="synopsis-3"><a class="header" href="#synopsis-3">Synopsis</a></h2>
<p><code>nix-env</code> {<code>--uninstall</code> | <code>-e</code>} <em>drvnames…</em></p>
<h2 id="description-3"><a class="header" href="#description-3">Description</a></h2>
<p>The uninstall operation creates a new user environment, based on the
current generation of the active profile, from which the store paths
designated by the symbolic names <em>drvnames</em> are removed.</p>
<h2 id="examples-2"><a class="header" href="#examples-2">Examples</a></h2>
<pre><code class="language-console">$ nix-env --uninstall gcc
$ nix-env -e '.*' (remove everything)
</code></pre>
<h1 id="operation---set"><a class="header" href="#operation---set">Operation <code>--set</code></a></h1>
<h2 id="synopsis-4"><a class="header" href="#synopsis-4">Synopsis</a></h2>
<p><code>nix-env</code> <code>--set</code> <em>drvname</em></p>
<h2 id="description-4"><a class="header" href="#description-4">Description</a></h2>
<p>The <code>--set</code> operation modifies the current generation of a profile so
that it contains exactly the specified derivation, and nothing else.</p>
<h2 id="examples-3"><a class="header" href="#examples-3">Examples</a></h2>
<p>The following updates a profile such that its current generation will
contain just Firefox:</p>
<pre><code class="language-console">$ nix-env -p /nix/var/nix/profiles/browser --set firefox
</code></pre>
<h1 id="operation---set-flag"><a class="header" href="#operation---set-flag">Operation <code>--set-flag</code></a></h1>
<h2 id="synopsis-5"><a class="header" href="#synopsis-5">Synopsis</a></h2>
<p><code>nix-env</code> <code>--set-flag</code> <em>name</em> <em>value</em> <em>drvnames</em></p>
<h2 id="description-5"><a class="header" href="#description-5">Description</a></h2>
<p>The <code>--set-flag</code> operation allows meta attributes of installed packages
to be modified. There are several attributes that can be usefully
modified, because they affect the behaviour of <code>nix-env</code> or the user
environment build script:</p>
<ul>
<li>
<p><code>priority</code> can be changed to resolve filename clashes. The user
environment build script uses the <code>meta.priority</code> attribute of
derivations to resolve filename collisions between packages. Lower
priority values denote a higher priority. For instance, the GCC
wrapper package and the Binutils package in Nixpkgs both have a file
<code>bin/ld</code>, so previously if you tried to install both you would get a
collision. Now, on the other hand, the GCC wrapper declares a higher
priority than Binutils, so the former’s <code>bin/ld</code> is symlinked in the
user environment.</p>
</li>
<li>
<p><code>keep</code> can be set to <code>true</code> to prevent the package from being
upgraded or replaced. This is useful if you want to hang on to an
older version of a package.</p>
</li>
<li>
<p><code>active</code> can be set to <code>false</code> to “disable” the package. That is, no
symlinks will be generated to the files of the package, but it
remains part of the profile (so it won’t be garbage-collected). It
can be set back to <code>true</code> to re-enable the package.</p>
</li>
</ul>
<h2 id="examples-4"><a class="header" href="#examples-4">Examples</a></h2>
<p>To prevent the currently installed Firefox from being upgraded:</p>
<pre><code class="language-console">$ nix-env --set-flag keep true firefox
</code></pre>
<p>After this, <code>nix-env -u</code> will ignore Firefox.</p>
<p>To disable the currently installed Firefox, then install a new Firefox
while the old remains part of the profile:</p>
<pre><code class="language-console">$ nix-env -q
firefox-2.0.0.9 (the current one)

$ nix-env --preserve-installed -i firefox-2.0.0.11
installing `firefox-2.0.0.11'
building path(s) `/nix/store/myy0y59q3ig70dgq37jqwg1j0rsapzsl-user-environment'
collision between `/nix/store/...-firefox-2.0.0.11/bin/firefox'
  and `/nix/store/...-firefox-2.0.0.9/bin/firefox'.
(i.e., can’t have two active at the same time)

$ nix-env --set-flag active false firefox
setting flag on `firefox-2.0.0.9'

$ nix-env --preserve-installed -i firefox-2.0.0.11
installing `firefox-2.0.0.11'

$ nix-env -q
firefox-2.0.0.11 (the enabled one)
firefox-2.0.0.9 (the disabled one)
</code></pre>
<p>To make files from <code>binutils</code> take precedence over files from <code>gcc</code>:</p>
<pre><code class="language-console">$ nix-env --set-flag priority 5 binutils
$ nix-env --set-flag priority 10 gcc
</code></pre>
<h1 id="operation---query"><a class="header" href="#operation---query">Operation <code>--query</code></a></h1>
<h2 id="synopsis-6"><a class="header" href="#synopsis-6">Synopsis</a></h2>
<p><code>nix-env</code> {<code>--query</code> | <code>-q</code>} <em>names…</em>
[<code>--installed</code> | <code>--available</code> | <code>-a</code>]
[{<code>--status</code> | <code>-s</code>}]
[{<code>--attr-path</code> | <code>-P</code>}]
[<code>--no-name</code>]
[{<code>--compare-versions</code> | <code>-c</code>}]
[<code>--system</code>]
[<code>--drv-path</code>]
[<code>--out-path</code>]
[<code>--description</code>]
[<code>--meta</code>]
[<code>--xml</code>]
[<code>--json</code>]
[{<code>--prebuilt-only</code> | <code>-b</code>}]
[{<code>--attr</code> | <code>-A</code>} <em>attribute-path</em>]</p>
<h2 id="description-6"><a class="header" href="#description-6">Description</a></h2>
<p>The query operation displays information about either the store paths
that are installed in the current generation of the active profile
(<code>--installed</code>), or the derivations that are available for installation
in the active Nix expression (<code>--available</code>). It only prints information
about derivations whose symbolic name matches one of <em>names</em>.</p>
<p>The derivations are sorted by their <code>name</code> attributes.</p>
<h2 id="source-selection"><a class="header" href="#source-selection">Source selection</a></h2>
<p>The following flags specify the set of things on which the query
operates.</p>
<ul>
<li>
<p><code>--installed</code><br />
The query operates on the store paths that are installed in the
current generation of the active profile. This is the default.</p>
</li>
<li>
<p><code>--available</code>; <code>-a</code><br />
The query operates on the derivations that are available in the
active Nix expression.</p>
</li>
</ul>
<h2 id="queries"><a class="header" href="#queries">Queries</a></h2>
<p>The following flags specify what information to display about the
selected derivations. Multiple flags may be specified, in which case the
information is shown in the order given here. Note that the name of the
derivation is shown unless <code>--no-name</code> is specified.</p>
<ul>
<li>
<p><code>--xml</code><br />
Print the result in an XML representation suitable for automatic
processing by other tools. The root element is called <code>items</code>, which
contains a <code>item</code> element for each available or installed
derivation. The fields discussed below are all stored in attributes
of the <code>item</code> elements.</p>
</li>
<li>
<p><code>--json</code><br />
Print the result in a JSON representation suitable for automatic
processing by other tools.</p>
</li>
<li>
<p><code>--prebuilt-only</code> / <code>-b</code><br />
Show only derivations for which a substitute is registered, i.e.,
there is a pre-built binary available that can be downloaded in lieu
of building the derivation. Thus, this shows all packages that
probably can be installed quickly.</p>
</li>
<li>
<p><code>--status</code>; <code>-s</code><br />
Print the <em>status</em> of the derivation. The status consists of three
characters. The first is <code>I</code> or <code>-</code>, indicating whether the
derivation is currently installed in the current generation of the
active profile. This is by definition the case for <code>--installed</code>,
but not for <code>--available</code>. The second is <code>P</code> or <code>-</code>, indicating
whether the derivation is present on the system. This indicates
whether installation of an available derivation will require the
derivation to be built. The third is <code>S</code> or <code>-</code>, indicating whether
a substitute is available for the derivation.</p>
</li>
<li>
<p><code>--attr-path</code>; <code>-P</code><br />
Print the <em>attribute path</em> of the derivation, which can be used to
unambiguously select it using the <code>--attr</code> option available in
commands that install derivations like <code>nix-env --install</code>. This
option only works together with <code>--available</code></p>
</li>
<li>
<p><code>--no-name</code><br />
Suppress printing of the <code>name</code> attribute of each derivation.</p>
</li>
<li>
<p><code>--compare-versions</code> / <code>-c</code><br />
Compare installed versions to available versions, or vice versa (if
<code>--available</code> is given). This is useful for quickly seeing whether
upgrades for installed packages are available in a Nix expression. A
column is added with the following meaning:</p>
<ul>
<li>
<p><code>&lt;</code> <em>version</em><br />
A newer version of the package is available or installed.</p>
</li>
<li>
<p><code>=</code> <em>version</em><br />
At most the same version of the package is available or
installed.</p>
</li>
<li>
<p><code>&gt;</code> <em>version</em><br />
Only older versions of the package are available or installed.</p>
</li>
<li>
<p><code>- ?</code><br />
No version of the package is available or installed.</p>
</li>
</ul>
</li>
<li>
<p><code>--system</code><br />
Print the <code>system</code> attribute of the derivation.</p>
</li>
<li>
<p><code>--drv-path</code><br />
Print the path of the <a href="../glossary.html#gloss-store-derivation">store derivation</a>.</p>
</li>
<li>
<p><code>--out-path</code><br />
Print the output path of the derivation.</p>
</li>
<li>
<p><code>--description</code><br />
Print a short (one-line) description of the derivation, if
available. The description is taken from the <code>meta.description</code>
attribute of the derivation.</p>
</li>
<li>
<p><code>--meta</code><br />
Print all of the meta-attributes of the derivation. This option is
only available with <code>--xml</code> or <code>--json</code>.</p>
</li>
</ul>
<h2 id="examples-5"><a class="header" href="#examples-5">Examples</a></h2>
<p>To show installed packages:</p>
<pre><code class="language-console">$ nix-env -q
bison-1.875c
docbook-xml-4.2
firefox-1.0.4
MPlayer-1.0pre7
ORBit2-2.8.3
…
</code></pre>
<p>To show available packages:</p>
<pre><code class="language-console">$ nix-env -qa
firefox-1.0.7
GConf-2.4.0.1
MPlayer-1.0pre7
ORBit2-2.8.3
…
</code></pre>
<p>To show the status of available packages:</p>
<pre><code class="language-console">$ nix-env -qas
-P- firefox-1.0.7   (not installed but present)
--S GConf-2.4.0.1   (not present, but there is a substitute for fast installation)
--S MPlayer-1.0pre3 (i.e., this is not the installed MPlayer, even though the version is the same!)
IP- ORBit2-2.8.3    (installed and by definition present)
…
</code></pre>
<p>To show available packages in the Nix expression <code>foo.nix</code>:</p>
<pre><code class="language-console">$ nix-env -f ./foo.nix -qa
foo-1.2.3
</code></pre>
<p>To compare installed versions to what’s available:</p>
<pre><code class="language-console">$ nix-env -qc
...
acrobat-reader-7.0 - ?      (package is not available at all)
autoconf-2.59      = 2.59   (same version)
firefox-1.0.4      &lt; 1.0.7  (a more recent version is available)
...
</code></pre>
<p>To show all packages with “<code>zip</code>” in the name:</p>
<pre><code class="language-console">$ nix-env -qa '.*zip.*'
bzip2-1.0.6
gzip-1.6
zip-3.0
…
</code></pre>
<p>To show all packages with “<code>firefox</code>” or “<code>chromium</code>” in the name:</p>
<pre><code class="language-console">$ nix-env -qa '.*(firefox|chromium).*'
chromium-37.0.2062.94
chromium-beta-38.0.2125.24
firefox-32.0.3
firefox-with-plugins-13.0.1
…
</code></pre>
<p>To show all packages in the latest revision of the Nixpkgs repository:</p>
<pre><code class="language-console">$ nix-env -f https://github.com/NixOS/nixpkgs/archive/master.tar.gz -qa
</code></pre>
<h1 id="operation---switch-profile"><a class="header" href="#operation---switch-profile">Operation <code>--switch-profile</code></a></h1>
<h2 id="synopsis-7"><a class="header" href="#synopsis-7">Synopsis</a></h2>
<p><code>nix-env</code> {<code>--switch-profile</code> | <code>-S</code>} <em>path</em></p>
<h2 id="description-7"><a class="header" href="#description-7">Description</a></h2>
<p>This operation makes <em>path</em> the current profile for the user. That is,
the symlink <code>~/.nix-profile</code> is made to point to <em>path</em>.</p>
<h2 id="examples-6"><a class="header" href="#examples-6">Examples</a></h2>
<pre><code class="language-console">$ nix-env -S ~/my-profile
</code></pre>
<h1 id="operation---list-generations"><a class="header" href="#operation---list-generations">Operation <code>--list-generations</code></a></h1>
<h2 id="synopsis-8"><a class="header" href="#synopsis-8">Synopsis</a></h2>
<p><code>nix-env</code> <code>--list-generations</code></p>
<h2 id="description-8"><a class="header" href="#description-8">Description</a></h2>
<p>This operation print a list of all the currently existing generations
for the active profile. These may be switched to using the
<code>--switch-generation</code> operation. It also prints the creation date of the
generation, and indicates the current generation.</p>
<h2 id="examples-7"><a class="header" href="#examples-7">Examples</a></h2>
<pre><code class="language-console">$ nix-env --list-generations
  95   2004-02-06 11:48:24
  96   2004-02-06 11:49:01
  97   2004-02-06 16:22:45
  98   2004-02-06 16:24:33   (current)
</code></pre>
<h1 id="operation---delete-generations"><a class="header" href="#operation---delete-generations">Operation <code>--delete-generations</code></a></h1>
<h2 id="synopsis-9"><a class="header" href="#synopsis-9">Synopsis</a></h2>
<p><code>nix-env</code> <code>--delete-generations</code> <em>generations</em></p>
<h2 id="description-9"><a class="header" href="#description-9">Description</a></h2>
<p>This operation deletes the specified generations of the current profile.
The generations can be a list of generation numbers, the special value
<code>old</code> to delete all non-current generations, a value such as <code>30d</code> to
delete all generations older than the specified number of days (except
for the generation that was active at that point in time), or a value
such as <code>+5</code> to keep the last <code>5</code> generations ignoring any newer than
current, e.g., if <code>30</code> is the current generation <code>+5</code> will delete
generation <code>25</code> and all older generations. Periodically deleting old
generations is important to make garbage collection effective.</p>
<h2 id="examples-8"><a class="header" href="#examples-8">Examples</a></h2>
<pre><code class="language-console">$ nix-env --delete-generations 3 4 8
</code></pre>
<pre><code class="language-console">$ nix-env --delete-generations +5
</code></pre>
<pre><code class="language-console">$ nix-env --delete-generations 30d
</code></pre>
<pre><code class="language-console">$ nix-env -p other_profile --delete-generations old
</code></pre>
<h1 id="operation---switch-generation"><a class="header" href="#operation---switch-generation">Operation <code>--switch-generation</code></a></h1>
<h2 id="synopsis-10"><a class="header" href="#synopsis-10">Synopsis</a></h2>
<p><code>nix-env</code> {<code>--switch-generation</code> | <code>-G</code>} <em>generation</em></p>
<h2 id="description-10"><a class="header" href="#description-10">Description</a></h2>
<p>This operation makes generation number <em>generation</em> the current
generation of the active profile. That is, if the <code>profile</code> is the path
to the active profile, then the symlink <code>profile</code> is made to point to
<code>profile-generation-link</code>, which is in turn a symlink to the actual user
environment in the Nix store.</p>
<p>Switching will fail if the specified generation does not exist.</p>
<h2 id="examples-9"><a class="header" href="#examples-9">Examples</a></h2>
<pre><code class="language-console">$ nix-env -G 42
switching from generation 50 to 42
</code></pre>
<h1 id="operation---rollback"><a class="header" href="#operation---rollback">Operation <code>--rollback</code></a></h1>
<h2 id="synopsis-11"><a class="header" href="#synopsis-11">Synopsis</a></h2>
<p><code>nix-env</code> <code>--rollback</code></p>
<h2 id="description-11"><a class="header" href="#description-11">Description</a></h2>
<p>This operation switches to the “previous” generation of the active
profile, that is, the highest numbered generation lower than the current
generation, if it exists. It is just a convenience wrapper around
<code>--list-generations</code> and <code>--switch-generation</code>.</p>
<h2 id="examples-10"><a class="header" href="#examples-10">Examples</a></h2>
<pre><code class="language-console">$ nix-env --rollback
switching from generation 92 to 91
</code></pre>
<pre><code class="language-console">$ nix-env --rollback
error: no generation older than the current (91) exists
</code></pre>
<h1 id="environment-variables"><a class="header" href="#environment-variables">Environment variables</a></h1>
<ul>
<li><code>NIX_PROFILE</code><br />
Location of the Nix profile. Defaults to the target of the symlink
<code>~/.nix-profile</code>, if it exists, or <code>/nix/var/nix/profiles/default</code>
otherwise.</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../command-ref/main-commands.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../command-ref/nix-build.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../command-ref/main-commands.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../command-ref/nix-build.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->
        <script src="../redirects.js"></script>


    </div>
    </body>
</html>
